"use strict";var tXe=Object.create;var __=Object.defineProperty;var tAe=Object.getOwnPropertyDescriptor;var rXe=Object.getOwnPropertyNames;var nXe=Object.getPrototypeOf,iXe=Object.prototype.hasOwnProperty;var Zge=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),eAe=t=>{throw TypeError(t)};var s=(t,e)=>__(t,"name",{value:e,configurable:!0});var oXe=(t,e)=>()=>(t&&(e=t(t=0)),e);var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),u1=(t,e)=>{for(var r in e)__(t,r,{get:e[r],enumerable:!0})},rAe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of rXe(e))!iXe.call(t,i)&&i!==r&&__(t,i,{get:()=>e[i],enumerable:!(n=tAe(e,i))||n.enumerable});return t};var je=(t,e,r)=>(r=t!=null?tXe(nXe(t)):{},rAe(e||!t||!t.__esModule?__(r,"default",{value:t,enumerable:!0}):r,t)),sXe=t=>rAe(__({},"__esModule",{value:!0}),t),Cu=(t,e,r,n)=>{for(var i=n>1?void 0:n?tAe(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&__(e,r,i),i},Bs=(t,e)=>(r,n)=>e(r,n,t);var $J=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&eAe("Object expected");var n,i;r&&(n=e[Zge("asyncDispose")]),n===void 0&&(n=e[Zge("dispose")],r&&(i=n)),typeof n!="function"&&eAe("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},zJ=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(r)throw e};return o()};var importMetaUrlShim,f=oXe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var iAe=G(YJ=>{f();var nAe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");YJ.encode=function(t){if(0<=t&&t<nAe.length)return nAe[t];throw new TypeError("Must be between 0 and 63: "+t)};YJ.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var XJ=G(JJ=>{f();var oAe=iAe(),KJ=5,sAe=1<<KJ,aAe=sAe-1,lAe=sAe;function aXe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(aXe,"toVLQSigned");function lXe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(lXe,"fromVLQSigned");JJ.encode=s(function(e){var r="",n,i=aXe(e);do n=i&aAe,i>>>=KJ,i>0&&(n|=lAe),r+=oAe.encode(n);while(i>0);return r},"base64VLQ_encode");JJ.decode=s(function(e,r,n){var i=e.length,o=0,a=0,l,c;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=oAe.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));l=!!(c&lAe),c&=aAe,o=o+(c<<a),a+=KJ}while(l);n.value=lXe(o),n.rest=r},"base64VLQ_decode")});var k_=G(Lc=>{f();function cXe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(cXe,"getArg");Lc.getArg=cXe;var cAe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,uXe=/^data:.+\,.+$/;function fB(t){var e=t.match(cAe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(fB,"urlParse");Lc.urlParse=fB;function S_(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(S_,"urlGenerate");Lc.urlGenerate=S_;function ZJ(t){var e=t,r=fB(t);if(r){if(!r.path)return t;e=r.path}for(var n=Lc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,S_(r)):e}s(ZJ,"normalize");Lc.normalize=ZJ;function uAe(t,e){t===""&&(t="."),e===""&&(e=".");var r=fB(e),n=fB(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),S_(r);if(r||e.match(uXe))return e;if(n&&!n.host&&!n.path)return n.host=e,S_(n);var i=e.charAt(0)==="/"?e:ZJ(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,S_(n)):i}s(uAe,"join");Lc.join=uAe;Lc.isAbsolute=function(t){return t.charAt(0)==="/"||cAe.test(t)};function dXe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(dXe,"relative");Lc.relative=dXe;var dAe=function(){var t=Object.create(null);return!("__proto__"in t)}();function fAe(t){return t}s(fAe,"identity");function fXe(t){return pAe(t)?"$"+t:t}s(fXe,"toSetString");Lc.toSetString=dAe?fAe:fXe;function pXe(t){return pAe(t)?t.slice(1):t}s(pXe,"fromSetString");Lc.fromSetString=dAe?fAe:pXe;function pAe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(pAe,"isProtoString");function mXe(t,e,r){var n=R_(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:R_(t.name,e.name)}s(mXe,"compareByOriginalPositions");Lc.compareByOriginalPositions=mXe;function hXe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=R_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:R_(t.name,e.name)}s(hXe,"compareByGeneratedPositionsDeflated");Lc.compareByGeneratedPositionsDeflated=hXe;function R_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(R_,"strcmp");function gXe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=R_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:R_(t.name,e.name)}s(gXe,"compareByGeneratedPositionsInflated");Lc.compareByGeneratedPositionsInflated=gXe;function AXe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(AXe,"parseSourceMapInput");Lc.parseSourceMapInput=AXe;function yXe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=fB(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=uAe(S_(n),e)}return ZJ(e)}s(yXe,"computeSourceURL");Lc.computeSourceURL=yXe});var rX=G(mAe=>{f();var eX=k_(),tX=Object.prototype.hasOwnProperty,JE=typeof Map<"u";function d1(){this._array=[],this._set=JE?new Map:Object.create(null)}s(d1,"ArraySet");d1.fromArray=s(function(e,r){for(var n=new d1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");d1.prototype.size=s(function(){return JE?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");d1.prototype.add=s(function(e,r){var n=JE?e:eX.toSetString(e),i=JE?this.has(e):tX.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(JE?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");d1.prototype.has=s(function(e){if(JE)return this._set.has(e);var r=eX.toSetString(e);return tX.call(this._set,r)},"ArraySet_has");d1.prototype.indexOf=s(function(e){if(JE){var r=this._set.get(e);if(r>=0)return r}else{var n=eX.toSetString(e);if(tX.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");d1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");d1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");mAe.ArraySet=d1});var AAe=G(gAe=>{f();var hAe=k_();function CXe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||hAe.compareByGeneratedPositionsInflated(t,e)<=0}s(CXe,"generatedPositionAfter");function Q7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(Q7,"MappingList");Q7.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");Q7.prototype.add=s(function(e){CXe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");Q7.prototype.toArray=s(function(){return this._sorted||(this._array.sort(hAe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");gAe.MappingList=Q7});var nX=G(yAe=>{f();var pB=XJ(),qa=k_(),O7=rX().ArraySet,xXe=AAe().MappingList;function Af(t){t||(t={}),this._file=qa.getArg(t,"file",null),this._sourceRoot=qa.getArg(t,"sourceRoot",null),this._skipValidation=qa.getArg(t,"skipValidation",!1),this._sources=new O7,this._names=new O7,this._mappings=new xXe,this._sourcesContents=null}s(Af,"SourceMapGenerator");Af.prototype._version=3;Af.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Af({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=qa.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=qa.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Af.prototype.addMapping=s(function(e){var r=qa.getArg(e,"generated"),n=qa.getArg(e,"original",null),i=qa.getArg(e,"source",null),o=qa.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Af.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=qa.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[qa.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[qa.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Af.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=qa.relative(o,i));var a=new O7,l=new O7;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=qa.join(n,c.source)),o!=null&&(c.source=qa.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=qa.join(n,c)),o!=null&&(c=qa.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");Af.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Af.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(h>0){if(!qa.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=pB.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=pB.encode(p-a),a=p,c+=pB.encode(u.originalLine-1-i),i=u.originalLine-1,c+=pB.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=pB.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");Af.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=qa.relative(r,n));var i=qa.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Af.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Af.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");yAe.SourceMapGenerator=Af});var CAe=G(XE=>{f();XE.GREATEST_LOWER_BOUND=1;XE.LEAST_UPPER_BOUND=2;function iX(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,l=i(r,n[a],!0);return l===0?a:l>0?e-a>1?iX(a,e,r,n,i,o):o==XE.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?iX(t,a,r,n,i,o):o==XE.LEAST_UPPER_BOUND?a:t<0?-1:t}s(iX,"recursiveSearch");XE.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=iX(-1,r.length,e,r,n,i||XE.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var vAe=G(xAe=>{f();function oX(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(oX,"swap");function vXe(t,e){return Math.round(t+Math.random()*(e-t))}s(vXe,"randomIntInRange");function sX(t,e,r,n){if(r<n){var i=vXe(r,n),o=r-1;oX(t,i,n);for(var a=t[n],l=r;l<n;l++)e(t[l],a)<=0&&(o+=1,oX(t,o,l));oX(t,o+1,l);var c=o+1;sX(t,e,r,c-1),sX(t,e,c+1,n)}}s(sX,"doQuickSort");xAe.quickSort=function(t,e){sX(t,e,0,t.length-1)}});var EAe=G(U7=>{f();var wr=k_(),aX=CAe(),B_=rX().ArraySet,bXe=XJ(),mB=vAe().quickSort;function as(t,e){var r=t;return typeof t=="string"&&(r=wr.parseSourceMapInput(t)),r.sections!=null?new em(r,e):new sc(r,e)}s(as,"SourceMapConsumer");as.fromSourceMap=function(t,e){return sc.fromSourceMap(t,e)};as.prototype._version=3;as.prototype.__generatedMappings=null;Object.defineProperty(as.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});as.prototype.__originalMappings=null;Object.defineProperty(as.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});as.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");as.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");as.GENERATED_ORDER=1;as.ORIGINAL_ORDER=2;as.GREATEST_LOWER_BOUND=1;as.LEAST_UPPER_BOUND=2;as.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||as.GENERATED_ORDER,a;switch(o){case as.GENERATED_ORDER:a=this._generatedMappings;break;case as.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=wr.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");as.prototype.allGeneratedPositionsFor=s(function(e){var r=wr.getArg(e,"line"),n={source:wr.getArg(e,"source"),originalLine:r,originalColumn:wr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",wr.compareByOriginalPositions,aX.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:wr.getArg(a,"generatedLine",null),column:wr.getArg(a,"generatedColumn",null),lastColumn:wr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==c;)i.push({line:wr.getArg(a,"generatedLine",null),column:wr.getArg(a,"generatedColumn",null),lastColumn:wr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");U7.SourceMapConsumer=as;function sc(t,e){var r=t;typeof t=="string"&&(r=wr.parseSourceMapInput(t));var n=wr.getArg(r,"version"),i=wr.getArg(r,"sources"),o=wr.getArg(r,"names",[]),a=wr.getArg(r,"sourceRoot",null),l=wr.getArg(r,"sourcesContent",null),c=wr.getArg(r,"mappings"),u=wr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=wr.normalize(a)),i=i.map(String).map(wr.normalize).map(function(d){return a&&wr.isAbsolute(a)&&wr.isAbsolute(d)?wr.relative(a,d):d}),this._names=B_.fromArray(o.map(String),!0),this._sources=B_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return wr.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(sc,"BasicSourceMapConsumer");sc.prototype=Object.create(as.prototype);sc.prototype.consumer=as;sc.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=wr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};sc.fromSourceMap=s(function(e,r){var n=Object.create(sc.prototype),i=n._names=B_.fromArray(e._names.toArray(),!0),o=n._sources=B_.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return wr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),l=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new bAe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return mB(n.__originalMappings,wr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");sc.prototype._version=3;Object.defineProperty(sc.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function bAe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(bAe,"Mapping");sc.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")n++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new bAe,y.generatedLine=n,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)bXe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}mB(g,wr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,mB(h,wr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");sc.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return aX.search(e,r,o,a)},"SourceMapConsumer_findMapping");sc.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");sc.prototype.originalPositionFor=s(function(e){var r={generatedLine:wr.getArg(e,"line"),generatedColumn:wr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",wr.compareByGeneratedPositionsDeflated,wr.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=wr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=wr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=wr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:wr.getArg(i,"originalLine",null),column:wr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");sc.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");sc.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=wr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=wr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");sc.prototype.generatedPositionFor=s(function(e){var r=wr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:wr.getArg(e,"line"),originalColumn:wr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",wr.compareByOriginalPositions,wr.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:wr.getArg(o,"generatedLine",null),column:wr.getArg(o,"generatedColumn",null),lastColumn:wr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");U7.BasicSourceMapConsumer=sc;function em(t,e){var r=t;typeof t=="string"&&(r=wr.parseSourceMapInput(t));var n=wr.getArg(r,"version"),i=wr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new B_,this._names=new B_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=wr.getArg(a,"offset"),c=wr.getArg(l,"line"),u=wr.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new as(wr.getArg(a,"map"),e)}})}s(em,"IndexedSourceMapConsumer");em.prototype=Object.create(as.prototype);em.prototype.constructor=as;em.prototype._version=3;Object.defineProperty(em.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});em.prototype.originalPositionFor=s(function(e){var r={generatedLine:wr.getArg(e,"line"),generatedColumn:wr.getArg(e,"column")},n=aX.search(r,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");em.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");em.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");em.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(wr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");em.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=wr.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}mB(this.__generatedMappings,wr.compareByGeneratedPositionsDeflated),mB(this.__originalMappings,wr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");U7.IndexedSourceMapConsumer=em});var TAe=G(IAe=>{f();var EXe=nX().SourceMapGenerator,q7=k_(),IXe=/(\r?\n)/,TXe=10,P_="$$$isSourceNode$$$";function e0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[P_]=!0,n!=null&&this.add(n)}s(e0,"SourceNode");e0.fromStringWithSourceMap=s(function(e,r,n){var i=new e0,o=e.split(IXe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return r.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=q7.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?q7.join(n,m.source):m.source;i.add(new e0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");e0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[P_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");e0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[P_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");e0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[P_]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");e0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");e0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[P_]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");e0.prototype.setSourceContent=s(function(e,r){this.sourceContents[q7.toSetString(e)]=r},"SourceNode_setSourceContent");e0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][P_]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(q7.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");e0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");e0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new EXe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){r.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===TXe?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name})):r.column++}),this.walkSourceContents(function(u,d){n.setSourceContent(u,d)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");IAe.SourceNode=e0});var wAe=G(W7=>{f();W7.SourceMapGenerator=nX().SourceMapGenerator;W7.SourceMapConsumer=EAe().SourceMapConsumer;W7.SourceNode=TAe().SourceNode});var SAe=G((b$t,_Ae)=>{f();var wXe=Object.prototype.toString,lX=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function _Xe(t){return wXe.call(t).slice(8,-1)==="ArrayBuffer"}s(_Xe,"isArrayBuffer");function SXe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return lX?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(SXe,"fromArrayBuffer");function RXe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return lX?Buffer.from(t,e):new Buffer(t,e)}s(RXe,"fromString");function kXe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return _Xe(t)?SXe(t,e,r):typeof t=="string"?RXe(t,e):lX?Buffer.from(t):new Buffer(t)}s(kXe,"bufferFrom");_Ae.exports=kXe});var FAe=G((eI,fX)=>{f();var BXe=wAe().SourceMapConsumer,cX=require("path"),tg;try{tg=require("fs"),(!tg.existsSync||!tg.readFileSync)&&(tg=null)}catch{}var PXe=SAe();function RAe(t,e){return t.require(e)}s(RAe,"dynamicRequire");var kAe=!1,BAe=!1,uX=!1,hB="auto",ZE={},gB={},DXe=/^data:application\/json[^,]+base64,/,gx=[],Ax=[];function pX(){return hB==="browser"?!0:hB==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(pX,"isInBrowser");function NXe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(NXe,"hasGlobalProcessEventEmitter");function LXe(){return typeof process=="object"&&process!==null?process.version:""}s(LXe,"globalProcessVersion");function FXe(){if(typeof process=="object"&&process!==null)return process.stderr}s(FXe,"globalProcessStderr");function MXe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(MXe,"globalProcessExit");function G7(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(G7,"handlerExec");var mX=G7(gx);gx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in ZE)return ZE[t];var e="";try{if(tg)tg.existsSync(t)&&(e=tg.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return ZE[t]=e});function dX(t,e){if(!t)return e;var r=cX.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+cX.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+cX.resolve(r.slice(i.length),e)}s(dX,"supportRelativeURL");function QXe(t){var e;if(pX())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=mX(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(QXe,"retrieveSourceMapURL");var hX=G7(Ax);Ax.push(function(t){var e=QXe(t);if(!e)return null;var r;if(DXe.test(e)){var n=e.slice(e.indexOf(",")+1);r=PXe(n,"base64").toString(),e=t}else e=dX(t,e),r=mX(e);return r?{url:e,map:r}:null});function gX(t){var e=gB[t.source];if(!e){var r=hX(t.source);r?(e=gB[t.source]={url:r.url,map:new BXe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=dX(e.url,i);ZE[l]=a}})):e=gB[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=dX(e.url,n.source),n}return t}s(gX,"mapSourcePosition");function DAe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=gX({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+DAe(e[2])+")":t}s(DAe,"mapEvalOrigin");function OXe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(OXe,"CallSiteToString");function PAe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=OXe,e}s(PAe,"cloneCallSite");function NAe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(LXe())?0:62;n===1&&i>a&&!pX()&&!t.isEval()&&(i-=a);var l=gX({source:r,line:n,column:i});e.curPosition=l,t=PAe(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=DAe(u),t=PAe(t),t.getEvalOrigin=function(){return u}),t}s(NAe,"wrapCallSite");function UXe(t,e){uX&&(ZE={},gB={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+NAe(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(UXe,"prepareStackTrace");function LAe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=ZE[r];if(!o&&tg&&tg.existsSync(r))try{o=tg.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(LAe,"getErrorSource");function qXe(t){var e=LAe(t),r=FXe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),MXe(1)}s(qXe,"printErrorAndExit");function WXe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return qXe(arguments[1])}return t.apply(this,arguments)}}s(WXe,"shimEmitUncaughtException");var GXe=gx.slice(0),HXe=Ax.slice(0);eI.wrapCallSite=NAe;eI.getErrorSource=LAe;eI.mapSourcePosition=gX;eI.retrieveSourceMap=hX;eI.install=function(t){if(t=t||{},t.environment&&(hB=t.environment,["node","browser","auto"].indexOf(hB)===-1))throw new Error("environment "+hB+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(gx.length=0),gx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Ax.length=0),Ax.unshift(t.retrieveSourceMap)),t.hookRequire&&!pX()){var e=RAe(fX,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return ZE[a]=o,gB[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(uX||(uX="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),kAe||(kAe=!0,Error.prepareStackTrace=UXe),!BAe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=RAe(fX,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&NXe()&&(BAe=!0,WXe())}};eI.resetRetrieveHandlers=function(){gx.length=0,Ax.length=0,gx=GXe.slice(0),Ax=HXe.slice(0),hX=G7(Ax),mX=G7(gx)}});var Pi=G((j7,OAe)=>{f();(function(t,e){typeof j7=="object"?OAe.exports=j7=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(j7,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=r?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,B=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<B;N++){var W=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=W<<24-(k+N)%4*8}else for(var ee=0;ee<B;ee+=4)E[k+ee>>>2]=_[ee>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,B=_.sigBytes,N=this.blockSize,W=N*4,ee=B/W;b?ee=e.ceil(ee):ee=e.max((ee|0)-this._minBufferSize,0);var me=ee*N,ae=e.min(me*4,B);if(me){for(var H=0;H<me;H+=N)this._doProcessBlock(k,H);E=k.splice(0,me),_.sigBytes-=ae}return new u.init(E,ae)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var vB=G((V7,UAe)=>{f();(function(t,e){typeof V7=="object"?UAe.exports=V7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(V7,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var WAe=G(($7,qAe)=>{f();(function(t,e){typeof $7=="object"?qAe.exports=$7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})($7,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var HAe=G((z7,GAe)=>{f();(function(t,e){typeof z7=="object"?GAe.exports=z7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(z7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return n.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return n.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var Cx=G((Y7,jAe)=>{f();(function(t,e){typeof Y7=="object"?jAe.exports=Y7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Y7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var $Ae=G((K7,VAe)=>{f();(function(t,e){typeof K7=="object"?VAe.exports=K7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(K7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var xx=G((J7,zAe)=>{f();(function(t,e){typeof J7=="object"?zAe.exports=J7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(J7,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],B=h[g+2],N=h[g+3],W=h[g+4],ee=h[g+5],me=h[g+6],ae=h[g+7],H=h[g+8],U=h[g+9],le=h[g+10],ie=h[g+11],V=h[g+12],O=h[g+13],Y=h[g+14],te=h[g+15],pe=E[0],re=E[1],ue=E[2],he=E[3];pe=u(pe,re,ue,he,_,7,l[0]),he=u(he,pe,re,ue,k,12,l[1]),ue=u(ue,he,pe,re,B,17,l[2]),re=u(re,ue,he,pe,N,22,l[3]),pe=u(pe,re,ue,he,W,7,l[4]),he=u(he,pe,re,ue,ee,12,l[5]),ue=u(ue,he,pe,re,me,17,l[6]),re=u(re,ue,he,pe,ae,22,l[7]),pe=u(pe,re,ue,he,H,7,l[8]),he=u(he,pe,re,ue,U,12,l[9]),ue=u(ue,he,pe,re,le,17,l[10]),re=u(re,ue,he,pe,ie,22,l[11]),pe=u(pe,re,ue,he,V,7,l[12]),he=u(he,pe,re,ue,O,12,l[13]),ue=u(ue,he,pe,re,Y,17,l[14]),re=u(re,ue,he,pe,te,22,l[15]),pe=d(pe,re,ue,he,k,5,l[16]),he=d(he,pe,re,ue,me,9,l[17]),ue=d(ue,he,pe,re,ie,14,l[18]),re=d(re,ue,he,pe,_,20,l[19]),pe=d(pe,re,ue,he,ee,5,l[20]),he=d(he,pe,re,ue,le,9,l[21]),ue=d(ue,he,pe,re,te,14,l[22]),re=d(re,ue,he,pe,W,20,l[23]),pe=d(pe,re,ue,he,U,5,l[24]),he=d(he,pe,re,ue,Y,9,l[25]),ue=d(ue,he,pe,re,N,14,l[26]),re=d(re,ue,he,pe,H,20,l[27]),pe=d(pe,re,ue,he,O,5,l[28]),he=d(he,pe,re,ue,B,9,l[29]),ue=d(ue,he,pe,re,ae,14,l[30]),re=d(re,ue,he,pe,V,20,l[31]),pe=p(pe,re,ue,he,ee,4,l[32]),he=p(he,pe,re,ue,H,11,l[33]),ue=p(ue,he,pe,re,ie,16,l[34]),re=p(re,ue,he,pe,Y,23,l[35]),pe=p(pe,re,ue,he,k,4,l[36]),he=p(he,pe,re,ue,W,11,l[37]),ue=p(ue,he,pe,re,ae,16,l[38]),re=p(re,ue,he,pe,le,23,l[39]),pe=p(pe,re,ue,he,O,4,l[40]),he=p(he,pe,re,ue,_,11,l[41]),ue=p(ue,he,pe,re,N,16,l[42]),re=p(re,ue,he,pe,me,23,l[43]),pe=p(pe,re,ue,he,U,4,l[44]),he=p(he,pe,re,ue,V,11,l[45]),ue=p(ue,he,pe,re,te,16,l[46]),re=p(re,ue,he,pe,B,23,l[47]),pe=m(pe,re,ue,he,_,6,l[48]),he=m(he,pe,re,ue,ae,10,l[49]),ue=m(ue,he,pe,re,Y,15,l[50]),re=m(re,ue,he,pe,ee,21,l[51]),pe=m(pe,re,ue,he,V,6,l[52]),he=m(he,pe,re,ue,N,10,l[53]),ue=m(ue,he,pe,re,le,15,l[54]),re=m(re,ue,he,pe,k,21,l[55]),pe=m(pe,re,ue,he,H,6,l[56]),he=m(he,pe,re,ue,te,10,l[57]),ue=m(ue,he,pe,re,me,15,l[58]),re=m(re,ue,he,pe,O,21,l[59]),pe=m(pe,re,ue,he,W,6,l[60]),he=m(he,pe,re,ue,ie,10,l[61]),ue=m(ue,he,pe,re,B,15,l[62]),re=m(re,ue,he,pe,U,21,l[63]),E[0]=E[0]+pe|0,E[1]=E[1]+re|0,E[2]=E[2]+ue|0,E[3]=E[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,B=0;B<4;B++){var N=k[B];k[B]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),r.MD5=o._createHelper(c),r.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var AX=G((X7,YAe)=>{f();(function(t,e){typeof X7=="object"?YAe.exports=X7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(X7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var eL=G((Z7,KAe)=>{f();(function(t,e){typeof Z7=="object"?KAe.exports=Z7=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Z7,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],B=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var W=u[N-15],ee=(W<<25|W>>>7)^(W<<14|W>>>18)^W>>>3,me=u[N-2],ae=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;u[N]=ee+u[N-7]+ae+u[N-16]}var H=E&_^~E&k,U=g&y^g&v^y&v,le=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),V=B+ie+H+c[N]+u[N],O=le+U;B=k,k=_,_=E,E=b+V|0,b=v,v=y,y=g,g=V+O|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(d),r.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var XAe=G((tL,JAe)=>{f();(function(t,e,r){typeof tL=="object"?JAe.exports=tL=e(Pi(),eL()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(tL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var yX=G((rL,ZAe)=>{f();(function(t,e,r){typeof rL=="object"?ZAe.exports=rL=e(Pi(),vB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(rL,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],B=g[6],N=g[7],W=y.high,ee=y.low,me=v.high,ae=v.low,H=b.high,U=b.low,le=E.high,ie=E.low,V=_.high,O=_.low,Y=k.high,te=k.low,pe=B.high,re=B.low,ue=N.high,he=N.low,Ne=W,Se=ee,Je=me,Me=ae,ft=H,It=U,yt=le,vt=ie,ce=V,Oe=O,ye=Y,tt=te,X=pe,ne=re,We=ue,De=he,be=0;be<80;be++){var ze,it,ht=d[be];if(be<16)it=ht.high=m[h+be*2]|0,ze=ht.low=m[h+be*2+1]|0;else{var Ot=d[be-15],lr=Ot.high,Lt=Ot.low,qr=(lr>>>1|Lt<<31)^(lr>>>8|Lt<<24)^lr>>>7,$r=(Lt>>>1|lr<<31)^(Lt>>>8|lr<<24)^(Lt>>>7|lr<<25),dn=d[be-2],Ae=dn.high,Ge=dn.low,ut=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,At=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Xt=d[be-7],Gt=Xt.high,Ar=Xt.low,xr=d[be-16],jt=xr.high,rr=xr.low;ze=$r+Ar,it=qr+Gt+(ze>>>0<$r>>>0?1:0),ze=ze+At,it=it+ut+(ze>>>0<At>>>0?1:0),ze=ze+rr,it=it+jt+(ze>>>0<rr>>>0?1:0),ht.high=it,ht.low=ze}var Jt=ce&ye^~ce&X,Ir=Oe&tt^~Oe&ne,Lr=Ne&Je^Ne&ft^Je&ft,zr=Se&Me^Se&It^Me&It,qn=(Ne>>>28|Se<<4)^(Ne<<30|Se>>>2)^(Ne<<25|Se>>>7),Kn=(Se>>>28|Ne<<4)^(Se<<30|Ne>>>2)^(Se<<25|Ne>>>7),Mn=(ce>>>14|Oe<<18)^(ce>>>18|Oe<<14)^(ce<<23|Oe>>>9),Vn=(Oe>>>14|ce<<18)^(Oe>>>18|ce<<14)^(Oe<<23|ce>>>9),Zr=u[be],$n=Zr.high,_e=Zr.low,q=De+Vn,ge=We+Mn+(q>>>0<De>>>0?1:0),q=q+Ir,ge=ge+Jt+(q>>>0<Ir>>>0?1:0),q=q+_e,ge=ge+$n+(q>>>0<_e>>>0?1:0),q=q+ze,ge=ge+it+(q>>>0<ze>>>0?1:0),ve=Kn+zr,Z=qn+Lr+(ve>>>0<Kn>>>0?1:0);We=X,De=ne,X=ye,ne=tt,ye=ce,tt=Oe,Oe=vt+q|0,ce=yt+ge+(Oe>>>0<vt>>>0?1:0)|0,yt=ft,vt=It,ft=Je,It=Me,Je=Ne,Me=Se,Se=q+ve|0,Ne=ge+Z+(Se>>>0<q>>>0?1:0)|0}ee=y.low=ee+Se,y.high=W+Ne+(ee>>>0<Se>>>0?1:0),ae=v.low=ae+Me,v.high=me+Je+(ae>>>0<Me>>>0?1:0),U=b.low=U+It,b.high=H+ft+(U>>>0<It>>>0?1:0),ie=E.low=ie+vt,E.high=le+yt+(ie>>>0<vt>>>0?1:0),O=_.low=O+Oe,_.high=V+ce+(O>>>0<Oe>>>0?1:0),te=k.low=te+tt,k.high=Y+ye+(te>>>0<tt>>>0?1:0),re=B.low=re+ne,B.high=pe+X+(re>>>0<ne>>>0?1:0),he=N.low=he+De,N.high=ue+We+(he>>>0<De>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var t1e=G((nL,e1e)=>{f();(function(t,e,r){typeof nL=="object"?e1e.exports=nL=e(Pi(),vB(),yX()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(nL,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var n1e=G((iL,r1e)=>{f();(function(t,e,r){typeof iL=="object"?r1e.exports=iL=e(Pi(),vB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(iL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,l=a.Word,c=r.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var B=0,N=0,W=0;W<7;W++){if(_&1){var ee=(1<<W)-1;ee<32?N^=1<<ee:B^=1<<ee-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(B,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var B=v[E];B.high^=k,B.low^=_}for(var N=0;N<24;N++){for(var W=0;W<5;W++){for(var ee=0,me=0,ae=0;ae<5;ae++){var B=v[W+5*ae];ee^=B.high,me^=B.low}var H=m[W];H.high=ee,H.low=me}for(var W=0;W<5;W++)for(var U=m[(W+4)%5],le=m[(W+1)%5],ie=le.high,V=le.low,ee=U.high^(ie<<1|V>>>31),me=U.low^(V<<1|ie>>>31),ae=0;ae<5;ae++){var B=v[W+5*ae];B.high^=ee,B.low^=me}for(var O=1;O<25;O++){var ee,me,B=v[O],Y=B.high,te=B.low,pe=u[O];pe<32?(ee=Y<<pe|te>>>32-pe,me=te<<pe|Y>>>32-pe):(ee=te<<pe-32|Y>>>64-pe,me=Y<<pe-32|te>>>64-pe);var re=m[d[O]];re.high=ee,re.low=me}var ue=m[0],he=v[0];ue.high=he.high,ue.low=he.low;for(var W=0;W<5;W++)for(var ae=0;ae<5;ae++){var O=W+5*ae,B=v[O],Ne=m[O],Se=m[(W+1)%5+5*ae],Je=m[(W+2)%5+5*ae];B.high=Ne.high^~Se.high&Je.high,B.low=Ne.low^~Se.low&Je.low}var B=v[0],Me=p[N];B.high^=Me.high,B.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,B=k/8,N=[],W=0;W<B;W++){var ee=_[W],me=ee.high,ae=ee.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,ae=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360,N.push(ae),N.push(me)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var o1e=G((oL,i1e)=>{f();(function(t,e){typeof oL=="object"?i1e.exports=oL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(oL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,B){for(var N=0;N<16;N++){var W=B+N,ee=k[W];k[W]=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360}var me=this._hash.words,ae=p.words,H=m.words,U=l.words,le=c.words,ie=u.words,V=d.words,O,Y,te,pe,re,ue,he,Ne,Se,Je;ue=O=me[0],he=Y=me[1],Ne=te=me[2],Se=pe=me[3],Je=re=me[4];for(var Me,N=0;N<80;N+=1)Me=O+k[B+U[N]]|0,N<16?Me+=g(Y,te,pe)+ae[0]:N<32?Me+=y(Y,te,pe)+ae[1]:N<48?Me+=v(Y,te,pe)+ae[2]:N<64?Me+=b(Y,te,pe)+ae[3]:Me+=E(Y,te,pe)+ae[4],Me=Me|0,Me=_(Me,ie[N]),Me=Me+re|0,O=re,re=pe,pe=_(te,10),te=Y,Y=Me,Me=ue+k[B+le[N]]|0,N<16?Me+=E(he,Ne,Se)+H[0]:N<32?Me+=b(he,Ne,Se)+H[1]:N<48?Me+=v(he,Ne,Se)+H[2]:N<64?Me+=y(he,Ne,Se)+H[3]:Me+=g(he,Ne,Se)+H[4],Me=Me|0,Me=_(Me,V[N]),Me=Me+Je|0,ue=Je,Je=Se,Se=_(Ne,10),Ne=he,he=Me;Me=me[1]+te+Se|0,me[1]=me[2]+pe+Je|0,me[2]=me[3]+re+ue|0,me[3]=me[4]+O+he|0,me[4]=me[0]+Y+Ne|0,me[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,B=k.words,N=this._nDataBytes*8,W=k.sigBytes*8;B[W>>>5]|=128<<24-W%32,B[(W+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(B.length+1)*4,this._process();for(var ee=this._hash,me=ee.words,ae=0;ae<5;ae++){var H=me[ae];me[ae]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return ee},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,B,N){return k^B^N}s(g,"f1");function y(k,B,N){return k&B|~k&N}s(y,"f2");function v(k,B,N){return(k|~B)^N}s(v,"f3");function b(k,B,N){return k&N|B&~N}s(b,"f4");function E(k,B,N){return k^(B|~N)}s(E,"f5");function _(k,B){return k<<B|k>>>32-B}s(_,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var aL=G((sL,s1e)=>{f();(function(t,e){typeof sL=="object"?s1e.exports=sL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(sL,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=n.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var l1e=G((lL,a1e)=>{f();(function(t,e,r){typeof lL=="object"?a1e.exports=lL=e(Pi(),eL(),aL()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(lL,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,B=k.length,N=_,W=1;W<E;W++){N=m.finalize(N),m.reset();for(var ee=N.words,me=0;me<B;me++)k[me]^=ee[me]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var f1=G((cL,c1e)=>{f();(function(t,e,r){typeof cL=="object"?c1e.exports=cL=e(Pi(),AX(),aL()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(cL,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var ul=G((uL,u1e)=>{f();(function(t,e,r){typeof uL=="object"?u1e.exports=uL=e(Pi(),f1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(uL,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,l=r.enc,c=l.Utf8,u=l.Base64,d=r.algo,p=d.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,U){return this.create(this._ENC_XFORM_MODE,H,U)},"createEncryptor"),createDecryptor:s(function(H,U){return this.create(this._DEC_XFORM_MODE,H,U)},"createDecryptor"),init:s(function(H,U,le){this.cfg=this.cfg.extend(le),this._xformMode=H,this._key=U,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var U=this._doFinalize();return U},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(U){return typeof U=="string"?ae:W}return s(H,"selectCipherStrategy"),function(U){return{encrypt:s(function(le,ie,V){return H(ie).encrypt(U,le,ie,V)},"encrypt"),decrypt:s(function(le,ie,V){return H(ie).decrypt(U,le,ie,V)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:s(function(H,U){return this.Encryptor.create(H,U)},"createEncryptor"),createDecryptor:s(function(H,U){return this.Decryptor.create(H,U)},"createDecryptor"),init:s(function(H,U){this._cipher=H,this._iv=U},"init")}),v=g.CBC=function(){var H=y.extend();H.Encryptor=H.extend({processBlock:s(function(le,ie){var V=this._cipher,O=V.blockSize;U.call(this,le,ie,O),V.encryptBlock(le,ie),this._prevBlock=le.slice(ie,ie+O)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(le,ie){var V=this._cipher,O=V.blockSize,Y=le.slice(ie,ie+O);V.decryptBlock(le,ie),U.call(this,le,ie,O),this._prevBlock=Y},"processBlock")});function U(le,ie,V){var O,Y=this._iv;Y?(O=Y,this._iv=e):O=this._prevBlock;for(var te=0;te<V;te++)le[ie+te]^=O[te]}return s(U,"xorBlock"),H}(),b=r.pad={},E=b.Pkcs7={pad:s(function(H,U){for(var le=U*4,ie=le-H.sigBytes%le,V=ie<<24|ie<<16|ie<<8|ie,O=[],Y=0;Y<ie;Y+=4)O.push(V);var te=o.create(O,ie);H.concat(te)},"pad"),unpad:s(function(H){var U=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=U},"unpad")},_=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var H;m.reset.call(this);var U=this.cfg,le=U.iv,ie=U.mode;this._xformMode==this._ENC_XFORM_MODE?H=ie.createEncryptor:(H=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,le&&le.words):(this._mode=H.call(ie,this,le&&le.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,U){this._mode.processBlock(H,U)},"_doProcessBlock"),_doFinalize:s(function(){var H,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),U.unpad(H)),H},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),B=r.format={},N=B.OpenSSL={stringify:s(function(H){var U,le=H.ciphertext,ie=H.salt;return ie?U=o.create([1398893684,1701076831]).concat(ie).concat(le):U=le,U.toString(u)},"stringify"),parse:s(function(H){var U,le=u.parse(H),ie=le.words;return ie[0]==1398893684&&ie[1]==1701076831&&(U=o.create(ie.slice(2,4)),ie.splice(0,4),le.sigBytes-=16),k.create({ciphertext:le,salt:U})},"parse")},W=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,U,le,ie){ie=this.cfg.extend(ie);var V=H.createEncryptor(le,ie),O=V.finalize(U),Y=V.cfg;return k.create({ciphertext:O,key:le,iv:Y.iv,algorithm:H,mode:Y.mode,padding:Y.padding,blockSize:H.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(H,U,le,ie){ie=this.cfg.extend(ie),U=this._parse(U,ie.format);var V=H.createDecryptor(le,ie).finalize(U.ciphertext);return V},"decrypt"),_parse:s(function(H,U){return typeof H=="string"?U.parse(H,this):H},"_parse")}),ee=r.kdf={},me=ee.OpenSSL={execute:s(function(H,U,le,ie,V){if(ie||(ie=o.random(64/8)),V)var O=p.create({keySize:U+le,hasher:V}).compute(H,ie);else var O=p.create({keySize:U+le}).compute(H,ie);var Y=o.create(O.words.slice(U),le*4);return O.sigBytes=U*4,k.create({key:O,iv:Y,salt:ie})},"execute")},ae=n.PasswordBasedCipher=W.extend({cfg:W.cfg.extend({kdf:me}),encrypt:s(function(H,U,le,ie){ie=this.cfg.extend(ie);var V=ie.kdf.execute(le,H.keySize,H.ivSize,ie.salt,ie.hasher);ie.iv=V.iv;var O=W.encrypt.call(this,H,U,V.key,ie);return O.mixIn(V),O},"encrypt"),decrypt:s(function(H,U,le,ie){ie=this.cfg.extend(ie),U=this._parse(U,ie.format);var V=ie.kdf.execute(le,H.keySize,H.ivSize,U.salt,ie.hasher);ie.iv=V.iv;var O=W.decrypt.call(this,H,U,V.key,ie);return O},"decrypt")})}()})});var f1e=G((dL,d1e)=>{f();(function(t,e,r){typeof dL=="object"?d1e.exports=dL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(dL,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=l},"processBlock")});function r(n,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)n[i+u]^=l[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var m1e=G((fL,p1e)=>{f();(function(t,e,r){typeof fL=="object"?p1e.exports=fL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(fL,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)n[i+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var g1e=G((pL,h1e)=>{f();(function(t,e,r){typeof pL=="object"?h1e.exports=pL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pL,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),n(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var y1e=G((mL,A1e)=>{f();(function(t,e,r){typeof mL=="object"?A1e.exports=mL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mL,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)n[i+u]^=c[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var x1e=G((hL,C1e)=>{f();(function(t,e,r){typeof hL=="object"?C1e.exports=hL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hL,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var b1e=G((gL,v1e)=>{f();(function(t,e,r){typeof gL=="object"?v1e.exports=gL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gL,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var I1e=G((AL,E1e)=>{f();(function(t,e,r){typeof AL=="object"?E1e.exports=AL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(AL,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var w1e=G((yL,T1e)=>{f();(function(t,e,r){typeof yL=="object"?T1e.exports=yL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yL,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var S1e=G((CL,_1e)=>{f();(function(t,e,r){typeof CL=="object"?_1e.exports=CL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(CL,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var k1e=G((xL,R1e)=>{f();(function(t,e,r){typeof xL=="object"?R1e.exports=xL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xL,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var P1e=G((vL,B1e)=>{f();(function(t,e,r){typeof vL=="object"?B1e.exports=vL=e(Pi(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vL,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,l=r.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var N1e=G((bL,D1e)=>{f();(function(t,e,r){typeof bL=="object"?D1e.exports=bL=e(Pi(),Cx(),xx(),f1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(bL,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var B=k^k<<1^k<<2^k<<3^k<<4;B=B>>>8^B&255^99,o[_]=B,a[B]=_;var N=b[_],W=b[N],ee=b[W],me=b[B]*257^B*16843008;l[_]=me<<24|me>>>8,c[_]=me<<16|me>>>16,u[_]=me<<8|me>>>24,d[_]=me;var me=ee*16843009^W*65537^N*257^_*16843008;p[B]=me<<24|me>>>8,m[B]=me<<16|me>>>16,h[B]=me<<8|me>>>24,g[B]=me,_?(_=N^b[b[b[ee^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=n.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,B=this._nRounds=k+6,N=(B+1)*4,W=this._keySchedule=[],ee=0;ee<N;ee++)ee<k?W[ee]=_[ee]:(b=W[ee-1],ee%k?k>6&&ee%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[ee/k|0]<<24),W[ee]=W[ee-k]^b);for(var me=this._invKeySchedule=[],ae=0;ae<N;ae++){var ee=N-ae;if(ae%4)var b=W[ee];else var b=W[ee-4];ae<4||ee<=4?me[ae]=b:me[ae]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,B,N,W,ee){for(var me=this._nRounds,ae=b[E]^_[0],H=b[E+1]^_[1],U=b[E+2]^_[2],le=b[E+3]^_[3],ie=4,V=1;V<me;V++){var O=k[ae>>>24]^B[H>>>16&255]^N[U>>>8&255]^W[le&255]^_[ie++],Y=k[H>>>24]^B[U>>>16&255]^N[le>>>8&255]^W[ae&255]^_[ie++],te=k[U>>>24]^B[le>>>16&255]^N[ae>>>8&255]^W[H&255]^_[ie++],pe=k[le>>>24]^B[ae>>>16&255]^N[H>>>8&255]^W[U&255]^_[ie++];ae=O,H=Y,U=te,le=pe}var O=(ee[ae>>>24]<<24|ee[H>>>16&255]<<16|ee[U>>>8&255]<<8|ee[le&255])^_[ie++],Y=(ee[H>>>24]<<24|ee[U>>>16&255]<<16|ee[le>>>8&255]<<8|ee[ae&255])^_[ie++],te=(ee[U>>>24]<<24|ee[le>>>16&255]<<16|ee[ae>>>8&255]<<8|ee[H&255])^_[ie++],pe=(ee[le>>>24]<<24|ee[ae>>>16&255]<<16|ee[H>>>8&255]<<8|ee[U&255])^_[ie++];b[E]=O,b[E+1]=Y,b[E+2]=te,b[E+3]=pe},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(v)}(),t.AES})});var F1e=G((EL,L1e)=>{f();(function(t,e,r){typeof EL=="object"?L1e.exports=EL=e(Pi(),Cx(),xx(),f1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(EL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],B=0;B<16;B++){for(var N=k[B]=[],W=c[B],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+W)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+W)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var ee=this._invSubKeys=[],E=0;E<16;E++)ee[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,B=this._rBlock,N=0,W=0;W<8;W++)N|=u[W][((B^_[W])&d[W])>>>0];this._lBlock=B,this._rBlock=k^N}var ee=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ee,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(n.create(b)),this._des2=p.createEncryptor(n.create(E)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var Q1e=G((IL,M1e)=>{f();(function(t,e,r){typeof IL=="object"?M1e.exports=IL=e(Pi(),Cx(),xx(),f1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(IL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(l)}(),t.RC4})});var U1e=G((TL,O1e)=>{f();(function(t,e,r){typeof TL=="object"?O1e.exports=TL=e(Pi(),Cx(),xx(),f1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(TL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=n.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=B,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(c)}(),t.Rabbit})});var W1e=G((wL,q1e)=>{f();(function(t,e,r){typeof wL=="object"?q1e.exports=wL=e(Pi(),Cx(),xx(),f1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(wL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=n.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=B,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(c)}(),t.RabbitLegacy})});var H1e=G((_L,G1e)=>{f();(function(t,e,r){typeof _L=="object"?G1e.exports=_L=e(Pi(),Cx(),xx(),f1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(_L,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let B=0;B<4;B++){g.sbox[B]=[];for(let N=0;N<256;N++)g.sbox[B][N]=l[B][N]}let b=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let B=0;B<o+2;B+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[B]=E,g.pbox[B+1]=_;for(let B=0;B<4;B++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[B][N]=E,g.sbox[B][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var vx=G((SL,j1e)=>{f();(function(t,e,r){typeof SL=="object"?j1e.exports=SL=e(Pi(),vB(),WAe(),HAe(),Cx(),$Ae(),xx(),AX(),eL(),XAe(),yX(),t1e(),n1e(),o1e(),aL(),l1e(),f1(),ul(),f1e(),m1e(),g1e(),y1e(),x1e(),b1e(),I1e(),w1e(),S1e(),k1e(),P1e(),N1e(),F1e(),Q1e(),U1e(),W1e(),H1e()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(SL,function(t){return t})});var lS=G(Wc=>{"use strict";f();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.stringArray=Wc.array=Wc.func=Wc.error=Wc.number=Wc.string=Wc.boolean=void 0;function ast(t){return t===!0||t===!1}s(ast,"boolean");Wc.boolean=ast;function Txe(t){return typeof t=="string"||t instanceof String}s(Txe,"string");Wc.string=Txe;function lst(t){return typeof t=="number"||t instanceof Number}s(lst,"number");Wc.number=lst;function cst(t){return t instanceof Error}s(cst,"error");Wc.error=cst;function ust(t){return typeof t=="function"}s(ust,"func");Wc.func=ust;function wxe(t){return Array.isArray(t)}s(wxe,"array");Wc.array=wxe;function dst(t){return wxe(t)&&t.every(e=>Txe(e))}s(dst,"stringArray");Wc.stringArray=dst});var HZ=G(Wr=>{"use strict";f();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.Message=Wr.NotificationType9=Wr.NotificationType8=Wr.NotificationType7=Wr.NotificationType6=Wr.NotificationType5=Wr.NotificationType4=Wr.NotificationType3=Wr.NotificationType2=Wr.NotificationType1=Wr.NotificationType0=Wr.NotificationType=Wr.RequestType9=Wr.RequestType8=Wr.RequestType7=Wr.RequestType6=Wr.RequestType5=Wr.RequestType4=Wr.RequestType3=Wr.RequestType2=Wr.RequestType1=Wr.RequestType=Wr.RequestType0=Wr.AbstractMessageSignature=Wr.ParameterStructures=Wr.ResponseError=Wr.ErrorCodes=void 0;var pI=lS(),xZ;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(xZ||(Wr.ErrorCodes=xZ={}));var vZ=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=pI.number(e)?e:xZ.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Wr.ResponseError=vZ;var cd=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Wr.ParameterStructures=cd;cd.auto=new cd("auto");cd.byPosition=new cd("byPosition");cd.byName=new cd("byName");var hs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return cd.auto}};Wr.AbstractMessageSignature=hs;var bZ=class extends hs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Wr.RequestType0=bZ;var EZ=class extends hs{static{s(this,"RequestType")}constructor(e,r=cd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Wr.RequestType=EZ;var IZ=class extends hs{static{s(this,"RequestType1")}constructor(e,r=cd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Wr.RequestType1=IZ;var TZ=class extends hs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Wr.RequestType2=TZ;var wZ=class extends hs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Wr.RequestType3=wZ;var _Z=class extends hs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Wr.RequestType4=_Z;var SZ=class extends hs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Wr.RequestType5=SZ;var RZ=class extends hs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Wr.RequestType6=RZ;var kZ=class extends hs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Wr.RequestType7=kZ;var BZ=class extends hs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Wr.RequestType8=BZ;var PZ=class extends hs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Wr.RequestType9=PZ;var DZ=class extends hs{static{s(this,"NotificationType")}constructor(e,r=cd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Wr.NotificationType=DZ;var NZ=class extends hs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Wr.NotificationType0=NZ;var LZ=class extends hs{static{s(this,"NotificationType1")}constructor(e,r=cd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Wr.NotificationType1=LZ;var FZ=class extends hs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Wr.NotificationType2=FZ;var MZ=class extends hs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Wr.NotificationType3=MZ;var QZ=class extends hs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Wr.NotificationType4=QZ;var OZ=class extends hs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Wr.NotificationType5=OZ;var UZ=class extends hs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Wr.NotificationType6=UZ;var qZ=class extends hs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Wr.NotificationType7=qZ;var WZ=class extends hs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Wr.NotificationType8=WZ;var GZ=class extends hs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Wr.NotificationType9=GZ;var _xe;(function(t){function e(i){let o=i;return o&&pI.string(o.method)&&(pI.string(o.id)||pI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&pI.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(pI.string(o.id)||pI.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(_xe||(Wr.Message=_xe={}))});var VZ=G(Px=>{"use strict";f();var Sxe;Object.defineProperty(Px,"__esModule",{value:!0});Px.LRUCache=Px.LinkedMap=Px.Touch=void 0;var Gc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Gc||(Px.Touch=Gc={}));var dF=class{static{s(this,"LinkedMap")}constructor(){this[Sxe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Gc.None){let n=this._map.get(e);if(n)return r!==Gc.None&&this.touch(n,r),n.value}set(e,r,n=Gc.None){let i=this._map.get(e);if(i)i.value=r,n!==Gc.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Gc.None:this.addItemLast(i);break;case Gc.First:this.addItemFirst(i);break;case Gc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(Sxe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Gc.First&&r!==Gc.Last)){if(r===Gc.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Gc.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Px.LinkedMap=dF;var jZ=class extends dF{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Gc.AsNew){return super.get(e,r)}peek(e){return super.get(e,Gc.None)}set(e,r){return super.set(e,r,Gc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Px.LRUCache=jZ});var kxe=G(fF=>{"use strict";f();Object.defineProperty(fF,"__esModule",{value:!0});fF.Disposable=void 0;var Rxe;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(Rxe||(fF.Disposable=Rxe={}))});var Dx=G(YZ=>{"use strict";f();Object.defineProperty(YZ,"__esModule",{value:!0});var $Z;function zZ(){if($Z===void 0)throw new Error("No runtime abstraction layer installed");return $Z}s(zZ,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");$Z=r}s(e,"install"),t.install=e})(zZ||(zZ={}));YZ.default=zZ});var uS=G(cS=>{"use strict";f();Object.defineProperty(cS,"__esModule",{value:!0});cS.Emitter=cS.Event=void 0;var fst=Dx(),Bxe;(function(t){let e={dispose(){}};t.None=function(){return e}})(Bxe||(cS.Event=Bxe={}));var KZ=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(l){(0,fst.default)().console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},pF=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new KZ),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};cS.Emitter=pF;pF._noop=function(){}});var gF=G(dS=>{"use strict";f();Object.defineProperty(dS,"__esModule",{value:!0});dS.CancellationTokenSource=dS.CancellationToken=void 0;var pst=Dx(),mst=lS(),JZ=uS(),mF;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:JZ.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:JZ.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||mst.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(mF||(dS.CancellationToken=mF={}));var hst=Object.freeze(function(t,e){let r=(0,pst.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),hF=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?hst:(this._emitter||(this._emitter=new JZ.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},XZ=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new hF),this._token}cancel(){this._token?this._token.cancel():this._token=mF.Cancelled}dispose(){this._token?this._token instanceof hF&&this._token.dispose():this._token=mF.None}};dS.CancellationTokenSource=XZ});var Pxe=G(fS=>{"use strict";f();Object.defineProperty(fS,"__esModule",{value:!0});fS.SharedArrayReceiverStrategy=fS.SharedArraySenderStrategy=void 0;var gst=gF(),WB;(function(t){t.Continue=0,t.Cancelled=1})(WB||(WB={}));var ZZ=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=WB.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,WB.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};fS.SharedArraySenderStrategy=ZZ;var eee=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===WB.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},tee=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new eee(e)}cancel(){}dispose(){}},ree=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new gst.CancellationTokenSource:new tee(r)}};fS.SharedArrayReceiverStrategy=ree});var iee=G(AF=>{"use strict";f();Object.defineProperty(AF,"__esModule",{value:!0});AF.Semaphore=void 0;var Ast=Dx(),nee=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Ast.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};AF.Semaphore=nee});var Nxe=G(Nx=>{"use strict";f();Object.defineProperty(Nx,"__esModule",{value:!0});Nx.ReadableStreamMessageReader=Nx.AbstractMessageReader=Nx.MessageReader=void 0;var see=Dx(),pS=lS(),oee=uS(),yst=iee(),Dxe;(function(t){function e(r){let n=r;return n&&pS.func(n.listen)&&pS.func(n.dispose)&&pS.func(n.onError)&&pS.func(n.onClose)&&pS.func(n.onPartialMessage)}s(e,"is"),t.is=e})(Dxe||(Nx.MessageReader=Dxe={}));var yF=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new oee.Emitter,this.closeEmitter=new oee.Emitter,this.partialMessageEmitter=new oee.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${pS.string(e.message)?e.message:"unknown"}`)}};Nx.AbstractMessageReader=yF;var aee;(function(t){function e(r){let n,i,o,a=new Map,l,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(l=r.contentTypeDecoder,c.set(l.name,l)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,see.default)().applicationJson.decoder,c.set(l.name,l)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(aee||(aee={}));var lee=class extends yF{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=aee.fromOptions(r),this.buffer=(0,see.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new yst.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,see.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Nx.ReadableStreamMessageReader=lee});var Oxe=G(Lx=>{"use strict";f();Object.defineProperty(Lx,"__esModule",{value:!0});Lx.WriteableStreamMessageWriter=Lx.AbstractMessageWriter=Lx.MessageWriter=void 0;var Lxe=Dx(),GB=lS(),Cst=iee(),Fxe=uS(),xst="Content-Length: ",Mxe=`\r
`,Qxe;(function(t){function e(r){let n=r;return n&&GB.func(n.dispose)&&GB.func(n.onClose)&&GB.func(n.onError)&&GB.func(n.write)}s(e,"is"),t.is=e})(Qxe||(Lx.MessageWriter=Qxe={}));var CF=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new Fxe.Emitter,this.closeEmitter=new Fxe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${GB.string(e.message)?e.message:"unknown"}`)}};Lx.AbstractMessageWriter=CF;var cee;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,Lxe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,Lxe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(cee||(cee={}));var uee=class extends CF{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=cee.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Cst.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(xst,n.byteLength.toString(),Mxe),i.push(Mxe),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Lx.WriteableStreamMessageWriter=uee});var Uxe=G(xF=>{"use strict";f();Object.defineProperty(xF,"__esModule",{value:!0});xF.AbstractMessageBuffer=void 0;var vst=13,bst=10,Est=`\r
`,dee=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case vst:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case bst:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(Est);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};xF.AbstractMessageBuffer=dee});var jxe=G(Jn=>{"use strict";f();Object.defineProperty(Jn,"__esModule",{value:!0});Jn.createMessageConnection=Jn.ConnectionOptions=Jn.MessageStrategy=Jn.CancellationStrategy=Jn.CancellationSenderStrategy=Jn.CancellationReceiverStrategy=Jn.RequestCancellationReceiverStrategy=Jn.IdCancellationReceiverStrategy=Jn.ConnectionStrategy=Jn.ConnectionError=Jn.ConnectionErrors=Jn.LogTraceNotification=Jn.SetTraceNotification=Jn.TraceFormat=Jn.TraceValues=Jn.Trace=Jn.NullLogger=Jn.ProgressType=Jn.ProgressToken=void 0;var qxe=Dx(),Ys=lS(),wn=HZ(),Wxe=VZ(),HB=uS(),fee=gF(),$B;(function(t){t.type=new wn.NotificationType("$/cancelRequest")})($B||($B={}));var pee;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(pee||(Jn.ProgressToken=pee={}));var jB;(function(t){t.type=new wn.NotificationType("$/progress")})(jB||(jB={}));var mee=class{static{s(this,"ProgressType")}constructor(){}};Jn.ProgressType=mee;var hee;(function(t){function e(r){return Ys.func(r)}s(e,"is"),t.is=e})(hee||(hee={}));Jn.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Ao;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Ao||(Jn.Trace=Ao={}));var Gxe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Gxe||(Jn.TraceValues=Gxe={}));(function(t){function e(n){if(!Ys.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(Ao||(Jn.Trace=Ao={}));var u0;(function(t){t.Text="text",t.JSON="json"})(u0||(Jn.TraceFormat=u0={}));(function(t){function e(r){return Ys.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(u0||(Jn.TraceFormat=u0={}));var gee;(function(t){t.type=new wn.NotificationType("$/setTrace")})(gee||(Jn.SetTraceNotification=gee={}));var vF;(function(t){t.type=new wn.NotificationType("$/logTrace")})(vF||(Jn.LogTraceNotification=vF={}));var VB;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(VB||(Jn.ConnectionErrors=VB={}));var mS=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Jn.ConnectionError=mS;var Aee;(function(t){function e(r){let n=r;return n&&Ys.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(Aee||(Jn.ConnectionStrategy=Aee={}));var bF;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ys.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ys.func(n.dispose))}s(e,"is"),t.is=e})(bF||(Jn.IdCancellationReceiverStrategy=bF={}));var yee;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ys.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ys.func(n.dispose))}s(e,"is"),t.is=e})(yee||(Jn.RequestCancellationReceiverStrategy=yee={}));var EF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new fee.CancellationTokenSource}});function e(r){return bF.is(r)||yee.is(r)}s(e,"is"),t.is=e})(EF||(Jn.CancellationReceiverStrategy=EF={}));var IF;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification($B.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ys.func(n.sendCancellation)&&Ys.func(n.cleanup)}s(e,"is"),t.is=e})(IF||(Jn.CancellationSenderStrategy=IF={}));var TF;(function(t){t.Message=Object.freeze({receiver:EF.Message,sender:IF.Message});function e(r){let n=r;return n&&EF.is(n.receiver)&&IF.is(n.sender)}s(e,"is"),t.is=e})(TF||(Jn.CancellationStrategy=TF={}));var wF;(function(t){function e(r){let n=r;return n&&Ys.func(n.handleMessage)}s(e,"is"),t.is=e})(wF||(Jn.MessageStrategy=wF={}));var Hxe;(function(t){function e(r){let n=r;return n&&(TF.is(n.cancellationStrategy)||Aee.is(n.connectionStrategy)||wF.is(n.messageStrategy))}s(e,"is"),t.is=e})(Hxe||(Jn.ConnectionOptions=Hxe={}));var hm;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(hm||(hm={}));function Ist(t,e,r,n){let i=r!==void 0?r:Jn.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new Wxe.LinkedMap,v=new Map,b=new Set,E=new Map,_=Ao.Off,k=u0.Text,B,N=hm.New,W=new HB.Emitter,ee=new HB.Emitter,me=new HB.Emitter,ae=new HB.Emitter,H=new HB.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:TF.Message;function le(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(le,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function V(){return"not-"+(++a).toString()}s(V,"createNotificationQueueKey");function O(Ae,Ge){wn.Message.isRequest(Ge)?Ae.set(le(Ge.id),Ge):wn.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(V(),Ge)}s(O,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function te(){return N===hm.Listening}s(te,"isListening");function pe(){return N===hm.Closed}s(pe,"isClosed");function re(){return N===hm.Disposed}s(re,"isDisposed");function ue(){(N===hm.New||N===hm.Listening)&&(N=hm.Closed,ee.fire(void 0))}s(ue,"closeHandler");function he(Ae){W.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Ne(Ae){W.fire(Ae)}s(Ne,"writeErrorHandler"),t.onClose(ue),t.onError(he),e.onClose(ue),e.onError(Ne);function Se(){g||y.size===0||(g=(0,qxe.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Se,"triggerMessageQueue");function Je(Ae){wn.Message.isRequest(Ae)?It(Ae):wn.Message.isNotification(Ae)?vt(Ae):wn.Message.isResponse(Ae)?yt(Ae):ce(Ae)}s(Je,"handleMessage");function Me(){if(y.size===0)return;let Ae=y.shift();try{let Ge=n?.messageStrategy;wF.is(Ge)?Ge.handleMessage(Ae,Je):Je(Ae)}finally{Se()}}s(Me,"processMessageQueue");let ft=s(Ae=>{try{if(wn.Message.isNotification(Ae)&&Ae.method===$B.type.method){let Ge=Ae.params.id,ut=le(Ge),At=y.get(ut);if(wn.Message.isRequest(At)){let Gt=n?.connectionStrategy,Ar=Gt&&Gt.cancelUndispatched?Gt.cancelUndispatched(At,Y):void 0;if(Ar&&(Ar.error!==void 0||Ar.result!==void 0)){y.delete(ut),E.delete(Ge),Ar.id=At.id,X(Ar,Ae.method,Date.now()),e.write(Ar).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(Ge);if(Xt!==void 0){Xt.cancel(),We(Ae);return}else b.add(Ge)}O(y,Ae)}finally{Se()}},"callback");function It(Ae){if(re())return;function Ge(jt,rr,Jt){let Ir={jsonrpc:c,id:Ae.id};jt instanceof wn.ResponseError?Ir.error=jt.toJson():Ir.result=jt===void 0?null:jt,X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ut(jt,rr,Jt){let Ir={jsonrpc:c,id:Ae.id,error:jt.toJson()};X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function At(jt,rr,Jt){jt===void 0&&(jt=null);let Ir={jsonrpc:c,id:Ae.id,result:jt};X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(At,"replySuccess"),ne(Ae);let Xt=d.get(Ae.method),Gt,Ar;Xt&&(Gt=Xt.type,Ar=Xt.handler);let xr=Date.now();if(Ar||u){let jt=Ae.id??String(Date.now()),rr=bF.is(U.receiver)?U.receiver.createCancellationTokenSource(jt):U.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&rr.cancel(),Ae.id!==null&&E.set(jt,rr);try{let Jt;if(Ar)if(Ae.params===void 0){if(Gt!==void 0&&Gt.numberOfParams!==0){ut(new wn.ResponseError(wn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Gt.numberOfParams} params but received none.`),Ae.method,xr);return}Jt=Ar(rr.token)}else if(Array.isArray(Ae.params)){if(Gt!==void 0&&Gt.parameterStructures===wn.ParameterStructures.byName){ut(new wn.ResponseError(wn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,xr);return}Jt=Ar(...Ae.params,rr.token)}else{if(Gt!==void 0&&Gt.parameterStructures===wn.ParameterStructures.byPosition){ut(new wn.ResponseError(wn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,xr);return}Jt=Ar(Ae.params,rr.token)}else u&&(Jt=u(Ae.method,Ae.params,rr.token));let Ir=Jt;Jt?Ir.then?Ir.then(Lr=>{E.delete(jt),Ge(Lr,Ae.method,xr)},Lr=>{E.delete(jt),Lr instanceof wn.ResponseError?ut(Lr,Ae.method,xr):Lr&&Ys.string(Lr.message)?ut(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Lr.message}`),Ae.method,xr):ut(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,xr)}):(E.delete(jt),Ge(Jt,Ae.method,xr)):(E.delete(jt),At(Jt,Ae.method,xr))}catch(Jt){E.delete(jt),Jt instanceof wn.ResponseError?Ge(Jt,Ae.method,xr):Jt&&Ys.string(Jt.message)?ut(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,xr):ut(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,xr)}}else ut(new wn.ResponseError(wn.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,xr)}s(It,"handleRequest");function yt(Ae){if(!re())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ut=v.get(Ge);if(De(Ae,ut),ut!==void 0){v.delete(Ge);try{if(Ae.error){let At=Ae.error;ut.reject(new wn.ResponseError(At.code,At.message,At.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(At){At.message?i.error(`Response handler '${ut.method}' failed with message: ${At.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(yt,"handleResponse");function vt(Ae){if(re())return;let Ge,ut;if(Ae.method===$B.type.method){let At=Ae.params.id;b.delete(At),We(Ae);return}else{let At=m.get(Ae.method);At&&(ut=At.handler,Ge=At.type)}if(ut||p)try{if(We(Ae),ut)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==wn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let At=Ae.params;Ae.method===jB.type.method&&At.length===2&&pee.is(At[0])?ut({token:At[0],value:At[1]}):(Ge!==void 0&&(Ge.parameterStructures===wn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${At.length} arguments`)),ut(...At))}else Ge!==void 0&&Ge.parameterStructures===wn.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(At){At.message?i.error(`Notification handler '${Ae.method}' failed with message: ${At.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else me.fire(Ae)}s(vt,"handleNotification");function ce(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(Ys.string(Ge.id)||Ys.number(Ge.id)){let ut=Ge.id,At=v.get(ut);At&&At.reject(new Error("The received response has neither a result nor an error property."))}}s(ce,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case Ao.Verbose:return JSON.stringify(Ae,null,4);case Ao.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===Ao.Off||!B))if(k===u0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===Ao.Off||!B))if(k===u0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${Ae.method}'.`,Ge)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function X(Ae,Ge,ut){if(!(_===Ao.Off||!B))if(k===u0.Text){let At;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?At=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?At=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(At=`No result returned.

`)),B.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,At)}else be("send-response",Ae)}s(X,"traceSendingResponse");function ne(Ae){if(!(_===Ao.Off||!B))if(k===u0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("receive-request",Ae)}s(ne,"traceReceivedRequest");function We(Ae){if(!(_===Ao.Off||!B||Ae.method===vF.type.method))if(k===u0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${Ae.method}'.`,Ge)}else be("receive-notification",Ae)}s(We,"traceReceivedNotification");function De(Ae,Ge){if(!(_===Ao.Off||!B))if(k===u0.Text){let ut;if((_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),Ge){let At=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";B.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${At}`,ut)}else B.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(De,"traceReceivedResponse");function be(Ae,Ge){if(!B||_===Ao.Off)return;let ut={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};B.log(ut)}s(be,"logLSPMessage");function ze(){if(pe())throw new mS(VB.Closed,"Connection is closed.");if(re())throw new mS(VB.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(te())throw new mS(VB.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function ht(){if(!te())throw new Error("Call listen() first.")}s(ht,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function lr(Ae){if(Ae!==null)return Ae}s(lr,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function qr(Ae,Ge){switch(Ae){case wn.ParameterStructures.auto:return Lt(Ge)?lr(Ge):[Ot(Ge)];case wn.ParameterStructures.byName:if(!Lt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return lr(Ge);case wn.ParameterStructures.byPosition:return[Ot(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(qr,"computeSingleParam");function $r(Ae,Ge){let ut,At=Ae.numberOfParams;switch(At){case 0:ut=void 0;break;case 1:ut=qr(Ae.parameterStructures,Ge[0]);break;default:ut=[];for(let Xt=0;Xt<Ge.length&&Xt<At;Xt++)ut.push(Ot(Ge[Xt]));if(Ge.length<At)for(let Xt=Ge.length;Xt<At;Xt++)ut.push(null);break}return ut}s($r,"computeMessageParams");let dn={sendNotification:s((Ae,...Ge)=>{ze();let ut,At;if(Ys.string(Ae)){ut=Ae;let Gt=Ge[0],Ar=0,xr=wn.ParameterStructures.auto;wn.ParameterStructures.is(Gt)&&(Ar=1,xr=Gt);let jt=Ge.length,rr=jt-Ar;switch(rr){case 0:At=void 0;break;case 1:At=qr(xr,Ge[Ar]);break;default:if(xr===wn.ParameterStructures.byName)throw new Error(`Received ${rr} parameters for 'by Name' notification parameter structure.`);At=Ge.slice(Ar,jt).map(Jt=>Ot(Jt));break}}else{let Gt=Ge;ut=Ae.method,At=$r(Ae,Gt)}let Xt={jsonrpc:c,method:ut,params:At};return tt(Xt),e.write(Xt).catch(Gt=>{throw i.error("Sending notification failed."),Gt})},"sendNotification"),onNotification:s((Ae,Ge)=>{ze();let ut;return Ys.func(Ae)?p=Ae:Ge&&(Ys.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ut)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ut),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ut)=>dn.sendNotification(jB.type,{token:Ge,value:ut}),"sendProgress"),onUnhandledProgress:ae.event,sendRequest:s((Ae,...Ge)=>{ze(),ht();let ut,At,Xt;if(Ys.string(Ae)){ut=Ae;let jt=Ge[0],rr=Ge[Ge.length-1],Jt=0,Ir=wn.ParameterStructures.auto;wn.ParameterStructures.is(jt)&&(Jt=1,Ir=jt);let Lr=Ge.length;fee.CancellationToken.is(rr)&&(Lr=Lr-1,Xt=rr);let zr=Lr-Jt;switch(zr){case 0:At=void 0;break;case 1:At=qr(Ir,Ge[Jt]);break;default:if(Ir===wn.ParameterStructures.byName)throw new Error(`Received ${zr} parameters for 'by Name' request parameter structure.`);At=Ge.slice(Jt,Lr).map(qn=>Ot(qn));break}}else{let jt=Ge;ut=Ae.method,At=$r(Ae,jt);let rr=Ae.numberOfParams;Xt=fee.CancellationToken.is(jt[rr])?jt[rr]:void 0}let Gt=o++,Ar;Xt&&(Ar=Xt.onCancellationRequested(()=>{let jt=U.sender.sendCancellation(dn,Gt);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Gt}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Gt} failed`)})}));let xr={jsonrpc:c,id:Gt,method:ut,params:At};return ye(xr),typeof U.sender.enableCancellation=="function"&&U.sender.enableCancellation(xr),new Promise(async(jt,rr)=>{let Jt=s(zr=>{jt(zr),U.sender.cleanup(Gt),Ar?.dispose()},"resolveWithCleanup"),Ir=s(zr=>{rr(zr),U.sender.cleanup(Gt),Ar?.dispose()},"rejectWithCleanup"),Lr={method:ut,timerStart:Date.now(),resolve:Jt,reject:Ir};try{await e.write(xr),v.set(Gt,Lr)}catch(zr){throw i.error("Sending request failed."),Lr.reject(new wn.ResponseError(wn.ErrorCodes.MessageWriteError,zr.message?zr.message:"Unknown reason")),zr}})},"sendRequest"),onRequest:s((Ae,Ge)=>{ze();let ut=null;return hee.is(Ae)?(ut=void 0,u=Ae):Ys.string(Ae)?(ut=null,Ge!==void 0&&(ut=Ae,d.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ut)=>{let At=!1,Xt=u0.Text;ut!==void 0&&(Ys.boolean(ut)?At=ut:(At=ut.sendNotification||!1,Xt=ut.traceFormat||u0.Text)),_=Ae,k=Xt,_===Ao.Off?B=void 0:B=Ge,At&&!pe()&&!re()&&await dn.sendNotification(gee.type,{value:Ao.toString(Ae)})},"trace"),onError:W.event,onClose:ee.event,onUnhandledNotification:me.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(re())return;N=hm.Disposed,H.fire(void 0);let Ae=new wn.ResponseError(wn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of v.values())Ge.reject(Ae);v=new Map,E=new Map,b=new Set,y=new Wxe.LinkedMap,Ys.func(e.dispose)&&e.dispose(),Ys.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=hm.Listening,t.listen(ft)},"listen"),inspect:s(()=>{(0,qxe.default)().console.log("inspect")},"inspect")};return dn.onNotification(vF.type,Ae=>{if(_===Ao.Off||!B)return;let Ge=_===Ao.Verbose||_===Ao.Compact;B.log(Ae.message,Ge?Ae.verbose:void 0)}),dn.onNotification(jB.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):ae.fire(Ae)}),dn}s(Ist,"createMessageConnection");Jn.createMessageConnection=Ist});var _F=G(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Xo=HZ();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Xo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Xo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Xo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Xo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Xo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Xo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Xo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Xo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Xo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Xo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Xo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Xo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Xo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Xo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Xo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Xo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Xo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Xo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Xo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Xo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Xo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Xo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Xo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Xo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Xo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Xo.ParameterStructures},"get")});var Cee=VZ();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return Cee.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return Cee.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return Cee.Touch},"get")});var Tst=kxe();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return Tst.Disposable},"get")});var Vxe=uS();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return Vxe.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return Vxe.Emitter},"get")});var $xe=gF();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return $xe.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return $xe.CancellationToken},"get")});var zxe=Pxe();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return zxe.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return zxe.SharedArrayReceiverStrategy},"get")});var xee=Nxe();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return xee.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return xee.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return xee.ReadableStreamMessageReader},"get")});var vee=Oxe();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return vee.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return vee.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return vee.WriteableStreamMessageWriter},"get")});var wst=Uxe();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return wst.AbstractMessageBuffer},"get")});var fc=jxe();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return fc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return fc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return fc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return fc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return fc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return fc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return fc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return fc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return fc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return fc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return fc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return fc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return fc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return fc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return fc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return fc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return fc.MessageStrategy},"get")});var _st=Dx();ct.RAL=_st.default});var Jxe=G(Tee=>{"use strict";f();Object.defineProperty(Tee,"__esModule",{value:!0});var Yxe=require("util"),_1=_F(),SF=class t extends _1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new Yxe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};SF.emptyBuffer=Buffer.allocUnsafe(0);var bee=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),_1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),_1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),_1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),_1.Disposable.create(()=>this.stream.off("data",e))}},Eee=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),_1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),_1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),_1.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},Kxe=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new SF(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Yxe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new bee(t),"asReadableStream"),asWritableStream:s(t=>new Eee(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function Iee(){return Kxe}s(Iee,"RIL");(function(t){function e(){_1.RAL.install(Kxe)}s(e,"install"),t.install=e})(Iee||(Iee={}));Tee.default=Iee});var gI=G(Wi=>{"use strict";f();var Sst=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rst=Wi&&Wi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sst(e,t,r)};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createMessageConnection=Wi.createServerSocketTransport=Wi.createClientSocketTransport=Wi.createServerPipeTransport=Wi.createClientPipeTransport=Wi.generateRandomPipeName=Wi.StreamMessageWriter=Wi.StreamMessageReader=Wi.SocketMessageWriter=Wi.SocketMessageReader=Wi.PortMessageWriter=Wi.PortMessageReader=Wi.IPCMessageWriter=Wi.IPCMessageReader=void 0;var hS=Jxe();hS.default.install();var Xxe=require("path"),kst=require("os"),Bst=require("crypto"),BF=require("net"),d0=_F();Rst(_F(),Wi);var wee=class extends d0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),d0.Disposable.create(()=>this.process.off("message",e))}};Wi.IPCMessageReader=wee;var _ee=class extends d0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Wi.IPCMessageWriter=_ee;var See=class extends d0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new d0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Wi.PortMessageReader=See;var Ree=class extends d0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Wi.PortMessageWriter=Ree;var mI=class extends d0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,hS.default)().stream.asReadableStream(e),r)}};Wi.SocketMessageReader=mI;var hI=class extends d0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,hS.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Wi.SocketMessageWriter=hI;var RF=class extends d0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,hS.default)().stream.asReadableStream(e),r)}};Wi.StreamMessageReader=RF;var kF=class extends d0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,hS.default)().stream.asWritableStream(e),r)}};Wi.StreamMessageWriter=kF;var Zxe=process.env.XDG_RUNTIME_DIR,Pst=new Map([["linux",107],["darwin",103]]);function Dst(){let t=(0,Bst.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Zxe?e=Xxe.join(Zxe,`vscode-ipc-${t}.sock`):e=Xxe.join(kst.tmpdir(),`vscode-${t}.sock`);let r=Pst.get(process.platform);return r!==void 0&&e.length>r&&(0,hS.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(Dst,"generateRandomPipeName");Wi.generateRandomPipeName=Dst;function Nst(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,BF.createServer)(l=>{a.close(),r([new mI(l,e),new hI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Nst,"createClientPipeTransport");Wi.createClientPipeTransport=Nst;function Lst(t,e="utf-8"){let r=(0,BF.createConnection)(t);return[new mI(r,e),new hI(r,e)]}s(Lst,"createServerPipeTransport");Wi.createServerPipeTransport=Lst;function Fst(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,BF.createServer)(l=>{a.close(),r([new mI(l,e),new hI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Fst,"createClientSocketTransport");Wi.createClientSocketTransport=Fst;function Mst(t,e="utf-8"){let r=(0,BF.createConnection)(t,"127.0.0.1");return[new mI(r,e),new hI(r,e)]}s(Mst,"createServerSocketTransport");Wi.createServerSocketTransport=Mst;function Qst(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(Qst,"isReadableStream");function Ost(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Ost,"isWritableStream");function Ust(t,e,r,n){r||(r=d0.NullLogger);let i=Qst(t)?new RF(t):t,o=Ost(e)?new kF(e):e;return d0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,d0.createMessageConnection)(i,o,r,n)}s(Ust,"createMessageConnection");Wi.createMessageConnection=Ust});var kee=G((Dfr,eve)=>{"use strict";f();eve.exports=gI()});var DF=G((tve,PF)=>{f();(function(t){if(typeof PF=="object"&&typeof PF.exports=="object"){var e=t(require,tve);e!==void 0&&(PF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(q){function ge(ve){return typeof ve=="string"}s(ge,"is"),q.is=ge})(r||(e.DocumentUri=r={}));var n;(function(q){function ge(ve){return typeof ve=="string"}s(ge,"is"),q.is=ge})(n||(e.URI=n={}));var i;(function(q){q.MIN_VALUE=-2147483648,q.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&q.MIN_VALUE<=ve&&ve<=q.MAX_VALUE}s(ge,"is"),q.is=ge})(i||(e.integer=i={}));var o;(function(q){q.MIN_VALUE=0,q.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&q.MIN_VALUE<=ve&&ve<=q.MAX_VALUE}s(ge,"is"),q.is=ge})(o||(e.uinteger=o={}));var a;(function(q){function ge(Z,M){return Z===Number.MAX_VALUE&&(Z=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:Z,character:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),q.is=ve})(a||(e.Position=a={}));var l;(function(q){function ge(Z,M,ke,$e){if(_e.uinteger(Z)&&_e.uinteger(M)&&_e.uinteger(ke)&&_e.uinteger($e))return{start:a.create(Z,M),end:a.create(ke,$e)};if(a.is(Z)&&a.is(M))return{start:Z,end:M};throw new Error("Range#create called with invalid arguments[".concat(Z,", ").concat(M,", ").concat(ke,", ").concat($e,"]"))}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),q.is=ve})(l||(e.Range=l={}));var c;(function(q){function ge(Z,M){return{uri:Z,range:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),q.is=ve})(c||(e.Location=c={}));var u;(function(q){function ge(Z,M,ke,$e){return{targetUri:Z,targetRange:M,targetSelectionRange:ke,originSelectionRange:$e}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),q.is=ve})(u||(e.LocationLink=u={}));var d;(function(q){function ge(Z,M,ke,$e){return{red:Z,green:M,blue:ke,alpha:$e}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),q.is=ve})(d||(e.Color=d={}));var p;(function(q){function ge(Z,M){return{range:Z,color:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),q.is=ve})(p||(e.ColorInformation=p={}));var m;(function(q){function ge(Z,M,ke){return{label:Z,textEdit:M,additionalTextEdits:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||B.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,B.is))}s(ve,"is"),q.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(q){q.Comment="comment",q.Imports="imports",q.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(q){function ge(Z,M,ke,$e,qt,_r){var pr={startLine:Z,endLine:M};return _e.defined(ke)&&(pr.startCharacter=ke),_e.defined($e)&&(pr.endCharacter=$e),_e.defined(qt)&&(pr.kind=qt),_e.defined(_r)&&(pr.collapsedText=_r),pr}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),q.is=ve})(g||(e.FoldingRange=g={}));var y;(function(q){function ge(Z,M){return{location:Z,message:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),q.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(q){q.Error=1,q.Warning=2,q.Information=3,q.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(q){q.Unnecessary=1,q.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&_e.string(Z.href)}s(ge,"is"),q.is=ge})(E||(e.CodeDescription=E={}));var _;(function(q){function ge(Z,M,ke,$e,qt,_r){var pr={range:Z,message:M};return _e.defined(ke)&&(pr.severity=ke),_e.defined($e)&&(pr.code=$e),_e.defined(qt)&&(pr.source=qt),_e.defined(_r)&&(pr.relatedInformation=_r),pr}s(ge,"create"),q.create=ge;function ve(Z){var M,ke=Z;return _e.defined(ke)&&l.is(ke.range)&&_e.string(ke.message)&&(_e.number(ke.severity)||_e.undefined(ke.severity))&&(_e.integer(ke.code)||_e.string(ke.code)||_e.undefined(ke.code))&&(_e.undefined(ke.codeDescription)||_e.string((M=ke.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(ke.source)||_e.undefined(ke.source))&&(_e.undefined(ke.relatedInformation)||_e.typedArray(ke.relatedInformation,y.is))}s(ve,"is"),q.is=ve})(_||(e.Diagnostic=_={}));var k;(function(q){function ge(Z,M){for(var ke=[],$e=2;$e<arguments.length;$e++)ke[$e-2]=arguments[$e];var qt={title:Z,command:M};return _e.defined(ke)&&ke.length>0&&(qt.arguments=ke),qt}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),q.is=ve})(k||(e.Command=k={}));var B;(function(q){function ge(ke,$e){return{range:ke,newText:$e}}s(ge,"replace"),q.replace=ge;function ve(ke,$e){return{range:{start:ke,end:ke},newText:$e}}s(ve,"insert"),q.insert=ve;function Z(ke){return{range:ke,newText:""}}s(Z,"del"),q.del=Z;function M(ke){var $e=ke;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),q.is=M})(B||(e.TextEdit=B={}));var N;(function(q){function ge(Z,M,ke){var $e={label:Z};return M!==void 0&&($e.needsConfirmation=M),ke!==void 0&&($e.description=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),q.is=ve})(N||(e.ChangeAnnotation=N={}));var W;(function(q){function ge(ve){var Z=ve;return _e.string(Z)}s(ge,"is"),q.is=ge})(W||(e.ChangeAnnotationIdentifier=W={}));var ee;(function(q){function ge(ke,$e,qt){return{range:ke,newText:$e,annotationId:qt}}s(ge,"replace"),q.replace=ge;function ve(ke,$e,qt){return{range:{start:ke,end:ke},newText:$e,annotationId:qt}}s(ve,"insert"),q.insert=ve;function Z(ke,$e){return{range:ke,newText:"",annotationId:$e}}s(Z,"del"),q.del=Z;function M(ke){var $e=ke;return B.is($e)&&(N.is($e.annotationId)||W.is($e.annotationId))}s(M,"is"),q.is=M})(ee||(e.AnnotatedTextEdit=ee={}));var me;(function(q){function ge(Z,M){return{textDocument:Z,edits:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&pe.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),q.is=ve})(me||(e.TextDocumentEdit=me={}));var ae;(function(q){function ge(Z,M,ke){var $e={kind:"create",uri:Z};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||W.is(M.annotationId))}s(ve,"is"),q.is=ve})(ae||(e.CreateFile=ae={}));var H;(function(q){function ge(Z,M,ke,$e){var qt={kind:"rename",oldUri:Z,newUri:M};return ke!==void 0&&(ke.overwrite!==void 0||ke.ignoreIfExists!==void 0)&&(qt.options=ke),$e!==void 0&&(qt.annotationId=$e),qt}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||W.is(M.annotationId))}s(ve,"is"),q.is=ve})(H||(e.RenameFile=H={}));var U;(function(q){function ge(Z,M,ke){var $e={kind:"delete",uri:Z};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||W.is(M.annotationId))}s(ve,"is"),q.is=ve})(U||(e.DeleteFile=U={}));var le;(function(q){function ge(ve){var Z=ve;return Z&&(Z.changes!==void 0||Z.documentChanges!==void 0)&&(Z.documentChanges===void 0||Z.documentChanges.every(function(M){return _e.string(M.kind)?ae.is(M)||H.is(M)||U.is(M):me.is(M)}))}s(ge,"is"),q.is=ge})(le||(e.WorkspaceEdit=le={}));var ie=function(){function q(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(q,"TextEditChangeImpl"),q.prototype.insert=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.insert(ge,ve):W.is(Z)?(ke=Z,M=ee.insert(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=ee.insert(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},q.prototype.replace=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.replace(ge,ve):W.is(Z)?(ke=Z,M=ee.replace(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=ee.replace(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},q.prototype.delete=function(ge,ve){var Z,M;if(ve===void 0?Z=B.del(ge):W.is(ve)?(M=ve,Z=ee.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),Z=ee.del(ge,M)),this.edits.push(Z),M!==void 0)return M},q.prototype.add=function(ge){this.edits.push(ge)},q.prototype.all=function(){return this.edits},q.prototype.clear=function(){this.edits.splice(0,this.edits.length)},q.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},q}(),V=function(){function q(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(q,"ChangeAnnotations"),q.prototype.all=function(){return this._annotations},Object.defineProperty(q.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),q.prototype.manage=function(ge,ve){var Z;if(W.is(ge)?Z=ge:(Z=this.nextId(),ve=ge),this._annotations[Z]!==void 0)throw new Error("Id ".concat(Z," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(Z));return this._annotations[Z]=ve,this._size++,Z},q.prototype.nextId=function(){return this._counter++,this._counter.toString()},q}(),O=function(){function q(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new V(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(Z){if(me.is(Z)){var M=new ie(Z.edits,ve._changeAnnotations);ve._textEditChanges[Z.textDocument.uri]=M}})):ge.changes&&Object.keys(ge.changes).forEach(function(Z){var M=new ie(ge.changes[Z]);ve._textEditChanges[Z]=M})):this._workspaceEdit={}}return s(q,"WorkspaceChange"),Object.defineProperty(q.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),q.prototype.getTextEditChange=function(ge){if(pe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},Z=this._textEditChanges[ve.uri];if(!Z){var M=[],ke={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(ke),Z=new ie(M,this._changeAnnotations),this._textEditChanges[ve.uri]=Z}return Z}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Z=this._textEditChanges[ge];if(!Z){var M=[];this._workspaceEdit.changes[ge]=M,Z=new ie(M),this._textEditChanges[ge]=Z}return Z}},q.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new V,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},q.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},q.prototype.createFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||W.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=ae.create(ge,Z):($e=W.is(M)?M:this._changeAnnotations.manage(M),ke=ae.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},q.prototype.renameFile=function(ge,ve,Z,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ke;N.is(Z)||W.is(Z)?ke=Z:M=Z;var $e,qt;if(ke===void 0?$e=H.create(ge,ve,M):(qt=W.is(ke)?ke:this._changeAnnotations.manage(ke),$e=H.create(ge,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},q.prototype.deleteFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||W.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=U.create(ge,Z):($e=W.is(M)?M:this._changeAnnotations.manage(M),ke=U.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},q}();e.WorkspaceChange=O;var Y;(function(q){function ge(Z){return{uri:Z}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),q.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var te;(function(q){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),q.is=ve})(te||(e.VersionedTextDocumentIdentifier=te={}));var pe;(function(q){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),q.is=ve})(pe||(e.OptionalVersionedTextDocumentIdentifier=pe={}));var re;(function(q){function ge(Z,M,ke,$e){return{uri:Z,languageId:M,version:ke,text:$e}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),q.is=ve})(re||(e.TextDocumentItem=re={}));var ue;(function(q){q.PlainText="plaintext",q.Markdown="markdown";function ge(ve){var Z=ve;return Z===q.PlainText||Z===q.Markdown}s(ge,"is"),q.is=ge})(ue||(e.MarkupKind=ue={}));var he;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(ve)&&ue.is(Z.kind)&&_e.string(Z.value)}s(ge,"is"),q.is=ge})(he||(e.MarkupContent=he={}));var Ne;(function(q){q.Text=1,q.Method=2,q.Function=3,q.Constructor=4,q.Field=5,q.Variable=6,q.Class=7,q.Interface=8,q.Module=9,q.Property=10,q.Unit=11,q.Value=12,q.Enum=13,q.Keyword=14,q.Snippet=15,q.Color=16,q.File=17,q.Reference=18,q.Folder=19,q.EnumMember=20,q.Constant=21,q.Struct=22,q.Event=23,q.Operator=24,q.TypeParameter=25})(Ne||(e.CompletionItemKind=Ne={}));var Se;(function(q){q.PlainText=1,q.Snippet=2})(Se||(e.InsertTextFormat=Se={}));var Je;(function(q){q.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(q){function ge(Z,M,ke){return{newText:Z,insert:M,replace:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),q.is=ve})(Me||(e.InsertReplaceEdit=Me={}));var ft;(function(q){q.asIs=1,q.adjustIndentation=2})(ft||(e.InsertTextMode=ft={}));var It;(function(q){function ge(ve){var Z=ve;return Z&&(_e.string(Z.detail)||Z.detail===void 0)&&(_e.string(Z.description)||Z.description===void 0)}s(ge,"is"),q.is=ge})(It||(e.CompletionItemLabelDetails=It={}));var yt;(function(q){function ge(ve){return{label:ve}}s(ge,"create"),q.create=ge})(yt||(e.CompletionItem=yt={}));var vt;(function(q){function ge(ve,Z){return{items:ve||[],isIncomplete:!!Z}}s(ge,"create"),q.create=ge})(vt||(e.CompletionList=vt={}));var ce;(function(q){function ge(Z){return Z.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),q.fromPlainText=ge;function ve(Z){var M=Z;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),q.is=ve})(ce||(e.MarkedString=ce={}));var Oe;(function(q){function ge(ve){var Z=ve;return!!Z&&_e.objectLiteral(Z)&&(he.is(Z.contents)||ce.is(Z.contents)||_e.typedArray(Z.contents,ce.is))&&(ve.range===void 0||l.is(ve.range))}s(ge,"is"),q.is=ge})(Oe||(e.Hover=Oe={}));var ye;(function(q){function ge(ve,Z){return Z?{label:ve,documentation:Z}:{label:ve}}s(ge,"create"),q.create=ge})(ye||(e.ParameterInformation=ye={}));var tt;(function(q){function ge(ve,Z){for(var M=[],ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];var $e={label:ve};return _e.defined(Z)&&($e.documentation=Z),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(ge,"create"),q.create=ge})(tt||(e.SignatureInformation=tt={}));var X;(function(q){q.Text=1,q.Read=2,q.Write=3})(X||(e.DocumentHighlightKind=X={}));var ne;(function(q){function ge(ve,Z){var M={range:ve};return _e.number(Z)&&(M.kind=Z),M}s(ge,"create"),q.create=ge})(ne||(e.DocumentHighlight=ne={}));var We;(function(q){q.File=1,q.Module=2,q.Namespace=3,q.Package=4,q.Class=5,q.Method=6,q.Property=7,q.Field=8,q.Constructor=9,q.Enum=10,q.Interface=11,q.Function=12,q.Variable=13,q.Constant=14,q.String=15,q.Number=16,q.Boolean=17,q.Array=18,q.Object=19,q.Key=20,q.Null=21,q.EnumMember=22,q.Struct=23,q.Event=24,q.Operator=25,q.TypeParameter=26})(We||(e.SymbolKind=We={}));var De;(function(q){q.Deprecated=1})(De||(e.SymbolTag=De={}));var be;(function(q){function ge(ve,Z,M,ke,$e){var qt={name:ve,kind:Z,location:{uri:ke,range:M}};return $e&&(qt.containerName=$e),qt}s(ge,"create"),q.create=ge})(be||(e.SymbolInformation=be={}));var ze;(function(q){function ge(ve,Z,M,ke){return ke!==void 0?{name:ve,kind:Z,location:{uri:M,range:ke}}:{name:ve,kind:Z,location:{uri:M}}}s(ge,"create"),q.create=ge})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(q){function ge(Z,M,ke,$e,qt,_r){var pr={name:Z,detail:M,kind:ke,range:$e,selectionRange:qt};return _r!==void 0&&(pr.children=_r),pr}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),q.is=ve})(it||(e.DocumentSymbol=it={}));var ht;(function(q){q.Empty="",q.QuickFix="quickfix",q.Refactor="refactor",q.RefactorExtract="refactor.extract",q.RefactorInline="refactor.inline",q.RefactorRewrite="refactor.rewrite",q.Source="source",q.SourceOrganizeImports="source.organizeImports",q.SourceFixAll="source.fixAll"})(ht||(e.CodeActionKind=ht={}));var Ot;(function(q){q.Invoked=1,q.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var lr;(function(q){function ge(Z,M,ke){var $e={diagnostics:Z};return M!=null&&($e.only=M),ke!=null&&($e.triggerKind=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),q.is=ve})(lr||(e.CodeActionContext=lr={}));var Lt;(function(q){function ge(Z,M,ke){var $e={title:Z},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||le.is(M.edit))}s(ve,"is"),q.is=ve})(Lt||(e.CodeAction=Lt={}));var qr;(function(q){function ge(Z,M){var ke={range:Z};return _e.defined(M)&&(ke.data=M),ke}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),q.is=ve})(qr||(e.CodeLens=qr={}));var $r;(function(q){function ge(Z,M){return{tabSize:Z,insertSpaces:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),q.is=ve})($r||(e.FormattingOptions=$r={}));var dn;(function(q){function ge(Z,M,ke){return{range:Z,target:M,data:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),q.is=ve})(dn||(e.DocumentLink=dn={}));var Ae;(function(q){function ge(Z,M){return{range:Z,parent:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||q.is(M.parent))}s(ve,"is"),q.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(q){q.namespace="namespace",q.type="type",q.class="class",q.enum="enum",q.interface="interface",q.struct="struct",q.typeParameter="typeParameter",q.parameter="parameter",q.variable="variable",q.property="property",q.enumMember="enumMember",q.event="event",q.function="function",q.method="method",q.macro="macro",q.keyword="keyword",q.modifier="modifier",q.comment="comment",q.string="string",q.number="number",q.regexp="regexp",q.operator="operator",q.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ut;(function(q){q.declaration="declaration",q.definition="definition",q.readonly="readonly",q.static="static",q.deprecated="deprecated",q.abstract="abstract",q.async="async",q.modification="modification",q.documentation="documentation",q.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var At;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&(Z.resultId===void 0||typeof Z.resultId=="string")&&Array.isArray(Z.data)&&(Z.data.length===0||typeof Z.data[0]=="number")}s(ge,"is"),q.is=ge})(At||(e.SemanticTokens=At={}));var Xt;(function(q){function ge(Z,M){return{range:Z,text:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),q.is=ve})(Xt||(e.InlineValueText=Xt={}));var Gt;(function(q){function ge(Z,M,ke){return{range:Z,variableName:M,caseSensitiveLookup:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),q.is=ve})(Gt||(e.InlineValueVariableLookup=Gt={}));var Ar;(function(q){function ge(Z,M){return{range:Z,expression:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),q.is=ve})(Ar||(e.InlineValueEvaluatableExpression=Ar={}));var xr;(function(q){function ge(Z,M){return{frameId:Z,stoppedLocation:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(Z.stoppedLocation)}s(ve,"is"),q.is=ve})(xr||(e.InlineValueContext=xr={}));var jt;(function(q){q.Type=1,q.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),q.is=ge})(jt||(e.InlayHintKind=jt={}));var rr;(function(q){function ge(Z){return{value:Z}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),q.is=ve})(rr||(e.InlayHintLabelPart=rr={}));var Jt;(function(q){function ge(Z,M,ke){var $e={position:Z,label:M};return ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,rr.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,B.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),q.is=ve})(Jt||(e.InlayHint=Jt={}));var Ir;(function(q){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),q.createSnippet=ge})(Ir||(e.StringValue=Ir={}));var Lr;(function(q){function ge(ve,Z,M,ke){return{insertText:ve,filterText:Z,range:M,command:ke}}s(ge,"create"),q.create=ge})(Lr||(e.InlineCompletionItem=Lr={}));var zr;(function(q){function ge(ve){return{items:ve}}s(ge,"create"),q.create=ge})(zr||(e.InlineCompletionList=zr={}));var qn;(function(q){q.Invoked=0,q.Automatic=1})(qn||(e.InlineCompletionTriggerKind=qn={}));var Kn;(function(q){function ge(ve,Z){return{range:ve,text:Z}}s(ge,"create"),q.create=ge})(Kn||(e.SelectedCompletionInfo=Kn={}));var Mn;(function(q){function ge(ve,Z){return{triggerKind:ve,selectedCompletionInfo:Z}}s(ge,"create"),q.create=ge})(Mn||(e.InlineCompletionContext=Mn={}));var Vn;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&n.is(Z.uri)&&_e.string(Z.name)}s(ge,"is"),q.is=ge})(Vn||(e.WorkspaceFolder=Vn={})),e.EOL=[`
`,`\r
`,"\r"];var Zr;(function(q){function ge(ke,$e,qt,_r){return new $n(ke,$e,qt,_r)}s(ge,"create"),q.create=ge;function ve(ke){var $e=ke;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),q.is=ve;function Z(ke,$e){for(var qt=ke.getText(),_r=M($e,function(Qn,Ws){var Lp=Qn.range.start.line-Ws.range.start.line;return Lp===0?Qn.range.start.character-Ws.range.start.character:Lp}),pr=qt.length,ln=_r.length-1;ln>=0;ln--){var fn=_r[ln],vr=ke.offsetAt(fn.range.start),Ht=ke.offsetAt(fn.range.end);if(Ht<=pr)qt=qt.substring(0,vr)+fn.newText+qt.substring(Ht,qt.length);else throw new Error("Overlapping edit");pr=vr}return qt}s(Z,"applyEdits"),q.applyEdits=Z;function M(ke,$e){if(ke.length<=1)return ke;var qt=ke.length/2|0,_r=ke.slice(0,qt),pr=ke.slice(qt);M(_r,$e),M(pr,$e);for(var ln=0,fn=0,vr=0;ln<_r.length&&fn<pr.length;){var Ht=$e(_r[ln],pr[fn]);Ht<=0?ke[vr++]=_r[ln++]:ke[vr++]=pr[fn++]}for(;ln<_r.length;)ke[vr++]=_r[ln++];for(;fn<pr.length;)ke[vr++]=pr[fn++];return ke}s(M,"mergeSort")})(Zr||(e.TextDocument=Zr={}));var $n=function(){function q(ge,ve,Z,M){this._uri=ge,this._languageId=ve,this._version=Z,this._content=M,this._lineOffsets=void 0}return s(q,"FullTextDocument"),Object.defineProperty(q.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),q.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),Z=this.offsetAt(ge.end);return this._content.substring(ve,Z)}return this._content},q.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},q.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,Z=!0,M=0;M<ve.length;M++){Z&&(ge.push(M),Z=!1);var ke=ve.charAt(M);Z=ke==="\r"||ke===`
`,ke==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}Z&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},q.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),Z=0,M=ve.length;if(M===0)return a.create(0,ge);for(;Z<M;){var ke=Math.floor((Z+M)/2);ve[ke]>ge?M=ke:Z=ke+1}var $e=Z-1;return a.create($e,ge-ve[$e])},q.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var Z=ve[ge.line],M=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(Z+ge.character,M),Z)},Object.defineProperty(q.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),q}(),_e;(function(q){var ge=Object.prototype.toString;function ve(Ht){return typeof Ht<"u"}s(ve,"defined"),q.defined=ve;function Z(Ht){return typeof Ht>"u"}s(Z,"undefined"),q.undefined=Z;function M(Ht){return Ht===!0||Ht===!1}s(M,"boolean"),q.boolean=M;function ke(Ht){return ge.call(Ht)==="[object String]"}s(ke,"string"),q.string=ke;function $e(Ht){return ge.call(Ht)==="[object Number]"}s($e,"number"),q.number=$e;function qt(Ht,Qn,Ws){return ge.call(Ht)==="[object Number]"&&Qn<=Ht&&Ht<=Ws}s(qt,"numberRange"),q.numberRange=qt;function _r(Ht){return ge.call(Ht)==="[object Number]"&&-2147483648<=Ht&&Ht<=2147483647}s(_r,"integer"),q.integer=_r;function pr(Ht){return ge.call(Ht)==="[object Number]"&&0<=Ht&&Ht<=2147483647}s(pr,"uinteger"),q.uinteger=pr;function ln(Ht){return ge.call(Ht)==="[object Function]"}s(ln,"func"),q.func=ln;function fn(Ht){return Ht!==null&&typeof Ht=="object"}s(fn,"objectLiteral"),q.objectLiteral=fn;function vr(Ht,Qn){return Array.isArray(Ht)&&Ht.every(Qn)}s(vr,"typedArray"),q.typedArray=vr})(_e||(_e={}))})});var Fs=G(ud=>{"use strict";f();Object.defineProperty(ud,"__esModule",{value:!0});ud.ProtocolNotificationType=ud.ProtocolNotificationType0=ud.ProtocolRequestType=ud.ProtocolRequestType0=ud.RegistrationType=ud.MessageDirection=void 0;var gS=gI(),rve;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(rve||(ud.MessageDirection=rve={}));var Bee=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};ud.RegistrationType=Bee;var Pee=class extends gS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};ud.ProtocolRequestType0=Pee;var Dee=class extends gS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,gS.ParameterStructures.byName)}};ud.ProtocolRequestType=Dee;var Nee=class extends gS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};ud.ProtocolNotificationType0=Nee;var Lee=class extends gS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,gS.ParameterStructures.byName)}};ud.ProtocolNotificationType=Lee});var NF=G(Ha=>{"use strict";f();Object.defineProperty(Ha,"__esModule",{value:!0});Ha.objectLiteral=Ha.typedArray=Ha.stringArray=Ha.array=Ha.func=Ha.error=Ha.number=Ha.string=Ha.boolean=void 0;function qst(t){return t===!0||t===!1}s(qst,"boolean");Ha.boolean=qst;function nve(t){return typeof t=="string"||t instanceof String}s(nve,"string");Ha.string=nve;function Wst(t){return typeof t=="number"||t instanceof Number}s(Wst,"number");Ha.number=Wst;function Gst(t){return t instanceof Error}s(Gst,"error");Ha.error=Gst;function Hst(t){return typeof t=="function"}s(Hst,"func");Ha.func=Hst;function ive(t){return Array.isArray(t)}s(ive,"array");Ha.array=ive;function jst(t){return ive(t)&&t.every(e=>nve(e))}s(jst,"stringArray");Ha.stringArray=jst;function Vst(t,e){return Array.isArray(t)&&t.every(e)}s(Vst,"typedArray");Ha.typedArray=Vst;function $st(t){return t!==null&&typeof t=="object"}s($st,"objectLiteral");Ha.objectLiteral=$st});var ave=G(LF=>{"use strict";f();Object.defineProperty(LF,"__esModule",{value:!0});LF.ImplementationRequest=void 0;var ove=Fs(),sve;(function(t){t.method="textDocument/implementation",t.messageDirection=ove.MessageDirection.clientToServer,t.type=new ove.ProtocolRequestType(t.method)})(sve||(LF.ImplementationRequest=sve={}))});var uve=G(FF=>{"use strict";f();Object.defineProperty(FF,"__esModule",{value:!0});FF.TypeDefinitionRequest=void 0;var lve=Fs(),cve;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=lve.MessageDirection.clientToServer,t.type=new lve.ProtocolRequestType(t.method)})(cve||(FF.TypeDefinitionRequest=cve={}))});var pve=G(AS=>{"use strict";f();Object.defineProperty(AS,"__esModule",{value:!0});AS.DidChangeWorkspaceFoldersNotification=AS.WorkspaceFoldersRequest=void 0;var MF=Fs(),dve;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=MF.MessageDirection.serverToClient,t.type=new MF.ProtocolRequestType0(t.method)})(dve||(AS.WorkspaceFoldersRequest=dve={}));var fve;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=MF.MessageDirection.clientToServer,t.type=new MF.ProtocolNotificationType(t.method)})(fve||(AS.DidChangeWorkspaceFoldersNotification=fve={}))});var gve=G(QF=>{"use strict";f();Object.defineProperty(QF,"__esModule",{value:!0});QF.ConfigurationRequest=void 0;var mve=Fs(),hve;(function(t){t.method="workspace/configuration",t.messageDirection=mve.MessageDirection.serverToClient,t.type=new mve.ProtocolRequestType(t.method)})(hve||(QF.ConfigurationRequest=hve={}))});var Cve=G(yS=>{"use strict";f();Object.defineProperty(yS,"__esModule",{value:!0});yS.ColorPresentationRequest=yS.DocumentColorRequest=void 0;var OF=Fs(),Ave;(function(t){t.method="textDocument/documentColor",t.messageDirection=OF.MessageDirection.clientToServer,t.type=new OF.ProtocolRequestType(t.method)})(Ave||(yS.DocumentColorRequest=Ave={}));var yve;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=OF.MessageDirection.clientToServer,t.type=new OF.ProtocolRequestType(t.method)})(yve||(yS.ColorPresentationRequest=yve={}))});var bve=G(CS=>{"use strict";f();Object.defineProperty(CS,"__esModule",{value:!0});CS.FoldingRangeRefreshRequest=CS.FoldingRangeRequest=void 0;var UF=Fs(),xve;(function(t){t.method="textDocument/foldingRange",t.messageDirection=UF.MessageDirection.clientToServer,t.type=new UF.ProtocolRequestType(t.method)})(xve||(CS.FoldingRangeRequest=xve={}));var vve;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=UF.MessageDirection.serverToClient,t.type=new UF.ProtocolRequestType0(t.method)})(vve||(CS.FoldingRangeRefreshRequest=vve={}))});var Tve=G(qF=>{"use strict";f();Object.defineProperty(qF,"__esModule",{value:!0});qF.DeclarationRequest=void 0;var Eve=Fs(),Ive;(function(t){t.method="textDocument/declaration",t.messageDirection=Eve.MessageDirection.clientToServer,t.type=new Eve.ProtocolRequestType(t.method)})(Ive||(qF.DeclarationRequest=Ive={}))});var Sve=G(WF=>{"use strict";f();Object.defineProperty(WF,"__esModule",{value:!0});WF.SelectionRangeRequest=void 0;var wve=Fs(),_ve;(function(t){t.method="textDocument/selectionRange",t.messageDirection=wve.MessageDirection.clientToServer,t.type=new wve.ProtocolRequestType(t.method)})(_ve||(WF.SelectionRangeRequest=_ve={}))});var Pve=G(Fx=>{"use strict";f();Object.defineProperty(Fx,"__esModule",{value:!0});Fx.WorkDoneProgressCancelNotification=Fx.WorkDoneProgressCreateRequest=Fx.WorkDoneProgress=void 0;var zst=gI(),GF=Fs(),Rve;(function(t){t.type=new zst.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(Rve||(Fx.WorkDoneProgress=Rve={}));var kve;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=GF.MessageDirection.serverToClient,t.type=new GF.ProtocolRequestType(t.method)})(kve||(Fx.WorkDoneProgressCreateRequest=kve={}));var Bve;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=GF.MessageDirection.clientToServer,t.type=new GF.ProtocolNotificationType(t.method)})(Bve||(Fx.WorkDoneProgressCancelNotification=Bve={}))});var Fve=G(Mx=>{"use strict";f();Object.defineProperty(Mx,"__esModule",{value:!0});Mx.CallHierarchyOutgoingCallsRequest=Mx.CallHierarchyIncomingCallsRequest=Mx.CallHierarchyPrepareRequest=void 0;var xS=Fs(),Dve;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=xS.MessageDirection.clientToServer,t.type=new xS.ProtocolRequestType(t.method)})(Dve||(Mx.CallHierarchyPrepareRequest=Dve={}));var Nve;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=xS.MessageDirection.clientToServer,t.type=new xS.ProtocolRequestType(t.method)})(Nve||(Mx.CallHierarchyIncomingCallsRequest=Nve={}));var Lve;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=xS.MessageDirection.clientToServer,t.type=new xS.ProtocolRequestType(t.method)})(Lve||(Mx.CallHierarchyOutgoingCallsRequest=Lve={}))});var Wve=G(dd=>{"use strict";f();Object.defineProperty(dd,"__esModule",{value:!0});dd.SemanticTokensRefreshRequest=dd.SemanticTokensRangeRequest=dd.SemanticTokensDeltaRequest=dd.SemanticTokensRequest=dd.SemanticTokensRegistrationType=dd.TokenFormat=void 0;var S1=Fs(),Mve;(function(t){t.Relative="relative"})(Mve||(dd.TokenFormat=Mve={}));var zB;(function(t){t.method="textDocument/semanticTokens",t.type=new S1.RegistrationType(t.method)})(zB||(dd.SemanticTokensRegistrationType=zB={}));var Qve;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=S1.MessageDirection.clientToServer,t.type=new S1.ProtocolRequestType(t.method),t.registrationMethod=zB.method})(Qve||(dd.SemanticTokensRequest=Qve={}));var Ove;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=S1.MessageDirection.clientToServer,t.type=new S1.ProtocolRequestType(t.method),t.registrationMethod=zB.method})(Ove||(dd.SemanticTokensDeltaRequest=Ove={}));var Uve;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=S1.MessageDirection.clientToServer,t.type=new S1.ProtocolRequestType(t.method),t.registrationMethod=zB.method})(Uve||(dd.SemanticTokensRangeRequest=Uve={}));var qve;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=S1.MessageDirection.serverToClient,t.type=new S1.ProtocolRequestType0(t.method)})(qve||(dd.SemanticTokensRefreshRequest=qve={}))});var jve=G(HF=>{"use strict";f();Object.defineProperty(HF,"__esModule",{value:!0});HF.ShowDocumentRequest=void 0;var Gve=Fs(),Hve;(function(t){t.method="window/showDocument",t.messageDirection=Gve.MessageDirection.serverToClient,t.type=new Gve.ProtocolRequestType(t.method)})(Hve||(HF.ShowDocumentRequest=Hve={}))});var zve=G(jF=>{"use strict";f();Object.defineProperty(jF,"__esModule",{value:!0});jF.LinkedEditingRangeRequest=void 0;var Vve=Fs(),$ve;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Vve.MessageDirection.clientToServer,t.type=new Vve.ProtocolRequestType(t.method)})($ve||(jF.LinkedEditingRangeRequest=$ve={}))});var rbe=G(Hc=>{"use strict";f();Object.defineProperty(Hc,"__esModule",{value:!0});Hc.WillDeleteFilesRequest=Hc.DidDeleteFilesNotification=Hc.DidRenameFilesNotification=Hc.WillRenameFilesRequest=Hc.DidCreateFilesNotification=Hc.WillCreateFilesRequest=Hc.FileOperationPatternKind=void 0;var kf=Fs(),Yve;(function(t){t.file="file",t.folder="folder"})(Yve||(Hc.FileOperationPatternKind=Yve={}));var Kve;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=kf.MessageDirection.clientToServer,t.type=new kf.ProtocolRequestType(t.method)})(Kve||(Hc.WillCreateFilesRequest=Kve={}));var Jve;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=kf.MessageDirection.clientToServer,t.type=new kf.ProtocolNotificationType(t.method)})(Jve||(Hc.DidCreateFilesNotification=Jve={}));var Xve;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=kf.MessageDirection.clientToServer,t.type=new kf.ProtocolRequestType(t.method)})(Xve||(Hc.WillRenameFilesRequest=Xve={}));var Zve;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=kf.MessageDirection.clientToServer,t.type=new kf.ProtocolNotificationType(t.method)})(Zve||(Hc.DidRenameFilesNotification=Zve={}));var ebe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=kf.MessageDirection.clientToServer,t.type=new kf.ProtocolNotificationType(t.method)})(ebe||(Hc.DidDeleteFilesNotification=ebe={}));var tbe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=kf.MessageDirection.clientToServer,t.type=new kf.ProtocolRequestType(t.method)})(tbe||(Hc.WillDeleteFilesRequest=tbe={}))});var abe=G(Qx=>{"use strict";f();Object.defineProperty(Qx,"__esModule",{value:!0});Qx.MonikerRequest=Qx.MonikerKind=Qx.UniquenessLevel=void 0;var nbe=Fs(),ibe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(ibe||(Qx.UniquenessLevel=ibe={}));var obe;(function(t){t.$import="import",t.$export="export",t.local="local"})(obe||(Qx.MonikerKind=obe={}));var sbe;(function(t){t.method="textDocument/moniker",t.messageDirection=nbe.MessageDirection.clientToServer,t.type=new nbe.ProtocolRequestType(t.method)})(sbe||(Qx.MonikerRequest=sbe={}))});var dbe=G(Ox=>{"use strict";f();Object.defineProperty(Ox,"__esModule",{value:!0});Ox.TypeHierarchySubtypesRequest=Ox.TypeHierarchySupertypesRequest=Ox.TypeHierarchyPrepareRequest=void 0;var vS=Fs(),lbe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(lbe||(Ox.TypeHierarchyPrepareRequest=lbe={}));var cbe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(cbe||(Ox.TypeHierarchySupertypesRequest=cbe={}));var ube;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(ube||(Ox.TypeHierarchySubtypesRequest=ube={}))});var mbe=G(bS=>{"use strict";f();Object.defineProperty(bS,"__esModule",{value:!0});bS.InlineValueRefreshRequest=bS.InlineValueRequest=void 0;var VF=Fs(),fbe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=VF.MessageDirection.clientToServer,t.type=new VF.ProtocolRequestType(t.method)})(fbe||(bS.InlineValueRequest=fbe={}));var pbe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=VF.MessageDirection.serverToClient,t.type=new VF.ProtocolRequestType0(t.method)})(pbe||(bS.InlineValueRefreshRequest=pbe={}))});var ybe=G(Ux=>{"use strict";f();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.InlayHintRefreshRequest=Ux.InlayHintResolveRequest=Ux.InlayHintRequest=void 0;var ES=Fs(),hbe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=ES.MessageDirection.clientToServer,t.type=new ES.ProtocolRequestType(t.method)})(hbe||(Ux.InlayHintRequest=hbe={}));var gbe;(function(t){t.method="inlayHint/resolve",t.messageDirection=ES.MessageDirection.clientToServer,t.type=new ES.ProtocolRequestType(t.method)})(gbe||(Ux.InlayHintResolveRequest=gbe={}));var Abe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=ES.MessageDirection.serverToClient,t.type=new ES.ProtocolRequestType0(t.method)})(Abe||(Ux.InlayHintRefreshRequest=Abe={}))});var Tbe=G(Bf=>{"use strict";f();Object.defineProperty(Bf,"__esModule",{value:!0});Bf.DiagnosticRefreshRequest=Bf.WorkspaceDiagnosticRequest=Bf.DocumentDiagnosticRequest=Bf.DocumentDiagnosticReportKind=Bf.DiagnosticServerCancellationData=void 0;var Ibe=gI(),Yst=NF(),IS=Fs(),Cbe;(function(t){function e(r){let n=r;return n&&Yst.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(Cbe||(Bf.DiagnosticServerCancellationData=Cbe={}));var xbe;(function(t){t.Full="full",t.Unchanged="unchanged"})(xbe||(Bf.DocumentDiagnosticReportKind=xbe={}));var vbe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method),t.partialResult=new Ibe.ProgressType})(vbe||(Bf.DocumentDiagnosticRequest=vbe={}));var bbe;(function(t){t.method="workspace/diagnostic",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method),t.partialResult=new Ibe.ProgressType})(bbe||(Bf.WorkspaceDiagnosticRequest=bbe={}));var Ebe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=IS.MessageDirection.serverToClient,t.type=new IS.ProtocolRequestType0(t.method)})(Ebe||(Bf.DiagnosticRefreshRequest=Ebe={}))});var Pbe=G(sa=>{"use strict";f();Object.defineProperty(sa,"__esModule",{value:!0});sa.DidCloseNotebookDocumentNotification=sa.DidSaveNotebookDocumentNotification=sa.DidChangeNotebookDocumentNotification=sa.NotebookCellArrayChange=sa.DidOpenNotebookDocumentNotification=sa.NotebookDocumentSyncRegistrationType=sa.NotebookDocument=sa.NotebookCell=sa.ExecutionSummary=sa.NotebookCellKind=void 0;var YB=DF(),gm=NF(),dg=Fs(),Fee;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Fee||(sa.NotebookCellKind=Fee={}));var Mee;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return gm.objectLiteral(o)&&YB.uinteger.is(o.executionOrder)&&(o.success===void 0||gm.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Mee||(sa.ExecutionSummary=Mee={}));var $F;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return gm.objectLiteral(a)&&Fee.is(a.kind)&&YB.DocumentUri.is(a.document)&&(a.metadata===void 0||gm.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Mee.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(gm.objectLiteral(o)&&gm.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})($F||(sa.NotebookCell=$F={}));var wbe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return gm.objectLiteral(i)&&gm.string(i.uri)&&YB.integer.is(i.version)&&gm.typedArray(i.cells,$F.is)}s(r,"is"),t.is=r})(wbe||(sa.NotebookDocument=wbe={}));var TS;(function(t){t.method="notebookDocument/sync",t.messageDirection=dg.MessageDirection.clientToServer,t.type=new dg.RegistrationType(t.method)})(TS||(sa.NotebookDocumentSyncRegistrationType=TS={}));var _be;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=dg.MessageDirection.clientToServer,t.type=new dg.ProtocolNotificationType(t.method),t.registrationMethod=TS.method})(_be||(sa.DidOpenNotebookDocumentNotification=_be={}));var Sbe;(function(t){function e(n){let i=n;return gm.objectLiteral(i)&&YB.uinteger.is(i.start)&&YB.uinteger.is(i.deleteCount)&&(i.cells===void 0||gm.typedArray(i.cells,$F.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(Sbe||(sa.NotebookCellArrayChange=Sbe={}));var Rbe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=dg.MessageDirection.clientToServer,t.type=new dg.ProtocolNotificationType(t.method),t.registrationMethod=TS.method})(Rbe||(sa.DidChangeNotebookDocumentNotification=Rbe={}));var kbe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=dg.MessageDirection.clientToServer,t.type=new dg.ProtocolNotificationType(t.method),t.registrationMethod=TS.method})(kbe||(sa.DidSaveNotebookDocumentNotification=kbe={}));var Bbe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=dg.MessageDirection.clientToServer,t.type=new dg.ProtocolNotificationType(t.method),t.registrationMethod=TS.method})(Bbe||(sa.DidCloseNotebookDocumentNotification=Bbe={}))});var Lbe=G(zF=>{"use strict";f();Object.defineProperty(zF,"__esModule",{value:!0});zF.InlineCompletionRequest=void 0;var Dbe=Fs(),Nbe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Dbe.MessageDirection.clientToServer,t.type=new Dbe.ProtocolRequestType(t.method)})(Nbe||(zF.InlineCompletionRequest=Nbe={}))});var zEe=G(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Fs(),Fbe=DF(),Nl=NF(),Kst=ave();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return Kst.ImplementationRequest},"get")});var Jst=uve();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return Jst.TypeDefinitionRequest},"get")});var HEe=pve();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return HEe.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return HEe.DidChangeWorkspaceFoldersNotification},"get")});var Xst=gve();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return Xst.ConfigurationRequest},"get")});var jEe=Cve();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return jEe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return jEe.ColorPresentationRequest},"get")});var VEe=bve();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return VEe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return VEe.FoldingRangeRefreshRequest},"get")});var Zst=Tve();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return Zst.DeclarationRequest},"get")});var eat=Sve();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return eat.SelectionRangeRequest},"get")});var Wee=Pve();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Wee.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Wee.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Wee.WorkDoneProgressCancelNotification},"get")});var Gee=Fve();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Gee.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Gee.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Gee.CallHierarchyPrepareRequest},"get")});var wS=Wve();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return wS.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return wS.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return wS.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return wS.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return wS.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return wS.SemanticTokensRegistrationType},"get")});var tat=jve();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return tat.ShowDocumentRequest},"get")});var rat=zve();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return rat.LinkedEditingRangeRequest},"get")});var AI=rbe();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return AI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return AI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return AI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return AI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return AI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return AI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return AI.WillDeleteFilesRequest},"get")});var Hee=abe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return Hee.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return Hee.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return Hee.MonikerRequest},"get")});var jee=dbe();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return jee.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return jee.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return jee.TypeHierarchySupertypesRequest},"get")});var $Ee=mbe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return $Ee.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return $Ee.InlineValueRefreshRequest},"get")});var Vee=ybe();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return Vee.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return Vee.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return Vee.InlayHintRefreshRequest},"get")});var KB=Tbe();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return KB.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return KB.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return KB.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return KB.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return KB.DiagnosticRefreshRequest},"get")});var fg=Pbe();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return fg.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return fg.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return fg.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return fg.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return fg.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return fg.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return fg.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return fg.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return fg.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return fg.DidCloseNotebookDocumentNotification},"get")});var nat=Lbe();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return nat.InlineCompletionRequest},"get")});var Qee;(function(t){function e(r){let n=r;return Nl.string(n)||Nl.string(n.language)||Nl.string(n.scheme)||Nl.string(n.pattern)}s(e,"is"),t.is=e})(Qee||(xe.TextDocumentFilter=Qee={}));var Oee;(function(t){function e(r){let n=r;return Nl.objectLiteral(n)&&(Nl.string(n.notebookType)||Nl.string(n.scheme)||Nl.string(n.pattern))}s(e,"is"),t.is=e})(Oee||(xe.NotebookDocumentFilter=Oee={}));var Uee;(function(t){function e(r){let n=r;return Nl.objectLiteral(n)&&(Nl.string(n.notebook)||Oee.is(n.notebook))&&(n.language===void 0||Nl.string(n.language))}s(e,"is"),t.is=e})(Uee||(xe.NotebookCellTextDocumentFilter=Uee={}));var qee;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Nl.string(n)&&!Qee.is(n)&&!Uee.is(n))return!1;return!0}s(e,"is"),t.is=e})(qee||(xe.DocumentSelector=qee={}));var Mbe;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Mbe||(xe.RegistrationRequest=Mbe={}));var Qbe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Qbe||(xe.UnregistrationRequest=Qbe={}));var Obe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Obe||(xe.ResourceOperationKind=Obe={}));var Ube;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Ube||(xe.FailureHandlingKind=Ube={}));var qbe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(qbe||(xe.PositionEncodingKind=qbe={}));var Wbe;(function(t){function e(r){let n=r;return n&&Nl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(Wbe||(xe.StaticRegistrationOptions=Wbe={}));var Gbe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||qee.is(n.documentSelector))}s(e,"is"),t.is=e})(Gbe||(xe.TextDocumentRegistrationOptions=Gbe={}));var Hbe;(function(t){function e(n){let i=n;return Nl.objectLiteral(i)&&(i.workDoneProgress===void 0||Nl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&Nl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(Hbe||(xe.WorkDoneProgressOptions=Hbe={}));var jbe;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(jbe||(xe.InitializeRequest=jbe={}));var Vbe;(function(t){t.unknownProtocolVersion=1})(Vbe||(xe.InitializeErrorCodes=Vbe={}));var $be;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})($be||(xe.InitializedNotification=$be={}));var zbe;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(zbe||(xe.ShutdownRequest=zbe={}));var Ybe;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(Ybe||(xe.ExitNotification=Ybe={}));var Kbe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Kbe||(xe.DidChangeConfigurationNotification=Kbe={}));var Jbe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(Jbe||(xe.MessageType=Jbe={}));var Xbe;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Xbe||(xe.ShowMessageNotification=Xbe={}));var Zbe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Zbe||(xe.ShowMessageRequest=Zbe={}));var eEe;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(eEe||(xe.LogMessageNotification=eEe={}));var tEe;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(tEe||(xe.TelemetryEventNotification=tEe={}));var rEe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(rEe||(xe.TextDocumentSyncKind=rEe={}));var nEe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(nEe||(xe.DidOpenTextDocumentNotification=nEe={}));var iEe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(iEe||(xe.TextDocumentContentChangeEvent=iEe={}));var oEe;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(oEe||(xe.DidChangeTextDocumentNotification=oEe={}));var sEe;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(sEe||(xe.DidCloseTextDocumentNotification=sEe={}));var aEe;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(aEe||(xe.DidSaveTextDocumentNotification=aEe={}));var lEe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(lEe||(xe.TextDocumentSaveReason=lEe={}));var cEe;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(cEe||(xe.WillSaveTextDocumentNotification=cEe={}));var uEe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(uEe||(xe.WillSaveTextDocumentWaitUntilRequest=uEe={}));var dEe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(dEe||(xe.DidChangeWatchedFilesNotification=dEe={}));var fEe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(fEe||(xe.FileChangeType=fEe={}));var pEe;(function(t){function e(r){let n=r;return Nl.objectLiteral(n)&&(Fbe.URI.is(n.baseUri)||Fbe.WorkspaceFolder.is(n.baseUri))&&Nl.string(n.pattern)}s(e,"is"),t.is=e})(pEe||(xe.RelativePattern=pEe={}));var mEe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(mEe||(xe.WatchKind=mEe={}));var hEe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(hEe||(xe.PublishDiagnosticsNotification=hEe={}));var gEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(gEe||(xe.CompletionTriggerKind=gEe={}));var AEe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(AEe||(xe.CompletionRequest=AEe={}));var yEe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(yEe||(xe.CompletionResolveRequest=yEe={}));var CEe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(CEe||(xe.HoverRequest=CEe={}));var xEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(xEe||(xe.SignatureHelpTriggerKind=xEe={}));var vEe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(vEe||(xe.SignatureHelpRequest=vEe={}));var bEe;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(bEe||(xe.DefinitionRequest=bEe={}));var EEe;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(EEe||(xe.ReferencesRequest=EEe={}));var IEe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(IEe||(xe.DocumentHighlightRequest=IEe={}));var TEe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(TEe||(xe.DocumentSymbolRequest=TEe={}));var wEe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(wEe||(xe.CodeActionRequest=wEe={}));var _Ee;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(_Ee||(xe.CodeActionResolveRequest=_Ee={}));var SEe;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(SEe||(xe.WorkspaceSymbolRequest=SEe={}));var REe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(REe||(xe.WorkspaceSymbolResolveRequest=REe={}));var kEe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(kEe||(xe.CodeLensRequest=kEe={}));var BEe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(BEe||(xe.CodeLensResolveRequest=BEe={}));var PEe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(PEe||(xe.CodeLensRefreshRequest=PEe={}));var DEe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(DEe||(xe.DocumentLinkRequest=DEe={}));var NEe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(NEe||(xe.DocumentLinkResolveRequest=NEe={}));var LEe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(LEe||(xe.DocumentFormattingRequest=LEe={}));var FEe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(FEe||(xe.DocumentRangeFormattingRequest=FEe={}));var MEe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(MEe||(xe.DocumentRangesFormattingRequest=MEe={}));var QEe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(QEe||(xe.DocumentOnTypeFormattingRequest=QEe={}));var OEe;(function(t){t.Identifier=1})(OEe||(xe.PrepareSupportDefaultBehavior=OEe={}));var UEe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(UEe||(xe.RenameRequest=UEe={}));var qEe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(qEe||(xe.PrepareRenameRequest=qEe={}));var WEe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(WEe||(xe.ExecuteCommandRequest=WEe={}));var GEe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})(GEe||(xe.ApplyWorkspaceEditRequest=GEe={}))});var KEe=G(YF=>{"use strict";f();Object.defineProperty(YF,"__esModule",{value:!0});YF.createProtocolConnection=void 0;var YEe=gI();function iat(t,e,r,n){return YEe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,YEe.createMessageConnection)(t,e,r,n)}s(iat,"createProtocolConnection");YF.createProtocolConnection=iat});var XEe=G(fd=>{"use strict";f();var oat=fd&&fd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KF=fd&&fd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&oat(e,t,r)};Object.defineProperty(fd,"__esModule",{value:!0});fd.LSPErrorCodes=fd.createProtocolConnection=void 0;KF(gI(),fd);KF(DF(),fd);KF(Fs(),fd);KF(zEe(),fd);var sat=KEe();Object.defineProperty(fd,"createProtocolConnection",{enumerable:!0,get:s(function(){return sat.createProtocolConnection},"get")});var JEe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(JEe||(fd.LSPErrorCodes=JEe={}))});var ni=G(pg=>{"use strict";f();var aat=pg&&pg.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZEe=pg&&pg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&aat(e,t,r)};Object.defineProperty(pg,"__esModule",{value:!0});pg.createProtocolConnection=void 0;var lat=kee();ZEe(kee(),pg);ZEe(XEe(),pg);function cat(t,e,r,n){return(0,lat.createMessageConnection)(t,e,r,n)}s(cat,"createProtocolConnection");pg.createProtocolConnection=cat});var GIe=G((uM,WIe)=>{f();(function(t,e){typeof uM=="object"&&typeof WIe<"u"?e(uM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(uM,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function r(w,R){return w[R]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=r(E,c),k=e(String),B=r(k,c),N=e(Math),W=e(Array),ee=r(W,c),me=r(ee,"slice");function ae(w,R){try{return{v:w.apply(this,R)}}catch(P){return{e:P}}}s(ae,"safe");function H(w){return function(R){return typeof R===w}}s(H,"_createIs");function U(w){var R="[object "+w+"]";return function(P){return!!(P&&le(P)===R)}}s(U,"_createObjIs");function le(w){return _[b].call(w)}s(le,"objToString");function ie(w){return typeof w===d||w===d}s(ie,"isUndefined");function V(w){return!Y(w)}s(V,"isStrictUndefined");function O(w){return w===i||ie(w)}s(O,"isNullOrUndefined");function Y(w){return!!w||w!==n}s(Y,"isDefined");var te=H("string"),pe=H(a);function re(w){return!w&&O(w)?!1:!!w&&typeof w===l}s(re,"isObject");var ue=r(W,"isArray"),he=U("Error"),Ne=r(E,"getOwnPropertyDescriptor");function Se(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(Se,"objHasOwnProperty");var Je=e(r(E,"hasOwn"),Me);function Me(w,R){return Se(w,R)||!!Ne(w,R)}s(Me,"polyObjHasOwn");function ft(w,R,P){if(w&&re(w)){for(var F in w)if(Je(w,F)&&R[v](P||w,F,w[F])===-1)break}}s(ft,"objForEachKey");var It={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function yt(w){var R={};if(R[It.c]=!0,R[It.e]=!0,w.l){R.get=function(){return w.l.v};var P=Ne(w.l,"v");P&&P.set&&(R.set=function(F){w.l.v=F})}return ft(w,function(F,oe){R[It[F]]=V(oe)?R[It[F]]:oe}),R}s(yt,"_createProp");var vt=r(E,"defineProperty");function ce(w,R,P){return vt(w,R,yt(P))}s(ce,"objDefine");function Oe(w,R,P,F,oe){var Ee={};return ft(w,function(we,Qe){ye(Ee,we,R?Qe:we),ye(Ee,Qe,P?Qe:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,P,F){vt(w,R,{value:P,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),X="[object Error]";function ne(w,R){var P=o,F=_[b][v](w);F===X&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{P=JSON.stringify(w,i,R?typeof R=="number"?R:4:n),P=(P?P.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(oe){P=" - "+ne(oe,R)}return F+": "+P}s(ne,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function De(w){throw new TypeError(w)}s(De,"throwTypeError");var be=r(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var ht=r(E,"assign"),Ot=r(E,"keys"),lr=e(be,ze),Lt=e(r(E,"getPrototypeOf"),it);function qr(w){return Oe(w,1,0,lr)}s(qr,"createEnum");function $r(w){var R={};return ft(w,function(P,F){ye(R,P,F[1]),ye(R,F[0],F[1])}),lr(R)}s($r,"createSimpleMap");function dn(w){return $r(w)}s(dn,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function At(){if(!Ge){var w=ae(ut).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(At,"_getGlobalConfig");var Xt=Gt;function Gt(w,R,P){var F=R?R[w]:i;return function(oe){var Ee=(oe?oe[w]:i)||F;if(Ee||P){var we=arguments;return(Ee||P).apply(oe,Ee?me[v](we,1):we)}De('"'+tt(w)+'" not defined for '+ne(oe))}}s(Gt,"_unwrapFunctionWithPoly");var Ar=r(N,"min"),xr=r(N,"max"),jt=Xt("slice",B),rr=Xt("substring",B),Jt=Gt("substr",B,Ir);function Ir(w,R,P){return O(w)&&De("Invalid "+ne(w)),P<0?o:(R=R||0,R<0&&(R=xr(R+w[g],0)),ie(P)?jt(w,R):jt(w,R,R+P))}s(Ir,"polyStrSubstr");function Lr(w,R){return rr(w,0,R)}s(Lr,"strLeft");var zr="_urid",qn;function Kn(){if(!qn){var w=At();qn=w.gblSym=w.gblSym||{k:{},s:{}}}return qn}s(Kn,"_globalSymbolRegistry");function Mn(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Mn,"polyNewSymbol");function Vn(w){var R=Kn();if(!Je(R.k,w)){var P=Mn(w),F=Ot(R.s).length;P[zr]=function(){return F+"_"+P[b]()},R.k[w]=P,R.s[P[zr]()]=tt(w)}return R.k[w]}s(Vn,"polySymbolFor");var Zr;function $n(){Zr=At()}s($n,"_initTestHooks");function _e(w){return vt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var q="window",ge;function ve(w,R){var P;return function(){return!Zr&&$n(),(!P||Zr.lzy)&&(P=_e(ae(w,R).v)),P.v}}s(ve,"_getGlobalInstFn");function Z(w){return!Zr&&$n(),(!ge||w===!1||Zr.lzy)&&(ge=_e(ae(ut).v||i)),ge.v}s(Z,"getGlobal");function M(w,R){var P;if(!ge||R===!1?P=Z(R):P=ge.v,P&&P[w])return P[w];if(w===q)try{return window}catch{}return i}s(M,"getInst");var ke=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[q]);function _r(){return!!pr()}s(_r,"hasNavigator");var pr=ve(M,["navigator"]),ln,fn;function vr(){return ln=_e(ae(M,[m]).v),ln}s(vr,"_initSymbol");function Ht(w){var R=(Zr.lzy?0:ln)||vr();return R.v?R.v[w]:n}s(Ht,"_getSymbolKey");function Qn(w,R){!Zr&&$n();var P=(Zr.lzy?0:ln)||vr();return P.v?P.v(w):R?i:Mn(w)}s(Qn,"newSymbol");function Ws(w){return!Zr&&$n(),fn=(Zr.lzy?0:fn)||_e(ae(Ht,["for"]).v),(fn.v||Vn)(w)}s(Ws,"symbolFor");function Lp(w,R,P){return w.apply(R,P)}s(Lp,"fnApply");function Il(w,R,P){if(w)for(var F=w[g]>>>0,oe=0;oe<F&&!(oe in w&&R[v](P||w,w[oe],oe,w)===-1);oe++);}s(Il,"arrForEach");var Fp=Xt("indexOf",ee),tf=Xt("map",ee),na=Xt("reduce",ee),Eh=e(r(E,"create"),eC);function eC(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&De("Prototype must be an Object or function: "+ne(w));function P(){}return s(P,"tempFunc"),P[c]=w,new P}s(eC,"polyObjCreate");var G3;function Mp(w,R){var P=E.setPrototypeOf||function(F,oe){var Ee;!G3&&(G3=_e((Ee={},Ee[u]=[],Ee instanceof Array))),G3.v?F[u]=oe:ft(oe,function(we,Qe){return F[we]=Qe})};return P(w,R)}s(Mp,"objSetPrototypeOf");function fK(w,R,P){ae(ce,[R,y,{v:w,c:!0,e:!1}]),R=Mp(R,P);function F(){this[p]=R,ae(ce,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=P===i?Eh(P):(F[c]=P[c],new F),R}s(fK,"_createCustomError");function Ih(w,R){R&&(w[y]=R)}s(Ih,"_setName");function pK(w,R,P){var F=P||Error,oe=F[c][y],Ee=Error.captureStackTrace;return fK(w,function(){var we=this,Qe=arguments;try{ae(Ih,[F,w]);var Xe=Lp(F,we,me[v](Qe))||we;if(Xe!==we){var pt=Lt(we);pt!==Lt(Xe)&&Mp(Xe,pt)}return Ee&&Ee(Xe,we[p]),R&&R(Xe,Qe),Xe}finally{ae(Ih,[F,oe])}},F)}s(pK,"createCustomError");function MA(){return(Date.now||H3)()}s(MA,"utcNow");function H3(){return new Date().getTime()}s(H3,"polyUtcNow");function dw(w){return s(function(P){return O(P)&&De("strTrim called ["+ne(P)+"]"),P&&P.replace&&(P=P.replace(w,o)),P},"_doTrim")}s(dw,"_createTrimFn");var mK=dw(/^\s+|(?=\s)\s+$/g),kc=Gt("trim",B,mK),Th=r(N,"floor"),Zb,QA,eE;function wh(w){if(!w||typeof w!==l)return!1;eE||(eE=$e()?qt():!0);var R=!1;if(w!==eE){QA||(Zb=Function[c][b],QA=Zb[v](E));try{var P=Lt(w);R=!P,R||(Se(P,p)&&(P=P[p]),R=!!(P&&typeof P===a&&Zb[v](P)===QA))}catch{}}return R}s(wh,"isPlainObject");var fw;function tE(){return!Zr&&$n(),(!fw||Zr.lzy)&&(fw=_e(ae(M,["performance"]).v)),fw.v}s(tE,"getPerformance");var j3=r(N,"round"),tC=Gt("endsWith",B,rC);function rC(w,R,P){te(w)||De("'"+ne(w)+"' is not a string");var F=te(R)?R:tt(R),oe=!ie(P)&&P<w[g]?P:w[g];return rr(w,oe-F[g],oe)===F}s(rC,"polyStrEndsWith");var Or=Xt("indexOf",B),pu="ref",OA="unref",nC="hasRef",hK="enabled";function _h(w,R,P){var F=!0,oe=w?R(i):i,Ee;function we(){return F=!1,oe&&oe[OA]&&oe[OA](),Ee}s(we,"_unref");function Qe(){oe&&P(oe),oe=i}s(Qe,"_cancel");function Xe(){return oe=R(oe),F||we(),Ee}s(Xe,"_refresh");function pt(ir){!ir&&oe&&Qe(),ir&&!oe&&Xe()}return s(pt,"_setEnabled"),Ee={cancel:Qe,refresh:Xe},Ee[nC]=function(){return oe&&oe[nC]?oe[nC]():F},Ee[pu]=function(){return F=!0,oe&&oe[pu]&&oe[pu](),Ee},Ee[OA]=we,Ee=vt(Ee,hK,{get:s(function(){return!!oe},"get"),set:pt}),{h:Ee,dn:s(function(){oe=i},"dn")}}s(_h,"_createTimerHandler");function gK(w,R,P){var F=ue(R),oe=F?R.length:0,Ee=(oe>0?R[0]:F?n:R)||setTimeout,we=(oe>1?R[1]:n)||clearTimeout,Qe=P[0];P[0]=function(){Xe.dn(),Lp(Qe,n,me[v](arguments))};var Xe=_h(w,function(pt){if(pt){if(pt.refresh)return pt.refresh(),pt;Lp(we,n,[pt])}return Lp(Ee,n,P)},function(pt){Lp(we,n,[pt])});return Xe.h}s(gK,"_createTimeoutWith");function V3(w,R){return gK(!0,n,me[v](arguments))}s(V3,"scheduleTimeout");var rE=qr,AK=dn,nE="toLowerCase",Fa="length",Sh="warnToConsole",iE="throwInternal",iN="watch",yK="apply",ji="push",UA="splice",Rh="logger",$3="cancel",oE="name",mu="unload",oN="version",sN="loggingLevelConsole",z3="messageId",qA="message",Y3="diagLog",aN="userAgent",K3="split",iC="replace",kh="type",lN="evtName",pw="traceFlags",J3="getAttribute",mw;function CK(w,R){mw||(mw=pK("AggregationError",function(F,oe){oe[Fa]>1&&(F.errors=oe[1])}));var P=w||"One or more errors occurred.";throw Il(R,function(F,oe){P+=`
`.concat(oe," > ").concat(ne(F))}),new mw(P,R||[])}s(CK,"throwAggregationError");var xK="function",cN="object",vK="undefined",Qp="prototype",hw=Object,X3=hw[Qp];(Z()||{}).Symbol,(Z()||{}).Reflect;var gw="hasOwnProperty",bK=s(function(w){for(var R,P=1,F=arguments.length;P<F;P++){R=arguments[P];for(var oe in R)X3[gw].call(R,oe)&&(w[oe]=R[oe])}return w},"__objAssignFnImpl"),Aw=ht||bK,yw=s(function(w,R){return yw=hw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,F){P.__proto__=F}||function(P,F){for(var oe in F)F[gw](oe)&&(P[oe]=F[oe])},yw(w,R)},"extendStaticsFn");function Bh(w,R){typeof R!==xK&&R!==null&&De("Class extends value "+String(R)+" is not a constructor or null"),yw(w,R);function P(){this.constructor=w}s(P,"__"),w[Qp]=R===null?Eh(R):(P[Qp]=R[Qp],new P)}s(Bh,"__extendsFn");var Cw,WA="constructor",Yu="prototype",Ku="function",GA="_dynInstFuncs",oC="_isDynProxy",Ph="_dynClass",sC="_dynCls$",Z3="_dynInstChk",HA=Z3,aC="_dfOpts",ek="_unknown_",xw="__proto__",lC="_dyn"+xw,sE="__dynProto$Gbl",vw="_dynInstProto",cC="useBaseInst",uC="setInstFuncs",aE=Object,jA=aE.getPrototypeOf,dC=aE.getOwnPropertyNames,tk=Z(),bw=tk[sE]||(tk[sE]={o:(Cw={},Cw[uC]=!0,Cw[cC]=!0,Cw),n:1e3});function fC(w){return w&&(w===aE[Yu]||w===Array[Yu])}s(fC,"_isObjectOrArrayPrototype");function pC(w){return fC(w)||w===Function[Yu]}s(pC,"_isObjectArrayOrFunctionPrototype");function Op(w){var R;if(w){if(jA)return jA(w);var P=w[xw]||w[Yu]||(w[WA]?w[WA][Yu]:null);R=w[lC]||P,Se(w,lC)||(delete w[vw],R=w[lC]=w[vw]||w[lC],w[vw]=P)}return R}s(Op,"_getObjProto");function rf(w,R){var P=[];if(dC)P=dC(w);else for(var F in w)typeof F=="string"&&Se(w,F)&&P.push(F);if(P&&P.length>0)for(var oe=0;oe<P.length;oe++)R(P[oe])}s(rf,"_forEachProp");function mC(w,R,P){return R!==WA&&typeof w[R]===Ku&&(P||Se(w,R))&&R!==xw&&R!==Yu}s(mC,"_isDynamicCandidate");function hC(w){De("DynamicProto: "+w)}s(hC,"_throwTypeError");function Ew(w){var R=Eh(null);return rf(w,function(P){!R[P]&&mC(w,P,!1)&&(R[P]=w[P])}),R}s(Ew,"_getInstanceFuncs");function rk(w,R){for(var P=w.length-1;P>=0;P--)if(w[P]===R)return!0;return!1}s(rk,"_hasVisited");function nk(w,R,P,F){function oe(Xe,pt,ir){var bn=pt[ir];if(bn[oC]&&F){var Wn=Xe[GA]||{};Wn[HA]!==!1&&(bn=(Wn[pt[Ph]]||{})[ir]||bn)}return function(){return bn.apply(Xe,arguments)}}s(oe,"_instFuncProxy");var Ee=Eh(null);rf(P,function(Xe){Ee[Xe]=oe(R,P,Xe)});for(var we=Op(w),Qe=[];we&&!pC(we)&&!rk(Qe,we);)rf(we,function(Xe){!Ee[Xe]&&mC(we,Xe,!jA)&&(Ee[Xe]=oe(R,we,Xe))}),Qe.push(we),we=Op(we);return Ee}s(nk,"_getBaseFuncs");function EK(w,R,P,F){var oe=null;if(w&&Se(P,Ph)){var Ee=w[GA]||Eh(null);if(oe=(Ee[P[Ph]]||Eh(null))[R],oe||hC("Missing ["+R+"] "+Ku),!oe[Z3]&&Ee[HA]!==!1){for(var we=!Se(w,R),Qe=Op(w),Xe=[];we&&Qe&&!pC(Qe)&&!rk(Xe,Qe);){var pt=Qe[R];if(pt){we=pt===F;break}Xe.push(Qe),Qe=Op(Qe)}try{we&&(w[R]=oe),oe[Z3]=1}catch{Ee[HA]=!1}}}return oe}s(EK,"_getInstFunc");function IK(w,R,P){var F=R[w];return F===P&&(F=Op(R)[w]),typeof F!==Ku&&hC("["+w+"] is not a "+Ku),F}s(IK,"_getProtoFunc");function TK(w,R,P,F,oe){function Ee(Xe,pt){var ir=s(function(){var bn=EK(this,pt,Xe,ir)||IK(pt,Xe,ir);return bn.apply(this,arguments)},"dynProtoProxy");return ir[oC]=1,ir}if(s(Ee,"_createDynamicPrototype"),!fC(w)){var we=P[GA]=P[GA]||Eh(null);if(!fC(we)){var Qe=we[R]=we[R]||Eh(null);we[HA]!==!1&&(we[HA]=!!oe),fC(Qe)||rf(P,function(Xe){mC(P,Xe,!1)&&P[Xe]!==F[Xe]&&(Qe[Xe]=P[Xe],delete P[Xe],(!Se(w,Xe)||w[Xe]&&!w[Xe][oC])&&(w[Xe]=Ee(w,Xe)))})}}}s(TK,"_populatePrototype");function wK(w,R){if(jA){for(var P=[],F=Op(R);F&&!pC(F)&&!rk(P,F);){if(F===w)return!0;P.push(F),F=Op(F)}return!1}return!0}s(wK,"_checkPrototype");function ik(w,R){return Se(w,Yu)?w.name||R||ek:((w||{})[WA]||{}).name||R||ek}s(ik,"_getObjName");function lE(w,R,P,F){Se(w,Yu)||hC("theClass is an invalid class definition.");var oe=w[Yu];wK(oe,R)||hC("["+ik(w)+"] not in hierarchy of ["+ik(R)+"]");var Ee=null;Se(oe,Ph)?Ee=oe[Ph]:(Ee=sC+ik(w,"_")+"$"+bw.n,bw.n++,oe[Ph]=Ee);var we=lE[aC],Qe=!!we[cC];Qe&&F&&F[cC]!==void 0&&(Qe=!!F[cC]);var Xe=Ew(R),pt=nk(oe,R,Xe,Qe);P(R,pt);var ir=!!jA&&!!we[uC];ir&&F&&(ir=!!F[uC]),TK(oe,Ee,R,Xe,ir!==!1)}s(lE,"dynamicProto"),lE[aC]=bw.o;var tc=void 0,Gs="",uN="Not dynamic - ",dN=/-([a-z])/g,cE=/([^\w\d_$])/g,ok=/^(\d+[\w\d_$])/;function sk(w){return!O(w)}s(sk,"isNotNullOrUndefined");function Iw(w){var R=w;return R&&te(R)&&(R=R[iC](dN,function(P,F){return F.toUpperCase()}),R=R[iC](cE,"_"),R=R[iC](ok,function(P,F){return"_"+F})),R}s(Iw,"normalizeJsName");function fN(w,R){return w&&R?Or(w,R)!==-1:!1}s(fN,"strContains");function Up(w){return w&&w.toISOString()||""}s(Up,"toISOString");function Dh(w){return he(w)?w[oE]:Gs}s(Dh,"getExceptionName");function uE(w){return function(){function R(){var P=this;w&&ft(w,function(F,oe){P[F]=oe})}return s(R,"class_1"),R}()}s(uE,"createClassFromInterface");var pN="console",Tw="JSON",_K="crypto",Nh="msCrypto",gC="msie",zn="trident/",AC=null,VA=null,qp=null;function ww(){return typeof console!==vK?console:M(pN)}s(ww,"getConsole");function Vi(){return!!(typeof JSON===cN&&JSON||M(Tw)!==null)}s(Vi,"hasJSON");function yC(){return Vi()?JSON||M(Tw):null}s(yC,"getJSON");function ga(){return M(_K)}s(ga,"getCrypto");function CC(){return M(Nh)}s(CC,"getMsCrypto");function dE(){var w=pr();if(w&&(w[aN]!==VA||AC===null)){VA=w[aN];var R=(VA||Gs)[nE]();AC=fN(R,gC)||fN(R,zn)}return AC}s(dE,"isIE");function Lh(w){return(qp===null||w===!1)&&(qp=_r()&&!!pr().sendBeacon),qp}s(Lh,"isBeaconsSupported");function fE(w,R){if(w)for(var P=0;P<w[Fa];P++){var F=w[P];if(F[oE]&&F[oE]===R)return F}return{}}s(fE,"_getNamedValue");function _w(w){var R=ke();return R&&w?fE(R.querySelectorAll("meta"),w).content:null}s(_w,"findMetaTag");function nf(w){var R,P=tE();if(P){var F=P.getEntriesByType("navigation")||[];R=fE((F[Fa]>0?F[0]:{}).serverTiming,w).description}return R}s(nf,"findNamedServerTiming");var xC=4294967296,$d=4294967295,vC=123456789,Fh=987654321,Tl=!1,bC=vC,of=Fh;function mN(w){w<0&&(w>>>=0),bC=vC+w&$d,of=Fh-w&$d,Tl=!0}s(mN,"_mwcSeed");function $A(){try{var w=MA()&2147483647;mN((Math.random()*xC^w)+w)}catch{}}s($A,"_autoSeedMwc");function Sw(w){return w>0?Th(EC()/$d*(w+1))>>>0:0}s(Sw,"randomValue");function EC(w){var R=0,P=ga()||CC();return P&&P.getRandomValues&&(R=P.getRandomValues(new Uint32Array(1))[0]&$d),R===0&&dE()&&(Tl||$A(),R=hN()&$d),R===0&&(R=Th(xC*Math.random()|0)),w||(R>>>=0),R}s(EC,"random32");function hN(w){of=36969*(of&65535)+(of>>16)&$d,bC=18e3*(bC&65535)+(bC>>16)&$d;var R=(of<<16)+(bC&65535)>>>0&$d|0;return w||(R>>>=0),R}s(hN,"mwcRandom32");function zA(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=EC()>>>0,F=0,oe=Gs;oe[Fa]<w;)F++,oe+=R.charAt(P&63),P>>>=6,F===5&&(P=(EC()<<2&4294967295|P&3)>>>0,F=0);return oe}s(zA,"newId");var sf="3.3.6",Rw="."+zA(6),YA=0;function af(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(af,"_canAcceptData");function kw(w,R){var P=R[w.id];if(!P){P={};try{af(R)&&ce(R,w.id,{e:!1,v:P})}catch{}}return P}s(kw,"_getCache");function Wp(w,R){return R===void 0&&(R=!1),Iw(w+YA+++(R?"."+sf:Gs)+Rw)}s(Wp,"createUniqueNamespace");function lf(w){var R={id:Wp("_aiData-"+(w||Gs)+"."+sf),accept:s(function(P){return af(P)},"accept"),get:s(function(P,F,oe,Ee){var we=P[R.id];return we?we[Iw(F)]:(Ee&&(we=kw(R,P),we[Iw(F)]=oe),oe)},"get"),kill:s(function(P,F){if(P&&P[F])try{delete P[F]}catch{}},"kill")};return R}s(lf,"createElmNodeData");function Mh(w){return w&&re(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(Mh,"_isConfigDefaults");function Bw(w,R,P){var F,oe=P.dfVal||Y;if(R&&P.fb){var Ee=P.fb;ue(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[Fa];we++){var Qe=Ee[we],Xe=R[Qe];if(oe(Xe)?F=Xe:w&&(Xe=w.cfg[Qe],oe(Xe)&&(F=Xe),w.set(w.cfg,tt(Qe),Xe)),oe(F))break}}return!oe(F)&&oe(P.v)&&(F=P.v),F}s(Bw,"_getDefault");function Qh(w,R,P){var F=P;if(P&&Mh(P)&&(F=Bw(w,R,P)),F){Mh(F)&&(F=Qh(w,R,F));var oe;ue(F)?(oe=[],oe[Fa]=F[Fa]):wh(F)&&(oe={}),oe&&(ft(F,function(Ee,we){we&&Mh(we)&&(we=Qh(w,R,we)),oe[Ee]=we}),F=oe)}return F}s(Qh,"_resolveDefaultValue");function Oh(w,R,P,F){var oe,Ee,we,Qe=F,Xe,pt,ir,bn;Mh(Qe)?(oe=Qe.isVal,Ee=Qe.set,ir=Qe.rdOnly,bn=Qe.blkVal,Xe=Qe.mrg,pt=Qe.ref,!pt&&ie(pt)&&(pt=!!Xe),we=Bw(w,R,Qe)):we=F,bn&&w.blkVal(R,P);var Wn,cr=!0,br=R[P];(br||!O(br))&&(Wn=br,cr=!1,oe&&Wn!==we&&!oe(Wn)&&(Wn=we,cr=!0),Ee&&(Wn=Ee(Wn,we,R),cr=Wn===we)),cr?we?Wn=Qh(w,R,we):Wn=we:(wh(Wn)||ue(we))&&Xe&&we&&(wh(we)||ue(we))&&ft(we,function(On,En){Oh(w,Wn,On,En)}),w.set(R,P,Wn),pt&&w.ref(R,P),ir&&w.rdOnly(R,P)}s(Oh,"_applyDefaultValue");var rc=Ws("[[ai_dynCfg_1]]"),ak=Ws("[[ai_blkDynCfg_1]]"),pE=Ws("[[ai_frcDynCfg_1]]");function lk(w){if(w){var R;if(ue(w)?(R=[],R[Fa]=w[Fa]):wh(w)&&(R={}),R)return ft(w,function(P,F){R[P]=lk(F)}),R}return w}s(lk,"_cfgDeepCopy");function ck(w){if(w){var R=w[rc]||w;if(R.cfg&&(R.cfg===w||R.cfg[rc]===R))return R}return null}s(ck,"getDynamicConfigHandler");function IC(w){if(w&&(wh(w)||ue(w)))try{w[ak]=!0}catch{}return w}s(IC,"blockDynamicConversion");function Uh(w,R,P){var F=!1;return P&&!w[R.blkVal]&&(F=P[pE],!F&&!P[ak]&&(F=wh(P)||ue(P))),F}s(Uh,"_canMakeDynamic");function zd(w){De("InvalidAccess:"+w)}s(zd,"throwInvalidAccess");var gN=["push","pop","shift","unshift","splice"],Gp=s(function(w,R,P,F){w&&w[iE](3,108,"".concat(P," [").concat(R,"] failed - ")+ne(F))},"_throwDynamicError");function uk(w,R,P){ue(R)&&Il(gN,function(F){var oe=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Qe=oe[yK](this,Ee);return KA(w,R,P,"Patching"),Qe}})}s(uk,"_patchArray");function Hp(w,R){var P=Ne(w,R);return P&&P.get}s(Hp,"_getOwnPropGetter");function AN(w,R,P,F){var oe={n:P,h:[],trk:s(function(pt){pt&&pt.fn&&(Fp(oe.h,pt)===-1&&oe.h[ji](pt),w.trk(pt,oe))},"trk"),clr:s(function(pt){var ir=Fp(oe.h,pt);ir!==-1&&oe.h[UA](ir,1)},"clr")},Ee=!0,we=!1;function Qe(){Ee&&(we=we||Uh(Qe,w,F),F&&!F[rc]&&we&&(F=KA(w,F,P,"Converting")),Ee=!1);var pt=w.act;return pt&&oe.trk(pt),F}s(Qe,"_getProperty"),Qe[w.prop]={chng:s(function(){w.add(oe)},"chng")};function Xe(pt){if(F!==pt){Qe[w.ro]&&!w.upd&&zd("["+P+"] is read-only:"+ne(R)),Ee&&(we=we||Uh(Qe,w,F),Ee=!1);var ir=we&&Qe[w.rf];if(we)if(ir){ft(F,function(Wn){F[Wn]=pt?pt[Wn]:tc});try{ft(pt,function(Wn,cr){TC(w,F,Wn,cr)}),pt=F}catch(Wn){Gp((w.hdlr||{})[Rh],P,"Assigning",Wn),we=!1}}else F&&F[rc]&&ft(F,function(Wn){var cr=Hp(F,Wn);if(cr){var br=cr[w.prop];br&&br.chng()}});if(pt!==F){var bn=pt&&Uh(Qe,w,pt);!ir&&bn&&(pt=KA(w,pt,P,"Converting")),F=pt,we=bn}w.add(oe)}}s(Xe,"_setProperty"),ce(R,oe.n,{g:Qe,s:Xe})}s(AN,"_createDynamicProperty");function TC(w,R,P,F){if(R){var oe=Hp(R,P),Ee=oe&&!!oe[w.prop];Ee?R[P]=F:AN(w,R,P,F)}return R}s(TC,"_setDynamicProperty");function dk(w,R,P,F){if(R){var oe=Hp(R,P),Ee=oe&&!!oe[w.prop],we=F&&F[0],Qe=F&&F[1],Xe=F&&F[2];if(!Ee){if(Xe)try{IC(R)}catch(pt){Gp((w.hdlr||{})[Rh],P,"Blocking",pt)}try{TC(w,R,P,R[P]),oe=Hp(R,P)}catch(pt){Gp((w.hdlr||{})[Rh],P,"State",pt)}}we&&(oe[w.rf]=we),Qe&&(oe[w.ro]=Qe),Xe&&(oe[w.blkVal]=!0)}return R}s(dk,"_setDynamicPropertyState");function KA(w,R,P,F){try{ft(R,function(oe,Ee){TC(w,R,oe,Ee)}),R[rc]||(vt(R,rc,{get:s(function(){return w.hdlr},"get")}),uk(w,R,P))}catch(oe){Gp((w.hdlr||{})[Rh],P,F,oe)}return R}s(KA,"_makeDynamicObject");var JA="[[ai_",Ju="]]";function yN(w){var R=Qn(JA+"get"+w.uid+Ju),P=Qn(JA+"ro"+w.uid+Ju),F=Qn(JA+"rf"+w.uid+Ju),oe=Qn(JA+"blkVal"+w.uid+Ju),Ee=Qn(JA+"dtl"+w.uid+Ju),we=null,Qe=null,Xe;function pt(cr,br){var On=Xe.act;try{Xe.act=cr,cr&&cr[Ee]&&(Il(cr[Ee],function(mi){mi.clr(cr)}),cr[Ee]=[]),br({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(mi){var En=w[Rh];throw En&&En[iE](1,107,ne(mi)),mi}finally{Xe.act=On||null}}s(pt,"_useHandler");function ir(){if(we){var cr=we;we=null,Qe&&Qe[$3](),Qe=null;var br=[];if(Il(cr,function(On){if(On&&(On[Ee]&&(Il(On[Ee],function(En){En.clr(On)}),On[Ee]=null),On.fn))try{pt(On,On.fn)}catch(En){br[ji](En)}}),we)try{ir()}catch(On){br[ji](On)}br[Fa]>0&&CK("Watcher error(s): ",br)}}s(ir,"_notifyWatchers");function bn(cr){if(cr&&cr.h[Fa]>0){we||(we=[]),Qe||(Qe=V3(function(){Qe=null,ir()},0));for(var br=0;br<cr.h[Fa];br++){var On=cr.h[br];On&&Fp(we,On)===-1&&we[ji](On)}}}s(bn,"_addWatcher");function Wn(cr,br){if(cr){var On=cr[Ee]=cr[Ee]||[];Fp(On,br)===-1&&On[ji](br)}}return s(Wn,"_trackHandler"),Xe={prop:R,ro:P,rf:F,blkVal:oe,hdlr:w,add:bn,notify:ir,use:pt,trk:Wn},Xe}s(yN,"_createState");function SK(w,R){var P={fn:R,rm:s(function(){P.fn=null,w=null,R=null},"rm")};return ce(P,"toJSON",{v:s(function(){return"WatcherHandler"+(P.fn?"":"[X]")},"v")}),w.use(P,R),P}s(SK,"_createAndUseHandler");function CN(w,R,P){var F=ck(R);if(F)return F;var oe=Wp("dyncfg",!0),Ee=R&&P!==!1?R:lk(R),we;function Qe(){we.notify()}s(Qe,"_notifyWatchers");function Xe(En,mi,io){try{En=TC(we,En,mi,io)}catch(Bi){Gp(w,mi,"Setting value",Bi)}return En[mi]}s(Xe,"_setValue");function pt(En){return SK(we,En)}s(pt,"_watch");function ir(En,mi){we.use(null,function(io){var Bi=we.upd;try{ie(mi)||(we.upd=mi),En(io)}finally{we.upd=Bi}})}s(ir,"_block");function bn(En,mi){var io;return dk(we,En,mi,(io={},io[0]=!0,io))[mi]}s(bn,"_ref");function Wn(En,mi){var io;return dk(we,En,mi,(io={},io[1]=!0,io))[mi]}s(Wn,"_rdOnly");function cr(En,mi){var io;return dk(we,En,mi,(io={},io[2]=!0,io))[mi]}s(cr,"_blkPropValue");function br(En,mi){return mi&&ft(mi,function(io,Bi){Oh(On,En,io,Bi)}),En}s(br,"_applyDefaults");var On={uid:null,cfg:Ee,logger:w,notify:Qe,set:Xe,setDf:br,watch:pt,ref:bn,rdOnly:Wn,blkVal:cr,_block:ir};return ce(On,"uid",{c:!1,e:!1,w:!1,v:oe}),we=yN(On),KA(we,Ee,"config","Creating"),On}s(CN,"_createDynamicHandler");function xN(w,R){w?(w[Sh](R),w[iE](2,108,R)):zd(R)}s(xN,"_logInvalidAccess");function mE(w,R,P,F){var oe=CN(P,w||{},F);return R&&oe.setDf(oe.cfg,R),oe}s(mE,"createDynamicConfig");function vN(w,R,P){var F=w[rc]||w;return F.cfg&&(F.cfg===w||F.cfg[rc]===F)?F[iN](R):(xN(P,uN+ne(w)),mE(w,null,P)[iN](R))}s(vN,"onConfigChange");var Pw=null;function bN(){var w=M("Microsoft");return w&&(Pw=w.ApplicationInsights),Pw}s(bN,"_getExtensionNamespace");function RK(w){var R=Pw;return!R&&w.disableDbgExt!==!0&&(R=Pw||bN()),R?R.ChromeDbgExt:null}s(RK,"getDebugExt");var wC,Dw="warnToConsole",EN="AI (Internal): ",IN="AI: ",kK="AITR_",BK={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},TN=(wC={},wC[0]=null,wC[1]="errorToConsole",wC[2]=Dw,wC[3]="debugToConsole",wC);function wN(w){return w?'"'+w[iC](/\"/g,Gs)+'"':Gs}s(wN,"_sanitizeDiagnosticText");function Nw(w,R){var P=ww();if(P){var F="log";P[w]&&(F=w),pe(P[F])&&P[F](R)}}s(Nw,"_logToConsole");var Lw=function(){function w(R,P,F,oe){F===void 0&&(F=!1);var Ee=this;Ee[z3]=R,Ee[qA]=(F?IN:EN)+R;var we=Gs;Vi()&&(we=yC().stringify(oe));var Qe=(P?" message:"+wN(P):Gs)+(oe?" props:"+wN(we):Gs);Ee[qA]+=Qe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function PK(w,R){return(w||{})[Rh]||new Fw(R)}s(PK,"safeGetLogger");var Fw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var P=0,F={},oe,Ee,we,Qe,Xe;lE(w,this,function(pt){Xe=bn(R||{}),pt.consoleLoggingLevel=function(){return oe},pt[iE]=function(br,On,En,mi,io){io===void 0&&(io=!1);var Bi=new Lw(On,En,io,mi);if(Qe)throw ne(Bi);var Ma=TN[br]||Dw;if(ie(Bi[qA]))cr("throw"+(br===1?"Critical":"Warning"),Bi);else{if(io){var nx=+Bi[z3];!F[nx]&&oe>=br&&(pt[Ma](Bi[qA]),F[nx]=!0)}else oe>=br&&pt[Ma](Bi[qA]);ir(br,Bi)}},pt.debugToConsole=function(br){Nw("debug",br),cr("warning",br)},pt[Sh]=function(br){Nw("warn",br),cr("warning",br)},pt.errorToConsole=function(br){Nw("error",br),cr("error",br)},pt.resetInternalMessageCount=function(){P=0,F={}},pt.logInternalMessage=ir,pt[mu]=function(br){Xe&&Xe.rm(),Xe=null};function ir(br,On){if(!Wn()){var En=!0,mi=kK+On[z3];if(F[mi]?En=!1:F[mi]=!0,En&&(br<=Ee&&(pt.queue[ji](On),P++,cr(br===1?"error":"warn",On)),P===we)){var io="Internal events throttle limit per PageView reached for this app.",Bi=new Lw(23,io,!1);pt.queue[ji](Bi),br===1?pt.errorToConsole(io):pt[Sh](io)}}}s(ir,"_logInternalMessage");function bn(br){return vN(mE(br,BK,pt).cfg,function(On){var En=On.cfg;oe=En[sN],Ee=En.loggingLevelTelemetry,we=En.maxMessageLimit,Qe=En.enableDebug})}s(bn,"_setDefaultsFromConfig");function Wn(){return P>=we}s(Wn,"_areInternalMessagesThrottled");function cr(br,On){var En=RK(R||{});En&&En[Y3]&&En[Y3](br,On)}s(cr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function Mw(w){return w||new Fw}s(Mw,"_getLogger");function hu(w,R,P,F,oe,Ee){Ee===void 0&&(Ee=!1),Mw(w)[iE](R,P,F,oe,Ee)}s(hu,"_throwInternal");function Qw(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Gs,P,F=0;F<4;F++)P=EC(),R+=w[P&15]+w[P>>4&15]+w[P>>8&15]+w[P>>12&15]+w[P>>16&15]+w[P>>20&15]+w[P>>24&15]+w[P>>28&15];var oe=w[8+(EC()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+oe+Jt(R,16,3)+Jt(R,19,12)}s(Qw,"generateW3CId");var _C=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,fk="00",Xu="ff",pi="00000000000000000000000000000000",jp="0000000000000000",Aa=1;function Yd(w,R,P){return w&&w[Fa]===R&&w!==P?!!w.match(/^[\da-f]*$/i):!1}s(Yd,"_isValid");function Ow(w,R,P){return Yd(w,R)?w:P}s(Ow,"_formatValue");function XA(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[Fa]<2;)R="0"+R;return R}s(XA,"_formatFlags");function SC(w,R,P,F){return{version:Yd(F,2,Xu)?F:fk,traceId:RC(w)?w:Qw(),spanId:kC(R)?R:Lr(Qw(),16),traceFlags:P>=0&&P<=255?P:1}}s(SC,"createTraceParent");function Zu(w,R){if(!w||(ue(w)&&(w=w[0]||""),!w||!te(w)||w[Fa]>8192))return null;if(w.indexOf(",")!==-1){var P=w[K3](",");w=P[R>0&&P[Fa]>R?R:0]}var F=_C.exec(kc(w));return!F||F[1]===Xu||F[2]===pi||F[3]===jp?null:{version:(F[1]||Gs)[nE](),traceId:(F[2]||Gs)[nE](),spanId:(F[3]||Gs)[nE](),traceFlags:parseInt(F[4],16)}}s(Zu,"parseTraceParent");function RC(w){return Yd(w,32,pi)}s(RC,"isValidTraceId");function kC(w){return Yd(w,16,jp)}s(kC,"isValidSpanId");function BC(w){return!(!w||!Yd(w[oN],2,Xu)||!Yd(w.traceId,32,pi)||!Yd(w.spanId,16,jp)||!Yd(XA(w[pw]),2))}s(BC,"isValidTraceParent");function Uw(w){return BC(w)?(w[pw]&Aa)===Aa:!1}s(Uw,"isSampledFlag");function ZA(w){if(w){var R=XA(w[pw]);Yd(R,2)||(R="01");var P=w[oN]||fk;return P!=="00"&&P!=="ff"&&(P=fk),"".concat(P.toLowerCase(),"-").concat(Ow(w.traceId,32,pi).toLowerCase(),"-").concat(Ow(w.spanId,16,jp).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(ZA,"formatTraceParent");function pk(w){var R="traceparent",P=Zu(_w(R),w);return P||(P=Zu(nf(R),w)),P}s(pk,"findW3cTraceParent");function mk(w){var R=w.getElementsByTagName("script"),P=[];return Il(R,function(F){var oe=F[J3]("src");if(oe){var Ee=F[J3]("crossorigin"),we=F.hasAttribute("async")===!0,Qe=F.hasAttribute("defer")===!0,Xe=F[J3]("referrerpolicy"),pt={url:oe};Ee&&(pt.crossOrigin=Ee),we&&(pt.async=we),Qe&&(pt.defer=Qe),Xe&&(pt.referrerPolicy=Xe),P[ji](pt)}}),P}s(mk,"findAllScripts");var qw="on",hE="attachEvent",Ww="addEventListener",Gw="detachEvent",_N="removeEventListener",hk="events";Wp("aiEvtPageHide"),Wp("aiEvtPageShow");var DK=/\.[\.]+/g,NK=/[\.]+$/,Hw=1,PC=lf("events"),wl=/^([^.]*)(?:\.(.+)|)/;function gE(w){return w&&w[iC]?w[iC](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Gs):w}s(gE,"_normalizeNamespace");function al(w,R){if(R){var P=Gs;ue(R)?(P=Gs,Il(R,function(oe){oe=gE(oe),oe&&(oe[0]!=="."&&(oe="."+oe),P+=oe)})):P=gE(R),P&&(P[0]!=="."&&(P="."+P),w=(w||Gs)+P)}var F=wl.exec(w||Gs)||[];return{type:F[1],ns:(F[2]||Gs).replace(DK,".").replace(NK,Gs)[K3](".").sort().join(".")}}s(al,"_getEvtNamespace");function qh(w,R,P){P===void 0&&(P=!0);var F=PC.get(w,hk,{},P),oe=F[R];return oe||(oe=F[R]=[]),oe}s(qh,"_getRegisteredEvents");function SN(w,R,P,F){w&&R&&R[kh]&&(w[_N]?w[_N](R[kh],P,F):w[Gw]&&w[Gw](qw+R[kh],P))}s(SN,"_doDetach");function LK(w,R,P,F){var oe=!1;return w&&R&&R[kh]&&P&&(w[Ww]?(w[Ww](R[kh],P,F),oe=!0):w[hE]&&(w[hE](qw+R[kh],P),oe=!0)),oe}s(LK,"_doAttach");function AE(w,R,P,F){for(var oe=R[Fa];oe--;){var Ee=R[oe];Ee&&(!P.ns||P.ns===Ee[lN].ns)&&(!F||F(Ee))&&(SN(w,Ee[lN],Ee.handler,Ee.capture),R[UA](oe,1))}}s(AE,"_doUnregister");function gk(w,R,P){if(R[kh])AE(w,qh(w,R[kh]),R,P);else{var F=PC.get(w,hk,{});ft(F,function(oe,Ee){AE(w,Ee,R,P)}),Ot(F)[Fa]===0&&PC.kill(w,hk)}}s(gk,"_unregisterEvents");function FK(w,R){var P;return R?(ue(R)?P=[w].concat(R):P=[w,R],P=al("xx",P).ns[K3](".")):P=w,P}s(FK,"mergeEvtNamespace");function Ak(w,R,P,F,oe){oe===void 0&&(oe=!1);var Ee=!1;if(w)try{var we=al(R,F);if(Ee=LK(w,we,P,oe),Ee&&PC.accept(w)){var Qe={guid:Hw++,evtName:we,handler:P,capture:oe};qh(w,we.type)[ji](Qe)}}catch{}return Ee}s(Ak,"eventOn");function RN(w,R,P,F,oe){if(oe===void 0&&(oe=!1),w)try{var Ee=al(R,F),we=!1;gk(w,Ee,function(Qe){return Ee.ns&&!P||Qe.handler===P?(we=!0,!0):!1}),we||SN(w,Ee,P,oe)}catch{}}s(RN,"eventOff");var jw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",kN="sampleRate",Vw="ProcessLegacy",BN="http.method",yk="https://dc.services.visualstudio.com",yE="/v2/track",cf="not_specified",Ck="iKey",PN=AK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Wh="split",vn="length",DC="toLowerCase",e1="ingestionendpoint",t1="toString",xk="removeItem",CE="message",NC="count",$w="preTriggerDate",vk="getUTCDate",zw="stringify",LC="pathname",r1="match",bk="correlationHeaderExcludePatterns",ed="name",FC="extensionConfig",uf="properties",Bc="measurements",MC="sizeInBytes",xE="typeName",QC="exceptions",vE="severityLevel",OC="problemGroup",gu="parsedStack",Yw="hasFullStack",Kw="assembly",Kd="fileName",UC="line",Gh="aiDataContract",bE="duration";function Ek(w,R,P){var F=R[vn],oe=Ik(w,R);if(oe[vn]!==F){for(var Ee=0,we=oe;P[we]!==void 0;)Ee++,we=rr(oe,0,147)+DN(Ee);oe=we}return oe}s(Ek,"dataSanitizeKeyAndAddUniqueness");function Ik(w,R){var P;return R&&(R=kc(tt(R)),R[vn]>150&&(P=rr(R,0,150),hu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),P||R}s(Ik,"dataSanitizeKey");function ll(w,R,P){P===void 0&&(P=1024);var F;return R&&(P=P||1024,R=kc(tt(R)),R[vn]>P&&(F=rr(R,0,P),hu(w,2,61,"string value is too long. It has been truncated to "+P+" characters.",{value:R},!0))),F||R}s(ll,"dataSanitizeString");function df(w,R){return wk(w,R,2048,66)}s(df,"dataSanitizeUrl");function Jw(w,R){var P;return R&&R[vn]>32768&&(P=rr(R,0,32768),hu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),P||R}s(Jw,"dataSanitizeMessage");function Tk(w,R){var P;if(R){var F=""+R;F[vn]>32768&&(P=rr(F,0,32768),hu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return P||R}s(Tk,"dataSanitizeException");function Vp(w,R){if(R){var P={};ft(R,function(F,oe){if(re(oe)&&Vi())try{oe=yC()[zw](oe)}catch(Ee){hu(w,2,49,"custom property is not valid",{exception:Ee},!0)}oe=ll(w,oe,8192),F=Ek(w,F,P),P[F]=oe}),R=P}return R}s(Vp,"dataSanitizeProperties");function td(w,R){if(R){var P={};ft(R,function(F,oe){F=Ek(w,F,P),P[F]=oe}),R=P}return R}s(td,"dataSanitizeMeasurements");function qC(w,R){return R&&wk(w,R,128,69)[t1]()}s(qC,"dataSanitizeId");function wk(w,R,P,F){var oe;return R&&(R=kc(tt(R)),R[vn]>P&&(oe=rr(R,0,P),hu(w,2,F,"input is too long, it has been truncated to "+P+" characters.",{data:R},!0))),oe||R}s(wk,"dataSanitizeInput");function DN(w){var R="00"+w;return Jt(R,R[vn]-3)}s(DN,"dsPadNumber");var _k=ke()||{},NN=0,MK=[null,null,null,null,null];function WC(w){var R=NN,P=MK,F=P[R];return _k.createElement?P[R]||(F=P[R]=_k.createElement("a")):F={host:FN(w,!0)},F.href=w,R++,R>=P[vn]&&(R=0),NN=R,F}s(WC,"urlParseUrl");function QK(w){var R,P=WC(w);return P&&(R=P.href),R}s(QK,"urlGetAbsoluteUrl");function OK(w){var R,P=WC(w);return P&&(R=P[LC]),R}s(OK,"urlGetPathName");function LN(w,R){return w?w.toUpperCase()+" "+R:R}s(LN,"urlGetCompleteUrl");function FN(w,R){var P=$p(w,R)||"";if(P){var F=P[r1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[vn]>3&&te(F[2])&&F[2][vn]>0)return F[2]+(F[3]||"")}return P}s(FN,"urlParseHost");function $p(w,R){var P=null;if(w){var F=w[r1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[vn]>2&&te(F[2])&&F[2][vn]>0&&(P=F[2]||"",R&&F[vn]>2)){var oe=(F[1]||"")[DC](),Ee=F[3]||"";(oe==="http"&&Ee===":80"||oe==="https"&&Ee===":443")&&(Ee=""),P+=Ee}}return P}s($p,"urlParseFullHost");var MN=[yk+yE,"https://breeze.aimon.applicationinsights.io"+yE,"https://dc-int.services.visualstudio.com"+yE],GC="cid-v1:";function QN(w){return Fp(MN,w[DC]())!==-1}s(QN,"isInternalApplicationInsightsEndpoint");function Sk(w){GC=w}s(Sk,"correlationIdSetPrefix");function Rk(){return GC}s(Rk,"correlationIdGetPrefix");function Hh(w,R,P){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[bk]){for(var F=0;F<w.correlationHeaderExcludePatterns[vn];F++)if(w[bk][F].test(R))return!1}var oe=WC(R).host[DC]();if(oe&&(Or(oe,":443")!==-1||Or(oe,":80")!==-1)&&(oe=($p(R,!0)||"")[DC]()),(!w||!w.enableCorsCorrelation)&&oe&&oe!==P)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(Il(Ee,function(pt){var ir=new RegExp(pt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||ir.test(oe)}),!we)return!1}var Qe=w&&w.correlationHeaderExcludedDomains;if(!Qe||Qe[vn]===0)return!0;for(var F=0;F<Qe[vn];F++){var Xe=new RegExp(Qe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Xe.test(oe))return!1}return oe&&oe[vn]>0}s(Hh,"correlationIdCanIncludeCorrelationHeader");function ON(w){if(w){var R=UN(w,PN[1]);if(R&&R!==GC)return R}}s(ON,"correlationIdGetCorrelationContext");function UN(w,R){if(w)for(var P=w[Wh](","),F=0;F<P[vn];++F){var oe=P[F][Wh]("=");if(oe[vn]===2&&oe[0]===R)return oe[1]}}s(UN,"correlationIdGetCorrelationContextValue");function qN(w,R,P,F){var oe,Ee=F,we=F;if(R&&R[vn]>0){var Qe=WC(R);if(oe=Qe.host,!Ee)if(Qe[LC]!=null){var Xe=Qe.pathname[vn]===0?"/":Qe[LC];Xe.charAt(0)!=="/"&&(Xe="/"+Xe),we=Qe[LC],Ee=ll(w,P?P+" "+Xe:Xe)}else Ee=ll(w,R)}else oe=F,Ee=F;return{target:oe,name:Ee,data:we}}s(qN,"AjaxHelperParseDependencyPath");function UK(){var w=tE();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return MA()}s(UK,"dateTimeUtilsNow");function qK(w,R){var P=null;return w!==0&&R!==0&&!O(w)&&!O(R)&&(P=R-w),P}s(qK,"dateTimeUtilsDuration");function kk(w,R){var P=w||{};return{getName:s(function(){return P[ed]},"getName"),setName:s(function(F){R&&R.setName(F),P[ed]=F},"setName"),getTraceId:s(function(){return P.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),RC(F)&&(P.traceID=F)},"setTraceId"),getSpanId:s(function(){return P.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),kC(F)&&(P.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return P.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),P.traceFlags=F},"setTraceFlags")}}s(kk,"createDistributedTraceContextFromTrace");var HC=rE({LocalStorage:0,SessionStorage:1}),WK=rE({AI:0,AI_AND_W3C:1,W3C:2}),EE=rE({Normal:1,Critical:2}),jh=void 0,Jd=void 0,WN="";function jC(){return Xw()?VC(HC.LocalStorage):null}s(jC,"_getLocalStorageObject");function VC(w){try{if(O(Z()))return null;var R=new Date()[t1](),P=M(w===HC.LocalStorage?"localStorage":"sessionStorage"),F=WN+R;P.setItem(F,R);var oe=P.getItem(F)!==R;if(P[xk](F),!oe)return P}catch{}return null}s(VC,"_getVerifiedStorageObject");function $C(){return zp()?VC(HC.SessionStorage):null}s($C,"_getSessionStorageObject");function IE(){jh=!1,Jd=!1}s(IE,"utlDisableStorage");function TE(w){WN=w||""}s(TE,"utlSetStoragePrefix");function GK(){jh=Xw(!0),Jd=zp(!0)}s(GK,"utlEnableStorage");function Xw(w){return(w||jh===void 0)&&(jh=!!VC(HC.LocalStorage)),jh}s(Xw,"utlCanUseLocalStorage");function GN(w,R){var P=jC();if(P!==null)try{return P.getItem(R)}catch(F){jh=!1,hu(w,2,1,"Browser failed read of local storage. "+Dh(F),{exception:ne(F)})}return null}s(GN,"utlGetLocalStorage");function HN(w,R,P){var F=jC();if(F!==null)try{return F.setItem(R,P),!0}catch(oe){jh=!1,hu(w,2,3,"Browser failed write to local storage. "+Dh(oe),{exception:ne(oe)})}return!1}s(HN,"utlSetLocalStorage");function rd(w,R){var P=jC();if(P!==null)try{return P[xk](R),!0}catch(F){jh=!1,hu(w,2,5,"Browser failed removal of local storage item. "+Dh(F),{exception:ne(F)})}return!1}s(rd,"utlRemoveStorage");function zp(w){return(w||Jd===void 0)&&(Jd=!!VC(HC.SessionStorage)),Jd}s(zp,"utlCanUseSessionStorage");function zC(){var w=[];return zp()&&ft(M("sessionStorage"),function(R){w.push(R)}),w}s(zC,"utlGetSessionStorageKeys");function jN(w,R){var P=$C();if(P!==null)try{return P.getItem(R)}catch(F){Jd=!1,hu(w,2,2,"Browser failed read of session storage. "+Dh(F),{exception:ne(F)})}return null}s(jN,"utlGetSessionStorage");function HK(w,R,P){var F=$C();if(F!==null)try{return F.setItem(R,P),!0}catch(oe){Jd=!1,hu(w,2,4,"Browser failed write to session storage. "+Dh(oe),{exception:ne(oe)})}return!1}s(HK,"utlSetSessionStorage");function VN(w,R){var P=$C();if(P!==null)try{return P[xk](R),!0}catch(F){Jd=!1,hu(w,2,6,"Browser failed removal of session storage item. "+Dh(F),{exception:ne(F)})}return!1}s(VN,"utlRemoveSessionStorage");var jK="appInsightsThrottle",VK=function(){function w(R,P){var F=this,oe,Ee,we,Qe,Xe,pt,ir,bn=!1,Wn=!1;br(),F._getDbgPlgTargets=function(){return[ir]},F.getConfig=function(){return we},F.canThrottle=function(Et){var Rr=Hk(Et),en=On(Et);return io(en,oe,Rr)},F.isTriggered=function(Et){return c7(Et)},F.isReady=function(){return bn},F.flush=function(Et){try{var Rr=u7(Et);if(Rr&&Rr[vn]>0){var en=Rr.slice(0);return ir[Et]=[],Il(en,function(Lo){cr(Lo.msgID,Lo[CE],Lo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(ir){var Et=!0;return ft(ir,function(Rr){var en=F.flush(parseInt(Rr));Et=Et&&en}),Et}}catch{}return!1},F.onReadyState=function(Et,Rr){return Rr===void 0&&(Rr=!0),bn=O(Et)?!0:Et,bn&&Rr?F.flushAll():null},F.sendMessage=function(Et,Rr,en){return cr(Et,Rr,en,!0)};function cr(Et,Rr,en,Lo){if(bn){var Qa=uJ(Et);if(!Qa)return;var Hs=On(Et),Oa=Hk(Et),i1=io(Hs,oe,Oa),Kh=!1,ix=0,d7=c7(Et);try{i1&&!d7?(ix=Ar(Hs.limit.maxSendNumber,Oa[NC]+1),Oa[NC]=0,Kh=!0,Xe[Et]=!0,Oa[$w]=new Date):(Xe[Et]=i1,Oa[NC]+=1);var f7=Bi(Et);Gk(Ee,f7,Oa);for(var f_=0;f_<ix;f_++)l7(Et,Ee,Rr,en)}catch{}return{isThrottled:Kh,throttleNum:ix}}else if(Lo){var dJ=u7(Et);dJ.push({msgID:Et,message:Rr,severity:en})}return null}s(cr,"_flushMessage");function br(){Ee=PK(R),Xe={},Qe={},ir={},we={},En(109),pt=sk(P)?P:"",R.addUnloadHook(vN(R.config,function(Et){var Rr=Et.cfg;oe=Xw();var en=Rr.throttleMgrCfg||{};ft(en,function(Lo,Qa){En(parseInt(Lo),Qa)})}))}s(br,"_initConfig");function On(Et){return we[Et]||we[109]}s(On,"_getCfgByKey");function En(Et,Rr){var en,Lo;try{var Qa=Rr||{},Hs={};Hs.disabled=!!Qa.disabled;var Oa=Qa.interval||{};Wn=Oa?.daysOfMonth&&Oa?.daysOfMonth[vn]>0,Hs.interval=mi(Oa);var i1={samplingRate:((en=Qa.limit)===null||en===void 0?void 0:en.samplingRate)||100,maxSendNumber:((Lo=Qa.limit)===null||Lo===void 0?void 0:Lo.maxSendNumber)||1};Hs.limit=i1,we[Et]=Hs}catch{}}s(En,"_setCfgByKey");function mi(Et){Et=Et||{};var Rr=Et?.monthInterval,en=Et?.dayInterval;return O(Rr)&&O(en)&&(Et.monthInterval=3,Wn||(Et.daysOfMonth=[28],Wn=!0)),Et={monthInterval:Et?.monthInterval,dayInterval:Et?.dayInterval,daysOfMonth:Et?.daysOfMonth},Et}s(mi,"_getIntervalConfig");function io(Et,Rr,en){if(Et&&!Et.disabled&&Rr&&sk(en)){var Lo=DE(),Qa=en.date,Hs=Et.interval,Oa=1;if(Hs?.monthInterval){var i1=(Lo.getUTCFullYear()-Qa.getUTCFullYear())*12+Lo.getUTCMonth()-Qa.getUTCMonth();Oa=d_(Hs.monthInterval,0,i1)}var Kh=1;if(Wn)Kh=Fp(Hs.daysOfMonth,Lo[vk]());else if(Hs?.dayInterval){var ix=Th((Lo.getTime()-Qa.getTime())/864e5);Kh=d_(Hs.dayInterval,0,ix)}return Oa>=0&&Kh>=0}return!1}s(io,"_canThrottle");function Bi(Et,Rr){var en=sk(Rr)?Rr:"";return Et?jK+en+"-"+Et:null}s(Bi,"_getLocalStorageName");function Ma(Et){try{if(Et){var Rr=new Date;return Et.getUTCFullYear()===Rr.getUTCFullYear()&&Et.getUTCMonth()===Rr.getUTCMonth()&&Et[vk]()===Rr[vk]()}}catch{}return!1}s(Ma,"_isTriggeredOnCurDate");function nx(Et,Rr,en){try{var Lo={date:DE(),count:0};if(Et){var Qa=JSON.parse(Et),Hs={date:DE(Qa.date)||Lo.date,count:Qa[NC]||Lo[NC],preTriggerDate:Qa.preTriggerDate?DE(Qa[$w]):void 0};return Hs}else return Gk(Rr,en,Lo),Lo}catch{}return null}s(nx,"_getLocalStorageObj");function DE(Et){try{if(Et){var Rr=new Date(Et);if(!isNaN(Rr.getDate()))return Rr}else return new Date}catch{}return null}s(DE,"_getThrottleDate");function Gk(Et,Rr,en){try{return HN(Et,Rr,kc(JSON[zw](en)))}catch{}return!1}s(Gk,"_resetLocalStorage");function d_(Et,Rr,en){return Et<=0?1:en>=Rr&&(en-Rr)%Et==0?Th((en-Rr)/Et)+1:-1}s(d_,"_checkInterval");function l7(Et,Rr,en,Lo){hu(Rr,Lo||1,Et,en)}s(l7,"_sendMessage");function uJ(Et){try{var Rr=On(Et);return Sw(1e6)<=Rr.limit.samplingRate}catch{}return!1}s(uJ,"_canSampledIn");function Hk(Et){try{var Rr=Qe[Et];if(!Rr){var en=Bi(Et,pt);Rr=nx(GN(Ee,en),Ee,en),Qe[Et]=Rr}return Qe[Et]}catch{}return null}s(Hk,"_getLocalStorageObjByKey");function c7(Et){var Rr=Xe[Et];if(O(Rr)){Rr=!1;var en=Hk(Et);en&&(Rr=Ma(en[$w])),Xe[Et]=Rr}return Xe[Et]}s(c7,"_isTrigger");function u7(Et){return ir=ir||{},O(ir[Et])&&(ir[Et]=[]),ir[Et]}s(u7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),Bk=";",ff="=";function Zw(w){if(!w)return{};var R=w[Wh](Bk),P=na(R,function(oe,Ee){var we=Ee[Wh](ff);if(we[vn]===2){var Qe=we[0][DC](),Xe=we[1];oe[Qe]=Xe}return oe},{});if(Ot(P)[vn]>0){if(P.endpointsuffix){var F=P.location?P.location+".":"";P[e1]=P[e1]||"https://"+F+"dc."+P.endpointsuffix}P[e1]=P[e1]||yk,tC(P[e1],"/")&&(P[e1]=P[e1].slice(0,-1))}return P}s(Zw,"parseConnectionString");var e_={parse:Zw},t_=function(){function w(R,P,F){var oe=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[ed]=ll(R,F)||cf,Ee.data=P,Ee.time=Up(new Date),Ee[Gh]={time:1,iKey:1,name:1,sampleRate:s(function(){return oe.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),$K=function(){function w(R,P,F,oe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[ed]=ll(R,P)||cf,Ee[uf]=Vp(R,F),Ee[Bc]=td(R,oe)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),zK=58,$N=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,YK=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,YC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,zN=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,KK=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,JK=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,XK=/([^\(\s\n]+):([0-9]+)$/,YN="<no_method>",KC="error",Au="stack",wE="stackDetails",r_="errorSrc",_E="message",SE="description",Pk=[{re:YK,len:5,m:1,fn:2,ln:3,col:4},{chk:n_,pre:Tr,re:YC,len:4,m:1,fn:2,ln:3},{re:zN,len:3,m:1,fn:2,hdl:Nk},{re:KK,len:2,fn:1,hdl:Nk}];function Tr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Tr,"_scrubAnonymous");function n_(w){return Or(w,"[native")<0}s(n_,"_ignoreNative");function RE(w,R){var P=w;return P&&!te(P)&&(JSON&&JSON[zw]?(P=JSON[zw](w),R&&(!P||P==="{}")&&(pe(w[t1])?P=w[t1]():P=""+w)):P=""+w+" - (Missing JSON.stringify)"),P||""}s(RE,"_stringify");function Vh(w,R){var P=w;return w&&(P&&!te(P)&&(P=w[_E]||w[SE]||P),P&&!te(P)&&(P=RE(P,!0)),w.filename&&(P=P+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&Or(P||"",R)===-1&&(P=R+": "+P),P||""}s(Vh,"_formatMessage");function KN(w){try{if(re(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(KN,"_isExceptionDetailsInternal");function JN(w){try{if(re(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(JN,"_isExceptionInternal");function i_(w){return w&&w.src&&te(w.src)&&w.obj&&ue(w.obj)}s(i_,"_isStackDetails");function Yp(w){var R=w||"";te(R)||(te(R[Au])?R=R[Au]:R=""+R);var P=R[Wh](`
`);return{src:R,obj:P}}s(Yp,"_convertStackObj");function XN(w){for(var R=[],P=w[Wh](`
`),F=0;F<P[vn];F++){var oe=P[F];P[F+1]&&(oe+="@"+P[F+1],F++),R.push(oe)}return{src:w,obj:R}}s(XN,"_getOperaStack");function o_(w){var R=null;if(w)try{if(w[Au])R=Yp(w[Au]);else if(w[KC]&&w[KC][Au])R=Yp(w[KC][Au]);else if(w.exception&&w.exception[Au])R=Yp(w.exception[Au]);else if(i_(w))R=w;else if(i_(w[wE]))R=w[wE];else if(qt()&&qt().opera&&w[_E])R=XN(w[CE]);else if(w.reason&&w.reason[Au])R=Yp(w.reason[Au]);else if(te(w))R=Yp(w);else{var P=w[_E]||w[SE]||"";te(w[r_])&&(P&&(P+=`
`),P+=" from "+w[r_]),P&&(R=Yp(P))}}catch(F){R=Yp(F)}return R||{src:"",obj:null}}s(o_,"_getStackFromErrorObj");function ZN(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(ZN,"_formatStackTrace");function s_(w){var R,P=w.obj;if(P&&P[vn]>0){R=[];var F=0,oe=!1,Ee=0;Il(P,function(On){if(oe||ZK(On)){var En=tt(On);oe=!0;var mi=eJ(En,F);mi&&(Ee+=mi[MC],R.push(mi),F++)}});var we=32*1024;if(Ee>we)for(var Qe=0,Xe=R[vn]-1,pt=0,ir=Qe,bn=Xe;Qe<Xe;){var Wn=R[Qe][MC],cr=R[Xe][MC];if(pt+=Wn+cr,pt>we){var br=bn-ir+1;R.splice(ir,br);break}ir=Qe,bn=Xe,Qe++,Xe--}}return R}s(s_,"_parseStack");function JC(w){var R="";if(w&&(R=w.typeName||w[ed]||"",!R))try{var P=/function (.{1,200})\(/,F=P.exec(w.constructor[t1]());R=F&&F[vn]>1?F[1]:""}catch{}return R}s(JC,"_getErrorType");function a_(w){if(w)try{if(!te(w)){var R=JC(w),P=RE(w,!1);return(!P||P==="{}")&&(w[KC]&&(w=w[KC],R=JC(w)),P=RE(w,!0)),Or(P,R)!==0&&R!=="String"?R+":"+P:P}}catch{}return""+(w||"")}s(a_,"_formatErrorCode");var pf=function(){function w(R,P,F,oe,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Qe=this;Qe.ver=2,JN(P)?(Qe[QC]=P[QC]||[],Qe[uf]=P[uf],Qe[Bc]=P[Bc],P[vE]&&(Qe[vE]=P[vE]),P.id&&(Qe.id=P.id,P[uf].id=P.id),P[OC]&&(Qe[OC]=P[OC]),O(P.isManual)||(Qe.isManual=P.isManual)):(F||(F={}),we&&(F.id=we),Qe[QC]=[r7(R,P,F)],Qe[uf]=Vp(R,F),Qe[Bc]=td(R,oe),Ee&&(Qe[vE]=Ee),we&&(Qe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,P,F,oe,Ee,we,Qe,Xe){var pt=JC(Ee||we||R);return{message:Vh(R,pt),url:P,lineNumber:F,columnNumber:oe,error:a_(Ee||we||R),evt:a_(we||R),typeName:pt,stackDetails:o_(Qe||Ee||we),errorSrc:Xe}},w.CreateFromInterface=function(R,P,F,oe){var Ee=P[QC]&&tf(P[QC],function(Qe){return Dk(R,Qe)}),we=new w(R,Aw(Aw({},P),{exceptions:Ee}),F,oe);return we},w.prototype.toInterface=function(){var R=this,P=R.exceptions,F=R.properties,oe=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Qe=R.id,Xe=R.isManual,pt=P instanceof Array&&tf(P,function(ir){return ir.toInterface()})||void 0;return{ver:"4.0",exceptions:pt,severityLevel:Ee,properties:F,measurements:oe,problemGroup:we,id:Qe,isManual:Xe}},w.CreateSimpleException=function(R,P,F,oe,Ee,we){var Qe;return{exceptions:[(Qe={},Qe[Yw]=!0,Qe.message=R,Qe.stack=Ee,Qe.typeName=P,Qe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=a_,w}(),e7=lr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function t7(){var w=this,R=ue(w[gu])&&tf(w[gu],function(F){return i7(F)}),P={id:w.id,outerId:w.outerId,typeName:w[xE],message:w[CE],hasFullStack:w[Yw],stack:w[Au],parsedStack:R||void 0};return P}s(t7,"_toInterface");function r7(w,R,P){var F,oe,Ee,we,Qe,Xe,pt,ir;if(KN(R))we=R[xE],Qe=R[CE],pt=R[Au],ir=R[gu]||[],Xe=R[Yw];else{var bn=R,Wn=bn&&bn.evt;he(bn)||(bn=bn[KC]||Wn||bn),we=ll(w,JC(bn))||cf,Qe=Jw(w,Vh(R||bn,we))||cf;var cr=R[wE]||o_(R);ir=s_(cr),ue(ir)&&tf(ir,function(br){br[Kw]=ll(w,br[Kw]),br[Kd]=ll(w,br[Kd])}),pt=Tk(w,ZN(cr)),Xe=ue(ir)&&ir[vn]>0,P&&(P[xE]=P[xE]||we)}return F={},F[Gh]=e7,F.id=oe,F.outerId=Ee,F.typeName=we,F.message=Qe,F[Yw]=Xe,F.stack=pt,F.parsedStack=ir,F.toInterface=t7,F}s(r7,"_createExceptionDetails");function Dk(w,R){var P=ue(R[gu])&&tf(R[gu],function(oe){return n7(oe)})||R[gu],F=r7(w,Aw(Aw({},R),{parsedStack:P}));return F}s(Dk,"_createExDetailsFromInterface");function kE(w,R){var P=R[r1](JK);if(P&&P[vn]>=4)w[Kd]=P[1],w[UC]=parseInt(P[2]);else{var F=R[r1](XK);F&&F[vn]>=3?(w[Kd]=F[1],w[UC]=parseInt(F[2])):w[Kd]=R}}s(kE,"_parseFilename");function Nk(w,R,P){var F=w[Kd];R.fn&&P&&P[vn]>R.fn&&(R.ln&&P[vn]>R.ln?(F=kc(P[R.fn]||""),w[UC]=parseInt(kc(P[R.ln]||""))||0):F=kc(P[R.fn]||"")),F&&kE(w,F)}s(Nk,"_handleFilename");function ZK(w){var R=!1;if(w&&te(w)){var P=kc(w);P&&(R=$N.test(P))}return R}s(ZK,"_isStackFrame");var Lk=lr({level:1,method:1,assembly:0,fileName:0,line:0});function eJ(w,R){var P,F;if(w&&te(w)&&kc(w)){F=(P={},P[Gh]=Lk,P.level=R,P.assembly=kc(w),P.method=YN,P.fileName="",P.line=0,P.sizeInBytes=0,P);for(var oe=0;oe<Pk[vn];){var Ee=Pk[oe];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[r1](Ee.re);if(we&&we[vn]>=Ee.len){Ee.m&&(F.method=kc(we[Ee.m]||YN)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[Kd]=kc(we[Ee.fn]||""),F[UC]=parseInt(kc(we[Ee.ln]||""))||0):kE(F,we[Ee.fn]||""));break}oe++}}return Fk(F)}s(eJ,"_extractStackFrame");function n7(w){var R,P=(R={},R[Gh]=Lk,R.level=w.level,R.method=w.method,R.assembly=w[Kw],R.fileName=w[Kd],R.line=w[UC],R.sizeInBytes=0,R);return Fk(P)}s(n7,"_stackFrameFromInterface");function Fk(w){var R=zK;return w&&(R+=w.method[vn],R+=w.assembly[vn],R+=w.fileName[vn],R+=w.level.toString()[vn],R+=w.line.toString()[vn],w[MC]=R),w}s(Fk,"_populateFrameSizeInBytes");function i7(w){return{level:w.level,method:w.method,assembly:w[Kw],fileName:w[Kd],line:w[UC]}}s(i7,"_parsedFrameToInterface");var o7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),tJ=function(){function w(R,P,F,oe,Ee,we,Qe,Xe,pt){this.aiDataContract={ver:1,metrics:1,properties:0};var ir=this;ir.ver=2;var bn=new o7;bn[NC]=oe>0?oe:void 0,bn.max=isNaN(we)||we===null?void 0:we,bn.min=isNaN(Ee)||Ee===null?void 0:Ee,bn[ed]=ll(R,P)||cf,bn.value=F,bn.stdDev=isNaN(Qe)||Qe===null?void 0:Qe,ir.metrics=[bn],ir[uf]=Vp(R,Xe),ir[Bc]=td(R,pt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),XC="";function rJ(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[DC]()==="true"}s(rJ,"stringToBoolOrDefault");function Mk(w){(isNaN(w)||w<0)&&(w=0),w=j3(w);var R=XC+w%1e3,P=XC+Th(w/1e3)%60,F=XC+Th(w/(1e3*60))%60,oe=XC+Th(w/(1e3*60*60))%24,Ee=Th(w/(1e3*60*60*24));return R=R[vn]===1?"00"+R:R[vn]===2?"0"+R:R,P=P[vn]<2?"0"+P:P,F=F[vn]<2?"0"+F:F,oe=oe[vn]<2?"0"+oe:oe,(Ee>0?Ee+".":XC)+oe+":"+F+":"+P+"."+R}s(Mk,"msToTimeSpan");function nJ(w,R){var P=null;return Il(w,function(F){if(F.identifier===R)return P=F,-1}),P}s(nJ,"getExtensionByName");function $h(w,R,P,F,oe){return!oe&&te(w)&&(w==="Script error."||w==="Script error")}s($h,"isCrossOriginError");var iJ=function(){function w(R,P,F,oe,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Xe=this;Xe.ver=2,Xe.id=qC(R,Qe),Xe.url=df(R,F),Xe[ed]=ll(R,P)||cf,isNaN(oe)||(Xe[bE]=Mk(oe)),Xe[uf]=Vp(R,Ee),Xe[Bc]=td(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),ZC=function(){function w(R,P,F,oe,Ee,we,Qe,Xe,pt,ir,bn,Wn){pt===void 0&&(pt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var cr=this;cr.ver=2,cr.id=P,cr[bE]=Mk(Ee),cr.success=we,cr.resultCode=Qe+"",cr.type=ll(R,pt);var br=qN(R,F,Xe,oe);cr.data=df(R,oe)||br.data,cr.target=ll(R,br.target),ir&&(cr.target="".concat(cr.target," | ").concat(ir)),cr[ed]=ll(R,br[ed]),cr[uf]=Vp(R,bn),cr[Bc]=td(R,Wn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),Qk=function(){function w(R,P,F,oe,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,P=P||cf,we[CE]=Jw(R,P),we[uf]=Vp(R,oe),we[Bc]=td(R,Ee),F&&(we[vE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),BE=function(){function w(R,P,F,oe,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,Xe.url=df(R,F),Xe[ed]=ll(R,P)||cf,Xe[uf]=Vp(R,Ee),Xe[Bc]=td(R,we),Qe&&(Xe.domProcessing=Qe.domProcessing,Xe[bE]=Qe[bE],Xe.networkConnect=Qe.networkConnect,Xe.perfTotal=Qe.perfTotal,Xe.receivedResponse=Qe.receivedResponse,Xe.sentRequest=Qe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),oJ=function(){function w(R,P){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=P}return s(w,"Data"),w}(),l_=rE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),sJ=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,P,F,oe){oe===void 0&&(oe=!1);var Ee;return F&&R[FC]&&R[FC][F]&&!O(R[FC][F][P])?Ee=R[FC][F][P]:Ee=R[P],O(Ee)?oe:Ee},w}();function mf(w){var R="ai."+w+".";return function(P){return R+P}}s(mf,"_aiNameFunc");var ex=mf("application"),ya=mf("device"),c_=mf("location"),tx=mf("operation"),u_=mf("session"),zh=mf("user"),n1=mf("cloud"),PE=mf("internal"),Yh=function(w){Bh(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(uE({applicationVersion:ex("ver"),applicationBuild:ex("build"),applicationTypeId:ex("typeId"),applicationId:ex("applicationId"),applicationLayer:ex("layer"),deviceId:ya("id"),deviceIp:ya("ip"),deviceLanguage:ya("language"),deviceLocale:ya("locale"),deviceModel:ya("model"),deviceFriendlyName:ya("friendlyName"),deviceNetwork:ya("network"),deviceNetworkName:ya("networkName"),deviceOEMName:ya("oemName"),deviceOS:ya("os"),deviceOSVersion:ya("osVersion"),deviceRoleInstance:ya("roleInstance"),deviceRoleName:ya("roleName"),deviceScreenResolution:ya("screenResolution"),deviceType:ya("type"),deviceMachineName:ya("machineName"),deviceVMName:ya("vmName"),deviceBrowser:ya("browser"),deviceBrowserVersion:ya("browserVersion"),locationIp:c_("ip"),locationCountry:c_("country"),locationProvince:c_("province"),locationCity:c_("city"),operationId:tx("id"),operationName:tx("name"),operationParentId:tx("parentId"),operationRootId:tx("rootId"),operationSyntheticSource:tx("syntheticSource"),operationCorrelationVector:tx("correlationVector"),sessionId:u_("id"),sessionIsFirst:u_("isFirst"),sessionIsNew:u_("isNew"),userAccountAcquisitionDate:zh("accountAcquisitionDate"),userAccountId:zh("accountId"),userAgent:zh("userAgent"),userId:zh("id"),userStoreRegion:zh("storeRegion"),userAuthUserId:zh("authUserId"),userAnonymousUserAcquisitionDate:zh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:zh("authUserAcquisitionDate"),cloudName:n1("name"),cloudRole:n1("role"),cloudRoleVer:n1("roleVer"),cloudRoleInstance:n1("roleInstance"),cloudEnvironment:n1("environment"),cloudLocation:n1("location"),cloudDeploymentUnit:n1("deploymentUnit"),internalNodeName:PE("nodeName"),internalSdkVersion:PE("sdkVersion"),internalAgentVersion:PE("agentVersion"),internalSnippet:PE("snippet"),internalSdkSrc:PE("sdkSrc")}));function Ok(w,R,P,F,oe,Ee){P=ll(F,P)||cf,(O(w)||O(R)||O(P))&&We("Input doesn't contain all required fields");var we="";w[Ck]&&(we=w[Ck],delete w[Ck]);var Qe={name:P,time:Up(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return O(oe)||ft(oe,function(Xe,pt){Qe.data[Xe]=pt}),Qe}s(Ok,"createTelemetryItem");var Uk=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=Ok,w}(),aJ={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},lJ=new Yh;function s7(w){var R=null;if(pe(Event))R=new Event(w);else{var P=ke();P&&P.createEvent&&(R=P.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(s7,"createDomEvent");function qk(w,R){RN(w,null,null,R)}s(qk,"_disableEvents");function a7(w){var R=ke(),P=pr(),F=!1,oe=[],Ee=1;P&&!O(P.onLine)&&!P.onLine&&(Ee=2);var we=0,Qe=Wn(),Xe=FK(Wp("OfflineListener"),w);try{if(ir(qt())&&(F=!0),R){var pt=R.body||R;pt.ononline&&ir(pt)&&(F=!0)}}catch{F=!1}function ir(Bi){var Ma=!1;return Bi&&(Ma=Ak(Bi,"online",On,Xe),Ma&&Ak(Bi,"offline",En,Xe)),Ma}s(ir,"_enableEvents");function bn(){return Qe}s(bn,"_isOnline");function Wn(){return!(we===2||Ee===2)}s(Wn,"calCurrentState");function cr(){var Bi=Wn();Qe!==Bi&&(Qe=Bi,Il(oe,function(Ma){var nx={isOnline:Qe,rState:Ee,uState:we};try{Ma(nx)}catch{}}))}s(cr,"listnerNoticeCheck");function br(Bi){we=Bi,cr()}s(br,"setOnlineState");function On(){Ee=1,cr()}s(On,"_setOnline");function En(){Ee=2,cr()}s(En,"_setOffline");function mi(){var Bi=qt();if(Bi&&F){if(qk(Bi,Xe),R){var Ma=R.body||R;ie(Ma.ononline)||qk(Ma,Xe)}F=!1}}s(mi,"_unload");function io(Bi){return oe.push(Bi),{rm:s(function(){var Ma=oe.indexOf(Bi);if(Ma>-1)return oe.splice(Ma,1)},"rm")}}return s(io,"addListener"),{isOnline:bn,isListening:s(function(){return F},"isListening"),unload:mi,addListener:io,setOnlineState:br}}s(a7,"createOfflineListener");var cJ="AppInsightsPropertiesPlugin",Wk="AppInsightsChannelPlugin",rx="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=rx,t.BreezeChannelIdentifier=Wk,t.ConfigurationManager=sJ,t.ConnectionStringParser=e_,t.ContextTagKeys=Yh,t.CtxTagKeys=lJ,t.DEFAULT_BREEZE_ENDPOINT=yk,t.DEFAULT_BREEZE_PATH=yE,t.Data=oJ,t.DisabledPropertyName=jw,t.DistributedTracingModes=WK,t.Envelope=t_,t.Event=$K,t.EventPersistence=EE,t.Exception=pf,t.Extensions=aJ,t.HttpMethod=BN,t.Metric=tJ,t.PageView=iJ,t.PageViewPerformance=BE,t.ProcessLegacy=Vw,t.PropertiesPluginIdentifier=cJ,t.RemoteDependencyData=ZC,t.RequestHeaders=PN,t.SampleRate=kN,t.SeverityLevel=l_,t.TelemetryItemCreator=Uk,t.ThrottleMgr=VK,t.Trace=Qk,t.correlationIdCanIncludeCorrelationHeader=Hh,t.correlationIdGetCorrelationContext=ON,t.correlationIdGetCorrelationContextValue=UN,t.correlationIdGetPrefix=Rk,t.correlationIdSetPrefix=Sk,t.createDistributedTraceContextFromTrace=kk,t.createDomEvent=s7,t.createOfflineListener=a7,t.createTelemetryItem=Ok,t.createTraceParent=SC,t.dataSanitizeException=Tk,t.dataSanitizeId=qC,t.dataSanitizeInput=wk,t.dataSanitizeKey=Ik,t.dataSanitizeKeyAndAddUniqueness=Ek,t.dataSanitizeMeasurements=td,t.dataSanitizeMessage=Jw,t.dataSanitizeProperties=Vp,t.dataSanitizeString=ll,t.dataSanitizeUrl=df,t.dateTimeUtilsDuration=qK,t.dateTimeUtilsNow=UK,t.dsPadNumber=DN,t.findAllScripts=mk,t.findW3cTraceParent=pk,t.formatTraceParent=ZA,t.getExtensionByName=nJ,t.isBeaconApiSupported=Lh,t.isCrossOriginError=$h,t.isInternalApplicationInsightsEndpoint=QN,t.isSampledFlag=Uw,t.isValidSpanId=kC,t.isValidTraceId=RC,t.isValidTraceParent=BC,t.msToTimeSpan=Mk,t.parseConnectionString=Zw,t.parseTraceParent=Zu,t.strNotSpecified=cf,t.stringToBoolOrDefault=rJ,t.urlGetAbsoluteUrl=QK,t.urlGetCompleteUrl=LN,t.urlGetPathName=OK,t.urlParseFullHost=$p,t.urlParseHost=FN,t.urlParseUrl=WC,t.utlCanUseLocalStorage=Xw,t.utlCanUseSessionStorage=zp,t.utlDisableStorage=IE,t.utlEnableStorage=GK,t.utlGetLocalStorage=GN,t.utlGetSessionStorage=jN,t.utlGetSessionStorageKeys=zC,t.utlRemoveSessionStorage=VN,t.utlRemoveStorage=rd,t.utlSetLocalStorage=HN,t.utlSetSessionStorage=HK,t.utlSetStoragePrefix=TE})});var jIe=G((dM,HIe)=>{f();(function(t,e){typeof dM=="object"&&typeof HIe<"u"?e(dM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(dM,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function r(A,x){return A[x]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=r(E,c),k=e(String),B=r(k,c),N=e(Math),W=e(Array),ee=r(W,c),me=r(ee,"slice");function ae(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(ae,"safe");function H(A,x){var T=ae(A);return T.e?x:T.v}s(H,"safeGet");var U;function le(A){return function(x){return typeof x===A}}s(le,"_createIs");function ie(A){var x="[object "+A+"]";return function(T){return!!(T&&V(T)===x)}}s(ie,"_createObjIs");function V(A){return _[b].call(A)}s(V,"objToString");function O(A){return typeof A===d||A===d}s(O,"isUndefined");function Y(A){return!re(A)}s(Y,"isStrictUndefined");function te(A){return A===i||O(A)}s(te,"isNullOrUndefined");function pe(A){return A===i||!re(A)}s(pe,"isStrictNullOrUndefined");function re(A){return!!A||A!==n}s(re,"isDefined");function ue(A){return!U&&(U=["string","number","boolean",d,"symbol","bigint"]),A!==l&&U.indexOf(A)!==-1}s(ue,"isPrimitiveType");var he=le("string"),Ne=le(a);function Se(A){return!A&&te(A)?!1:!!A&&typeof A===l}s(Se,"isObject");var Je=r(W,"isArray"),Me=ie("Date"),ft=le("number"),It=le("boolean"),yt=ie("Error");function vt(A){return!!(A&&A.then&&Ne(A.then))}s(vt,"isPromiseLike");function ce(A){return!(!A||H(function(){return!(A&&0+A)},!A))}s(ce,"isTruthy");var Oe=r(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(r(E,"hasOwn"),X);function X(A,x){return ye(A,x)||!!Oe(A,x)}s(X,"polyObjHasOwn");function ne(A,x,T){if(A&&Se(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(ne,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function De(A){var x={};if(x[We.c]=!0,x[We.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return ne(A,function(S,D){x[We[S]]=Y(D)?x[We[S]]:D}),x}s(De,"_createProp");var be=r(E,"defineProperty");function ze(A,x,T){return be(A,x,De(T))}s(ze,"objDefine");function it(A,x,T,S,D){var L={};return ne(A,function(Q,J){ht(L,Q,x?J:Q),ht(L,J,T?J:Q)}),S?S(L):L}s(it,"_createKeyValueMap");function ht(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(ht,"_assignMapValue");var Ot=e(k),lr="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===lr&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(D){T=" - "+Lt(D,x)}return S+": "+T}s(Lt,"dumpObj");function qr(A){throw new Error(A)}s(qr,"throwError");function $r(A){throw new TypeError(A)}s($r,"throwTypeError");var dn=r(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ut=r(E,"assign"),At=r(E,"keys");function Xt(A){return dn&&ne(A,function(x,T){(Je(T)||Se(T))&&Xt(T)}),Gt(A)}s(Xt,"objDeepFreeze");var Gt=e(dn,Ae),Ar=e(r(E,"getPrototypeOf"),Ge);function xr(A){return it(A,1,0,Gt)}s(xr,"createEnum");function jt(A){return it(A,0,0,Gt)}s(jt,"createEnumKeyMap");function rr(A){var x={};return ne(A,function(T,S){ht(x,T,S[1]),ht(x,S[0],S[1])}),Gt(x)}s(rr,"createSimpleMap");function Jt(A){return rr(A)}s(Jt,"createTypeMap");var Ir=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Lr="__tsUtils$gblCfg",zr;function qn(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(qn,"_getGlobalValue");function Kn(){if(!zr){var A=ae(qn).v||{};zr=A[Lr]=A[Lr]||{}}return zr}s(Kn,"_getGlobalConfig");var Mn=Vn;function Vn(A,x,T){var S=x?x[A]:i;return function(D){var L=(D?D[A]:i)||S;if(L||T){var Q=arguments;return(L||T).apply(D,L?me[v](Q,1):Q)}$r('"'+Ot(A)+'" not defined for '+Lt(D))}}s(Vn,"_unwrapFunctionWithPoly");function Zr(A){return function(x){return x[A]}}s(Zr,"_unwrapProp");var $n=r(N,"min"),_e=r(N,"max"),q=Mn("slice",B),ge=Mn("substring",B),ve=Vn("substr",B,Z);function Z(A,x,T){return te(A)&&$r("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),O(T)?q(A,x):q(A,x,x+T))}s(Z,"polyStrSubstr");function M(A,x){return ge(A,0,x)}s(M,"strLeft");var ke="_urid",$e;function qt(){if(!$e){var A=Kn();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var _r;function pr(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(pr,"polyNewSymbol");function ln(A){var x=qt();if(!tt(x.k,A)){var T=pr(A),S=At(x.s).length;T[ke]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[ke]()]=Ot(A)}return x.k[A]}s(ln,"polySymbolFor");function fn(A){!_r&&(_r={});var x,T=Ir[A];return T&&(x=_r[T]=_r[T]||pr(m+"."+T)),x}s(fn,"polyGetKnownSymbol");var vr;function Ht(){vr=Kn()}s(Ht,"_initTestHooks");function Qn(A){var x={};return!vr&&Ht(),x.b=vr.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return vr.lzy||be(x,"v",{value:T}),x.b=vr.lzy,T},"get")}),x}s(Qn,"getLazy");function Ws(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(Ws,"createCachedValue");var Lp="window",Il;function Fp(A,x){var T;return function(){return!vr&&Ht(),(!T||vr.lzy)&&(T=Ws(ae(A,x).v)),T.v}}s(Fp,"_getGlobalInstFn");function tf(A){return!vr&&Ht(),(!Il||A===!1||vr.lzy)&&(Il=Ws(ae(qn).v||i)),Il.v}s(tf,"getGlobal");function na(A,x){var T;if(!Il||x===!1?T=tf(x):T=Il.v,T&&T[A])return T[A];if(A===Lp)try{return window}catch{}return i}s(na,"getInst");function Eh(){return!!eC()}s(Eh,"hasDocument");var eC=Fp(na,["document"]);function G3(){return!!Mp()}s(G3,"hasWindow");var Mp=Fp(na,[Lp]);function fK(){return!!Ih()}s(fK,"hasNavigator");var Ih=Fp(na,["navigator"]),pK=Fp(function(){return!!ae(function(){return process&&(process.versions||{}).node}).v}),MA,H3;function dw(){return MA=Ws(ae(na,[m]).v),MA}s(dw,"_initSymbol");function mK(A){var x=(vr.lzy?0:MA)||dw();return x.v?x.v[A]:n}s(mK,"_getSymbolKey");function kc(){return!!Th()}s(kc,"hasSymbol");function Th(){return!vr&&Ht(),((vr.lzy?0:MA)||dw()).v}s(Th,"getSymbol");function Zb(A,x){var T=Ir[A];!vr&&Ht();var S=(vr.lzy?0:MA)||dw();return S.v?S.v[T||A]:x?n:fn(A)}s(Zb,"getKnownSymbol");function QA(A,x){!vr&&Ht();var T=(vr.lzy?0:MA)||dw();return T.v?T.v(A):x?i:pr(A)}s(QA,"newSymbol");function eE(A){return!vr&&Ht(),H3=(vr.lzy?0:H3)||Ws(ae(mK,["for"]).v),(H3.v||ln)(A)}s(eE,"symbolFor");function wh(A){return!!A&&Ne(A.next)}s(wh,"isIterator");function fw(A){return!pe(A)&&Ne(A[Zb(3)])}s(fw,"isIterable");var tE;function j3(A,x,T){if(A&&(wh(A)||(!tE&&(tE=Ws(Zb(3))),A=A[tE.v]?A[tE.v]():i),wh(A))){var S=n,D=n;try{for(var L=0;!(D=A.next()).done&&x[v](T||A,D.value,L,A)!==-1;)L++}catch(Q){S={e:Q},A.throw&&(D=i,A.throw(S))}finally{try{D&&!D.done&&A.return&&A.return(D)}finally{if(S)throw S.e}}}}s(j3,"iterForOf");function tC(A,x,T){return A.apply(x,T)}s(tC,"fnApply");function rC(A,x){return!O(x)&&A&&(Je(x)?tC(A.push,A,x):wh(x)||fw(x)?j3(x,function(T){A.push(T)}):A.push(x)),A}s(rC,"arrAppend");function Or(A,x,T){if(A)for(var S=A[g]>>>0,D=0;D<S&&!(D in A&&x[v](T||A,A[D],D,A)===-1);D++);}s(Or,"arrForEach");var pu=Mn("indexOf",ee),OA=Mn("map",ee);function nC(A,x,T){return((A?A.slice:i)||me).apply(A,me[v](arguments,1))}s(nC,"arrSlice");var hK=Mn("reduce",ee),_h=e(r(E,"create"),gK);function gK(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&$r("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(gK,"polyObjCreate");var V3;function rE(A,x){var T=E.setPrototypeOf||function(S,D){var L;!V3&&(V3=Ws((L={},L[u]=[],L instanceof Array))),V3.v?S[u]=D:ne(D,function(Q,J){return S[Q]=J})};return T(A,x)}s(rE,"objSetPrototypeOf");function AK(A,x,T){ae(ze,[x,y,{v:A,c:!0,e:!1}]),x=rE(x,T);function S(){this[p]=x,ae(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?_h(T):(S[c]=T[c],new S),x}s(AK,"_createCustomError");function nE(A,x){x&&(A[y]=x)}s(nE,"_setName");function Fa(A,x,T){var S=T||Error,D=S[c][y],L=Error.captureStackTrace;return AK(A,function(){var Q=this,J=arguments;try{ae(nE,[S,A]);var se=tC(S,Q,me[v](J))||Q;if(se!==Q){var Ce=Ar(Q);Ce!==Ar(se)&&rE(se,Ce)}return L&&L(se,Q[p]),x&&x(se,J),se}finally{ae(nE,[S,D])}},S)}s(Fa,"createCustomError");function Sh(){return(Date.now||iE)()}s(Sh,"utcNow");function iE(){return new Date().getTime()}s(iE,"polyUtcNow");function iN(A){return s(function(T){return te(T)&&$r("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(iN,"_createTrimFn");var yK=iN(/^\s+|(?=\s)\s+$/g),ji=Vn("trim",B,yK),UA=r(N,"floor"),Rh,$3,oE;function mu(A){if(!A||typeof A!==l)return!1;oE||(oE=G3()?Mp():!0);var x=!1;if(A!==oE){$3||(Rh=Function[c][b],$3=Rh[v](E));try{var T=Ar(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&Rh[v](T)===$3))}catch{}}return x}s(mu,"isPlainObject");function oN(A){return A.value&&pw(A),!0}s(oN,"_defaultDeepCopyHandler");var sN=[iC,pw,lN,kh];function z3(A,x,T,S){var D;return Or(A,function(L){if(L.k===x)return D=L,-1}),D||(D={k:x,v:x},A.push(D),S(D)),D.v}s(z3,"_getSetVisited");function qA(A,x,T,S){var D=T.handler,L=T.path?S?T.path.concat(S):T.path:[],Q={handler:T.handler,src:T.src,path:L},J=typeof x,se=!1,Ce=x===i;Ce||(x&&J===l?se=mu(x):Ce=ue(J));var Te={type:J,isPrim:Ce,isPlain:se,value:x,result:x,path:L,origin:T.src,copy:s(function(Le,Ye){return qA(A,Le,Ye?Q:T,Ye)},"copy"),copyTo:s(function(Le,Ye){return Y3(A,Le,Ye,Q)},"copyTo")};return Te.isPrim?D&&D[v](T,Te)?Te.result:x:z3(A,x,L,function(Le){ze(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(He){Le.v=He},"s")});for(var Ye=0,Fe=D;!(Fe||(Ye<sN.length?sN[Ye++]:oN))[v](T,Te);)Fe=i})}s(qA,"_deepCopy");function Y3(A,x,T,S){if(!te(T))for(var D in T)x[D]=qA(A,T[D],S,D);return x}s(Y3,"_copyProps");function aN(A,x,T){var S={handler:T,src:x,path:[]};return Y3([],A,x,S)}s(aN,"objCopyProps");function K3(A,x){var T={handler:x,src:A};return qA([],A,T)}s(K3,"objDeepCopy");function iC(A){var x=A.value;if(Je(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(iC,"arrayDeepCopyHandler");function kh(A){var x=A.value;return Me(x)?(A.result=new Date(x.getTime()),!0):!1}s(kh,"dateDeepCopyHandler");function lN(A){return A.type===a}s(lN,"functionDeepCopyHandler");function pw(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(pw,"plainObjDeepCopyHandler");function J3(A,x){return Or(x,function(T){aN(A,T)}),A}s(J3,"_doExtend");function mw(A,x,T,S,D,L,Q){return J3(K3(A)||{},me[v](arguments))}s(mw,"deepExtend");var CK=Zr(g),xK=r(N,"round"),cN=Vn("endsWith",B,vK);function vK(A,x,T){he(A)||$r("'"+Lt(A)+"' is not a string");var S=he(x)?x:Ot(x),D=!O(T)&&T<A[g]?T:A[g];return ge(A,D-S[g],D)===S}s(vK,"polyStrEndsWith");var Qp=Mn("indexOf",B),hw="ref",X3="unref",gw="hasRef",bK="enabled";function Aw(A,x,T){var S=!0,D=A?x(i):i,L;function Q(){return S=!1,D&&D[X3]&&D[X3](),L}s(Q,"_unref");function J(){D&&T(D),D=i}s(J,"_cancel");function se(){return D=x(D),S||Q(),L}s(se,"_refresh");function Ce(Te){!Te&&D&&J(),Te&&!D&&se()}return s(Ce,"_setEnabled"),L={cancel:J,refresh:se},L[gw]=function(){return D&&D[gw]?D[gw]():S},L[hw]=function(){return S=!0,D&&D[hw]&&D[hw](),L},L[X3]=Q,L=be(L,bK,{get:s(function(){return!!D},"get"),set:Ce}),{h:L,dn:s(function(){D=i},"dn")}}s(Aw,"_createTimerHandler");function yw(A,x,T){var S=Je(x),D=S?x.length:0,L=(D>0?x[0]:S?n:x)||setTimeout,Q=(D>1?x[1]:n)||clearTimeout,J=T[0];T[0]=function(){se.dn(),tC(J,n,me[v](arguments))};var se=Aw(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;tC(Q,n,[Ce])}return tC(L,n,T)},function(Ce){tC(Q,n,[Ce])});return se.h}s(yw,"_createTimeoutWith");function Bh(A,x){return yw(!0,n,me[v](arguments))}s(Bh,"scheduleTimeout");function Cw(A,x){return yw(!1,n,me[v](arguments))}s(Cw,"createTimeout");var WA,Yu="constructor",Ku="prototype",GA="function",oC="_dynInstFuncs",Ph="_isDynProxy",sC="_dynClass",Z3="_dynCls$",HA="_dynInstChk",aC=HA,ek="_dfOpts",xw="_unknown_",lC="__proto__",sE="_dyn"+lC,vw="__dynProto$Gbl",cC="_dynInstProto",uC="useBaseInst",aE="setInstFuncs",jA=Object,dC=jA.getPrototypeOf,tk=jA.getOwnPropertyNames,bw=tf(),fC=bw[vw]||(bw[vw]={o:(WA={},WA[aE]=!0,WA[uC]=!0,WA),n:1e3});function pC(A){return A&&(A===jA[Ku]||A===Array[Ku])}s(pC,"_isObjectOrArrayPrototype");function Op(A){return pC(A)||A===Function[Ku]}s(Op,"_isObjectArrayOrFunctionPrototype");function rf(A){var x;if(A){if(dC)return dC(A);var T=A[lC]||A[Ku]||(A[Yu]?A[Yu][Ku]:null);x=A[sE]||T,ye(A,sE)||(delete A[cC],x=A[sE]=A[cC]||A[sE],A[cC]=T)}return x}s(rf,"_getObjProto");function mC(A,x){var T=[];if(tk)T=tk(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var D=0;D<T.length;D++)x(T[D])}s(mC,"_forEachProp");function hC(A,x,T){return x!==Yu&&typeof A[x]===GA&&(T||ye(A,x))&&x!==lC&&x!==Ku}s(hC,"_isDynamicCandidate");function Ew(A){$r("DynamicProto: "+A)}s(Ew,"_throwTypeError");function rk(A){var x=_h(null);return mC(A,function(T){!x[T]&&hC(A,T,!1)&&(x[T]=A[T])}),x}s(rk,"_getInstanceFuncs");function nk(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(nk,"_hasVisited");function EK(A,x,T,S){function D(se,Ce,Te){var Le=Ce[Te];if(Le[Ph]&&S){var Ye=se[oC]||{};Ye[aC]!==!1&&(Le=(Ye[Ce[sC]]||{})[Te]||Le)}return function(){return Le.apply(se,arguments)}}s(D,"_instFuncProxy");var L=_h(null);mC(T,function(se){L[se]=D(x,T,se)});for(var Q=rf(A),J=[];Q&&!Op(Q)&&!nk(J,Q);)mC(Q,function(se){!L[se]&&hC(Q,se,!dC)&&(L[se]=D(x,Q,se))}),J.push(Q),Q=rf(Q);return L}s(EK,"_getBaseFuncs");function IK(A,x,T,S){var D=null;if(A&&ye(T,sC)){var L=A[oC]||_h(null);if(D=(L[T[sC]]||_h(null))[x],D||Ew("Missing ["+x+"] "+GA),!D[HA]&&L[aC]!==!1){for(var Q=!ye(A,x),J=rf(A),se=[];Q&&J&&!Op(J)&&!nk(se,J);){var Ce=J[x];if(Ce){Q=Ce===S;break}se.push(J),J=rf(J)}try{Q&&(A[x]=D),D[HA]=1}catch{L[aC]=!1}}}return D}s(IK,"_getInstFunc");function TK(A,x,T){var S=x[A];return S===T&&(S=rf(x)[A]),typeof S!==GA&&Ew("["+A+"] is not a "+GA),S}s(TK,"_getProtoFunc");function wK(A,x,T,S,D){function L(se,Ce){var Te=s(function(){var Le=IK(this,Ce,se,Te)||TK(Ce,se,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[Ph]=1,Te}if(s(L,"_createDynamicPrototype"),!pC(A)){var Q=T[oC]=T[oC]||_h(null);if(!pC(Q)){var J=Q[x]=Q[x]||_h(null);Q[aC]!==!1&&(Q[aC]=!!D),pC(J)||mC(T,function(se){hC(T,se,!1)&&T[se]!==S[se]&&(J[se]=T[se],delete T[se],(!ye(A,se)||A[se]&&!A[se][Ph])&&(A[se]=L(A,se)))})}}}s(wK,"_populatePrototype");function ik(A,x){if(dC){for(var T=[],S=rf(x);S&&!Op(S)&&!nk(T,S);){if(S===A)return!0;T.push(S),S=rf(S)}return!1}return!0}s(ik,"_checkPrototype");function lE(A,x){return ye(A,Ku)?A.name||x||xw:((A||{})[Yu]||{}).name||x||xw}s(lE,"_getObjName");function tc(A,x,T,S){ye(A,Ku)||Ew("theClass is an invalid class definition.");var D=A[Ku];ik(D,x)||Ew("["+lE(A)+"] not in hierarchy of ["+lE(x)+"]");var L=null;ye(D,sC)?L=D[sC]:(L=Z3+lE(A,"_")+"$"+fC.n,fC.n++,D[sC]=L);var Q=tc[ek],J=!!Q[uC];J&&S&&S[uC]!==void 0&&(J=!!S[uC]);var se=rk(x),Ce=EK(D,x,se,J);T(x,Ce);var Te=!!dC&&!!Q[aE];Te&&S&&(Te=!!S[aE]),wK(D,L,x,se,Te!==!1)}s(tc,"dynamicProto"),tc[ek]=fC.o;var Gs="function",uN="object",dN="undefined",cE="prototype",ok=Object,sk=ok[cE];(tf()||{}).Symbol,(tf()||{}).Reflect;var Iw="hasOwnProperty",fN=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var D in x)sk[Iw].call(x,D)&&(A[D]=x[D])}return A},"__objAssignFnImpl"),Up=ut||fN,Dh=s(function(A,x){return Dh=ok.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var D in S)S[Iw](D)&&(T[D]=S[D])},Dh(A,x)},"extendStaticsFn");function uE(A,x){typeof x!==Gs&&x!==null&&$r("Class extends value "+String(x)+" is not a constructor or null"),Dh(A,x);function T(){this.constructor=A}s(T,"__"),A[cE]=x===null?_h(x):(T[cE]=x[cE],new T)}s(uE,"__extendsFn");function pN(A,x){for(var T=0,S=x.length,D=A.length;T<S;T++,D++)A[D]=x[T];return A}s(pN,"__spreadArrayFn");var Tw=xr,_K=Jt,Nh=Tw({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),gC="toLowerCase",zn="length",AC="warnToConsole",VA="throwInternal",qp="watch",ww="apply",Vi="push",yC="splice",ga="logger",CC="cancel",dE="initialize",Lh="identifier",fE="removeNotificationListener",_w="addNotificationListener",nf="isInitialized",xC="value",$d="getNotifyMgr",vC="getPlugin",Fh="name",Tl="processNext",bC="getProcessTelContext",of="enabled",mN="stopPollingInternalLogs",$A="unload",Sw="onComplete",EC="version",hN="loggingLevelConsole",zA="createNew",sf="teardown",Rw="messageId",YA="message",af="diagLog",kw="_doTeardown",Wp="update",lf="getNext",Mh="setNextPlugin",Bw="userAgent",Qh="split",Oh="replace",rc="type",ak="evtName",pE="status",lk="getAllResponseHeaders",ck="isChildEvt",IC="data",Uh="getCtx",zd="setCtx",gN="itemsReceived",Gp="urlString",uk="headers",Hp="timeout",AN="traceFlags",TC;function dk(A,x){TC||(TC=Fa("AggregationError",function(S,D){D[zn]>1&&(S.errors=D[1])}));var T=A||"One or more errors occurred.";throw Or(x,function(S,D){T+=`
`.concat(D," > ").concat(Lt(S))}),new TC(T,x||[])}s(dk,"throwAggregationError");var KA="Promise",JA="rejected";function Ju(A,x){return yN(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:JA,rejected:!0,reason:T}):T})}s(Ju,"doAwaitResponse");function yN(A,x,T,S){var D=A;try{if(vt(A))(x||T)&&(D=A.then(x,T));else try{x&&(D=x(A))}catch(L){if(T)D=T(L);else throw L}}finally{S&&SK(D,S)}return D}s(yN,"doAwait");function SK(A,x){var T=A;return x&&(vt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(SK,"doFinally");var CN=["pending","resolving","resolved",JA],xN="dispatchEvent",mE;function vN(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(vN,"_hasInitEventFn");function Pw(A,x,T,S){var D=eC();!mE&&(mE=Ws(!!ae(vN,[D]).v));var L=mE.v?D.createEvent("Event"):S?new Event(x):{};if(T&&T(L),mE.v&&L.initEvent(x,!1,!0),L&&A[xN])A[xN](L);else{var Q=A["on"+x];if(Q)Q(L);else{var J=na("console");J&&(J.error||J.log)(x,Lt(L))}}}s(Pw,"emitEvent");var bN="unhandledRejection",RK=bN.toLowerCase(),wC=10,Dw;function EN(A){return Ne(A)?A.toString():Lt(A)}s(EN,"dumpFnObj");function IN(A,x,T){var S=nC(arguments,3),D=0,L=!1,Q,J=[],se=!1,Ce=null,Te;function Le(Vt,mr){try{se=!0,Ce&&Ce.cancel(),Ce=null;var Gn=A(function(Ci,xi){J.push(function(){try{var ho=D===2?Vt:mr,cn=O(ho)?Q:Ne(ho)?ho(Q):ho;vt(cn)?cn.then(Ci,xi):ho?Ci(cn):D===3?xi(cn):Ci(cn)}catch(Fr){xi(Fr)}}),L&&lt()},S);return Gn}finally{}}s(Le,"_then");function Ye(Vt){return Le(void 0,Vt)}s(Ye,"_catch");function Fe(Vt){var mr=Vt,Gn=Vt;return Ne(Vt)&&(mr=s(function(Ci){return Vt&&Vt(),Ci},"thenFinally"),Gn=s(function(Ci){throw Vt&&Vt(),Ci},"catchFinally")),Le(mr,Gn)}s(Fe,"_finally");function He(){return CN[D]}s(He,"_strState");function lt(){if(J.length>0){var Vt=J.slice();J=[],se=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,mr){return function(Gn){if(D===mr){if(Vt===2&&vt(Gn)){D=1,Gn.then(et(2,1),et(3,1));return}D=Vt,L=!0,Q=Gn,lt(),!se&&Vt===3&&!Ce&&(Ce=Bh(gt,wC))}}}s(et,"_createSettleIfFn");function gt(){if(!se)if(se=!0,pK())process.emit(bN,Q,Te);else{var Vt=Mp()||tf();!Dw&&(Dw=Ws(ae(na,[KA+"RejectionEvent"]).v)),Pw(Vt,RK,function(mr){return ze(mr,"promise",{g:s(function(){return Te},"g")}),mr.reason=Q,mr},!!Dw.v)}}s(gt,"_notifyUnhandledRejection"),Te={then:Le,catch:Ye,finally:Fe},be(Te,"state",{get:He}),kc()&&(Te[Zb(11)]="IPromise");function Nt(){return"IPromise "+He()+(L?" - "+EN(Q):"")}return s(Nt,"_toString"),Te.toString=Nt,s(function(){Ne(T)||$r(KA+": executor is not a function - "+EN(T));var mr=et(3,0);try{T.call(Te,et(2,0),mr)}catch(Gn){mr(Gn)}},"_initialize")(),Te}s(IN,"_createPromise");function kK(A){return function(x){var T=nC(arguments,1);return A(function(S,D){try{var L=[],Q=1;j3(x,function(J,se){J&&(Q++,yN(J,function(Ce){L[se]=Ce,--Q===0&&S(L)},D))}),Q--,Q===0&&S(L)}catch(J){D(J)}},T)}}s(kK,"_createAllPromise");function BK(A){return Ws(function(x){var T=nC(arguments,1);return A(function(S,D){var L=[],Q=1;function J(se,Ce){Q++,Ju(se,function(Te){Te.rejected?L[Ce]={status:JA,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--Q===0&&S(L)})}s(J,"processItem");try{Je(x)?Or(x,J):fw(x)?j3(x,J):$r("Input is not an iterable"),Q--,Q===0&&S(L)}catch(se){D(se)}},T)})}s(BK,"_createAllSettledPromise");function TN(A){Or(A,function(x){try{x()}catch{}})}s(TN,"syncItemProcessor");function wN(A){var x=ft(A)?A:0;return function(T){Bh(function(){TN(T)},x)}}s(wN,"timeoutItemProcessor");function Nw(A,x){return IN(Nw,wN(x),A,x)}s(Nw,"createAsyncPromise");var Lw;function PK(A,x){!Lw&&(Lw=Ws(ae(na,[KA]).v||null));var T=Lw.v;if(!T)return Nw(A);Ne(A)||$r(KA+": executor is not a function - "+Lt(A));var S=0;function D(){return CN[S]}s(D,"_strState");var L=new T(function(Q,J){function se(Te){S=2,Q(Te)}s(se,"_resolve");function Ce(Te){S=3,J(Te)}s(Ce,"_reject"),A(se,Ce)});return be(L,"state",{get:D}),L}s(PK,"createNativePromise");var Fw;function Mw(A){return IN(Mw,TN,A)}s(Mw,"createSyncPromise");function hu(A,x){return!Fw&&(Fw=BK(Mw)),Fw.v(A,x)}s(hu,"createSyncAllSettledPromise");var Qw;function _C(A,x){return!Qw&&(Qw=Ws(PK)),Qw.v.call(this,A,x)}s(_C,"createPromise");var fk=kK(_C),Xu=void 0,pi="",jp="channels",Aa="core",Yd="createPerfMgr",Ow="disabled",XA="extensionConfig",SC="extensions",Zu="processTelemetry",RC="priority",kC="eventsSent",BC="eventsDiscarded",Uw="eventsSendRequest",ZA="perfEvent",pk="offlineEventsStored",mk="offlineBatchSent",qw="offlineBatchDrop",hE="getPerfMgr",Ww="domain",Gw="path",_N="Not dynamic - ",hk=/-([a-z])/g,DK=/([^\w\d_$])/g,NK=/^(\d+[\w\d_$])/;function Hw(A){return!te(A)}s(Hw,"isNotNullOrUndefined");function PC(A){var x=A;return x&&he(x)&&(x=x[Oh](hk,function(T,S){return S.toUpperCase()}),x=x[Oh](DK,"_"),x=x[Oh](NK,function(T,S){return"_"+S})),x}s(PC,"normalizeJsName");function wl(A,x){return A&&x?Qp(A,x)!==-1:!1}s(wl,"strContains");function gE(A){return A&&A.toISOString()||""}s(gE,"toISOString");function al(A){return yt(A)?A[Fh]:pi}s(al,"getExceptionName");function qh(A,x,T,S,D){var L=T;return A&&(L=A[x],L!==T&&(!D||D(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(qh,"setValue");function SN(A,x,T){var S;return A?(S=A[x],!S&&te(S)&&(S=O(T)?{}:T,A[x]=S)):S=O(T)?{}:T,S}s(SN,"getSetValue");function LK(A,x){var T=null,S=null;return Ne(A)?T=A:S=A,function(){var D=arguments;if(T&&(S=T()),S)return S[x][ww](S,D)}}s(LK,"_createProxyFunction");function AE(A,x,T,S,D){A&&x&&T&&(D!==!1||O(A[x]))&&(A[x]=LK(T,S))}s(AE,"proxyFunctionAs");function gk(A,x,T,S){return A&&x&&Se(A)&&Je(T)&&Or(T,function(D){he(D)&&AE(A,D,x,D,S)}),A}s(gk,"proxyFunctions");function FK(A){return function(){function x(){var T=this;A&&ne(A,function(S,D){T[S]=D})}return s(x,"class_1"),x}()}s(FK,"createClassFromInterface");function Ak(A){return A&&ut&&(A=ok(ut({},A))),A}s(Ak,"optimizeObject");function RN(A,x,T,S,D,L){var Q=arguments,J=Q[0]||{},se=Q[zn],Ce=!1,Te=1;for(se>0&&It(J)&&(Ce=J,J=Q[Te]||{},Te++),Se(J)||(J={});Te<se;Te++){var Le=Q[Te],Ye=Je(Le),Fe=Se(Le);for(var He in Le){var lt=Ye&&He in Le||Fe&&tt(Le,He);if(lt){var et=Le[He],gt=void 0;if(Ce&&et&&((gt=Je(et))||mu(et))){var Nt=J[He];gt?Je(Nt)||(Nt=[]):mu(Nt)||(Nt={}),et=RN(Ce,Nt,et)}et!==void 0&&(J[He]=et)}}}return J}s(RN,"objExtend");function jw(A){try{return A.responseText}catch{}return null}s(jw,"getResponseText");function kN(A,x){return A?"XDomainRequest,Response:"+jw(A)||"":x}s(kN,"formatErrorMessageXdr");function Vw(A,x){return A?"XMLHttpRequest,Status:"+A[pE]+",Response:"+jw(A)||A.response||"":x}s(Vw,"formatErrorMessageXhr");function BN(A,x){return x&&(ft(x)?A=[x].concat(A):Je(x)&&(A=x.concat(A))),A}s(BN,"prependTransports");var yk="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",yE="withCredentials",cf="timeout";function Ck(A,x,T,S,D,L){S===void 0&&(S=!1),D===void 0&&(D=!1);function Q(se,Ce,Te){try{se[Ce]=Te}catch{}}s(Q,"_wrapSetXhrProp");var J=new XMLHttpRequest;return S&&Q(J,yk,S),T&&Q(J,yE,T),J.open(A,x,!D),T&&Q(J,yE,T),!D&&L&&Q(J,cf,L),J}s(Ck,"openXhr");function PN(A){var x={};if(he(A)){var T=ji(A)[Qh](/[\r\n]+/);Or(T,function(S){if(S){var D=S.indexOf(": ");if(D!==-1){var L=ji(S.substring(0,D))[gC](),Q=ji(S.substring(D+1));x[L]=Q}else x[ji(S)]=1}})}return x}s(PN,"convertAllHeadersToMap");function Wh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=ji(S))}return A}s(Wh,"_appendHeader");var vn="kill-duration",DC="kill-duration-seconds",e1="time-delta-millis";function t1(A,x){var T={};return A[lk]?T=PN(A[lk]()):x&&(T=Wh(T,A,e1),T=Wh(T,A,vn),T=Wh(T,A,DC)),T}s(t1,"_getAllResponseHeaders");var xk="documentMode",CE="location",NC="console",$w="JSON",vk="crypto",zw="msCrypto",LC="msie",r1="trident/",bk="XMLHttpRequest",ed=null,FC=null,uf=!1,Bc=null,MC=null;function xE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[cE];S&&(T=x in S)}}catch{}if(!T)try{var D=new A;T=!O(D[x])}catch{}}return T}s(xE,"_hasProperty");function QC(A){if(A&&uf){var x=na("__mockLocation");if(x)return x}return typeof location===uN&&location?location:na(CE)}s(QC,"getLocation");function vE(){return typeof console!==dN?console:na(NC)}s(vE,"getConsole");function OC(){return!!(typeof JSON===uN&&JSON||na($w)!==null)}s(OC,"hasJSON");function gu(){return OC()?JSON||na($w):null}s(gu,"getJSON");function Yw(){return na(vk)}s(Yw,"getCrypto");function Kw(){return na(zw)}s(Kw,"getMsCrypto");function Kd(){var A=Ih();if(A&&(A[Bw]!==FC||ed===null)){FC=A[Bw];var x=(FC||pi)[gC]();ed=wl(x,LC)||wl(x,r1)}return ed}s(Kd,"isIE");function UC(A){if(A===void 0&&(A=null),!A){var x=Ih()||{};A=x?(x.userAgent||pi)[gC]():pi}var T=(A||pi)[gC]();if(wl(T,LC)){var S=eC()||{};return _e(parseInt(T[Qh](LC)[1]),S[xk]||0)}else if(wl(T,r1)){var D=parseInt(T[Qh](r1)[1]);if(D)return D+4}return null}s(UC,"getIEVersion");function Gh(A){return(MC===null||A===!1)&&(MC=fK()&&!!Ih().sendBeacon),MC}s(Gh,"isBeaconsSupported");function bE(A){var x=!1;try{x=!!na("fetch");var T=na("Request");x&&A&&T&&(x=xE(T,"keepalive"))}catch{}return x}s(bE,"isFetchSupported");function Ek(){return Bc===null&&(Bc=typeof XDomainRequest!==dN,Bc&&Ik()&&(Bc=Bc&&!xE(na(bk),"withCredentials"))),Bc}s(Ek,"useXDomainRequest");function Ik(){var A=!1;try{var x=na(bk);A=!!x}catch{}return A}s(Ik,"isXhrSupported");var ll=4294967296,df=4294967295,Jw=123456789,Tk=987654321,Vp=!1,td=Jw,qC=Tk;function wk(A){A<0&&(A>>>=0),td=Jw+A&df,qC=Tk-A&df,Vp=!0}s(wk,"_mwcSeed");function DN(){try{var A=Sh()&2147483647;wk((Math.random()*ll^A)+A)}catch{}}s(DN,"_autoSeedMwc");function _k(A){var x=0,T=Yw()||Kw();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&df),x===0&&Kd()&&(Vp||DN(),x=NN()&df),x===0&&(x=UA(ll*Math.random()|0)),A||(x>>>=0),x}s(_k,"random32");function NN(A){qC=36969*(qC&65535)+(qC>>16)&df,td=18e3*(td&65535)+(td>>16)&df;var x=(qC<<16)+(td&65535)>>>0&df|0;return A||(x>>>=0),x}s(NN,"mwcRandom32");function MK(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=_k()>>>0,S=0,D=pi;D[zn]<A;)S++,D+=x.charAt(T&63),T>>>=6,S===5&&(T=(_k()<<2&4294967295|T&3)>>>0,S=0);return D}s(MK,"newId");var WC="3.3.6",QK="."+MK(6),OK=0;function LN(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(LN,"_canAcceptData");function FN(A,x){var T=x[A.id];if(!T){T={};try{LN(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(FN,"_getCache");function $p(A,x){return x===void 0&&(x=!1),PC(A+OK+++(x?"."+WC:pi)+QK)}s($p,"createUniqueNamespace");function MN(A){var x={id:$p("_aiData-"+(A||pi)+"."+WC),accept:s(function(T){return LN(T)},"accept"),get:s(function(T,S,D,L){var Q=T[x.id];return Q?Q[PC(S)]:(L&&(Q=FN(x,T),Q[PC(S)]=D),D)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(MN,"createElmNodeData");function GC(A){return A&&Se(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s(GC,"_isConfigDefaults");function QN(A,x,T){var S,D=T.dfVal||re;if(x&&T.fb){var L=T.fb;Je(L)||(L=[L]);for(var Q=0;Q<L[zn];Q++){var J=L[Q],se=x[J];if(D(se)?S=se:A&&(se=A.cfg[J],D(se)&&(S=se),A.set(A.cfg,Ot(J),se)),D(S))break}}return!D(S)&&D(T.v)&&(S=T.v),S}s(QN,"_getDefault");function Sk(A,x,T){var S=T;if(T&&GC(T)&&(S=QN(A,x,T)),S){GC(S)&&(S=Sk(A,x,S));var D;Je(S)?(D=[],D[zn]=S[zn]):mu(S)&&(D={}),D&&(ne(S,function(L,Q){Q&&GC(Q)&&(Q=Sk(A,x,Q)),D[L]=Q}),S=D)}return S}s(Sk,"_resolveDefaultValue");function Rk(A,x,T,S){var D,L,Q,J=S,se,Ce,Te,Le;GC(J)?(D=J.isVal,L=J.set,Te=J.rdOnly,Le=J.blkVal,se=J.mrg,Ce=J.ref,!Ce&&O(Ce)&&(Ce=!!se),Q=QN(A,x,J)):Q=S,Le&&A.blkVal(x,T);var Ye,Fe=!0,He=x[T];(He||!te(He))&&(Ye=He,Fe=!1,D&&Ye!==Q&&!D(Ye)&&(Ye=Q,Fe=!0),L&&(Ye=L(Ye,Q,x),Fe=Ye===Q)),Fe?Q?Ye=Sk(A,x,Q):Ye=Q:(mu(Ye)||Je(Q))&&se&&Q&&(mu(Q)||Je(Q))&&ne(Q,function(lt,et){Rk(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(Rk,"_applyDefaultValue");var Hh=eE("[[ai_dynCfg_1]]"),ON=eE("[[ai_blkDynCfg_1]]"),UN=eE("[[ai_frcDynCfg_1]]");function qN(A){if(A){var x;if(Je(A)?(x=[],x[zn]=A[zn]):mu(A)&&(x={}),x)return ne(A,function(T,S){x[T]=qN(S)}),x}return A}s(qN,"_cfgDeepCopy");function UK(A){if(A){var x=A[Hh]||A;if(x.cfg&&(x.cfg===A||x.cfg[Hh]===x))return x}return null}s(UK,"getDynamicConfigHandler");function qK(A){if(A&&(mu(A)||Je(A)))try{A[ON]=!0}catch{}return A}s(qK,"blockDynamicConversion");function kk(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[UN],!S&&!T[ON]&&(S=mu(T)||Je(T))),S}s(kk,"_canMakeDynamic");function HC(A){$r("InvalidAccess:"+A)}s(HC,"throwInvalidAccess");var WK=["push","pop","shift","unshift","splice"],EE=s(function(A,x,T,S){A&&A[VA](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function jh(A,x,T){Je(x)&&Or(WK,function(S){var D=x[S];x[S]=function(){for(var L=[],Q=0;Q<arguments.length;Q++)L[Q]=arguments[Q];var J=D[ww](this,L);return $C(A,x,T,"Patching"),J}})}s(jh,"_patchArray");function Jd(A,x){var T=Oe(A,x);return T&&T.get}s(Jd,"_getOwnPropGetter");function WN(A,x,T,S){var D={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(pu(D.h,Ce)===-1&&D.h[Vi](Ce),A.trk(Ce,D))},"trk"),clr:s(function(Ce){var Te=pu(D.h,Ce);Te!==-1&&D.h[yC](Te,1)},"clr")},L=!0,Q=!1;function J(){L&&(Q=Q||kk(J,A,S),S&&!S[Hh]&&Q&&(S=$C(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&D.trk(Ce),S}s(J,"_getProperty"),J[A.prop]={chng:s(function(){A.add(D)},"chng")};function se(Ce){if(S!==Ce){J[A.ro]&&!A.upd&&HC("["+T+"] is read-only:"+Lt(x)),L&&(Q=Q||kk(J,A,S),L=!1);var Te=Q&&J[A.rf];if(Q)if(Te){ne(S,function(Ye){S[Ye]=Ce?Ce[Ye]:Xu});try{ne(Ce,function(Ye,Fe){jC(A,S,Ye,Fe)}),Ce=S}catch(Ye){EE((A.hdlr||{})[ga],T,"Assigning",Ye),Q=!1}}else S&&S[Hh]&&ne(S,function(Ye){var Fe=Jd(S,Ye);if(Fe){var He=Fe[A.prop];He&&He.chng()}});if(Ce!==S){var Le=Ce&&kk(J,A,Ce);!Te&&Le&&(Ce=$C(A,Ce,T,"Converting")),S=Ce,Q=Le}A.add(D)}}s(se,"_setProperty"),ze(x,D.n,{g:J,s:se})}s(WN,"_createDynamicProperty");function jC(A,x,T,S){if(x){var D=Jd(x,T),L=D&&!!D[A.prop];L?x[T]=S:WN(A,x,T,S)}return x}s(jC,"_setDynamicProperty");function VC(A,x,T,S){if(x){var D=Jd(x,T),L=D&&!!D[A.prop],Q=S&&S[0],J=S&&S[1],se=S&&S[2];if(!L){if(se)try{qK(x)}catch(Ce){EE((A.hdlr||{})[ga],T,"Blocking",Ce)}try{jC(A,x,T,x[T]),D=Jd(x,T)}catch(Ce){EE((A.hdlr||{})[ga],T,"State",Ce)}}Q&&(D[A.rf]=Q),J&&(D[A.ro]=J),se&&(D[A.blkVal]=!0)}return x}s(VC,"_setDynamicPropertyState");function $C(A,x,T,S){try{ne(x,function(D,L){jC(A,x,D,L)}),x[Hh]||(be(x,Hh,{get:s(function(){return A.hdlr},"get")}),jh(A,x,T))}catch(D){EE((A.hdlr||{})[ga],T,S,D)}return x}s($C,"_makeDynamicObject");var IE="[[ai_",TE="]]";function GK(A){var x=QA(IE+"get"+A.uid+TE),T=QA(IE+"ro"+A.uid+TE),S=QA(IE+"rf"+A.uid+TE),D=QA(IE+"blkVal"+A.uid+TE),L=QA(IE+"dtl"+A.uid+TE),Q=null,J=null,se;function Ce(Fe,He){var lt=se.act;try{se.act=Fe,Fe&&Fe[L]&&(Or(Fe[L],function(gt){gt.clr(Fe)}),Fe[L]=[]),He({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(gt){var et=A[ga];throw et&&et[VA](1,107,Lt(gt)),gt}finally{se.act=lt||null}}s(Ce,"_useHandler");function Te(){if(Q){var Fe=Q;Q=null,J&&J[CC](),J=null;var He=[];if(Or(Fe,function(lt){if(lt&&(lt[L]&&(Or(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){He[Vi](et)}}),Q)try{Te()}catch(lt){He[Vi](lt)}He[zn]>0&&dk("Watcher error(s): ",He)}}s(Te,"_notifyWatchers");function Le(Fe){if(Fe&&Fe.h[zn]>0){Q||(Q=[]),J||(J=Bh(function(){J=null,Te()},0));for(var He=0;He<Fe.h[zn];He++){var lt=Fe.h[He];lt&&pu(Q,lt)===-1&&Q[Vi](lt)}}}s(Le,"_addWatcher");function Ye(Fe,He){if(Fe){var lt=Fe[L]=Fe[L]||[];pu(lt,He)===-1&&lt[Vi](He)}}return s(Ye,"_trackHandler"),se={prop:x,ro:T,rf:S,blkVal:D,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ye},se}s(GK,"_createState");function Xw(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(Xw,"_createAndUseHandler");function GN(A,x,T){var S=UK(x);if(S)return S;var D=$p("dyncfg",!0),L=x&&T!==!1?x:qN(x),Q;function J(){Q.notify()}s(J,"_notifyWatchers");function se(et,gt,Nt){try{et=jC(Q,et,gt,Nt)}catch(Vt){EE(A,gt,"Setting value",Vt)}return et[gt]}s(se,"_setValue");function Ce(et){return Xw(Q,et)}s(Ce,"_watch");function Te(et,gt){Q.use(null,function(Nt){var Vt=Q.upd;try{O(gt)||(Q.upd=gt),et(Nt)}finally{Q.upd=Vt}})}s(Te,"_block");function Le(et,gt){var Nt;return VC(Q,et,gt,(Nt={},Nt[0]=!0,Nt))[gt]}s(Le,"_ref");function Ye(et,gt){var Nt;return VC(Q,et,gt,(Nt={},Nt[1]=!0,Nt))[gt]}s(Ye,"_rdOnly");function Fe(et,gt){var Nt;return VC(Q,et,gt,(Nt={},Nt[2]=!0,Nt))[gt]}s(Fe,"_blkPropValue");function He(et,gt){return gt&&ne(gt,function(Nt,Vt){Rk(lt,et,Nt,Vt)}),et}s(He,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:J,set:se,setDf:He,watch:Ce,ref:Le,rdOnly:Ye,blkVal:Fe,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:D}),Q=GK(lt),$C(Q,L,"config","Creating"),lt}s(GN,"_createDynamicHandler");function HN(A,x){A?(A[AC](x),A[VA](2,108,x)):HC(x)}s(HN,"_logInvalidAccess");function rd(A,x,T,S){var D=GN(T,A||{},S);return x&&D.setDf(D.cfg,x),D}s(rd,"createDynamicConfig");function zp(A,x,T){var S=A[Hh]||A;return S.cfg&&(S.cfg===A||S.cfg[Hh]===S)?S[qp](x):(HN(T,_N+Lt(A)),rd(A,null,T)[qp](x))}s(zp,"onConfigChange");function zC(A,x){if(A&&A[$A])return A[$A](x)}s(zC,"runTargetUnload");function jN(A,x,T){var S;return T||(S=_C(function(D){T=D})),A&&CK(A)>0?Ju(zC(A[0],x),function(){jN(nC(A,1),x,T)}):T(),S}s(jN,"doUnloadAll");var HK=500,VN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function jK(A,x,T){return!A&&te(A)?x:It(A)?A:Ot(A)[gC]()==="true"}s(jK,"_stringToBoolOrDefault");function VK(A){return{mrg:!0,v:A}}s(VK,"cfgDfMerge");function Bk(A,x,T){return{fb:T,isVal:A,v:x}}s(Bk,"cfgDfValidate");function ff(A,x){return{fb:x,set:jK,v:!!A}}s(ff,"cfgDfBoolean");var Zw=[kC,BC,Uw,ZA],e_=null,t_;function $K(A,x){return function(){var T=arguments,S=$N(x);if(S){var D=S.listener;D&&D[A]&&D[A][ww](D,T)}}}s($K,"_listenerProxyFunc");function zK(){var A=na("Microsoft");return A&&(e_=A.ApplicationInsights),e_}s(zK,"_getExtensionNamespace");function $N(A){var x=e_;return!x&&A.disableDbgExt!==!0&&(x=e_||zK()),x?x.ChromeDbgExt:null}s($N,"getDebugExt");function YK(A){if(!t_){t_={};for(var x=0;x<Zw[zn];x++)t_[Zw[x]]=$K(Zw[x],A)}return t_}s(YK,"getDebugListener");var YC,zN="warnToConsole",KK="AI (Internal): ",JK="AI: ",XK="AITR_",YN={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},KC=(YC={},YC[0]=null,YC[1]="errorToConsole",YC[2]=zN,YC[3]="debugToConsole",YC);function Au(A){return A?'"'+A[Oh](/\"/g,pi)+'"':pi}s(Au,"_sanitizeDiagnosticText");function wE(A,x){var T=vE();if(T){var S="log";T[A]&&(S=A),Ne(T[S])&&T[S](x)}}s(wE,"_logToConsole");var r_=function(){function A(x,T,S,D){S===void 0&&(S=!1);var L=this;L[Rw]=x,L[YA]=(S?JK:KK)+x;var Q=pi;OC()&&(Q=gu().stringify(D));var J=(T?" message:"+Au(T):pi)+(D?" props:"+Au(Q):pi);L[YA]+=J}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function _E(A,x){return(A||{})[ga]||new SE(x)}s(_E,"safeGetLogger");var SE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},D,L,Q,J,se;tc(A,this,function(Ce){se=Le(x||{}),Ce.consoleLoggingLevel=function(){return D},Ce[VA]=function(He,lt,et,gt,Nt){Nt===void 0&&(Nt=!1);var Vt=new r_(lt,et,Nt,gt);if(J)throw Lt(Vt);var mr=KC[He]||zN;if(O(Vt[YA]))Fe("throw"+(He===1?"Critical":"Warning"),Vt);else{if(Nt){var Gn=+Vt[Rw];!S[Gn]&&D>=He&&(Ce[mr](Vt[YA]),S[Gn]=!0)}else D>=He&&Ce[mr](Vt[YA]);Te(He,Vt)}},Ce.debugToConsole=function(He){wE("debug",He),Fe("warning",He)},Ce[AC]=function(He){wE("warn",He),Fe("warning",He)},Ce.errorToConsole=function(He){wE("error",He),Fe("error",He)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[$A]=function(He){se&&se.rm(),se=null};function Te(He,lt){if(!Ye()){var et=!0,gt=XK+lt[Rw];if(S[gt]?et=!1:S[gt]=!0,et&&(He<=L&&(Ce.queue[Vi](lt),T++,Fe(He===1?"error":"warn",lt)),T===Q)){var Nt="Internal events throttle limit per PageView reached for this app.",Vt=new r_(23,Nt,!1);Ce.queue[Vi](Vt),He===1?Ce.errorToConsole(Nt):Ce[AC](Nt)}}}s(Te,"_logInternalMessage");function Le(He){return zp(rd(He,YN,Ce).cfg,function(lt){var et=lt.cfg;D=et[hN],L=et.loggingLevelTelemetry,Q=et.maxMessageLimit,J=et.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ye(){return T>=Q}s(Ye,"_areInternalMessagesThrottled");function Fe(He,lt){var et=$N(x||{});et&&et[af]&&et[af](He,lt)}s(Fe,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function Pk(A){return A||new SE}s(Pk,"_getLogger");function Tr(A,x,T,S,D,L){L===void 0&&(L=!1),Pk(A)[VA](x,T,S,D,L)}s(Tr,"_throwInternal");function n_(A,x){Pk(A)[AC](x)}s(n_,"_warnToConsole");var RE,Vh,KN="toGMTString",JN="toUTCString",i_="cookie",Yp="expires",XN="isCookieUseDisabled",o_="disableCookiesUsage",ZN="_ckMgr",s_=null,JC=null,a_=null,pf,e7={},t7={},r7=(RE={cookieCfg:VK((Vh={},Vh[Ww]={fb:"cookieDomain",dfVal:Hw},Vh.path={fb:"cookiePath",dfVal:Hw},Vh.enabled=Xu,Vh.ignoreCookies=Xu,Vh.blockedCookies=Xu,Vh)),cookieDomain:Xu,cookiePath:Xu},RE[o_]=Xu,RE);function Dk(){!pf&&(pf=Qn(function(){return eC()}))}s(Dk,"_getDoc");function kE(A){return A?A.isEnabled():!0}s(kE,"_isMgrEnabled");function Nk(A,x){return x&&A&&Je(A.ignoreCookies)?pu(A.ignoreCookies,x)!==-1:!1}s(Nk,"_isIgnoredCookie");function ZK(A,x){return x&&A&&Je(A.blockedCookies)&&pu(A.blockedCookies,x)!==-1?!0:Nk(A,x)}s(ZK,"_isBlockedCookie");function Lk(A,x){var T=x[of];if(te(T)){var S=void 0;O(A[XN])||(S=!A[XN]),O(A[o_])||(S=!A[o_]),T=S}return T}s(Lk,"_isCfgEnabled");function eJ(A,x){var T,S,D,L,Q,J,se,Ce;A=rd(A||t7,null,x).cfg,L=zp(A,function(Le){Le.setDf(Le.cfg,r7),T=Le.ref(Le.cfg,"cookieCfg"),S=T[Gw]||"/",D=T[Ww],Q=Lk(A,T)!==!1,J=T.getCookie||tJ,se=T.setCookie||XC,Ce=T.delCookie||XC},x);var Te={isEnabled:s(function(){var Le=Lk(A,T)!==!1&&Q&&n7(x),Ye=t7[ZN];return Le&&Ye&&Te!==Ye&&(Le=kE(Ye)),Le},"isEnabled"),setEnabled:s(function(Le){Q=Le!==!1,T[of]=Le},"setEnabled"),set:s(function(Le,Ye,Fe,He,lt){var et=!1;if(kE(Te)&&!ZK(T,Le)){var gt={},Nt=ji(Ye||pi),Vt=Qp(Nt,";");if(Vt!==-1&&(Nt=ji(M(Ye,Vt)),gt=Fk(ge(Ye,Vt+1))),qh(gt,Ww,He||D,ce,O),!te(Fe)){var mr=Kd();if(O(gt[Yp])){var Gn=Sh(),Ci=Gn+Fe*1e3;if(Ci>0){var xi=new Date;xi.setTime(Ci),qh(gt,Yp,i7(xi,mr?KN:JN)||i7(xi,mr?KN:JN)||pi,ce)}}mr||qh(gt,"max-age",pi+Fe,null,O)}var ho=QC();ho&&ho.protocol==="https:"&&(qh(gt,"secure",null,null,O),JC===null&&(JC=!rJ((Ih()||{})[Bw])),JC&&qh(gt,"SameSite","None",null,O)),qh(gt,Gw,lt||S,null,O),se(Le,o7(Nt,gt)),et=!0}return et},"set"),get:s(function(Le){var Ye=pi;return kE(Te)&&!Nk(T,Le)&&(Ye=J(Le)),Ye},"get"),del:s(function(Le,Ye){var Fe=!1;return kE(Te)&&(Fe=Te.purge(Le,Ye)),Fe},"del"),purge:s(function(Le,Ye){var Fe,He=!1;if(n7(x)){var lt=(Fe={},Fe[Gw]=Ye||"/",Fe[Yp]="Thu, 01 Jan 1970 00:00:01 GMT",Fe);Kd()||(lt["max-age"]="0"),Ce(Le,o7(pi,lt)),He=!0}return He},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[ZN]=Te,Te}s(eJ,"createCookieMgr");function n7(A){if(s_===null){s_=!1,!pf&&Dk();try{var x=pf.v||{};s_=x[i_]!==void 0}catch(T){Tr(A,2,68,"Cannot access document.cookie - "+al(T),{exception:Lt(T)})}}return s_}s(n7,"areCookiesSupported");function Fk(A){var x={};if(A&&A[zn]){var T=ji(A)[Qh](";");Or(T,function(S){if(S=ji(S||pi),S){var D=Qp(S,"=");D===-1?x[S]=null:x[ji(M(S,D))]=ji(ge(S,D+1))}})}return x}s(Fk,"_extractParts");function i7(A,x){return Ne(A[x])?A[x]():null}s(i7,"_formatDate");function o7(A,x){var T=A||pi;return ne(x,function(S,D){T+="; "+S+(te(D)?pi:"="+D)}),T}s(o7,"_formatCookieValue");function tJ(A){var x=pi;if(!pf&&Dk(),pf.v){var T=pf.v[i_]||pi;a_!==T&&(e7=Fk(T),a_=T),x=ji(e7[A]||pi)}return x}s(tJ,"_getCookieValue");function XC(A,x){!pf&&Dk(),pf.v&&(pf.v[i_]=A+"="+x)}s(XC,"_setCookieValue");function rJ(A){return he(A)?!!(wl(A,"CPU iPhone OS 12")||wl(A,"iPad; CPU OS 12")||wl(A,"Macintosh; Intel Mac OS X 10_14")&&wl(A,"Version/")&&wl(A,"Safari")||wl(A,"Macintosh; Intel Mac OS X 10_14")&&cN(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||wl(A,"Chrome/5")||wl(A,"Chrome/6")||wl(A,"UnrealEngine")&&!wl(A,"Chrome")||wl(A,"UCBrowser/12")||wl(A,"UCBrowser/11")):!1}s(rJ,"uaDisallowsSameSiteNone");var Mk={perfEvtsSendAll:!1};function nJ(A){A.h=null;var x=A.cb;A.cb=[],Or(x,function(T){ae(T.fn,[T.arg])})}s(nJ,"_runScheduledListeners");function $h(A,x,T,S){Or(A,function(D){D&&D[x]&&(T?(T.cb[Vi]({fn:S,arg:D}),T.h=T.h||Bh(nJ,0,T)):ae(S,[D]))})}s($h,"_runListeners");var iJ=function(){function A(x){this.listeners=[];var T,S,D=[],L={h:null,cb:[]},Q=rd(x,Mk);S=Q[qp](function(J){T=!!J.cfg.perfEvtsSendAll}),tc(A,this,function(J){ze(J,"listeners",{g:s(function(){return D},"g")}),J[_w]=function(se){D[Vi](se)},J[fE]=function(se){for(var Ce=pu(D,se);Ce>-1;)D[yC](Ce,1),Ce=pu(D,se)},J[kC]=function(se){$h(D,kC,L,function(Ce){Ce[kC](se)})},J[BC]=function(se,Ce){$h(D,BC,L,function(Te){Te[BC](se,Ce)})},J[Uw]=function(se,Ce){$h(D,Uw,Ce?L:null,function(Te){Te[Uw](se,Ce)})},J[ZA]=function(se){se&&(T||!se[ck]())&&$h(D,ZA,null,function(Ce){se.isAsync?Bh(function(){return Ce[ZA](se)},0):Ce[ZA](se)})},J[pk]=function(se){se&&se[zn]&&$h(D,pk,L,function(Ce){Ce[pk](se)})},J[mk]=function(se){se&&se[IC]&&$h(D,mk,L,function(Ce){Ce[mk](se)})},J[qw]=function(se,Ce){if(se>0){var Te=Ce||0;$h(D,qw,L,function(Le){Le[qw](se,Te)})}},J[$A]=function(se){var Ce=s(function(){S&&S.rm(),S=null,D=[],L.h&&L.h[CC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if($h(D,"unload",null,function(Le){var Ye=Le[$A](se);Ye&&(Te||(Te=[]),Te[Vi](Ye))}),Te)return _C(function(Le){return Ju(fk(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),ZC="ctx",Qk="ParentContextKey",BE="ChildrenContextKey",oJ=null,l_=function(){function A(x,T,S){var D=this;if(D.start=Sh(),D[Fh]=x,D.isAsync=S,D[ck]=function(){return!1},Ne(T)){var L;ze(D,"payload",{g:s(function(){return!L&&Ne(T)&&(L=T(),T=null),L},"g")})}D[Uh]=function(Q){return Q?Q===A[Qk]||Q===A[BE]?D[Q]:(D[ZC]||{})[Q]:null},D[zd]=function(Q,J){if(Q)if(Q===A[Qk])D[Q]||(D[ck]=function(){return!0}),D[Q]=J;else if(Q===A[BE])D[Q]=J;else{var se=D[ZC]=D[ZC]||{};se[Q]=J}},D.complete=function(){var Q=0,J=D[Uh](A[BE]);if(Je(J))for(var se=0;se<J[zn];se++){var Ce=J[se];Ce&&(Q+=Ce.time)}D.time=Sh()-D.start,D.exTime=D.time-Q,D.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),sJ=function(){function A(x){this.ctx={},tc(A,this,function(T){T.create=function(S,D,L){return new l_(S,D,L)},T.fire=function(S){S&&(S.complete(),x&&Ne(x[ZA])&&x[ZA](S))},T[zd]=function(S,D){if(S){var L=T[ZC]=T[ZC]||{};L[S]=D}},T[Uh]=function(S){return(T[ZC]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),mf="CoreUtils.doPerf";function ex(A,x,T,S,D){if(A){var L=A;if(L[hE]&&(L=L[hE]()),L){var Q=void 0,J=L[Uh](mf);try{if(Q=L.create(x(),S,D),Q){if(J&&Q[zd]&&(Q[zd](l_[Qk],J),J[Uh]&&J[zd])){var se=J[Uh](l_[BE]);se||(se=[],J[zd](l_[BE],se)),se[Vi](Q)}return L[zd](mf,Q),T(Q)}}catch(Ce){Q&&Q[zd]&&Q[zd]("exception",Ce)}finally{Q&&L.fire(Q),L[zd](mf,J)}}}return T()}s(ex,"doPerf");function ya(){return oJ}s(ya,"getGblPerfMgr");var c_="00000000000000000000000000000000",tx="0000000000000000";function u_(A,x,T){return A&&A[zn]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(u_,"_isValid");function zh(A){return u_(A,32,c_)}s(zh,"isValidTraceId");function n1(A){return u_(A,16,tx)}s(n1,"isValidSpanId");var PE=MN("plugin");function Yh(A){return PE.get(A,"state",{},!0)}s(Yh,"_getPluginState");function Ok(A,x){for(var T=[],S=null,D=A[lf](),L;D;){var Q=D[vC]();if(Q){S&&S[Mh]&&Q[Zu]&&S[Mh](Q),L=Yh(Q);var J=!!L[nf];Q[nf]&&(J=Q[nf]()),J||T[Vi](Q),S=Q,D=D[lf]()}}Or(T,function(se){var Ce=A[Aa]();se[dE](A.getCfg(),Ce,x,A[lf]()),L=Yh(se),!se[Aa]&&!L[Aa]&&(L[Aa]=Ce),L[nf]=!0,delete L[sf]})}s(Ok,"initializePlugins");function Uk(A){return A.sort(function(x,T){var S=0;if(T){var D=T[Zu];x[Zu]?S=D?x[RC]-T[RC]:1:D&&(S=-1)}else S=x?1:-1;return S})}s(Uk,"sortPlugins");function aJ(A){var x={};return{getName:s(function(){return x[Fh]},"getName"),setName:s(function(T){A&&A.setName(T),x[Fh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),zh(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),n1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[AN]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[AN]=T},"setTraceFlags")}}s(aJ,"createDistributedTraceContext");var lJ="TelemetryPluginChain",s7="_hasRun",qk="_getTelCtx",a7=0;function cJ(A,x,T){for(;A;){if(A[vC]()===T)return A;A=A[lf]()}return P([T],x.config||{},x)}s(cJ,"_getNextProxyStart");function Wk(A,x,T,S){var D=null,L=[];x||(x=rd({},null,T[ga])),S!==null&&(D=S?cJ(A,T,S):A);var Q={_next:se,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return _E(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!D},"hasNext"),getNext:s(function(){return D},"getNext"),setNext:s(function(Fe){D=Fe},"setNext"),iterate:Ye,onComplete:J}};function J(Fe,He){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Fe&&L[Vi]({func:Fe,self:O(He)?Q.ctx:He,args:lt})}s(J,"_addOnComplete");function se(){var Fe=D;if(D=Fe?Fe[lf]():null,!Fe){var He=L;He&&He[zn]>0&&(Or(He,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){Tr(T[ga],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Fe}s(se,"_moveNext");function Ce(Fe,He){var lt=null,et=x.cfg;if(et&&Fe){var gt=et[XA];!gt&&He&&(gt={}),et[XA]=gt,gt=x.ref(et,XA),gt&&(lt=gt[Fe],!lt&&He&&(lt={}),gt[Fe]=lt,lt=x.ref(gt,Fe))}return lt}s(Ce,"_getExtCfg");function Te(Fe,He){var lt=Ce(Fe,!0);return He&&ne(He,function(et,gt){if(te(lt[et])){var Nt=x.cfg[et];(Nt||!te(Nt))&&(lt[et]=Nt)}Rk(x,lt,et,gt)}),x.setDf(lt,He)}s(Te,"_resolveExtCfg");function Le(Fe,He,lt){lt===void 0&&(lt=!1);var et,gt=Ce(Fe,!1),Nt=x.cfg;return gt&&(gt[He]||!te(gt[He]))?et=gt[He]:(Nt[He]||!te(Nt[He]))&&(et=Nt[He]),et||!te(et)?et:lt}s(Le,"_getConfig");function Ye(Fe){for(var He;He=Q._next();){var lt=He[vC]();lt&&Fe(lt)}}return s(Ye,"_iterateChain"),Q}s(Wk,"_createInternalContext");function rx(A,x,T,S){var D=rd(x),L=Wk(A,D,T,S),Q=L.ctx;function J(Ce){var Te=L._next();return Te&&Te[Zu](Ce,Q),!Te}s(J,"_processNext");function se(Ce,Te){return Ce===void 0&&(Ce=null),Je(Ce)&&(Ce=P(Ce,D.cfg,T,Te)),rx(Ce||Q[lf](),D.cfg,T,Te)}return s(se,"_createNew"),Q[Tl]=J,Q[zA]=se,Q}s(rx,"createProcessTelemetryContext");function w(A,x,T){var S=rd(x.config),D=Wk(A,S,x,T),L=D.ctx;function Q(se){var Ce=D._next();return Ce&&Ce[$A](L,se),!Ce}s(Q,"_processNext");function J(se,Ce){return se===void 0&&(se=null),Je(se)&&(se=P(se,S.cfg,x,Ce)),w(se||L[lf](),x,Ce)}return s(J,"_createNew"),L[Tl]=Q,L[zA]=J,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=rd(x.config),D=Wk(A,S,x,T),L=D.ctx;function Q(se){return L.iterate(function(Ce){Ne(Ce[Wp])&&Ce[Wp](L,se)})}s(Q,"_processNext");function J(se,Ce){return se===void 0&&(se=null),Je(se)&&(se=P(se,S.cfg,x,Ce)),R(se||L[lf](),x,Ce)}return s(J,"_createNew"),L[Tl]=Q,L[zA]=J,L}s(R,"createProcessTelemetryUpdateContext");function P(A,x,T,S){var D=null,L=!S;if(Je(A)&&A[zn]>0){var Q=null;Or(A,function(J){if(!L&&S===J&&(L=!0),L&&J&&Ne(J[Zu])){var se=F(J,x,T);D||(D=se),Q&&Q._setNext(se),Q=se}})}return S&&!D?P([S],x,T):D}s(P,"createTelemetryProxyChain");function F(A,x,T){var S=null,D=Ne(A[Zu]),L=Ne(A[Mh]),Q;A?Q=A[Lh]+"-"+A[RC]+"-"+a7++:Q="Unknown-0-"+a7++;var J={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ye,_id:Q,_setNext:s(function(Fe){S=Fe},"_setNext")};function se(){var Fe;return A&&Ne(A[qk])&&(Fe=A[qk]()),Fe||(Fe=rx(J,x,T)),Fe}s(se,"_getTelCtx");function Ce(Fe,He,lt,et,gt){var Nt=!1,Vt=A?A[Lh]:lJ,mr=Fe[s7];return mr||(mr=Fe[s7]={}),Fe.setNext(S),A&&ex(Fe[Aa](),function(){return Vt+":"+lt},function(){mr[Q]=!0;try{var Gn=S?S._id:pi;Gn&&(mr[Gn]=!1),Nt=He(Fe)}catch(xi){var Ci=S?mr[S._id]:!0;Ci&&(Nt=!0),(!S||!Ci)&&Tr(Fe[af](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(xi)+", run flags: "+Lt(mr))}},et,gt),Nt}s(Ce,"_processChain");function Te(Fe,He){He=He||se();function lt(et){if(!A||!D)return!1;var gt=Yh(A);return gt[sf]||gt[Ow]?!1:(L&&A[Mh](S),A[Zu](Fe,et),!0)}s(lt,"_callProcessTelemetry"),Ce(He,lt,"processTelemetry",function(){return{item:Fe}},!Fe.sync)||He[Tl](Fe)}s(Te,"_processTelemetry");function Le(Fe,He){function lt(){var et=!1;if(A){var gt=Yh(A),Nt=A[Aa]||gt[Aa];A&&(!Nt||Nt===Fe.core())&&!gt[sf]&&(gt[Aa]=null,gt[sf]=!0,gt[nf]=!1,A[sf]&&A[sf](Fe,He)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Fe,lt,"unload",function(){},He.isAsync)||Fe[Tl](He)}s(Le,"_unloadPlugin");function Ye(Fe,He){function lt(){var et=!1;if(A){var gt=Yh(A),Nt=A[Aa]||gt[Aa];A&&(!Nt||Nt===Fe.core())&&!gt[sf]&&A[Wp]&&A[Wp](Fe,He)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Fe,lt,"update",function(){},!1)||Fe[Tl](He)}return s(Ye,"_updatePlugin"),Gt(J)}s(F,"createTelemetryPluginProxy");function oe(){var A=[];function x(S){S&&A[Vi](S)}s(x,"_addHandler");function T(S,D){Or(A,function(L){try{L(S,D)}catch(Q){Tr(S[af](),2,73,"Unexpected error calling unload handler - "+Lt(Q))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(oe,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var D=A;A=[],Or(D,function(L){try{(L.rm||L.remove).call(L)}catch(Q){Tr(S,2,73,"Unloading:"+Lt(Q))}})}s(x,"_doUnload");function T(S){S&&rC(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Qe="getPlugin",Xe=(we={},we[XA]={isVal:Hw,v:{}},we),pt=function(){function A(){var x=this,T,S,D,L,Q;Ce(),tc(A,x,function(Te){Te[dE]=function(Le,Ye,Fe,He){se(Le,Ye,He),T=!0},Te[sf]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||w(null,Fe,D&&D[Qe]?D[Qe]():D),gt=Ye||{reason:0,isAsync:!1};function Nt(){lt||(lt=!0,L.run(et,Ye),Q.run(et[af]()),He===!0&&et[Tl](gt),Ce())}return s(Nt,"_unloadCallback"),!Te[kw]||Te[kw](et,gt,Nt)!==!0?Nt():He=!0,He},Te[Wp]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||R(null,Fe,D&&D[Qe]?D[Qe]():D),gt=Ye||{reason:0};function Nt(){lt||(lt=!0,se(et.getCfg(),et.core(),et[lf]()))}return s(Nt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,gt,Nt)!==!0?Nt():He=!0,He},AE(Te,"_addUnloadCb",function(){return L},"add"),AE(Te,"_addHook",function(){return Q},"add"),ze(Te,"_unloadHooks",{g:s(function(){return Q},"g")})}),x[af]=function(Te){return J(Te)[af]()},x[nf]=function(){return T},x.setInitialized=function(Te){T=Te},x[Mh]=function(Te){D=Te},x[Tl]=function(Te,Le){Le?Le[Tl](Te):D&&Ne(D[Zu])&&D[Zu](Te,null)},x._getTelCtx=J;function J(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ye=S||rx(null,{},x[Aa]);D&&D[Qe]?Le=Ye[zA](null,D[Qe]):Le=Ye[zA](null,D)}return Le}s(J,"_getTelCtx");function se(Te,Le,Ye){rd(Te,Xe,_E(Le)),!Ye&&Le&&(Ye=Le[bC]()[lf]());var Fe=D;D&&D[Qe]&&(Fe=D[Qe]()),x[Aa]=Le,S=rx(Ye,Te,Le,Fe)}s(se,"_setDefaults");function Ce(){T=!1,x[Aa]=null,S=null,D=null,Q=Ee(),L=oe()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function ir(A,x,T){var S={id:x,fn:T};rC(A,S);var D={remove:s(function(){Or(A,function(L,Q){if(L.id===S.id)return A[yC](Q,1),-1})},"remove")};return D}s(ir,"_addInitializer");function bn(A,x,T){for(var S=!1,D=A[zn],L=0;L<D;++L){var Q=A[L];if(Q)try{if(Q.fn[ww](null,[x])===!1){S=!0;break}}catch(J){Tr(T,2,64,"Telemetry initializer failed: "+al(J),{exception:Lt(J)},!0)}}return!S}s(bn,"_runInitializers");var Wn=function(A){uE(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,D;L(),tc(x,T,function(Q,J){Q.addTelemetryInitializer=function(se){return ir(D,S++,se)},Q[Zu]=function(se,Ce){bn(D,se,Ce?Ce[af]():Q[af]())&&Q[Tl](se,Ce)},Q[kw]=function(){L()}});function L(){S=0,D=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(pt),cr,br="Plugins must provide initialize method",On="_notificationManager",En="SDK is still unloading...",mi="SDK is not initialized",io=100,Bi=5e4,Ma=Xt((cr={cookieCfg:{}},cr[SC]={rdOnly:!0,ref:!0,v:[]},cr[jp]={rdOnly:!0,ref:!0,v:[]},cr[XA]={ref:!0,v:{}},cr[Yd]=Xu,cr.loggingLevelConsole=0,cr.diagnosticLogInterval=Xu,cr));function nx(A,x){return new sJ(x)}s(nx,"_createPerfManager");function DE(A,x,T){var S=[],D=[],L={};return Or(T,function(Q){(te(Q)||te(Q[dE]))&&qr(br);var J=Q[RC],se=Q[Lh];Q&&J&&(te(L[J])?L[J]=se:n_(A,"Two extensions have same priority #"+J+" - "+L[J]+", "+se)),!J||J<x?S[Vi](Q):D[Vi](Q)}),{core:S,channels:D}}s(DE,"_validateExtensions");function Gk(A,x){var T=!1;return Or(x,function(S){if(S===A)return T=!0,-1}),T}s(Gk,"_isPluginPresent");function d_(A,x,T,S){T&&ne(T,function(D,L){S&&mu(L)&&mu(x[D])&&d_(A,x[D],L,S),S&&mu(L)&&mu(x[D])?d_(A,x[D],L,S):A.set(x,D,L)})}s(d_,"_deepMergeConfig");function l7(A,x){var T=null,S=-1;return Or(A,function(D,L){if(D.w===x)return T=D,S=L,-1}),{i:S,l:T}}s(l7,"_findWatcher");function uJ(A,x){var T=l7(A,x).l;return T||(T={w:x,rm:s(function(){var S=l7(A,x);S.i!==-1&&A[yC](S.i,1)},"rm")},A[Vi](T)),T}s(uJ,"_addDelayedCfgListener");function Hk(A,x,T){Or(x,function(S){var D=zp(A,S.w,T);delete S.w,S.rm=function(){D.rm()}})}s(Hk,"_registerDelayedCfgListener");function c7(A,x,T,S){return x.add(A[qp](function(D){var L=D.cfg.disableDbgExt;L===!0&&S&&(T[fE](S),S=null),T&&!S&&L!==!0&&(S=YK(D.cfg),T[_w](S))})),S}s(c7,"_initDebugListener");function u7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(u7,"_createUnloadHook");var Et=function(){function A(){var x,T,S,D,L,Q,J,se,Ce,Te,Le,Ye,Fe,He,lt,et,gt,Nt,Vt,mr,Gn,Ci,xi,ho,cn,Fr,vi,Rs,Oo,Ft,Mr,oo;tc(A,this,function(bt){st(),bt._getDbgPlgTargets=function(){return[xi,D]},bt[nf]=function(){return T},bt.activeStatus=function(){return Fr},bt._setPendingStatus=function(){Fr=3},bt[dE]=function(dt,dr,Bn,kr){Fe&&qr(En),bt[nf]()&&qr("Core cannot be initialized more than once"),x=rd(dt,Ma,Bn||bt[ga],!1),dt=x.cfg,ic(x[qp](function(To){var ss=To.cfg,Nc=Fr===3;if(!Nc){Rs=ss.initInMemoMaxSize||io;var nd=ss.instrumentationKey,Xp=ss.endpointUrl;if(te(nd)){Gn=null,Fr=Nh.INACTIVE;var Zp="Please provide instrumentation key";T?(Tr(S,1,100,Zp),js()):qr(Zp);return}var I_=[];if(vt(nd)?(I_[Vi](nd),Gn=null):Gn=nd,vt(Xp)?(I_[Vi](Xp),vi=null):vi=Xp,I_[zn]){Oo=!1,Fr=3;var uB=Hw(ss.initTimeOut)?ss.initTimeOut:Bi,WJ=hu(I_);Bh(function(){Oo||In()},uB),Ju(WJ,function(mx){try{if(Oo)return;if(!mx.rejected){var hx=mx[xC];if(hx&&hx[zn]){var N7=hx[0];if(Gn=N7&&N7[xC],hx[zn]>1){var L7=hx[1];vi=L7&&L7[xC]}}Gn&&(dt.instrumentationKey=Gn,dt.endpointUrl=vi)}In()}catch{Oo||In()}})}else In();var T_=To.ref(To.cfg,XA);ne(T_,function(mx){To.ref(T_,mx)})}})),L=kr,Vt=c7(x,Nt,L&&bt[$d](),Vt),fx(),bt[ga]=Bn;var Pn=dt[SC];if(Te=[],Te[Vi].apply(Te,pN(pN([],dr,!1),Pn)),Le=dt[jp],Vs(null),(!Ye||Ye[zn]===0)&&qr("No "+jp+" available"),Le&&Le[zn]>1){var vo=bt[vC]("TeeChannelController");(!vo||!vo.plugin)&&Tr(S,1,28,"TeeChannel required")}Hk(dt,Ci,S),Ci=null,T=!0,Fr===Nh.ACTIVE&&js()},bt.getChannels=function(){var dt=[];return Ye&&Or(Ye,function(dr){dt[Vi](dr)}),Gt(dt)},bt.track=function(dt){ex(bt[hE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(ks(dt),qr("Invalid telemetry item")),!dt[Fh]&&te(dt[Fh])&&(ks(dt),qr("telemetry name required")),dt.iKey=dt.iKey||Gn,dt.time=dt.time||gE(new Date),dt.ver=dt.ver||"4.0",!Fe&&bt[nf]()&&Fr===Nh.ACTIVE?Ua()[Tl](dt):Fr!==Nh.INACTIVE&&D[zn]<=Rs&&D[Vi](dt)},function(){return{item:dt}},!dt.sync)},bt[bC]=Ua,bt[$d]=function(){return L||(L=new iJ(x.cfg),bt[On]=L),L},bt[_w]=function(dt){bt.getNotifyMgr()[_w](dt)},bt[fE]=function(dt){L&&L[fE](dt)},bt.getCookieMgr=function(){return se||(se=eJ(x.cfg,bt[ga])),se},bt.setCookieMgr=function(dt){se!==dt&&(zC(se,!1),se=dt)},bt[hE]=function(){return Q||J||ya()},bt.setPerfMgr=function(dt){Q=dt},bt.eventCnt=function(){return D[zn]},bt.releaseQueue=function(){if(T&&D[zn]>0){var dt=D;D=[],Fr===2?Or(dt,function(dr){dr.iKey=dr.iKey||Gn,Ua()[Tl](dr)}):Tr(S,2,20,"core init status is not active")}},bt.pollInternalLogs=function(dt){return lt=dt||null,oo=!1,Ft&&Ft[CC](),go(!0)};function In(){Oo=!0,te(Gn)?(Fr=Nh.INACTIVE,Tr(S,1,112,"ikey can't be resolved from promises")):Fr=Nh.ACTIVE,js()}s(In,"_setStatus");function js(){T&&(bt.releaseQueue(),bt.pollInternalLogs())}s(js,"_releaseQueues");function go(dt){if((!Ft||!Ft[of])&&!oo){var dr=dt||S&&S.queue[zn]>0;dr&&(Mr||(Mr=!0,ic(x[qp](function(Bn){var kr=Bn.cfg.diagnosticLogInterval;(!kr||!(kr>0))&&(kr=1e4);var Pn=!1;Ft&&(Pn=Ft[of],Ft[CC]()),Ft=Cw(dx,kr),Ft.unref(),Ft[of]=Pn}))),Ft[of]=!0)}return Ft}s(go,"_startLogPoller"),bt[mN]=function(){oo=!0,Ft&&Ft[CC](),dx()},gk(bt,function(){return He},["addTelemetryInitializer"]),bt[$A]=function(dt,dr,Bn){dt===void 0&&(dt=!0),T||qr(mi),Fe&&qr(En);var kr={reason:50,isAsync:dt,flushComplete:!1},Pn;dt&&!dr&&(Pn=_C(function(ss){dr=ss}));var vo=w(gf(),bt);vo[Sw](function(){Nt.run(bt[ga]),jN([se,L,S],dt,function(){st(),dr&&dr(kr)})},bt);function To(ss){kr.flushComplete=ss,Fe=!0,gt.run(vo,kr),bt[mN](),vo[Tl](kr)}return s(To,"_doUnload"),dx(),Kp(dt,To,6,Bn),Pn},bt[vC]=kl,bt.addPlugin=function(dt,dr,Bn,kr){if(!dt){kr&&kr(!1),px(br);return}var Pn=kl(dt[Lh]);if(Pn&&!dr){kr&&kr(!1),px("Plugin ["+dt[Lh]+"] is already loaded!");return}var vo={reason:16};function To(nd){Te[Vi](dt),vo.added=[dt],Vs(vo),kr&&kr(!0)}if(s(To,"_addPlugin"),Pn){var ss=[Pn.plugin],Nc={reason:2,isAsync:!!Bn};yu(ss,Nc,function(nd){nd?(vo.removed=ss,vo.reason|=32,To()):kr&&kr(!1)})}else To()},bt.updateCfg=function(dt,dr){dr===void 0&&(dr=!0);var Bn;if(bt[nf]()){Bn={reason:1,cfg:x.cfg,oldCfg:mw({},x.cfg),newConfig:mw({},dt),merge:dr},dt=Bn.newConfig;var kr=x.cfg;dt[SC]=kr[SC],dt[jp]=kr[jp]}x._block(function(Pn){var vo=Pn.cfg;d_(Pn,vo,dt,dr),dr||ne(vo,function(To){tt(dt,To)||Pn.set(vo,To,Xu)}),Pn.setDf(vo,Ma)},!0),x.notify(),Bn&&Jp(Bn)},bt.evtNamespace=function(){return et},bt.flush=Kp,bt.getTraceCtx=function(dt){return mr||(mr=aJ()),mr},bt.setTraceCtx=function(dt){mr=dt||null},bt.addUnloadHook=ic,AE(bt,"addUnloadCb",function(){return gt},"add"),bt.onCfgChange=function(dt){var dr;return T?dr=zp(x.cfg,dt,bt[ga]):dr=uJ(Ci,dt),u7(dr)},bt.getWParam=function(){return Eh()||x.cfg.enableWParam?0:-1};function Rl(){var dt={};ho=[];var dr=s(function(Bn){Bn&&Or(Bn,function(kr){if(kr[Lh]&&kr[EC]&&!dt[kr.identifier]){var Pn=kr[Lh]+"="+kr[EC];ho[Vi](Pn),dt[kr.identifier]=kr}})},"_addPluginVersions");dr(Ye),Le&&Or(Le,function(Bn){dr(Bn)}),dr(Te)}s(Rl,"_setPluginVersions");function st(){T=!1,x=rd({},Ma,bt[ga]),x.cfg[hN]=1,ze(bt,"config",{g:s(function(){return x.cfg},"g"),s:s(function(dr){bt.updateCfg(dr,!1)},"s")}),ze(bt,"pluginVersionStringArr",{g:s(function(){return ho||Rl(),ho},"g")}),ze(bt,"pluginVersionString",{g:s(function(){return cn||(ho||Rl(),cn=ho.join(";")),cn||pi},"g")}),ze(bt,"logger",{g:s(function(){return S||(S=new SE(x.cfg),x[ga]=S),S},"g"),s:s(function(dr){x[ga]=dr,S!==dr&&(zC(S,!1),S=dr)},"s")}),bt[ga]=new SE(x.cfg),xi=[];var dt=bt.config[SC]||[];dt.splice(0,dt[zn]),rC(dt,xi),He=new Wn,D=[],zC(L,!1),L=null,Q=null,J=null,zC(se,!1),se=null,Ce=null,Te=[],Le=null,Ye=null,Fe=!1,lt=null,et=$p("AIBaseCore",!0),gt=oe(),mr=null,Gn=null,Nt=Ee(),Ci=[],cn=null,ho=null,oo=!1,Ft=null,Mr=!1,Fr=0,vi=null,Rs=null,Oo=!1}s(st,"_initDefaults");function Ua(){var dt=rx(gf(),x.cfg,bt);return dt[Sw](go),dt}s(Ua,"_createTelCtx");function Vs(dt){var dr=DE(bt[ga],HK,Te);Ce=null,cn=null,ho=null,Ye=(Le||[])[0]||[],Ye=Uk(rC(Ye,dr[jp]));var Bn=rC(Uk(dr[Aa]),Ye);xi=Gt(Bn);var kr=bt.config[SC]||[];kr.splice(0,kr[zn]),rC(kr,xi);var Pn=Ua();Ye&&Ye[zn]>0&&Ok(Pn[zA](Ye),Bn),Ok(Pn,Bn),dt&&Jp(dt)}s(Vs,"_initPluginChain");function kl(dt){var dr=null,Bn=null,kr=[];return Or(xi,function(Pn){if(Pn[Lh]===dt&&Pn!==He)return Bn=Pn,-1;Pn.getChannel&&kr[Vi](Pn)}),!Bn&&kr[zn]>0&&Or(kr,function(Pn){if(Bn=Pn.getChannel(dt),!Bn)return-1}),Bn&&(dr={plugin:Bn,setEnabled:s(function(Pn){Yh(Bn)[Ow]=!Pn},"setEnabled"),isEnabled:s(function(){var Pn=Yh(Bn);return!Pn[sf]&&!Pn[Ow]},"isEnabled"),remove:s(function(Pn,vo){Pn===void 0&&(Pn=!0);var To=[Bn],ss={reason:1,isAsync:Pn};yu(To,ss,function(Nc){Nc&&Vs({reason:32,removed:To}),vo&&vo(Nc)})},"remove")}),dr}s(kl,"_getPlugin");function gf(){if(!Ce){var dt=(xi||[]).slice();pu(dt,He)===-1&&dt[Vi](He),Ce=P(Uk(dt),x.cfg,bt)}return Ce}s(gf,"_getPluginChain");function yu(dt,dr,Bn){if(dt&&dt[zn]>0){var kr=P(dt,x.cfg,bt),Pn=w(kr,bt);Pn[Sw](function(){var vo=!1,To=[];Or(Te,function(Nc,nd){Gk(Nc,dt)?vo=!0:To[Vi](Nc)}),Te=To,cn=null,ho=null;var ss=[];Le&&(Or(Le,function(Nc,nd){var Xp=[];Or(Nc,function(Zp){Gk(Zp,dt)?vo=!0:Xp[Vi](Zp)}),ss[Vi](Xp)}),Le=ss),Bn&&Bn(vo),go()}),Pn[Tl](dr)}else Bn(!1)}s(yu,"_removePlugins");function dx(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[zn]=0,Or(dt,function(dr){var Bn={name:lt||"InternalMessageId: "+dr[Rw],iKey:Gn,time:gE(new Date),baseType:r_.dataType,baseData:{message:dr[YA]}};bt.track(Bn)})}}s(dx,"_flushInternalLogs");function Kp(dt,dr,Bn,kr){var Pn=1,vo=!1,To=null;kr=kr||5e3;function ss(){Pn--,vo&&Pn===0&&(To&&To[CC](),To=null,dr&&dr(vo),dr=null)}if(s(ss,"doCallback"),Ye&&Ye[zn]>0){var Nc=Ua()[zA](Ye);Nc.iterate(function(nd){if(nd.flush){Pn++;var Xp=!1;nd.flush(dt,function(){Xp=!0,ss()},Bn)||Xp||(dt&&To==null?To=Bh(function(){To=null,ss()},kr):ss())}})}return vo=!0,ss(),!0}s(Kp,"_flushChannels");function fx(){var dt;ic(x[qp](function(dr){var Bn=dr.cfg.enablePerfMgr;if(Bn){var kr=dr.cfg[Yd];(dt!==kr||!dt)&&(kr||(kr=nx),SN(dr.cfg,Yd,kr),dt=kr,J=null),!Q&&!J&&Ne(kr)&&(J=kr(bt,bt[$d]()))}else J=null,dt=null}))}s(fx,"_initPerfManager");function Jp(dt){var dr=R(gf(),bt);dr[Sw](go),(!bt._updateHook||bt._updateHook(dr,dt)!==!0)&&dr[Tl](dt)}s(Jp,"_doUpdate");function px(dt){var dr=bt[ga];dr?(Tr(dr,2,73,dt),go()):qr(dt)}s(px,"_logOrThrowError");function ks(dt){var dr=bt[$d]();dr&&dr[BC]([dt],2)}s(ks,"_notifyInvalidEvent");function ic(dt){Nt.add(dt)}s(ic,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Rr(A,x){try{if(A&&A!==""){var T=gu().parse(A);if(T&&T[gN]&&T[gN]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[zn])return T}}catch(S){Tr(x,1,43,"Cannot parse the response. "+(S[Fh]||Lt(S)),{response:A})}return null}s(Rr,"parseResponse");var en="",Lo="NoResponseBody",Qa="&"+Lo+"=true",Hs="POST",Oa=function(){function A(){var x=0,T,S,D,L,Q,J,se,Ce,Te,Le,Ye,Fe,He,lt;tc(A,this,function(et,gt){var Nt=!0;Oo(),et[dE]=function(Ft,Mr){D=Mr,S&&Tr(D,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,J,T]},et.SetConfig=function(Ft){try{if(Q=Ft.senderOnCompleteCallBack||{},J=!!Ft.disableCredentials,se=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Le=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,He=!!Ft.addNoResponse,Fe=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Fr},L||(Nt=!1),J){var Mr=QC();Mr&&Mr.protocol&&Mr.protocol[gC]()==="file:"&&(Nt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,Mr){return Ft&&Ft[zn]?Ci(Ft,Mr):null},et.getFallbackInst=function(){return Ce},et[kw]=function(Ft,Mr){Oo()};function Vt(Ft,Mr){xi(Mr,200,{},Ft)}s(Vt,"_onSuccess");function mr(Ft,Mr){Tr(D,2,26,"Failed to send telemetry.",{message:Ft}),xi(Mr,400,{})}s(mr,"_onError");function Gn(Ft){mr("No endpoint url is provided for the batch",Ft)}s(Gn,"_onNoPayloadUrl");function Ci(Ft,Mr){for(var oo=0,bt=null,In=0;bt==null&&In<Ft[zn];)oo=Ft[In],!Te&&oo===1?Ek()?bt=Rs:Ik()&&(bt=Fr):oo===2&&bE(Mr)&&(!Mr||!Fe)?bt=vi:oo===3&&Gh()&&(Mr?!Ye:!Le)&&(bt=cn),In++;return bt?{_transport:oo,_isSync:Mr,sendPOST:bt}:null}s(Ci,"_getSenderInterface");function xi(Ft,Mr,oo,bt){try{Ft&&Ft(Mr,oo,bt)}catch{}}s(xi,"_doOnComplete");function ho(Ft,Mr){var oo=Ih(),bt=Ft[Gp];if(!bt)return Gn(Mr),!0;bt=Ft[Gp]+(He?Qa:en);var In=Ft[IC],js=L?In:new Blob([In],{type:"text/plain;charset=UTF-8"}),go=oo.sendBeacon(bt,js);return go}s(ho,"_doBeaconSend");function cn(Ft,Mr,oo){var bt=Ft[IC];try{if(bt)if(ho(Ft,Mr))Vt(en,Mr);else{var In=Q&&Q.beaconOnRetry;In&&Ne(In)?In(Ft,Mr,ho):(Ce&&Ce.sendPOST(Ft,Mr,!0),Tr(D,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(js){L&&n_(D,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(js)),xi(Mr,L?0:400,{},en)}}s(cn,"_beaconSender");function Fr(Ft,Mr,oo){var bt,In,js,go=Ft[uk]||{};!oo&&T&&(bt=_C(function(Vs,kl){In=Vs,js=kl})),L&&oo&&Ft.disableXhrSync&&(oo=!1);var Rl=Ft[Gp];if(!Rl){Gn(Mr),In&&In(!1);return}var st=Ck(Hs,Rl,Nt,!0,oo,Ft[Hp]);L||st.setRequestHeader("Content-type","application/json"),Or(At(go),function(Vs){st.setRequestHeader(Vs,go[Vs])}),st.onreadystatechange=function(){L||(Ua(st),st.readyState===4&&In&&In(!0))},st.onload=function(){L&&Ua(st)};function Ua(Vs){var kl=Q&&Q.xhrOnComplete,gf=kl&&Ne(kl);if(gf)kl(Vs,Mr,Ft);else{var yu=jw(Vs);xi(Mr,Vs[pE],t1(Vs,L),yu)}}return s(Ua,"_doOnReadyFunc"),st.onerror=function(Vs){xi(Mr,L?st[pE]:400,t1(st,L),L?en:Vw(st)),js&&js(Vs)},st.ontimeout=function(){xi(Mr,L?st[pE]:500,t1(st,L),L?en:Vw(st)),In&&In(!1)},st.send(Ft[IC]),bt}s(Fr,"_xhrSender");function vi(Ft,Mr,oo){var bt,In=Ft[Gp],js=Ft[IC],go=L?js:new Blob([js],{type:"application/json"}),Rl,st,Ua,Vs=new Headers,kl=js[zn],gf=!1,yu=!1,dx=Ft[uk]||{},Kp=(bt={method:Hs,body:go},bt[VN]=!0,bt);Ft.headers&&At(Ft.headers)[zn]>0&&(Or(At(dx),function(ks){Vs.append(ks,dx[ks])}),Kp[uk]=Vs),se?Kp.credentials=se:Nt&&L&&(Kp.credentials="include"),oo&&(Kp.keepalive=!0,x+=kl,L?Ft._sendReason===2&&(gf=!0,He&&(In+=Qa)):gf=!0);var fx=new Request(In,Kp);try{fx[VN]=!0}catch{}if(!oo&&T&&(Rl=_C(function(ks,ic){st=ks,Ua=ic})),!In){Gn(Mr),st&&st(!1);return}function Jp(ks){xi(Mr,L?0:400,{},L?en:ks)}s(Jp,"_handleError");function px(ks,ic,dt){var dr=ks[pE],Bn=Q.fetchOnComplete;Bn&&Ne(Bn)?Bn(ks,Mr,dt||en,ic):xi(Mr,dr,{},dt||en)}s(px,"_onFetchComplete");try{Ju(fetch(L?In:fx,L?Kp:null),function(ks){if(oo&&(x-=kl,kl=0),!yu)if(yu=!0,ks.rejected)Jp(ks.reason&&ks.reason[YA]),Ua&&Ua(ks.reason);else{var ic=ks[xC];try{!L&&!ic.ok?(Jp(ic.statusText),st&&st(!1)):L&&!ic.body?(px(ic,null,en),st&&st(!0)):Ju(ic.text(),function(dt){px(ic,Ft,dt[xC]),st&&st(!0)})}catch(dt){Jp(Lt(dt)),Ua&&Ua(dt)}}})}catch(ks){yu||(Jp(Lt(ks)),Ua&&Ua(ks))}return gf&&!yu&&(yu=!0,xi(Mr,200,{}),st&&st(!0)),L&&!yu&&Ft[Hp]>0&&lt&&lt.set(function(){yu||(yu=!0,xi(Mr,500,{}),st&&st(!0))},Ft[Hp]),Rl}s(vi,"_doFetchSender");function Rs(Ft,Mr,oo){var bt=Mp(),In=new XDomainRequest,js=Ft[IC];In.onload=function(){var Vs=jw(In),kl=Q&&Q.xdrOnComplete;kl&&Ne(kl)?kl(In,Mr,Ft):xi(Mr,200,{},Vs)},In.onerror=function(){xi(Mr,400,{},L?en:kN(In))},In.ontimeout=function(){xi(Mr,500,{})},In.onprogress=function(){};var go=bt&&bt.location&&bt.location.protocol||"",Rl=Ft[Gp];if(!Rl){Gn(Mr);return}if(!L&&Rl.lastIndexOf(go,0)!==0){var st="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Tr(D,2,40,". "+st),mr(st,Mr);return}var Ua=L?Rl:Rl[Oh](/^(https?:)/,"");In.open(Hs,Ua),Ft[Hp]&&(In[Hp]=Ft[Hp]),In.send(js),L&&oo?lt&&lt.set(function(){In.send(js)},0):In.send(js)}s(Rs,"_xdrSender");function Oo(){x=0,S=!1,T=!1,D=null,L=null,Q=null,J=null,se=null,Ce=null,Te=!1,Le=!1,Ye=!1,Fe=!1,He=!1,lt=null}s(Oo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),i1="on",Kh="attachEvent",ix="addEventListener",d7="detachEvent",f7="removeEventListener",f_="events";$p("aiEvtPageHide"),$p("aiEvtPageShow");var dJ=/\.[\.]+/g,ege=/[\.]+$/,FKe=1,p7=MN("events"),MKe=/^([^.]*)(?:\.(.+)|)/;function tge(A){return A&&A[Oh]?A[Oh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,pi):A}s(tge,"_normalizeNamespace");function fJ(A,x){if(x){var T=pi;Je(x)?(T=pi,Or(x,function(D){D=tge(D),D&&(D[0]!=="."&&(D="."+D),T+=D)})):T=tge(x),T&&(T[0]!=="."&&(T="."+T),A=(A||pi)+T)}var S=MKe.exec(A||pi)||[];return{type:S[1],ns:(S[2]||pi).replace(dJ,".").replace(ege,pi)[Qh](".").sort().join(".")}}s(fJ,"_getEvtNamespace");function rge(A,x,T){T===void 0&&(T=!0);var S=p7.get(A,f_,{},T),D=S[x];return D||(D=S[x]=[]),D}s(rge,"_getRegisteredEvents");function nge(A,x,T,S){A&&x&&x[rc]&&(A[f7]?A[f7](x[rc],T,S):A[d7]&&A[d7](i1+x[rc],T))}s(nge,"_doDetach");function QKe(A,x,T,S){var D=!1;return A&&x&&x[rc]&&T&&(A[ix]?(A[ix](x[rc],T,S),D=!0):A[Kh]&&(A[Kh](i1+x[rc],T),D=!0)),D}s(QKe,"_doAttach");function ige(A,x,T,S){for(var D=x[zn];D--;){var L=x[D];L&&(!T.ns||T.ns===L[ak].ns)&&(!S||S(L))&&(nge(A,L[ak],L.handler,L.capture),x[yC](D,1))}}s(ige,"_doUnregister");function OKe(A,x,T){if(x[rc])ige(A,rge(A,x[rc]),x,T);else{var S=p7.get(A,f_,{});ne(S,function(D,L){ige(A,L,x,T)}),At(S)[zn]===0&&p7.kill(A,f_)}}s(OKe,"_unregisterEvents");function oge(A,x){var T;return x?(Je(x)?T=[A].concat(x):T=[A,x],T=fJ("xx",T).ns[Qh](".")):T=A,T}s(oge,"mergeEvtNamespace");function sge(A,x,T,S,D){D===void 0&&(D=!1);var L=!1;if(A)try{var Q=fJ(x,S);if(L=QKe(A,Q,T,D),L&&p7.accept(A)){var J={guid:FKe++,evtName:Q,handler:T,capture:D};rge(A,Q.type)[Vi](J)}}catch{}return L}s(sge,"eventOn");function UKe(A,x,T,S,D){if(D===void 0&&(D=!1),A)try{var L=fJ(x,S),Q=!1;OKe(A,L,function(J){return L.ns&&!T||J.handler===T?(Q=!0,!0):!1}),Q||nge(A,L,T,D)}catch{}}s(UKe,"eventOff");var age="sampleRate",pJ="ProcessLegacy",lge="http.method",mJ="https://dc.services.visualstudio.com",p_="/v2/track",ox="not_specified",cge=_K({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),m7="split",di="length",hJ="toLowerCase",NE="ingestionendpoint",jk="toString",uge="removeItem",h7="message",qKe="count",gJ="stringify",AJ="pathname",Vk="match",sx="name",Jh="properties",o1="measurements",g7="sizeInBytes",A7="typeName",$k="exceptions",zk="severityLevel",yJ="problemGroup",m_="parsedStack",y7="hasFullStack",C7="assembly",s1="fileName",h_="line",x7="aiDataContract",v7="duration";function dge(A,x,T){var S=x[di],D=WKe(A,x);if(D[di]!==S){for(var L=0,Q=D;T[Q]!==void 0;)L++,Q=ge(D,0,147)+jKe(L);D=Q}return D}s(dge,"dataSanitizeKeyAndAddUniqueness");function WKe(A,x){var T;return x&&(x=ji(Ot(x)),x[di]>150&&(T=ge(x,0,150),Tr(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(WKe,"dataSanitizeKey");function Pc(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=ji(Ot(x)),x[di]>T&&(S=ge(x,0,T),Tr(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(Pc,"dataSanitizeString");function CJ(A,x){return pge(A,x,2048,66)}s(CJ,"dataSanitizeUrl");function fge(A,x){var T;return x&&x[di]>32768&&(T=ge(x,0,32768),Tr(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(fge,"dataSanitizeMessage");function GKe(A,x){var T;if(x){var S=""+x;S[di]>32768&&(T=ge(S,0,32768),Tr(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(GKe,"dataSanitizeException");function LE(A,x){if(x){var T={};ne(x,function(S,D){if(Se(D)&&OC())try{D=gu()[gJ](D)}catch(L){Tr(A,2,49,"custom property is not valid",{exception:L},!0)}D=Pc(A,D,8192),S=dge(A,S,T),T[S]=D}),x=T}return x}s(LE,"dataSanitizeProperties");function FE(A,x){if(x){var T={};ne(x,function(S,D){S=dge(A,S,T),T[S]=D}),x=T}return x}s(FE,"dataSanitizeMeasurements");function HKe(A,x){return x&&pge(A,x,128,69)[jk]()}s(HKe,"dataSanitizeId");function pge(A,x,T,S){var D;return x&&(x=ji(Ot(x)),x[di]>T&&(D=ge(x,0,T),Tr(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),D||x}s(pge,"dataSanitizeInput");function jKe(A){var x="00"+A;return ve(x,x[di]-3)}s(jKe,"dsPadNumber");var mge=eC()||{},hge=0,VKe=[null,null,null,null,null];function $Ke(A){var x=hge,T=VKe,S=T[x];return mge.createElement?T[x]||(S=T[x]=mge.createElement("a")):S={host:zKe(A,!0)},S.href=A,x++,x>=T[di]&&(x=0),hge=x,S}s($Ke,"urlParseUrl");function zKe(A,x){var T=YKe(A,x)||"";if(T){var S=T[Vk](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[di]>3&&he(S[2])&&S[2][di]>0)return S[2]+(S[3]||"")}return T}s(zKe,"urlParseHost");function YKe(A,x){var T=null;if(A){var S=A[Vk](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[di]>2&&he(S[2])&&S[2][di]>0&&(T=S[2]||"",x&&S[di]>2)){var D=(S[1]||"")[hJ](),L=S[3]||"";(D==="http"&&L===":80"||D==="https"&&L===":443")&&(L=""),T+=L}}return T}s(YKe,"urlParseFullHost");var KKe=[mJ+p_,"https://breeze.aimon.applicationinsights.io"+p_,"https://dc-int.services.visualstudio.com"+p_];function gge(A){return pu(KKe,A[hJ]())!==-1}s(gge,"isInternalApplicationInsightsEndpoint");function JKe(A,x,T,S){var D,L=S,Q=S;if(x&&x[di]>0){var J=$Ke(x);if(D=J.host,!L)if(J[AJ]!=null){var se=J.pathname[di]===0?"/":J[AJ];se.charAt(0)!=="/"&&(se="/"+se),Q=J[AJ],L=Pc(A,T?T+" "+se:se)}else L=Pc(A,x)}else D=S,L=S;return{target:D,name:L,data:Q}}s(JKe,"AjaxHelperParseDependencyPath");var xJ=Tw({LocalStorage:0,SessionStorage:1}),g_=void 0,Age="";function yge(A){try{if(te(tf()))return null;var x=new Date()[jk](),T=na(A===xJ.LocalStorage?"localStorage":"sessionStorage"),S=Age+x;T.setItem(S,x);var D=T.getItem(S)!==x;if(T[uge](S),!D)return T}catch{}return null}s(yge,"_getVerifiedStorageObject");function vJ(){return Cge()?yge(xJ.SessionStorage):null}s(vJ,"_getSessionStorageObject");function XKe(A){Age=A||""}s(XKe,"utlSetStoragePrefix");function Cge(A){return(A||g_===void 0)&&(g_=!!yge(xJ.SessionStorage)),g_}s(Cge,"utlCanUseSessionStorage");function ZKe(A,x){var T=vJ();if(T!==null)try{return T.getItem(x)}catch(S){g_=!1,Tr(A,2,2,"Browser failed read of session storage. "+al(S),{exception:Lt(S)})}return null}s(ZKe,"utlGetSessionStorage");function eJe(A,x,T){var S=vJ();if(S!==null)try{return S.setItem(x,T),!0}catch(D){g_=!1,Tr(A,2,4,"Browser failed write to session storage. "+al(D),{exception:Lt(D)})}return!1}s(eJe,"utlSetSessionStorage");function tJe(A,x){var T=vJ();if(T!==null)try{return T[uge](x),!0}catch(S){g_=!1,Tr(A,2,6,"Browser failed removal of session storage item. "+al(S),{exception:Lt(S)})}return!1}s(tJe,"utlRemoveSessionStorage");var rJe=";",nJe="=";function bJ(A){if(!A)return{};var x=A[m7](rJe),T=hK(x,function(D,L){var Q=L[m7](nJe);if(Q[di]===2){var J=Q[0][hJ](),se=Q[1];D[J]=se}return D},{});if(At(T)[di]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[NE]=T[NE]||"https://"+S+"dc."+T.endpointsuffix}T[NE]=T[NE]||mJ,cN(T[NE],"/")&&(T[NE]=T[NE].slice(0,-1))}return T}s(bJ,"parseConnectionString");var iJe=function(){function A(x,T,S){var D=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[sx]=Pc(x,S)||ox,L.data=T,L.time=gE(new Date),L[x7]={time:1,iKey:1,name:1,sampleRate:s(function(){return D.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),A_=function(){function A(x,T,S,D){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[sx]=Pc(x,T)||ox,L[Jh]=LE(x,S),L[o1]=FE(x,D)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),oJe=58,sJe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,aJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,lJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,cJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,uJe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,dJe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,fJe=/([^\(\s\n]+):([0-9]+)$/,xge="<no_method>",y_="error",hf="stack",EJ="stackDetails",vge="errorSrc",IJ="message",bge="description",Ege=[{re:aJe,len:5,m:1,fn:2,ln:3,col:4},{chk:mJe,pre:pJe,re:lJe,len:4,m:1,fn:2,ln:3},{re:cJe,len:3,m:1,fn:2,hdl:Rge},{re:uJe,len:2,fn:1,hdl:Rge}];function pJe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(pJe,"_scrubAnonymous");function mJe(A){return Qp(A,"[native")<0}s(mJe,"_ignoreNative");function TJ(A,x){var T=A;return T&&!he(T)&&(JSON&&JSON[gJ]?(T=JSON[gJ](A),x&&(!T||T==="{}")&&(Ne(A[jk])?T=A[jk]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(TJ,"_stringify");function Ige(A,x){var T=A;return A&&(T&&!he(T)&&(T=A[IJ]||A[bge]||T),T&&!he(T)&&(T=TJ(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Qp(T||"",x)===-1&&(T=x+": "+T),T||""}s(Ige,"_formatMessage");function hJe(A){try{if(Se(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(hJe,"_isExceptionDetailsInternal");function gJe(A){try{if(Se(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(gJe,"_isExceptionInternal");function Tge(A){return A&&A.src&&he(A.src)&&A.obj&&Je(A.obj)}s(Tge,"_isStackDetails");function ME(A){var x=A||"";he(x)||(he(x[hf])?x=x[hf]:x=""+x);var T=x[m7](`
`);return{src:x,obj:T}}s(ME,"_convertStackObj");function AJe(A){for(var x=[],T=A[m7](`
`),S=0;S<T[di];S++){var D=T[S];T[S+1]&&(D+="@"+T[S+1],S++),x.push(D)}return{src:A,obj:x}}s(AJe,"_getOperaStack");function wge(A){var x=null;if(A)try{if(A[hf])x=ME(A[hf]);else if(A[y_]&&A[y_][hf])x=ME(A[y_][hf]);else if(A.exception&&A.exception[hf])x=ME(A.exception[hf]);else if(Tge(A))x=A;else if(Tge(A[EJ]))x=A[EJ];else if(Mp()&&Mp().opera&&A[IJ])x=AJe(A[h7]);else if(A.reason&&A.reason[hf])x=ME(A.reason[hf]);else if(he(A))x=ME(A);else{var T=A[IJ]||A[bge]||"";he(A[vge])&&(T&&(T+=`
`),T+=" from "+A[vge]),T&&(x=ME(T))}}catch(S){x=ME(S)}return x||{src:"",obj:null}}s(wge,"_getStackFromErrorObj");function yJe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(yJe,"_formatStackTrace");function CJe(A){var x,T=A.obj;if(T&&T[di]>0){x=[];var S=0,D=!1,L=0;Or(T,function(lt){if(D||EJe(lt)){var et=Ot(lt);D=!0;var gt=IJe(et,S);gt&&(L+=gt[g7],x.push(gt),S++)}});var Q=32*1024;if(L>Q)for(var J=0,se=x[di]-1,Ce=0,Te=J,Le=se;J<se;){var Ye=x[J][g7],Fe=x[se][g7];if(Ce+=Ye+Fe,Ce>Q){var He=Le-Te+1;x.splice(Te,He);break}Te=J,Le=se,J++,se--}}return x}s(CJe,"_parseStack");function b7(A){var x="";if(A&&(x=A.typeName||A[sx]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[jk]());x=S&&S[di]>1?S[1]:""}catch{}return x}s(b7,"_getErrorType");function wJ(A){if(A)try{if(!he(A)){var x=b7(A),T=TJ(A,!1);return(!T||T==="{}")&&(A[y_]&&(A=A[y_],x=b7(A)),T=TJ(A,!0)),Qp(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s(wJ,"_formatErrorCode");var E7=function(){function A(x,T,S,D,L,Q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var J=this;J.ver=2,gJe(T)?(J[$k]=T[$k]||[],J[Jh]=T[Jh],J[o1]=T[o1],T[zk]&&(J[zk]=T[zk]),T.id&&(J.id=T.id,T[Jh].id=T.id),T[yJ]&&(J[yJ]=T[yJ]),te(T.isManual)||(J.isManual=T.isManual)):(S||(S={}),Q&&(S.id=Q),J[$k]=[_ge(x,T,S)],J[Jh]=LE(x,S),J[o1]=FE(x,D),L&&(J[zk]=L),Q&&(J.id=Q))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,D,L,Q,J,se){var Ce=b7(L||Q||x);return{message:Ige(x,Ce),url:T,lineNumber:S,columnNumber:D,error:wJ(L||Q||x),evt:wJ(Q||x),typeName:Ce,stackDetails:wge(J||L||Q),errorSrc:se}},A.CreateFromInterface=function(x,T,S,D){var L=T[$k]&&OA(T[$k],function(J){return bJe(x,J)}),Q=new A(x,Up(Up({},T),{exceptions:L}),S,D);return Q},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,D=x.measurements,L=x.severityLevel,Q=x.problemGroup,J=x.id,se=x.isManual,Ce=T instanceof Array&&OA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:D,problemGroup:Q,id:J,isManual:se}},A.CreateSimpleException=function(x,T,S,D,L,Q){var J;return{exceptions:[(J={},J[y7]=!0,J.message=x,J.stack=L,J.typeName=T,J)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=wJ,A}(),xJe=Gt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function vJe(){var A=this,x=Je(A[m_])&&OA(A[m_],function(S){return wJe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[A7],message:A[h7],hasFullStack:A[y7],stack:A[hf],parsedStack:x||void 0};return T}s(vJe,"_toInterface");function _ge(A,x,T){var S,D,L,Q,J,se,Ce,Te;if(hJe(x))Q=x[A7],J=x[h7],Ce=x[hf],Te=x[m_]||[],se=x[y7];else{var Le=x,Ye=Le&&Le.evt;yt(Le)||(Le=Le[y_]||Ye||Le),Q=Pc(A,b7(Le))||ox,J=fge(A,Ige(x||Le,Q))||ox;var Fe=x[EJ]||wge(x);Te=CJe(Fe),Je(Te)&&OA(Te,function(He){He[C7]=Pc(A,He[C7]),He[s1]=Pc(A,He[s1])}),Ce=GKe(A,yJe(Fe)),se=Je(Te)&&Te[di]>0,T&&(T[A7]=T[A7]||Q)}return S={},S[x7]=xJe,S.id=D,S.outerId=L,S.typeName=Q,S.message=J,S[y7]=se,S.stack=Ce,S.parsedStack=Te,S.toInterface=vJe,S}s(_ge,"_createExceptionDetails");function bJe(A,x){var T=Je(x[m_])&&OA(x[m_],function(D){return TJe(D)})||x[m_],S=_ge(A,Up(Up({},x),{parsedStack:T}));return S}s(bJe,"_createExDetailsFromInterface");function Sge(A,x){var T=x[Vk](dJe);if(T&&T[di]>=4)A[s1]=T[1],A[h_]=parseInt(T[2]);else{var S=x[Vk](fJe);S&&S[di]>=3?(A[s1]=S[1],A[h_]=parseInt(S[2])):A[s1]=x}}s(Sge,"_parseFilename");function Rge(A,x,T){var S=A[s1];x.fn&&T&&T[di]>x.fn&&(x.ln&&T[di]>x.ln?(S=ji(T[x.fn]||""),A[h_]=parseInt(ji(T[x.ln]||""))||0):S=ji(T[x.fn]||"")),S&&Sge(A,S)}s(Rge,"_handleFilename");function EJe(A){var x=!1;if(A&&he(A)){var T=ji(A);T&&(x=sJe.test(T))}return x}s(EJe,"_isStackFrame");var kge=Gt({level:1,method:1,assembly:0,fileName:0,line:0});function IJe(A,x){var T,S;if(A&&he(A)&&ji(A)){S=(T={},T[x7]=kge,T.level=x,T.assembly=ji(A),T.method=xge,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var D=0;D<Ege[di];){var L=Ege[D];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var Q=A[Vk](L.re);if(Q&&Q[di]>=L.len){L.m&&(S.method=ji(Q[L.m]||xge)),L.hdl?L.hdl(S,L,Q):L.fn&&(L.ln?(S[s1]=ji(Q[L.fn]||""),S[h_]=parseInt(ji(Q[L.ln]||""))||0):Sge(S,Q[L.fn]||""));break}D++}}return Bge(S)}s(IJe,"_extractStackFrame");function TJe(A){var x,T=(x={},x[x7]=kge,x.level=A.level,x.method=A.method,x.assembly=A[C7],x.fileName=A[s1],x.line=A[h_],x.sizeInBytes=0,x);return Bge(T)}s(TJe,"_stackFrameFromInterface");function Bge(A){var x=oJe;return A&&(x+=A.method[di],x+=A.assembly[di],x+=A.fileName[di],x+=A.level.toString()[di],x+=A.line.toString()[di],A[g7]=x),A}s(Bge,"_populateFrameSizeInBytes");function wJe(A){return{level:A.level,method:A.method,assembly:A[C7],fileName:A[s1],line:A[h_]}}s(wJe,"_parsedFrameToInterface");var _Je=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),Yk=function(){function A(x,T,S,D,L,Q,J,se,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new _Je;Le[qKe]=D>0?D:void 0,Le.max=isNaN(Q)||Q===null?void 0:Q,Le.min=isNaN(L)||L===null?void 0:L,Le[sx]=Pc(x,T)||ox,Le.value=S,Le.stdDev=isNaN(J)||J===null?void 0:J,Te.metrics=[Le],Te[Jh]=LE(x,se),Te[o1]=FE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),Kk="";function Pge(A){(isNaN(A)||A<0)&&(A=0),A=xK(A);var x=Kk+A%1e3,T=Kk+UA(A/1e3)%60,S=Kk+UA(A/(1e3*60))%60,D=Kk+UA(A/(1e3*60*60))%24,L=UA(A/(1e3*60*60*24));return x=x[di]===1?"00"+x:x[di]===2?"0"+x:x,T=T[di]<2?"0"+T:T,S=S[di]<2?"0"+S:S,D=D[di]<2?"0"+D:D,(L>0?L+".":Kk)+D+":"+S+":"+T+"."+x}s(Pge,"msToTimeSpan");var I7=function(){function A(x,T,S,D,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var se=this;se.ver=2,se.id=HKe(x,J),se.url=CJ(x,S),se[sx]=Pc(x,T)||ox,isNaN(D)||(se[v7]=Pge(D)),se[Jh]=LE(x,L),se[o1]=FE(x,Q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),T7=function(){function A(x,T,S,D,L,Q,J,se,Ce,Te,Le,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Fe=this;Fe.ver=2,Fe.id=T,Fe[v7]=Pge(L),Fe.success=Q,Fe.resultCode=J+"",Fe.type=Pc(x,Ce);var He=JKe(x,S,se,D);Fe.data=CJ(x,D)||He.data,Fe.target=Pc(x,He.target),Te&&(Fe.target="".concat(Fe.target," | ").concat(Te)),Fe[sx]=Pc(x,He[sx]),Fe[Jh]=LE(x,Le),Fe[o1]=FE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),w7=function(){function A(x,T,S,D,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Q=this;Q.ver=2,T=T||ox,Q[h7]=fge(x,T),Q[Jh]=LE(x,D),Q[o1]=FE(x,L),S&&(Q[zk]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),_7=function(){function A(x,T,S,D,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var se=this;se.ver=2,se.url=CJ(x,S),se[sx]=Pc(x,T)||ox,se[Jh]=LE(x,L),se[o1]=FE(x,Q),J&&(se.domProcessing=J.domProcessing,se[v7]=J[v7],se.networkConnect=J.networkConnect,se.perfTotal=J.perfTotal,se.receivedResponse=J.receivedResponse,se.sentRequest=J.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),QE=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),SJe=Tw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ax(A){var x="ai."+A+".";return function(T){return x+T}}s(ax,"_aiNameFunc");var Jk=ax("application"),cl=ax("device"),S7=ax("location"),C_=ax("operation"),_J=ax("session"),lx=ax("user"),OE=ax("cloud"),Xk=ax("internal"),Dge=function(A){uE(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(FK({applicationVersion:Jk("ver"),applicationBuild:Jk("build"),applicationTypeId:Jk("typeId"),applicationId:Jk("applicationId"),applicationLayer:Jk("layer"),deviceId:cl("id"),deviceIp:cl("ip"),deviceLanguage:cl("language"),deviceLocale:cl("locale"),deviceModel:cl("model"),deviceFriendlyName:cl("friendlyName"),deviceNetwork:cl("network"),deviceNetworkName:cl("networkName"),deviceOEMName:cl("oemName"),deviceOS:cl("os"),deviceOSVersion:cl("osVersion"),deviceRoleInstance:cl("roleInstance"),deviceRoleName:cl("roleName"),deviceScreenResolution:cl("screenResolution"),deviceType:cl("type"),deviceMachineName:cl("machineName"),deviceVMName:cl("vmName"),deviceBrowser:cl("browser"),deviceBrowserVersion:cl("browserVersion"),locationIp:S7("ip"),locationCountry:S7("country"),locationProvince:S7("province"),locationCity:S7("city"),operationId:C_("id"),operationName:C_("name"),operationParentId:C_("parentId"),operationRootId:C_("rootId"),operationSyntheticSource:C_("syntheticSource"),operationCorrelationVector:C_("correlationVector"),sessionId:_J("id"),sessionIsFirst:_J("isFirst"),sessionIsNew:_J("isNew"),userAccountAcquisitionDate:lx("accountAcquisitionDate"),userAccountId:lx("accountId"),userAgent:lx("userAgent"),userId:lx("id"),userStoreRegion:lx("storeRegion"),userAuthUserId:lx("authUserId"),userAnonymousUserAcquisitionDate:lx("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:lx("authUserAcquisitionDate"),cloudName:OE("name"),cloudRole:OE("role"),cloudRoleVer:OE("roleVer"),cloudRoleInstance:OE("roleInstance"),cloudEnvironment:OE("environment"),cloudLocation:OE("location"),cloudDeploymentUnit:OE("deploymentUnit"),internalNodeName:Xk("nodeName"),internalSdkVersion:Xk("sdkVersion"),internalAgentVersion:Xk("agentVersion"),internalSnippet:Xk("snippet"),internalSdkSrc:Xk("sdkSrc")})),_l=new Dge;function Nge(A,x){UKe(A,null,null,x)}s(Nge,"_disableEvents");function RJe(A){var x=eC(),T=Ih(),S=!1,D=[],L=1;T&&!te(T.onLine)&&!T.onLine&&(L=2);var Q=0,J=Ye(),se=oge($p("OfflineListener"),A);try{if(Te(Mp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var mr=!1;return Vt&&(mr=sge(Vt,"online",lt,se),mr&&sge(Vt,"offline",et,se)),mr}s(Te,"_enableEvents");function Le(){return J}s(Le,"_isOnline");function Ye(){return!(Q===2||L===2)}s(Ye,"calCurrentState");function Fe(){var Vt=Ye();J!==Vt&&(J=Vt,Or(D,function(mr){var Gn={isOnline:J,rState:L,uState:Q};try{mr(Gn)}catch{}}))}s(Fe,"listnerNoticeCheck");function He(Vt){Q=Vt,Fe()}s(He,"setOnlineState");function lt(){L=1,Fe()}s(lt,"_setOnline");function et(){L=2,Fe()}s(et,"_setOffline");function gt(){var Vt=Mp();if(Vt&&S){if(Nge(Vt,se),x){var mr=x.body||x;O(mr.ononline)||Nge(mr,se)}S=!1}}s(gt,"_unload");function Nt(Vt){return D.push(Vt),{rm:s(function(){var mr=D.indexOf(Vt);if(mr>-1)return D.splice(mr,1)},"rm")}}return s(Nt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:gt,addListener:Nt,setOnlineState:He}}s(RJe,"createOfflineListener");var kJe="AppInsightsChannelPlugin",UE="duration",nc="tags",SJ="deviceType",Xd="data",a1="name",Zk="traceID",hi="length",eB="stringify",qE="measurements",Xh="dataType",WE="envelopeType",GE="toString",HE="enqueue",jE="count",l1="push",RJ="emitLineDelimitedJson",x_="clear",R7="markAsSent",tB="clearSent",kJ="bufferOverride",rB="BUFFER_KEY",cx="SENT_BUFFER_KEY",v_="concat",nB="MAX_BUFFER_SIZE",iB="triggerSend",Dc="diagLog",BJ="initialize",oB="_sender",sB="endpointUrl",aB="instrumentationKey",PJ="customHeaders",Lge="maxBatchSizeInBytes",DJ="onunloadDisableBeacon",NJ="isBeaconApiDisabled",Fge="alwaysUseXhrOverride",Mge="enableSessionStorageBuffer",Zh="_buffer",Qge="onunloadDisableFetch",Oge="disableSendBeaconSplit",k7="getSenderInst",VE="_onError",LJ="_onPartialSuccess",B7="_onSuccess",FJ="itemsReceived",MJ="itemsAccepted",QJ="baseType",P7="sampleRate",BJe="getHashCodeScore",OJ="baseType",Ss="baseData",Sl="properties",Uge="true";function Ca(A,x,T){return qh(A,x,T,ce)}s(Ca,"_setValueIf");function PJe(A,x,T){var S=T[nc]=T[nc]||{},D=x.ext=x.ext||{},L=x[nc]=x[nc]||[],Q=D.user;Q&&(Ca(S,_l.userAuthUserId,Q.authId),Ca(S,_l.userId,Q.id||Q.localId));var J=D.app;J&&Ca(S,_l.sessionId,J.sesId);var se=D.device;se&&(Ca(S,_l.deviceId,se.id||se.localId),Ca(S,_l[SJ],se.deviceClass),Ca(S,_l.deviceIp,se.ip),Ca(S,_l.deviceModel,se.model),Ca(S,_l[SJ],se[SJ]));var Ce=x.ext.web;if(Ce){Ca(S,_l.deviceLanguage,Ce.browserLang),Ca(S,_l.deviceBrowserVersion,Ce.browserVer),Ca(S,_l.deviceBrowser,Ce.browser);var Te=T[Xd]=T[Xd]||{},Le=Te[Ss]=Te[Ss]||{},Ye=Le[Sl]=Le[Sl]||{};Ca(Ye,"domain",Ce.domain),Ca(Ye,"isManual",Ce.isManual?Uge:null),Ca(Ye,"screenRes",Ce.screenRes),Ca(Ye,"userConsent",Ce.userConsent?Uge:null)}var Fe=D.os;Fe&&(Ca(S,_l.deviceOS,Fe[a1]),Ca(S,_l.deviceOSVersion,Fe.osVer));var He=D.trace;He&&(Ca(S,_l.operationParentId,He.parentID),Ca(S,_l.operationName,Pc(A,He[a1])),Ca(S,_l.operationId,He[Zk]));for(var lt={},et=L[hi]-1;et>=0;et--){var gt=L[et];ne(gt,function(Vt,mr){lt[Vt]=mr}),L.splice(et,1)}ne(L,function(Vt,mr){lt[Vt]=mr});var Nt=Up(Up({},S),lt);Nt[_l.internalSdkVersion]||(Nt[_l.internalSdkVersion]=Pc(A,"javascript:".concat(DJe.Version),64)),T[nc]=Ak(Nt)}s(PJe,"_extractPartAExtensions");function ux(A,x,T){te(A)||ne(A,function(S,D){ft(D)?T[S]=D:he(D)?x[S]=D:OC()&&(x[S]=gu()[eB](D))})}s(ux,"_extractPropsAndMeasurements");function $E(A,x){te(A)||ne(A,function(T,S){A[T]=S||x})}s($E,"_convertPropsUndefinedToCustomDefinedValue");function zE(A,x,T,S){var D=new iJe(A,S,x);Ca(D,"sampleRate",T[age]),(T[Ss]||{}).startTime&&(D.time=gE(T[Ss].startTime)),D.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return D[a1]=D[a1].replace("{0}",L),PJe(A,T,D),T[nc]=T[nc]||[],Ak(D)}s(zE,"_createEnvelope");function YE(A,x){te(x[Ss])&&Tr(A,1,46,"telemetryItem.baseData cannot be null.")}s(YE,"EnvelopeCreatorInit");var DJe={Version:"3.3.6"};function NJe(A,x,T){YE(A,x);var S=x[Ss][qE]||{},D=x[Ss][Sl]||{};ux(x[Xd],D,S),te(T)||$E(D,T);var L=x[Ss];if(te(L))return n_(A,"Invalid input for dependency data"),null;var Q=L[Sl]&&L[Sl][lge]?L[Sl][lge]:"GET",J=new T7(A,L.id,L.target,L[a1],L[UE],L.success,L.responseCode,Q,L.type,L.correlationContext,D,S),se=new QE(T7[Xh],J);return zE(A,T7[WE],x,se)}s(NJe,"DependencyEnvelopeCreator");function qge(A,x,T){YE(A,x);var S={},D={};x[OJ]!==A_[Xh]&&(S.baseTypeSource=x[OJ]),x[OJ]===A_[Xh]?(S=x[Ss][Sl]||{},D=x[Ss][qE]||{}):x[Ss]&&ux(x[Ss],S,D),ux(x[Xd],S,D),te(T)||$E(S,T);var L=x[Ss][a1],Q=new A_(A,L,S,D),J=new QE(A_[Xh],Q);return zE(A,A_[WE],x,J)}s(qge,"EventEnvelopeCreator");function LJe(A,x,T){YE(A,x);var S=x[Ss][qE]||{},D=x[Ss][Sl]||{};ux(x[Xd],D,S),te(T)||$E(D,T);var L=x[Ss],Q=E7.CreateFromInterface(A,L,D,S),J=new QE(E7[Xh],Q);return zE(A,E7[WE],x,J)}s(LJe,"ExceptionEnvelopeCreator");function FJe(A,x,T){YE(A,x);var S=x[Ss],D=S[Sl]||{},L=S[qE]||{};ux(x[Xd],D,L),te(T)||$E(D,T);var Q=new Yk(A,S[a1],S.average,S.sampleCount,S.min,S.max,S.stdDev,D,L),J=new QE(Yk[Xh],Q);return zE(A,Yk[WE],x,J)}s(FJe,"MetricEnvelopeCreator");function MJe(A,x,T){YE(A,x);var S,D=x[Ss];!te(D)&&!te(D[Sl])&&!te(D[Sl][UE])?(S=D[Sl][UE],delete D[Sl][UE]):!te(x[Xd])&&!te(x[Xd][UE])&&(S=x[Xd][UE],delete x[Xd][UE]);var L=x[Ss],Q;((x.ext||{}).trace||{})[Zk]&&(Q=x.ext.trace[Zk]);var J=L.id||Q,se=L[a1],Ce=L.uri,Te=L[Sl]||{},Le=L[qE]||{};if(te(L.refUri)||(Te.refUri=L.refUri),te(L.pageType)||(Te.pageType=L.pageType),te(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[GE]()),!te(L[Sl])){var Ye=L[Sl];ne(Ye,function(lt,et){Te[lt]=et})}ux(x[Xd],Te,Le),te(T)||$E(Te,T);var Fe=new I7(A,se,Ce,S,Te,Le,J),He=new QE(I7[Xh],Fe);return zE(A,I7[WE],x,He)}s(MJe,"PageViewEnvelopeCreator");function QJe(A,x,T){YE(A,x);var S=x[Ss],D=S[a1],L=S.uri||S.url,Q=S[Sl]||{},J=S[qE]||{};ux(x[Xd],Q,J),te(T)||$E(Q,T);var se=new _7(A,D,L,void 0,Q,J,S),Ce=new QE(_7[Xh],se);return zE(A,_7[WE],x,Ce)}s(QJe,"PageViewPerformanceEnvelopeCreator");function OJe(A,x,T){YE(A,x);var S=x[Ss].message,D=x[Ss].severityLevel,L=x[Ss][Sl]||{},Q=x[Ss][qE]||{};ux(x[Xd],L,Q),te(T)||$E(L,T);var J=new w7(A,S,D,L,Q),se=new QE(w7[Xh],J);return zE(A,w7[WE],x,se)}s(OJe,"TraceEnvelopeCreator");var Wge=function(){function A(x,T){var S=[],D=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(Q){return S=Q,S},tc(A,this,function(Q){Q[HE]=function(J){if(Q[jE]()>=T.eventsLimitInMem){D||(Tr(x,2,105,"Maximum in-memory buffer size reached: "+Q[jE](),!0),D=!0);return}J.cnt=J.cnt||0,!(!te(L)&&J.cnt>L)&&S[l1](J)},Q[jE]=function(){return S[hi]},Q.size=function(){for(var J=S[hi],se=0;se<S[hi];se++)J+=S[se].item[hi];return T[RJ]||(J+=2),J},Q[x_]=function(){S=[],D=!1},Q.getItems=function(){return S.slice(0)},Q.batchPayloads=function(J){if(J&&J[hi]>0){var se=[];Or(J,function(Te){se[l1](Te.item)});var Ce=T[RJ]?se.join(`
`):"["+se.join(",")+"]";return Ce}return null},Q.createNew=function(J,se,Ce){var Te=S.slice(0);J=J||x,se=se||{};var Le=Ce?new Gge(J,se):new UJ(J,se);return Or(Te,function(Ye){Le[HE](Ye)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),UJ=function(A){uE(x,A);function x(T,S){var D=A.call(this,T,S)||this;return tc(x,D,function(L,Q){L[R7]=function(J){Q[x_]()},L[tB]=function(J){}}),D}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(Wge),UJe=["AI_buffer","AI_sentBuffer"],Gge=function(A){uE(x,A);function x(S,D){var L=A.call(this,S,D)||this,Q=!1,J=D?.namePrefix,se=D[kJ]||{getItem:ZKe,setItem:eJe},Ce=se.getItem,Te=se.setItem,Le=D.maxRetryCnt;return tc(x,L,function(Ye,Fe){var He=mr(x[rB]),lt=mr(x[cx]),et=xi(),gt=lt[v_](et),Nt=Ye._set(He[v_](gt));Nt[hi]>x[nB]&&(Nt[hi]=x[nB]),Ci(x[cx],[]),Ci(x[rB],Nt),Ye[HE]=function(cn){if(Ye[jE]()>=x[nB]){Q||(Tr(S,2,67,"Maximum buffer size reached: "+Ye[jE](),!0),Q=!0);return}cn.cnt=cn.cnt||0,!(!te(Le)&&cn.cnt>Le)&&(Fe[HE](cn),Ci(x[rB],Ye._get()))},Ye[x_]=function(){Fe[x_](),Ci(x[rB],Ye._get()),Ci(x[cx],[]),Q=!1},Ye[R7]=function(cn){Ci(x[rB],Ye._set(Vt(cn,Ye._get())));var Fr=mr(x[cx]);Fr instanceof Array&&cn instanceof Array&&(Fr=Fr[v_](cn),Fr[hi]>x[nB]&&(Tr(S,1,67,"Sent buffer reached its maximum size: "+Fr[hi],!0),Fr[hi]=x[nB]),Ci(x[cx],Fr))},Ye[tB]=function(cn){var Fr=mr(x[cx]);Fr=Vt(cn,Fr),Ci(x[cx],Fr)},Ye.createNew=function(cn,Fr,vi){vi=!!vi;var Rs=Ye._get().slice(0),Oo=mr(x[cx]).slice(0);cn=cn||S,Fr=Fr||{},Ye[x_]();var Ft=vi?new x(cn,Fr):new UJ(cn,Fr);return Or(Rs,function(Mr){Ft[HE](Mr)}),vi&&Ft[R7](Oo),Ft};function Vt(cn,Fr){var vi=[],Rs=[];return Or(cn,function(Oo){Rs[l1](Oo.item)}),Or(Fr,function(Oo){!Ne(Oo)&&pu(Rs,Oo.item)===-1&&vi[l1](Oo)}),vi}s(Vt,"_removePayloadsFromBuffer");function mr(cn){var Fr=cn;return Fr=J?J+"_"+Fr:Fr,Gn(Fr)}s(mr,"_getBuffer");function Gn(cn){try{var Fr=Ce(S,cn);if(Fr){var vi=gu().parse(Fr);if(he(vi)&&(vi=gu().parse(vi)),vi&&Je(vi))return vi}}catch(Rs){Tr(S,1,42," storage key: "+cn+", "+al(Rs),{exception:Lt(Rs)})}return[]}s(Gn,"_getBufferBase");function Ci(cn,Fr){var vi=cn;try{vi=J?J+"_"+vi:vi;var Rs=JSON[eB](Fr);Te(S,vi,Rs)}catch(Oo){Te(S,vi,JSON[eB]([])),Tr(S,2,41," storage key: "+vi+", "+al(Oo)+". Buffer cleared",{exception:Lt(Oo)})}}s(Ci,"_setBuffer");function xi(){var cn=[];try{return Or(UJe,function(Fr){var vi=ho(Fr);if(cn=cn[v_](vi),J){var Rs=J+"_"+Fr,Oo=ho(Rs);cn=cn[v_](Oo)}}),cn}catch(Fr){Tr(S,2,41,"Transfer events from previous buffers: "+al(Fr)+". previous Buffer items can not be removed",{exception:Lt(Fr)})}return[]}s(xi,"_getPreviousEvents");function ho(cn){try{var Fr=Gn(cn),vi=[];return Or(Fr,function(Rs){var Oo={item:Rs,cnt:0};vi[l1](Oo)}),tJe(S,cn),vi}catch{}return[]}s(ho,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(Wge),qJe=function(){function A(x){tc(A,this,function(T){T.serialize=function(Q){var J=S(Q,"root");try{return gu()[eB](J)}catch(se){Tr(x,1,48,se&&Ne(se[GE])?se[GE]():"Error serializing object",null,!0)}};function S(Q,J){var se="__aiCircularRefCheck",Ce={};if(!Q)return Tr(x,1,48,"cannot serialize object because it is null or undefined",{name:J},!0),Ce;if(Q[se])return Tr(x,2,50,"Circular reference detected while serializing object",{name:J},!0),Ce;if(!Q.aiDataContract){if(J==="measurements")Ce=L(Q,"number",J);else if(J==="properties")Ce=L(Q,"string",J);else if(J==="tags")Ce=L(Q,"string",J);else if(Je(Q))Ce=D(Q,J);else{Tr(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:J},!0);try{gu()[eB](Q),Ce=Q}catch(Te){Tr(x,1,48,Te&&Ne(Te[GE])?Te[GE]():"Error serializing object",null,!0)}}return Ce}return Q[se]=!0,ne(Q.aiDataContract,function(Te,Le){var Ye=Ne(Le)?Le()&1:Le&1,Fe=Ne(Le)?Le()&4:Le&4,He=Le&2,lt=Q[Te]!==void 0,et=Se(Q[Te])&&Q[Te]!==null;if(Ye&&!lt&&!He)Tr(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:J});else if(!Fe){var gt=void 0;et?He?gt=D(Q[Te],Te):gt=S(Q[Te],Te):gt=Q[Te],gt!==void 0&&(Ce[Te]=gt)}}),delete Q[se],Ce}s(S,"_serializeObject");function D(Q,J){var se;if(Q)if(!Je(Q))Tr(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:J},!0);else{se=[];for(var Ce=0;Ce<Q[hi];Ce++){var Te=Q[Ce],Le=S(Te,J+"["+Ce+"]");se[l1](Le)}}return se}s(D,"_serializeArray");function L(Q,J,se){var Ce;return Q&&(Ce={},ne(Q,function(Te,Le){if(J==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[GE]?Ce[Te]=Le[GE]():Ce[Te]="invalid field: toString() is not defined.";else if(J==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ye=parseFloat(Le);Ce[Te]=Ye}else Ce[Te]="invalid field: "+se+" is of unknown type.",Tr(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),WJe=8,GJe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[hi]<WJe;)x=x[v_](x);for(var T=5381,S=0;S<x[hi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),HJe=function(){function A(){var x=this,T=new GJe,S=new Dge;x.getSamplingScore=function(D){var L=0;return D[nc]&&D[nc][S.userId]?L=T.getHashCodeScore(D[nc][S.userId]):D.ext&&D.ext.user&&D.ext.user.id?L=T[BJe](D.ext.user.id):D[nc]&&D[nc][S.operationId]?L=T.getHashCodeScore(D[nc][S.operationId]):D.ext&&D.ext.telemetryTrace&&D.ext.telemetryTrace[Zk]?L=T.getHashCodeScore(D.ext.telemetryTrace[Zk]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),jJe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||_E(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[P7]=x,this.samplingScoreGenerator=new HJe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[P7],S=!1;return T==null||T>=100||x.baseType===Yk[Xh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),os,c1,eg=void 0,Hge="",VJe=65e3;function jge(A){try{return A.responseText}catch{}return null}s(jge,"_getResponseText");function $Je(A){return A&&A.sendPOST}s($Je,"isOverrideFn");var Vge=Xt((os={endpointUrl:Bk(ce,mJ+p_)},os[RJ]=ff(),os.maxBatchInterval=15e3,os[Lge]=102400,os.disableTelemetry=ff(),os[Mge]=ff(!0),os.isRetryDisabled=ff(),os[NJ]=ff(!0),os[Oge]=ff(!0),os.disableXhr=ff(),os[Qge]=ff(),os[DJ]=ff(),os[aB]=eg,os.namePrefix=eg,os.samplingPercentage=Bk(zJe,100),os[PJ]=eg,os.convertUndefined=eg,os.eventsLimitInMem=1e4,os[kJ]=!1,os.httpXHROverride={isVal:$Je,v:eg},os[Fge]=ff(),os.transports=eg,os.retryCodes=eg,os.maxRetryCnt={isVal:ft,v:10},os));function zJe(A){return!isNaN(A)&&A>0&&A<=100}s(zJe,"_chkSampling");var YJe=(c1={},c1[A_.dataType]=qge,c1[w7.dataType]=OJe,c1[I7.dataType]=MJe,c1[_7.dataType]=QJe,c1[E7.dataType]=LJe,c1[Yk.dataType]=FJe,c1[T7.dataType]=NJe,c1),$ge=function(A){uE(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=kJe;var S,D,L,Q,J,se,Ce,Te=0,Le,Ye,Fe,He,lt,et,gt,Nt,Vt,mr,Gn,Ci,xi,ho,cn,Fr,vi,Rs,Oo,Ft,Mr,oo,bt,In,js,go,Rl;return tc(x,T,function(st,Ua){Yge(),st.pause=function(){mx(),L=!0},st.resume=function(){L&&(L=!1,D=null,To(),T_())},st.flush=function(Ue,mt,Zt){if(Ue===void 0&&(Ue=!0),!L){mx();try{return st[iB](Ue,null,Zt||1)}catch(Sr){Tr(st[Dc](),1,22,"flush failed, telemetry will not be collected: "+al(Sr),{exception:Lt(Sr)})}}},st.onunloadFlush=function(){if(!L)if(gt||Ft)try{return st[iB](!0,nd,2)}catch(Ue){Tr(st[Dc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+al(Ue),{exception:Lt(Ue)})}else st.flush(!1)},st.addHeader=function(Ue,mt){Ce[Ue]=mt},st[BJ]=function(Ue,mt,Zt,Sr){st.isInitialized()&&Tr(st[Dc](),1,28,"Sender is already initialized"),Ua[BJ](Ue,mt,Zt,Sr);var Dn=st.identifier;J=new qJe(mt.logger),S=0,D=null,st[oB]=null,se=0;var pn=st[Dc]();Fe=oge($p("Sender"),mt.evtNamespace&&mt.evtNamespace()),Ye=RJe(Fe),st._addHook(zp(Ue,function($i){var xa=$i.cfg;xa.storagePrefix&&XKe(xa.storagePrefix);var Zd=rx(null,xa,mt),li=Zd.getExtCfg(Dn,Vge),Kge=li[sB];if(He&&Kge===He){var GJ=xa[sB];GJ&&GJ!==Kge&&(li[sB]=GJ)}vt(li[aB])&&(li[aB]=xa[aB]),ze(st,"_senderConfig",{g:s(function(){return li},"g")}),lt!==li[sB]&&(He=lt=li[sB]),mt.activeStatus()===Nh.PENDING?st.pause():mt.activeStatus()===Nh.ACTIVE&&st.resume(),mr&&mr!==li[PJ]&&Or(mr,function(oc){delete Ce[oc.header]}),et=li[Lge],gt=(li[DJ]===!1||li[NJ]===!1)&&Gh(),Nt=li[DJ]===!1&&Gh(),Vt=li[NJ]===!1&&Gh(),Ft=li[Fge],Mr=!!li.disableXhr,Rl=li.retryCodes;var HJ=li[kJ],w_=!!li[Mge]&&(!!HJ||Cge()),Jge=li.namePrefix,ZJe=w_!==Fr||w_&&Rs!==Jge||w_&&vi!==HJ;if(st[Zh]){if(ZJe)try{st[Zh]=st[Zh].createNew(pn,li,w_)}catch(oc){Tr(st[Dc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+al(oc),{exception:Lt(oc)})}To()}else st[Zh]=w_?new Gge(pn,li):new UJ(pn,li);Rs=Jge,Fr=w_,vi=HJ,oo=!li[Qge]&&bE(!0),js=!!li[Oge],st._sample=new jJe(li.samplingPercentage,pn),Ci=li[aB],!vt(Ci)&&!zge(Ci,xa)&&Tr(pn,1,100,"Invalid Instrumentation key "+Ci),mr=li[PJ],he(He)&&!gge(He)&&mr&&mr[hi]>0?Or(mr,function(oc){T.addHeader(oc.header,oc.value)}):mr=null,Oo=li.enableSendPromise;var Xge=kl();go?go.SetConfig(Xge):(go=new Oa,go[BJ](Xge,pn));var F7=li.httpXHROverride,M7=null,dB=null,eXe=BN([3,1,2],li.transports);M7=go&&go[k7](eXe,!1);var jJ=go&&go.getFallbackInst();bt=s(function(oc,KE){return kr(jJ,oc,KE)},"_xhrSend"),In=s(function(oc,KE){return kr(jJ,oc,KE,!1)},"_fallbackSend"),M7=Ft?F7:M7||F7||jJ,st[oB]=function(oc,KE){return kr(M7,oc,KE)},oo&&(Le=I_);var VJ=BN([3,1],li.unloadTransports);oo||(VJ=VJ.filter(function(oc){return oc!==2})),dB=go&&go[k7](VJ,!0),dB=Ft?F7:dB||F7,(Ft||li.unloadTransports||!Le)&&dB&&(Le=s(function(oc,KE){return kr(dB,oc,KE)},"_syncUnloadSender")),Le||(Le=bt),Gn=li.disableTelemetry,xi=li.convertUndefined||eg,ho=li.isRetryDisabled,cn=li.maxBatchInterval}))},st.processTelemetry=function(Ue,mt){mt=st._getTelCtx(mt);var Zt=mt[Dc]();try{var Sr=Jp(Ue,Zt);if(!Sr)return;var Dn=px(Ue,Zt);if(!Dn)return;var pn=J.serialize(Dn),$i=st[Zh];To(pn);var xa={item:pn,cnt:0};$i[HE](xa),T_()}catch(Zd){Tr(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+al(Zd),{exception:Lt(Zd)})}st.processNext(Ue,mt)},st.isCompletelyIdle=function(){return!L&&Te===0&&st._buffer[jE]()===0},st.getOfflineListener=function(){return Ye},st._xhrReadyStateChange=function(Ue,mt,Zt){if(!Zp(mt))return gf(Ue,mt,Zt)},st[iB]=function(Ue,mt,Zt){Ue===void 0&&(Ue=!0);var Sr;if(!L)try{var Dn=st[Zh];if(Gn)Dn[x_]();else if(Dn[jE]()>0){var pn=Dn.getItems();L7(Zt||0,Ue),mt?Sr=mt.call(st,pn,Ue):Sr=st[oB](pn,Ue)}mx()}catch(xa){var $i=UC();(!$i||$i>9)&&Tr(st[Dc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+al(xa),{exception:Lt(xa)})}return Sr},st.getOfflineSupport=function(){return{getUrl:s(function(){return He},"getUrl"),createPayload:dt,serialize:ks,batch:ic,shouldProcess:s(function(Ue){return!!Jp(Ue)},"shouldProcess")}},st._doTeardown=function(Ue,mt){st.onunloadFlush(),zC(Ye,!1),Yge()},st[VE]=function(Ue,mt,Zt){if(!Zp(Ue))return yu(Ue,mt)},st[LJ]=function(Ue,mt){if(!Zp(Ue))return dx(Ue,mt)},st[B7]=function(Ue,mt){if(!Zp(Ue))return Kp(Ue)},st._xdrOnLoad=function(Ue,mt){if(!Zp(mt))return Vs(Ue,mt)};function Vs(Ue,mt){var Zt=jge(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,st[B7](mt,0);else{var Sr=Rr(Zt);Sr&&Sr[FJ]&&Sr[FJ]>Sr[MJ]&&!ho?st[LJ](mt,Sr):st[VE](mt,kN(Ue))}}s(Vs,"_xdrOnLoad");function kl(){try{var Ue={xdrOnComplete:s(function(Zt,Sr,Dn){var pn=fx(Dn);if(pn)return Vs(Zt,pn)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,Sr,Dn,pn){var $i=fx(pn);if($i)return ss(Zt.status,$i,Zt.url,$i[hi],Zt.statusText,Dn||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,Sr,Dn){var pn=fx(Dn);if(pn)return gf(Zt,pn,pn[hi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,Sr,Dn){return Xp(Zt,Sr,Dn)},"beaconOnRetry")},mt={enableSendPromise:Oo,isOneDs:!1,disableCredentials:!1,disableXhr:Mr,disableBeacon:!Vt,disableBeaconSync:!Nt,senderOnCompleteCallBack:Ue};return mt}catch{}return null}s(kl,"_getSendPostMgrConfig");function gf(Ue,mt,Zt){Ue.readyState===4&&ss(Ue.status,mt,Ue.responseURL,Zt,Vw(Ue),jge(Ue)||Ue.response)}s(gf,"_xhrReadyStateChange");function yu(Ue,mt,Zt){Tr(st[Dc](),2,26,"Failed to send telemetry.",{message:mt}),st._buffer&&st._buffer[tB](Ue)}s(yu,"_onError");function dx(Ue,mt){for(var Zt=[],Sr=[],Dn=mt.errors.reverse(),pn=0,$i=Dn;pn<$i.length;pn++){var xa=$i[pn],Zd=Ue.splice(xa.index,1)[0];hx(xa.statusCode)?Sr[l1](Zd):Zt[l1](Zd)}Ue[hi]>0&&st[B7](Ue,mt[MJ]),Zt[hi]>0&&st[VE](Zt,Vw(null,["partial success",mt[MJ],"of",mt.itemsReceived].join(" "))),Sr[hi]>0&&(uB(Sr),Tr(st[Dc](),2,40,"Partial success. Delivered: "+Ue[hi]+", Failed: "+Zt[hi]+". Will retry to send "+Sr[hi]+" our of "+mt[FJ]+" items"))}s(dx,"_onPartialSuccess");function Kp(Ue,mt){st._buffer&&st._buffer[tB](Ue)}s(Kp,"_onSuccess");function fx(Ue){try{if(Ue){var mt=Ue,Zt=mt.oriPayload;return Zt&&Zt[hi]?Zt:null}}catch{}return null}s(fx,"_getPayloadArr");function Jp(Ue,mt){if(Gn)return!1;if(!Ue)return mt&&Tr(mt,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[QJ])return mt&&Tr(mt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[QJ]||(Ue[QJ]="EventData"),!st[oB])return mt&&Tr(mt,1,28,"Sender was not initialized"),!1;if(dr(Ue))Ue[age]=st._sample[P7];else return mt&&Tr(mt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:st._sample[P7]}),!1;return!0}s(Jp,"_validate");function px(Ue,mt){var Zt=Ue.iKey||Ci,Sr=x.constructEnvelope(Ue,Zt,mt,xi);if(!Sr){Tr(mt,1,47,"Unable to create an AppInsights envelope");return}var Dn=!1;if(Ue[nc]&&Ue[nc][pJ]&&(Or(Ue[nc][pJ],function(pn){try{pn&&pn(Sr)===!1&&(Dn=!0,n_(mt,"Telemetry processor check returns false"))}catch($i){Tr(mt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+al($i),{exception:Lt($i)},!0)}}),delete Ue[nc][pJ]),!Dn)return Sr}s(px,"_getEnvelope");function ks(Ue){var mt=Hge,Zt=st[Dc]();try{var Sr=Jp(Ue,Zt),Dn=null;Sr&&(Dn=px(Ue,Zt)),Dn&&(mt=J.serialize(Dn))}catch{}return mt}s(ks,"_serialize");function ic(Ue){var mt=Hge;return Ue&&Ue[hi]&&(mt="["+Ue.join(",")+"]"),mt}s(ic,"_batch");function dt(Ue){var mt=vo();return{urlString:He,data:Ue,headers:mt}}s(dt,"_createPayload");function dr(Ue){return st._sample.isSampledIn(Ue)}s(dr,"_isSampledIn");function Bn(Ue,mt,Zt,Sr){mt===200&&Ue?st._onSuccess(Ue,Ue[hi]):Sr&&st[VE](Ue,Sr)}s(Bn,"_getOnComplete");function kr(Ue,mt,Zt,Sr){Sr===void 0&&(Sr=!0);var Dn=s(function(xa,Zd,li){return Bn(mt,xa,Zd,li)},"onComplete"),pn=Pn(mt),$i=Ue&&Ue.sendPOST;return $i&&pn?(Sr&&st._buffer[R7](mt),$i(pn,Dn,!Zt)):null}s(kr,"_doSend");function Pn(Ue){if(Je(Ue)&&Ue[hi]>0){var mt=st[Zh].batchPayloads(Ue),Zt=vo(),Sr={data:mt,urlString:He,headers:Zt,disableXhrSync:Mr,disableFetchKeepAlive:!oo,oriPayload:Ue};return Sr}return null}s(Pn,"_getPayload");function vo(){try{var Ue=Ce||{};return gge(He)&&(Ue[cge[6]]=cge[7]),Ue}catch{}return null}s(vo,"_getHeaders");function To(Ue){var mt=Ue?Ue[hi]:0;return st[Zh].size()+mt>et?((!Ye||Ye.isOnline())&&st[iB](!0,null,10),!0):!1}s(To,"_checkMaxSize");function ss(Ue,mt,Zt,Sr,Dn,pn){var $i=null;if(st._appId||($i=Rr(pn),$i&&$i.appId&&(st._appId=$i.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Nc(Zt)){st[VE](mt,Dn);return}if(Ye&&!Ye.isOnline()){if(!ho){var xa=10;uB(mt,xa),Tr(st[Dc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(mt.length," items."))}return}!ho&&hx(Ue)?(uB(mt),Tr(st[Dc](),2,40,". Response code "+Ue+". Will retry to send "+mt[hi]+" items.")):st[VE](mt,Dn)}else Nc(Zt),Ue===206?($i||($i=Rr(pn)),$i&&!ho?st[LJ](mt,$i):st[VE](mt,Dn)):(S=0,st[B7](mt,Sr))}s(ss,"_checkResponsStatus");function Nc(Ue){return se>=10?!1:!te(Ue)&&Ue!==""&&Ue!==He?(He=Ue,++se,!0):!1}s(Nc,"_checkAndUpdateEndPointUrl");function nd(Ue,mt){if(Le)Le(Ue,!1);else{var Zt=go&&go[k7]([3],!0);return kr(Zt,Ue,mt)}}s(nd,"_doUnloadSend");function Xp(Ue,mt,Zt){var Sr=Ue,Dn=Sr&&Sr.oriPayload;if(js)In&&In(Dn,!0),Tr(st[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var pn=[],$i=0;$i<Dn[hi];$i++){var xa=Dn[$i],Zd=[xa],li=Pn(Zd);Zt(li,mt)?st._onSuccess(Zd,Zd[hi]):pn[l1](xa)}pn[hi]>0&&(In&&In(pn,!0),Tr(st[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Xp,"_onBeaconRetry");function Zp(Ue){try{if(Ue&&Ue[hi])return he(Ue[0])}catch{}return null}s(Zp,"_isStringArr");function I_(Ue,mt){var Zt=null;if(Je(Ue)){for(var Sr=Ue[hi],Dn=0;Dn<Ue[hi];Dn++)Sr+=Ue[Dn].item[hi];var pn=go.getSyncFetchPayload();pn+Sr<=VJe?Zt=2:Gh()?Zt=3:(Zt=1,Tr(st[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var $i=go&&go[k7]([Zt],!0);return kr($i,Ue,mt)}return null}s(I_,"_fetchKeepAliveSender");function uB(Ue,mt){if(mt===void 0&&(mt=1),!(!Ue||Ue[hi]===0)){var Zt=st[Zh];Zt[tB](Ue),S++;for(var Sr=0,Dn=Ue;Sr<Dn.length;Sr++){var pn=Dn[Sr];pn.cnt=pn.cnt||0,pn.cnt++,Zt[HE](pn)}WJ(mt),T_()}}s(uB,"_resendPayload");function WJ(Ue){var mt=10,Zt;if(S<=1)Zt=mt;else{var Sr=(Math.pow(2,S)-1)/2,Dn=UA(Math.random()*Sr*mt)+1;Dn=Ue*Dn,Zt=_e($n(Dn,3600),mt)}var pn=Sh()+Zt*1e3;D=pn}s(WJ,"_setRetryTime");function T_(){if(!Q&&!L){var Ue=D?_e(0,D-Sh()):0,mt=_e(cn,Ue);Q=Bh(function(){Q=null,st[iB](!0,null,1)},mt)}}s(T_,"_setupTimer");function mx(){Q&&Q.cancel(),Q=null,D=null}s(mx,"_clearScheduledTimer");function hx(Ue){return te(Rl)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:Rl[hi]&&Rl.indexOf(Ue)>-1}s(hx,"_isRetriable");function N7(){var Ue="getNotifyMgr";return st.core[Ue]?st.core[Ue]():st.core._notificationManager}s(N7,"_getNotifyMgr");function L7(Ue,mt){var Zt=N7();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,mt)}catch(Sr){Tr(st[Dc](),1,74,"send request notification failed: "+al(Sr),{exception:Lt(Sr)})}}s(L7,"_notifySendRequest");function zge(Ue,mt){var Zt=mt.disableInstrumentationKeyValidation,Sr=te(Zt)?!1:Zt;if(Sr)return!0;var Dn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",pn=new RegExp(Dn);return pn.test(Ue)}s(zge,"_validateInstrumentationKey");function Yge(){st[oB]=null,st[Zh]=null,st._appId=null,st._sample=null,Ce={},Ye=null,S=0,D=null,L=!1,Q=null,J=null,se=0,Te=0,Le=null,Fe=null,He=null,lt=null,et=0,gt=!1,mr=null,Gn=!1,Ci=null,xi=eg,ho=!1,Fr=null,Rs=eg,Mr=!1,oo=!1,js=!1,bt=null,In=null,go=null,ze(st,"_senderConfig",{g:s(function(){return RN({},Vge)},"g")})}s(Yge,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,D,L){var Q;S!==T.iKey&&!te(S)?Q=Up(Up({},T),{iKey:S}):Q=T;var J=YJe[Q.baseType]||qge;return J(D,Q,L)},x}(pt),b_="instrumentationKey",D7="connectionString",lB="endpointUrl",cB="userOverrideEndpointUrl",E_,qJ=void 0,KJe=(E_={diagnosticLogInterval:Bk(JJe,1e4)},E_[D7]=qJ,E_.endpointUrl=qJ,E_[b_]=qJ,E_.extensionConfig={},E_);function JJe(A){return A&&A>0}s(JJe,"_chkDiagLevel");var XJe=function(){function A(x){var T=new Et,S;(te(x)||te(x[b_])&&te(x[D7]))&&qr("Invalid input configuration"),tc(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),Q(),L.initialize=Q,L.track=D,gk(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function Q(){var J=rd(x||{},KJe);S=J.cfg,T.addUnloadHook(zp(J,function(){var se=S[D7];if(vt(se)){var Ce=Mw(function(Fe,He){Ju(se,function(lt){var et=lt.value,gt=S[b_];if(!lt.rejected&&et){S[D7]=et;var Nt=bJ(et);gt=Nt.instrumentationkey||gt}Fe(gt)})}),Te=Mw(function(Fe,He){Ju(se,function(lt){var et=lt.value,gt=S[lB];if(!lt.rejected&&et){var Nt=bJ(et),Vt=Nt.ingestionendpoint;gt=Vt?Vt+p_:gt}Fe(gt)})});S[b_]=Ce,S[lB]=S[cB]||Te}if(he(se)){var Le=bJ(se),Ye=Le.ingestionendpoint;S[lB]=S[cB]?S[cB]:Ye+p_,S[b_]=Le.instrumentationkey||S[b_]}S[lB]=S[cB]?S[cB]:S[lB]})),T.initialize(S,[new $ge])}s(Q,"_initialize")});function D(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(D,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=Et,t.ApplicationInsights=XJe,t.Sender=$ge,t.SeverityLevel=SJe,t.arrForEach=Or,t.isNullOrUndefined=te,t.proxyFunctions=gk,t.throwError=qr})});var n2e=G(yg=>{"use strict";f();Object.defineProperty(yg,"__esModule",{value:!0});yg.bytePairEncode=yg.BinaryMap=yg.binaryMapKey=void 0;var Gat=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");yg.binaryMapKey=Gat;var hte=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,yg.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,yg.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};yg.BinaryMap=hte;var Ag=new Int32Array(128),wu=new Int32Array(128);function Hat(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;Ag.length<r*2;)wu=new Int32Array(wu.length*2),Ag=new Int32Array(Ag.length*2);for(let c=0;c<r-1;c++){let u=e.get(t,c,c+2)??2147483647;u<n&&(n=u,i=c),wu[c]=c,Ag[c]=u}wu[r-1]=r-1,Ag[r-1]=2147483647,wu[r]=r,Ag[r]=2147483647;let o=r+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,wu[c],wu[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");n!==2147483647;){Ag[wu[i]]=a(i,1),i>0&&(Ag[wu[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)wu[c]=wu[c+1];o--,i=-1,n=2147483647;for(let c=0;c<o-1;c++){let u=Ag[wu[c]];Ag[wu[c]]<n&&(n=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,wu[c],wu[c+1]));return l}s(Hat,"bytePairEncode");yg.bytePairEncode=Hat});var i2e=G(TM=>{"use strict";f();Object.defineProperty(TM,"__esModule",{value:!0});TM.makeTextEncoder=void 0;var gte=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},Ate=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},jat=s(()=>typeof Buffer<"u"?new Ate:new gte,"makeTextEncoder");TM.makeTextEncoder=jat});var o2e=G(wM=>{"use strict";f();Object.defineProperty(wM,"__esModule",{value:!0});wM.LRUCache=void 0;var yte=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new Cte(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};wM.LRUCache=yte;var Cte=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var vte=G(SM=>{"use strict";f();Object.defineProperty(SM,"__esModule",{value:!0});SM.TikTokenizer=void 0;var _M=n2e(),Vat=i2e(),$at=o2e();function zat(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(zat,"loadTikTokenBpe");function Yat(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Yat,"escapeRegExp");var xte=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,Vat.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new $at.LRUCache(i);let o=typeof e=="string"?zat(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new _M.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>Yat(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)r.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let d=(0,_M.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)r.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,l){let c,u=e.substring(n,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,r.push(...p);else{let m=o-a;a+=m,l+=d.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,r.push(h);else break;else{let g=(0,_M.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)r.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)r.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,n),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,r,a,l);if(a=p,l=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=r)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,_M.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let B of k)i.push(B);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};SM.TikTokenizer=xte});var h2e=G($a=>{"use strict";f();Object.defineProperty($a,"__esModule",{value:!0});$a.createTokenizer=$a.createByEncoderName=$a.createByModelName=$a.getRegexByModel=$a.getRegexByEncoder=$a.getSpecialTokensByModel=$a.getSpecialTokensByEncoder=$a.MODEL_TO_ENCODING=void 0;var Kat=vte(),Jat=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);$a.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var RM="<|endoftext|>",s2e="<|fim_prefix|>",a2e="<|fim_middle|>",l2e="<|fim_suffix|>",c2e="<|endofprompt|>",s8="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",u2e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Xat=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],d2e=Xat.join("|");function bte(t){let e="";if($a.MODEL_TO_ENCODING.has(t))e=$a.MODEL_TO_ENCODING.get(t);else for(let[r,n]of Jat)if(t.startsWith(r)){e=n;break}return e}s(bte,"getEncoderFromModelName");async function Zat(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(Zat,"fetchAndSaveFile");function Ete(t){let e=new Map([[RM,50256]]);switch(t){case"o200k_base":e=new Map([[RM,199999],[c2e,200018]]);break;case"cl100k_base":e=new Map([[RM,100257],[s2e,100258],[a2e,100259],[l2e,100260],[c2e,100276]]);break;case"p50k_edit":e=new Map([[RM,50256],[s2e,50281],[a2e,50282],[l2e,50283]]);break;default:break}return e}s(Ete,"getSpecialTokensByEncoder");$a.getSpecialTokensByEncoder=Ete;function elt(t){let e=bte(t);return Ete(e)}s(elt,"getSpecialTokensByModel");$a.getSpecialTokensByModel=elt;function f2e(t){switch(t){case"o200k_base":return d2e;case"cl100k_base":return u2e;default:break}return s8}s(f2e,"getRegexByEncoder");$a.getRegexByEncoder=f2e;function tlt(t){let e=bte(t);return f2e(e)}s(tlt,"getRegexByModel");$a.getRegexByModel=tlt;async function rlt(t,e=null){return p2e(bte(t),e)}s(rlt,"createByModelName");$a.createByModelName=rlt;async function p2e(t,e=null){let r,n,i=Ete(t);switch(t){case"o200k_base":r=d2e,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=u2e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=s8,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=s8,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=s8,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=s8,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(n),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await Zat(n,u),console.log(`Saved file to ${u}`)),m2e(u,i,r)}s(p2e,"createByEncoderName");$a.createByEncoderName=p2e;function m2e(t,e,r,n=8192){return new Kat.TikTokenizer(t,e,r,n)}s(m2e,"createTokenizer");$a.createTokenizer=m2e});var g2e=G(za=>{"use strict";f();Object.defineProperty(za,"__esModule",{value:!0});za.createTokenizer=za.createByEncoderName=za.createByModelName=za.getSpecialTokensByModel=za.getSpecialTokensByEncoder=za.getRegexByModel=za.getRegexByEncoder=za.MODEL_TO_ENCODING=za.TikTokenizer=void 0;var nlt=vte();Object.defineProperty(za,"TikTokenizer",{enumerable:!0,get:s(function(){return nlt.TikTokenizer},"get")});var Vx=h2e();Object.defineProperty(za,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return Vx.MODEL_TO_ENCODING},"get")});Object.defineProperty(za,"getRegexByEncoder",{enumerable:!0,get:s(function(){return Vx.getRegexByEncoder},"get")});Object.defineProperty(za,"getRegexByModel",{enumerable:!0,get:s(function(){return Vx.getRegexByModel},"get")});Object.defineProperty(za,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return Vx.getSpecialTokensByEncoder},"get")});Object.defineProperty(za,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return Vx.getSpecialTokensByModel},"get")});Object.defineProperty(za,"createByModelName",{enumerable:!0,get:s(function(){return Vx.createByModelName},"get")});Object.defineProperty(za,"createByEncoderName",{enumerable:!0,get:s(function(){return Vx.createByEncoderName},"get")});Object.defineProperty(za,"createTokenizer",{enumerable:!0,get:s(function(){return Vx.createTokenizer},"get")})});var Bte=G((gvr,Q2e)=>{"use strict";f();Q2e.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var U2e=G((Cvr,O2e)=>{"use strict";f();var Mut=Bte();function Qut(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=Mut(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(Qut,"parsePath");O2e.exports=Qut});var V2e=G((bvr,j2e)=>{"use strict";f();var Out=U2e();function Uut(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Uut,"_interopDefaultLegacy");var qut=Uut(Out);function Wut(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(Wut,"getAugmentedNamespace");var W2e={},Gut="text/plain",Hut="us-ascii",q2e=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),jut=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===Hut)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==Gut)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function Vut(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return jut(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];q2e(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])q2e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(Vut,"normalizeUrl");var $ut=Object.freeze({__proto__:null,default:Vut}),zut=Wut($ut);Object.defineProperty(W2e,"__esModule",{value:!0});var Yut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kut=zut,Jut=G2e(Kut),Xut=qut.default,Zut=G2e(Xut);function G2e(t){return t&&t.__esModule?t:{default:t}}s(G2e,"_interopRequireDefault");var H2e=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":Yut(r))!=="object"&&(r={stripHash:!1}),e=(0,Jut.default)(e,r));var o=(0,Zut.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");H2e.MAX_INPUT_LENGTH=2048;var edt=W2e.default=H2e;j2e.exports=edt});var Y2e=G((Tvr,z2e)=>{"use strict";f();var tdt=Bte();function $2e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=tdt(t);if(t=t.substring(t.indexOf("://")+3),$2e(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s($2e,"isSsh");z2e.exports=$2e});var X2e=G((Svr,J2e)=>{"use strict";f();var rdt=V2e(),K2e=Y2e();function ndt(t){let e=rdt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),K2e(e.protocols)||e.protocols.length===0&&K2e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(ndt,"gitUp");J2e.exports=ndt});var eTe=G((Bvr,Z2e)=>{"use strict";f();var idt=X2e();function Pte(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=idt(t),i=n.resource.split("."),o=null;switch(n.toString=function(E){return Pte.stringify(this,E)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],d&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(n.filepathtype=o[y+1],n.ref=o[y+2],o.length>y+3&&(n.filepath=o.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(n.pathname);return b!=null&&(n.source="bitbucket-server",b[1]==="users"?n.owner="~"+b[2]:n.owner=b[2],n.organization=n.owner,n.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=adt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Pte,"gitUrlParse");Pte.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?odt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+sdt(t)+i;default:return t.href}};function odt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(odt,"buildToken");function sdt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(sdt,"buildPath");function adt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(adt,"findLongestMatchingSubstring");Z2e.exports=Pte});var aTe=G((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(r>=o)break;e[r++]=l}else if(l<=2047){if(r+1>=o)break;e[r++]=192|l>>6,e[r++]=128|63&l}else if(l<=65535){if(r+2>=o)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|63&l}else{if(r+3>=o)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|63&l}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(n,"_");function i(){var b=n();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),r=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=n();r=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var d=n(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(d=n(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=n();y--;){var v=i();256&n()&&u.tlsExports.add(v)}else if(h===4)for(y=n();y--;)i(),v=i(),(3&n())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(l){n.global&&mergeLibSymbols(l,t),n.module=l}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,n);if(c<0)return-1;i+=c,n!==void 0&&(n+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,n.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(n),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let B=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(B===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let W=E[0].value,ee=!0;switch(W){case"not-eq?":ee=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let U=E[1].name,le=E[2].name;g[y].push(function(ie){let V,O;for(let Y of ie)Y.name===U&&(V=Y.node),Y.name===le&&(O=Y.node);return V===void 0||O===void 0||V.text===O.text===ee})}else{let U=E[1].name,le=E[2].value;g[y].push(function(ie){for(let V of ie)if(V.name===U)return V.node.text===le===ee;return!0})}break;case"not-match?":ee=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let me=E[1].name,ae=new RegExp(E[2].value);g[y].push(function(U){for(let le of U)if(le.name===me)return ae.test(le.node.text)===ee;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(U=>U.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${W}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(U=>U.type!=="string"))throw new Error(`Arguments to \`#${W}\` predicate must be a strings.".`);let H=W==="is?"?p:m;H[y]||(H[y]={}),H[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:W,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(n),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,l,c){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),l=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:l}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=r,l.startIndex=n,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Ere=G((sTr,qTe)=>{f();var bre=require("fs"),EQ=require("path"),M8=EQ.join,H0t=EQ.dirname,OTe=bre.accessSync&&function(t){try{bre.accessSync(t)}catch{return!1}return!0}||bre.existsSync||EQ.existsSync,UTe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function j0t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(UTe).map(function(c){c in t||(t[c]=UTe[c])}),t.module_root||(t.module_root=V0t(__filename)),EQ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,l;n<i;n++){o=M8.apply(null,t.try[n].map(function(c){return t[c]||c})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(c){return t.arrow+c}).join(`
`)),l.tries=r,l}s(j0t,"bindings");qTe.exports=j0t;function V0t(t){for(var e=H0t(t),r;;){if(e==="."&&(e=process.cwd()),OTe(M8(e,"dist")))return M8(e,"dist");if(OTe(M8(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=M8(e,"..")}}s(V0t,"getRoot")});var GTe=G((cTr,WTe)=>{f();WTe.exports=Ere()("node_sqlite3.node")});var VTe=G(jTe=>{f();var $0t=require("util");function z0t(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return $0t.inspect(l,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=HTe(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+HTe(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(z0t,"extendTrace");jTe.extendTrace=z0t;function HTe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(HTe,"filter")});var KTe=G((zTe,YTe)=>{f();var Y0t=require("path"),Uf=GTe(),HS=require("events").EventEmitter;YTe.exports=zTe=Uf;function jS(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new IQ(this,e,r);return t.call(this,i,n)}}s(jS,"normalizeMethod");function Tre(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(Tre,"inherits");Uf.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new Ru(t,e,r);let n;if(t=Y0t.resolve(t),!Uf.cached.objects[t])n=Uf.cached.objects[t]=new Ru(t,e,r);else{n=Uf.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var Ru=Uf.Database,IQ=Uf.Statement,Ire=Uf.Backup;Tre(Ru,HS);Tre(IQ,HS);Tre(Ire,HS);Ru.prototype.prepare=jS(function(t,e){return e.length?t.bind.apply(t,e):t});Ru.prototype.run=jS(function(t,e){return t.run.apply(t,e).finalize(),this});Ru.prototype.get=jS(function(t,e){return t.get.apply(t,e).finalize(),this});Ru.prototype.all=jS(function(t,e){return t.all.apply(t,e).finalize(),this});Ru.prototype.each=jS(function(t,e){return t.each.apply(t,e).finalize(),this});Ru.prototype.map=jS(function(t,e){return t.map.apply(t,e).finalize(),this});Ru.prototype.backup=function(){let t;return arguments.length<=2?t=new Ire(this,arguments[0],"main","main",!0,arguments[1]):t=new Ire(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Uf.BUSY,Uf.LOCKED],t};IQ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let l=0;l<n.length;l++)i[n[l][a]]=n[l];else{let l=o[1];for(let c=0;c<n.length;c++)i[n[c][a]]=n[c][l]}}e(r,i)}),this.all.apply(this,t)};var $Te=!1,wre=["trace","profile","change"];Ru.prototype.addListener=Ru.prototype.on=function(t){let e=HS.prototype.addListener.apply(this,arguments);return wre.indexOf(t)>=0&&this.configure(t,!0),e};Ru.prototype.removeListener=function(t){let e=HS.prototype.removeListener.apply(this,arguments);return wre.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ru.prototype.removeAllListeners=function(t){let e=HS.prototype.removeAllListeners.apply(this,arguments);return wre.indexOf(t)>=0&&this.configure(t,!1),e};Uf.verbose=function(){if(!$Te){let t=VTe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ru.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(IQ.prototype,e)}),$Te=!0}return Uf}});var MQ=G(Ja=>{"use strict";f();Object.defineProperty(Ja,"__esModule",{value:!0});Ja.thenable=Ja.typedArray=Ja.stringArray=Ja.array=Ja.func=Ja.error=Ja.number=Ja.string=Ja.boolean=void 0;function J0t(t){return t===!0||t===!1}s(J0t,"boolean");Ja.boolean=J0t;function twe(t){return typeof t=="string"||t instanceof String}s(twe,"string");Ja.string=twe;function X0t(t){return typeof t=="number"||t instanceof Number}s(X0t,"number");Ja.number=X0t;function Z0t(t){return t instanceof Error}s(Z0t,"error");Ja.error=Z0t;function rwe(t){return typeof t=="function"}s(rwe,"func");Ja.func=rwe;function nwe(t){return Array.isArray(t)}s(nwe,"array");Ja.array=nwe;function eft(t){return nwe(t)&&t.every(e=>twe(e))}s(eft,"stringArray");Ja.stringArray=eft;function tft(t,e){return Array.isArray(t)&&t.every(e)}s(tft,"typedArray");Ja.typedArray=tft;function rft(t){return t&&rwe(t.then)}s(rft,"thenable");Ja.thenable=rft});var Rre=G(qf=>{"use strict";f();Object.defineProperty(qf,"__esModule",{value:!0});qf.generateUuid=qf.parse=qf.isUUID=qf.v4=qf.empty=void 0;var U8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},q8=class t extends U8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};q8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];q8._timeHighBits=["8","9","a","b"];qf.empty=new U8("00000000-0000-0000-0000-000000000000");function iwe(){return new q8}s(iwe,"v4");qf.v4=iwe;var nft=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function owe(t){return nft.test(t)}s(owe,"isUUID");qf.isUUID=owe;function ift(t){if(!owe(t))throw new Error("invalid uuid");return new U8(t)}s(ift,"parse");qf.parse=ift;function oft(){return iwe().asHex()}s(oft,"generateUuid");qf.generateUuid=oft});var swe=G(rv=>{"use strict";f();Object.defineProperty(rv,"__esModule",{value:!0});rv.attachPartialResult=rv.ProgressFeature=rv.attachWorkDone=void 0;var tv=ni(),sft=Rre(),FI=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,{kind:"end"})}};FI.Instances=new Map;var QQ=class extends FI{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},W8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},OQ=class extends W8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function aft(t,e){if(e===void 0||e.workDoneToken===void 0)return new W8;let r=e.workDoneToken;return delete e.workDoneToken,new FI(t,r)}s(aft,"attachWorkDone");rv.attachWorkDone=aft;var lft=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(tv.WorkDoneProgressCancelNotification.type,r=>{let n=FI.Instances.get(r.token);(n instanceof QQ||n instanceof OQ)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new W8:new FI(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,sft.generateUuid)();return this.connection.sendRequest(tv.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new QQ(this.connection,e))}else return Promise.resolve(new OQ)}},"ProgressFeature");rv.ProgressFeature=lft;var kre;(function(t){t.type=new tv.ProgressType})(kre||(kre={}));var Bre=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(kre.type,this._token,e)}};function cft(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Bre(t,r)}s(cft,"attachPartialResult");rv.attachPartialResult=cft});var awe=G(UQ=>{"use strict";f();Object.defineProperty(UQ,"__esModule",{value:!0});UQ.ConfigurationFeature=void 0;var uft=ni(),dft=MQ(),fft=s(t=>class extends t{getConfiguration(e){return e?dft.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(uft.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");UQ.ConfigurationFeature=fft});var lwe=G(WQ=>{"use strict";f();Object.defineProperty(WQ,"__esModule",{value:!0});WQ.WorkspaceFoldersFeature=void 0;var qQ=ni(),pft=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new qQ.Emitter,this.connection.onNotification(qQ.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(qQ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(qQ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");WQ.WorkspaceFoldersFeature=pft});var cwe=G(GQ=>{"use strict";f();Object.defineProperty(GQ,"__esModule",{value:!0});GQ.CallHierarchyFeature=void 0;var Pre=ni(),mft=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Pre.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=Pre.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=Pre.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");GQ.CallHierarchyFeature=mft});var Nre=G(nv=>{"use strict";f();Object.defineProperty(nv,"__esModule",{value:!0});nv.SemanticTokensBuilder=nv.SemanticTokensDiff=nv.SemanticTokensFeature=void 0;var HQ=ni(),hft=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(HQ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=HQ.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=HQ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=HQ.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");nv.SemanticTokensFeature=hft;var jQ=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,l=this.modifiedSequence.slice(n,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:l}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};nv.SemanticTokensDiff=jQ;var Dre=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,l=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new jQ(this._prevData,this._data).computeDiff()}:this.build()}};nv.SemanticTokensBuilder=Dre});var uwe=G(VQ=>{"use strict";f();Object.defineProperty(VQ,"__esModule",{value:!0});VQ.ShowDocumentFeature=void 0;var gft=ni(),Aft=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(gft.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");VQ.ShowDocumentFeature=Aft});var dwe=G($Q=>{"use strict";f();Object.defineProperty($Q,"__esModule",{value:!0});$Q.FileOperationsFeature=void 0;var $S=ni(),yft=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification($S.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification($S.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification($S.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest($S.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest($S.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest($S.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");$Q.FileOperationsFeature=yft});var fwe=G(zQ=>{"use strict";f();Object.defineProperty(zQ,"__esModule",{value:!0});zQ.LinkedEditingRangeFeature=void 0;var Cft=ni(),xft=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Cft.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");zQ.LinkedEditingRangeFeature=xft});var pwe=G(YQ=>{"use strict";f();Object.defineProperty(YQ,"__esModule",{value:!0});YQ.TypeHierarchyFeature=void 0;var Lre=ni(),vft=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Lre.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=Lre.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=Lre.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");YQ.TypeHierarchyFeature=vft});var hwe=G(KQ=>{"use strict";f();Object.defineProperty(KQ,"__esModule",{value:!0});KQ.InlineValueFeature=void 0;var mwe=ni(),bft=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(mwe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(mwe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");KQ.InlineValueFeature=bft});var Awe=G(JQ=>{"use strict";f();Object.defineProperty(JQ,"__esModule",{value:!0});JQ.FoldingRangeFeature=void 0;var gwe=ni(),Eft=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(gwe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=gwe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");JQ.FoldingRangeFeature=Eft});var ywe=G(XQ=>{"use strict";f();Object.defineProperty(XQ,"__esModule",{value:!0});XQ.InlayHintFeature=void 0;var Fre=ni(),Ift=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Fre.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Fre.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(Fre.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");XQ.InlayHintFeature=Ift});var Cwe=G(ZQ=>{"use strict";f();Object.defineProperty(ZQ,"__esModule",{value:!0});ZQ.DiagnosticFeature=void 0;var G8=ni(),Tft=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(G8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(G8.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(G8.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(G8.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(G8.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");ZQ.DiagnosticFeature=Tft});var Qre=G(eO=>{"use strict";f();Object.defineProperty(eO,"__esModule",{value:!0});eO.TextDocuments=void 0;var MI=ni(),Mre=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new MI.Emitter,this._onDidOpen=new MI.Emitter,this._onDidClose=new MI.Emitter,this._onDidSave=new MI.Emitter,this._onWillSave=new MI.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=MI.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),MI.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};eO.TextDocuments=Mre});var Ure=G(zS=>{"use strict";f();Object.defineProperty(zS,"__esModule",{value:!0});zS.NotebookDocuments=zS.NotebookSyncFeature=void 0;var Wf=ni(),xwe=Qre(),wft=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Wf.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Wf.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Wf.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Wf.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");zS.NotebookSyncFeature=wft;var tO=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Wf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Wf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Wf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};tO.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Ore=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof xwe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new xwe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Wf.Emitter,this._onDidChange=new Wf.Emitter,this._onDidSave=new Wf.Emitter,this._onDidClose=new Wf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new tO,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)r.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let B=o.cells.splice(_,1,k);if(p.push({old:B[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)r.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Wf.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};zS.NotebookDocuments=Ore});var vwe=G(rO=>{"use strict";f();Object.defineProperty(rO,"__esModule",{value:!0});rO.MonikerFeature=void 0;var _ft=ni(),Sft=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=_ft.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");rO.MonikerFeature=Sft});var Vre=G(mo=>{"use strict";f();Object.defineProperty(mo,"__esModule",{value:!0});mo.createConnection=mo.combineFeatures=mo.combineNotebooksFeatures=mo.combineLanguagesFeatures=mo.combineWorkspaceFeatures=mo.combineWindowFeatures=mo.combineClientFeatures=mo.combineTracerFeatures=mo.combineTelemetryFeatures=mo.combineConsoleFeatures=mo._NotebooksImpl=mo._LanguagesImpl=mo.BulkUnregistration=mo.BulkRegistration=mo.ErrorMessageTracker=void 0;var $t=ni(),Gf=MQ(),Wre=Rre(),Yn=swe(),Rft=awe(),kft=lwe(),Bft=cwe(),Pft=Nre(),Dft=uwe(),Nft=dwe(),Lft=fwe(),Fft=pwe(),Mft=hwe(),Qft=Awe(),Oft=ywe(),Uft=Cwe(),qft=Ure(),Wft=vwe();function qre(t){if(t!==null)return t}s(qre,"null2Undefined");var Gre=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};mo.ErrorMessageTracker=Gre;var nO=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},Hre=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:$t.MessageType.Error,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(qre)}showWarningMessage(e,...r){let n={type:$t.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(qre)}showInformationMessage(e,...r){let n={type:$t.MessageType.Info,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(qre)}},bwe=(0,Dft.ShowDocumentFeature)((0,Yn.ProgressFeature)(Hre)),Ewe;(function(t){function e(){return new iO}s(e,"create"),t.create=e})(Ewe||(mo.BulkRegistration=Ewe={}));var iO=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Gf.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=Wre.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},Iwe;(function(t){function e(){return new H8(void 0,[])}s(e,"create"),t.create=e})(Iwe||(mo.BulkUnregistration=Iwe={}));var H8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Gf.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},oO=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof iO?this.registerMany(e):e instanceof H8?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Gf.string(r)?r:r.method,o=Wre.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,r){let n=Gf.string(e)?e:e.method,i=Wre.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,r).then(()=>new H8(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},jre=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,n)}},Twe=(0,Nft.FileOperationsFeature)((0,kft.WorkspaceFoldersFeature)((0,Rft.ConfigurationFeature)(jre))),sO=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?r:void 0}).catch(()=>{})}},aO=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},lO=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Yn.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,Yn.attachPartialResult)(this.connection,r)}};mo._LanguagesImpl=lO;var wwe=(0,Qft.FoldingRangeFeature)((0,Wft.MonikerFeature)((0,Uft.DiagnosticFeature)((0,Oft.InlayHintFeature)((0,Mft.InlineValueFeature)((0,Fft.TypeHierarchyFeature)((0,Lft.LinkedEditingRangeFeature)((0,Pft.SemanticTokensFeature)((0,Bft.CallHierarchyFeature)(lO))))))))),cO=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Yn.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,Yn.attachPartialResult)(this.connection,r)}};mo._NotebooksImpl=cO;var _we=(0,qft.NotebookSyncFeature)(cO);function Swe(t,e){return function(r){return e(t(r))}}s(Swe,"combineConsoleFeatures");mo.combineConsoleFeatures=Swe;function Rwe(t,e){return function(r){return e(t(r))}}s(Rwe,"combineTelemetryFeatures");mo.combineTelemetryFeatures=Rwe;function kwe(t,e){return function(r){return e(t(r))}}s(kwe,"combineTracerFeatures");mo.combineTracerFeatures=kwe;function Bwe(t,e){return function(r){return e(t(r))}}s(Bwe,"combineClientFeatures");mo.combineClientFeatures=Bwe;function Pwe(t,e){return function(r){return e(t(r))}}s(Pwe,"combineWindowFeatures");mo.combineWindowFeatures=Pwe;function Dwe(t,e){return function(r){return e(t(r))}}s(Dwe,"combineWorkspaceFeatures");mo.combineWorkspaceFeatures=Dwe;function Nwe(t,e){return function(r){return e(t(r))}}s(Nwe,"combineLanguagesFeatures");mo.combineLanguagesFeatures=Nwe;function Lwe(t,e){return function(r){return e(t(r))}}s(Lwe,"combineNotebooksFeatures");mo.combineNotebooksFeatures=Lwe;function Gft(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,Swe),tracer:r(t.tracer,e.tracer,kwe),telemetry:r(t.telemetry,e.telemetry,Rwe),client:r(t.client,e.client,Bwe),window:r(t.window,e.window,Pwe),workspace:r(t.workspace,e.workspace,Dwe),languages:r(t.languages,e.languages,Nwe),notebooks:r(t.notebooks,e.notebooks,Lwe)}}s(Gft,"combineFeatures");mo.combineFeatures=Gft;function Hft(t,e,r){let n=r&&r.console?new(r.console(nO)):new nO,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(sO)):new sO,a=r&&r.telemetry?new(r.telemetry(aO)):new aO,l=r&&r.client?new(r.client(oO)):new oO,c=r&&r.window?new(r.window(bwe)):new bwe,u=r&&r.workspace?new(r.workspace(Twe)):new Twe,d=r&&r.languages?new(r.languages(wwe)):new wwe,p=r&&r.notebooks?new(r.notebooks(_we)):new _we,m=[n,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:Gf.thenable(E)?new Promise((_,k)=>{E.then(B=>_(B),B=>k(B))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(Gf.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=Gf.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),(0,Yn.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,Yn.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),Gf.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,Yn.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let B=k;B||(B={capabilities:{}});let N=B.capabilities;N||(N={},B.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Gf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!Gf.number(N.textDocumentSync)&&!Gf.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Gf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let W of m)W.fillServerCapabilities(N);return B})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(Hft,"createConnection");mo.createConnection=Hft});var Fwe=G(Ad=>{"use strict";f();Object.defineProperty(Ad,"__esModule",{value:!0});Ad.resolveModulePath=Ad.FileSystem=Ad.resolveGlobalYarnPath=Ad.resolveGlobalNodePath=Ad.resolve=Ad.uriToFilePath=void 0;var jft=require("url"),wm=require("path"),$re=require("fs"),Jre=require("child_process");function Vft(t){let e=jft.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return wm.normalize(r.join("/"))}s(Vft,"uriToFilePath");Ad.uriToFilePath=Vft;function zre(){return process.platform==="win32"}s(zre,"isWindows");function uO(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&$re.existsSync(e)&&(u[i]?u[i]=e+wm.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,Jre.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(uO,"resolve");Ad.resolve=uO;function Yre(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};zre()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,Jre.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?zre()?wm.join(a,"node_modules"):wm.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(Yre,"resolveGlobalNodePath");Ad.resolveGlobalNodePath=Yre;function $ft(t){let e="yarn",r={encoding:"utf8"};zre()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,Jre.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return wm.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s($ft,"resolveGlobalYarnPath");Ad.resolveGlobalYarnPath=$ft;var Kre;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!$re.existsSync(__filename.toUpperCase())||!$re.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?wm.normalize(o).indexOf(wm.normalize(i))===0:wm.normalize(o).toLowerCase().indexOf(wm.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(Kre||(Ad.FileSystem=Kre={}));function zft(t,e,r,n){return r?(wm.isAbsolute(r)||(r=wm.join(t,r)),uO(e,r,r,n).then(i=>Kre.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>uO(e,Yre(n),t,n))):uO(e,Yre(n),t,n)}s(zft,"resolveModulePath");Ad.resolveModulePath=zft});var Xre=G((T_r,Mwe)=>{"use strict";f();Mwe.exports=ni()});var Qwe=G(dO=>{"use strict";f();Object.defineProperty(dO,"__esModule",{value:!0});dO.InlineCompletionFeature=void 0;var Yft=ni(),Kft=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(Yft.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");dO.InlineCompletionFeature=Kft});var qwe=G(zc=>{"use strict";f();var Jft=zc&&zc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uwe=zc&&zc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jft(e,t,r)};Object.defineProperty(zc,"__esModule",{value:!0});zc.ProposedFeatures=zc.NotebookDocuments=zc.TextDocuments=zc.SemanticTokensBuilder=void 0;var Xft=Nre();Object.defineProperty(zc,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return Xft.SemanticTokensBuilder},"get")});var Zft=Qwe();Uwe(ni(),zc);var ept=Qre();Object.defineProperty(zc,"TextDocuments",{enumerable:!0,get:s(function(){return ept.TextDocuments},"get")});var tpt=Ure();Object.defineProperty(zc,"NotebookDocuments",{enumerable:!0,get:s(function(){return tpt.NotebookDocuments},"get")});Uwe(Vre(),zc);var Owe;(function(t){t.all={__brand:"features",languages:Zft.InlineCompletionFeature}})(Owe||(zc.ProposedFeatures=Owe={}))});var Xa=G(Hf=>{"use strict";f();var rpt=Hf&&Hf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jwe=Hf&&Hf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rpt(e,t,r)};Object.defineProperty(Hf,"__esModule",{value:!0});Hf.createConnection=Hf.Files=void 0;var Wwe=require("node:util"),Zre=MQ(),npt=Vre(),j8=Fwe(),QI=Xre();jwe(Xre(),Hf);jwe(qwe(),Hf);var Gwe;(function(t){t.uriToFilePath=j8.uriToFilePath,t.resolveGlobalNodePath=j8.resolveGlobalNodePath,t.resolveGlobalYarnPath=j8.resolveGlobalYarnPath,t.resolve=j8.resolve,t.resolveModulePath=j8.resolveModulePath})(Gwe||(Hf.Files=Gwe={}));var Hwe;function fO(){if(Hwe!==void 0)try{Hwe.end()}catch{}}s(fO,"endProtocolConnection");var YS=!1,Vwe;function ipt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(Vwe=setInterval(()=>{try{process.kill(n,0)}catch{fO(),process.exit(YS?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(ipt,"setupExitTimer");ipt();var opt={initialize:s(t=>{let e=t.processId;Zre.number(e)&&Vwe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(YS?0:1)}},3e3)},"initialize"),get shutdownReceived(){return YS},set shutdownReceived(t){YS=t},exit:s(t=>{fO(),process.exit(t)},"exit")};function spt(t,e,r,n){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),QI.ConnectionStrategy.is(t)||QI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=r),apt(o,a,l,i)}s(spt,"createConnection");Hf.createConnection=spt;function apt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new QI.IPCMessageReader(process),e=new QI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,QI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,QI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Zre.func(t.read)&&Zre.func(t.on)){let c=t;c.on("end",()=>{fO(),process.exit(YS?0:1)}),c.on("close",()=>{fO(),process.exit(YS?0:1)})}let l=s(c=>{let u=(0,QI.createProtocolConnection)(t,e,c,r);return i&&lpt(c),u},"connectionFactory");return(0,npt.createConnection)(l,opt,n)}s(apt,"_createConnection");function lpt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,Wwe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,Wwe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(lpt,"patchConsole")});var _m=G((M_r,$we)=>{"use strict";f();$we.exports=Xa()});var O5e=G((H3r,Q5e)=>{"use strict";f();Q5e.exports=F5e;function F5e(t,e,r){t instanceof RegExp&&(t=L5e(t,r)),e instanceof RegExp&&(e=L5e(e,r));var n=M5e(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(F5e,"balanced");function L5e(t,e){var r=e.match(t);return r?r[0]:null}s(L5e,"maybeMatch");F5e.range=M5e;function M5e(t,e,r){var n,i,o,a,l,c=r.indexOf(t),u=r.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],o=r.length;d>=0&&!l;)d==c?(n.push(d),c=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=c<u&&c>=0?c:u;n.length&&(l=[o,a])}return l}s(M5e,"range")});var $5e=G(($3r,V5e)=>{f();var U5e=O5e();V5e.exports=Zpt;var q5e="\0SLASH"+Math.random()+"\0",W5e="\0OPEN"+Math.random()+"\0",eie="\0CLOSE"+Math.random()+"\0",G5e="\0COMMA"+Math.random()+"\0",H5e="\0PERIOD"+Math.random()+"\0";function Zne(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(Zne,"numeric");function Jpt(t){return t.split("\\\\").join(q5e).split("\\{").join(W5e).split("\\}").join(eie).split("\\,").join(G5e).split("\\.").join(H5e)}s(Jpt,"escapeBraces");function Xpt(t){return t.split(q5e).join("\\").split(W5e).join("{").split(eie).join("}").split(G5e).join(",").split(H5e).join(".")}s(Xpt,"unescapeBraces");function j5e(t){if(!t)return[""];var e=[],r=U5e("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=j5e(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s(j5e,"parseCommaParts");function Zpt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),tP(Jpt(t),!0).map(Xpt)):[]}s(Zpt,"expandTop");function emt(t){return"{"+t+"}"}s(emt,"embrace");function tmt(t){return/^-?0\d/.test(t)}s(tmt,"isPadded");function rmt(t,e){return t<=e}s(rmt,"lte");function nmt(t,e){return t>=e}s(nmt,"gte");function tP(t,e){var r=[],n=U5e("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?tP(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=c||u,p=n.body.indexOf(",")>=0;if(!d&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+eie+n.post,tP(t)):[t];var m;if(d)m=n.body.split(/\.\./);else if(m=j5e(n.body),m.length===1&&(m=tP(m[0],!1).map(emt),m.length===1))return o.map(function(ae){return n.pre+m[0]+ae});var h;if(d){var g=Zne(m[0]),y=Zne(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(Zne(m[2])):1,E=rmt,_=y<g;_&&(b*=-1,E=nmt);var k=m.some(tmt);h=[];for(var B=g;E(B,y);B+=b){var N;if(u)N=String.fromCharCode(B),N==="\\"&&(N="");else if(N=String(B),k){var W=v-N.length;if(W>0){var ee=new Array(W+1).join("0");B<0?N="-"+ee+N.slice(1):N=ee+N}}h.push(N)}}else{h=[];for(var me=0;me<m.length;me++)h.push.apply(h,tP(m[me],!1))}for(var me=0;me<h.length;me++)for(var a=0;a<o.length;a++){var l=i+h[me]+o[a];(!e||d||l)&&r.push(l)}}return r}s(tP,"expand")});var Qs=G((Ljr,K3e)=>{f();K3e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var yo=G((Mjr,J3e)=>{"use strict";f();var Zs=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Ioe=class extends Zs{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Toe=class extends Zs{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},woe=class extends Zs{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},_oe=class extends Zs{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Soe=class extends Zs{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Roe=class extends Zs{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},koe=class extends Zs{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},vq=class extends Zs{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},Boe=class extends vq{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Poe=class extends Zs{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Doe=class extends Zs{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Noe=class extends Zs{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Loe=class extends Zs{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Foe=class extends Zs{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Moe=class extends Zs{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},Qoe=class extends Zs{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Ooe=class extends Zs{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Uoe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},qoe=class extends Zs{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Woe=class extends Zs{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},Goe=class extends Zs{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},Hoe=class extends Zs{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};J3e.exports={AbortError:vq,HTTPParserError:Uoe,UndiciError:Zs,HeadersTimeoutError:Toe,HeadersOverflowError:woe,BodyTimeoutError:_oe,RequestContentLengthMismatchError:Doe,ConnectTimeoutError:Ioe,ResponseStatusCodeError:Soe,InvalidArgumentError:Roe,InvalidReturnValueError:koe,RequestAbortedError:Boe,ClientDestroyedError:Loe,ClientClosedError:Foe,InformationalError:Poe,SocketError:Moe,NotSupportedError:Qoe,ResponseContentLengthMismatchError:Noe,BalancedPoolMissingUpstreamError:Ooe,ResponseExceededMaxSizeError:qoe,RequestRetryError:Woe,ResponseError:Goe,SecureProxyConnectionError:Hoe}});var Eq=G((Ujr,X3e)=>{"use strict";f();var bq={},joe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<joe.length;++t){let e=joe[t],r=e.toLowerCase();bq[e]=bq[r]=r}Object.setPrototypeOf(bq,null);X3e.exports={wellknownHeaderNames:joe,headerNameLowerCasedRecord:bq}});var rke=G((Wjr,tke)=>{"use strict";f();var{wellknownHeaderNames:Z3e,headerNameLowerCasedRecord:kAt}=Eq(),Voe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},Iq=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new Voe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},eke=new Iq;for(let t=0;t<Z3e.length;++t){let e=kAt[Z3e[t]];eke.insert(e,e)}tke.exports={TernarySearchTree:Iq,tree:eke}});var Ai=G((jjr,yke)=>{"use strict";f();var _P=require("node:assert"),{kDestroyed:ike,kBodyUsed:q5,kListeners:$oe,kBody:nke}=Qs(),{IncomingMessage:BAt}=require("node:http"),_q=require("node:stream"),PAt=require("node:net"),{Blob:DAt}=require("node:buffer"),NAt=require("node:util"),{stringify:LAt}=require("node:querystring"),{EventEmitter:FAt}=require("node:events"),{InvalidArgumentError:Gl}=yo(),{headerNameLowerCasedRecord:MAt}=Eq(),{tree:oke}=rke(),[QAt,OAt]=process.versions.node.split(".").map(t=>Number(t)),wq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[nke]=e,this[q5]=!1}async*[Symbol.asyncIterator](){_P(!this[q5],"disturbed"),this[q5]=!0,yield*this[nke]}};function UAt(t){return Sq(t)?(uke(t)===0&&t.on("data",function(){_P(!1)}),typeof t.readableDidRead!="boolean"&&(t[q5]=!1,FAt.prototype.on.call(t,"data",function(){this[q5]=!0})),t):t&&typeof t.pipeTo=="function"?new wq(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&cke(t)?new wq(t):t}s(UAt,"wrapRequestBody");function qAt(){}s(qAt,"nop");function Sq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Sq,"isStream");function ske(t){if(t===null)return!1;if(t instanceof DAt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(ske,"isBlobLike");function WAt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=LAt(e);return r&&(t+="?"+r),t}s(WAt,"buildURL");function ake(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(ake,"isValidPort");function Tq(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(Tq,"isHttpOrHttpsPrefixed");function lke(t){if(typeof t=="string"){if(t=new URL(t),!Tq(t.origin||t.protocol))throw new Gl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Gl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&ake(t.port)===!1)throw new Gl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Gl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Gl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Gl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Gl("Invalid URL origin: the origin must be a string or null/undefined.");if(!Tq(t.origin||t.protocol))throw new Gl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!Tq(t.origin||t.protocol))throw new Gl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(lke,"parseURL");function GAt(t){if(t=lke(t),t.pathname!=="/"||t.search||t.hash)throw new Gl("invalid url");return t}s(GAt,"parseOrigin");function HAt(t){if(t[0]==="["){let r=t.indexOf("]");return _P(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(HAt,"getHostname");function jAt(t){if(!t)return null;_P(typeof t=="string");let e=HAt(t);return PAt.isIP(e)?"":e}s(jAt,"getServerName");function VAt(t){return JSON.parse(JSON.stringify(t))}s(VAt,"deepClone");function $At(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s($At,"isAsyncIterable");function cke(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(cke,"isIterable");function uke(t){if(t==null)return 0;if(Sq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(ske(t))return t.size!=null?t.size:null;if(pke(t))return t.byteLength}return null}s(uke,"bodyLength");function dke(t){return t&&!!(t.destroyed||t[ike]||_q.isDestroyed?.(t))}s(dke,"isDestroyed");function zAt(t,e){t==null||!Sq(t)||dke(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===BAt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[ike]=!0))}s(zAt,"destroy");var YAt=/timeout=(\d+)/;function KAt(t){let e=t.toString().match(YAt);return e?parseInt(e[1],10)*1e3:null}s(KAt,"parseKeepAliveTimeout");function fke(t){return typeof t=="string"?MAt[t]??t.toLowerCase():oke.lookup(t)??t.toString("latin1").toLowerCase()}s(fke,"headerNameToString");function JAt(t){return oke.lookup(t)??t.toString("latin1").toLowerCase()}s(JAt,"bufferToLowerCasedHeaderName");function XAt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=fke(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(XAt,"parseHeaders");function ZAt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),r[c]=o,r[c+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(ZAt,"parseRawHeaders");function pke(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(pke,"isBuffer");function e1t(t,e,r){if(!t||typeof t!="object")throw new Gl("handler must be an object");if(typeof t.onConnect!="function")throw new Gl("invalid onConnect method");if(typeof t.onError!="function")throw new Gl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Gl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Gl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Gl("invalid onHeaders method");if(typeof t.onData!="function")throw new Gl("invalid onData method");if(typeof t.onComplete!="function")throw new Gl("invalid onComplete method")}}s(e1t,"validateHandler");function t1t(t){return!!(t&&(_q.isDisturbed(t)||t[q5]))}s(t1t,"isDisturbed");function r1t(t){return!!(t&&_q.isErrored(t))}s(r1t,"isErrored");function n1t(t){return!!(t&&_q.isReadable(t))}s(n1t,"isReadable");function i1t(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(i1t,"getSocketInfo");function o1t(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(o1t,"ReadableStreamFrom");function s1t(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(s1t,"isFormDataLike");function a1t(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(a1t,"addAbortListener");var l1t=typeof String.prototype.toWellFormed=="function",c1t=typeof String.prototype.isWellFormed=="function";function mke(t){return l1t?`${t}`.toWellFormed():NAt.toUSVString(t)}s(mke,"toUSVString");function u1t(t){return c1t?`${t}`.isWellFormed():mke(t)===`${t}`}s(u1t,"isUSVString");function hke(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(hke,"isTokenCharCode");function d1t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!hke(t.charCodeAt(e)))return!1;return!0}s(d1t,"isValidHTTPToken");var f1t=/[^\t\x20-\x7e\x80-\xff]/;function p1t(t){return!f1t.test(t)}s(p1t,"isValidHeaderValue");function m1t(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(m1t,"parseRangeHeader");function h1t(t,e,r){return(t[$oe]??=[]).push([e,r]),t.on(e,r),t}s(h1t,"addListener");function g1t(t){for(let[e,r]of t[$oe]??[])t.removeListener(e,r);t[$oe]=null}s(g1t,"removeAllListeners");function A1t(t,e,r){try{e.onError(r),_P(e.aborted)}catch(n){t.emit("error",n)}}s(A1t,"errorRequest");var gke=Object.create(null);gke.enumerable=!0;var zoe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},Ake={...zoe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(zoe,null);Object.setPrototypeOf(Ake,null);yke.exports={kEnumerableProperty:gke,nop:qAt,isDisturbed:t1t,isErrored:r1t,isReadable:n1t,toUSVString:mke,isUSVString:u1t,isBlobLike:ske,parseOrigin:GAt,parseURL:lke,getServerName:jAt,isStream:Sq,isIterable:cke,isAsyncIterable:$At,isDestroyed:dke,headerNameToString:fke,bufferToLowerCasedHeaderName:JAt,addListener:h1t,removeAllListeners:g1t,errorRequest:A1t,parseRawHeaders:ZAt,parseHeaders:XAt,parseKeepAliveTimeout:KAt,destroy:zAt,bodyLength:uke,deepClone:VAt,ReadableStreamFrom:o1t,isBuffer:pke,validateHandler:e1t,getSocketInfo:i1t,isFormDataLike:s1t,buildURL:WAt,addAbortListener:a1t,isValidHTTPToken:d1t,isValidHeaderValue:p1t,isTokenCharCode:hke,parseRangeHeader:m1t,normalizedMethodRecordsBase:zoe,normalizedMethodRecords:Ake,isValidPort:ake,isHttpOrHttpsPrefixed:Tq,nodeMajor:QAt,nodeMinor:OAt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:UAt}});var W5=G((zjr,xke)=>{"use strict";f();var bo=require("node:diagnostics_channel"),Koe=require("node:util"),Rq=Koe.debuglog("undici"),Yoe=Koe.debuglog("fetch"),y2=Koe.debuglog("websocket"),Cke=!1,y1t={beforeConnect:bo.channel("undici:client:beforeConnect"),connected:bo.channel("undici:client:connected"),connectError:bo.channel("undici:client:connectError"),sendHeaders:bo.channel("undici:client:sendHeaders"),create:bo.channel("undici:request:create"),bodySent:bo.channel("undici:request:bodySent"),headers:bo.channel("undici:request:headers"),trailers:bo.channel("undici:request:trailers"),error:bo.channel("undici:request:error"),open:bo.channel("undici:websocket:open"),close:bo.channel("undici:websocket:close"),socketError:bo.channel("undici:websocket:socket_error"),ping:bo.channel("undici:websocket:ping"),pong:bo.channel("undici:websocket:pong")};if(Rq.enabled||Yoe.enabled){let t=Yoe.enabled?Yoe:Rq;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),bo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),bo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),bo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),Cke=!0}if(y2.enabled){if(!Cke){let t=Rq.enabled?Rq:y2;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}bo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;y2("connection opened %s%s",e,r?`:${r}`:"")}),bo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;y2("closed connection to %s - %s %s",e.url,r,n)}),bo.channel("undici:websocket:socket_error").subscribe(t=>{y2("connection errored - %s",t.message)}),bo.channel("undici:websocket:ping").subscribe(t=>{y2("ping received")}),bo.channel("undici:websocket:pong").subscribe(t=>{y2("pong received")})}xke.exports={channels:y1t}});var Tke=G((Kjr,Ike)=>{"use strict";f();var{InvalidArgumentError:ea,NotSupportedError:C1t}=yo(),$1=require("node:assert"),{isValidHTTPToken:Eke,isValidHeaderValue:vke,isStream:x1t,destroy:v1t,isBuffer:b1t,isFormDataLike:E1t,isIterable:I1t,isBlobLike:T1t,buildURL:w1t,validateHandler:_1t,getServerName:S1t,normalizedMethodRecords:R1t}=Ai(),{channels:Pg}=W5(),{headerNameLowerCasedRecord:bke}=Eq(),k1t=/[^\u0021-\u00ff]/,rp=Symbol("handler"),Joe=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof r!="string")throw new ea("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new ea("path must be an absolute URL or start with a slash");if(k1t.test(r))throw new ea("invalid request path");if(typeof n!="string")throw new ea("method must be a string");if(R1t[n]===void 0&&!Eke(n))throw new ea("invalid request method");if(u&&typeof u!="string")throw new ea("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new ea("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ea("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new ea("invalid reset");if(g!=null&&typeof g!="boolean")throw new ea("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(x1t(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){v1t(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(b1t(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(E1t(i)||I1t(i)||T1t(i))this.body=i;else throw new ea("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?w1t(r,a):r,this.origin=e,this.idempotent=l??(n==="HEAD"||n==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new ea("headers array must be even");for(let b=0;b<o.length;b+=2)kq(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new ea("headers must be in key-value pair format");kq(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)kq(this,b[E],o[b[E]])}else if(o!=null)throw new ea("headers must be an object or an array");_1t(v,n,u),this.servername=y||S1t(this.host),this[rp]=v,Pg.create.hasSubscribers&&Pg.create.publish({request:this})}onBodySent(e){if(this[rp].onBodySent)try{return this[rp].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(Pg.bodySent.hasSubscribers&&Pg.bodySent.publish({request:this}),this[rp].onRequestSent)try{return this[rp].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if($1(!this.aborted),$1(!this.completed),this.error)e(this.error);else return this.abort=e,this[rp].onConnect(e)}onResponseStarted(){return this[rp].onResponseStarted?.()}onHeaders(e,r,n,i){$1(!this.aborted),$1(!this.completed),Pg.headers.hasSubscribers&&Pg.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[rp].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){$1(!this.aborted),$1(!this.completed);try{return this[rp].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return $1(!this.aborted),$1(!this.completed),this[rp].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),$1(!this.aborted),this.completed=!0,Pg.trailers.hasSubscribers&&Pg.trailers.publish({request:this,trailers:e});try{return this[rp].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),Pg.error.hasSubscribers&&Pg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[rp].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return kq(this,e,r),this}};function kq(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new ea(`invalid ${e} header`);if(r===void 0)return;let n=bke[e];if(n===void 0&&(n=e.toLowerCase(),bke[n]===void 0&&!Eke(n)))throw new ea("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!vke(r[o]))throw new ea(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new ea(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!vke(r))throw new ea(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new ea("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new ea("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new ea(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ea("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new C1t("expect header not supported");t.headers.push(e,r)}}}s(kq,"processHeader");Ike.exports=Joe});var SP=G((Zjr,wke)=>{"use strict";f();var B1t=require("node:events"),Bq=class extends B1t{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new Xoe(this,n)}},Xoe=class extends Bq{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};wke.exports=Bq});var V5=G((rVr,_ke)=>{"use strict";f();var P1t=SP(),{ClientDestroyedError:Zoe,ClientClosedError:D1t,InvalidArgumentError:G5}=yo(),{kDestroy:N1t,kClose:L1t,kClosed:RP,kDestroyed:H5,kDispatch:ese,kInterceptors:C2}=Qs(),z1=Symbol("onDestroyed"),j5=Symbol("onClosed"),Pq=Symbol("Intercepted Dispatch"),tse=class extends P1t{static{s(this,"DispatcherBase")}constructor(){super(),this[H5]=!1,this[z1]=null,this[RP]=!1,this[j5]=[]}get destroyed(){return this[H5]}get closed(){return this[RP]}get interceptors(){return this[C2]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[C2][r]!="function")throw new G5("interceptor must be an function")}this[C2]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new G5("invalid callback");if(this[H5]){queueMicrotask(()=>e(new Zoe,null));return}if(this[RP]){this[j5]?this[j5].push(e):queueMicrotask(()=>e(null,null));return}this[RP]=!0,this[j5].push(e);let r=s(()=>{let n=this[j5];this[j5]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[L1t]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof r!="function")throw new G5("invalid callback");if(this[H5]){this[z1]?this[z1].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new Zoe),this[H5]=!0,this[z1]=this[z1]||[],this[z1].push(r);let n=s(()=>{let i=this[z1];this[z1]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[N1t](e).then(()=>{queueMicrotask(n)})}[Pq](e,r){if(!this[C2]||this[C2].length===0)return this[Pq]=this[ese],this[ese](e,r);let n=this[ese].bind(this);for(let i=this[C2].length-1;i>=0;i--)n=this[C2][i](n);return this[Pq]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new G5("handler must be an object");try{if(!e||typeof e!="object")throw new G5("opts must be an object.");if(this[H5]||this[z1])throw new Zoe;if(this[RP])throw new D1t;return this[Pq](e,r)}catch(n){if(typeof r.onError!="function")throw new G5("invalid onError method");return r.onError(n),!1}}};_ke.exports=tse});var lse=G((oVr,Bke)=>{"use strict";f();var $5=0,rse=1e3,nse=(rse>>1)-1,Y1,ise=Symbol("kFastTimer"),K1=[],ose=-2,sse=-1,Rke=0,Ske=1;function ase(){$5+=nse;let t=0,e=K1.length;for(;t<e;){let r=K1[t];r._state===Rke?(r._idleStart=$5-nse,r._state=Ske):r._state===Ske&&$5>=r._idleStart+r._idleTimeout&&(r._state=sse,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===sse?(r._state=ose,--e!==0&&(K1[t]=K1[e])):++t}K1.length=e,K1.length!==0&&kke()}s(ase,"onTick");function kke(){Y1?Y1.refresh():(clearTimeout(Y1),Y1=setTimeout(ase,nse),Y1.unref&&Y1.unref())}s(kke,"refreshTimeout");var Dq=class{static{s(this,"FastTimer")}[ise]=!0;_state=ose;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===ose&&K1.push(this),(!Y1||K1.length===1)&&kke(),this._state=Rke}clear(){this._state=sse,this._idleStart=-1}};Bke.exports={setTimeout(t,e,r){return e<=rse?setTimeout(t,e,r):new Dq(t,e,r)},clearTimeout(t){t[ise]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new Dq(t,e,r)},clearFastTimeout(t){t.clear()},now(){return $5},tick(t=0){$5+=t-rse+1,ase(),ase()},reset(){$5=0,K1.length=0,clearTimeout(Y1),Y1=null},kFastTimer:ise}});var kP=G((uVr,Fke)=>{"use strict";f();var F1t=require("node:net"),Pke=require("node:assert"),Lke=Ai(),{InvalidArgumentError:M1t,ConnectTimeoutError:Q1t}=yo(),Nq=lse();function Dke(){}s(Dke,"noop");var cse,use;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?use=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:use=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function O1t({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new M1t("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},l=new use(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){cse||(cse=require("node:tls")),h=h||a.servername||Lke.getServerName(d)||null;let _=h||u;Pke(_);let k=i||l.get(_)||null;m=m||443,b=cse.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(B){l.set(_,B)})}else Pke(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=F1t.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=U1t(new WeakRef(b),{timeout:n,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(O1t,"buildConnector");var U1t=process.platform==="win32"?(t,e)=>{if(!e.timeout)return Dke;let r=null,n=null,i=Nq.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>Nke(t.deref(),e))})},e.timeout);return()=>{Nq.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return Dke;let r=null,n=Nq.setFastTimeout(()=>{r=setImmediate(()=>{Nke(t.deref(),e)})},e.timeout);return()=>{Nq.clearFastTimeout(n),clearImmediate(r)}};function Nke(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,Lke.destroy(t,new Q1t(r))}s(Nke,"onConnectTimeout");Fke.exports=O1t});var Mke=G(Lq=>{"use strict";f();Object.defineProperty(Lq,"__esModule",{value:!0});Lq.enumToMap=void 0;function q1t(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(q1t,"enumToMap");Lq.enumToMap=q1t});var Qke=G(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var W1t=Mke(),G1t;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(G1t=Ut.ERROR||(Ut.ERROR={}));var H1t;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(H1t=Ut.TYPE||(Ut.TYPE={}));var j1t;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(j1t=Ut.FLAGS||(Ut.FLAGS={}));var V1t;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(V1t=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var an;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(an=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[an.DELETE,an.GET,an.HEAD,an.POST,an.PUT,an.CONNECT,an.OPTIONS,an.TRACE,an.COPY,an.LOCK,an.MKCOL,an.MOVE,an.PROPFIND,an.PROPPATCH,an.SEARCH,an.UNLOCK,an.BIND,an.REBIND,an.UNBIND,an.ACL,an.REPORT,an.MKACTIVITY,an.CHECKOUT,an.MERGE,an["M-SEARCH"],an.NOTIFY,an.SUBSCRIBE,an.UNSUBSCRIBE,an.PATCH,an.PURGE,an.MKCALENDAR,an.LINK,an.UNLINK,an.PRI,an.SOURCE];Ut.METHODS_ICE=[an.SOURCE];Ut.METHODS_RTSP=[an.OPTIONS,an.DESCRIBE,an.ANNOUNCE,an.SETUP,an.PLAY,an.PAUSE,an.TEARDOWN,an.GET_PARAMETER,an.SET_PARAMETER,an.REDIRECT,an.RECORD,an.FLUSH,an.GET,an.POST];Ut.METHOD_MAP=W1t.enumToMap(an);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var $1t;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})($1t=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var z5;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(z5=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:z5.CONNECTION,"content-length":z5.CONTENT_LENGTH,"proxy-connection":z5.CONNECTION,"transfer-encoding":z5.TRANSFER_ENCODING,upgrade:z5.UPGRADE}});var dse=G((yVr,Oke)=>{"use strict";f();var{Buffer:z1t}=require("node:buffer");Oke.exports=z1t.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var qke=G((xVr,Uke)=>{"use strict";f();var{Buffer:Y1t}=require("node:buffer");Uke.exports=Y1t.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var BP=G((bVr,Yke)=>{"use strict";f();var Wke=["GET","HEAD","POST"],K1t=new Set(Wke),J1t=[101,204,205,304],Gke=[301,302,303,307,308],X1t=new Set(Gke),Hke=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],Z1t=new Set(Hke),jke=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],eyt=new Set(jke),tyt=["follow","manual","error"],Vke=["GET","HEAD","OPTIONS","TRACE"],ryt=new Set(Vke),nyt=["navigate","same-origin","no-cors","cors"],iyt=["omit","same-origin","include"],oyt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],syt=["content-encoding","content-language","content-location","content-type","content-length"],ayt=["half"],$ke=["CONNECT","TRACE","TRACK"],lyt=new Set($ke),zke=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],cyt=new Set(zke);Yke.exports={subresource:zke,forbiddenMethods:$ke,requestBodyHeader:syt,referrerPolicy:jke,requestRedirect:tyt,requestMode:nyt,requestCredentials:iyt,requestCache:oyt,redirectStatus:Gke,corsSafeListedMethods:Wke,nullBodyStatus:J1t,safeMethods:Vke,badPorts:Hke,requestDuplex:ayt,subresourceSet:cyt,badPortsSet:Z1t,redirectStatusSet:X1t,corsSafeListedMethodsSet:K1t,safeMethodsSet:ryt,forbiddenMethodsSet:lyt,referrerPolicySet:eyt}});var pse=G((IVr,Kke)=>{"use strict";f();var fse=Symbol.for("undici.globalOrigin.1");function uyt(){return globalThis[fse]}s(uyt,"getGlobalOrigin");function dyt(t){if(t===void 0){Object.defineProperty(globalThis,fse,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,fse,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(dyt,"setGlobalOrigin");Kke.exports={getGlobalOrigin:uyt,setGlobalOrigin:dyt}});var Ed=G((_Vr,nBe)=>{"use strict";f();var Mq=require("node:assert"),fyt=new TextEncoder,PP=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,pyt=/[\u000A\u000D\u0009\u0020]/,myt=/[\u0009\u000A\u000C\u000D\u0020]/g,hyt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function gyt(t){Mq(t.protocol==="data:");let e=Zke(t,!0);e=e.slice(5);let r={position:0},n=Y5(",",e,r),i=n.length;if(n=byt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=eBe(o);if(/;(\u0020){0,}base64$/i.test(n)){let c=rBe(a);if(a=yyt(c),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let l=mse(n);return l==="failure"&&(l=mse("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(gyt,"dataURLProcessor");function Zke(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(Zke,"URLSerializer");function Qq(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(Qq,"collectASequenceOfCodePoints");function Y5(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(Y5,"collectASequenceOfCodePointsFast");function eBe(t){let e=fyt.encode(t);return Ayt(e)}s(eBe,"stringPercentDecode");function Jke(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(Jke,"isHexCharByte");function Xke(t){return t>=48&&t<=57?t-48:(t&223)-55}s(Xke,"hexByteToNumber");function Ayt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(Jke(t[i+1])&&Jke(t[i+2]))?r[n++]=37:(r[n++]=Xke(t[i+1])<<4|Xke(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(Ayt,"percentDecode");function mse(t){t=Fq(t,!0,!0);let e={position:0},r=Y5("/",t,e);if(r.length===0||!PP.test(r)||e.position>t.length)return"failure";e.position++;let n=Y5(";",t,e);if(n=Fq(n,!1,!0),n.length===0||!PP.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,Qq(u=>pyt.test(u),t,e);let l=Qq(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=tBe(t,e,!0),Y5(";",t,e);else if(c=Y5(";",t,e),c=Fq(c,!1,!0),c.length===0)continue;l.length!==0&&PP.test(l)&&(c.length===0||hyt.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(mse,"parseMIMEType");function yyt(t){t=t.replace(myt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(yyt,"forgivingBase64");function tBe(t,e,r){let n=e.position,i="";for(Mq(t[e.position]==='"'),e.position++;i+=Qq(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Mq(o==='"');break}}return r?i:t.slice(n,e.position)}s(tBe,"collectAnHTTPQuotedString");function Cyt(t){Mq(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",PP.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(Cyt,"serializeAMimeType");function xyt(t){return t===13||t===10||t===9||t===32}s(xyt,"isHTTPWhiteSpace");function Fq(t,e=!0,r=!0){return hse(t,e,r,xyt)}s(Fq,"removeHTTPWhitespace");function vyt(t){return t===13||t===10||t===9||t===12||t===32}s(vyt,"isASCIIWhitespace");function byt(t,e=!0,r=!0){return hse(t,e,r,vyt)}s(byt,"removeASCIIWhitespace");function hse(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(hse,"removeChars");function rBe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(rBe,"isomorphicDecode");function Eyt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(Eyt,"minimizeSupportedMimeType");nBe.exports={dataURLProcessor:gyt,URLSerializer:Zke,collectASequenceOfCodePoints:Qq,collectASequenceOfCodePointsFast:Y5,stringPercentDecode:eBe,parseMIMEType:mse,collectAnHTTPQuotedString:tBe,serializeAMimeType:Cyt,removeChars:hse,removeHTTPWhitespace:Fq,minimizeSupportedMimeType:Eyt,HTTP_TOKEN_CODEPOINTS:PP,isomorphicDecode:rBe}});var yc=G((kVr,iBe)=>{"use strict";f();var{types:Dg,inspect:Iyt}=require("node:util"),{markAsUncloneable:Tyt}=require("node:worker_threads"),{toUSVString:wyt}=Ai(),Dt={};Dt.converters={};Dt.util={};Dt.errors={};Dt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Dt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Dt.errors.exception({header:t.prefix,message:r})};Dt.errors.invalidArgument=function(t){return Dt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Dt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Dt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Dt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Dt.illegalConstructor=function(){throw Dt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Dt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Dt.util.markAsUncloneable=Tyt||(()=>{});Dt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Dt.errors.exception({header:"Integer conversion",message:`Could not convert ${Dt.util.Stringify(t)} to an integer.`});if(a=Dt.util.IntegerPart(a),a<o||a>i)throw Dt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Dt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Dt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Dt.util.Stringify=function(t){switch(Dt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return Iyt(t);case"String":return`"${t}"`;default:return`${t}`}};Dt.sequenceConverter=function(t){return(e,r,n,i)=>{if(Dt.util.Type(e)!=="Object")throw Dt.errors.exception({header:r,message:`${n} (${Dt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Dt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,r,`${n}[${l++}]`))}return a}};Dt.recordConverter=function(t,e){return(r,n,i)=>{if(Dt.util.Type(r)!=="Object")throw Dt.errors.exception({header:n,message:`${i} ("${Dt.util.Type(r)}") is not an Object.`});let o={};if(!Dg.isProxy(r)){let l=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let c of l){let u=t(c,n,i),d=e(r[c],n,i);o[u]=d}return o}let a=Reflect.ownKeys(r);for(let l of a)if(Reflect.getOwnPropertyDescriptor(r,l)?.enumerable){let u=t(l,n,i),d=e(r[l],n,i);o[u]=d}return o}};Dt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Dt.errors.exception({header:r,message:`Expected ${n} ("${Dt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Dt.dictionaryConverter=function(t){return(e,r,n)=>{let i=Dt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Dt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Dt.errors.exception({header:r,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,r,`${n}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Dt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Dt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Dt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Dt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Dt.converters.ByteString=function(t,e,r){let n=Dt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Dt.converters.USVString=wyt;Dt.converters.boolean=function(t){return!!t};Dt.converters.any=function(t){return t};Dt.converters["long long"]=function(t,e,r){return Dt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Dt.converters["unsigned long long"]=function(t,e,r){return Dt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Dt.converters["unsigned long"]=function(t,e,r){return Dt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Dt.converters["unsigned short"]=function(t,e,r,n){return Dt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Dt.converters.ArrayBuffer=function(t,e,r,n){if(Dt.util.Type(t)!=="Object"||!Dg.isAnyArrayBuffer(t))throw Dt.errors.conversionFailed({prefix:e,argument:`${r} ("${Dt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&Dg.isSharedArrayBuffer(t))throw Dt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Dt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Dt.converters.TypedArray=function(t,e,r,n,i){if(Dt.util.Type(t)!=="Object"||!Dg.isTypedArray(t)||t.constructor.name!==e.name)throw Dt.errors.conversionFailed({prefix:r,argument:`${n} ("${Dt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Dg.isSharedArrayBuffer(t.buffer))throw Dt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Dt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Dt.converters.DataView=function(t,e,r,n){if(Dt.util.Type(t)!=="Object"||!Dg.isDataView(t))throw Dt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&Dg.isSharedArrayBuffer(t.buffer))throw Dt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Dt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Dt.converters.BufferSource=function(t,e,r,n){if(Dg.isAnyArrayBuffer(t))return Dt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(Dg.isTypedArray(t))return Dt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(Dg.isDataView(t))return Dt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Dt.errors.conversionFailed({prefix:e,argument:`${r} ("${Dt.util.Stringify(t)}")`,types:["BufferSource"]})};Dt.converters["sequence<ByteString>"]=Dt.sequenceConverter(Dt.converters.ByteString);Dt.converters["sequence<sequence<ByteString>>"]=Dt.sequenceConverter(Dt.converters["sequence<ByteString>"]);Dt.converters["record<ByteString, ByteString>"]=Dt.recordConverter(Dt.converters.ByteString,Dt.converters.ByteString);iBe.exports={webidl:Dt}});var S0=G((PVr,yBe)=>{"use strict";f();var{Transform:_yt}=require("node:stream"),oBe=require("node:zlib"),{redirectStatusSet:Syt,referrerPolicySet:Ryt,badPortsSet:kyt}=BP(),{getGlobalOrigin:sBe}=pse(),{collectASequenceOfCodePoints:x2,collectAnHTTPQuotedString:Byt,removeChars:Pyt,parseMIMEType:Dyt}=Ed(),{performance:Nyt}=require("node:perf_hooks"),{isBlobLike:Lyt,ReadableStreamFrom:Fyt,isValidHTTPToken:aBe,normalizedMethodRecordsBase:Myt}=Ai(),v2=require("node:assert"),{isUint8Array:Qyt}=require("node:util/types"),{webidl:DP}=yc(),lBe=[],Uq;try{Uq=require("node:crypto");let t=["sha256","sha384","sha512"];lBe=Uq.getHashes().filter(e=>t.includes(e))}catch{}function cBe(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(cBe,"responseURL");function Oyt(t,e){if(!Syt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&dBe(r)&&(uBe(r)||(r=Uyt(r)),r=new URL(r,cBe(t))),r&&!r.hash&&(r.hash=e),r}s(Oyt,"responseLocationURL");function uBe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(uBe,"isValidEncodedURL");function Uyt(t){return Buffer.from(t,"binary").toString("utf8")}s(Uyt,"normalizeBinaryStringToUtf8");function LP(t){return t.urlList[t.urlList.length-1]}s(LP,"requestCurrentURL");function qyt(t){let e=LP(t);return gBe(e)&&kyt.has(e.port)?"blocked":"allowed"}s(qyt,"requestBadPort");function Wyt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(Wyt,"isErrorLike");function Gyt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(Gyt,"isValidReasonPhrase");var Hyt=aBe;function dBe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(dBe,"isValidHeaderValue");function jyt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(Ryt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(jyt,"setRequestReferrerPolicyOnRedirect");function Vyt(){return"allowed"}s(Vyt,"crossOriginResourcePolicyCheck");function $yt(){return"success"}s($yt,"corsCheck");function zyt(){return"success"}s(zyt,"TAOCheck");function Yyt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(Yyt,"appendFetchMetadata");function Kyt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&Ase(t.origin)&&!Ase(LP(t))&&(e=null);break;case"same-origin":qq(t,LP(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(Kyt,"appendRequestOriginHeader");function K5(t,e){return t}s(K5,"coarsenTime");function Jyt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:K5(t.domainLookupStartTime,r),domainLookupEndTime:K5(t.domainLookupEndTime,r),connectionStartTime:K5(t.connectionStartTime,r),connectionEndTime:K5(t.connectionEndTime,r),secureConnectionStartTime:K5(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(Jyt,"clampAndCoarsenConnectionTimingInfo");function Xyt(t){return K5(Nyt.now(),t)}s(Xyt,"coarsenedSharedCurrentTime");function Zyt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(Zyt,"createOpaqueTimingInfo");function fBe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(fBe,"makePolicyContainer");function eCt(t){return{referrerPolicy:t.referrerPolicy}}s(eCt,"clonePolicyContainer");function tCt(t){let e=t.referrerPolicy;v2(e);let r=null;if(t.referrer==="client"){let l=sBe();if(!l||l.origin==="null")return"no-referrer";r=new URL(l)}else t.referrer instanceof URL&&(r=t.referrer);let n=gse(r),i=gse(r,!0);n.toString().length>4096&&(n=i);let o=qq(t,n),a=NP(n)&&!NP(t.url);switch(e){case"origin":return i??gse(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let l=LP(t);return qq(n,l)?n:NP(n)&&!NP(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(tCt,"determineRequestsReferrer");function gse(t,e){return v2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(gse,"stripURLForReferrer");function NP(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(NP,"isURLPotentiallyTrustworthy");function rCt(t,e){if(Uq===void 0)return!0;let r=pBe(e);if(r==="no metadata"||r.length===0)return!0;let n=iCt(r),i=oCt(r,n);for(let o of i){let a=o.algo,l=o.hash,c=Uq.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),sCt(c,l))return!0}return!1}s(rCt,"bytesMatch");var nCt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function pBe(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=nCt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();lBe.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(pBe,"parseMetadata");function iCt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(iCt,"getStrongestMetadata");function oCt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(oCt,"filterMetadataListByAlgorithm");function sCt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(sCt,"compareBase64Mixed");function aCt(t){}s(aCt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function qq(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(qq,"sameOrigin");function lCt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(lCt,"createDeferredPromise");function cCt(t){return t.controller.state==="aborted"}s(cCt,"isAborted");function uCt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(uCt,"isCancelled");function dCt(t){return Myt[t.toLowerCase()]??t}s(dCt,"normalizeMethod");function fCt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return v2(typeof e=="string"),e}s(fCt,"serializeJavascriptValueToJSONString");var pCt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function mBe(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[r]:u,[n]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,pCt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(mBe,"createIterator");function mCt(t,e,r,n=0,i=1){let o=mBe(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return DP.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return DP.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return DP.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(DP.brandCheck(this,e),DP.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(mCt,"iteratorMixin");async function hCt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await hBe(o))}catch(a){i(a)}}s(hCt,"fullyReadBody");function gCt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(gCt,"isReadableStreamLike");function ACt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(ACt,"readableStreamClose");var yCt=/[^\x00-\xFF]/;function Oq(t){return v2(!yCt.test(t)),t}s(Oq,"isomorphicEncode");async function hBe(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!Qyt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(hBe,"readAllBytes");function CCt(t){v2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(CCt,"urlIsLocal");function Ase(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(Ase,"urlHasHttpsScheme");function gBe(t){v2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(gBe,"urlIsHttpHttpsScheme");function xCt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&x2(c=>c==="	"||c===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&x2(c=>c==="	"||c===" ",r,n);let i=x2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&x2(c=>c==="	"||c===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&x2(c=>c==="	"||c===" ",r,n);let a=x2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},r,n),l=a.length?Number(a):null;return n.position<r.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(xCt,"simpleRangeHeaderValue");function vCt(t,e,r){let n="bytes ";return n+=Oq(`${t}`),n+="-",n+=Oq(`${e}`),n+="/",n+=Oq(`${r}`),n}s(vCt,"buildContentRange");var yse=class extends _yt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?oBe.createInflate(this.#e):oBe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function bCt(t){return new yse(t)}s(bCt,"createInflate");function ECt(t){let e=null,r=null,n=null,i=ABe("content-type",t);if(i===null)return"failure";for(let o of i){let a=Dyt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(ECt,"extractMimeType");function ICt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=x2(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=Byt(e,r),r.position<e.length)continue}else v2(e.charCodeAt(r.position)===44),r.position++;i=Pyt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(ICt,"gettingDecodingSplitting");function ABe(t,e){let r=e.get(t,!0);return r===null?null:ICt(r)}s(ABe,"getDecodeSplit");var TCt=new TextDecoder;function wCt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),TCt.decode(t))}s(wCt,"utf8DecodeBytes");var Cse=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return sBe()}get origin(){return this.baseUrl?.origin}policyContainer=fBe()},xse=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new Cse},_Ct=new xse;yBe.exports={isAborted:cCt,isCancelled:uCt,isValidEncodedURL:uBe,createDeferredPromise:lCt,ReadableStreamFrom:Fyt,tryUpgradeRequestToAPotentiallyTrustworthyURL:aCt,clampAndCoarsenConnectionTimingInfo:Jyt,coarsenedSharedCurrentTime:Xyt,determineRequestsReferrer:tCt,makePolicyContainer:fBe,clonePolicyContainer:eCt,appendFetchMetadata:Yyt,appendRequestOriginHeader:Kyt,TAOCheck:zyt,corsCheck:$yt,crossOriginResourcePolicyCheck:Vyt,createOpaqueTimingInfo:Zyt,setRequestReferrerPolicyOnRedirect:jyt,isValidHTTPToken:aBe,requestBadPort:qyt,requestCurrentURL:LP,responseURL:cBe,responseLocationURL:Oyt,isBlobLike:Lyt,isURLPotentiallyTrustworthy:NP,isValidReasonPhrase:Gyt,sameOrigin:qq,normalizeMethod:dCt,serializeJavascriptValueToJSONString:fCt,iteratorMixin:mCt,createIterator:mBe,isValidHeaderName:Hyt,isValidHeaderValue:dBe,isErrorLike:Wyt,fullyReadBody:hCt,bytesMatch:rCt,isReadableStreamLike:gCt,readableStreamClose:ACt,isomorphicEncode:Oq,urlIsLocal:CCt,urlHasHttpsScheme:Ase,urlIsHttpHttpsScheme:gBe,readAllBytes:hBe,simpleRangeHeaderValue:xCt,buildContentRange:vCt,parseMetadata:pBe,createInflate:bCt,extractMimeType:ECt,getDecodeSplit:ABe,utf8DecodeBytes:wCt,environmentSettingsObject:_Ct}});var Ev=G((LVr,CBe)=>{"use strict";f();CBe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var bse=G((MVr,xBe)=>{"use strict";f();var{Blob:SCt,File:RCt}=require("node:buffer"),{kState:J1}=Ev(),{webidl:Ng}=yc(),vse=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[J1]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Ng.brandCheck(this,t),this[J1].blobLike.stream(...e)}arrayBuffer(...e){return Ng.brandCheck(this,t),this[J1].blobLike.arrayBuffer(...e)}slice(...e){return Ng.brandCheck(this,t),this[J1].blobLike.slice(...e)}text(...e){return Ng.brandCheck(this,t),this[J1].blobLike.text(...e)}get size(){return Ng.brandCheck(this,t),this[J1].blobLike.size}get type(){return Ng.brandCheck(this,t),this[J1].blobLike.type}get name(){return Ng.brandCheck(this,t),this[J1].name}get lastModified(){return Ng.brandCheck(this,t),this[J1].lastModified}get[Symbol.toStringTag](){return"File"}};Ng.converters.Blob=Ng.interfaceConverter(SCt);function kCt(t){return t instanceof RCt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(kCt,"isFileLike");xBe.exports={FileLike:vse,isFileLike:kCt}});var MP=G((UVr,TBe)=>{"use strict";f();var{isBlobLike:Wq,iteratorMixin:BCt}=S0(),{kState:Mu}=Ev(),{kEnumerableProperty:J5}=Ai(),{FileLike:vBe,isFileLike:PCt}=bse(),{webidl:ts}=yc(),{File:IBe}=require("node:buffer"),bBe=require("node:util"),EBe=globalThis.File??IBe,FP=class t{static{s(this,"FormData")}constructor(e){if(ts.util.markAsUncloneable(this),e!==void 0)throw ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Mu]=[]}append(e,r,n=void 0){ts.brandCheck(this,t);let i="FormData.append";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Wq(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),r=Wq(r)?ts.converters.Blob(r,i,"value",{strict:!1}):ts.converters.USVString(r,i,"value"),n=arguments.length===3?ts.converters.USVString(n,i,"filename"):void 0;let o=Ese(e,r,n);this[Mu].push(o)}delete(e){ts.brandCheck(this,t);let r="FormData.delete";ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Mu]=this[Mu].filter(n=>n.name!==e)}get(e){ts.brandCheck(this,t);let r="FormData.get";ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name");let n=this[Mu].findIndex(i=>i.name===e);return n===-1?null:this[Mu][n].value}getAll(e){ts.brandCheck(this,t);let r="FormData.getAll";return ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Mu].filter(n=>n.name===e).map(n=>n.value)}has(e){ts.brandCheck(this,t);let r="FormData.has";return ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Mu].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){ts.brandCheck(this,t);let i="FormData.set";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Wq(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),r=Wq(r)?ts.converters.Blob(r,i,"name",{strict:!1}):ts.converters.USVString(r,i,"name"),n=arguments.length===3?ts.converters.USVString(n,i,"name"):void 0;let o=Ese(e,r,n),a=this[Mu].findIndex(l=>l.name===e);a!==-1?this[Mu]=[...this[Mu].slice(0,a),o,...this[Mu].slice(a+1).filter(l=>l.name!==e)]:this[Mu].push(o)}[bBe.inspect.custom](e,r){let n=this[Mu].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=bBe.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};BCt("FormData",FP,Mu,"name","value");Object.defineProperties(FP.prototype,{append:J5,delete:J5,get:J5,getAll:J5,has:J5,set:J5,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Ese(t,e,r){if(typeof e!="string"){if(PCt(e)||(e=e instanceof Blob?new EBe([e],"blob",{type:e.type}):new vBe(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof IBe?new EBe([e],r,n):new vBe(e,r,n)}}return{name:t,value:e}}s(Ese,"makeEntry");TBe.exports={FormData:FP,makeEntry:Ese}});var BBe=G((GVr,kBe)=>{"use strict";f();var{isUSVString:wBe,bufferToLowerCasedHeaderName:DCt}=Ai(),{utf8DecodeBytes:NCt}=S0(),{HTTP_TOKEN_CODEPOINTS:LCt,isomorphicDecode:_Be}=Ed(),{isFileLike:FCt}=bse(),{makeEntry:MCt}=MP(),Gq=require("node:assert"),{File:QCt}=require("node:buffer"),OCt=globalThis.File??QCt,UCt=Buffer.from('form-data; name="'),SBe=Buffer.from("; filename"),qCt=Buffer.from("--"),WCt=Buffer.from(`--\r
`);function GCt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(GCt,"isAsciiString");function HCt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(HCt,"validateBoundary");function jCt(t,e){Gq(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&Hq(t,qCt,o)||o.position===t.length-4&&Hq(t,WCt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=VCt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",GCt(d)||(d=""),h=new OCt([m],u,{type:d})):h=NCt(Buffer.from(m)),Gq(wBe(c)),Gq(typeof h=="string"&&wBe(h)||FCt(h)),i.push(MCt(c,h,u))}}s(jCt,"multipartFormDataParser");function VCt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=X5(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Ise(a,!0,!0,l=>l===9||l===32),!LCt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,X5(l=>l===32||l===9,t,e),DCt(a)){case"content-disposition":{if(r=n=null,!Hq(t,UCt,e)||(e.position+=17,r=RBe(t,e),r===null))return"failure";if(Hq(t,SBe,e)){let l=e.position+SBe.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,n=RBe(t,e),n===null))return"failure"}break}case"content-type":{let l=X5(c=>c!==10&&c!==13,t,e);l=Ise(l,!1,!0,c=>c===9||c===32),i=_Be(l);break}case"content-transfer-encoding":{let l=X5(c=>c!==10&&c!==13,t,e);l=Ise(l,!1,!0,c=>c===9||c===32),o=_Be(l);break}default:X5(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(VCt,"parseMultipartFormDataHeaders");function RBe(t,e){Gq(t[e.position-1]===34);let r=X5(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(RBe,"parseMultipartFormDataName");function X5(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(X5,"collectASequenceOfBytes");function Ise(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Ise,"removeChars");function Hq(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(Hq,"bufferStartsWith");kBe.exports={multipartFormDataParser:jCt,validateBoundary:HCt}});var t4=G((VVr,OBe)=>{"use strict";f();var QP=Ai(),{ReadableStreamFrom:$Ct,isBlobLike:PBe,isReadableStreamLike:zCt,readableStreamClose:YCt,createDeferredPromise:KCt,fullyReadBody:JCt,extractMimeType:XCt,utf8DecodeBytes:LBe}=S0(),{FormData:DBe}=MP(),{kState:e4}=Ev(),{webidl:ZCt}=yc(),{Blob:ext}=require("node:buffer"),Tse=require("node:assert"),{isErrored:FBe,isDisturbed:txt}=require("node:stream"),{isArrayBuffer:rxt}=require("node:util/types"),{serializeAMimeType:nxt}=Ed(),{multipartFormDataParser:ixt}=BBe(),wse;try{let t=require("node:crypto");wse=s(e=>t.randomInt(0,e),"random")}catch{wse=s(t=>Math.floor(Math.random(t)),"random")}var jq=new TextEncoder;function oxt(){}s(oxt,"noop");var _se=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Sse;_se&&(Sse=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!txt(e)&&!FBe(e)&&e.cancel("Response object has been garbage collected").catch(oxt)}));function MBe(t,e=!1){let r=null;t instanceof ReadableStream?r=t:PBe(t)?r=t.stream():r=new ReadableStream({async pull(c){let u=typeof i=="string"?jq.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>YCt(c))},start(){},type:"bytes"}),Tse(zCt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(rxt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(QP.isFormDataLike(t)){let c=`----formdata-undici-0${`${wse(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=jq.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=jq.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=jq.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(PBe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(QP.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:$Ct(t)}if((typeof i=="string"||QP.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let c;r=new ReadableStream({async start(){c=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!FBe(r)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(MBe,"extractBody");function sxt(t,e=!1){return t instanceof ReadableStream&&(Tse(!QP.isDisturbed(t),"The body has already been consumed."),Tse(!t.locked,"The stream is locked.")),MBe(t,e)}s(sxt,"safelyExtractBody");function axt(t,e){let[r,n]=e.stream.tee();return _se&&Sse.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(axt,"cloneBody");function lxt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(lxt,"throwIfAborted");function cxt(t){return{blob(){return Z5(this,r=>{let n=NBe(this);return n===null?n="":n&&(n=nxt(n)),new ext([r],{type:n})},t)},arrayBuffer(){return Z5(this,r=>new Uint8Array(r).buffer,t)},text(){return Z5(this,LBe,t)},json(){return Z5(this,dxt,t)},formData(){return Z5(this,r=>{let n=NBe(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=ixt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new DBe;return o[e4]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new DBe;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return Z5(this,r=>new Uint8Array(r),t)}}}s(cxt,"bodyMixinMethods");function uxt(t){Object.assign(t.prototype,cxt(t))}s(uxt,"mixinBody");async function Z5(t,e,r){if(ZCt.brandCheck(t,r),QBe(t))throw new TypeError("Body is unusable: Body has already been read");lxt(t[e4]);let n=KCt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[e4].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await JCt(t[e4].body,o,i),n.promise)}s(Z5,"consumeBody");function QBe(t){let e=t[e4].body;return e!=null&&(e.stream.locked||QP.isDisturbed(e.stream))}s(QBe,"bodyUnusable");function dxt(t){return JSON.parse(LBe(t))}s(dxt,"parseJSONFromBytes");function NBe(t){let e=t[e4].headersList,r=XCt(e);return r==="failure"?null:r}s(NBe,"bodyMimeType");OBe.exports={extractBody:MBe,safelyExtractBody:sxt,cloneBody:axt,mixinBody:uxt,streamRegistry:Sse,hasFinalizationRegistry:_se,bodyUnusable:QBe}});var KBe=G((YVr,YBe)=>{"use strict";f();var yn=require("node:assert"),jn=Ai(),{channels:UBe}=W5(),Rse=lse(),{RequestContentLengthMismatchError:b2,ResponseContentLengthMismatchError:fxt,RequestAbortedError:VBe,HeadersTimeoutError:pxt,HeadersOverflowError:mxt,SocketError:Jq,InformationalError:r4,BodyTimeoutError:hxt,HTTPParserError:gxt,ResponseExceededMaxSizeError:Axt}=yo(),{kUrl:$Be,kReset:Id,kClient:Dse,kParser:ca,kBlocking:qP,kRunning:Xc,kPending:yxt,kSize:qBe,kWriting:Tv,kQueue:Mm,kNoRef:OP,kKeepAliveDefaultTimeout:Cxt,kHostHeader:xxt,kPendingIdx:vxt,kRunningIdx:np,kError:ip,kPipelining:Yq,kSocket:n4,kKeepAliveTimeoutValue:Xq,kMaxHeadersSize:kse,kKeepAliveMaxTimeout:bxt,kKeepAliveTimeoutThreshold:Ext,kHeadersTimeout:Ixt,kBodyTimeout:Txt,kStrictContentLength:Nse,kMaxRequests:WBe,kCounter:wxt,kMaxResponseSize:_xt,kOnError:Sxt,kResume:Iv,kHTTPContext:zBe}=Qs(),Lg=Qke(),Rxt=Buffer.alloc(0),Vq=Buffer[Symbol.species],$q=jn.addListener,kxt=jn.removeAllListeners,Bse;async function Bxt(){let t=process.env.JEST_WORKER_ID?dse():void 0,e;try{e=await WebAssembly.compile(qke())}catch{e=await WebAssembly.compile(t||dse())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{yn(Al.ptr===r);let o=n-Mg+Fg.byteOffset;return Al.onStatus(new Vq(Fg.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(yn(Al.ptr===r),Al.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{yn(Al.ptr===r);let o=n-Mg+Fg.byteOffset;return Al.onHeaderField(new Vq(Fg.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{yn(Al.ptr===r);let o=n-Mg+Fg.byteOffset;return Al.onHeaderValue(new Vq(Fg.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(yn(Al.ptr===r),Al.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{yn(Al.ptr===r);let o=n-Mg+Fg.byteOffset;return Al.onBody(new Vq(Fg.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(yn(Al.ptr===r),Al.onMessageComplete()||0),"wasm_on_message_complete")}})}s(Bxt,"lazyllhttp");var Pse=null,Lse=Bxt();Lse.catch();var Al=null,Fg=null,zq=0,Mg=null,Pxt=0,UP=1,i4=2|UP,Kq=4|UP,Fse=8|Pxt,Mse=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){yn(Number.isFinite(e[kse])&&e[kse]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(Lg.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[kse],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[_xt]}setTimeout(e,r){e!==this.timeoutValue||r&UP^this.timeoutType&UP?(this.timeout&&(Rse.clearTimeout(this.timeout),this.timeout=null),e&&(r&UP?this.timeout=Rse.setFastTimeout(GBe,e,new WeakRef(this)):(this.timeout=setTimeout(GBe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(yn(this.ptr!=null),yn(Al==null),this.llhttp.llhttp_resume(this.ptr),yn(this.timeoutType===Kq),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Rxt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){yn(this.ptr!=null),yn(Al==null),yn(!this.paused);let{socket:r,llhttp:n}=this;e.length>zq&&(Mg&&n.free(Mg),zq=Math.ceil(e.length/4096)*4096,Mg=n.malloc(zq)),new Uint8Array(n.memory.buffer,Mg,zq).set(e);try{let i;try{Fg=e,Al=this,i=n.llhttp_execute(this.ptr,Mg,e.length)}catch(a){throw a}finally{Al=null,Fg=null}let o=n.llhttp_get_error_pos(this.ptr)-Mg;if(i===Lg.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Lg.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==Lg.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(n.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,c).toString()+")"}throw new gxt(l,Lg.ERROR[i],e.slice(o))}}catch(i){jn.destroy(r,i)}}destroy(){yn(this.ptr!=null),yn(Al==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Rse.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[Mm][r[np]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=jn.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&jn.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&jn.destroy(this.socket,new mxt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;yn(r),yn(n[n4]===i),yn(!i.destroyed),yn(!this.paused),yn((o.length&1)===0);let l=n[Mm][n[np]];yn(l),yn(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[ca].destroy(),i[ca]=null,i[Dse]=null,i[ip]=null,kxt(i),n[n4]=null,n[zBe]=null,n[Mm][n[np]++]=null,n.emit("disconnect",n[$Be],[n],new r4("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){jn.destroy(i,c)}n[Iv]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[Mm][i[np]];if(!c)return-1;if(yn(!this.upgrade),yn(this.statusCode<200),e===100)return jn.destroy(o,new Jq("bad response",jn.getSocketInfo(o))),-1;if(r&&!c.upgrade)return jn.destroy(o,new Jq("bad upgrade",jn.getSocketInfo(o))),-1;if(yn(this.timeoutType===i4),this.statusCode=e,this.shouldKeepAlive=n||c.method==="HEAD"&&!o[Id]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[Txt];this.setTimeout(d,Kq)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return yn(i[Xc]===1),this.upgrade=!0,2;if(r)return yn(i[Xc]===1),this.upgrade=!0,2;if(yn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[Yq]){let d=this.keepAlive?jn.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[Ext],i[bxt]);p<=0?o[Id]=!0:i[Xq]=p}else i[Xq]=i[Cxt]}else o[Id]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[qP]&&(o[qP]=!1,i[Iv]()),u?Lg.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[Mm][r[np]];if(yn(a),yn(this.timeoutType===Kq),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),yn(i>=200),o>-1&&this.bytesRead+e.length>o)return jn.destroy(n,new Axt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Lg.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(r.destroyed&&(!n||c))return-1;if(i)return;yn(n>=100),yn((this.headers.length&1)===0);let u=e[Mm][e[np]];if(yn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return jn.destroy(r,new fxt),-1;if(u.onComplete(o),e[Mm][e[np]++]=null,r[Tv])return yn(e[Xc]===0),jn.destroy(r,new r4("reset")),Lg.ERROR.PAUSED;if(c){if(r[Id]&&e[Xc]===0)return jn.destroy(r,new r4("reset")),Lg.ERROR.PAUSED;e[Yq]==null||e[Yq]===1?setImmediate(()=>e[Iv]()):e[Iv]()}else return jn.destroy(r,new r4("reset")),Lg.ERROR.PAUSED}}};function GBe(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===i4?(!e[Tv]||e.writableNeedDrain||n[Xc]>1)&&(yn(!i,"cannot be paused while waiting for headers"),jn.destroy(e,new pxt)):r===Kq?i||jn.destroy(e,new hxt):r===Fse&&(yn(n[Xc]===0&&n[Xq]),jn.destroy(e,new r4("socket idle timeout")))}s(GBe,"onParserTimeout");async function Dxt(t,e){t[n4]=e,Pse||(Pse=await Lse,Lse=null),e[OP]=!1,e[Tv]=!1,e[Id]=!1,e[qP]=!1,e[ca]=new Mse(t,e,Pse),$q(e,"error",function(n){yn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[ca];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[ip]=n,this[Dse][Sxt](n)}),$q(e,"readable",function(){let n=this[ca];n&&n.readMore()}),$q(e,"end",function(){let n=this[ca];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}jn.destroy(this,new Jq("other side closed",jn.getSocketInfo(this)))}),$q(e,"close",function(){let n=this[Dse],i=this[ca];i&&(!this[ip]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[ca].destroy(),this[ca]=null);let o=this[ip]||new Jq("closed",jn.getSocketInfo(this));if(n[n4]=null,n[zBe]=null,n.destroyed){yn(n[yxt]===0);let a=n[Mm].splice(n[np]);for(let l=0;l<a.length;l++){let c=a[l];jn.errorRequest(n,c,o)}}else if(n[Xc]>0&&o.code!=="UND_ERR_INFO"){let a=n[Mm][n[np]];n[Mm][n[np]++]=null,jn.errorRequest(n,a,o)}n[vxt]=n[np],yn(n[Xc]===0),n.emit("disconnect",n[$Be],[n],o),n[Iv]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return Fxt(t,...n)},resume(){Nxt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[Tv]||e[Id]||e[qP]||n&&(t[Xc]>0&&!n.idempotent||t[Xc]>0&&(n.upgrade||n.method==="CONNECT")||t[Xc]>0&&jn.bodyLength(n.body)!==0&&(jn.isStream(n.body)||jn.isAsyncIterable(n.body)||jn.isFormDataLike(n.body))))}}}s(Dxt,"connectH1");function Nxt(t){let e=t[n4];if(e&&!e.destroyed){if(t[qBe]===0?!e[OP]&&e.unref&&(e.unref(),e[OP]=!0):e[OP]&&e.ref&&(e.ref(),e[OP]=!1),t[qBe]===0)e[ca].timeoutType!==Fse&&e[ca].setTimeout(t[Xq],Fse);else if(t[Xc]>0&&e[ca].statusCode<200&&e[ca].timeoutType!==i4){let r=t[Mm][t[np]],n=r.headersTimeout!=null?r.headersTimeout:t[Ixt];e[ca].setTimeout(n,i4)}}}s(Nxt,"resumeH1");function Lxt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Lxt,"shouldSendContentLength");function Fxt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(jn.isFormDataLike(c)){Bse||(Bse=t4().extractBody);let[v,b]=Bse(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else jn.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=jn.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),Lxt(r)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[Nse])return jn.errorRequest(t,e,new b2),!1;process.emitWarning(new b2)}let h=t[n4],g=s(v=>{e.aborted||e.completed||(jn.errorRequest(t,e,v||new VBe),jn.destroy(c),jn.destroy(h,new r4("aborted")))},"abort");try{e.onConnect(g)}catch(v){jn.errorRequest(t,e,v)}if(e.aborted)return!1;r==="HEAD"&&(h[Id]=!0),(o||r==="CONNECT")&&(h[Id]=!0),l!=null&&(h[Id]=l),t[WBe]&&h[wxt]++>=t[WBe]&&(h[Id]=!0),a&&(h[qP]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[xxt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[Yq]&&!h[Id]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return UBe.sendHeaders.hasSubscribers&&UBe.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?HBe(g,null,t,e,h,d,y,p):jn.isBuffer(c)?HBe(g,c,t,e,h,d,y,p):jn.isBlobLike(c)?typeof c.stream=="function"?jBe(g,c.stream(),t,e,h,d,y,p):Qxt(g,c,t,e,h,d,y,p):jn.isStream(c)?Mxt(g,c,t,e,h,d,y,p):jn.isIterable(c)?jBe(g,c,t,e,h,d,y,p):yn(!1),!0}s(Fxt,"writeH1");function Mxt(t,e,r,n,i,o,a,l){yn(o!==0||r[Xc]===0,"stream body cannot be pipelined");let c=!1,u=new Zq({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){jn.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new VBe;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,yn(i.destroyed||i[Tv]&&r[Xc]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?jn.destroy(e,g):jn.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(Mxt,"writeStream");function HBe(t,e,r,n,i,o,a,l){try{e?jn.isBuffer(e)&&(yn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!l&&n.reset!==!1&&(i[Id]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(yn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[Iv]()}catch(c){t(c)}}s(HBe,"writeBuffer");async function Qxt(t,e,r,n,i,o,a,l){yn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new b2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),n.onBodySent(c),n.onRequestSent(),!l&&n.reset!==!1&&(i[Id]=!0),r[Iv]()}catch(c){t(c)}}s(Qxt,"writeBlob");async function jBe(t,e,r,n,i,o,a,l){yn(o!==0||r[Xc]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{yn(c===null),i[ip]?h(i[ip]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new Zq({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:l,header:a});try{for await(let m of e){if(i[ip])throw i[ip];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(jBe,"writeIterable");var Zq=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,r[Tv]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(r[ip])throw r[ip];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[Nse])throw new b2;process.emitWarning(new b2)}r.cork(),a===0&&(!l&&n.reset!==!1&&(r[Id]=!0),i===null?r.write(`${c}transfer-encoding: chunked\r
`,"latin1"):r.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=r.write(e);return r.uncork(),n.onBodySent(e),d||r[ca].timeout&&r[ca].timeoutType===i4&&r[ca].timeout.refresh&&r[ca].timeout.refresh(),d}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[Tv]=!1,e[ip])throw e[ip];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[Nse])throw new b2;process.emitWarning(new b2)}e[ca].timeout&&e[ca].timeoutType===i4&&e[ca].timeout.refresh&&e[ca].timeout.refresh(),n[Iv]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[Tv]=!1,e&&(yn(n[Xc]<=1,"pipeline should only contain this request"),i(e))}};YBe.exports=Dxt});var i8e=G((XVr,n8e)=>{"use strict";f();var op=require("node:assert"),{pipeline:Oxt}=require("node:stream"),Fi=Ai(),{RequestContentLengthMismatchError:Qse,RequestAbortedError:JBe,SocketError:WP,InformationalError:Ose}=yo(),{kUrl:eW,kReset:rW,kClient:o4,kRunning:nW,kPending:Uxt,kQueue:wv,kPendingIdx:Use,kRunningIdx:Qm,kError:Um,kSocket:Hl,kStrictContentLength:qxt,kOnError:qse,kMaxConcurrentStreams:r8e,kHTTP2Session:Om,kResume:_v,kSize:Wxt,kHTTPContext:Gxt}=Qs(),X1=Symbol("open streams"),XBe,ZBe=!1,tW;try{tW=require("node:http2")}catch{tW={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:Hxt,HTTP2_HEADER_METHOD:jxt,HTTP2_HEADER_PATH:Vxt,HTTP2_HEADER_SCHEME:$xt,HTTP2_HEADER_CONTENT_LENGTH:zxt,HTTP2_HEADER_EXPECT:Yxt,HTTP2_HEADER_STATUS:Kxt}}=tW;function Jxt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(Jxt,"parseH2Headers");async function Xxt(t,e){t[Hl]=e,ZBe||(ZBe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=tW.connect(t[eW],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[r8e]});r[X1]=0,r[o4]=t,r[Hl]=e,Fi.addListener(r,"error",evt),Fi.addListener(r,"frameError",tvt),Fi.addListener(r,"end",rvt),Fi.addListener(r,"goaway",nvt),Fi.addListener(r,"close",function(){let{[o4]:i}=this,{[Hl]:o}=i,a=this[Hl][Um]||this[Um]||new WP("closed",Fi.getSocketInfo(o));if(i[Om]=null,i.destroyed){op(i[Uxt]===0);let l=i[wv].splice(i[Qm]);for(let c=0;c<l.length;c++){let u=l[c];Fi.errorRequest(i,u,a)}}}),r.unref(),t[Om]=r,e[Om]=r,Fi.addListener(e,"error",function(i){op(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Um]=i,this[o4][qse](i)}),Fi.addListener(e,"end",function(){Fi.destroy(this,new WP("other side closed",Fi.getSocketInfo(this)))}),Fi.addListener(e,"close",function(){let i=this[Um]||new WP("closed",Fi.getSocketInfo(this));t[Hl]=null,this[Om]!=null&&this[Om].destroy(i),t[Use]=t[Qm],op(t[nW]===0),t.emit("disconnect",t[eW],[t],i),t[_v]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return ovt(t,...i)},resume(){Zxt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(Xxt,"connectH2");function Zxt(t){let e=t[Hl];e?.destroyed===!1&&(t[Wxt]===0&&t[r8e]===0?(e.unref(),t[Om].unref()):(e.ref(),t[Om].ref()))}s(Zxt,"resumeH2");function evt(t){op(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Hl][Um]=t,this[o4][qse](t)}s(evt,"onHttp2SessionError");function tvt(t,e,r){if(r===0){let n=new Ose(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Hl][Um]=n,this[o4][qse](n)}}s(tvt,"onHttp2FrameError");function rvt(){let t=new WP("other side closed",Fi.getSocketInfo(this[Hl]));this.destroy(t),Fi.destroy(this[Hl],t)}s(rvt,"onHttp2SessionEnd");function nvt(t){let e=this[Um]||new WP(`HTTP/2: "GOAWAY" frame received with code ${t}`,Fi.getSocketInfo(this)),r=this[o4];if(r[Hl]=null,r[Gxt]=null,this[Om]!=null&&(this[Om].destroy(e),this[Om]=null),Fi.destroy(this[Hl],e),r[Qm]<r[wv].length){let n=r[wv][r[Qm]];r[wv][r[Qm]++]=null,Fi.errorRequest(r,n,e),r[Use]=r[Qm]}op(r[nW]===0),r.emit("disconnect",r[eW],[r],e),r[_v]()}s(nvt,"onHTTP2GoAway");function ivt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(ivt,"shouldSendContentLength");function ovt(t,e){let r=t[Om],{method:n,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Fi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let B=u[k+0],N=u[k+1];if(Array.isArray(N))for(let W=0;W<N.length;W++)p[B]?p[B]+=`,${N[W]}`:p[B]=N[W];else p[B]=N}let m,{hostname:h,port:g}=t[eW];p[Hxt]=o||`${h}${g?`:${g}`:""}`,p[jxt]=n;let y=s(k=>{e.aborted||e.completed||(k=k||new JBe,Fi.errorRequest(t,e,k),m!=null&&Fi.destroy(m,k),Fi.destroy(d,k),t[wv][t[Qm]++]=null,t[_v]())},"abort");try{e.onConnect(y)}catch(k){Fi.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[X1],t[wv][t[Qm]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[X1],t[wv][t[Qm]++]=null}),m.once("close",()=>{r[X1]-=1,r[X1]===0&&r.unref()}),!0;p[Vxt]=i,p[$xt]="https";let v=n==="PUT"||n==="POST"||n==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Fi.bodyLength(d);if(Fi.isFormDataLike(d)){XBe??=t4().extractBody;let[k,B]=XBe(d);p["content-type"]=B,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),ivt(n)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[qxt])return Fi.errorRequest(t,e,new Qse),!1;process.emitWarning(new Qse)}b!=null&&(op(d,"no body must not have content length"),p[zxt]=`${b}`),r.ref();let E=n==="GET"||n==="HEAD"||d===null;return l?(p[Yxt]="100-continue",m=r.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=r.request(p,{endStream:E,signal:c}),_()),++r[X1],m.once("response",k=>{let{[Kxt]:B,...N}=k;if(e.onResponseStarted(),e.aborted){let W=new JBe;Fi.errorRequest(t,e,W),Fi.destroy(m,W);return}e.onHeaders(Number(B),Jxt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",W=>{e.onData(W)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[X1]===0&&r.unref(),y(new Ose("HTTP/2: stream half-closed (remote)")),t[wv][t[Qm]++]=null,t[Use]=t[Qm],t[_v]()}),m.once("close",()=>{r[X1]-=1,r[X1]===0&&r.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,B)=>{y(new Ose(`HTTP/2: "frameError" received - type ${k}, code ${B}`))}),!0;function _(){!d||b===0?e8e(y,m,null,t,e,t[Hl],b,v):Fi.isBuffer(d)?e8e(y,m,d,t,e,t[Hl],b,v):Fi.isBlobLike(d)?typeof d.stream=="function"?t8e(y,m,d.stream(),t,e,t[Hl],b,v):avt(y,m,d,t,e,t[Hl],b,v):Fi.isStream(d)?svt(y,t[Hl],v,m,d,t,e,b):Fi.isIterable(d)?t8e(y,m,d,t,e,t[Hl],b,v):op(!1)}s(_,"writeBodyH2")}s(ovt,"writeH2");function e8e(t,e,r,n,i,o,a,l){try{r!=null&&Fi.isBuffer(r)&&(op(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),l||(o[rW]=!0),i.onRequestSent(),n[_v]()}catch(c){t(c)}}s(e8e,"writeBuffer");function svt(t,e,r,n,i,o,a,l){op(l!==0||o[nW]===0,"stream body cannot be pipelined");let c=Oxt(i,n,d=>{d?(Fi.destroy(c,d),t(d)):(Fi.removeAllListeners(c),a.onRequestSent(),r||(e[rW]=!0),o[_v]())});Fi.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(svt,"writeStream");async function avt(t,e,r,n,i,o,a,l){op(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new Qse;let c=Buffer.from(await r.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[rW]=!0),n[_v]()}catch(c){t(c)}}s(avt,"writeBlob");async function t8e(t,e,r,n,i,o,a,l){op(a!==0||n[nW]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{op(c===null),o[Um]?m(o[Um]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[Um])throw o[Um];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[rW]=!0),n[_v]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(t8e,"writeIterable");n8e.exports=Xxt});var oW=G((t$r,a8e)=>{"use strict";f();var Qg=Ai(),{kBodyUsed:GP}=Qs(),Gse=require("node:assert"),{InvalidArgumentError:lvt}=yo(),cvt=require("node:events"),uvt=[300,301,302,303,307,308],o8e=Symbol("body"),iW=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[o8e]=e,this[GP]=!1}async*[Symbol.asyncIterator](){Gse(!this[GP],"disturbed"),this[GP]=!0,yield*this[o8e]}},Wse=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new lvt("maxRedirections must be a positive number");Qg.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Qg.isStream(this.opts.body)?(Qg.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Gse(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[GP]=!1,cvt.prototype.on.call(this.opts.body,"data",function(){this[GP]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new iW(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Qg.isIterable(this.opts.body)&&(this.opts.body=new iW(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||Qg.isDisturbed(this.opts.body)?null:dvt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:l}=Qg.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=fvt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function dvt(t,e){if(uvt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&Qg.headerNameToString(e[r])==="location")return e[r+1]}s(dvt,"parseLocation");function s8e(t,e,r){if(t.length===4)return Qg.headerNameToString(t)==="host";if(e&&Qg.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=Qg.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(s8e,"shouldRemoveHeader");function fvt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)s8e(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))s8e(i,e,r)||n.push(i,t[i]);else Gse(t==null,"headers must be an object or an array");return n}s(fvt,"cleanRequestHeaders");a8e.exports=Wse});var sW=G((i$r,l8e)=>{"use strict";f();var pvt=oW();function mvt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new pvt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(mvt,"createRedirectInterceptor");l8e.exports=mvt});var KP=G((a$r,y8e)=>{"use strict";f();var Z1=require("node:assert"),m8e=require("node:net"),hvt=require("node:http"),E2=Ai(),{channels:s4}=W5(),gvt=Tke(),Avt=V5(),{InvalidArgumentError:Ba,InformationalError:yvt,ClientDestroyedError:Cvt}=yo(),xvt=kP(),{kUrl:Og,kServerName:Sv,kClient:vvt,kBusy:Hse,kConnect:bvt,kResuming:I2,kRunning:zP,kPending:YP,kSize:$P,kQueue:qm,kConnected:Evt,kConnecting:a4,kNeedDrain:kv,kKeepAliveDefaultTimeout:c8e,kHostHeader:Ivt,kPendingIdx:Wm,kRunningIdx:ey,kError:Tvt,kPipelining:aW,kKeepAliveTimeoutValue:wvt,kMaxHeadersSize:_vt,kKeepAliveMaxTimeout:Svt,kKeepAliveTimeoutThreshold:Rvt,kHeadersTimeout:kvt,kBodyTimeout:Bvt,kStrictContentLength:Pvt,kConnector:HP,kMaxRedirections:Dvt,kMaxRequests:jse,kCounter:Nvt,kClose:Lvt,kDestroy:Fvt,kDispatch:Mvt,kInterceptors:u8e,kLocalAddress:jP,kMaxResponseSize:Qvt,kOnError:Ovt,kHTTPContext:Pa,kMaxConcurrentStreams:Uvt,kResume:VP}=Qs(),qvt=KBe(),Wvt=i8e(),d8e=!1,Rv=Symbol("kClosedResolve"),f8e=s(()=>{},"noop");function h8e(t){return t[aW]??t[Pa]?.defaultPipelining??1}s(h8e,"getPipelining");var Vse=class extends Avt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:B,maxRequestsPerClient:N,localAddress:W,maxResponseSize:ee,autoSelectFamily:me,autoSelectFamilyAttemptTimeout:ae,maxConcurrentStreams:H,allowH2:U}={}){if(super(),d!==void 0)throw new Ba("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Ba("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Ba("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Ba("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Ba("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Ba("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Ba("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Ba("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Ba("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Ba("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Ba("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Ba("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Ba("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Ba("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Ba("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Ba("maxRequestsPerClient must be a positive number");if(W!=null&&(typeof W!="string"||m8e.isIP(W)===0))throw new Ba("localAddress must be valid string IP address");if(ee!=null&&(!Number.isInteger(ee)||ee<-1))throw new Ba("maxResponseSize must be a positive number");if(ae!=null&&(!Number.isInteger(ae)||ae<-1))throw new Ba("autoSelectFamilyAttemptTimeout must be a positive number");if(U!=null&&typeof U!="boolean")throw new Ba("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Ba("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=xvt({...b,maxCachedSessions:_,allowH2:U,socketPath:y,timeout:l,...me?{autoSelectFamily:me,autoSelectFamilyAttemptTimeout:ae}:void 0,...B})),r?.Client&&Array.isArray(r.Client)?(this[u8e]=r.Client,d8e||(d8e=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[u8e]=[Gvt({maxRedirections:k})],this[Og]=E2.parseOrigin(e),this[HP]=B,this[aW]=v??1,this[_vt]=n||hvt.maxHeaderSize,this[c8e]=p??4e3,this[Svt]=h??6e5,this[Rvt]=g??2e3,this[wvt]=this[c8e],this[Sv]=null,this[jP]=W??null,this[I2]=0,this[kv]=0,this[Ivt]=`host: ${this[Og].hostname}${this[Og].port?`:${this[Og].port}`:""}\r
`,this[Bvt]=c??3e5,this[kvt]=i??3e5,this[Pvt]=E??!0,this[Dvt]=k,this[jse]=N,this[Rv]=null,this[Qvt]=ee>-1?ee:-1,this[Uvt]=H??100,this[Pa]=null,this[qm]=[],this[ey]=0,this[Wm]=0,this[VP]=le=>$se(this,le),this[Ovt]=le=>g8e(this,le)}get pipelining(){return this[aW]}set pipelining(e){this[aW]=e,this[VP](!0)}get[YP](){return this[qm].length-this[Wm]}get[zP](){return this[Wm]-this[ey]}get[$P](){return this[qm].length-this[ey]}get[Evt](){return!!this[Pa]&&!this[a4]&&!this[Pa].destroyed}get[Hse](){return!!(this[Pa]?.busy(null)||this[$P]>=(h8e(this)||1)||this[YP]>0)}[bvt](e){A8e(this),this.once("connect",e)}[Mvt](e,r){let n=e.origin||this[Og].origin,i=new gvt(n,e,r);return this[qm].push(i),this[I2]||(E2.bodyLength(i.body)==null&&E2.isIterable(i.body)?(this[I2]=1,queueMicrotask(()=>$se(this))):this[VP](!0)),this[I2]&&this[kv]!==2&&this[Hse]&&(this[kv]=2),this[kv]<2}async[Lvt](){return new Promise(e=>{this[$P]?this[Rv]=e:e(null)})}async[Fvt](e){return new Promise(r=>{let n=this[qm].splice(this[Wm]);for(let o=0;o<n.length;o++){let a=n[o];E2.errorRequest(this,a,e)}let i=s(()=>{this[Rv]&&(this[Rv](),this[Rv]=null),r(null)},"callback");this[Pa]?(this[Pa].destroy(e,i),this[Pa]=null):queueMicrotask(i),this[VP]()})}},Gvt=sW();function g8e(t,e){if(t[zP]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){Z1(t[Wm]===t[ey]);let r=t[qm].splice(t[ey]);for(let n=0;n<r.length;n++){let i=r[n];E2.errorRequest(t,i,e)}Z1(t[$P]===0)}}s(g8e,"onError");async function A8e(t){Z1(!t[a4]),Z1(!t[Pa]);let{host:e,hostname:r,protocol:n,port:i}=t[Og];if(r[0]==="["){let o=r.indexOf("]");Z1(o!==-1);let a=r.substring(1,o);Z1(m8e.isIP(a)),r=a}t[a4]=!0,s4.beforeConnect.hasSubscribers&&s4.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Pa]?.version,servername:t[Sv],localAddress:t[jP]},connector:t[HP]});try{let o=await new Promise((a,l)=>{t[HP]({host:e,hostname:r,protocol:n,port:i,servername:t[Sv],localAddress:t[jP]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){E2.destroy(o.on("error",f8e),new Cvt);return}Z1(o);try{t[Pa]=o.alpnProtocol==="h2"?await Wvt(t,o):await qvt(t,o)}catch(a){throw o.destroy().on("error",f8e),a}t[a4]=!1,o[Nvt]=0,o[jse]=t[jse],o[vvt]=t,o[Tvt]=null,s4.connected.hasSubscribers&&s4.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Pa]?.version,servername:t[Sv],localAddress:t[jP]},connector:t[HP],socket:o}),t.emit("connect",t[Og],[t])}catch(o){if(t.destroyed)return;if(t[a4]=!1,s4.connectError.hasSubscribers&&s4.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Pa]?.version,servername:t[Sv],localAddress:t[jP]},connector:t[HP],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(Z1(t[zP]===0);t[YP]>0&&t[qm][t[Wm]].servername===t[Sv];){let a=t[qm][t[Wm]++];E2.errorRequest(t,a,o)}else g8e(t,o);t.emit("connectionError",t[Og],[t],o)}t[VP]()}s(A8e,"connect");function p8e(t){t[kv]=0,t.emit("drain",t[Og],[t])}s(p8e,"emitDrain");function $se(t,e){t[I2]!==2&&(t[I2]=2,Hvt(t,e),t[I2]=0,t[ey]>256&&(t[qm].splice(0,t[ey]),t[Wm]-=t[ey],t[ey]=0))}s($se,"resume");function Hvt(t,e){for(;;){if(t.destroyed){Z1(t[YP]===0);return}if(t[Rv]&&!t[$P]){t[Rv](),t[Rv]=null;return}if(t[Pa]&&t[Pa].resume(),t[Hse])t[kv]=2;else if(t[kv]===2){e?(t[kv]=1,queueMicrotask(()=>p8e(t))):p8e(t);continue}if(t[YP]===0||t[zP]>=(h8e(t)||1))return;let r=t[qm][t[Wm]];if(t[Og].protocol==="https:"&&t[Sv]!==r.servername){if(t[zP]>0)return;t[Sv]=r.servername,t[Pa]?.destroy(new yvt("servername changed"),()=>{t[Pa]=null,$se(t)})}if(t[a4])return;if(!t[Pa]){A8e(t);return}if(t[Pa].destroyed||t[Pa].busy(r))return;!r.aborted&&t[Pa].write(r)?t[Wm]++:t[qm].splice(t[Wm],1)}}s(Hvt,"_resume");y8e.exports=Vse});var zse=G((d$r,C8e)=>{"use strict";f();var lW=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};C8e.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new lW}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new lW),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var v8e=G((m$r,x8e)=>{f();var{kFree:jvt,kConnected:Vvt,kPending:$vt,kQueued:zvt,kRunning:Yvt,kSize:Kvt}=Qs(),T2=Symbol("pool"),Yse=class{static{s(this,"PoolStats")}constructor(e){this[T2]=e}get connected(){return this[T2][Vvt]}get free(){return this[T2][jvt]}get pending(){return this[T2][$vt]}get queued(){return this[T2][zvt]}get running(){return this[T2][Yvt]}get size(){return this[T2][Kvt]}};x8e.exports=Yse});var tae=G((A$r,B8e)=>{"use strict";f();var Jvt=V5(),Xvt=zse(),{kConnected:Kse,kSize:b8e,kRunning:E8e,kPending:I8e,kQueued:JP,kBusy:Zvt,kFree:ebt,kUrl:tbt,kClose:rbt,kDestroy:nbt,kDispatch:ibt}=Qs(),obt=v8e(),Td=Symbol("clients"),Qu=Symbol("needDrain"),XP=Symbol("queue"),Jse=Symbol("closed resolve"),Xse=Symbol("onDrain"),T8e=Symbol("onConnect"),w8e=Symbol("onDisconnect"),_8e=Symbol("onConnectionError"),Zse=Symbol("get dispatcher"),R8e=Symbol("add client"),k8e=Symbol("remove client"),S8e=Symbol("stats"),eae=class extends Jvt{static{s(this,"PoolBase")}constructor(){super(),this[XP]=new Xvt,this[Td]=[],this[JP]=0;let e=this;this[Xse]=s(function(n,i){let o=e[XP],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[JP]--,a=!this.dispatch(l.opts,l.handler)}this[Qu]=a,!this[Qu]&&e[Qu]&&(e[Qu]=!1,e.emit("drain",n,[e,...i])),e[Jse]&&o.isEmpty()&&Promise.all(e[Td].map(l=>l.close())).then(e[Jse])},"onDrain"),this[T8e]=(r,n)=>{e.emit("connect",r,[e,...n])},this[w8e]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[_8e]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[S8e]=new obt(this)}get[Zvt](){return this[Qu]}get[Kse](){return this[Td].filter(e=>e[Kse]).length}get[ebt](){return this[Td].filter(e=>e[Kse]&&!e[Qu]).length}get[I8e](){let e=this[JP];for(let{[I8e]:r}of this[Td])e+=r;return e}get[E8e](){let e=0;for(let{[E8e]:r}of this[Td])e+=r;return e}get[b8e](){let e=this[JP];for(let{[b8e]:r}of this[Td])e+=r;return e}get stats(){return this[S8e]}async[rbt](){this[XP].isEmpty()?await Promise.all(this[Td].map(e=>e.close())):await new Promise(e=>{this[Jse]=e})}async[nbt](e){for(;;){let r=this[XP].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Td].map(r=>r.destroy(e)))}[ibt](e,r){let n=this[Zse]();return n?n.dispatch(e,r)||(n[Qu]=!0,this[Qu]=!this[Zse]()):(this[Qu]=!0,this[XP].push({opts:e,handler:r}),this[JP]++),!this[Qu]}[R8e](e){return e.on("drain",this[Xse]).on("connect",this[T8e]).on("disconnect",this[w8e]).on("connectionError",this[_8e]),this[Td].push(e),this[Qu]&&queueMicrotask(()=>{this[Qu]&&this[Xse](e[tbt],[this,e])}),this}[k8e](e){e.close(()=>{let r=this[Td].indexOf(e);r!==-1&&this[Td].splice(r,1)}),this[Qu]=this[Td].some(r=>!r[Qu]&&r.closed!==!0&&r.destroyed!==!0)}};B8e.exports={PoolBase:eae,kClients:Td,kNeedDrain:Qu,kAddClient:R8e,kRemoveClient:k8e,kGetDispatcher:Zse}});var l4=G((x$r,L8e)=>{"use strict";f();var{PoolBase:sbt,kClients:cW,kNeedDrain:abt,kAddClient:lbt,kGetDispatcher:cbt}=tae(),ubt=KP(),{InvalidArgumentError:rae}=yo(),P8e=Ai(),{kUrl:D8e,kInterceptors:dbt}=Qs(),fbt=kP(),nae=Symbol("options"),iae=Symbol("connections"),N8e=Symbol("factory");function pbt(t,e){return new ubt(t,e)}s(pbt,"defaultFactory");var oae=class extends sbt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=pbt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new rae("invalid connections");if(typeof n!="function")throw new rae("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new rae("connect must be a function or an object");typeof i!="function"&&(i=fbt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[dbt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[iae]=r||null,this[D8e]=P8e.parseOrigin(e),this[nae]={...P8e.deepClone(m),connect:i,allowH2:p},this[nae].interceptors=m.interceptors?{...m.interceptors}:void 0,this[N8e]=n,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[cW].indexOf(v);b!==-1&&this[cW].splice(b,1)}})}[cbt](){for(let e of this[cW])if(!e[abt])return e;if(!this[iae]||this[cW].length<this[iae]){let e=this[N8e](this[D8e],this[nae]);return this[lbt](e),e}}};L8e.exports=oae});var U8e=G((E$r,O8e)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:mbt,InvalidArgumentError:hbt}=yo(),{PoolBase:gbt,kClients:Zc,kNeedDrain:ZP,kAddClient:Abt,kRemoveClient:ybt,kGetDispatcher:Cbt}=tae(),xbt=l4(),{kUrl:sae,kInterceptors:vbt}=Qs(),{parseOrigin:F8e}=Ai(),M8e=Symbol("factory"),uW=Symbol("options"),Q8e=Symbol("kGreatestCommonDivisor"),w2=Symbol("kCurrentWeight"),_2=Symbol("kIndex"),sp=Symbol("kWeight"),dW=Symbol("kMaxWeightPerServer"),fW=Symbol("kErrorPenalty");function bbt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(bbt,"getGreatestCommonDivisor");function Ebt(t,e){return new xbt(t,e)}s(Ebt,"defaultFactory");var aae=class extends gbt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=Ebt,...n}={}){if(super(),this[uW]=n,this[_2]=-1,this[w2]=0,this[dW]=this[uW].maxWeightPerServer||100,this[fW]=this[uW].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new hbt("factory must be a function.");this[vbt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[M8e]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=F8e(e).origin;if(this[Zc].find(i=>i[sae].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[M8e](r,Object.assign({},this[uW]));this[Abt](n),n.on("connect",()=>{n[sp]=Math.min(this[dW],n[sp]+this[fW])}),n.on("connectionError",()=>{n[sp]=Math.max(1,n[sp]-this[fW]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[sp]=Math.max(1,n[sp]-this[fW]),this._updateBalancedPoolStats())});for(let i of this[Zc])i[sp]=this[dW];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Zc].length;r++)e=bbt(this[Zc][r][sp],e);this[Q8e]=e}removeUpstream(e){let r=F8e(e).origin,n=this[Zc].find(i=>i[sae].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[ybt](n),this}get upstreams(){return this[Zc].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[sae].origin)}[Cbt](){if(this[Zc].length===0)throw new mbt;if(!this[Zc].find(o=>!o[ZP]&&o.closed!==!0&&o.destroyed!==!0)||this[Zc].map(o=>o[ZP]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Zc].findIndex(o=>!o[ZP]);for(;n++<this[Zc].length;){this[_2]=(this[_2]+1)%this[Zc].length;let o=this[Zc][this[_2]];if(o[sp]>this[Zc][i][sp]&&!o[ZP]&&(i=this[_2]),this[_2]===0&&(this[w2]=this[w2]-this[Q8e],this[w2]<=0&&(this[w2]=this[dW])),o[sp]>=this[w2]&&!o[ZP])return o}return this[w2]=this[Zc][i][sp],this[_2]=i,this[Zc][i]}};O8e.exports=aae});var c4=G((w$r,$8e)=>{"use strict";f();var{InvalidArgumentError:pW}=yo(),{kClients:Bv,kRunning:q8e,kClose:Ibt,kDestroy:Tbt,kDispatch:wbt,kInterceptors:_bt}=Qs(),Sbt=V5(),Rbt=l4(),kbt=KP(),Bbt=Ai(),Pbt=sW(),W8e=Symbol("onConnect"),G8e=Symbol("onDisconnect"),H8e=Symbol("onConnectionError"),Dbt=Symbol("maxRedirections"),j8e=Symbol("onDrain"),V8e=Symbol("factory"),lae=Symbol("options");function Nbt(t,e){return e&&e.connections===1?new kbt(t,e):new Rbt(t,e)}s(Nbt,"defaultFactory");var cae=class extends Sbt{static{s(this,"Agent")}constructor({factory:e=Nbt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new pW("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new pW("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new pW("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[_bt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[Pbt({maxRedirections:r})],this[lae]={...Bbt.deepClone(i),connect:n},this[lae].interceptors=i.interceptors?{...i.interceptors}:void 0,this[Dbt]=r,this[V8e]=e,this[Bv]=new Map,this[j8e]=(o,a)=>{this.emit("drain",o,[this,...a])},this[W8e]=(o,a)=>{this.emit("connect",o,[this,...a])},this[G8e]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[H8e]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[q8e](){let e=0;for(let r of this[Bv].values())e+=r[q8e];return e}[wbt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new pW("opts.origin must be a non-empty string or URL.");let i=this[Bv].get(n);return i||(i=this[V8e](e.origin,this[lae]).on("drain",this[j8e]).on("connect",this[W8e]).on("disconnect",this[G8e]).on("connectionError",this[H8e]),this[Bv].set(n,i)),i.dispatch(e,r)}async[Ibt](){let e=[];for(let r of this[Bv].values())e.push(r.close());this[Bv].clear(),await Promise.all(e)}async[Tbt](e){let r=[];for(let n of this[Bv].values())r.push(n.destroy(e));this[Bv].clear(),await Promise.all(r)}};$8e.exports=cae});var fae=G((R$r,J8e)=>{"use strict";f();var{kProxy:Lbt,kClose:Fbt,kDestroy:Mbt,kInterceptors:Qbt}=Qs(),{URL:eD}=require("node:url"),Obt=c4(),Ubt=l4(),qbt=V5(),{InvalidArgumentError:gW,RequestAbortedError:Wbt,SecureProxyConnectionError:Gbt}=yo(),z8e=kP(),mW=Symbol("proxy agent"),hW=Symbol("proxy client"),tD=Symbol("proxy headers"),uae=Symbol("request tls settings"),Y8e=Symbol("proxy tls settings"),K8e=Symbol("connect endpoint function");function Hbt(t){return t==="https:"?443:80}s(Hbt,"defaultProtocolPort");function jbt(t,e){return new Ubt(t,e)}s(jbt,"defaultFactory");var Vbt=s(()=>{},"noop"),dae=class extends qbt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof eD)&&!e.uri)throw new gW("Proxy uri is mandatory");let{clientFactory:r=jbt}=e;if(typeof r!="function")throw new gW("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=n;if(this[Lbt]={uri:i,protocol:l},this[Qbt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[uae]=e.requestTls,this[Y8e]=e.proxyTls,this[tD]=e.headers||{},e.auth&&e.token)throw new gW("opts.auth cannot be used in combination with opts.token");e.auth?this[tD]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[tD]["proxy-authorization"]=e.token:c&&u&&(this[tD]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=z8e({...e.proxyTls});this[K8e]=z8e({...e.requestTls}),this[hW]=r(n,{connect:p}),this[mW]=new Obt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${Hbt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[hW].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[tD],host:m.host},servername:this[Y8e]?.servername||d});if(v!==200&&(y.on("error",Vbt).destroy(),h(new Wbt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[uae]?b=this[uae].servername:b=m.servername,this[K8e]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new Gbt(y)):h(y)}},"connect")})}dispatch(e,r){let n=$bt(e.headers);if(zbt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new eD(e.origin);n.host=i}return this[mW].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new eD(e):e instanceof eD?e:new eD(e.uri)}async[Fbt](){await this[mW].close(),await this[hW].close()}async[Mbt](){await this[mW].destroy(),await this[hW].destroy()}};function $bt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s($bt,"buildHeaders");function zbt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new gW("Proxy-Authorization should be sent in ProxyAgent constructor")}s(zbt,"throwIfProxyAuthIsSent");J8e.exports=dae});var nPe=G((P$r,rPe)=>{"use strict";f();var Ybt=V5(),{kClose:Kbt,kDestroy:Jbt,kClosed:X8e,kDestroyed:Z8e,kDispatch:Xbt,kNoProxyAgent:rD,kHttpProxyAgent:Pv,kHttpsProxyAgent:S2}=Qs(),ePe=fae(),Zbt=c4(),eEt={"http:":80,"https:":443},tPe=!1,pae=class extends Ybt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,tPe||(tPe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[rD]=new Zbt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Pv]=new ePe({...o,uri:a}):this[Pv]=this[rD];let l=n??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[S2]=new ePe({...o,uri:l}):this[S2]=this[Pv],this.#o()}[Xbt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[Kbt](){await this[rD].close(),this[Pv][X8e]||await this[Pv].close(),this[S2][X8e]||await this[S2].close()}async[Jbt](e){await this[rD].destroy(e),this[Pv][Z8e]||await this[Pv].destroy(e),this[S2][Z8e]||await this[S2].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||eEt[r]||0,this.#r(n,i)?r==="https:"?this[S2]:this[Pv]:this[rD]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};rPe.exports=pae});var AW=G((L$r,aPe)=>{"use strict";f();var u4=require("node:assert"),{kRetryHandlerDefaultRetry:iPe}=Qs(),{RequestRetryError:nD}=yo(),{isDisturbed:oPe,parseHeaders:tEt,parseRangeHeader:sPe,wrapRequestBody:rEt}=Ai();function nEt(t){let e=Date.now();return new Date(t).getTime()-e}s(nEt,"calculateRetryAfterHeader");var mae=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:rEt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[iPe],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[iPe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=n,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?nEt(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=tEt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new nD("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new nD("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=sPe(o["content-range"]);if(!l)return this.abort(new nD("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new nD("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return u4(this.start===c,"content-range mismatch"),u4(this.end==null||this.end===d,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let l=sPe(o["content-range"]);if(l==null)return this.handler.onHeaders(e,r,n,i);let{start:c,size:u,end:d=u-1}=l;u4(c!=null&&Number.isFinite(c),"content-range mismatch"),u4(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return u4(Number.isFinite(this.start)),u4(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new nD("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||oPe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||oPe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};aPe.exports=mae});var cPe=G((Q$r,lPe)=>{"use strict";f();var iEt=SP(),oEt=AW(),hae=class extends iEt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new oEt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};lPe.exports=hae});var vae=G((q$r,yPe)=>{"use strict";f();var mPe=require("node:assert"),{Readable:sEt}=require("node:stream"),{RequestAbortedError:hPe,NotSupportedError:aEt,InvalidArgumentError:lEt,AbortError:gae}=yo(),gPe=Ai(),{ReadableStreamFrom:cEt}=Ai(),R0=Symbol("kConsume"),iD=Symbol("kReading"),Dv=Symbol("kBody"),uPe=Symbol("kAbort"),APe=Symbol("kContentType"),dPe=Symbol("kContentLength"),uEt=s(()=>{},"noop"),Aae=class extends sEt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[uPe]=r,this[R0]=null,this[Dv]=null,this[APe]=n,this[dPe]=i,this[iD]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new hPe),e&&this[uPe](),super.destroy(e)}_destroy(e,r){this[iD]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[iD]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[iD]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[R0]&&e!==null?(Cae(this[R0],e),this[iD]?super.push(e):!0):super.push(e)}async text(){return oD(this,"text")}async json(){return oD(this,"json")}async blob(){return oD(this,"blob")}async bytes(){return oD(this,"bytes")}async arrayBuffer(){return oD(this,"arrayBuffer")}async formData(){throw new aEt}get bodyUsed(){return gPe.isDisturbed(this)}get body(){return this[Dv]||(this[Dv]=cEt(this),this[R0]&&(this[Dv].getReader(),mPe(this[Dv].locked))),this[Dv]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new lEt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[dPe]>r&&this.destroy(new gae);let a=s(()=>{this.destroy(n.reason??new gae)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new gae):i(null)}).on("error",uEt).on("data",function(l){r-=l.length,r<=0&&this.destroy()}).resume()})}};function dEt(t){return t[Dv]&&t[Dv].locked===!0||t[R0]}s(dEt,"isLocked");function fEt(t){return gPe.isDisturbed(t)||dEt(t)}s(fEt,"isUnusable");async function oD(t,e){return mPe(!t[R0]),new Promise((r,n)=>{if(fEt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[R0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){xae(this[R0],i)}).on("close",function(){this[R0].body!==null&&xae(this[R0],new hPe)}),pEt(t[R0])})})}s(oD,"consume");function pEt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)Cae(t,e.buffer[i])}else for(let r of e.buffer)Cae(t,r);for(e.endEmitted?pPe(this[R0]):t.stream.on("end",function(){pPe(this[R0])}),t.stream.resume();t.stream.read()!=null;);}s(pEt,"consumeStart");function yae(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(yae,"chunksDecode");function fPe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(fPe,"chunksConcat");function pPe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(yae(r,o)):e==="json"?n(JSON.parse(yae(r,o))):e==="arrayBuffer"?n(fPe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[APe]})):e==="bytes"&&n(fPe(r,o)),xae(t)}catch(a){i.destroy(a)}}s(pPe,"consumeEnd");function Cae(t,e){t.length+=e.length,t.body.push(e)}s(Cae,"consumePush");function xae(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(xae,"consumeFinish");yPe.exports={Readable:Aae,chunksDecode:yae}});var bae=G((H$r,EPe)=>{f();var mEt=require("node:assert"),{ResponseStatusCodeError:CPe}=yo(),{chunksDecode:xPe}=vae(),hEt=128*1024;async function gEt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){mEt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>hEt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!l){queueMicrotask(()=>t(new CPe(c,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{vPe(r)?d=JSON.parse(xPe(a,l)):bPe(r)&&(d=xPe(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new CPe(c,n,o,d)))}s(gEt,"getResolveErrorBodyCallback");var vPe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),bPe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");EPe.exports={getResolveErrorBodyCallback:gEt,isContentTypeApplicationJson:vPe,isContentTypeText:bPe}});var wPe=G(($$r,Eae)=>{"use strict";f();var AEt=require("node:assert"),{Readable:yEt}=vae(),{InvalidArgumentError:d4,RequestAbortedError:IPe}=yo(),k0=Ai(),{getResolveErrorBodyCallback:CEt}=bae(),{AsyncResource:xEt}=require("node:async_hooks"),yW=class extends xEt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new d4("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof r!="function")throw new d4("invalid callback");if(d&&(typeof d!="number"||d<0))throw new d4("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new d4("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new d4("invalid method");if(l&&typeof l!="function")throw new d4("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw k0.isStream(a)&&k0.destroy(a.on("error",k0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=n,this.reason=null,this.removeAbortListener=null,k0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new IPe:this.removeAbortListener=k0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new IPe,this.res?k0.destroy(this.res.on("error",k0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}AEt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?k0.parseRawHeaders(r):k0.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?k0.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],y=new yEt({resume:n,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(CEt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){k0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{k0.destroy(r,e)})),i&&(this.body=null,k0.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function TPe(t,e){if(e===void 0)return new Promise((r,n)=>{TPe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new yW(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(TPe,"request");Eae.exports=TPe;Eae.exports.RequestHandler=yW});var sD=G((K$r,RPe)=>{f();var{addAbortListener:vEt}=Ai(),{RequestAbortedError:bEt}=yo(),f4=Symbol("kListener"),Ug=Symbol("kSignal");function _Pe(t){t.abort?t.abort(t[Ug]?.reason):t.reason=t[Ug]?.reason??new bEt,SPe(t)}s(_Pe,"abort");function EEt(t,e){if(t.reason=null,t[Ug]=null,t[f4]=null,!!e){if(e.aborted){_Pe(t);return}t[Ug]=e,t[f4]=()=>{_Pe(t)},vEt(t[Ug],t[f4])}}s(EEt,"addSignal");function SPe(t){t[Ug]&&("removeEventListener"in t[Ug]?t[Ug].removeEventListener("abort",t[f4]):t[Ug].removeListener("abort",t[f4]),t[Ug]=null,t[f4]=null)}s(SPe,"removeSignal");RPe.exports={addSignal:EEt,removeSignal:SPe}});var DPe=G((Z$r,PPe)=>{"use strict";f();var IEt=require("node:assert"),{finished:TEt,PassThrough:wEt}=require("node:stream"),{InvalidArgumentError:p4,InvalidReturnValueError:_Et}=yo(),Gm=Ai(),{getResolveErrorBodyCallback:SEt}=bae(),{AsyncResource:REt}=require("node:async_hooks"),{addSignal:kEt,removeSignal:kPe}=sD(),Iae=class extends REt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new p4("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof n!="function")throw new p4("invalid callback");if(typeof r!="function")throw new p4("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new p4("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new p4("invalid method");if(c&&typeof c!="function")throw new p4("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Gm.isStream(l)&&Gm.destroy(l.on("error",Gm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Gm.isStream(l)&&l.on("error",p=>{this.onError(p)}),kEt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}IEt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Gm.parseRawHeaders(r):Gm.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Gm.parseHeaders(r):d)["content-type"];p=new wEt,this.callback=null,this.runInAsyncScope(SEt,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new _Et("expected Writable");TEt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Gm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;kPe(this),r&&(this.trailers=Gm.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;kPe(this),this.factory=null,r?(this.res=null,Gm.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,Gm.destroy(o,e))}};function BPe(t,e,r){if(r===void 0)return new Promise((n,i)=>{BPe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new Iae(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(BPe,"stream");PPe.exports=BPe});var MPe=G((rzr,FPe)=>{"use strict";f();var{Readable:LPe,Duplex:BEt,PassThrough:PEt}=require("node:stream"),{InvalidArgumentError:aD,InvalidReturnValueError:DEt,RequestAbortedError:Tae}=yo(),ap=Ai(),{AsyncResource:NEt}=require("node:async_hooks"),{addSignal:LEt,removeSignal:FEt}=sD(),NPe=require("node:assert"),m4=Symbol("resume"),wae=class extends LPe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[m4]=null}_read(){let{[m4]:e}=this;e&&(this[m4]=null,e())}_destroy(e,r){this._read(),r(e)}},_ae=class extends LPe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[m4]=e}_read(){this[m4]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new Tae),r(e)}},Sae=class extends NEt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new aD("invalid opts");if(typeof r!="function")throw new aD("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new aD("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new aD("invalid method");if(a&&typeof a!="function")throw new aD("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new wae().on("error",ap.nop),this.ret=new BEt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[m4]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new Tae),g&&c&&g(),ap.destroy(d,c),ap.destroy(p,c),ap.destroy(m,c),FEt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,LEt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}NPe(!i,"pipeline cannot be retried"),NPe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?ap.parseRawHeaders(r):ap.parseHeaders(r);this.onInfo({statusCode:e,headers:c})}return}this.res=new _ae(n);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?ap.parseRawHeaders(r):ap.parseHeaders(r);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",ap.nop),c}if(!l||typeof l.on!="function")throw new DEt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;ap.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||ap.destroy(c,new Tae)}),this.body=l}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,ap.destroy(r,e)}};function MEt(t,e){try{let r=new Sae(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new PEt().destroy(r)}}s(MEt,"pipeline");FPe.exports=MEt});var GPe=G((ozr,WPe)=>{"use strict";f();var{InvalidArgumentError:Rae,SocketError:QEt}=yo(),{AsyncResource:OEt}=require("node:async_hooks"),QPe=Ai(),{addSignal:UEt,removeSignal:OPe}=sD(),UPe=require("node:assert"),kae=class extends OEt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Rae("invalid opts");if(typeof r!="function")throw new Rae("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Rae("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,UEt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}UPe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new QEt("bad upgrade",null)}onUpgrade(e,r,n){UPe(e===101);let{callback:i,opaque:o,context:a}=this;OPe(this),this.callback=null;let l=this.responseHeaders==="raw"?QPe.parseRawHeaders(r):QPe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:l,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;OPe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function qPe(t,e){if(e===void 0)return new Promise((r,n)=>{qPe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new kae(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(qPe,"upgrade");WPe.exports=qPe});var zPe=G((lzr,$Pe)=>{"use strict";f();var qEt=require("node:assert"),{AsyncResource:WEt}=require("node:async_hooks"),{InvalidArgumentError:Bae,SocketError:GEt}=yo(),HPe=Ai(),{addSignal:HEt,removeSignal:jPe}=sD(),Pae=class extends WEt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Bae("invalid opts");if(typeof r!="function")throw new Bae("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Bae("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,HEt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}qEt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new GEt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;jPe(this),this.callback=null;let l=r;l!=null&&(l=this.responseHeaders==="raw"?HPe.parseRawHeaders(r):HPe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;jPe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function VPe(t,e){if(e===void 0)return new Promise((r,n)=>{VPe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Pae(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(VPe,"connect");$Pe.exports=VPe});var YPe=G((dzr,h4)=>{"use strict";f();h4.exports.request=wPe();h4.exports.stream=DPe();h4.exports.pipeline=MPe();h4.exports.upgrade=GPe();h4.exports.connect=zPe()});var Nae=G((pzr,KPe)=>{"use strict";f();var{UndiciError:jEt}=yo(),Dae=class t extends jEt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};KPe.exports={MockNotMatchedError:Dae}});var g4=G((gzr,JPe)=>{"use strict";f();JPe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var lD=G((yzr,lDe)=>{"use strict";f();var{MockNotMatchedError:R2}=Nae(),{kDispatches:CW,kMockAgent:VEt,kOriginalDispatch:$Et,kOrigin:zEt,kGetNetConnect:YEt}=g4(),{buildURL:KEt}=Ai(),{STATUS_CODES:JEt}=require("node:http"),{types:{isPromise:XEt}}=require("node:util");function ty(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(ty,"matchValue");function ZPe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(ZPe,"lowerCaseEntries");function eDe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):ZPe(t)[e.toLocaleLowerCase()]}s(eDe,"getHeaderByName");function Mae(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(Mae,"buildHeadersFromArray");function tDe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Mae(e)),t.headers(e?ZPe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=eDe(e,r);if(!ty(n,i))return!1}return!0}s(tDe,"matchHeaders");function XPe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(XPe,"safeUrl");function ZEt(t,{path:e,method:r,body:n,headers:i}){let o=ty(t.path,e),a=ty(t.method,r),l=typeof t.body<"u"?ty(t.body,n):!0,c=tDe(t,i);return o&&a&&l&&c}s(ZEt,"matchKey");function rDe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(rDe,"getResponseData");function nDe(t,e){let r=e.query?KEt(e.path,e.query):e.path,n=typeof r=="string"?XPe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>ty(XPe(o),n));if(i.length===0)throw new R2(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>ty(o,e.method)),i.length===0)throw new R2(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?ty(o,e.body):!0),i.length===0)throw new R2(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>tDe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new R2(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(nDe,"getMockDispatch");function eIt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(eIt,"addMockDispatch");function Lae(t,e){let r=t.findIndex(n=>n.consumed?ZEt(n,e):!1);r!==-1&&t.splice(r,1)}s(Lae,"deleteMockDispatch");function iDe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(iDe,"buildKey");function Fae(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)r.push(a,Buffer.from(`${o[l]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(Fae,"generateKeyValues");function oDe(t){return JEt[t]||"unknown"}s(oDe,"getStatusText");async function tIt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(tIt,"getResponse");function sDe(t,e){let r=iDe(t),n=nDe(this[CW],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!d&&p>=m,n.pending=p<m,c!==null)return Lae(this[CW],r),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[CW])},u):h(this[CW]);function h(y,v=o){let b=Array.isArray(t.headers)?Mae(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if(XEt(E)){E.then(N=>h(y,N));return}let _=rDe(E),k=Fae(a),B=Fae(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,oDe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(B),Lae(y,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(sDe,"mockDispatch");function rIt(){let t=this[VEt],e=this[zEt],r=this[$Et];return s(function(i,o){if(t.isMockActive)try{sDe.call(this,i,o)}catch(a){if(a instanceof R2){let l=t[YEt]();if(l===!1)throw new R2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(aDe(l,e))r.call(this,i,o);else throw new R2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(rIt,"buildMockDispatch");function aDe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>ty(n,r.host)))}s(aDe,"checkNetConnect");function nIt(t){if(t){let{agent:e,...r}=t;return r}}s(nIt,"buildMockOptions");lDe.exports={getResponseData:rDe,getMockDispatch:nDe,addMockDispatch:eIt,deleteMockDispatch:Lae,buildKey:iDe,generateKeyValues:Fae,matchValue:ty,getResponse:tIt,getStatusText:oDe,mockDispatch:sDe,buildMockDispatch:rIt,checkNetConnect:aDe,buildMockOptions:nIt,getHeaderByName:eDe,buildHeadersFromArray:Mae}});var Hae=G((vzr,Gae)=>{"use strict";f();var{getResponseData:iIt,buildKey:oIt,addMockDispatch:Qae}=lD(),{kDispatches:xW,kDispatchKey:vW,kDefaultHeaders:Oae,kDefaultTrailers:Uae,kContentLength:qae,kMockDispatch:bW}=g4(),{InvalidArgumentError:qg}=yo(),{buildURL:sIt}=Ai(),A4=class{static{s(this,"MockScope")}constructor(e){this[bW]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new qg("waitInMs must be a valid integer > 0");return this[bW].delay=e,this}persist(){return this[bW].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new qg("repeatTimes must be a valid integer > 0");return this[bW].times=e,this}},Wae=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new qg("opts must be an object");if(typeof e.path>"u")throw new qg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=sIt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[vW]=oIt(e),this[xW]=r,this[Oae]={},this[Uae]={},this[qae]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=iIt(r),o=this[qae]?{"content-length":i.length}:{},a={...this[Oae],...o,...n.headers},l={...this[Uae],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new qg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new qg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new qg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=Qae(this[xW],this[vW],o);return new A4(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=Qae(this[xW],this[vW],n);return new A4(i)}replyWithError(e){if(typeof e>"u")throw new qg("error must be defined");let r=Qae(this[xW],this[vW],{error:e});return new A4(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new qg("headers must be defined");return this[Oae]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new qg("trailers must be defined");return this[Uae]=e,this}replyContentLength(){return this[qae]=!0,this}};Gae.exports.MockInterceptor=Wae;Gae.exports.MockScope=A4});var $ae=G((Izr,hDe)=>{"use strict";f();var{promisify:aIt}=require("node:util"),lIt=KP(),{buildMockDispatch:cIt}=lD(),{kDispatches:cDe,kMockAgent:uDe,kClose:dDe,kOriginalClose:fDe,kOrigin:pDe,kOriginalDispatch:uIt,kConnected:jae}=g4(),{MockInterceptor:dIt}=Hae(),mDe=Qs(),{InvalidArgumentError:fIt}=yo(),Vae=class extends lIt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new fIt("Argument opts.agent must implement Agent");this[uDe]=r.agent,this[pDe]=e,this[cDe]=[],this[jae]=1,this[uIt]=this.dispatch,this[fDe]=this.close.bind(this),this.dispatch=cIt.call(this),this.close=this[dDe]}get[mDe.kConnected](){return this[jae]}intercept(e){return new dIt(e,this[cDe])}async[dDe](){await aIt(this[fDe])(),this[jae]=0,this[uDe][mDe.kClients].delete(this[pDe])}};hDe.exports=Vae});var Kae=G((_zr,bDe)=>{"use strict";f();var{promisify:pIt}=require("node:util"),mIt=l4(),{buildMockDispatch:hIt}=lD(),{kDispatches:gDe,kMockAgent:ADe,kClose:yDe,kOriginalClose:CDe,kOrigin:xDe,kOriginalDispatch:gIt,kConnected:zae}=g4(),{MockInterceptor:AIt}=Hae(),vDe=Qs(),{InvalidArgumentError:yIt}=yo(),Yae=class extends mIt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new yIt("Argument opts.agent must implement Agent");this[ADe]=r.agent,this[xDe]=e,this[gDe]=[],this[zae]=1,this[gIt]=this.dispatch,this[CDe]=this.close.bind(this),this.dispatch=hIt.call(this),this.close=this[yDe]}get[vDe.kConnected](){return this[zae]}intercept(e){return new AIt(e,this[gDe])}async[yDe](){await pIt(this[CDe])(),this[zae]=0,this[ADe][vDe.kClients].delete(this[xDe])}};bDe.exports=Yae});var IDe=G((Bzr,EDe)=>{"use strict";f();var CIt={pronoun:"it",is:"is",was:"was",this:"this"},xIt={pronoun:"they",is:"are",was:"were",this:"these"};EDe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?CIt:xIt,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var wDe=G((Lzr,TDe)=>{"use strict";f();var{Transform:vIt}=require("node:stream"),{Console:bIt}=require("node:console"),EIt=process.versions.icu?"\u2705":"Y ",IIt=process.versions.icu?"\u274C":"N ";TDe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new vIt({transform(r,n,i){i(null,r)}}),this.logger=new bIt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?EIt:IIt,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(r),this.transform.read().toString()}}});var kDe=G((Qzr,RDe)=>{"use strict";f();var{kClients:k2}=Qs(),TIt=c4(),{kAgent:Jae,kMockAgentSet:EW,kMockAgentGet:_De,kDispatches:Xae,kIsMockActive:IW,kNetConnect:B2,kGetNetConnect:wIt,kOptions:TW,kFactory:wW}=g4(),_It=$ae(),SIt=Kae(),{matchValue:RIt,buildMockOptions:kIt}=lD(),{InvalidArgumentError:SDe,UndiciError:BIt}=yo(),PIt=SP(),DIt=IDe(),NIt=wDe(),Zae=class extends PIt{static{s(this,"MockAgent")}constructor(e){if(super(e),this[B2]=!0,this[IW]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new SDe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new TIt(e);this[Jae]=r,this[k2]=r[k2],this[TW]=kIt(e)}get(e){let r=this[_De](e);return r||(r=this[wW](e),this[EW](e,r)),r}dispatch(e,r){return this.get(e.origin),this[Jae].dispatch(e,r)}async close(){await this[Jae].close(),this[k2].clear()}deactivate(){this[IW]=!1}activate(){this[IW]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[B2])?this[B2].push(e):this[B2]=[e];else if(typeof e>"u")this[B2]=!0;else throw new SDe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[B2]=!1}get isMockActive(){return this[IW]}[EW](e,r){this[k2].set(e,r)}[wW](e){let r=Object.assign({agent:this},this[TW]);return this[TW]&&this[TW].connections===1?new _It(e,r):new SIt(e,r)}[_De](e){let r=this[k2].get(e);if(r)return r;if(typeof e!="string"){let n=this[wW]("http://localhost:9999");return this[EW](e,n),n}for(let[n,i]of Array.from(this[k2]))if(i&&typeof n!="string"&&RIt(n,e)){let o=this[wW](e);return this[EW](e,o),o[Xae]=i[Xae],o}}[wIt](){return this[B2]}pendingInterceptors(){let e=this[k2];return Array.from(e.entries()).flatMap(([r,n])=>n[Xae].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new NIt}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new DIt("interceptor","interceptors").pluralize(r.length);throw new BIt(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};RDe.exports=Zae});var _W=G((qzr,NDe)=>{"use strict";f();var BDe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:LIt}=yo(),FIt=c4();DDe()===void 0&&PDe(new FIt);function PDe(t){if(!t||typeof t.dispatch!="function")throw new LIt("Argument agent must implement Agent");Object.defineProperty(globalThis,BDe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(PDe,"setGlobalDispatcher");function DDe(){return globalThis[BDe]}s(DDe,"getGlobalDispatcher");NDe.exports={setGlobalDispatcher:PDe,getGlobalDispatcher:DDe}});var SW=G((jzr,LDe)=>{"use strict";f();LDe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var MDe=G((zzr,FDe)=>{"use strict";f();var MIt=oW();FDe.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return r(i,o);let c=new MIt(r,a,i,o);return r(l,c)},"redirectInterceptor")}});var ODe=G((Jzr,QDe)=>{"use strict";f();var QIt=AW();QDe.exports=t=>e=>s(function(n,i){return e(n,new QIt({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var qDe=G((eYr,UDe)=>{"use strict";f();var OIt=Ai(),{InvalidArgumentError:UIt,RequestAbortedError:qIt}=yo(),WIt=SW(),ele=class extends WIt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new UIt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=OIt.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new qIt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function GIt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new ele({maxSize:o},i);return e(n,a)},"Intercept")}s(GIt,"createDumpInterceptor");UDe.exports=GIt});var HDe=G((nYr,GDe)=>{"use strict";f();var{isIP:HIt}=require("node:net"),{lookup:jIt}=require("node:dns"),VIt=SW(),{InvalidArgumentError:y4,InformationalError:$It}=yo(),WDe=Math.pow(2,31)-1,tle=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){n(a??new $It("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#n(e,r,n){jIt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,l;if(this.dualStack?(n==null&&(a==null||a===WDe?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?l=o[n]:l=o[n===4?6:4]):l=o[n],l==null||l.ips.length===0)return i;l.offset==null||l.offset===WDe?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new rle(this,e,r)}},rle=class extends VIt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};GDe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new y4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new y4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new y4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new y4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new y4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new y4("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new tle(n);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return HIt(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var P2=G((sYr,JDe)=>{"use strict";f();var{kConstruct:zIt}=Qs(),{kEnumerableProperty:C4}=Ai(),{iteratorMixin:YIt,isValidHeaderName:cD,isValidHeaderValue:VDe}=S0(),{webidl:eo}=yc(),nle=require("node:assert"),RW=require("node:util"),Za=Symbol("headers map"),B0=Symbol("headers map sorted");function jDe(t){return t===10||t===13||t===9||t===32}s(jDe,"isHTTPWhiteSpaceCharCode");function $De(t){let e=0,r=t.length;for(;r>e&&jDe(t.charCodeAt(r-1));)--r;for(;r>e&&jDe(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s($De,"headerValueNormalize");function zDe(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw eo.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});ile(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)ile(t,r[n],e[r[n]])}else throw eo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(zDe,"fill");function ile(t,e,r){if(r=$De(r),cD(e)){if(!VDe(r))throw eo.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw eo.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(KDe(t)==="immutable")throw new TypeError("immutable");return ole(t).append(e,r,!1)}s(ile,"appendHeader");function YDe(t,e){return t[0]<e[0]?-1:1}s(YDe,"compareHeaderName");var kW=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[Za]=new Map(e[Za]),this[B0]=e[B0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[Za]=new Map(e),this[B0]=null)}contains(e,r){return this[Za].has(r?e:e.toLowerCase())}clear(){this[Za].clear(),this[B0]=null,this.cookies=null}append(e,r,n){this[B0]=null;let i=n?e:e.toLowerCase(),o=this[Za].get(i);if(o){let a=i==="cookie"?"; ":", ";this[Za].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[Za].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[B0]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Za].set(i,{name:e,value:r})}delete(e,r){this[B0]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[Za].delete(e)}get(e,r){return this[Za].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[Za])yield[e,r]}get entries(){let e={};if(this[Za].size!==0)for(let{name:r,value:n}of this[Za].values())e[r]=n;return e}rawValues(){return this[Za].values()}get entriesList(){let e=[];if(this[Za].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Za])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[Za].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[Za][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],nle(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=n.next().value,d=r[o]=[p[0],p[1].value],nle(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),r[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)r[a]=r[--a];r[c]=d}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[Za])r[n++]=[i,o],nle(o!==null);return r.sort(YDe)}}},Hm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){eo.util.markAsUncloneable(this),e!==zIt&&(this.#t=new kW,this.#e="none",e!==void 0&&(e=eo.converters.HeadersInit(e,"Headers contructor","init"),zDe(this,e)))}append(e,r){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=eo.converters.ByteString(e,n,"name"),r=eo.converters.ByteString(r,n,"value"),ile(this,e,r)}delete(e){if(eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,1,"Headers.delete"),e=eo.converters.ByteString(e,"Headers.delete","name"),!cD(e))throw eo.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=eo.converters.ByteString(e,r,"name"),!cD(e))throw eo.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=eo.converters.ByteString(e,r,"name"),!cD(e))throw eo.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=eo.converters.ByteString(e,n,"name"),r=eo.converters.ByteString(r,n,"value"),r=$De(r),cD(e)){if(!VDe(r))throw eo.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw eo.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){eo.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[B0](){if(this.#t[B0])return this.#t[B0];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[B0]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let l=0;l<n.length;++l)e.push([o,n[l]]);else e.push([o,a])}return this.#t[B0]=e}[RW.inspect.custom](e,r){return r.depth??=e,`Headers ${RW.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:KDe,setHeadersGuard:KIt,getHeadersList:ole,setHeadersList:JIt}=Hm;Reflect.deleteProperty(Hm,"getHeadersGuard");Reflect.deleteProperty(Hm,"setHeadersGuard");Reflect.deleteProperty(Hm,"getHeadersList");Reflect.deleteProperty(Hm,"setHeadersList");YIt("Headers",Hm,B0,0,1);Object.defineProperties(Hm.prototype,{append:C4,delete:C4,get:C4,has:C4,set:C4,getSetCookie:C4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[RW.inspect.custom]:{enumerable:!1}});eo.converters.HeadersInit=function(t,e,r){if(eo.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!RW.types.isProxy(t)&&n===Hm.prototype.entries)try{return ole(t).entriesList}catch{}return typeof n=="function"?eo.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):eo.converters["record<ByteString, ByteString>"](t,e,r)}throw eo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};JDe.exports={fill:zDe,compareHeaderName:YDe,Headers:Hm,HeadersList:kW,getHeadersGuard:KDe,setHeadersGuard:KIt,setHeadersList:JIt,getHeadersList:ole}});var dD=G((cYr,a9e)=>{"use strict";f();var{Headers:n9e,HeadersList:XDe,fill:XIt,getHeadersGuard:ZIt,setHeadersGuard:i9e,setHeadersList:o9e}=P2(),{extractBody:ZDe,cloneBody:e2t,mixinBody:t2t,hasFinalizationRegistry:r2t,streamRegistry:n2t,bodyUnusable:i2t}=t4(),sle=Ai(),e9e=require("node:util"),{kEnumerableProperty:P0}=sle,{isValidReasonPhrase:o2t,isCancelled:s2t,isAborted:a2t,isBlobLike:l2t,serializeJavascriptValueToJSONString:c2t,isErrorLike:u2t,isomorphicEncode:d2t,environmentSettingsObject:f2t}=S0(),{redirectStatusSet:p2t,nullBodyStatus:m2t}=BP(),{kState:ua,kHeaders:ry}=Ev(),{webidl:ii}=yc(),{FormData:h2t}=MP(),{URLSerializer:t9e}=Ed(),{kConstruct:PW}=Qs(),ale=require("node:assert"),{types:g2t}=require("node:util"),A2t=new TextEncoder("utf-8"),D2=class t{static{s(this,"Response")}static error(){return uD(DW(),"immutable")}static json(e,r={}){ii.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=ii.converters.ResponseInit(r));let n=A2t.encode(c2t(e)),i=ZDe(n),o=uD(x4({}),"response");return r9e(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){ii.argumentLengthCheck(arguments,1,"Response.redirect"),e=ii.converters.USVString(e),r=ii.converters["unsigned short"](r);let n;try{n=new URL(e,f2t.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!p2t.has(r))throw new RangeError(`Invalid status code ${r}`);let i=uD(x4({}),"immutable");i[ua].status=r;let o=d2t(t9e(n));return i[ua].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(ii.util.markAsUncloneable(this),e===PW)return;e!==null&&(e=ii.converters.BodyInit(e)),r=ii.converters.ResponseInit(r),this[ua]=x4({}),this[ry]=new n9e(PW),i9e(this[ry],"response"),o9e(this[ry],this[ua].headersList);let n=null;if(e!=null){let[i,o]=ZDe(e);n={body:i,type:o}}r9e(this,r,n)}get type(){return ii.brandCheck(this,t),this[ua].type}get url(){ii.brandCheck(this,t);let e=this[ua].urlList,r=e[e.length-1]??null;return r===null?"":t9e(r,!0)}get redirected(){return ii.brandCheck(this,t),this[ua].urlList.length>1}get status(){return ii.brandCheck(this,t),this[ua].status}get ok(){return ii.brandCheck(this,t),this[ua].status>=200&&this[ua].status<=299}get statusText(){return ii.brandCheck(this,t),this[ua].statusText}get headers(){return ii.brandCheck(this,t),this[ry]}get body(){return ii.brandCheck(this,t),this[ua].body?this[ua].body.stream:null}get bodyUsed(){return ii.brandCheck(this,t),!!this[ua].body&&sle.isDisturbed(this[ua].body.stream)}clone(){if(ii.brandCheck(this,t),i2t(this))throw ii.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=lle(this[ua]);return uD(e,ZIt(this[ry]))}[e9e.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${e9e.formatWithOptions(r,n)}`}};t2t(D2);Object.defineProperties(D2.prototype,{type:P0,url:P0,status:P0,ok:P0,redirected:P0,statusText:P0,headers:P0,clone:P0,body:P0,bodyUsed:P0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(D2,{json:P0,redirect:P0,error:P0});function lle(t){if(t.internalResponse)return s9e(lle(t.internalResponse),t.type);let e=x4({...t,body:null});return t.body!=null&&(e.body=e2t(e,t.body)),e}s(lle,"cloneResponse");function x4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new XDe(t?.headersList):new XDe,urlList:t?.urlList?[...t.urlList]:[]}}s(x4,"makeResponse");function DW(t){let e=u2t(t);return x4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(DW,"makeNetworkError");function y2t(t){return t.type==="error"&&t.status===0}s(y2t,"isNetworkError");function BW(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return ale(!(n in e)),r[n]=i,!0}})}s(BW,"makeFilteredResponse");function s9e(t,e){if(e==="basic")return BW(t,{type:"basic",headersList:t.headersList});if(e==="cors")return BW(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return BW(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return BW(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});ale(!1)}s(s9e,"filterResponse");function C2t(t,e=null){return ale(s2t(t)),a2t(t)?DW(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):DW(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(C2t,"makeAppropriateNetworkError");function r9e(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!o2t(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[ua].status=e.status),"statusText"in e&&e.statusText!=null&&(t[ua].statusText=e.statusText),"headers"in e&&e.headers!=null&&XIt(t[ry],e.headers),r){if(m2t.includes(t.status))throw ii.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[ua].body=r.body,r.type!=null&&!t[ua].headersList.contains("content-type",!0)&&t[ua].headersList.append("content-type",r.type,!0)}}s(r9e,"initializeResponse");function uD(t,e){let r=new D2(PW);return r[ua]=t,r[ry]=new n9e(PW),o9e(r[ry],t.headersList),i9e(r[ry],e),r2t&&t.body?.stream&&n2t.register(r,new WeakRef(t.body.stream)),r}s(uD,"fromInnerResponse");ii.converters.ReadableStream=ii.interfaceConverter(ReadableStream);ii.converters.FormData=ii.interfaceConverter(h2t);ii.converters.URLSearchParams=ii.interfaceConverter(URLSearchParams);ii.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?ii.converters.USVString(t,e,r):l2t(t)?ii.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||g2t.isArrayBuffer(t)?ii.converters.BufferSource(t,e,r):sle.isFormDataLike(t)?ii.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?ii.converters.URLSearchParams(t,e,r):ii.converters.DOMString(t,e,r)};ii.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?ii.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:ii.converters.XMLHttpRequestBodyInit(t,e,r)};ii.converters.ResponseInit=ii.dictionaryConverter([{key:"status",converter:ii.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:ii.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:ii.converters.HeadersInit}]);a9e.exports={isNetworkError:y2t,makeNetworkError:DW,makeResponse:x4,makeAppropriateNetworkError:C2t,filterResponse:s9e,Response:D2,cloneResponse:lle,fromInnerResponse:uD}});var d9e=G((fYr,u9e)=>{"use strict";f();var{kConnected:l9e,kSize:c9e}=Qs(),cle=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[l9e]===0&&this.value[c9e]===0?void 0:this.value}},ule=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[l9e]===0&&e[c9e]===0&&this.finalizer(r)})}unregister(e){}};u9e.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:cle,FinalizationRegistry:ule}):{WeakRef,FinalizationRegistry}}});var v4=G((hYr,w9e)=>{"use strict";f();var{extractBody:x2t,mixinBody:v2t,cloneBody:b2t,bodyUnusable:f9e}=t4(),{Headers:v9e,fill:E2t,HeadersList:MW,setHeadersGuard:fle,getHeadersGuard:I2t,setHeadersList:b9e,getHeadersList:p9e}=P2(),{FinalizationRegistry:T2t}=d9e()(),LW=Ai(),m9e=require("node:util"),{isValidHTTPToken:w2t,sameOrigin:h9e,environmentSettingsObject:NW}=S0(),{forbiddenMethodsSet:_2t,corsSafeListedMethodsSet:S2t,referrerPolicy:R2t,requestRedirect:k2t,requestMode:B2t,requestCredentials:P2t,requestCache:D2t,requestDuplex:N2t}=BP(),{kEnumerableProperty:el,normalizedMethodRecordsBase:L2t,normalizedMethodRecords:F2t}=LW,{kHeaders:D0,kSignal:FW,kState:xs,kDispatcher:dle}=Ev(),{webidl:Cn}=yc(),{URLSerializer:M2t}=Ed(),{kConstruct:QW}=Qs(),Q2t=require("node:assert"),{getMaxListeners:g9e,setMaxListeners:A9e,getEventListeners:O2t,defaultMaxListeners:y9e}=require("node:events"),U2t=Symbol("abortController"),E9e=new T2t(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),OW=new WeakMap;function C9e(t){return e;function e(){let r=t.deref();if(r!==void 0){E9e.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=OW.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}OW.delete(r.signal)}}}}s(C9e,"buildAbort");var x9e=!1,Nv=class t{static{s(this,"Request")}constructor(e,r={}){if(Cn.util.markAsUncloneable(this),e===QW)return;let n="Request constructor";Cn.argumentLengthCheck(arguments,1,n),e=Cn.converters.RequestInfo(e,n,"input"),r=Cn.converters.RequestInit(r,n,"init");let i=null,o=null,a=NW.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[dle]=r.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=UW({urlList:[b]}),o="cors"}else this[dle]=r.dispatcher||e[dle],Q2t(e instanceof t),i=e[xs],l=e[FW];let c=NW.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&h9e(i.window,c)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=UW({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:NW.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(r).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let b=r.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!h9e(E,NW.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw Cn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let b=r.method,E=F2t[b];if(E!==void 0)i.method=E;else{if(!w2t(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(_2t.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=L2t[_]??b,i.method=b}!x9e&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),x9e=!0)}r.signal!==void 0&&(l=r.signal),this[xs]=i;let m=new AbortController;if(this[FW]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[U2t]=m;let b=new WeakRef(m),E=C9e(b);try{(typeof g9e=="function"&&g9e(l)===y9e||O2t(l,"abort").length>=y9e)&&A9e(1500,l)}catch{}LW.addAbortListener(l,E),E9e.register(m,{signal:l,abort:E},E)}}if(this[D0]=new v9e(QW),b9e(this[D0],i.headersList),fle(this[D0],"request"),p==="no-cors"){if(!S2t.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);fle(this[D0],"request-no-cors")}if(d){let b=p9e(this[D0]),E=r.headers!==void 0?r.headers:new MW(b);if(b.clear(),E instanceof MW){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else E2t(this[D0],E)}let h=e instanceof t?e[xs].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[b,E]=x2t(r.body,i.keepalive);g=b,E&&!p9e(this[D0]).contains("content-type",!0)&&this[D0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(f9e(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[xs].body=v}get method(){return Cn.brandCheck(this,t),this[xs].method}get url(){return Cn.brandCheck(this,t),M2t(this[xs].url)}get headers(){return Cn.brandCheck(this,t),this[D0]}get destination(){return Cn.brandCheck(this,t),this[xs].destination}get referrer(){return Cn.brandCheck(this,t),this[xs].referrer==="no-referrer"?"":this[xs].referrer==="client"?"about:client":this[xs].referrer.toString()}get referrerPolicy(){return Cn.brandCheck(this,t),this[xs].referrerPolicy}get mode(){return Cn.brandCheck(this,t),this[xs].mode}get credentials(){return this[xs].credentials}get cache(){return Cn.brandCheck(this,t),this[xs].cache}get redirect(){return Cn.brandCheck(this,t),this[xs].redirect}get integrity(){return Cn.brandCheck(this,t),this[xs].integrity}get keepalive(){return Cn.brandCheck(this,t),this[xs].keepalive}get isReloadNavigation(){return Cn.brandCheck(this,t),this[xs].reloadNavigation}get isHistoryNavigation(){return Cn.brandCheck(this,t),this[xs].historyNavigation}get signal(){return Cn.brandCheck(this,t),this[FW]}get body(){return Cn.brandCheck(this,t),this[xs].body?this[xs].body.stream:null}get bodyUsed(){return Cn.brandCheck(this,t),!!this[xs].body&&LW.isDisturbed(this[xs].body.stream)}get duplex(){return Cn.brandCheck(this,t),"half"}clone(){if(Cn.brandCheck(this,t),f9e(this))throw new TypeError("unusable");let e=I9e(this[xs]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=OW.get(this.signal);n===void 0&&(n=new Set,OW.set(this.signal,n));let i=new WeakRef(r);n.add(i),LW.addAbortListener(r.signal,C9e(i))}return T9e(e,r.signal,I2t(this[D0]))}[m9e.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${m9e.formatWithOptions(r,n)}`}};v2t(Nv);function UW(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new MW(t.headersList):new MW}}s(UW,"makeRequest");function I9e(t){let e=UW({...t,body:null});return t.body!=null&&(e.body=b2t(e,t.body)),e}s(I9e,"cloneRequest");function T9e(t,e,r){let n=new Nv(QW);return n[xs]=t,n[FW]=e,n[D0]=new v9e(QW),b9e(n[D0],t.headersList),fle(n[D0],r),n}s(T9e,"fromInnerRequest");Object.defineProperties(Nv.prototype,{method:el,url:el,headers:el,redirect:el,clone:el,signal:el,duplex:el,destination:el,body:el,bodyUsed:el,isHistoryNavigation:el,isReloadNavigation:el,keepalive:el,integrity:el,cache:el,credentials:el,attribute:el,referrerPolicy:el,referrer:el,mode:el,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Cn.converters.Request=Cn.interfaceConverter(Nv);Cn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?Cn.converters.USVString(t,e,r):t instanceof Nv?Cn.converters.Request(t,e,r):Cn.converters.USVString(t,e,r)};Cn.converters.AbortSignal=Cn.interfaceConverter(AbortSignal);Cn.converters.RequestInit=Cn.dictionaryConverter([{key:"method",converter:Cn.converters.ByteString},{key:"headers",converter:Cn.converters.HeadersInit},{key:"body",converter:Cn.nullableConverter(Cn.converters.BodyInit)},{key:"referrer",converter:Cn.converters.USVString},{key:"referrerPolicy",converter:Cn.converters.DOMString,allowedValues:R2t},{key:"mode",converter:Cn.converters.DOMString,allowedValues:B2t},{key:"credentials",converter:Cn.converters.DOMString,allowedValues:P2t},{key:"cache",converter:Cn.converters.DOMString,allowedValues:D2t},{key:"redirect",converter:Cn.converters.DOMString,allowedValues:k2t},{key:"integrity",converter:Cn.converters.DOMString},{key:"keepalive",converter:Cn.converters.boolean},{key:"signal",converter:Cn.nullableConverter(t=>Cn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Cn.converters.any},{key:"duplex",converter:Cn.converters.DOMString,allowedValues:N2t},{key:"dispatcher",converter:Cn.converters.any}]);w9e.exports={Request:Nv,makeRequest:UW,fromInnerRequest:T9e,cloneRequest:I9e}});var pD=G((yYr,q9e)=>{"use strict";f();var{makeNetworkError:Do,makeAppropriateNetworkError:qW,filterResponse:ple,makeResponse:WW,fromInnerResponse:q2t}=dD(),{HeadersList:_9e}=P2(),{Request:W2t,cloneRequest:G2t}=v4(),Lv=require("node:zlib"),{bytesMatch:H2t,makePolicyContainer:j2t,clonePolicyContainer:V2t,requestBadPort:$2t,TAOCheck:z2t,appendRequestOriginHeader:Y2t,responseLocationURL:K2t,requestCurrentURL:Wg,setRequestReferrerPolicyOnRedirect:J2t,tryUpgradeRequestToAPotentiallyTrustworthyURL:X2t,createOpaqueTimingInfo:yle,appendFetchMetadata:Z2t,corsCheck:eTt,crossOriginResourcePolicyCheck:tTt,determineRequestsReferrer:rTt,coarsenedSharedCurrentTime:fD,createDeferredPromise:nTt,isBlobLike:iTt,sameOrigin:Ale,isCancelled:N2,isAborted:S9e,isErrorLike:oTt,fullyReadBody:sTt,readableStreamClose:aTt,isomorphicEncode:GW,urlIsLocal:lTt,urlIsHttpHttpsScheme:Cle,urlHasHttpsScheme:cTt,clampAndCoarsenConnectionTimingInfo:uTt,simpleRangeHeaderValue:dTt,buildContentRange:fTt,createInflate:pTt,extractMimeType:mTt}=S0(),{kState:P9e,kDispatcher:hTt}=Ev(),L2=require("node:assert"),{safelyExtractBody:xle,extractBody:R9e}=t4(),{redirectStatusSet:D9e,nullBodyStatus:N9e,safeMethodsSet:gTt,requestBodyHeader:ATt,subresourceSet:yTt}=BP(),CTt=require("node:events"),{Readable:xTt,pipeline:vTt,finished:bTt}=require("node:stream"),{addAbortListener:ETt,isErrored:ITt,isReadable:HW,bufferToLowerCasedHeaderName:k9e}=Ai(),{dataURLProcessor:TTt,serializeAMimeType:wTt,minimizeSupportedMimeType:_Tt}=Ed(),{getGlobalDispatcher:STt}=_W(),{webidl:RTt}=yc(),{STATUS_CODES:kTt}=require("node:http"),BTt=["GET","HEAD"],PTt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",mle,jW=class extends CTt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function DTt(t){L9e(t,"fetch")}s(DTt,"handleFetchDone");function NTt(t,e=void 0){RTt.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=nTt(),n;try{n=new W2t(t,e)}catch(d){return r.reject(d),r.promise}let i=n[P9e];if(n.signal.aborted)return hle(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return ETt(n.signal,()=>{l=!0,L2(c!=null),c.abort(n.signal.reason);let d=a?.deref();hle(r,i,d,n.signal.reason)}),c=M9e({request:i,processResponseEndOfBody:DTt,processResponse:s(d=>{if(!l){if(d.aborted){hle(r,i,a,c.serializedAbortReason);return}if(d.type==="error"){r.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(q2t(d,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[hTt]}),r.promise}s(NTt,"fetch");function L9e(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;Cle(r)&&n!==null&&(t.timingAllowPassed||(n=yle({startTime:n.startTime}),i=""),n.endTime=fD(),t.timingInfo=n,F9e(n,r.href,e,globalThis,i))}s(L9e,"finalizeAndReportTiming");var F9e=performance.markResourceTiming;function hle(t,e,r,n){if(t&&t.reject(n),e.body!=null&&HW(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[P9e];i.body!=null&&HW(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(hle,"abortFetch");function M9e({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=STt()}){L2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=fD(u),p=yle({startTime:d}),m={controller:new jW(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return L2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=V2t(t.client.policyContainer):t.policyContainer=j2t()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,yTt.has(t.destination),Q9e(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(M9e,"fetching");async function Q9e(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!lTt(Wg(r))&&(n=Do("local URLs only")),X2t(r),$2t(r)==="blocked"&&(n=Do("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=rTt(r)),n===null&&(n=await(async()=>{let o=Wg(r);return Ale(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await B9e(t)):r.mode==="same-origin"?Do('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?Do('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await B9e(t)):Cle(Wg(r))?(r.responseTainting="cors",await O9e(t)):Do("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=ple(n,"basic"):r.responseTainting==="cors"?n=ple(n,"cors"):r.responseTainting==="opaque"?n=ple(n,"opaque"):L2(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=Do()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||N9e.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(l=>gle(t,Do(l)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(l=>{if(!H2t(l,r.integrity)){o("integrity mismatch");return}n.body=xle(l)[0],gle(t,n)},"processBody");await sTt(n.body,a,o)}else gle(t,n)}s(Q9e,"mainFetch");function B9e(t){if(N2(t)&&t.request.redirectCount===0)return Promise.resolve(qW(t));let{request:e}=t,{protocol:r}=Wg(e);switch(r){case"about:":return Promise.resolve(Do("about scheme is not supported"));case"blob:":{mle||(mle=require("node:buffer").resolveObjectURL);let n=Wg(e);if(n.search.length!==0)return Promise.resolve(Do("NetworkError when attempting to fetch resource."));let i=mle(n.toString());if(e.method!=="GET"||!iTt(i))return Promise.resolve(Do("invalid method"));let o=WW(),a=i.size,l=GW(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=dTt(u,!0);if(d==="failure")return Promise.resolve(Do("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Do("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=R9e(h);o.body=g[0];let y=GW(`${h.size}`),v=fTt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=R9e(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let n=Wg(e),i=TTt(n);if(i==="failure")return Promise.resolve(Do("failed to fetch the data URL"));let o=wTt(i.mimeType);return Promise.resolve(WW({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:xle(i.body)[0]}))}case"file:":return Promise.resolve(Do("not implemented... yet..."));case"http:":case"https:":return O9e(t).catch(n=>Do(n));default:return Promise.resolve(Do("unknown scheme"))}}s(B9e,"schemeFetch");function LTt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(LTt,"finalizeResponse");function gle(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(r=yle(r),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=mTt(e.headersList);d!=="failure"&&(c.contentType=_Tt(d))}t.request.initiatorType!=null&&F9e(r,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():bTt(i.body.stream,()=>{n()})}s(gle,"fetchFinale");async function O9e(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await U9e(t),e.responseTainting==="cors"&&eTt(e,r)==="failure")return Do("cors failure");z2t(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&tTt(e.origin,e.client,e.destination,n)==="blocked"?Do("blocked"):(D9e.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=Do("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await FTt(t,r):L2(!1)),r.timingInfo=i,r)}s(O9e,"httpFetch");function FTt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=K2t(n,Wg(r).hash),i==null)return e}catch(a){return Promise.resolve(Do(a))}if(!Cle(i))return Promise.resolve(Do("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(Do("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!Ale(r,i))return Promise.resolve(Do('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Do('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(Do());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!BTt.includes(r.method)){r.method="GET",r.body=null;for(let a of ATt)r.headersList.delete(a)}Ale(Wg(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(L2(r.body.source!=null),r.body=xle(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=fD(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),J2t(r,n),Q9e(t,!0)}s(FTt,"httpRedirectFetch");async function U9e(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,l=null,c=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=G2t(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=GW(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",GW(o.referrer.href),!0),Y2t(o),Z2t(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",PTt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(cTt(Wg(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Do("only if cached");let m=await MTt(i,u,r);!gTt.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?Do():N2(t)?qW(t):Do("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(N2(t))return qW(t);t.controller.connection.destroy(),a=await U9e(t,e,!0)}return a}s(U9e,"httpNetworkOrCacheFetch");async function MTt(t,e=!1,r=!1){L2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let l=r?"yes":"no";n.mode;let c=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(b){N2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{N2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{N2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of n.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=WW({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=WW({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),qW(t,g)):Do(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{N2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if(S9e(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){aTt(t.controller.controller),LTt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),ITt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){S9e(t)?(i.aborted=!0,HW(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):HW(p)&&t.controller.controller.error(new TypeError("terminated",{cause:oTt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=Wg(n),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:v.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=uTt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=fD(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=fD(t.crossOriginIsolatedCapability)},onHeaders(_,k,B,N){if(_<200)return;let W=[],ee="",me=new _9e;for(let ie=0;ie<k.length;ie+=2)me.append(k9e(k[ie]),k[ie+1].toString("latin1"),!0);let ae=me.get("content-encoding",!0);ae&&(W=ae.toLowerCase().split(",").map(ie=>ie.trim())),ee=me.get("location",!0),this.body=new xTt({read:B});let H=[],U=ee&&n.redirect==="follow"&&D9e.has(_);if(W.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!N9e.includes(_)&&!U)for(let ie=W.length-1;ie>=0;--ie){let V=W[ie];if(V==="x-gzip"||V==="gzip")H.push(Lv.createGunzip({flush:Lv.constants.Z_SYNC_FLUSH,finishFlush:Lv.constants.Z_SYNC_FLUSH}));else if(V==="deflate")H.push(pTt({flush:Lv.constants.Z_SYNC_FLUSH,finishFlush:Lv.constants.Z_SYNC_FLUSH}));else if(V==="br")H.push(Lv.createBrotliDecompress({flush:Lv.constants.BROTLI_OPERATION_FLUSH,finishFlush:Lv.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let le=this.onError.bind(this);return b({status:_,statusText:N,headersList:me,body:H.length?vTt(this.body,...H,ie=>{ie&&this.onError(ie)}).on("error",le):this.body.on("error",le)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,B){if(_!==101)return;let N=new _9e;for(let W=0;W<k.length;W+=2)N.append(k9e(k[W]),k[W+1].toString("latin1"),!0);return b({status:_,statusText:kTt[_],headersList:N,socket:B}),!0}}))}s(h,"dispatch")}s(MTt,"httpNetworkFetch");q9e.exports={fetch:NTt,Fetch:jW,fetching:M9e,finalizeAndReportTiming:L9e}});var vle=G((vYr,W9e)=>{"use strict";f();W9e.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var H9e=G((EYr,G9e)=>{"use strict";f();var{webidl:N0}=yc(),VW=Symbol("ProgressEvent state"),ble=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=N0.converters.DOMString(e,"ProgressEvent constructor","type"),r=N0.converters.ProgressEventInit(r??{}),super(e,r),this[VW]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return N0.brandCheck(this,t),this[VW].lengthComputable}get loaded(){return N0.brandCheck(this,t),this[VW].loaded}get total(){return N0.brandCheck(this,t),this[VW].total}};N0.converters.ProgressEventInit=N0.dictionaryConverter([{key:"lengthComputable",converter:N0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:N0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:N0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:N0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:N0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:N0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);G9e.exports={ProgressEvent:ble}});var V9e=G((wYr,j9e)=>{"use strict";f();function QTt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(QTt,"getEncoding");j9e.exports={getEncoding:QTt}});var e6e=G((RYr,Z9e)=>{"use strict";f();var{kState:b4,kError:Ele,kResult:$9e,kAborted:mD,kLastProgressEventFired:Ile}=vle(),{ProgressEvent:OTt}=H9e(),{getEncoding:z9e}=V9e(),{serializeAMimeType:UTt,parseMIMEType:Y9e}=Ed(),{types:qTt}=require("node:util"),{StringDecoder:K9e}=require("string_decoder"),{btoa:J9e}=require("node:buffer"),WTt={enumerable:!0,writable:!1,configurable:!1};function GTt(t,e,r,n){if(t[b4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[b4]="loading",t[$9e]=null,t[Ele]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[mD];)try{let{done:u,value:d}=await l;if(c&&!t[mD]&&queueMicrotask(()=>{Fv("loadstart",t)}),c=!1,!u&&qTt.isUint8Array(d))a.push(d),(t[Ile]===void 0||Date.now()-t[Ile]>=50)&&!t[mD]&&(t[Ile]=Date.now(),queueMicrotask(()=>{Fv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[b4]="done";try{let p=HTt(a,r,e.type,n);if(t[mD])return;t[$9e]=p,Fv("load",t)}catch(p){t[Ele]=p,Fv("error",t)}t[b4]!=="loading"&&Fv("loadend",t)});break}}catch(u){if(t[mD])return;queueMicrotask(()=>{t[b4]="done",t[Ele]=u,Fv("error",t),t[b4]!=="loading"&&Fv("loadend",t)});break}})()}s(GTt,"readOperation");function Fv(t,e){let r=new OTt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(Fv,"fireAProgressEvent");function HTt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=Y9e(r||"application/octet-stream");o!=="failure"&&(i+=UTt(o)),i+=";base64,";let a=new K9e("latin1");for(let l of t)i+=J9e(a.write(l));return i+=J9e(a.end()),i}case"Text":{let i="failure";if(n&&(i=z9e(n)),i==="failure"&&r){let o=Y9e(r);o!=="failure"&&(i=z9e(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),jTt(t,i)}case"ArrayBuffer":return X9e(t).buffer;case"BinaryString":{let i="",o=new K9e("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(HTt,"packageData");function jTt(t,e){let r=X9e(t),n=VTt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(jTt,"decode");function VTt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(VTt,"BOMSniffing");function X9e(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(X9e,"combineByteSequences");Z9e.exports={staticPropertyDescriptors:WTt,readOperation:GTt,fireAProgressEvent:Fv}});var i6e=G((PYr,n6e)=>{"use strict";f();var{staticPropertyDescriptors:E4,readOperation:$W,fireAProgressEvent:t6e}=e6e(),{kState:F2,kError:r6e,kResult:zW,kEvents:Co,kAborted:$Tt}=vle(),{webidl:Fo}=yc(),{kEnumerableProperty:wd}=Ai(),jm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[F2]="empty",this[zW]=null,this[r6e]=null,this[Co]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Fo.converters.Blob(e,{strict:!1}),$W(this,e,"ArrayBuffer")}readAsBinaryString(e){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Fo.converters.Blob(e,{strict:!1}),$W(this,e,"BinaryString")}readAsText(e,r=void 0){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Fo.converters.Blob(e,{strict:!1}),r!==void 0&&(r=Fo.converters.DOMString(r,"FileReader.readAsText","encoding")),$W(this,e,"Text",r)}readAsDataURL(e){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Fo.converters.Blob(e,{strict:!1}),$W(this,e,"DataURL")}abort(){if(this[F2]==="empty"||this[F2]==="done"){this[zW]=null;return}this[F2]==="loading"&&(this[F2]="done",this[zW]=null),this[$Tt]=!0,t6e("abort",this),this[F2]!=="loading"&&t6e("loadend",this)}get readyState(){switch(Fo.brandCheck(this,t),this[F2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Fo.brandCheck(this,t),this[zW]}get error(){return Fo.brandCheck(this,t),this[r6e]}get onloadend(){return Fo.brandCheck(this,t),this[Co].loadend}set onloadend(e){Fo.brandCheck(this,t),this[Co].loadend&&this.removeEventListener("loadend",this[Co].loadend),typeof e=="function"?(this[Co].loadend=e,this.addEventListener("loadend",e)):this[Co].loadend=null}get onerror(){return Fo.brandCheck(this,t),this[Co].error}set onerror(e){Fo.brandCheck(this,t),this[Co].error&&this.removeEventListener("error",this[Co].error),typeof e=="function"?(this[Co].error=e,this.addEventListener("error",e)):this[Co].error=null}get onloadstart(){return Fo.brandCheck(this,t),this[Co].loadstart}set onloadstart(e){Fo.brandCheck(this,t),this[Co].loadstart&&this.removeEventListener("loadstart",this[Co].loadstart),typeof e=="function"?(this[Co].loadstart=e,this.addEventListener("loadstart",e)):this[Co].loadstart=null}get onprogress(){return Fo.brandCheck(this,t),this[Co].progress}set onprogress(e){Fo.brandCheck(this,t),this[Co].progress&&this.removeEventListener("progress",this[Co].progress),typeof e=="function"?(this[Co].progress=e,this.addEventListener("progress",e)):this[Co].progress=null}get onload(){return Fo.brandCheck(this,t),this[Co].load}set onload(e){Fo.brandCheck(this,t),this[Co].load&&this.removeEventListener("load",this[Co].load),typeof e=="function"?(this[Co].load=e,this.addEventListener("load",e)):this[Co].load=null}get onabort(){return Fo.brandCheck(this,t),this[Co].abort}set onabort(e){Fo.brandCheck(this,t),this[Co].abort&&this.removeEventListener("abort",this[Co].abort),typeof e=="function"?(this[Co].abort=e,this.addEventListener("abort",e)):this[Co].abort=null}};jm.EMPTY=jm.prototype.EMPTY=0;jm.LOADING=jm.prototype.LOADING=1;jm.DONE=jm.prototype.DONE=2;Object.defineProperties(jm.prototype,{EMPTY:E4,LOADING:E4,DONE:E4,readAsArrayBuffer:wd,readAsBinaryString:wd,readAsText:wd,readAsDataURL:wd,abort:wd,readyState:wd,result:wd,error:wd,onloadstart:wd,onprogress:wd,onload:wd,onabort:wd,onerror:wd,onloadend:wd,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(jm,{EMPTY:E4,LOADING:E4,DONE:E4});n6e.exports={FileReader:jm}});var YW=G((LYr,o6e)=>{"use strict";f();o6e.exports={kConstruct:Qs().kConstruct}});var l6e=G((MYr,a6e)=>{"use strict";f();var zTt=require("node:assert"),{URLSerializer:s6e}=Ed(),{isValidHeaderName:YTt}=S0();function KTt(t,e,r=!1){let n=s6e(t,r),i=s6e(e,r);return n===i}s(KTt,"urlEquals");function JTt(t){zTt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),YTt(r)&&e.push(r);return e}s(JTt,"getFieldValues");a6e.exports={urlEquals:KTt,getFieldValues:JTt}});var d6e=G((UYr,u6e)=>{"use strict";f();var{kConstruct:XTt}=YW(),{urlEquals:ZTt,getFieldValues:Tle}=l6e(),{kEnumerableProperty:M2,isDisturbed:ewt}=Ai(),{webidl:Yr}=yc(),{Response:twt,cloneResponse:rwt,fromInnerResponse:nwt}=dD(),{Request:ny,fromInnerRequest:iwt}=v4(),{kState:Vm}=Ev(),{fetching:owt}=pD(),{urlIsHttpHttpsScheme:KW,createDeferredPromise:I4,readAllBytes:swt}=S0(),wle=require("node:assert"),JW=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==XTt&&Yr.illegalConstructor(),Yr.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){Yr.brandCheck(this,t);let n="Cache.match";Yr.argumentLengthCheck(arguments,1,n),e=Yr.converters.RequestInfo(e,n,"request"),r=Yr.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){Yr.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=Yr.converters.RequestInfo(e,n,"request")),r=Yr.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){Yr.brandCheck(this,t);let r="Cache.add";Yr.argumentLengthCheck(arguments,1,r),e=Yr.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){Yr.brandCheck(this,t);let r="Cache.addAll";Yr.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw Yr.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=Yr.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Vm];if(!KW(h.url)||h.method!=="GET")throw Yr.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new ny(m)[Vm];if(!KW(h.url))throw Yr.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=I4();o.push(owt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(Yr.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=Tle(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(Yr.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),n.push(g.promise)}let l=await Promise.all(n),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=I4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,r){Yr.brandCheck(this,t);let n="Cache.put";Yr.argumentLengthCheck(arguments,2,n),e=Yr.converters.RequestInfo(e,n,"request"),r=Yr.converters.Response(r,n,"response");let i=null;if(e instanceof ny?i=e[Vm]:i=new ny(e)[Vm],!KW(i.url)||i.method!=="GET")throw Yr.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[Vm];if(o.status===206)throw Yr.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=Tle(o.headersList.get("vary"));for(let g of h)if(g==="*")throw Yr.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(ewt(o.body.stream)||o.body.stream.locked))throw Yr.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=rwt(o),l=I4();if(o.body!=null){let g=o.body.stream.getReader();swt(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=I4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){Yr.brandCheck(this,t);let n="Cache.delete";Yr.argumentLengthCheck(arguments,1,n),e=Yr.converters.RequestInfo(e,n,"request"),r=Yr.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof ny){if(i=e[Vm],i.method!=="GET"&&!r.ignoreMethod)return!1}else wle(typeof e=="string"),i=new ny(e)[Vm];let o=[],a={type:"delete",request:i,options:r};o.push(a);let l=I4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,r={}){Yr.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=Yr.converters.RequestInfo(e,n,"request")),r=Yr.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof ny){if(i=e[Vm],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new ny(e)[Vm]);let o=I4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,r);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=iwt(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw Yr.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw Yr.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=r.indexOf(c);wle(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw Yr.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!KW(c.url))throw Yr.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw Yr.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw Yr.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=r.indexOf(u);wle(d!==-1),r.splice(d,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[l,c]=a;this.#n(e,l,c,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!ZTt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let l=Tle(n.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=r.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof ny){if(i=e[Vm],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new ny(e)[Vm]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,r);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=nwt(l,"immutable");if(a.push(c.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(JW.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:M2,matchAll:M2,add:M2,addAll:M2,put:M2,delete:M2,keys:M2});var c6e=[{key:"ignoreSearch",converter:Yr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:Yr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:Yr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Yr.converters.CacheQueryOptions=Yr.dictionaryConverter(c6e);Yr.converters.MultiCacheQueryOptions=Yr.dictionaryConverter([...c6e,{key:"cacheName",converter:Yr.converters.DOMString}]);Yr.converters.Response=Yr.interfaceConverter(twt);Yr.converters["sequence<RequestInfo>"]=Yr.sequenceConverter(Yr.converters.RequestInfo);u6e.exports={Cache:JW}});var p6e=G((GYr,f6e)=>{"use strict";f();var{kConstruct:hD}=YW(),{Cache:XW}=d6e(),{webidl:eu}=yc(),{kEnumerableProperty:gD}=Ai(),ZW=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==hD&&eu.illegalConstructor(),eu.util.markAsUncloneable(this)}async match(e,r={}){if(eu.brandCheck(this,t),eu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=eu.converters.RequestInfo(e),r=eu.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new XW(hD,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new XW(hD,n).match(e,r);if(o!==void 0)return o}}async has(e){eu.brandCheck(this,t);let r="CacheStorage.has";return eu.argumentLengthCheck(arguments,1,r),e=eu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){eu.brandCheck(this,t);let r="CacheStorage.open";if(eu.argumentLengthCheck(arguments,1,r),e=eu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new XW(hD,i)}let n=[];return this.#e.set(e,n),new XW(hD,n)}async delete(e){eu.brandCheck(this,t);let r="CacheStorage.delete";return eu.argumentLengthCheck(arguments,1,r),e=eu.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return eu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(ZW.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:gD,has:gD,open:gD,delete:gD,keys:gD});f6e.exports={CacheStorage:ZW}});var h6e=G((VYr,m6e)=>{"use strict";f();m6e.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var _le=G((zYr,x6e)=>{"use strict";f();function awt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(awt,"isCTLExcludingHtab");function g6e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(g6e,"validateCookieName");function A6e(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(A6e,"validateCookieValue");function y6e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(y6e,"validateCookiePath");function lwt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(lwt,"validateCookieDomain");var cwt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],uwt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],eG=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function C6e(t){return typeof t=="number"&&(t=new Date(t)),`${cwt[t.getUTCDay()]}, ${eG[t.getUTCDate()]} ${uwt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${eG[t.getUTCHours()]}:${eG[t.getUTCMinutes()]}:${eG[t.getUTCSeconds()]} GMT`}s(C6e,"toIMFDate");function dwt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(dwt,"validateCookieMaxAge");function fwt(t){if(t.name.length===0)return null;g6e(t.name),A6e(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(dwt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(lwt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(y6e(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${C6e(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(fwt,"stringify");x6e.exports={isCTLExcludingHtab:awt,validateCookieName:g6e,validateCookiePath:y6e,validateCookieValue:A6e,toIMFDate:C6e,stringify:fwt}});var b6e=G((JYr,v6e)=>{"use strict";f();var{maxNameValuePairSize:pwt,maxAttributeValueSize:mwt}=h6e(),{isCTLExcludingHtab:hwt}=_le(),{collectASequenceOfCodePointsFast:tG}=Ed(),gwt=require("node:assert");function Awt(t){if(hwt(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=tG(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=tG("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>pwt?null:{name:n,value:i,...T4(r)}}s(Awt,"parseSetCookie");function T4(t,e={}){if(t.length===0)return e;gwt(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=tG(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=tG("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>mwt)return T4(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return T4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return T4(t,e)}s(T4,"parseUnparsedAttributes");v6e.exports={parseSetCookie:Awt,parseUnparsedAttributes:T4}});var T6e=G((eKr,I6e)=>{"use strict";f();var{parseSetCookie:ywt}=b6e(),{stringify:Cwt}=_le(),{webidl:Mi}=yc(),{Headers:rG}=P2();function xwt(t){Mi.argumentLengthCheck(arguments,1,"getCookies"),Mi.brandCheck(t,rG,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(xwt,"getCookies");function vwt(t,e,r){Mi.brandCheck(t,rG,{strict:!1});let n="deleteCookie";Mi.argumentLengthCheck(arguments,2,n),e=Mi.converters.DOMString(e,n,"name"),r=Mi.converters.DeleteCookieAttributes(r),E6e(t,{name:e,value:"",expires:new Date(0),...r})}s(vwt,"deleteCookie");function bwt(t){Mi.argumentLengthCheck(arguments,1,"getSetCookies"),Mi.brandCheck(t,rG,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>ywt(r)):[]}s(bwt,"getSetCookies");function E6e(t,e){Mi.argumentLengthCheck(arguments,2,"setCookie"),Mi.brandCheck(t,rG,{strict:!1}),e=Mi.converters.Cookie(e);let r=Cwt(e);r&&t.append("Set-Cookie",r)}s(E6e,"setCookie");Mi.converters.DeleteCookieAttributes=Mi.dictionaryConverter([{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Mi.converters.Cookie=Mi.dictionaryConverter([{converter:Mi.converters.DOMString,key:"name"},{converter:Mi.converters.DOMString,key:"value"},{converter:Mi.nullableConverter(t=>typeof t=="number"?Mi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Mi.sequenceConverter(Mi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);I6e.exports={getCookies:xwt,deleteCookie:vwt,getSetCookies:bwt,setCookie:E6e}});var _4=G((nKr,_6e)=>{"use strict";f();var{webidl:Hr}=yc(),{kEnumerableProperty:_d}=Ai(),{kConstruct:w6e}=Qs(),{MessagePort:Ewt}=require("node:worker_threads"),w4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===w6e){super(arguments[1],arguments[2]),Hr.util.markAsUncloneable(this);return}let n="MessageEvent constructor";Hr.argumentLengthCheck(arguments,1,n),e=Hr.converters.DOMString(e,n,"type"),r=Hr.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,Hr.util.markAsUncloneable(this)}get data(){return Hr.brandCheck(this,t),this.#e.data}get origin(){return Hr.brandCheck(this,t),this.#e.origin}get lastEventId(){return Hr.brandCheck(this,t),this.#e.lastEventId}get source(){return Hr.brandCheck(this,t),this.#e.source}get ports(){return Hr.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",l=null,c=[]){return Hr.brandCheck(this,t),Hr.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,r){let n=new t(w6e,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Iwt}=w4;delete w4.createFastMessageEvent;var nG=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";Hr.argumentLengthCheck(arguments,1,n),e=Hr.converters.DOMString(e,n,"type"),r=Hr.converters.CloseEventInit(r),super(e,r),this.#e=r,Hr.util.markAsUncloneable(this)}get wasClean(){return Hr.brandCheck(this,t),this.#e.wasClean}get code(){return Hr.brandCheck(this,t),this.#e.code}get reason(){return Hr.brandCheck(this,t),this.#e.reason}},iG=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";Hr.argumentLengthCheck(arguments,1,n),super(e,r),Hr.util.markAsUncloneable(this),e=Hr.converters.DOMString(e,n,"type"),r=Hr.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return Hr.brandCheck(this,t),this.#e.message}get filename(){return Hr.brandCheck(this,t),this.#e.filename}get lineno(){return Hr.brandCheck(this,t),this.#e.lineno}get colno(){return Hr.brandCheck(this,t),this.#e.colno}get error(){return Hr.brandCheck(this,t),this.#e.error}};Object.defineProperties(w4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:_d,origin:_d,lastEventId:_d,source:_d,ports:_d,initMessageEvent:_d});Object.defineProperties(nG.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:_d,code:_d,wasClean:_d});Object.defineProperties(iG.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:_d,filename:_d,lineno:_d,colno:_d,error:_d});Hr.converters.MessagePort=Hr.interfaceConverter(Ewt);Hr.converters["sequence<MessagePort>"]=Hr.sequenceConverter(Hr.converters.MessagePort);var Sle=[{key:"bubbles",converter:Hr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Hr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Hr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Hr.converters.MessageEventInit=Hr.dictionaryConverter([...Sle,{key:"data",converter:Hr.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:Hr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:Hr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:Hr.nullableConverter(Hr.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:Hr.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);Hr.converters.CloseEventInit=Hr.dictionaryConverter([...Sle,{key:"wasClean",converter:Hr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:Hr.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:Hr.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);Hr.converters.ErrorEventInit=Hr.dictionaryConverter([...Sle,{key:"message",converter:Hr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:Hr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:Hr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:Hr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:Hr.converters.any}]);_6e.exports={MessageEvent:w4,CloseEvent:nG,ErrorEvent:iG,createFastMessageEvent:Iwt}});var Q2=G((sKr,S6e)=>{"use strict";f();var Twt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",wwt={enumerable:!0,writable:!1,configurable:!1},_wt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Swt={NOT_SENT:0,PROCESSING:1,SENT:2},Rwt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},kwt=2**16-1,Bwt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},Pwt=Buffer.allocUnsafe(0),Dwt={string:1,typedArray:2,arrayBuffer:3,blob:4};S6e.exports={uid:Twt,sentCloseFrameState:Swt,staticPropertyDescriptors:wwt,states:_wt,opcodes:Rwt,maxUnsigned16Bit:kwt,parserStates:Bwt,emptyBuffer:Pwt,sendHints:Dwt}});var AD=G((lKr,R6e)=>{"use strict";f();R6e.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var xD=G((uKr,Q6e)=>{"use strict";f();var{kReadyState:yD,kController:Nwt,kResponse:Lwt,kBinaryType:Fwt,kWebSocketURL:Mwt}=AD(),{states:CD,opcodes:Mv}=Q2(),{ErrorEvent:Qwt,createFastMessageEvent:Owt}=_4(),{isUtf8:Uwt}=require("node:buffer"),{collectASequenceOfCodePointsFast:qwt,removeHTTPWhitespace:k6e}=Ed();function Wwt(t){return t[yD]===CD.CONNECTING}s(Wwt,"isConnecting");function Gwt(t){return t[yD]===CD.OPEN}s(Gwt,"isEstablished");function Hwt(t){return t[yD]===CD.CLOSING}s(Hwt,"isClosing");function jwt(t){return t[yD]===CD.CLOSED}s(jwt,"isClosed");function Rle(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(Rle,"fireEvent");function Vwt(t,e,r){if(t[yD]!==CD.OPEN)return;let n;if(e===Mv.TEXT)try{n=M6e(r)}catch{P6e(t,"Received invalid UTF-8 in text frame.");return}else e===Mv.BINARY&&(t[Fwt]==="blob"?n=new Blob([r]):n=$wt(r));Rle("message",t,Owt,{origin:t[Mwt].origin,data:n})}s(Vwt,"websocketMessageReceived");function $wt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s($wt,"toArrayBuffer");function zwt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(zwt,"isValidSubprotocol");function Ywt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(Ywt,"isValidStatusCode");function P6e(t,e){let{[Nwt]:r,[Lwt]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&Rle("error",t,(i,o)=>new Qwt(i,o),{error:new Error(e),message:e})}s(P6e,"failWebsocketConnection");function D6e(t){return t===Mv.CLOSE||t===Mv.PING||t===Mv.PONG}s(D6e,"isControlFrame");function N6e(t){return t===Mv.CONTINUATION}s(N6e,"isContinuationFrame");function L6e(t){return t===Mv.TEXT||t===Mv.BINARY}s(L6e,"isTextBinaryFrame");function Kwt(t){return L6e(t)||N6e(t)||D6e(t)}s(Kwt,"isValidOpcode");function Jwt(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=qwt(";",t,e),[i,o=""]=n.split("=");r.set(k6e(i,!0,!1),k6e(o,!1,!0)),e.position++}return r}s(Jwt,"parseExtensions");function Xwt(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(Xwt,"isValidClientWindowBits");var F6e=typeof process.versions.icu=="string",B6e=F6e?new TextDecoder("utf-8",{fatal:!0}):void 0,M6e=F6e?B6e.decode.bind(B6e):function(t){if(Uwt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Q6e.exports={isConnecting:Wwt,isEstablished:Gwt,isClosing:Hwt,isClosed:jwt,fireEvent:Rle,isValidSubprotocol:zwt,isValidStatusCode:Ywt,failWebsocketConnection:P6e,websocketMessageReceived:Vwt,utf8Decode:M6e,isControlFrame:D6e,isContinuationFrame:N6e,isTextBinaryFrame:L6e,isValidOpcode:Kwt,parseExtensions:Jwt,isValidClientWindowBits:Xwt}});var sG=G((pKr,O6e)=>{"use strict";f();var{maxUnsigned16Bit:Zwt}=Q2(),oG=16386,kle,vD=null,S4=oG;try{kle=require("node:crypto")}catch{kle={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function e_t(){return S4===oG&&(S4=0,kle.randomFillSync(vD??=Buffer.allocUnsafe(oG),0,oG)),[vD[S4++],vD[S4++],vD[S4++],vD[S4++]]}s(e_t,"generateMask");var Ble=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=e_t(),i=r?.byteLength??0,o=i,a=6;i>Zwt?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=n[0],l[a-3]=n[1],l[a-2]=n[2],l[a-1]=n[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=r[c]^n[c&3];return l}};O6e.exports={WebsocketFrameSend:Ble}});var Dle=G((gKr,V6e)=>{"use strict";f();var{uid:t_t,states:bD,sentCloseFrameState:aG,emptyBuffer:r_t,opcodes:n_t}=Q2(),{kReadyState:ED,kSentClose:lG,kByteParser:q6e,kReceivedClose:U6e,kResponse:W6e}=AD(),{fireEvent:i_t,failWebsocketConnection:Qv,isClosing:o_t,isClosed:s_t,isEstablished:a_t,parseExtensions:l_t}=xD(),{channels:R4}=W5(),{CloseEvent:c_t}=_4(),{makeRequest:u_t}=v4(),{fetching:d_t}=pD(),{Headers:f_t,getHeadersList:p_t}=P2(),{getDecodeSplit:m_t}=S0(),{WebsocketFrameSend:h_t}=sG(),Ple;try{Ple=require("node:crypto")}catch{}function g_t(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=u_t({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=p_t(new f_t(o.headers));l.headersList=p}let c=Ple.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),d_t({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Qv(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Qv(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Qv(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Qv(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=Ple.createHash("sha1").update(c+t_t).digest("base64");if(m!==h){Qv(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=l_t(g),!y.has("permessage-deflate"))){Qv(n,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!m_t("sec-websocket-protocol",l.headersList).includes(v)){Qv(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",G6e),p.socket.on("close",H6e),p.socket.on("error",j6e),R4.open.hasSubscribers&&R4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(g_t,"establishWebSocketConnection");function A_t(t,e,r,n){if(!(o_t(t)||s_t(t)))if(!a_t(t))Qv(t,"Connection was closed before it was established."),t[ED]=bD.CLOSING;else if(t[lG]===aG.NOT_SENT){t[lG]=aG.PROCESSING;let i=new h_t;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=r_t,t[W6e].socket.write(i.createFrame(n_t.CLOSE)),t[lG]=aG.SENT,t[ED]=bD.CLOSING}else t[ED]=bD.CLOSING}s(A_t,"closeWebSocketConnection");function G6e(t){this.ws[q6e].write(t)||this.pause()}s(G6e,"onSocketData");function H6e(){let{ws:t}=this,{[W6e]:e}=t;e.socket.off("data",G6e),e.socket.off("close",H6e),e.socket.off("error",j6e);let r=t[lG]===aG.SENT&&t[U6e],n=1005,i="",o=t[q6e].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[U6e]||(n=1006),t[ED]=bD.CLOSED,i_t("close",t,(a,l)=>new c_t(a,l),{wasClean:r,code:n,reason:i}),R4.close.hasSubscribers&&R4.close.publish({websocket:t,code:n,reason:i})}s(H6e,"onSocketClose");function j6e(t){let{ws:e}=this;e[ED]=bD.CLOSING,R4.socketError.hasSubscribers&&R4.socketError.publish(t),this.destroy()}s(j6e,"onSocketError");V6e.exports={establishWebSocketConnection:g_t,closeWebSocketConnection:A_t}});var z6e=G((CKr,$6e)=>{"use strict";f();var{createInflateRaw:y_t,Z_DEFAULT_WINDOWBITS:C_t}=require("node:zlib"),{isValidClientWindowBits:x_t}=xD(),v_t=Buffer.from([0,0,255,255]),cG=Symbol("kBuffer"),uG=Symbol("kLength"),Nle=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=C_t;if(this.#t.serverMaxWindowBits){if(!x_t(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=y_t({windowBits:i}),this.#e[cG]=[],this.#e[uG]=0,this.#e.on("data",o=>{this.#e[cG].push(o),this.#e[uG]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(v_t),this.#e.flush(()=>{let i=Buffer.concat(this.#e[cG],this.#e[uG]);this.#e[cG].length=0,this.#e[uG]=0,n(null,i)})}};$6e.exports={PerMessageDeflate:Nle}});var oNe=G((bKr,iNe)=>{"use strict";f();var{Writable:b_t}=require("node:stream"),E_t=require("node:assert"),{parserStates:Sd,opcodes:k4,states:I_t,emptyBuffer:Y6e,sentCloseFrameState:K6e}=Q2(),{kReadyState:T_t,kSentClose:J6e,kResponse:X6e,kReceivedClose:Z6e}=AD(),{channels:dG}=W5(),{isValidStatusCode:w_t,isValidOpcode:__t,failWebsocketConnection:lp,websocketMessageReceived:eNe,utf8Decode:S_t,isControlFrame:tNe,isTextBinaryFrame:Lle,isContinuationFrame:R_t}=xD(),{WebsocketFrameSend:rNe}=sG(),{closeWebSocketConnection:nNe}=Dle(),{PerMessageDeflate:k_t}=z6e(),Fle=class extends b_t{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=Sd.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new k_t(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===Sd.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==k4.CONTINUATION,l=r[1]&127,c=r[0]&64,u=r[0]&32,d=r[0]&16;if(!__t(i))return lp(this.ws,"Invalid opcode received"),e();if(o)return lp(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){lp(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){lp(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!Lle(i)){lp(this.ws,"Invalid frame type was fragmented.");return}if(Lle(i)&&this.#o.length>0){lp(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){lp(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&tNe(i)){lp(this.ws,"Control frame either too large or fragmented");return}if(R_t(i)&&this.#o.length===0&&!this.#r.compressed){lp(this.ws,"Unexpected continuation frame");return}l<=125?(this.#r.payloadLength=l,this.#n=Sd.READ_DATA):l===126?this.#n=Sd.PAYLOADLENGTH_16:l===127&&(this.#n=Sd.PAYLOADLENGTH_64),Lle(i)&&(this.#r.binaryType=i,this.#r.compressed=c!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===Sd.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=Sd.READ_DATA}else if(this.#n===Sd.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){lp(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=Sd.READ_DATA}else if(this.#n===Sd.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(tNe(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=Sd.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){nNe(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=Sd.INFO,this.#i=!0,this.run(e);return}eNe(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=Sd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);eNe(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=Sd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return Y6e;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){E_t(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!w_t(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=S_t(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===k4.CLOSE){if(n===1)return lp(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return nNe(this.ws,i,o,o.length),lp(this.ws,o),!1}if(this.ws[J6e]!==K6e.SENT){let i=Y6e;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new rNe(i);this.ws[X6e].socket.write(o.createFrame(k4.CLOSE),a=>{a||(this.ws[J6e]=K6e.SENT)})}return this.ws[T_t]=I_t.CLOSING,this.ws[Z6e]=!0,!1}else if(r===k4.PING){if(!this.ws[Z6e]){let i=new rNe(e);this.ws[X6e].socket.write(i.createFrame(k4.PONG)),dG.ping.hasSubscribers&&dG.ping.publish({payload:e})}}else r===k4.PONG&&dG.pong.hasSubscribers&&dG.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};iNe.exports={ByteParser:Fle}});var uNe=G((TKr,cNe)=>{"use strict";f();var{WebsocketFrameSend:B_t}=sG(),{opcodes:sNe,sendHints:B4}=Q2(),P_t=zse(),aNe=Buffer[Symbol.species],Mle=class{static{s(this,"SendQueue")}#e=new P_t;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==B4.blob){let o=lNe(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=lNe(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function lNe(t,e){return new B_t(D_t(t,e)).createFrame(e===B4.string?sNe.TEXT:sNe.BINARY)}s(lNe,"createFrame");function D_t(t,e){switch(e){case B4.string:return Buffer.from(t);case B4.arrayBuffer:case B4.blob:return new aNe(t);case B4.typedArray:return new aNe(t.buffer,t.byteOffset,t.byteLength)}}s(D_t,"toBuffer");cNe.exports={SendQueue:Mle}});var CNe=G((SKr,yNe)=>{"use strict";f();var{webidl:Un}=yc(),{URLSerializer:N_t}=Ed(),{environmentSettingsObject:dNe}=S0(),{staticPropertyDescriptors:Ov,states:ID,sentCloseFrameState:L_t,sendHints:fG}=Q2(),{kWebSocketURL:fNe,kReadyState:Qle,kController:F_t,kBinaryType:pG,kResponse:pNe,kSentClose:M_t,kByteParser:Q_t}=AD(),{isConnecting:O_t,isEstablished:U_t,isClosing:q_t,isValidSubprotocol:W_t,fireEvent:mNe}=xD(),{establishWebSocketConnection:G_t,closeWebSocketConnection:hNe}=Dle(),{ByteParser:H_t}=oNe(),{kEnumerableProperty:cp,isBlobLike:gNe}=Ai(),{getGlobalDispatcher:j_t}=_W(),{types:ANe}=require("node:util"),{ErrorEvent:V_t,CloseEvent:$_t}=_4(),{SendQueue:z_t}=uNe(),L0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Un.util.markAsUncloneable(this);let n="WebSocket constructor";Un.argumentLengthCheck(arguments,1,n);let i=Un.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Un.converters.USVString(e,n,"url"),r=i.protocols;let o=dNe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(c=>W_t(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[fNe]=new URL(a.href);let l=dNe.settingsObject;this[F_t]=G_t(a,r,l,this,(c,u)=>this.#o(c,u),i),this[Qle]=t.CONNECTING,this[M_t]=L_t.NOT_SENT,this[pG]="blob"}close(e=void 0,r=void 0){Un.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Un.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Un.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");hNe(this,e,r,i)}send(e){Un.brandCheck(this,t);let r="WebSocket.send";if(Un.argumentLengthCheck(arguments,1,r),e=Un.converters.WebSocketSendData(e,r,"data"),O_t(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!U_t(this)||q_t(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},fG.string)}else ANe.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},fG.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},fG.typedArray)):gNe(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},fG.blob))}get readyState(){return Un.brandCheck(this,t),this[Qle]}get bufferedAmount(){return Un.brandCheck(this,t),this.#t}get url(){return Un.brandCheck(this,t),N_t(this[fNe])}get extensions(){return Un.brandCheck(this,t),this.#n}get protocol(){return Un.brandCheck(this,t),this.#i}get onopen(){return Un.brandCheck(this,t),this.#e.open}set onopen(e){Un.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Un.brandCheck(this,t),this.#e.error}set onerror(e){Un.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Un.brandCheck(this,t),this.#e.close}set onclose(e){Un.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Un.brandCheck(this,t),this.#e.message}set onmessage(e){Un.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Un.brandCheck(this,t),this[pG]}set binaryType(e){Un.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[pG]="blob":this[pG]=e}#o(e,r){this[pNe]=e;let n=new H_t(this,r);n.on("drain",Y_t),n.on("error",K_t.bind(this)),e.socket.ws=this,this[Q_t]=n,this.#r=new z_t(e.socket),this[Qle]=ID.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),mNe("open",this)}};L0.CONNECTING=L0.prototype.CONNECTING=ID.CONNECTING;L0.OPEN=L0.prototype.OPEN=ID.OPEN;L0.CLOSING=L0.prototype.CLOSING=ID.CLOSING;L0.CLOSED=L0.prototype.CLOSED=ID.CLOSED;Object.defineProperties(L0.prototype,{CONNECTING:Ov,OPEN:Ov,CLOSING:Ov,CLOSED:Ov,url:cp,readyState:cp,bufferedAmount:cp,onopen:cp,onerror:cp,onclose:cp,close:cp,onmessage:cp,binaryType:cp,send:cp,extensions:cp,protocol:cp,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(L0,{CONNECTING:Ov,OPEN:Ov,CLOSING:Ov,CLOSED:Ov});Un.converters["sequence<DOMString>"]=Un.sequenceConverter(Un.converters.DOMString);Un.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Un.util.Type(t)==="Object"&&Symbol.iterator in t?Un.converters["sequence<DOMString>"](t):Un.converters.DOMString(t,e,r)};Un.converters.WebSocketInit=Un.dictionaryConverter([{key:"protocols",converter:Un.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Un.converters.any,defaultValue:s(()=>j_t(),"defaultValue")},{key:"headers",converter:Un.nullableConverter(Un.converters.HeadersInit)}]);Un.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Un.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Un.converters.WebSocketInit(t):{protocols:Un.converters["DOMString or sequence<DOMString>"](t)}};Un.converters.WebSocketSendData=function(t){if(Un.util.Type(t)==="Object"){if(gNe(t))return Un.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||ANe.isArrayBuffer(t))return Un.converters.BufferSource(t)}return Un.converters.USVString(t)};function Y_t(){this.ws[pNe].socket.resume()}s(Y_t,"onParserDrain");function K_t(t){let e,r;t instanceof $_t?(e=t.reason,r=t.code):e=t.message,mNe("error",this,()=>new V_t("error",{error:t,message:e})),hNe(this,r)}s(K_t,"onParserError");yNe.exports={WebSocket:L0}});var Ole=G((BKr,xNe)=>{"use strict";f();function J_t(t){return t.indexOf("\0")===-1}s(J_t,"isValidLastEventId");function X_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(X_t,"isASCIINumber");function Z_t(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(Z_t,"delay");xNe.exports={isValidLastEventId:J_t,isASCIINumber:X_t,delay:Z_t}});var INe=G((NKr,ENe)=>{"use strict";f();var{Transform:eSt}=require("node:stream"),{isASCIINumber:vNe,isValidLastEventId:bNe}=Ole(),iy=[239,187,191],Ule=10,mG=13,tSt=58,rSt=32,qle=class extends eSt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===iy[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===iy[0]&&this.buffer[1]===iy[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===iy[0]&&this.buffer[1]===iy[1]&&this.buffer[2]===iy[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===iy[0]&&this.buffer[1]===iy[1]&&this.buffer[2]===iy[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===Ule){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===Ule||this.buffer[this.pos]===mG){this.buffer[this.pos]===mG&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===Ule||this.buffer[this.pos]===mG){this.buffer[this.pos]===mG&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(tSt);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===rSt&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":vNe(o)&&(r[i]=o);break;case"id":bNe(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&vNe(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&bNe(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};ENe.exports={EventSourceStream:qle}});var PNe=G((MKr,BNe)=>{"use strict";f();var{pipeline:nSt}=require("node:stream"),{fetching:iSt}=pD(),{makeRequest:oSt}=v4(),{webidl:oy}=yc(),{EventSourceStream:sSt}=INe(),{parseMIMEType:aSt}=Ed(),{createFastMessageEvent:lSt}=_4(),{isNetworkError:TNe}=dD(),{delay:cSt}=Ole(),{kEnumerableProperty:O2}=Ai(),{environmentSettingsObject:wNe}=S0(),_Ne=!1,SNe=3e3,TD=0,RNe=1,wD=2,uSt="anonymous",dSt="use-credentials",P4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=TD;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),oy.util.markAsUncloneable(this);let n="EventSource constructor";oy.argumentLengthCheck(arguments,1,n),_Ne||(_Ne=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=oy.converters.USVString(e,n,"url"),r=oy.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:SNe};let i=wNe,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=uSt;r.withCredentials&&(a=dSt,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=wNe.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#r=oSt(l),this.#l()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#n===wD)return;this.#n=TD;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{TNe(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(TNe(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=n.headersList.get("content-type",!0),o=i!==null?aSt(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=RNe,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let l=new sSt({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(lSt(c.type,c.options))},"push")});nSt(n.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=iSt(e)}async#c(){this.#n!==wD&&(this.#n=TD,this.dispatchEvent(new Event("error")),await cSt(this.#a.reconnectionTime),this.#n===TD&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){oy.brandCheck(this,t),this.#n!==wD&&(this.#n=wD,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},kNe={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:TD,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:RNe,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:wD,writable:!1}};Object.defineProperties(P4,kNe);Object.defineProperties(P4.prototype,kNe);Object.defineProperties(P4.prototype,{close:O2,onerror:O2,onmessage:O2,onopen:O2,readyState:O2,url:O2,withCredentials:O2});oy.converters.EventSourceInitDict=oy.dictionaryConverter([{key:"withCredentials",converter:oy.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:oy.converters.any}]);BNe.exports={EventSource:P4,defaultReconnectionTime:SNe}});var FNe=G((UKr,Rn)=>{"use strict";f();var fSt=KP(),DNe=SP(),pSt=l4(),mSt=U8e(),hSt=c4(),gSt=fae(),ASt=nPe(),ySt=cPe(),NNe=yo(),gG=Ai(),{InvalidArgumentError:hG}=NNe,D4=YPe(),CSt=kP(),xSt=$ae(),vSt=kDe(),bSt=Kae(),ESt=Nae(),ISt=AW(),{getGlobalDispatcher:LNe,setGlobalDispatcher:TSt}=_W(),wSt=SW(),_St=oW(),SSt=sW();Object.assign(DNe.prototype,D4);Rn.exports.Dispatcher=DNe;Rn.exports.Client=fSt;Rn.exports.Pool=pSt;Rn.exports.BalancedPool=mSt;Rn.exports.Agent=hSt;Rn.exports.ProxyAgent=gSt;Rn.exports.EnvHttpProxyAgent=ASt;Rn.exports.RetryAgent=ySt;Rn.exports.RetryHandler=ISt;Rn.exports.DecoratorHandler=wSt;Rn.exports.RedirectHandler=_St;Rn.exports.createRedirectInterceptor=SSt;Rn.exports.interceptors={redirect:MDe(),retry:ODe(),dump:qDe(),dns:HDe()};Rn.exports.buildConnector=CSt;Rn.exports.errors=NNe;Rn.exports.util={parseHeaders:gG.parseHeaders,headerNameToString:gG.headerNameToString};function _D(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new hG("invalid url");if(r!=null&&typeof r!="object")throw new hG("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new hG("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(gG.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=gG.parseURL(e);let{agent:i,dispatcher:o=LNe()}=r;if(i)throw new hG("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(_D,"makeDispatcher");Rn.exports.setGlobalDispatcher=TSt;Rn.exports.getGlobalDispatcher=LNe;var RSt=pD().fetch;Rn.exports.fetch=s(async function(e,r=void 0){try{return await RSt(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Rn.exports.Headers=P2().Headers;Rn.exports.Response=dD().Response;Rn.exports.Request=v4().Request;Rn.exports.FormData=MP().FormData;Rn.exports.File=globalThis.File??require("node:buffer").File;Rn.exports.FileReader=i6e().FileReader;var{setGlobalOrigin:kSt,getGlobalOrigin:BSt}=pse();Rn.exports.setGlobalOrigin=kSt;Rn.exports.getGlobalOrigin=BSt;var{CacheStorage:PSt}=p6e(),{kConstruct:DSt}=YW();Rn.exports.caches=new PSt(DSt);var{deleteCookie:NSt,getCookies:LSt,getSetCookies:FSt,setCookie:MSt}=T6e();Rn.exports.deleteCookie=NSt;Rn.exports.getCookies=LSt;Rn.exports.getSetCookies=FSt;Rn.exports.setCookie=MSt;var{parseMIMEType:QSt,serializeAMimeType:OSt}=Ed();Rn.exports.parseMIMEType=QSt;Rn.exports.serializeAMimeType=OSt;var{CloseEvent:USt,ErrorEvent:qSt,MessageEvent:WSt}=_4();Rn.exports.WebSocket=CNe().WebSocket;Rn.exports.CloseEvent=USt;Rn.exports.ErrorEvent=qSt;Rn.exports.MessageEvent=WSt;Rn.exports.request=_D(D4.request);Rn.exports.stream=_D(D4.stream);Rn.exports.pipeline=_D(D4.pipeline);Rn.exports.connect=_D(D4.connect);Rn.exports.upgrade=_D(D4.upgrade);Rn.exports.MockClient=xSt;Rn.exports.MockPool=bSt;Rn.exports.MockAgent=vSt;Rn.exports.mockErrors=ESt;var{EventSource:GSt}=PNe();Rn.exports.EventSource=GSt});var ui=G((GKr,MNe)=>{f();MNe.exports={options:{usePureJavaScript:!1}}});var UNe=G((jKr,ONe)=>{f();var Wle={};ONe.exports=Wle;var QNe={};Wle.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=HSt(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};Wle.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=QNe[e];if(!r){r=QNe[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function HSt(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,l=t.at(r);a<o.length;++a)l+=o[a]<<8,o[a]=l%n,l=l/n|0;for(;l>0;)o.push(l%n),l=l/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}s(HSt,"_encodeWithByteBuffer")});var uo=G((zKr,HNe)=>{f();var qNe=ui(),WNe=UNe(),Be=HNe.exports=qNe.util=qNe.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Be.nextTick=process.nextTick,typeof setImmediate=="function"?Be.setImmediate=setImmediate:Be.setImmediate=Be.nextTick;return}if(typeof setImmediate=="function"){Be.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Be.nextTick=function(l){return setImmediate(l)};return}if(Be.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];Be.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Be.setImmediate;Be.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}Be.nextTick=Be.setImmediate})();Be.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Be.globalScope=function(){return Be.isNodejs?global:typeof self>"u"?window:self}();Be.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Be.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Be.isArrayBufferView=function(t){return t&&Be.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function SD(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(SD,"_checkBitsParam");Be.ByteBuffer=Gle;function Gle(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Be.isArrayBuffer(t)||Be.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Gle||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(Gle,"ByteStringBuffer");Be.ByteStringBuffer=Gle;var jSt=4096;Be.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>jSt&&(this.data.substr(0,1),this._constructedStringLength=0)};Be.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Be.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Be.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Be.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Be.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Be.encodeUtf8(t))};Be.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Be.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Be.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Be.ByteStringBuffer.prototype.putInt=function(t,e){SD(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Be.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Be.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Be.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt=function(t){SD(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Be.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Be.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Be.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Be.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Be.ByteStringBuffer.prototype.copy=function(){var t=Be.createBuffer(this.data);return t.read=this.read,t};Be.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Be.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Be.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Be.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Be.ByteStringBuffer.prototype.toString=function(){return Be.decodeUtf8(this.bytes())};function VSt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Be.isArrayBuffer(t),n=Be.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(VSt,"DataBuffer");Be.DataBuffer=VSt;Be.DataBuffer.prototype.length=function(){return this.write-this.read};Be.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Be.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Be.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Be.DataBuffer.prototype.putBytes=function(t,e){if(Be.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Be.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Be.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Be.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Be.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Be.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Be.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Be.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Be.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Be.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Be.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Be.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Be.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Be.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Be.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Be.DataBuffer.prototype.putInt=function(t,e){SD(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Be.DataBuffer.prototype.putSignedInt=function(t,e){return SD(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Be.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Be.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Be.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Be.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Be.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Be.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Be.DataBuffer.prototype.getInt=function(t){SD(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Be.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Be.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Be.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Be.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Be.DataBuffer.prototype.copy=function(){return new Be.DataBuffer(this)};Be.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Be.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Be.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Be.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Be.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Be.binary.raw.encode(e);if(t==="hex")return Be.binary.hex.encode(e);if(t==="base64")return Be.binary.base64.encode(e);if(t==="utf8")return Be.text.utf8.decode(e);if(t==="utf16")return Be.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Be.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Be.encodeUtf8(t)),new Be.ByteBuffer(t)};Be.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Be.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,l=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(n+=o,o="",l=0),o+=String.fromCharCode(i),++l;return n+=o,n};Be.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Be.bytesToHex=function(t){return Be.createBuffer(t).toHex()};Be.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Uv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",qv=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],GNe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Be.encode64=function(t,e){for(var r="",n="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),r+=Uv.charAt(i>>2),r+=Uv.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Uv.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Uv.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Be.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=qv[t.charCodeAt(a++)-43],n=qv[t.charCodeAt(a++)-43],i=qv[t.charCodeAt(a++)-43],o=qv[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Be.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Be.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Be.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:WNe.encode,decode:WNe.decode}};Be.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Be.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Be.binary.hex.encode=Be.bytesToHex;Be.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Be.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],r+=Uv.charAt(i>>2),r+=Uv.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Uv.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Uv.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Be.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,l,c=0,u=r;c<t.length;)i=qv[t.charCodeAt(c++)-43],o=qv[t.charCodeAt(c++)-43],a=qv[t.charCodeAt(c++)-43],l=qv[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,l!==64&&(n[u++]=(a&3)<<6|l));return e?u-r:n.subarray(0,u)};Be.binary.base58.encode=function(t,e){return Be.binary.baseN.encode(t,GNe,e)};Be.binary.base58.decode=function(t,e){return Be.binary.baseN.decode(t,GNe,e)};Be.text={utf8:{},utf16:{}};Be.text.utf8.encode=function(t,e,r){t=Be.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Be.text.utf8.decode=function(t){return Be.decodeUtf8(String.fromCharCode.apply(null,t))};Be.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-r:n};Be.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Be.deflate=function(t,e,r){if(e=Be.decode64(t.deflate(Be.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Be.inflate=function(t,e,r){var n=t.inflate(Be.encode64(e)).rval;return n===null?null:Be.decode64(n)};var Hle=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Be.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),jle=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Be.decode64(r))),r},"_getStorageObject"),$St=s(function(t,e,r,n){var i=jle(t,e);i===null&&(i={}),i[r]=n,Hle(t,e,i)},"_setItem"),zSt=s(function(t,e,r){var n=jle(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),YSt=s(function(t,e,r){var n=jle(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),Hle(t,e,n)}},"_removeItem"),KSt=s(function(t,e){Hle(t,e,null)},"_clearItems"),AG=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Be.setItem=function(t,e,r,n,i){AG($St,arguments,i)};Be.getItem=function(t,e,r,n){return AG(zSt,arguments,n)};Be.removeItem=function(t,e,r,n){AG(YSt,arguments,n)};Be.clearItems=function(t,e,r){AG(KSt,arguments,r)};Be.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Be.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};Be.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,l=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Be.formatSize=function(t){return t>=1073741824?t=Be.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Be.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Be.formatNumber(t/1024,0)+" KiB":t=Be.formatNumber(t,0)+" bytes",t};Be.bytesFromIP=function(t){return t.indexOf(".")!==-1?Be.bytesFromIPv4(t):t.indexOf(":")!==-1?Be.bytesFromIPv6(t):null};Be.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Be.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Be.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Be.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Be.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Be.bytesToIP=function(t){return t.length===4?Be.bytesToIPv4(t):t.length===16?Be.bytesToIPv6(t):null};Be.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Be.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Be.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],l=e.length;!a||l!==a.end+1?r.push({start:l,end:l}):(a.end=l,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Be.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Be&&!t.update)return e(null,Be.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Be.cores=navigator.hardwareConcurrency,e(null,Be.cores);if(typeof Worker>"u")return Be.cores=1,e(null,Be.cores);if(typeof Blob>"u")return Be.cores=2,e(null,Be.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Be.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Be.cores)}i(c,function(d,p){a.push(o(c,p)),n(a,l-1,c)})}s(n,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var yG=G((JKr,jNe)=>{f();var jl=ui();uo();jNe.exports=jl.cipher=jl.cipher||{};jl.cipher.algorithms=jl.cipher.algorithms||{};jl.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=jl.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new jl.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};jl.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=jl.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new jl.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};jl.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),jl.cipher.algorithms[t]=e};jl.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in jl.cipher.algorithms?jl.cipher.algorithms[t]:null};var Vle=jl.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Vle.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=jl.util.createBuffer(),this.output=t.output||jl.util.createBuffer(),this.mode.start(e)};Vle.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Vle.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var zle=G((ZKr,VNe)=>{f();var Vl=ui();uo();Vl.cipher=Vl.cipher||{};var Ti=VNe.exports=Vl.cipher.modes=Vl.cipher.modes||{};Ti.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ti.ecb.prototype.start=function(t){};Ti.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Ti.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Ti.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Ti.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Ti.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ti.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=CG(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Ti.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Ti.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Ti.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Ti.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Ti.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0};Ti.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=CG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ti.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ti.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ti.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0};Ti.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=CG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ti.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ti.ofb.prototype.decrypt=Ti.ofb.prototype.encrypt;Ti.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0};Ti.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=CG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ti.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}xG(this._inBlock)};Ti.ctr.prototype.decrypt=Ti.ctr.prototype.encrypt;Ti.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Ti.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Vl.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Vl.util.createBuffer(t.additionalData):r=Vl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Vl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat($le(n*8)))}this._inBlock=this._j0.slice(0),xG(this._inBlock),this._partialBytes=0,r=Vl.util.createBuffer(r),this._aDataLength=$le(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Ti.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),xG(this._inBlock)};Ti.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),xG(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Ti.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Vl.util.createBuffer();var n=this._aDataLength.concat($le(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Ti.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Ti.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Ti.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Ti.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Ti.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/n|0,u=(n-1-a%n)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};Ti.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function CG(t,e){if(typeof t=="string"&&(t=Vl.util.createBuffer(t)),Vl.util.isArray(t)&&t.length>4){var r=t;t=Vl.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Vl.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(CG,"transformIV");function xG(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(xG,"inc32");function $le(t){return[t/4294967296|0,t&4294967295]}s($le,"from64To32")});var Wv=G((rJr,KNe)=>{f();var rs=ui();yG();zle();uo();KNe.exports=rs.aes=rs.aes||{};rs.aes.startEncrypting=function(t,e,r,n){var i=vG({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};rs.aes.createEncryptionCipher=function(t,e){return vG({key:t,output:null,decrypt:!1,mode:e})};rs.aes.startDecrypting=function(t,e,r,n){var i=vG({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};rs.aes.createDecryptionCipher=function(t,e){return vG({key:t,output:null,decrypt:!0,mode:e})};rs.aes.Algorithm=function(t,e){Jle||zNe();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return Kle(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return Kle(r._w,n,i,!0)},"decrypt")}}),r._init=!1};rs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=rs.util.createBuffer(e);else if(rs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=rs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!rs.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!rs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=YNe(e,t.decrypt&&!a),this._init=!0}};rs.aes._expandKey=function(t,e){return Jle||zNe(),YNe(t,e)};rs.aes._updateBlock=Kle;L4("AES-ECB",rs.cipher.modes.ecb);L4("AES-CBC",rs.cipher.modes.cbc);L4("AES-CFB",rs.cipher.modes.cfb);L4("AES-OFB",rs.cipher.modes.ofb);L4("AES-CTR",rs.cipher.modes.ctr);L4("AES-GCM",rs.cipher.modes.gcm);function L4(t,e){var r=s(function(){return new rs.aes.Algorithm(t,e)},"factory");rs.cipher.registerAlgorithm(t,r)}s(L4,"registerAlgorithm");var Jle=!1,N4=4,Ou,Yle,$Ne,U2,$m;function zNe(){Jle=!0,$Ne=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Ou=new Array(256),Yle=new Array(256),U2=new Array(4),$m=new Array(4);for(var e=0;e<4;++e)U2[e]=new Array(256),$m[e]=new Array(256);for(var r=0,n=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,Ou[r]=l,Yle[l]=r,c=t[l],i=t[r],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)U2[p][r]=u,$m[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(zNe,"initialize");function YNe(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,l=N4*a,c=o;c<l;++c)n=r[c-1],c%o===0?(n=Ou[n>>>16&255]<<24^Ou[n>>>8&255]<<16^Ou[n&255]<<8^Ou[n>>>24]^$Ne[i]<<24,i++):o>6&&c%o===4&&(n=Ou[n>>>24]<<24^Ou[n>>>16&255]<<16^Ou[n>>>8&255]<<8^Ou[n&255]),r[c]=r[c-o]^n;if(e){var u,d=$m[0],p=$m[1],m=$m[2],h=$m[3],g=r.slice(0);l=r.length;for(var c=0,y=l-N4;c<l;c+=N4,y-=N4)if(c===0||c===l-N4)g[c]=r[y],g[c+1]=r[y+3],g[c+2]=r[y+2],g[c+3]=r[y+1];else for(var v=0;v<N4;++v)u=r[y+v],g[c+(3&-v)]=d[Ou[u>>>24]]^p[Ou[u>>>16&255]]^m[Ou[u>>>8&255]]^h[Ou[u&255]];r=g}return r}s(YNe,"_expandKey");function Kle(t,e,r,n){var i=t.length/4-1,o,a,l,c,u;n?(o=$m[0],a=$m[1],l=$m[2],c=$m[3],u=Yle):(o=U2[0],a=U2[1],l=U2[2],c=U2[3],u=Ou);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;r[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],r[n?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(Kle,"_updateBlock");function vG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=rs.cipher.createDecipher(r,t.key):n=rs.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var l=null;a instanceof rs.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(n,a)},n}s(vG,"_createCipher")});var Gv=G((oJr,JNe)=>{f();var RD=ui();RD.pki=RD.pki||{};var Xle=JNe.exports=RD.pki.oids=RD.oids=RD.oids||{};function wt(t,e){Xle[t]=e,Xle[e]=t}s(wt,"_IN");function Eo(t,e){Xle[t]=e}s(Eo,"_I_");wt("1.2.840.113549.1.1.1","rsaEncryption");wt("1.2.840.113549.1.1.4","md5WithRSAEncryption");wt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");wt("1.2.840.113549.1.1.7","RSAES-OAEP");wt("1.2.840.113549.1.1.8","mgf1");wt("1.2.840.113549.1.1.9","pSpecified");wt("1.2.840.113549.1.1.10","RSASSA-PSS");wt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");wt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");wt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");wt("1.3.101.112","EdDSA25519");wt("1.2.840.10040.4.3","dsa-with-sha1");wt("1.3.14.3.2.7","desCBC");wt("1.3.14.3.2.26","sha1");wt("1.3.14.3.2.29","sha1WithRSASignature");wt("2.16.840.1.101.3.4.2.1","sha256");wt("2.16.840.1.101.3.4.2.2","sha384");wt("2.16.840.1.101.3.4.2.3","sha512");wt("2.16.840.1.101.3.4.2.4","sha224");wt("2.16.840.1.101.3.4.2.5","sha512-224");wt("2.16.840.1.101.3.4.2.6","sha512-256");wt("1.2.840.113549.2.2","md2");wt("1.2.840.113549.2.5","md5");wt("1.2.840.113549.1.7.1","data");wt("1.2.840.113549.1.7.2","signedData");wt("1.2.840.113549.1.7.3","envelopedData");wt("1.2.840.113549.1.7.4","signedAndEnvelopedData");wt("1.2.840.113549.1.7.5","digestedData");wt("1.2.840.113549.1.7.6","encryptedData");wt("1.2.840.113549.1.9.1","emailAddress");wt("1.2.840.113549.1.9.2","unstructuredName");wt("1.2.840.113549.1.9.3","contentType");wt("1.2.840.113549.1.9.4","messageDigest");wt("1.2.840.113549.1.9.5","signingTime");wt("1.2.840.113549.1.9.6","counterSignature");wt("1.2.840.113549.1.9.7","challengePassword");wt("1.2.840.113549.1.9.8","unstructuredAddress");wt("1.2.840.113549.1.9.14","extensionRequest");wt("1.2.840.113549.1.9.20","friendlyName");wt("1.2.840.113549.1.9.21","localKeyId");wt("1.2.840.113549.1.9.22.1","x509Certificate");wt("1.2.840.113549.1.12.10.1.1","keyBag");wt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");wt("1.2.840.113549.1.12.10.1.3","certBag");wt("1.2.840.113549.1.12.10.1.4","crlBag");wt("1.2.840.113549.1.12.10.1.5","secretBag");wt("1.2.840.113549.1.12.10.1.6","safeContentsBag");wt("1.2.840.113549.1.5.13","pkcs5PBES2");wt("1.2.840.113549.1.5.12","pkcs5PBKDF2");wt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");wt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");wt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");wt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");wt("1.2.840.113549.2.7","hmacWithSHA1");wt("1.2.840.113549.2.8","hmacWithSHA224");wt("1.2.840.113549.2.9","hmacWithSHA256");wt("1.2.840.113549.2.10","hmacWithSHA384");wt("1.2.840.113549.2.11","hmacWithSHA512");wt("1.2.840.113549.3.7","des-EDE3-CBC");wt("2.16.840.1.101.3.4.1.2","aes128-CBC");wt("2.16.840.1.101.3.4.1.22","aes192-CBC");wt("2.16.840.1.101.3.4.1.42","aes256-CBC");wt("2.5.4.3","commonName");wt("2.5.4.4","surname");wt("2.5.4.5","serialNumber");wt("2.5.4.6","countryName");wt("2.5.4.7","localityName");wt("2.5.4.8","stateOrProvinceName");wt("2.5.4.9","streetAddress");wt("2.5.4.10","organizationName");wt("2.5.4.11","organizationalUnitName");wt("2.5.4.12","title");wt("2.5.4.13","description");wt("2.5.4.15","businessCategory");wt("2.5.4.17","postalCode");wt("2.5.4.42","givenName");wt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");wt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");wt("2.16.840.1.113730.1.1","nsCertType");wt("2.16.840.1.113730.1.13","nsComment");Eo("2.5.29.1","authorityKeyIdentifier");Eo("2.5.29.2","keyAttributes");Eo("2.5.29.3","certificatePolicies");Eo("2.5.29.4","keyUsageRestriction");Eo("2.5.29.5","policyMapping");Eo("2.5.29.6","subtreesConstraint");Eo("2.5.29.7","subjectAltName");Eo("2.5.29.8","issuerAltName");Eo("2.5.29.9","subjectDirectoryAttributes");Eo("2.5.29.10","basicConstraints");Eo("2.5.29.11","nameConstraints");Eo("2.5.29.12","policyConstraints");Eo("2.5.29.13","basicConstraints");wt("2.5.29.14","subjectKeyIdentifier");wt("2.5.29.15","keyUsage");Eo("2.5.29.16","privateKeyUsagePeriod");wt("2.5.29.17","subjectAltName");wt("2.5.29.18","issuerAltName");wt("2.5.29.19","basicConstraints");Eo("2.5.29.20","cRLNumber");Eo("2.5.29.21","cRLReason");Eo("2.5.29.22","expirationDate");Eo("2.5.29.23","instructionCode");Eo("2.5.29.24","invalidityDate");Eo("2.5.29.25","cRLDistributionPoints");Eo("2.5.29.26","issuingDistributionPoint");Eo("2.5.29.27","deltaCRLIndicator");Eo("2.5.29.28","issuingDistributionPoint");Eo("2.5.29.29","certificateIssuer");Eo("2.5.29.30","nameConstraints");wt("2.5.29.31","cRLDistributionPoints");wt("2.5.29.32","certificatePolicies");Eo("2.5.29.33","policyMappings");Eo("2.5.29.34","policyConstraints");wt("2.5.29.35","authorityKeyIdentifier");Eo("2.5.29.36","policyConstraints");wt("2.5.29.37","extKeyUsage");Eo("2.5.29.46","freshestCRL");Eo("2.5.29.54","inhibitAnyPolicy");wt("1.3.6.1.4.1.11129.2.4.2","timestampList");wt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");wt("1.3.6.1.5.5.7.3.1","serverAuth");wt("1.3.6.1.5.5.7.3.2","clientAuth");wt("1.3.6.1.5.5.7.3.3","codeSigning");wt("1.3.6.1.5.5.7.3.4","emailProtection");wt("1.3.6.1.5.5.7.3.8","timeStamping")});var zm=G((lJr,ZNe)=>{f();var vs=ui();uo();Gv();var nr=ZNe.exports=vs.asn1=vs.asn1||{};nr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};nr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};nr.create=function(t,e,r,n,i){if(vs.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var l={tagClass:t,type:e,constructed:r,composed:r||vs.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=nr.copy(l)),l};nr.copy=function(t,e){var r;if(vs.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(nr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:nr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};nr.equals=function(t,e,r){if(vs.util.isArray(t)){if(!vs.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!nr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&nr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};nr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function kD(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(kD,"_checkBufferLength");var JSt=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;kD(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");nr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=vs.util.createBuffer(t));var r=t.length(),n=bG(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function bG(t,e,r,n){var i;kD(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=JSt(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(kD(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(bG(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(bG(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===nr.Class.UNIVERSAL&&l===nr.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&n.decodeBitStrings&&a===nr.Class.UNIVERSAL&&l===nr.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===nr.Type.BITSTRING&&(kD(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=bG(t,e,r+1,v),E=i-t.length();e-=E,l==nr.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===nr.Class.UNIVERSAL||_===nr.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===nr.Type.BMPSTRING)for(d="";c>0;c-=2)kD(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return nr.create(a,l,m,d,k)}s(bG,"_fromDer");nr.toDer=function(t){var e=vs.util.createBuffer(),r=t.tagClass|t.type,n=vs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=nr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(nr.toDer(t.value[o]))}else if(t.type===nr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===nr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(n),e};nr.oidToDer=function(t){var e=t.split("."),r=vs.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,l=2;l<e.length;++l){n=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};nr.derToOid=function(t){var e;typeof t=="string"&&(t=vs.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};nr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};nr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,l,c)),e};nr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};nr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};nr.integerToDer=function(t){var e=vs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};nr.derToInteger=function(t){typeof t=="string"&&(t=vs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};nr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&vs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=nr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var XNe=/[^\\u0000-\\u00ff]/;nr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case nr.Class.UNIVERSAL:n+="Universal:";break;case nr.Class.APPLICATION:n+="Application:";break;case nr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case nr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===nr.Class.UNIVERSAL)switch(n+=t.type,t.type){case nr.Type.NONE:n+=" (None)";break;case nr.Type.BOOLEAN:n+=" (Boolean)";break;case nr.Type.INTEGER:n+=" (Integer)";break;case nr.Type.BITSTRING:n+=" (Bit string)";break;case nr.Type.OCTETSTRING:n+=" (Octet string)";break;case nr.Type.NULL:n+=" (Null)";break;case nr.Type.OID:n+=" (Object Identifier)";break;case nr.Type.ODESC:n+=" (Object Descriptor)";break;case nr.Type.EXTERNAL:n+=" (External or Instance of)";break;case nr.Type.REAL:n+=" (Real)";break;case nr.Type.ENUMERATED:n+=" (Enumerated)";break;case nr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case nr.Type.UTF8:n+=" (UTF8)";break;case nr.Type.ROID:n+=" (Relative Object Identifier)";break;case nr.Type.SEQUENCE:n+=" (Sequence)";break;case nr.Type.SET:n+=" (Set)";break;case nr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case nr.Type.IA5String:n+=" (IA5String (ASCII))";break;case nr.Type.UTCTIME:n+=" (UTC time)";break;case nr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case nr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=nr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(l+=","));n+=i+"Sub values: "+a+l}else{if(n+=i+"Value: ",t.type===nr.Type.OID){var c=nr.derToOid(t.value);n+=c,vs.pki&&vs.pki.oids&&c in vs.pki.oids&&(n+=" ("+vs.pki.oids[c]+") ")}if(t.type===nr.Type.INTEGER)try{n+=nr.derToInteger(t.value)}catch{n+="0x"+vs.util.bytesToHex(t.value)}else if(t.type===nr.Type.BITSTRING){if(t.value.length>1?n+="0x"+vs.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===nr.Type.OCTETSTRING)XNe.test(t.value)||(n+="("+t.value+") "),n+="0x"+vs.util.bytesToHex(t.value);else if(t.type===nr.Type.UTF8)try{n+=vs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+vs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===nr.Type.PRINTABLESTRING||t.type===nr.Type.IA5String?n+=t.value:XNe.test(t.value)?n+="0x"+vs.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Gg=G((dJr,e7e)=>{f();var EG=ui();e7e.exports=EG.md=EG.md||{};EG.md.algorithms=EG.md.algorithms||{}});var F4=G((pJr,t7e)=>{f();var sy=ui();Gg();uo();var XSt=t7e.exports=sy.hmac=sy.hmac||{};XSt.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in sy.md.algorithms)e=sy.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=sy.util.createBuffer(a);else if(sy.util.isArray(a)){var l=a;a=sy.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=sy.util.createBuffer(),n=sy.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);r.putByte(54^l),n.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var TG=G((hJr,o7e)=>{f();var Hg=ui();Gg();uo();var n7e=o7e.exports=Hg.md5=Hg.md5||{};Hg.md.md5=Hg.md.algorithms.md5=n7e;n7e.create=function(){i7e||ZSt();var t=null,e=Hg.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Hg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Hg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),r7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Hg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(Zle.substr(0,n.blockLength-a));for(var l,c=0,u=n.fullMessageLength.length-1;u>=0;--u)l=n.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};r7e(d,r,i);var p=Hg.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},n};var Zle=null,IG=null,BD=null,M4=null,i7e=!1;function ZSt(){Zle="\x80",Zle+=Hg.util.fillString("\0",64),IG=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],BD=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],M4=new Array(64);for(var t=0;t<64;++t)M4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);i7e=!0}s(ZSt,"_init");function r7e(t,e,r){for(var n,i,o,a,l,c,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),c=l^o&(a^l),n=i+c+M4[d]+e[d],u=BD[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<32;++d)c=a^l&(o^a),n=i+c+M4[d]+e[IG[d]],u=BD[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<48;++d)c=o^a^l,n=i+c+M4[d]+e[IG[d]],u=BD[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<64;++d)c=a^(o|~l),n=i+c+M4[d]+e[IG[d]],u=BD[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(r7e,"_update")});var q2=G((yJr,a7e)=>{f();var _G=ui();uo();var s7e=a7e.exports=_G.pem=_G.pem||{};s7e.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=wG(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=wG(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=wG(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=wG(t.headers[i]);return t.procType&&(r+=`\r
`),r+=_G.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};s7e.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:_G.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(e5t(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function wG(t){for(var e=t.name+": ",r=[],n=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(wG,"foldHeader");function e5t(t){return t.replace(/^\s+/,"")}s(e5t,"ltrim")});var PD=G((vJr,c7e)=>{f();var Os=ui();yG();zle();uo();c7e.exports=Os.des=Os.des||{};Os.des.startEncrypting=function(t,e,r,n){var i=SG({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createEncryptionCipher=function(t,e){return SG({key:t,output:null,decrypt:!1,mode:e})};Os.des.startDecrypting=function(t,e,r,n){var i=SG({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createDecryptionCipher=function(t,e){return SG({key:t,output:null,decrypt:!0,mode:e})};Os.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return l7e(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return l7e(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};Os.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Os.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=c5t(e),this._init=!0}};jg("DES-ECB",Os.cipher.modes.ecb);jg("DES-CBC",Os.cipher.modes.cbc);jg("DES-CFB",Os.cipher.modes.cfb);jg("DES-OFB",Os.cipher.modes.ofb);jg("DES-CTR",Os.cipher.modes.ctr);jg("3DES-ECB",Os.cipher.modes.ecb);jg("3DES-CBC",Os.cipher.modes.cbc);jg("3DES-CFB",Os.cipher.modes.cfb);jg("3DES-OFB",Os.cipher.modes.ofb);jg("3DES-CTR",Os.cipher.modes.ctr);function jg(t,e){var r=s(function(){return new Os.des.Algorithm(t,e)},"factory");Os.cipher.registerAlgorithm(t,r)}s(jg,"registerAlgorithm");var t5t=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],r5t=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],n5t=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],i5t=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],o5t=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],s5t=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],a5t=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],l5t=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function c5t(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var B=t.getInt32(),N=t.getInt32();_=(B>>>4^N)&252645135,N^=_,B^=_<<4,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>2^N)&858993459,N^=_,B^=_<<2,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=(N>>>8^B)&16711935,B^=_,N^=_<<8,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=B<<8|N>>>20&240,B=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var W=0;W<b.length;++W){b[W]?(B=B<<2|B>>>26,N=N<<2|N>>>26):(B=B<<1|B>>>27,N=N<<1|N>>>27),B&=-15,N&=-15;var ee=e[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|l[B>>>4&15],me=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(me>>>16^ee)&65535,v[E++]=ee^_,v[E++]=me^_<<16}}return v}s(c5t,"_createKeys");function l7e(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(r5t[h>>>24&63]|i5t[h>>>16&63]|s5t[h>>>8&63]|l5t[h&63]|t5t[g>>>24&63]|n5t[g>>>16&63]|o5t[g>>>8&63]|a5t[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,r[0]=l,r[1]=c}s(l7e,"_updateBlock");function SG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Os.cipher.createDecipher(r,t.key):n=Os.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var l=null;a instanceof Os.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(n,a)},n}s(SG,"_createCipher")});var RG=G((IJr,u7e)=>{f();var Uu=ui();F4();Gg();uo();var u5t=Uu.pkcs5=Uu.pkcs5||{},ay;Uu.util.isNodejs&&!Uu.options.usePureJavaScript&&(ay=require("crypto"));u7e.exports=Uu.pbkdf2=u5t.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Uu.util.isNodejs&&!Uu.options.usePureJavaScript&&ay.pbkdf2&&(i===null||typeof i!="object")&&(ay.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?ay.pbkdf2Sync.length===4?ay.pbkdf2(t,e,r,n,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):ay.pbkdf2(t,e,r,n,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):ay.pbkdf2Sync.length===4?ay.pbkdf2Sync(t,e,r,n).toString("binary"):ay.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Uu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Uu.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(n/a),u=n-(c-1)*a,d=Uu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(Uu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=r;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Uu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(Uu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=r)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Uu.util.xorBytes(m,h,a),g=h,++v,Uu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var tce=G((_Jr,h7e)=>{f();var Vg=ui();Gg();uo();var f7e=h7e.exports=Vg.sha256=Vg.sha256||{};Vg.md.sha256=Vg.md.algorithms.sha256=f7e;f7e.create=function(){p7e||d5t();var t=null,e=Vg.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Vg.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Vg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),d7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Vg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(ece.substr(0,n.blockLength-a));for(var l,c,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};d7e(p,r,i);var m=Vg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var ece=null,p7e=!1,m7e=null;function d5t(){ece="\x80",ece+=Vg.util.fillString("\0",64),m7e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p7e=!0}s(d5t,"_init");function d7e(t,e,r){for(var n,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=r.length();E>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),n=b+a+l+m7e[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+n>>>0,h=m,m=p,p=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(d7e,"_update")});var rce=G((kJr,g7e)=>{f();var $g=ui();uo();var kG=null;$g.util.isNodejs&&!$g.options.usePureJavaScript&&!process.versions["node-webkit"]&&(kG=require("crypto"));var f5t=g7e.exports=$g.prng=$g.prng||{};f5t.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=$g.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return $g.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),$g.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=$g.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=$g.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=$g.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),kG?(e.seedFile=function(u,d){kG.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return kG.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var up=G((DJr,nce)=>{f();var $l=ui();Wv();tce();rce();uo();(function(){if($l.random&&$l.random.getBytes){nce.exports=$l.random;return}(function(t){var e={},r=new Array(4),n=$l.util.createBuffer();e.formatKey=function(p){var m=$l.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),$l.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=$l.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return $l.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=$l.md.sha256;function i(){var p=$l.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=$l.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),$l.options.usePureJavaScript||!$l.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!$l.random)$l.random=o;else for(var d in o)$l.random[d]=o[d];$l.random.createInstance=i,nce.exports=$l.random})(typeof jQuery<"u"?jQuery:null)})()});var oce=G((FJr,C7e)=>{f();var Rd=ui();uo();var ice=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],A7e=[1,2,3,5],p5t=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),m5t=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");C7e.exports=Rd.rc2=Rd.rc2||{};Rd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Rd.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(ice[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-o,ice[r.at(128-o)&a]),l=127-o;l>=0;l--)r.setAt(l,ice[r.at(l+1)^r.at(l+o)]);return r};var y7e=s(function(t,e,r){var n=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=Rd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=p5t(g[u],A7e[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=m5t(g[u],A7e[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(r?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=r?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Rd.util.createBuffer(g)),n=!1,i=Rd.util.createBuffer(),o=y||new Rd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(n=!0,h.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,o,!r);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");Rd.rc2.startEncrypting=function(t,e,r){var n=Rd.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Rd.rc2.createEncryptionCipher=function(t,e){return y7e(t,e,!0)};Rd.rc2.startDecrypting=function(t,e,r){var n=Rd.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Rd.rc2.createDecryptionCipher=function(t,e){return y7e(t,e,!1)}});var ND=G((OJr,_7e)=>{f();var sce=ui();_7e.exports=sce.jsbn=sce.jsbn||{};var ly,h5t=0xdeadbeefcafe,x7e=(h5t&16777215)==15715070;function Ct(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(Ct,"BigInteger");sce.jsbn.BigInteger=Ct;function fo(){return new Ct(null)}s(fo,"nbi");function g5t(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(g5t,"am1");function A5t(t,e,r,n,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),r.data[n++]=c&1073741823}return i}s(A5t,"am2");function v7e(t,e,r,n,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+r.data[n]+i,i=(c>>28)+(d>>14)+l*u,r.data[n++]=c&268435455}return i}s(v7e,"am3");typeof navigator>"u"?(Ct.prototype.am=v7e,ly=28):x7e&&navigator.appName=="Microsoft Internet Explorer"?(Ct.prototype.am=A5t,ly=30):x7e&&navigator.appName!="Netscape"?(Ct.prototype.am=g5t,ly=26):(Ct.prototype.am=v7e,ly=28);Ct.prototype.DB=ly;Ct.prototype.DM=(1<<ly)-1;Ct.prototype.DV=1<<ly;var ace=52;Ct.prototype.FV=Math.pow(2,ace);Ct.prototype.F1=ace-ly;Ct.prototype.F2=2*ly-ace;var y5t="0123456789abcdefghijklmnopqrstuvwxyz",BG=new Array,Q4,dp;Q4=48;for(dp=0;dp<=9;++dp)BG[Q4++]=dp;Q4=97;for(dp=10;dp<36;++dp)BG[Q4++]=dp;Q4=65;for(dp=10;dp<36;++dp)BG[Q4++]=dp;function b7e(t){return y5t.charAt(t)}s(b7e,"int2char");function E7e(t,e){var r=BG[t.charCodeAt(e)];return r??-1}s(E7e,"intAt");function C5t(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(C5t,"bnpCopyTo");function x5t(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(x5t,"bnpFromInt");function Hv(t){var e=fo();return e.fromInt(t),e}s(Hv,"nbv");function v5t(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:E7e(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Ct.ZERO.subTo(this,this)}s(v5t,"bnpFromString");function b5t(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(b5t,"bnpClamp");function E5t(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(n=this.data[a]>>l)>0&&(i=!0,o=b7e(n));a>=0;)l<e?(n=(this.data[a]&(1<<l)-1)<<e-l,n|=this.data[--a]>>(l+=this.DB-e)):(n=this.data[a]>>(l-=e)&r,l<=0&&(l+=this.DB,--a)),n>0&&(i=!0),i&&(o+=b7e(n));return i?o:"0"}s(E5t,"bnToString");function I5t(){var t=fo();return Ct.ZERO.subTo(this,t),t}s(I5t,"bnNegate");function T5t(){return this.s<0?this.negate():this}s(T5t,"bnAbs");function w5t(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(w5t,"bnCompareTo");function PG(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(PG,"nbits");function _5t(){return this.t<=0?0:this.DB*(this.t-1)+PG(this.data[this.t-1]^this.s&this.DM)}s(_5t,"bnBitLength");function S5t(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(S5t,"bnpDLShiftTo");function R5t(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(R5t,"bnpDRShiftTo");function k5t(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>n|a,a=(this.data[l]&i)<<r;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(k5t,"bnpLShiftTo");function B5t(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(B5t,"bnpRShiftTo");function P5t(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(P5t,"bnpSubTo");function D5t(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Ct.ZERO.subTo(e,e)}s(D5t,"bnpMultiplyTo");function N5t(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(N5t,"bnpSquareTo");function L5t(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=fo());var o=fo(),a=this.s,l=t.s,c=this.DB-PG(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=r.t,v=y-u,b=e??fo();for(o.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),Ct.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=r.data[--y]==d?this.DM:Math.floor(r.data[y]*m+(r.data[y-1]+g)*h);if((r.data[y]+=o.am(0,E,r,v,0,u))<E)for(o.dlShiftTo(v,b),r.subTo(b,r);r.data[y]<--E;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),a!=l&&Ct.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&Ct.ZERO.subTo(r,r)}}}s(L5t,"bnpDivRemTo");function F5t(t){var e=fo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Ct.ZERO)>0&&t.subTo(e,e),e}s(F5t,"bnMod");function W2(t){this.m=t}s(W2,"Classic");function M5t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(M5t,"cConvert");function Q5t(t){return t}s(Q5t,"cRevert");function O5t(t){t.divRemTo(this.m,null,t)}s(O5t,"cReduce");function U5t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(U5t,"cMulTo");function q5t(t,e){t.squareTo(e),this.reduce(e)}s(q5t,"cSqrTo");W2.prototype.convert=M5t;W2.prototype.revert=Q5t;W2.prototype.reduce=O5t;W2.prototype.mulTo=U5t;W2.prototype.sqrTo=q5t;function W5t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(W5t,"bnpInvDigit");function G2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(G2,"Montgomery");function G5t(t){var e=fo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Ct.ZERO)>0&&this.m.subTo(e,e),e}s(G5t,"montConvert");function H5t(t){var e=fo();return t.copyTo(e),this.reduce(e),e}s(H5t,"montRevert");function j5t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(j5t,"montReduce");function V5t(t,e){t.squareTo(e),this.reduce(e)}s(V5t,"montSqrTo");function $5t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s($5t,"montMulTo");G2.prototype.convert=G5t;G2.prototype.revert=H5t;G2.prototype.reduce=j5t;G2.prototype.mulTo=$5t;G2.prototype.sqrTo=V5t;function z5t(){return(this.t>0?this.data[0]&1:this.s)==0}s(z5t,"bnpIsEven");function Y5t(t,e){if(t>4294967295||t<1)return Ct.ONE;var r=fo(),n=fo(),i=e.convert(this),o=PG(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(Y5t,"bnpExp");function K5t(t,e){var r;return t<256||e.isEven()?r=new W2(e):r=new G2(e),this.exp(t,r)}s(K5t,"bnModPowInt");Ct.prototype.copyTo=C5t;Ct.prototype.fromInt=x5t;Ct.prototype.fromString=v5t;Ct.prototype.clamp=b5t;Ct.prototype.dlShiftTo=S5t;Ct.prototype.drShiftTo=R5t;Ct.prototype.lShiftTo=k5t;Ct.prototype.rShiftTo=B5t;Ct.prototype.subTo=P5t;Ct.prototype.multiplyTo=D5t;Ct.prototype.squareTo=N5t;Ct.prototype.divRemTo=L5t;Ct.prototype.invDigit=W5t;Ct.prototype.isEven=z5t;Ct.prototype.exp=Y5t;Ct.prototype.toString=E5t;Ct.prototype.negate=I5t;Ct.prototype.abs=T5t;Ct.prototype.compareTo=w5t;Ct.prototype.bitLength=_5t;Ct.prototype.mod=F5t;Ct.prototype.modPowInt=K5t;Ct.ZERO=Hv(0);Ct.ONE=Hv(1);function J5t(){var t=fo();return this.copyTo(t),t}s(J5t,"bnClone");function X5t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(X5t,"bnIntValue");function Z5t(){return this.t==0?this.s:this.data[0]<<24>>24}s(Z5t,"bnByteValue");function e4t(){return this.t==0?this.s:this.data[0]<<16>>16}s(e4t,"bnShortValue");function t4t(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(t4t,"bnpChunkSize");function r4t(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(r4t,"bnSigNum");function n4t(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Hv(r),i=fo(),o=fo(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(n4t,"bnpToRadix");function i4t(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=E7e(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&Ct.ZERO.subTo(this,this)}s(i4t,"bnpFromRadix");function o4t(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Ct.ONE.shiftLeft(t-1),lce,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Ct.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(o4t,"bnpFromNumber");function s4t(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(s4t,"bnToByteArray");function a4t(t){return this.compareTo(t)==0}s(a4t,"bnEquals");function l4t(t){return this.compareTo(t)<0?this:t}s(l4t,"bnMin");function c4t(t){return this.compareTo(t)>0?this:t}s(c4t,"bnMax");function u4t(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(u4t,"bnpBitwiseTo");function d4t(t,e){return t&e}s(d4t,"op_and");function f4t(t){var e=fo();return this.bitwiseTo(t,d4t,e),e}s(f4t,"bnAnd");function lce(t,e){return t|e}s(lce,"op_or");function p4t(t){var e=fo();return this.bitwiseTo(t,lce,e),e}s(p4t,"bnOr");function I7e(t,e){return t^e}s(I7e,"op_xor");function m4t(t){var e=fo();return this.bitwiseTo(t,I7e,e),e}s(m4t,"bnXor");function T7e(t,e){return t&~e}s(T7e,"op_andnot");function h4t(t){var e=fo();return this.bitwiseTo(t,T7e,e),e}s(h4t,"bnAndNot");function g4t(){for(var t=fo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(g4t,"bnNot");function A4t(t){var e=fo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(A4t,"bnShiftLeft");function y4t(t){var e=fo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(y4t,"bnShiftRight");function C4t(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(C4t,"lbit");function x4t(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+C4t(this.data[t]);return this.s<0?this.t*this.DB:-1}s(x4t,"bnGetLowestSetBit");function v4t(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(v4t,"cbit");function b4t(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=v4t(this.data[r]^e);return t}s(b4t,"bnBitCount");function E4t(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(E4t,"bnTestBit");function I4t(t,e){var r=Ct.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(I4t,"bnpChangeBit");function T4t(t){return this.changeBit(t,lce)}s(T4t,"bnSetBit");function w4t(t){return this.changeBit(t,T7e)}s(w4t,"bnClearBit");function _4t(t){return this.changeBit(t,I7e)}s(_4t,"bnFlipBit");function S4t(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(S4t,"bnpAddTo");function R4t(t){var e=fo();return this.addTo(t,e),e}s(R4t,"bnAdd");function k4t(t){var e=fo();return this.subTo(t,e),e}s(k4t,"bnSubtract");function B4t(t){var e=fo();return this.multiplyTo(t,e),e}s(B4t,"bnMultiply");function P4t(t){var e=fo();return this.divRemTo(t,e,null),e}s(P4t,"bnDivide");function D4t(t){var e=fo();return this.divRemTo(t,null,e),e}s(D4t,"bnRemainder");function N4t(t){var e=fo(),r=fo();return this.divRemTo(t,e,r),new Array(e,r)}s(N4t,"bnDivideAndRemainder");function L4t(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(L4t,"bnpDMultiply");function F4t(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(F4t,"bnpDAddOffset");function DD(){}s(DD,"NullExp");function w7e(t){return t}s(w7e,"nNop");function M4t(t,e,r){t.multiplyTo(e,r)}s(M4t,"nMulTo");function Q4t(t,e){t.squareTo(e)}s(Q4t,"nSqrTo");DD.prototype.convert=w7e;DD.prototype.revert=w7e;DD.prototype.mulTo=M4t;DD.prototype.sqrTo=Q4t;function O4t(t){return this.exp(t,new DD)}s(O4t,"bnPow");function U4t(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(U4t,"bnpMultiplyLowerTo");function q4t(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(q4t,"bnpMultiplyUpperTo");function O4(t){this.r2=fo(),this.q3=fo(),Ct.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(O4,"Barrett");function W4t(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fo();return t.copyTo(e),this.reduce(e),e}s(W4t,"barrettConvert");function G4t(t){return t}s(G4t,"barrettRevert");function H4t(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(H4t,"barrettReduce");function j4t(t,e){t.squareTo(e),this.reduce(e)}s(j4t,"barrettSqrTo");function V4t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(V4t,"barrettMulTo");O4.prototype.convert=W4t;O4.prototype.revert=G4t;O4.prototype.reduce=H4t;O4.prototype.mulTo=V4t;O4.prototype.sqrTo=j4t;function $4t(t,e){var r=t.bitLength(),n,i=Hv(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new W2(e):e.isEven()?o=new O4(e):o=new G2(e);var a=new Array,l=3,c=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var d=fo();for(o.sqrTo(a[1],d);l<=u;)a[l]=fo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=fo(),y;for(r=PG(t.data[p])-1;p>=0;){for(r>=c?m=t.data[p]>>r-c&u:(m=(t.data[p]&(1<<r+1)-1)<<c-r,p>0&&(m|=t.data[p-1]>>this.DB+r-c)),l=n;(m&1)==0;)m>>=1,--l;if((r-=l)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s($4t,"bnModPow");function z4t(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(z4t,"bnGCD");function Y4t(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(Y4t,"bnpModInt");function K4t(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Ct.ZERO;for(var r=t.clone(),n=this.clone(),i=Hv(1),o=Hv(0),a=Hv(0),l=Hv(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(l,o)):(n.subTo(r,n),e&&a.subTo(i,a),l.subTo(o,l))}if(n.compareTo(Ct.ONE)!=0)return Ct.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s(K4t,"bnModInverse");var Ym=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],J4t=(1<<26)/Ym[Ym.length-1];function X4t(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ym[Ym.length-1]){for(e=0;e<Ym.length;++e)if(r.data[0]==Ym[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ym.length;){for(var n=Ym[e],i=e+1;i<Ym.length&&n<J4t;)n*=Ym[i++];for(n=r.modInt(n);e<i;)if(n%Ym[e++]==0)return!1}return r.millerRabin(t)}s(X4t,"bnIsProbablePrime");function Z4t(t){var e=this.subtract(Ct.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=eRt(),o,a=0;a<t;++a){do o=new Ct(this.bitLength(),i);while(o.compareTo(Ct.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(n,this);if(l.compareTo(Ct.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(Ct.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(Z4t,"bnpMillerRabin");function eRt(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(eRt,"bnGetPrng");Ct.prototype.chunkSize=t4t;Ct.prototype.toRadix=n4t;Ct.prototype.fromRadix=i4t;Ct.prototype.fromNumber=o4t;Ct.prototype.bitwiseTo=u4t;Ct.prototype.changeBit=I4t;Ct.prototype.addTo=S4t;Ct.prototype.dMultiply=L4t;Ct.prototype.dAddOffset=F4t;Ct.prototype.multiplyLowerTo=U4t;Ct.prototype.multiplyUpperTo=q4t;Ct.prototype.modInt=Y4t;Ct.prototype.millerRabin=Z4t;Ct.prototype.clone=J5t;Ct.prototype.intValue=X5t;Ct.prototype.byteValue=Z5t;Ct.prototype.shortValue=e4t;Ct.prototype.signum=r4t;Ct.prototype.toByteArray=s4t;Ct.prototype.equals=a4t;Ct.prototype.min=l4t;Ct.prototype.max=c4t;Ct.prototype.and=f4t;Ct.prototype.or=p4t;Ct.prototype.xor=m4t;Ct.prototype.andNot=h4t;Ct.prototype.not=g4t;Ct.prototype.shiftLeft=A4t;Ct.prototype.shiftRight=y4t;Ct.prototype.getLowestSetBit=x4t;Ct.prototype.bitCount=b4t;Ct.prototype.testBit=E4t;Ct.prototype.setBit=T4t;Ct.prototype.clearBit=w4t;Ct.prototype.flipBit=_4t;Ct.prototype.add=R4t;Ct.prototype.subtract=k4t;Ct.prototype.multiply=B4t;Ct.prototype.divide=P4t;Ct.prototype.remainder=D4t;Ct.prototype.divideAndRemainder=N4t;Ct.prototype.modPow=$4t;Ct.prototype.modInverse=K4t;Ct.prototype.pow=O4t;Ct.prototype.gcd=z4t;Ct.prototype.isProbablePrime=X4t});var U4=G((WJr,B7e)=>{f();var zg=ui();Gg();uo();var R7e=B7e.exports=zg.sha1=zg.sha1||{};zg.md.sha1=zg.md.algorithms.sha1=R7e;R7e.create=function(){k7e||tRt();var t=null,e=zg.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=zg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=zg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),S7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=zg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(cce.substr(0,n.blockLength-a));for(var l,c,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};S7e(p,r,i);var m=zg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var cce=null,k7e=!1;function tRt(){cce="\x80",cce+=zg.util.fillString("\0",64),k7e=!0}s(tRt,"_init");function S7e(t,e,r){for(var n,i,o,a,l,c,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,u=l^o&(a^l),n=(i<<5|i>>>27)+u+c+1518500249+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=l^o&(a^l),n=(i<<5|i>>>27)+u+c+1518500249+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+1859775393+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+1859775393+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o&a|l&(o^a),n=(i<<5|i>>>27)+u+c+2400959708+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+3395469782+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s(S7e,"_update")});var uce=G((jJr,D7e)=>{f();var Yg=ui();uo();up();U4();var P7e=D7e.exports=Yg.pkcs1=Yg.pkcs1||{};P7e.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=Yg.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=Yg.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=DG(i,l-o.digestLength-1,a),v=Yg.util.xorBytes(g,y,g.length),b=DG(v,o.digestLength,a),E=Yg.util.xorBytes(i,b,i.length);return"\0"+E+v};P7e.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=Yg.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=DG(d,i.digestLength,o),m=Yg.util.xorBytes(u,p,u.length),h=DG(m,a-i.digestLength-1,o),g=Yg.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var B=g.charCodeAt(k),N=B&1^1,W=E?65534:0;v|=B&W,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function DG(t,e,r){r||(r=Yg.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(DG,"rsa_mgf1")});var fce=G((zJr,dce)=>{f();var jv=ui();uo();ND();up();(function(){if(jv.prime){dce.exports=jv.prime;return}var t=dce.exports=jv.prime=jv.prime||{},e=jv.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||jv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(r[g++%8],0)}while(v<0||+new Date-E<v);jv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return jv.util.estimateCores(function(B,N){B&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var B=[],N=0;N<v;++N)B[N]=new Worker(_);for(var W=v,N=0;N<v;++N)B[N].addEventListener("message",me);var ee=!1;function me(ae){if(!ee){--W;var H=ae.data;if(H.found){for(var U=0;U<B.length;++U)B[U].terminate();return ee=!0,g(null,new e(H.prime,16))}y.bitLength()>p&&(y=u(p,m));var le=y.toString(16);ae.target.postMessage({hex:le,workLoad:b}),y.dAddOffset(E,0)}}s(me,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var LD=G((JJr,U7e)=>{f();var Kr=ui();zm();ND();Gv();uce();fce();up();uo();typeof to>"u"&&(to=Kr.jsbn.BigInteger);var to,pce=Kr.util.isNodejs?require("crypto"):null,qe=Kr.asn1,fp=Kr.util;Kr.pki=Kr.pki||{};U7e.exports=Kr.pki.rsa=Kr.rsa=Kr.rsa||{};var Xn=Kr.pki,rRt=[6,4,2,4,2,4,6,2],nRt={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},iRt={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},oRt={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},sRt=Kr.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},aRt={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},lRt=s(function(t){var e;if(t.algorithm in Xn.oids)e=Xn.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),o=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,n)),o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),qe.toDer(i).getBytes()},"emsaPkcs1v15encode"),Q7e=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(to.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(to.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new to(Kr.util.bytesToHex(Kr.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(to.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");Xn.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=O7e(t,e,r)):(i=Kr.util.createBuffer(),i.putBytes(t));for(var a=new to(i.toHex(),16),l=Q7e(a,e,n),c=l.toString(16),u=Kr.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Kr.util.hexToBytes(c)),u.getBytes()};Xn.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new to(Kr.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=Q7e(a,e,r),c=l.toString(16),u=Kr.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Kr.util.hexToBytes(c)),n!==!1?NG(u.getBytes(),e,r):u.getBytes()};Xn.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Kr.random,i={nextBytes:s(function(l){for(var c=n.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new to(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Xn.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new to(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new to(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(to.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(uRt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(rRt[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(to.ONE).gcd(t.e).compareTo(to.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(to.ONE),t.q1=t.q.subtract(to.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(to.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Xn.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Xn.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Xn.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Kr.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(N7e("generateKeyPair"))return pce.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return n(l);n(null,{privateKey:Xn.privateKeyFromPem(u),publicKey:Xn.publicKeyFromPem(c)})});if(L7e("generateKey")&&L7e("exportKey"))return fp.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:M7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return fp.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var c=Xn.privateKeyFromAsn1(qe.fromDer(Kr.util.createBuffer(l)));n(null,{privateKey:c,publicKey:Xn.setRsaPublicKey(c.n,c.e)})}});if(F7e("generateKey")&&F7e("exportKey")){var i=fp.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:M7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=fp.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Xn.privateKeyFromAsn1(qe.fromDer(Kr.util.createBuffer(p)));n(null,{privateKey:m,publicKey:Xn.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(N7e("generateKeyPairSync")){var o=pce.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Xn.privateKeyFromPem(o.privateKey),publicKey:Xn.publicKeyFromPem(o.publicKey)}}}var a=Xn.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Xn.rsa.stepKeyPairGenerationState(a,0),a.keys;cRt(a,r,n)};Xn.setRsaPublicKey=Xn.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return O7e(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return Kr.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return Xn.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=NG(u,r,!0);var d=qe.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!qe.validate(d,aRt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=qe.derToOid(p.algorithmIdentifier);if(!(g===Kr.oids.md2||g===Kr.oids.md5||g===Kr.oids.sha1||g===Kr.oids.sha224||g===Kr.oids.sha256||g===Kr.oids.sha384||g===Kr.oids.sha512||g===Kr.oids["sha512-224"]||g===Kr.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===Kr.oids.md2||g===Kr.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=NG(u,r,!0),c===u},"verify")});var l=Xn.rsa.decrypt(i,r,!0,!1);return o.verify(n,l,r.n.bitLength())},r};Xn.setRsaPrivateKey=Xn.rsa.setPrivateKey=function(t,e,r,n,i,o,a,l){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Xn.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:NG};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return Kr.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:lRt},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Xn.rsa.encrypt(m,c,p)},c};Xn.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Xn.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};Xn.privateKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,nRt,e,r)&&(t=qe.fromDer(Kr.util.createBuffer(e.privateKey))),e={},r=[],!qe.validate(t,iRt,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,l,c,u,d,p;return i=Kr.util.createBuffer(e.privateKeyModulus).toHex(),o=Kr.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=Kr.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Kr.util.createBuffer(e.privateKeyPrime1).toHex(),c=Kr.util.createBuffer(e.privateKeyPrime2).toHex(),u=Kr.util.createBuffer(e.privateKeyExponent1).toHex(),d=Kr.util.createBuffer(e.privateKeyExponent2).toHex(),p=Kr.util.createBuffer(e.privateKeyCoefficient).toHex(),Xn.setRsaPrivateKey(new to(i,16),new to(o,16),new to(a,16),new to(l,16),new to(c,16),new to(u,16),new to(d,16),new to(p,16))};Xn.privateKeyToAsn1=Xn.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.qInv))])};Xn.publicKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,sRt,e,r)){var n=qe.derToOid(e.publicKeyOid);if(n!==Xn.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!qe.validate(t,oRt,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=Kr.util.createBuffer(e.publicKeyModulus).toHex(),a=Kr.util.createBuffer(e.publicKeyExponent).toHex();return Xn.setRsaPublicKey(new to(o,16),new to(a,16))};Xn.publicKeyToAsn1=Xn.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Xn.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[Xn.publicKeyToRSAPublicKey(t)])])};Xn.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Kg(t.e))])};function O7e(t,e,r){var n=Kr.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var c=0;c<a;++c)n.putByte(l)}else for(;a>0;){for(var u=0,d=Kr.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:n.putByte(l);a=u}return n.putByte(0),n.putBytes(t),n}s(O7e,"_encodePkcs1_v1_5");function NG(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=Kr.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(NG,"_decodePkcs1_v1_5");function cRt(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return r(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){Kr.prime.generateProbablePrime(l,n,c)}s(o,"getPrime");function a(l,c){if(l)return r(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(to.ONE).gcd(t.e).compareTo(to.ONE)!==0){t.p=null,i();return}if(t.q.subtract(to.ONE).gcd(t.e).compareTo(to.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(to.ONE),t.q1=t.q.subtract(to.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(to.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Xn.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Xn.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(cRt,"_generateKeyPair");function Kg(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Kr.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(Kg,"_bnToBytes");function uRt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(uRt,"_getMillerRabinTests");function N7e(t){return Kr.util.isNodejs&&typeof pce[t]=="function"}s(N7e,"_detectNodeCrypto");function L7e(t){return typeof fp.globalScope<"u"&&typeof fp.globalScope.crypto=="object"&&typeof fp.globalScope.crypto.subtle=="object"&&typeof fp.globalScope.crypto.subtle[t]=="function"}s(L7e,"_detectSubtleCrypto");function F7e(t){return typeof fp.globalScope<"u"&&typeof fp.globalScope.msCrypto=="object"&&typeof fp.globalScope.msCrypto.subtle=="object"&&typeof fp.globalScope.msCrypto.subtle[t]=="function"}s(F7e,"_detectSubtleMsCrypto");function M7e(t){for(var e=Kr.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(M7e,"_intToUint8Array")});var mce=G((eXr,j7e)=>{f();var ur=ui();Wv();zm();PD();Gg();Gv();RG();q2();up();oce();LD();uo();typeof q7e>"u"&&(q7e=ur.jsbn.BigInteger);var q7e,at=ur.asn1,oi=ur.pki=ur.pki||{};j7e.exports=oi.pbe=ur.pbe=ur.pbe||{};var H2=oi.oids,dRt={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},fRt={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pRt={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};oi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=ur.random.getBytesSync(r.saltSize),i=r.count,o=at.integerToDer(i),a,l,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,d,p;switch(r.algorithm){case"aes128":a=16,u=16,d=H2["aes128-CBC"],p=ur.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=H2["aes192-CBC"],p=ur.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=H2["aes256-CBC"],p=ur.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=H2.desCBC,p=ur.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=H7e(h),y=ur.pkcs5.pbkdf2(e,n,i,a,g),v=ur.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=mRt(n,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(H2.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(H2.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){a=24;var _=new ur.util.ByteBuffer(n),y=oi.pbe.generatePkcs12Key(e,_,1,i,a),v=oi.pbe.generatePkcs12Key(e,_,2,i,a),b=ur.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(H2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,n),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};oi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!at.validate(t,dRt,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(n.encryptionOid),l=oi.pbe.getCipher(a,n.encryptionParams,e),c=ur.util.createBuffer(n.encryptedData);return l.update(c),l.finish()&&(r=at.fromDer(l.output)),r};oi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return ur.pem.encode(r,{maxline:e})};oi.encryptedPrivateKeyFromPem=function(t){var e=ur.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};oi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=oi.wrapRsaPrivateKey(oi.privateKeyToAsn1(t));return n=oi.encryptPrivateKeyInfo(n,e,r),oi.encryptedPrivateKeyToPem(n)}var i,o,a,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=ur.random.getBytesSync(8),l=ur.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=ur.random.getBytesSync(8),l=ur.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=ur.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(oi.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:ur.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return ur.pem.encode(p)};oi.decryptRsaPrivateKey=function(t,e){var r=null,n=ur.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=ur.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=ur.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=ur.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=ur.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=ur.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return ur.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return ur.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return ur.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=ur.util.hexToBytes(n.dekInfo.parameters),c=ur.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(ur.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=oi.decryptPrivateKeyInfo(at.fromDer(r),e):r=at.fromDer(r),r!==null&&(r=oi.privateKeyFromAsn1(r)),r};oi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in ur.md))throw new Error('"sha1" hash algorithm unavailable.');o=ur.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new ur.util.ByteBuffer,p=new ur.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new ur.util.ByteBuffer;g.fillWithByte(r,u);var y=u*Math.ceil(h/u),v=new ur.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new ur.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),B=1;B<=k;B++){var N=new ur.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var W=0;W<n;W++)o.start(),o.update(N.getBytes()),N=o.digest();var ee=new ur.util.ByteBuffer;for(l=0;l<u;l++)ee.putByte(N.at(l%c));var me=Math.ceil(h/u)+Math.ceil(m/u),ae=new ur.util.ByteBuffer;for(a=0;a<me;a++){var H=new ur.util.ByteBuffer(_.getBytes(u)),U=511;for(l=ee.length()-1;l>=0;l--)U=U>>8,U+=ee.at(l)+H.at(l),H.setAt(l,U&255);ae.putBuffer(H)}_=ae,d.putBuffer(N)}return d.truncate(d.length()-i),d};oi.pbe.getCipher=function(t,e,r){switch(t){case oi.oids.pkcs5PBES2:return oi.pbe.getCipherForPBES2(t,e,r);case oi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case oi.oids["pbewithSHAAnd40BitRC2-CBC"]:return oi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};oi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!at.validate(e,fRt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(n.kdfOid),t!==oi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(n.encOid),t!==oi.oids["aes128-CBC"]&&t!==oi.oids["aes192-CBC"]&&t!==oi.oids["aes256-CBC"]&&t!==oi.oids["des-EDE3-CBC"]&&t!==oi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,l=ur.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(oi.oids[t]){case"aes128-CBC":c=16,u=ur.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=ur.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=ur.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=ur.des.createDecryptionCipher;break;case"desCBC":c=8,u=ur.des.createDecryptionCipher;break}var d=G7e(n.prfOid),p=ur.pkcs5.pbkdf2(r,a,l,c,d),m=n.encIv,h=u(p);return h.start(m),h};oi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!at.validate(e,pRt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=ur.util.createBuffer(n.salt),l=ur.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case oi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=ur.des.startDecrypting;break;case oi.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=ur.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=G7e(n.prfOid),m=oi.pbe.generatePkcs12Key(r,a,1,l,c,p);p.start();var h=oi.pbe.generatePkcs12Key(r,a,2,l,u,p);return d(m,h)};oi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in ur.md))throw new Error('"md5" hash algorithm unavailable.');n=ur.md.md5.create()}e===null&&(e="");for(var i=[W7e(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(W7e(n,i[a-1]+t+e));return i.join("").substr(0,r)};function W7e(t,e){return t.start().update(e).digest().getBytes()}s(W7e,"hash");function G7e(t){var e;if(!t)e="hmacWithSHA1";else if(e=oi.oids[at.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return H7e(e)}s(G7e,"prfOidToMessageDigest");function H7e(t){var e=ur.md;switch(t){case"hmacWithSHA224":e=ur.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(H7e,"prfAlgorithmToMessageDigest");function mRt(t,e,r,n){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,ur.util.hexToBytes(r.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(oi.oids[n]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(mRt,"createPbkdf2Params")});var hce=G((nXr,z7e)=>{f();var q4=ui();zm();uo();var or=q4.asn1,W4=z7e.exports=q4.pkcs7asn1=q4.pkcs7asn1||{};q4.pkcs7=q4.pkcs7||{};q4.pkcs7.asn1=W4;var V7e={name:"ContentInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};W4.contentInfoValidator=V7e;var $7e={name:"EncryptedContentInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};W4.envelopedDataValidator={name:"EnvelopedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat($7e)};W4.encryptedDataValidator={name:"EncryptedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"}].concat($7e)};var hRt={name:"SignerInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:or.Class.UNIVERSAL,type:or.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:or.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};W4.signedDataValidator={name:"SignedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},V7e,{name:"SignedData.Certificates",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:or.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,capture:"signerInfos",optional:!0,value:[hRt]}]};W4.recipientInfoValidator={name:"RecipientInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:or.Class.UNIVERSAL,type:or.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var gce=G((oXr,Y7e)=>{f();var j2=ui();uo();j2.mgf=j2.mgf||{};var gRt=Y7e.exports=j2.mgf.mgf1=j2.mgf1=j2.mgf1||{};gRt.create=function(t){var e={generate:s(function(r,n){for(var i=new j2.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var l=new j2.util.ByteBuffer;l.putInt32(a),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var J7e=G((lXr,K7e)=>{f();var LG=ui();gce();K7e.exports=LG.mgf=LG.mgf||{};LG.mgf.mgf1=LG.mgf1});var FG=G((uXr,X7e)=>{f();var V2=ui();up();uo();var ARt=X7e.exports=V2.pss=V2.pss||{};ARt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=V2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||V2.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new V2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new V2.util.ByteBuffer;b.fillWithByte(0,m-o-n-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-n-1,k=r.generate(v,_),B="";for(d=0;d<_;d++)B+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~N)+B.substr(1),B+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,y=u.substr(0,g),v=u.substr(g,n),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=r.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-n-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=_.substr(-o),N=new V2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(B),e.start(),e.update(N.getBytes());var W=e.digest().getBytes();return v===W},l}});var OG=G((fXr,nLe)=>{f();var Jr=ui();Wv();zm();PD();Gg();J7e();Gv();q2();FG();LD();uo();var j=Jr.asn1,Wt=nLe.exports=Jr.pki=Jr.pki||{},ro=Wt.oids,da={};da.CN=ro.commonName;da.commonName="CN";da.C=ro.countryName;da.countryName="C";da.L=ro.localityName;da.localityName="L";da.ST=ro.stateOrProvinceName;da.stateOrProvinceName="ST";da.O=ro.organizationName;da.organizationName="O";da.OU=ro.organizationalUnitName;da.organizationalUnitName="OU";da.E=ro.emailAddress;da.emailAddress="E";var eLe=Jr.pki.rsa.publicKeyValidator,yRt={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},eLe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},CRt={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},xRt={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},eLe,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},vRt={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[xRt,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var l=0;l<n.value.length;++l)o={},i=n.value[l],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in ro&&(o.name=ro[o.type],o.name in da&&(o.shortName=da[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Wt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=j.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in ro&&(l.name=ro[l.type],l.name in da&&(l.shortName=da[l.name])),l.type===ro.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function Vv(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(Vv,"_getAttribute");var MG=s(function(t,e,r){var n={};if(t!==ro["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:ro.sha1},mgf:{algorithmOid:ro.mgf1,hash:{algorithmOid:ro.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,CRt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=j.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),QG=s(function(t){switch(ro[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Jr.md.sha1.create();case"md5WithRSAEncryption":return Jr.md.md5.create();case"sha256WithRSAEncryption":return Jr.md.sha256.create();case"sha384WithRSAEncryption":return Jr.md.sha384.create();case"sha512WithRSAEncryption":return Jr.md.sha512.create();case"RSASSA-PSS":return Jr.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),tLe=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case ro.sha1WithRSAEncryption:case ro.sha1WithRSASignature:break;case ro["RSASSA-PSS"]:var n,i;if(n=ro[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||Jr.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=ro[e.signatureParameters.mgf.algorithmOid],i===void 0||Jr.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=Jr.mgf[i].create(Jr.md[n].create()),n=ro[e.signatureParameters.hash.algorithmOid],n===void 0||Jr.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=Jr.pss.create(Jr.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Wt.certificateFromPem=function(t,e,r){var n=Jr.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:j.toDer(Wt.certificateToAsn1(t)).getBytes()};return Jr.pem.encode(r,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=Jr.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=j.fromDer(e.body);return Wt.publicKeyFromAsn1(n)};Wt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:j.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return Jr.pem.encode(r,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return Jr.pem.encode(r,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Jr.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,r){var n=Jr.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:j.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return Jr.pem.encode(r,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Vv(t.issuer,e)},t.issuer.addField=function(e){pp([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Vv(t.subject,e)},t.subject.addField=function(e){pp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){pp(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){pp(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)rLe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||Jr.md.sha1.create();var n=ro[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Wt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=QG({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=j.toDer(l);a.update(c.getBytes())}return a!==null&&(r=tLe({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,l=0;r&&l<n.attributes.length;++l)o=n.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=ro.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Jr.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,yRt,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Jr.util.createBuffer(r.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=Jr.asn1.derToOid(r.certSignatureOid),a.signatureParameters=MG(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=Jr.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=MG(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(j.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(j.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=r.tbsCertificate,e){a.md=QG({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=Jr.md.sha1.create(),p=j.toDer(r.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return Vv(a.issuer,g)},a.issuer.addField=function(g){pp([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=Jr.md.sha1.create(),h=j.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return Vv(a.subject,g)},a.subject.addField=function(g){pp([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(n.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in ro){if(e.name=ro[e.id],e.name==="keyUsage"){var r=j.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=j.fromDer(e.value);r.value.length>0&&r.value[0].type===j.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===j.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=j.fromDer(e.value),a=0;a<r.value.length;++a){var l=j.derToOid(r.value[a].value);l in ro?e[ro[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=j.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=j.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=Jr.util.bytesToIP(c.value);break;case 8:d.oid=j.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=j.fromDer(e.value);e.subjectKeyIdentifier=Jr.util.bytesToHex(r.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,vRt,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=Jr.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=MG(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=Jr.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=MG(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=QG({signatureOid:a.signatureOid,type:"certification request"});var l=j.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=Jr.md.sha1.create();return a.subject.getField=function(u){return Vv(a.subject,u)},a.subject.addField=function(u){pp([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return Vv(a,u)},a.addAttribute=function(u){pp([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Vv(t.subject,e)},t.subject.addField=function(e){pp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Vv(t,e)},t.addAttribute=function(e){pp([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){pp(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){pp(e),t.attributes=e},t.sign=function(e,r){t.md=r||Jr.md.sha1.create();var n=ro[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=QG({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=j.toDer(n);r.update(i.getBytes())}return r!==null&&(e=tLe({certificate:t,md:r,signature:t.signature})),e},t};function G4(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,l=j.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===j.Type.UTF8&&(a=Jr.util.encodeUtf8(a))),n=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(r.type).getBytes()),j.create(j.Class.UNIVERSAL,l,!1,a)])]),e.value.push(n)}return e}s(G4,"_dnToAsn1");function pp(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in da&&(e.name=Wt.oids[da[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in da&&(e.shortName=da[e.name]),e.type===ro.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(rLe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(pp,"_fillMissingFields");function rLe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in ro?l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(ro[c]).getBytes())):c.indexOf(".")!==-1&&l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=Jr.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[G4(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=Jr.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),v=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=Jr.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));v.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(rLe,"_fillMissingExtensionFields");function Ace(t,e){switch(t){case ro["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,r);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(Ace,"_signatureParametersToAsn1");function bRt(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=Jr.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(bRt,"_CRIAttributesToAsn1");var ERt=new Date("1950-01-01T00:00:00Z"),IRt=new Date("2050-01-01T00:00:00Z");function Z7e(t){return t>=ERt&&t<IRt?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(Z7e,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=Z7e(t.validity.notBefore),r=Z7e(t.validity.notAfter),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,Jr.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),Ace(t.siginfo.algorithmOid,t.siginfo.parameters)]),G4(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,r]),G4(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),n};Wt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),G4(t.subject),Wt.publicKeyToAsn1(t.publicKey),bRt(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return G4(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),Ace(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Wt.certificateExtensionToAsn1(t[n]));return e};Wt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=j.toDer(r).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,r)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),Ace(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=r(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=Jr.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];Jr.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=Jr.pki.certificateFromPem(a));var l=r(a.subject);if(!l)return!1;Jr.util.isArray(l)||(l=[l]);for(var c=j.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=j.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!Jr.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=Jr.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var c=r(a.subject);if(!Jr.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=j.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=j.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var l=Jr.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(G4(a),l),a.hash=l.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;Jr.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=r.verify?r.verify(_,l,n):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!Jr.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var Cce=G((hXr,oLe)=>{f();var ns=ui();zm();F4();Gv();hce();mce();up();LD();U4();uo();OG();var Ie=ns.asn1,wi=ns.pki,MD=oLe.exports=ns.pkcs12=ns.pkcs12||{},iLe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},TRt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},iLe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},wRt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},_Rt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},SRt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function FD(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}s(FD,"_getBagsByAttribute");MD.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Ie.validate(t,TRt,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=ns.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=FD(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=FD(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=FD(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return FD(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return FD(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Ie.derToOid(n.contentType)!==wi.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(n.contentType),o}var l=n.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=yce(l),n.mac){var c=null,u=0,d=Ie.derToOid(n.macAlgorithm);switch(d){case wi.oids.sha1:c=ns.md.sha1.create(),u=20;break;case wi.oids.sha256:c=ns.md.sha256.create(),u=32;break;case wi.oids.sha384:c=ns.md.sha384.create(),u=48;break;case wi.oids.sha512:c=ns.md.sha512.create(),u=64;break;case wi.oids.md5:c=ns.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new ns.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(ns.util.bytesToHex(n.macIterations),16):1,h=MD.generateKey(r,p,3,m,u,c),g=ns.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return RRt(a,l.value,e,r),a};function yce(t){if(t.composed||t.constructed){for(var e=ns.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(yce,"_decodePkcs7Data");function RRt(t,e,r,n){if(e=Ie.fromDer(e,r),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,iLe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case wi.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=yce(p).value;break;case wi.oids.encryptedData:d=kRt(p,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=BRt(d,r,n),t.safeContents.push(u)}}s(RRt,"_decodeAuthenticatedSafe");function kRt(t,e){var r={},n=[];if(!Ie.validate(t,ns.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Ie.derToOid(r.contentType);if(o!==wi.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(r.encAlgorithm);var a=wi.pbe.getCipher(o,r.encParameter,e),l=yce(r.encryptedContentAsn1),c=ns.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(kRt,"_decryptSafeContents");function BRt(t,e,r){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,wRt,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:PRt(a.bagAttributes)};n.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case wi.oids.pkcs8ShroudedKeyBag:if(m=wi.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case wi.oids.keyBag:try{u.key=wi.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case wi.oids.certBag:d=SRt,p=s(function(){if(Ie.derToOid(a.certId)!==wi.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=wi.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return n}s(BRt,"_decodeSafeContents");function PRt(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Ie.validate(t[r],_Rt,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(n.oid);if(wi.oids[a]!==void 0){e[wi.oids[a]]=[];for(var l=0;l<n.values.length;++l)e[wi.oids[a]].push(n.values[l].value)}}return e}s(PRt,"_decodeBagAttributes");MD.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=ns.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=ns.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=wi.certificateFromPem(a));var l=ns.md.sha1.create();l.update(Ie.toDer(wi.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=ns.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(ns.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=wi.certificateFromPem(e));var h=m===0?o:void 0,g=wi.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=wi.wrapRsaPrivateKey(wi.privateKeyToAsn1(t));r===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[wi.encryptPrivateKeyInfo(_,r,n)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),B=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(B)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),W;if(n.useMac){var l=ns.md.sha1.create(),ee=new ns.util.ByteBuffer(ns.random.getBytes(n.saltSize)),me=n.count,t=MD.generateKey(r,ee,3,me,20),ae=ns.hmac.create();ae.start(l,t),ae.update(Ie.toDer(N).getBytes());var H=ae.getMac();W=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,H.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,ee.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(me).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(wi.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),W])};MD.generateKey=ns.pbe.generatePkcs12Key});var vce=G((yXr,sLe)=>{f();var $v=ui();zm();Gv();mce();q2();RG();Cce();FG();LD();uo();OG();var xce=$v.asn1,H4=sLe.exports=$v.pki=$v.pki||{};H4.pemToDer=function(t){var e=$v.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return $v.util.createBuffer(e.body)};H4.privateKeyFromPem=function(t){var e=$v.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=xce.fromDer(e.body);return H4.privateKeyFromAsn1(n)};H4.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:xce.toDer(H4.privateKeyToAsn1(t)).getBytes()};return $v.pem.encode(r,{maxline:e})};H4.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:xce.toDer(t).getBytes()};return $v.pem.encode(r,{maxline:e})}});var _ce=G((xXr,mLe)=>{f();var xt=ui();zm();F4();TG();q2();vce();up();U4();uo();var GG=s(function(t,e,r,n){var i=xt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=xt.util.createBuffer(),d=xt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);d.start("MD5",l);var h=xt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),h.putBuffer(d.digest());d.start("SHA1",c);var y=xt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),y.putBuffer(d.digest());return i.putBytes(xt.util.xorBytes(h.getBytes(),y.getBytes(),n)),i},"prf_TLS1"),DRt=s(function(t,e,r){var n=xt.hmac.create();n.start("SHA1",t);var i=xt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),NRt=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=xt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),LRt=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=xt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),F0=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return xt.util.createBuffer(t.getBytes(r))},"readVector"),mp=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var r in z.CipherSuites){var n=z.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};z.handleUnexpected=function(t,e){var r=!t.open&&t.entity===z.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===z.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:xt.util.createBuffer(o.getBytes(32)),session_id:F0(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=F0(o,2),n.compression_methods=F0(o,1)),a=r-(a-o.length()),a>0){for(var l=F0(o,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:F0(l,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=F0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(F0(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(n.cipher_suite);else for(var m=xt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:xt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return n};z.createSecurityParameters=function(t,e){var r=t.entity===z.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,r){var n=z.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=cLe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=MRt,t.session.resuming=!1,z.createSecurityParameters(t,n)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,r){var n=z.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=xt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=n.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=Tce,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?HRt:Ice,t.session.resuming=!1,z.createSecurityParameters(t,n)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:F0(n,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=F0(i.certificate_list,3),a=xt.asn1.fromDer(o),o=xt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?aLe:Ice:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?aLe:Ice)),t.process()};z.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=QRt,t.process()};z.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:F0(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=xt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=xt.random.getBytes(48)}t.expect=Tce,t.session.clientCertificate!==null&&(t.expect=jRt),t.process()};z.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:F0(n,1),certificate_authorities:F0(n,2)};t.session.certificateRequest=i,t.expect=ORt,t.process()};z.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:F0(n,2).getBytes()},a=xt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=Tce,t.process()};z.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!xt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=WRt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=cLe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=t.entity===z.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?URt:VRt,t.process()};z.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=xt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=GG;if(n=d(c.master_secret,l,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?qRt:$Rt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:n}),t.process()};z.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=xt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in WG[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:xt.md.md5.create(),sha1:xt.md.sha1.create()}),n!==z.HandshakeType.hello_request&&n!==z.HandshakeType.certificate_verify&&n!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),WG[t.entity][t.expect][n](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(n===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,xt.util.createBuffer(o))}t.process()};var FRt=0,MRt=1,aLe=2,QRt=3,ORt=4,cLe=5,URt=6,qRt=7,WRt=8,GRt=0,HRt=1,Ice=2,jRt=3,Tce=4,VRt=5,$Rt=6,$=z.handleUnexpected,uLe=z.handleChangeCipherSpec,Cc=z.handleAlert,qu=z.handleHandshake,dLe=z.handleApplicationData,xc=z.handleHeartbeat,wce=[];wce[z.ConnectionEnd.client]=[[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[uLe,Cc,$,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,dLe,xc],[$,Cc,qu,$,xc]];wce[z.ConnectionEnd.server]=[[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[uLe,Cc,$,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,dLe,xc],[$,Cc,qu,$,xc]];var zv=z.handleHelloRequest,zRt=z.handleServerHello,fLe=z.handleCertificate,lLe=z.handleServerKeyExchange,bce=z.handleCertificateRequest,UG=z.handleServerHelloDone,pLe=z.handleFinished,WG=[];WG[z.ConnectionEnd.client]=[[$,$,zRt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,fLe,lLe,bce,UG,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,$,lLe,bce,UG,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,$,$,bce,UG,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,$,$,$,UG,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,pLe],[zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var YRt=z.handleClientHello,KRt=z.handleClientKeyExchange,JRt=z.handleCertificateVerify;WG[z.ConnectionEnd.server]=[[$,YRt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,fLe,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,KRt,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,JRt,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,pLe],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];z.generateKeys=function(t,e){var r=GG,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:n.read.compressFunction=LRt,n.write.compressFunction=NRt;break;default:throw new Error("Unsupported compression algorithm.")}}return n};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=xt.util.createBuffer();return r.putInt32(e),r.putBytes(xt.random.getBytes(28)),r};z.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};z.createAlert=function(t,e){var r=xt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:r})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=xt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=xt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=xt.util.createBuffer();if(t.virtualHost){var c=xt.util.createBuffer();c.putByte(0),c.putByte(0);var u=xt.util.createBuffer();u.putByte(0),mp(u,2,xt.util.createBuffer(t.virtualHost));var d=xt.util.createBuffer();mp(d,2,u),mp(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=xt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),mp(g,1,xt.util.createBuffer(m)),mp(g,2,e),mp(g,1,o),p>0&&mp(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=xt.util.createBuffer();return n.putByte(z.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),mp(n,1,xt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=xt.util.createBuffer();if(r!==null)try{xt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var l=xt.pem.decode(r[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=xt.util.createBuffer(l.body);o===null&&(o=xt.asn1.fromDer(u.bytes(),!1));var d=xt.util.createBuffer();mp(d,3,u),i.putBuffer(d)}r=xt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=xt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),mp(m,3,i),m};z.createClientKeyExchange=function(t){var e=xt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(xt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=xt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,r=xt.util.createBuffer();return e>0&&(r.putByte(z.HandshakeType.server_key_exchange),r.putInt24(e)),r};z.getClientSignature=function(t,e){var r=xt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=xt.pki.privateKeyFromPem(a)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};z.createCertificateVerify=function(t,e){var r=e.length+2,n=xt.util.createBuffer();return n.putByte(z.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};z.createCertificateRequest=function(t){var e=xt.util.createBuffer();e.putByte(1);var r=xt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=xt.pki.distinguishedNameToAsn1(i.subject),a=xt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var l=1+e.length()+2+r.length(),c=xt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),mp(c,1,e),mp(c,2,r),c};z.createServerHelloDone=function(t){var e=xt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=xt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=xt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===z.ConnectionEnd.client,n=t.session.sp,i=12,o=GG,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var l=xt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=xt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(xt.random.getBytes(o)),n};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=z.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)n.push(z.createRecord(t,{type:e.type,data:xt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&n.push(z.createRecord(t,{type:e.type,data:xt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Ece=s(function(t){switch(t){case!0:return!0;case xt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case xt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case xt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case xt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case xt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case xt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),XRt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return xt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return xt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return xt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return xt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return xt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return xt.pki.certificateError.unknown_ca;default:return xt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,l){var c=Ece(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!xt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=XRt(u))}return u},xt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||xt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:Ece(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:Ece(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=xt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var l in r.order)if(r.order[l]===a){r.order.splice(l,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=xt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};z.createConnection=function(t){var e=null;t.caStore?xt.util.isArray(t.caStore)?e=xt.pki.createCaStore(t.caStore):e=t.caStore:e=xt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in z.CipherSuites)r.push(z.CipherSuites[n])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:xt.util.createBuffer(),tlsData:xt.util.createBuffer(),data:xt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?FRt:GRt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=wce[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:xt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:xt.md.md5.create(),sha1:xt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:xt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof xt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};mLe.exports=xt.tls=xt.tls||{};for(qG in z)typeof z[qG]!="function"&&(xt.tls[qG]=z[qG]);var qG;xt.tls.prf_tls1=GG;xt.tls.hmac_sha1=DRt;xt.tls.createSessionCache=z.createSessionCache;xt.tls.createConnection=z.createConnection});var ALe=G((EXr,gLe)=>{f();var Yv=ui();Wv();_ce();var hp=gLe.exports=Yv.tls;hp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=hp.BulkCipherAlgorithm.aes,t.cipher_type=hp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=hp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:hLe};hp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=hp.BulkCipherAlgorithm.aes,t.cipher_type=hp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=hp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:hLe};function hLe(t,e,r){var n=e.entity===Yv.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:Yv.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:Yv.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=r3t,t.write.cipherFunction=ZRt,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=hp.hmac_sha1}s(hLe,"initConnectionState");function ZRt(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===hp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=Yv.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=hp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(e3t)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(ZRt,"encrypt_aes_cbc_sha1");function e3t(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(e3t,"encrypt_aes_cbc_sha1_padding");function t3t(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(t3t,"decrypt_aes_cbc_sha1_padding");function r3t(t,e){var r=!1,n;t.version.minor===hp.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(t3t);var o=e.macLength,a=Yv.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=Yv.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=n3t(e.macKey,a,c)&&r,r}s(r3t,"decrypt_aes_cbc_sha1");function n3t(t,e,r){var n=Yv.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(n3t,"compareMacs")});var kce=G((wXr,vLe)=>{f();var bs=ui();Gg();uo();var QD=vLe.exports=bs.sha512=bs.sha512||{};bs.md.sha512=bs.md.algorithms.sha512=QD;var CLe=bs.sha384=bs.sha512.sha384=bs.sha512.sha384||{};CLe.create=function(){return QD.create("SHA-384")};bs.md.sha384=bs.md.algorithms.sha384=CLe;bs.sha512.sha256=bs.sha512.sha256||{create:s(function(){return QD.create("SHA-512/256")},"create")};bs.md["sha512/256"]=bs.md.algorithms["sha512/256"]=bs.sha512.sha256;bs.sha512.sha224=bs.sha512.sha224||{create:s(function(){return QD.create("SHA-512/224")},"create")};bs.md["sha512/224"]=bs.md.algorithms["sha512/224"]=bs.sha512.sha224;QD.create=function(t){if(xLe||i3t(),typeof t>"u"&&(t="SHA-512"),!(t in $2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=$2[t],r=null,n=bs.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);n=bs.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=bs.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),yLe(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var c=bs.util.createBuffer();c.putBytes(n.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(Sce.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);yLe(y,i,c);var v=bs.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var Sce=null,xLe=!1,Rce=null,$2=null;function i3t(){Sce="\x80",Sce+=bs.util.fillString("\0",128),Rce=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],$2={},$2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],$2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],$2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],$2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],xLe=!0}s(i3t,"_init");function yLe(t,e,r){for(var n,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,B,N,W,ee,me,ae,H,U,le,ie,V,O,Y,te,pe,re,ue,he=r.length();he>=128;){for(V=0;V<16;++V)e[V][0]=r.getInt32()>>>0,e[V][1]=r.getInt32()>>>0;for(;V<80;++V)te=e[V-2],O=te[0],Y=te[1],n=((O>>>19|Y<<13)^(Y>>>29|O<<3)^O>>>6)>>>0,i=((O<<13|Y>>>19)^(Y<<3|O>>>29)^(O<<26|Y>>>6))>>>0,re=e[V-15],O=re[0],Y=re[1],o=((O>>>1|Y<<31)^(O>>>8|Y<<24)^O>>>7)>>>0,a=((O<<31|Y>>>1)^(O<<24|Y>>>8)^(O<<25|Y>>>7))>>>0,pe=e[V-7],ue=e[V-16],Y=i+pe[1]+a+ue[1],e[V][0]=n+pe[0]+o+ue[0]+(Y/4294967296>>>0)>>>0,e[V][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],B=t[3][0],N=t[3][1],W=t[4][0],ee=t[4][1],me=t[5][0],ae=t[5][1],H=t[6][0],U=t[6][1],le=t[7][0],ie=t[7][1],V=0;V<80;++V)u=((W>>>14|ee<<18)^(W>>>18|ee<<14)^(ee>>>9|W<<23))>>>0,d=((W<<18|ee>>>14)^(W<<14|ee>>>18)^(ee<<23|W>>>9))>>>0,p=(H^W&(me^H))>>>0,m=(U^ee&(ae^U))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=ie+d+m+Rce[V][1]+e[V][1],n=le+u+p+Rce[V][0]+e[V][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,le=H,ie=U,H=me,U=ae,me=W,ae=ee,Y=N+i,W=B+n+(Y/4294967296>>>0)>>>0,ee=Y>>>0,B=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=n+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+B+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+ee,t[4][0]=t[4][0]+W+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+ae,t[5][0]=t[5][0]+me+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+U,t[6][0]=t[6][0]+H+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+ie,t[7][0]=t[7][0]+le+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,he-=128}}s(yLe,"_update")});var bLe=G(Bce=>{f();var o3t=ui();zm();var zl=o3t.asn1;Bce.privateKeyValidator={name:"PrivateKeyInfo",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:zl.Class.UNIVERSAL,type:zl.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:zl.Class.UNIVERSAL,type:zl.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:zl.Class.UNIVERSAL,type:zl.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Bce.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:zl.Class.UNIVERSAL,type:zl.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:zl.Class.UNIVERSAL,type:zl.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var LLe=G((BXr,NLe)=>{f();var vc=ui();ND();up();kce();uo();var SLe=bLe(),s3t=SLe.publicKeyValidator,a3t=SLe.privateKeyValidator;typeof ELe>"u"&&(ELe=vc.jsbn.BigInteger);var ELe,Nce=vc.util.ByteBuffer,kd=typeof Buffer>"u"?Uint8Array:Buffer;vc.pki=vc.pki||{};NLe.exports=vc.pki.ed25519=vc.ed25519=vc.ed25519||{};var _i=vc.ed25519;_i.constants={};_i.constants.PUBLIC_KEY_BYTE_LENGTH=32;_i.constants.PRIVATE_KEY_BYTE_LENGTH=64;_i.constants.SEED_BYTE_LENGTH=32;_i.constants.SIGN_BYTE_LENGTH=64;_i.constants.HASH_BYTE_LENGTH=64;_i.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=vc.random.getBytesSync(_i.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==_i.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+_i.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=cy({message:e,encoding:"binary"});for(var r=new kd(_i.constants.PUBLIC_KEY_BYTE_LENGTH),n=new kd(_i.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return d3t(r,n),{publicKey:r,privateKey:n}};_i.privateKeyFromAsn1=function(t){var e={},r=[],n=vc.asn1.validate(t,a3t,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=vc.asn1.derToOid(e.privateKeyOid),a=vc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=cy({message:vc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};_i.publicKeyFromAsn1=function(t){var e={},r=[],n=vc.asn1.validate(t,s3t,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=vc.asn1.derToOid(e.publicKeyOid),a=vc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==_i.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return cy({message:l,encoding:"binary"})};_i.publicKeyFromPrivateKey=function(t){t=t||{};var e=cy({message:t.privateKey,encoding:"binary"});if(e.length!==_i.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+_i.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new kd(_i.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};_i.sign=function(t){t=t||{};var e=cy(t),r=cy({message:t.privateKey,encoding:"binary"});if(r.length===_i.constants.SEED_BYTE_LENGTH){var n=_i.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==_i.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+_i.constants.SEED_BYTE_LENGTH+" or "+_i.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new kd(_i.constants.SIGN_BYTE_LENGTH+e.length);f3t(i,e,e.length,r);for(var o=new kd(_i.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};_i.verify=function(t){t=t||{};var e=cy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=cy({message:t.signature,encoding:"binary"});if(r.length!==_i.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+_i.constants.SIGN_BYTE_LENGTH);var n=cy({message:t.publicKey,encoding:"binary"});if(n.length!==_i.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+_i.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new kd(_i.constants.SIGN_BYTE_LENGTH+e.length),o=new kd(_i.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<_i.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+_i.constants.SIGN_BYTE_LENGTH]=e[a];return p3t(o,i,i.length,n)>=0};function cy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof kd)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new Nce(e,r)}else if(!(e instanceof Nce))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new kd(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(cy,"messageToNativeBuffer");var Lce=xn(),HG=xn([1]),l3t=xn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c3t=xn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ILe=xn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),TLe=xn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Pce=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),u3t=xn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function OD(t,e){var r=vc.md.sha512.create(),n=new Nce(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new kd(_i.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(OD,"sha512");function d3t(t,e){var r=[xn(),xn(),xn(),xn()],n,i=OD(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Oce(r,i),Qce(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(d3t,"crypto_sign_keypair");function f3t(t,e,r,n){var i,o,a=new Float64Array(64),l=[xn(),xn(),xn(),xn()],c=OD(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=OD(t.subarray(32),r+32);for(Fce(d),Oce(l,d),Qce(t,l),i=32;i<64;++i)t[i]=n[i];var p=OD(t,r+64);for(Fce(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return RLe(t.subarray(32),a),u}s(f3t,"crypto_sign");function p3t(t,e,r,n){var i,o,a=new kd(32),l=[xn(),xn(),xn(),xn()],c=[xn(),xn(),xn(),xn()];if(o=-1,r<64||m3t(c,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=OD(t,r);if(Fce(u),PLe(l,c,u),Oce(c,e.subarray(32)),Mce(l,c),Qce(a,l),r-=64,kLe(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(p3t,"crypto_sign_open");function RLe(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*Pce[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Pce[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Pce[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(RLe,"modL");function Fce(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;RLe(t,e)}s(Fce,"reduce");function Mce(t,e){var r=xn(),n=xn(),i=xn(),o=xn(),a=xn(),l=xn(),c=xn(),u=xn(),d=xn();V4(r,t[1],t[0]),V4(d,e[1],e[0]),Vo(r,r,d),j4(n,t[0],t[1]),j4(d,e[0],e[1]),Vo(n,n,d),Vo(i,t[3],e[3]),Vo(i,i,c3t),Vo(o,t[2],e[2]),j4(o,o,o),V4(a,n,r),V4(l,o,i),j4(c,o,i),j4(u,n,r),Vo(t[0],a,l),Vo(t[1],u,c),Vo(t[2],c,l),Vo(t[3],a,u)}s(Mce,"add");function wLe(t,e,r){for(var n=0;n<4;++n)DLe(t[n],e[n],r)}s(wLe,"cswap");function Qce(t,e){var r=xn(),n=xn(),i=xn();y3t(i,e[2]),Vo(r,e[0],i),Vo(n,e[1],i),jG(t,n),t[31]^=BLe(r)<<7}s(Qce,"pack");function jG(t,e){var r,n,i,o=xn(),a=xn();for(r=0;r<16;++r)a[r]=e[r];for(Dce(a),Dce(a),Dce(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,DLe(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(jG,"pack25519");function m3t(t,e){var r=xn(),n=xn(),i=xn(),o=xn(),a=xn(),l=xn(),c=xn();return Kv(t[2],HG),h3t(t[1],e),z2(i,t[1]),Vo(o,i,l3t),V4(i,i,t[2]),j4(o,t[2],o),z2(a,o),z2(l,a),Vo(c,l,a),Vo(r,c,i),Vo(r,r,o),g3t(r,r),Vo(r,r,i),Vo(r,r,o),Vo(r,r,o),Vo(t[0],r,o),z2(n,t[0]),Vo(n,n,o),_Le(n,i)&&Vo(t[0],t[0],u3t),z2(n,t[0]),Vo(n,n,o),_Le(n,i)?-1:(BLe(t[0])===e[31]>>7&&V4(t[0],Lce,t[0]),Vo(t[3],t[0],t[1]),0)}s(m3t,"unpackneg");function h3t(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(h3t,"unpack25519");function g3t(t,e){var r=xn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)z2(r,r),n!==1&&Vo(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(g3t,"pow2523");function _Le(t,e){var r=new kd(32),n=new kd(32);return jG(r,t),jG(n,e),kLe(r,0,n,0)}s(_Le,"neq25519");function kLe(t,e,r,n){return A3t(t,e,r,n,32)}s(kLe,"crypto_verify_32");function A3t(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(A3t,"vn");function BLe(t){var e=new kd(32);return jG(e,t),e[0]&1}s(BLe,"par25519");function PLe(t,e,r){var n,i;for(Kv(t[0],Lce),Kv(t[1],HG),Kv(t[2],HG),Kv(t[3],Lce),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,wLe(t,e,n),Mce(e,t),Mce(t,t),wLe(t,e,n)}s(PLe,"scalarmult");function Oce(t,e){var r=[xn(),xn(),xn(),xn()];Kv(r[0],ILe),Kv(r[1],TLe),Kv(r[2],HG),Vo(r[3],ILe,TLe),PLe(t,r,e)}s(Oce,"scalarbase");function Kv(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(Kv,"set25519");function y3t(t,e){var r=xn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)z2(r,r),n!==2&&n!==4&&Vo(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(y3t,"inv25519");function Dce(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(Dce,"car25519");function DLe(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(DLe,"sel25519");function xn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(xn,"gf");function j4(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(j4,"A");function V4(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(V4,"Z");function z2(t,e){Vo(t,e,e)}s(z2,"S");function Vo(t,e,r){var n,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,B=0,N=0,W=0,ee=0,me=0,ae=0,H=0,U=0,le=0,ie=0,V=0,O=0,Y=0,te=0,pe=0,re=r[0],ue=r[1],he=r[2],Ne=r[3],Se=r[4],Je=r[5],Me=r[6],ft=r[7],It=r[8],yt=r[9],vt=r[10],ce=r[11],Oe=r[12],ye=r[13],tt=r[14],X=r[15];n=e[0],o+=n*re,a+=n*ue,l+=n*he,c+=n*Ne,u+=n*Se,d+=n*Je,p+=n*Me,m+=n*ft,h+=n*It,g+=n*yt,y+=n*vt,v+=n*ce,b+=n*Oe,E+=n*ye,_+=n*tt,k+=n*X,n=e[1],a+=n*re,l+=n*ue,c+=n*he,u+=n*Ne,d+=n*Se,p+=n*Je,m+=n*Me,h+=n*ft,g+=n*It,y+=n*yt,v+=n*vt,b+=n*ce,E+=n*Oe,_+=n*ye,k+=n*tt,B+=n*X,n=e[2],l+=n*re,c+=n*ue,u+=n*he,d+=n*Ne,p+=n*Se,m+=n*Je,h+=n*Me,g+=n*ft,y+=n*It,v+=n*yt,b+=n*vt,E+=n*ce,_+=n*Oe,k+=n*ye,B+=n*tt,N+=n*X,n=e[3],c+=n*re,u+=n*ue,d+=n*he,p+=n*Ne,m+=n*Se,h+=n*Je,g+=n*Me,y+=n*ft,v+=n*It,b+=n*yt,E+=n*vt,_+=n*ce,k+=n*Oe,B+=n*ye,N+=n*tt,W+=n*X,n=e[4],u+=n*re,d+=n*ue,p+=n*he,m+=n*Ne,h+=n*Se,g+=n*Je,y+=n*Me,v+=n*ft,b+=n*It,E+=n*yt,_+=n*vt,k+=n*ce,B+=n*Oe,N+=n*ye,W+=n*tt,ee+=n*X,n=e[5],d+=n*re,p+=n*ue,m+=n*he,h+=n*Ne,g+=n*Se,y+=n*Je,v+=n*Me,b+=n*ft,E+=n*It,_+=n*yt,k+=n*vt,B+=n*ce,N+=n*Oe,W+=n*ye,ee+=n*tt,me+=n*X,n=e[6],p+=n*re,m+=n*ue,h+=n*he,g+=n*Ne,y+=n*Se,v+=n*Je,b+=n*Me,E+=n*ft,_+=n*It,k+=n*yt,B+=n*vt,N+=n*ce,W+=n*Oe,ee+=n*ye,me+=n*tt,ae+=n*X,n=e[7],m+=n*re,h+=n*ue,g+=n*he,y+=n*Ne,v+=n*Se,b+=n*Je,E+=n*Me,_+=n*ft,k+=n*It,B+=n*yt,N+=n*vt,W+=n*ce,ee+=n*Oe,me+=n*ye,ae+=n*tt,H+=n*X,n=e[8],h+=n*re,g+=n*ue,y+=n*he,v+=n*Ne,b+=n*Se,E+=n*Je,_+=n*Me,k+=n*ft,B+=n*It,N+=n*yt,W+=n*vt,ee+=n*ce,me+=n*Oe,ae+=n*ye,H+=n*tt,U+=n*X,n=e[9],g+=n*re,y+=n*ue,v+=n*he,b+=n*Ne,E+=n*Se,_+=n*Je,k+=n*Me,B+=n*ft,N+=n*It,W+=n*yt,ee+=n*vt,me+=n*ce,ae+=n*Oe,H+=n*ye,U+=n*tt,le+=n*X,n=e[10],y+=n*re,v+=n*ue,b+=n*he,E+=n*Ne,_+=n*Se,k+=n*Je,B+=n*Me,N+=n*ft,W+=n*It,ee+=n*yt,me+=n*vt,ae+=n*ce,H+=n*Oe,U+=n*ye,le+=n*tt,ie+=n*X,n=e[11],v+=n*re,b+=n*ue,E+=n*he,_+=n*Ne,k+=n*Se,B+=n*Je,N+=n*Me,W+=n*ft,ee+=n*It,me+=n*yt,ae+=n*vt,H+=n*ce,U+=n*Oe,le+=n*ye,ie+=n*tt,V+=n*X,n=e[12],b+=n*re,E+=n*ue,_+=n*he,k+=n*Ne,B+=n*Se,N+=n*Je,W+=n*Me,ee+=n*ft,me+=n*It,ae+=n*yt,H+=n*vt,U+=n*ce,le+=n*Oe,ie+=n*ye,V+=n*tt,O+=n*X,n=e[13],E+=n*re,_+=n*ue,k+=n*he,B+=n*Ne,N+=n*Se,W+=n*Je,ee+=n*Me,me+=n*ft,ae+=n*It,H+=n*yt,U+=n*vt,le+=n*ce,ie+=n*Oe,V+=n*ye,O+=n*tt,Y+=n*X,n=e[14],_+=n*re,k+=n*ue,B+=n*he,N+=n*Ne,W+=n*Se,ee+=n*Je,me+=n*Me,ae+=n*ft,H+=n*It,U+=n*yt,le+=n*vt,ie+=n*ce,V+=n*Oe,O+=n*ye,Y+=n*tt,te+=n*X,n=e[15],k+=n*re,B+=n*ue,N+=n*he,W+=n*Ne,ee+=n*Se,me+=n*Je,ae+=n*Me,H+=n*ft,U+=n*It,le+=n*yt,ie+=n*vt,V+=n*ce,O+=n*Oe,Y+=n*ye,te+=n*tt,pe+=n*X,o+=38*B,a+=38*N,l+=38*W,c+=38*ee,u+=38*me,d+=38*ae,p+=38*H,m+=38*U,h+=38*le,g+=38*ie,y+=38*V,v+=38*O,b+=38*Y,E+=38*te,_+=38*pe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s(Vo,"M")});var OLe=G((NXr,QLe)=>{f();var M0=ui();uo();up();ND();QLe.exports=M0.kem=M0.kem||{};var FLe=M0.jsbn.BigInteger;M0.kem.rsa={};M0.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||M0.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new FLe(M0.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(l.compareTo(FLe.ONE)<=0);l=M0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=M0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},n.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},n};M0.kem.kdf1=function(t,e){MLe(this,t,0,e||t.digestLength)};M0.kem.kdf2=function(t,e){MLe(this,t,1,e||t.digestLength)};function MLe(t,e,r,n){t.generate=function(i,o){for(var a=new M0.util.ByteBuffer,l=Math.ceil(o/n)+r,c=new M0.util.ByteBuffer,u=r;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(MLe,"_createKDF")});var GLe=G((MXr,WLe)=>{f();var Qi=ui();uo();WLe.exports=Qi.log=Qi.log||{};Qi.log.levels=["none","error","warning","info","debug","verbose","max"];var VG={},Wce=[],qD=null;Qi.log.LEVEL_LOCKED=2;Qi.log.NO_LEVEL_CHECK=4;Qi.log.INTERPOLATE=8;for(Jg=0;Jg<Qi.log.levels.length;++Jg)Uce=Qi.log.levels[Jg],VG[Uce]={index:Jg,name:Uce.toUpperCase()};var Uce,Jg;Qi.log.logMessage=function(t){for(var e=VG[t.level].index,r=0;r<Wce.length;++r){var n=Wce[r];if(n.flags&Qi.log.NO_LEVEL_CHECK)n.f(t);else{var i=VG[n.level].index;e<=i&&n.f(n,t)}}};Qi.log.prepareStandard=function(t){"standard"in t||(t.standard=VG[t.level].name+" ["+t.category+"] "+t.message)};Qi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Qi.util.format.apply(this,e)}};Qi.log.prepareStandardFull=function(t){"standardFull"in t||(Qi.log.prepareStandard(t),t.standardFull=t.standard)};for(qce=["error","warning","info","debug","verbose"],Jg=0;Jg<qce.length;++Jg)(function(e){Qi.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};Qi.log.logMessage(o)}})(qce[Jg]);var qce,Jg;Qi.log.makeLogger=function(t){var e={flags:0,f:t};return Qi.log.setLevel(e,"none"),e};Qi.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Qi.log.LEVEL_LOCKED))for(var n=0;n<Qi.log.levels.length;++n){var i=Qi.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};Qi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Qi.log.LEVEL_LOCKED:t.flags&=~Qi.log.LEVEL_LOCKED};Qi.log.addLogger=function(t){Wce.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(ULe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},WD=s(function(t,e){Qi.log.prepareStandard(e);var r=ULe[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),$4=Qi.log.makeLogger(WD)):(WD=s(function(e,r){Qi.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),$4=Qi.log.makeLogger(WD)),Qi.log.setLevel($4,"debug"),Qi.log.addLogger($4),qD=$4):console={log:s(function(){},"log")};var $4,ULe,WD;qD!==null&&typeof window<"u"&&window.location&&(UD=new URL(window.location.href).searchParams,UD.has("console.level")&&Qi.log.setLevel(qD,UD.get("console.level").slice(-1)[0]),UD.has("console.lock")&&(qLe=UD.get("console.lock").slice(-1)[0],qLe=="true"&&Qi.log.lock(qD)));var UD,qLe;Qi.log.consoleLogger=qD});var jLe=G((UXr,HLe)=>{f();HLe.exports=Gg();TG();U4();tce();kce()});var zLe=G((WXr,$Le)=>{f();var Kt=ui();Wv();zm();PD();Gv();q2();hce();up();uo();OG();var Re=Kt.asn1,Wu=$Le.exports=Kt.pkcs7=Kt.pkcs7||{};Wu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Re.fromDer(e.body);return Wu.messageFromAsn1(n)};Wu.messageToPem=function(t,e){var r={type:"PKCS7",body:Re.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(r,{maxline:e})};Wu.messageFromAsn1=function(t){var e={},r=[];if(!Re.validate(t,Wu.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Re.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Wu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Wu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Wu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Wu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(Hce(t,n,Wu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,t.signerInfos)),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=n.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=Kt.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(a).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Re.derToOid(t.contentInfo.value[0].value),a=Re.toDer(i);a.getByte(),Re.getBerValueLength(a),a=a.getBytes();for(var l in n)n[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(Gce(h)),d.authenticatedAttributesAsn1.value.push(Gce(h))}a=Re.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=I3t(t.signers)}s(r,"addSignerInfos")};Wu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Hce(t,e,Wu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),VLe(t)},"decrypt")},t};Wu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=Hce(t,e,Wu.asn1.envelopedDataValidator);t.recipients=v3t(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,b3t(t.recipients)),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,T3t(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,l=0;l<r.length;++l)if(o[l].type!==r[l].type||o[l].value!==r[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}VLe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Kt.pki.oids["aes128-CBC"]:n=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:n=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:n=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function C3t(t){var e={},r=[];if(!Re.validate(t,Wu.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Re.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(C3t,"_recipientFromAsn1");function x3t(t){return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.encryptedContent.algorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")]),Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(x3t,"_recipientToAsn1");function v3t(t){for(var e=[],r=0;r<t.length;++r)e.push(C3t(t[r]));return e}s(v3t,"_recipientsFromAsn1");function b3t(t){for(var e=[],r=0;r<t.length;++r)e.push(x3t(t[r]));return e}s(b3t,"_recipientsToAsn1");function E3t(t){var e=Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.digestAlgorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.signatureAlgorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")])),e.value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Re.create(Re.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Gce(i))}e.value.push(r)}return e}s(E3t,"_signerToAsn1");function I3t(t){for(var e=[],r=0;r<t.length;++r)e.push(E3t(t[r]));return e}s(I3t,"_signersToAsn1");function Gce(t){var e;if(t.type===Kt.pki.oids.contentType)e=Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Re.utcTimeToDate(i):i=Re.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=Re.create(Re.Class.UNIVERSAL,Re.Type.UTCTIME,!1,Re.dateToUtcTime(i)):e=Re.create(Re.Class.UNIVERSAL,Re.Type.GENERALIZEDTIME,!1,Re.dateToGeneralizedTime(i))}return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,[e])])}s(Gce,"_attributeToAsn1");function T3t(t){return[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(Kt.pki.oids.data).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.algorithm).getBytes()),t.parameter?Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(T3t,"_encryptedContentToAsn1");function Hce(t,e,r){var n={},i=[];if(!Re.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Re.derToOid(n.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Kt.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==Re.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[c].value}else l=n.encryptedContent;t.encryptedContent={algorithm:Re.derToOid(n.encAlgorithm),parameter:Kt.util.createBuffer(n.encParameter.value),content:Kt.util.createBuffer(l)}}if(n.content){var l="";if(Kt.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==Re.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[c].value}else l=n.content;t.content=Kt.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(Hce,"_fromAsn1");function VLe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(VLe,"_decryptContent")});var KLe=G((jXr,YLe)=>{f();var tl=ui();Wv();F4();TG();U4();uo();var zG=YLe.exports=tl.ssh=tl.ssh||{};zG.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=tl.util.createBuffer();z4(a,n),Xg(a,t.e),Xg(a,t.n);var l=tl.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=tl.util.createBuffer();Xg(u,t.d),Xg(u,t.p),Xg(u,t.q),Xg(u,t.qInv);var d;if(!e)d=tl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=$G(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=tl.util.createBuffer();h.putBuffer($G("\0\0\0\0",e)),h.putBuffer($G("\0\0\0",e));var g=tl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(tl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=tl.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=$G("putty-private-key-file-mac-key",e),b=tl.util.createBuffer();z4(b,n),z4(b,i),z4(b,r),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=tl.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};zG.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=tl.util.createBuffer();return z4(n,r),Xg(n,t.e),Xg(n,t.n),r+" "+tl.util.encode64(n.bytes())+" "+e};zG.privateKeyToOpenSSH=function(t,e){return e?tl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):tl.pki.privateKeyToPem(t)};zG.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||tl.md.md5.create(),n="ssh-rsa",i=tl.util.createBuffer();z4(i,n),Xg(i,t.e),Xg(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function Xg(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=tl.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(Xg,"_addBigIntegerToBuffer");function z4(t,e){t.putInt32(e.length),t.putString(e)}s(z4,"_addStringToBuffer");function $G(){for(var t=tl.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s($G,"_sha1")});var XLe=G((zXr,JLe)=>{f();JLe.exports=ui();Wv();ALe();zm();yG();PD();LLe();F4();OLe();GLe();jLe();gce();RG();q2();uce();Cce();zLe();vce();fce();rce();FG();up();oce();KLe();_ce();uo()});var tFe=G(Y2=>{"use strict";f();Object.defineProperty(Y2,"__esModule",{value:!0});Y2.convert=Y2.Format=void 0;var GD=XLe(),Jv;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(Jv=Y2.Format||(Y2.Format={}));function ZLe(t){var e=GD.pki.pemToDer(t),r=GD.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(ZLe,"myASN");function w3t(t){var e=ZLe(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(w3t,"txtFormat");function eFe(t,e){switch(e){case Jv.der:return GD.pki.pemToDer(t);case Jv.pem:return t;case Jv.txt:return w3t(t);case Jv.asn1:return ZLe(t);case Jv.fingerprint:var r=GD.md.sha1.create(),n=eFe(t,Jv.der);return r.update(n.getBytes()),r.digest().toHex();case Jv.x509:return GD.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(eFe,"convert");Y2.convert=eFe});var aFe=G(Bd=>{"use strict";f();var Xv=Bd&&Bd.__assign||function(){return Xv=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xv.apply(this,arguments)},YG=Bd&&Bd.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.convert=Bd.Format=Bd.addToGlobalAgent=Bd.get=void 0;var jce=require("https"),_3t=require("tls"),rFe=require("child_process"),nFe=FNe(),uy=tFe();Object.defineProperty(Bd,"Format",{enumerable:!0,get:s(function(){return uy.Format},"get")});Object.defineProperty(Bd,"convert",{enumerable:!0,get:s(function(){return uy.convert},"get")});var iFe=process.platform==="darwin",oFe=jce.globalAgent,JG={keychain:"all",unique:!0,excludeBundled:!0,format:uy.Format.pem};function sFe(t){if(t===void 0&&(t=JG),!iFe)return[];t=Xv(Xv({},JG),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,rFe.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=YG(YG([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,rFe.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=YG(YG([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var l=n.map(function(u){return(0,uy.convert)(u,uy.Format.fingerprint)}),c=t.excludeBundled?_3t.rootCertificates.map(function(u){return(0,uy.convert)(u,uy.Format.fingerprint)}):[];n=n.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return n.map(function(u){return(0,uy.convert)(u,t.format)})}s(sFe,"get");Bd.get=sFe;var KG=oFe.options.ca,S3t=s(function(t){if(t===void 0&&(t=JG),!!iFe){var e;Array.isArray(KG)?e=Array.from(KG):e=typeof KG<"u"?[KG]:[],sFe(Xv(Xv(Xv({},JG),t),{format:uy.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),oFe.options.ca=e,jce.Agent=function(r){return function(n){var i=typeof n<"u"?Xv({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(jce.Agent),(0,nFe.setGlobalDispatcher)(new nFe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Bd.addToGlobalAgent=S3t});var lFe=G((rZr,Vce)=>{f();function R3t(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(R3t,"all");process.platform!=="win32"?Vce.exports.all=()=>[]:Vce.exports.all=R3t});var gFe=G((cZr,hFe)=>{"use strict";f();function mFe(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(mFe,"validateParameter");function B3t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(B3t,"hasOwnProperty");function P3t(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=r[a];B3t(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),mFe(c,e,o)?n.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,n)});t.apply(this,n)}}s(P3t,"defineOperation");hFe.exports={defineOperation:P3t,validateParameter:mFe}});var tue=G((fZr,CFe)=>{"use strict";f();var J4=Ere()("kerberos"),K4=J4.KerberosClient,AFe=J4.KerberosServer,Zv=gFe().defineOperation,D3t=1,N3t=2,L3t=4,F3t=8,M3t=16,Q3t=32,O3t=64,U3t=128,q3t=256,yFe=0,W3t=9,G3t=6;K4.prototype.step=Zv(K4.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);K4.prototype.wrap=Zv(K4.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);K4.prototype.unwrap=Zv(K4.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);AFe.prototype.step=Zv(AFe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var H3t=Zv(J4.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),j3t=Zv(J4.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),V3t=Zv(J4.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:yFe}},{name:"callback",type:"function",required:!1}]),$3t=Zv(J4.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);CFe.exports={initializeClient:V3t,initializeServer:$3t,principalDetails:j3t,checkPassword:H3t,GSS_C_DELEG_FLAG:D3t,GSS_C_MUTUAL_FLAG:N3t,GSS_C_REPLAY_FLAG:L3t,GSS_C_SEQUENCE_FLAG:F3t,GSS_C_CONF_FLAG:M3t,GSS_C_INTEG_FLAG:Q3t,GSS_C_ANON_FLAG:O3t,GSS_C_PROT_READY_FLAG:U3t,GSS_C_TRANS_FLAG:q3t,GSS_C_NO_OID:yFe,GSS_MECH_OID_KRB5:W3t,GSS_MECH_OID_SPNEGO:G3t}});var xFe=G((mZr,z3t)=>{z3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var bFe=G((hZr,vFe)=>{"use strict";f();var Y3t=require("dns"),K3t=tue(),rue=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=J3t(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,l,c){if(!a)return c();Y3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let l={};r!=null&&Object.assign(l,{user:e,password:r});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;K3t.initializeClient(c,l,(u,d)=>{if(u)return n(u,null);i.client=d,n(null,d)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function J3t(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=X3t(t),r(null,i)})}}s(J3t,"firstTransition");function X3t(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=Z3t(t),r(null,i||"")})}}s(X3t,"secondTransition");function Z3t(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=ekt(t),r(null,a)})})}}s(Z3t,"thirdTransition");function ekt(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(ekt,"fourthTransition");vFe.exports={MongoAuthProcess:rue}});var IFe=G((yZr,HD)=>{"use strict";f();var EFe=tue();HD.exports=EFe;HD.exports.Kerberos=EFe;HD.exports.version=xFe().version;HD.exports.processes={MongoAuthProcess:bFe().MongoAuthProcess}});var JFe=G(yue=>{"use strict";f();Object.defineProperty(yue,"__esModule",{value:!0});yue.assertNever=Qkt;function Qkt(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(Qkt,"assertNever")});var e9=G(gy=>{"use strict";f();Object.defineProperty(gy,"__esModule",{value:!0});gy.ChatCompletionContentPartOpaque=gy.ChatCompletionContentPartKind=gy.ChatRole=void 0;var Okt=JFe(),yH;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(yH||(gy.ChatRole=yH={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Okt.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(yH||(gy.ChatRole=yH={}));var XFe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(XFe||(gy.ChatCompletionContentPartKind=XFe={}));var ZFe;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(ZFe||(gy.ChatCompletionContentPartOpaque=ZFe={}))});var Cue=G(sA=>{"use strict";f();Object.defineProperty(sA,"__esModule",{value:!0});sA.BaseTokensPerName=sA.BaseTokensPerMessage=sA.BaseTokensPerCompletion=sA.ChatRole=void 0;var eMe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(eMe||(sA.ChatRole=eMe={}));sA.BaseTokensPerCompletion=3;sA.BaseTokensPerMessage=3;sA.BaseTokensPerName=1});var rMe=G(xH=>{"use strict";f();Object.defineProperty(xH,"__esModule",{value:!0});xH.toOpenAiChatMessage=tMe;xH.toOpenAIChatMessages=Wkt;var Ay=e9(),CH=Cue(),Ukt=ob();function xue(t){return t.filter(e=>e.type===Ay.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(xue,"onlyStringContent");function qkt(t){let e=t.map(r=>{if(r.type===Ay.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===Ay.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===Ay.ChatCompletionContentPartKind.Opaque&&Ay.ChatCompletionContentPartOpaque.usableIn(r,Ukt.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(qkt,"stringAndImageContent");function tMe(t){switch(t.role){case Ay.ChatRole.System:return{role:CH.ChatRole.System,content:xue(t.content),name:t.name};case Ay.ChatRole.User:return{role:CH.ChatRole.User,content:qkt(t.content),name:t.name};case Ay.ChatRole.Assistant:return{role:CH.ChatRole.Assistant,content:xue(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case Ay.ChatRole.Tool:return{role:CH.ChatRole.Tool,content:xue(t.content),tool_call_id:t.toolCallId};default:return}}s(tMe,"toOpenAiChatMessage");function Wkt(t){return t.map(tMe).filter(e=>!!e)}s(Wkt,"toOpenAIChatMessages")});var iMe=G(EH=>{"use strict";f();Object.defineProperty(EH,"__esModule",{value:!0});EH.toVsCodeChatMessage=nMe;EH.toVsCodeChatMessages=Gkt;var bH=e9();function vH(t){return t.filter(e=>e.type===bH.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(vH,"onlyStringContent");var sb;function nMe(t){switch(sb??=require("vscode"),t.role){case bH.ChatRole.Assistant:let e=sb.LanguageModelChatMessage.Assistant(vH(t.content),t.name);return t.toolCalls&&(e.content=[new sb.LanguageModelTextPart(vH(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new sb.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case bH.ChatRole.User:return sb.LanguageModelChatMessage.User(vH(t.content),t.name);case bH.ChatRole.Tool:{let r=sb.LanguageModelChatMessage.User("");return r.content=[new sb.LanguageModelToolResultPart(t.toolCallId,[new sb.LanguageModelTextPart(vH(t.content))])],r}default:return}}s(nMe,"toVsCodeChatMessage");function Gkt(t){return t.map(nMe).filter(e=>!!e)}s(Gkt,"toVsCodeChatMessages")});var ob=G(Xm=>{"use strict";f();Object.defineProperty(Xm,"__esModule",{value:!0});Xm.OutputMode=Xm.Raw=Xm.OpenAI=void 0;Xm.toMode=vue;Xm.toVSCode=Hkt;Xm.toOpenAI=jkt;var oMe=rMe(),sMe=iMe();Xm.OpenAI=Cue();Xm.Raw=e9();var X2;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(X2||(Xm.OutputMode=X2={}));function vue(t,e){switch(t){case X2.Raw:return e;case X2.VSCode:return e instanceof Array?(0,sMe.toVsCodeChatMessages)(e):(0,sMe.toVsCodeChatMessage)(e);case X2.OpenAI:return e instanceof Array?(0,oMe.toOpenAIChatMessages)(e):(0,oMe.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(vue,"toMode");function Hkt(t){return vue(X2.VSCode,t)}s(Hkt,"toVSCode");function jkt(t){return vue(X2.OpenAI,t)}s(jkt,"toOpenAI")});var bue=G(t9=>{"use strict";f();Object.defineProperty(t9,"__esModule",{value:!0});t9.jsonRetainedProps=void 0;t9.forEachNode=aMe;t9.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function aMe(t,e){if(e(t),t.type===1)for(let r of t.children)aMe(r,e)}s(aMe,"forEachNode")});var lMe=G(Eue=>{"use strict";f();Object.defineProperty(Eue,"__esModule",{value:!0});Eue.once=Vkt;function Vkt(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(Vkt,"once")});var _ue=G(nu=>{"use strict";f();Object.defineProperty(nu,"__esModule",{value:!0});nu.BudgetExceededError=nu.MaterializedChatMessageImage=nu.MaterializedChatMessageBreakpoint=nu.MaterializedChatMessageOpaque=nu.MaterializedChatMessage=nu.MaterializedChatMessageTextChunk=nu.GenericMaterializedContainer=void 0;var oR=lMe(),W0=ob(),yy=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,l){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=lb(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return AMe(e,this.children,r)}allMetadata(){return gMe(this)}findById(e){return wue(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)$kt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof eh&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof eh||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return Tue(this,e),e}};nu.GenericMaterializedContainer=yy;var r9=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,oR.once)(async e=>await e.tokenLength({type:W0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};nu.MaterializedChatMessageTextChunk=r9;var eh=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,l,c,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=AMe(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return Tue(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return wue(e,this)}_tokenCount=(0,oR.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,W0.toMode)(e.mode,r))});_upperBound=(0,oR.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,oR.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===W0.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===W0.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,W0.toMode)(e.mode,r))});_text=(0,oR.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of mMe(this)){if(r instanceof Z2||r instanceof ab){e.push(r);continue}if(r instanceof Zm){e.at(-1)instanceof Zm?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:W0.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof Z2)return{type:W0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:yMe(r.src),detail:r.detail}};if(r instanceof ab)return r.value;if(r instanceof Zm)return r.part;throw new Error("Unexpected element type")});if(this.role===W0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===W0.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===W0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===W0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};nu.MaterializedChatMessage=eh;var ab=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&W0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};nu.MaterializedChatMessageOpaque=ab;var Zm=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};nu.MaterializedChatMessageBreakpoint=Zm;var Z2=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,l){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,oR.once)(async e=>e.tokenLength({type:W0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:yMe(this.src),detail:this.detail}}));isEmpty=!1};nu.MaterializedChatMessageImage=Z2;function lb(t){return t instanceof yy||t instanceof eh}s(lb,"isContainerType");function pMe(t){return t instanceof r9||t instanceof Z2||t instanceof ab||t instanceof Zm}s(pMe,"isContentType");function $kt(t){if(!lb(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s($kt,"assertContainerOrChatMessage");function*mMe(t,e=!1){for(let r of t.children)r instanceof r9?(yield{content:r,isTextSibling:e},e=!0):r instanceof Z2||r instanceof ab||r instanceof Zm?yield{content:r,isTextSibling:!1}:r instanceof ab?yield{content:r,isTextSibling:!0}:(r&&(yield*mMe(r,e)),e=!1)}s(mMe,"contentChunks");function zkt(t,e){let r;function n(i,o){if(pMe(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");n9(r.node,e)}s(zkt,"removeLowestPriorityLegacy");var cMe=new WeakMap;function hMe(t){let e=cMe.get(t);if(e!==void 0)return e;let r=!1;return t instanceof Zm?r=!0:t instanceof eh?r=t.children.some(n=>n instanceof Zm):t instanceof yy&&(r=t.children.some(hMe)),cMe.set(t,r),r}s(hMe,"hasCachePoint");function Ykt(t){if(t instanceof eh)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof eh)return!1;return!0}s(Ykt,"shouldLookForCachePointInNode");function Tue(t,e){let r;if(t instanceof yy&&t.has(1)){zkt(t,e);return}let n=Ykt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(n&&hMe(c)&&(r=void 0,c instanceof Zm))){if(c instanceof yy&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!r||c.priority<r.value.priority)r={chain:a,index:l,value:c};else if(c.priority===r.value.priority){r.lowestNested??=uMe(r.value);let u=uMe(c);u<r.lowestNested&&(r={chain:a,index:l,value:c,lowestNested:u})}}}if(!r)throw new IH(t);pMe(r.value)||r.value instanceof yy&&r.value.has(2)||lb(r.value)&&!r.value.children.length?n9(r.value,e):Tue(r.value,e)}s(Tue,"removeLowestPriorityChild");var IH=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof eh?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};nu.BudgetExceededError=IH;function uMe(t){if(!lb(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(uMe,"getLowestPriorityAmongChildren");function*gMe(t){yield*t.metadata;for(let e of t.children)lb(e)?yield*gMe(e):yield*e.metadata}s(gMe,"allMetadata");function AMe(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(lb(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(AMe,"replaceNode");function*dMe(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,lb(r)&&e.push(...r.children)}}s(dMe,"forEachNode");function Kkt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(Kkt,"getRoot");function fMe(t){return t instanceof yy&&t.keepWithId!==void 0}s(fMe,"isKeepWith");var Iue=new Set;function Jkt(t,e){let r=new Set;for(let n of dMe(t))fMe(n)&&!Iue.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)Iue.add(n);try{let n=Kkt(t);for(let i of dMe(n))fMe(i)&&r.has(i.keepWithId)?n9(i,e):i instanceof eh&&i.toolCalls&&(i.toolCalls=Xkt(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&n9(i,e))}finally{for(let n of r)Iue.delete(n)}}s(Jkt,"removeOtherKeepWiths");function wue(t,e){if(e.id===t)return e;for(let r of e.children)if(lb(r)){let n=wue(t,r);if(n)return n}}s(wue,"findNodeById");function n9(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),Jkt(t,e),r.isEmpty?n9(r,e):r.onChunksChange())}s(n9,"removeNode");function yMe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(yMe,"getEncodedBase64");function Xkt(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(Xkt,"filterIfDifferent")});var xMe=G(()=>{"use strict";f();function Zkt(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(Zkt,"_vscpp");function CMe(){throw new Error("This should not be invoked!")}s(CMe,"_vscppf");CMe.isFragment=!0;globalThis.vscpp=Zkt;globalThis.vscppf=CMe});var Rue=G(TH=>{"use strict";f();Object.defineProperty(TH,"__esModule",{value:!0});TH.PromptElement=void 0;xMe();var Sue=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};TH.PromptElement=Sue});var Oue=G(Oi=>{"use strict";f();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.LogicalWrapper=Oi.IfEmpty=Oi.AbstractKeepWith=Oi.TokenLimit=Oi.Expandable=Oi.Chunk=Oi.LegacyPrioritization=Oi.ToolResult=Oi.PrioritizedList=Oi.Image=Oi.TextChunk=Oi.ToolMessage=Oi.AssistantMessage=Oi.UserMessage=Oi.SystemMessage=Oi.BaseChatMessage=void 0;Oi.isChatMessagePromptElement=eBt;Oi.useKeepWith=iBt;var o9=th(),yp=Rue();function eBt(t){return t instanceof wH||t instanceof _H||t instanceof SH}s(eBt,"isChatMessagePromptElement");var eT=class extends yp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.BaseChatMessage=eT;var wH=class extends eT{static{s(this,"SystemMessage")}constructor(e){e.role=o9.Raw.ChatRole.System,super(e)}};Oi.SystemMessage=wH;var _H=class extends eT{static{s(this,"UserMessage")}constructor(e){e.role=o9.Raw.ChatRole.User,super(e)}};Oi.UserMessage=_H;var SH=class extends eT{static{s(this,"AssistantMessage")}constructor(e){e.role=o9.Raw.ChatRole.Assistant,super(e)}};Oi.AssistantMessage=SH;var tBt=/\s+/g,kue=class extends eT{static{s(this,"ToolMessage")}constructor(e){e.role=o9.Raw.ChatRole.Tool,super(e)}};Oi.ToolMessage=kue;var RH=class extends yp.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?tBt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await rBt(e,i,o,n);return vscpp(vscppf,null,a,l)}render(e){return e}};Oi.TextChunk=RH;async function rBt(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let l=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:o9.Raw.ChatCompletionContentPartKind.Text,text:l},n)>t.tokenBudget)return i;i=l,o=a}return i}s(rBt,"getTextContentBelowBudget");var Bue=class extends yp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Image=Bue;var Pue=class extends yp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(RH,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Oi.PrioritizedList=Pue;var Due=class extends yp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Oi.ToolResult=Due;var Nue=class extends yp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LegacyPrioritization=Nue;var Lue=class extends yp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Chunk=Lue;var Fue=class extends yp.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};Oi.Expandable=Fue;var Mue=class extends yp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.TokenLimit=Mue;var kH=class extends yp.PromptElement{static{s(this,"AbstractKeepWith")}};Oi.AbstractKeepWith=kH;var nBt=0;function iBt(){let t=nBt++;return class extends kH{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(iBt,"useKeepWith");var Que=class extends yp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(i9,null,this.props.alt),vscpp(i9,{flexGrow:1},this.props.children))}};Oi.IfEmpty=Que;var i9=class extends yp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LogicalWrapper=i9});var bMe=G(s9=>{"use strict";f();Object.defineProperty(s9,"__esModule",{value:!0});s9.localize=oBt;s9.localize2=sBt;s9.getConfiguredDefaultLocale=aBt;function vMe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(vMe,"_format");function oBt(t,e,...r){return vMe(e,r)}s(oBt,"localize");function sBt(t,e,...r){let n=vMe(e,r);return{original:n,value:n}}s(sBt,"localize2");function aBt(t){}s(aBt,"getConfiguredDefaultLocale")});var Gue=G(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=cBt;Qt.isLittleEndian=uBt;Qt.isBigSurOrNewer=dBt;var EMe=bMe();Qt.LANGUAGE_DEFAULT="en";var c9=!1,u9=!1,l9=!1,_Me=!1,SMe=!1,que=!1,RMe=!1,Wue=!1,kMe=!1,BMe=!1,a9,BH=Qt.LANGUAGE_DEFAULT,Uue=Qt.LANGUAGE_DEFAULT,PMe,Cy,xy=globalThis,G0;typeof xy.vscode<"u"&&typeof xy.vscode.process<"u"?G0=xy.vscode.process:typeof process<"u"&&(G0=process);var DMe=typeof G0?.versions?.electron=="string",lBt=DMe&&G0?.type==="renderer";if(typeof G0=="object"){c9=G0.platform==="win32",u9=G0.platform==="darwin",l9=G0.platform==="linux",_Me=l9&&!!G0.env.SNAP&&!!G0.env.SNAP_REVISION,RMe=DMe,kMe=!!G0.env.CI||!!G0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,a9=Qt.LANGUAGE_DEFAULT,BH=Qt.LANGUAGE_DEFAULT;let t=G0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];a9=e.locale,Uue=e.osLocale,BH=r||Qt.LANGUAGE_DEFAULT,PMe=e._translationsConfigFile}catch{}SMe=!0}else typeof navigator=="object"&&!lBt?(Cy=navigator.userAgent,c9=Cy.indexOf("Windows")>=0,u9=Cy.indexOf("Macintosh")>=0,Wue=(Cy.indexOf("Macintosh")>=0||Cy.indexOf("iPad")>=0||Cy.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,l9=Cy.indexOf("Linux")>=0,BMe=Cy?.indexOf("Mobi")>=0,que=!0,a9=EMe.getConfiguredDefaultLocale(EMe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,BH=a9,Uue=navigator.language):console.error("Unable to resolve platform.");function cBt(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(cBt,"PlatformToString");var PH=0;u9?PH=1:c9?PH=3:l9&&(PH=2);Qt.isWindows=c9;Qt.isMacintosh=u9;Qt.isLinux=l9;Qt.isLinuxSnap=_Me;Qt.isNative=SMe;Qt.isElectron=RMe;Qt.isWeb=que;Qt.isWebWorker=que&&typeof xy.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?xy.origin:void 0;Qt.isIOS=Wue;Qt.isMobile=BMe;Qt.isCI=kMe;Qt.platform=PH;Qt.userAgent=Cy;Qt.language=BH;var IMe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function r(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Qt.language==="en"}s(n,"isDefault"),t.isDefault=n})(IMe||(Qt.Language=IMe={}));Qt.locale=a9;Qt.platformLocale=Uue;Qt.translationsConfigFile=PMe;Qt.setTimeout0IsFaster=typeof xy.postMessage=="function"&&!xy.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];xy.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),xy.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Qt.OS=u9||Wue?2:c9?1:3;var TMe=!0,wMe=!1;function uBt(){if(!wMe){wMe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,TMe=new Uint16Array(t.buffer)[0]===513}return TMe}s(uBt,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function dBt(t){return parseFloat(t)>=20}s(dBt,"isBigSurOrNewer")});var LMe=G(aA=>{"use strict";f();Object.defineProperty(aA,"__esModule",{value:!0});aA.arch=aA.platform=aA.env=aA.cwd=void 0;var NMe=Gue(),tT,Hue=globalThis.vscode;if(typeof Hue<"u"&&typeof Hue.process<"u"){let t=Hue.process;tT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?tT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:tT={get platform(){return NMe.isWindows?"win32":NMe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};aA.cwd=tT.cwd;aA.env=tT.env;aA.platform=tT.platform;aA.arch=tT.arch});var MMe=G(ar=>{"use strict";f();Object.defineProperty(ar,"__esModule",{value:!0});ar.delimiter=ar.sep=ar.toNamespacedPath=ar.parse=ar.format=ar.extname=ar.basename=ar.dirname=ar.relative=ar.resolve=ar.join=ar.isAbsolute=ar.normalize=ar.posix=ar.win32=void 0;var sR=LMe(),fBt=65,pBt=97,mBt=90,hBt=122,db=46,Yl=47,Pd=92,cb=58,gBt=63,DH=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function ABt(t,e){if(t===null||typeof t!="object")throw new DH(e,"Object",t)}s(ABt,"validateObject");function fa(t,e){if(typeof t!="string")throw new DH(e,"string",t)}s(fa,"validateString");var Dd=sR.platform==="win32";function si(t){return t===Yl||t===Pd}s(si,"isPathSeparator");function jue(t){return t===Yl}s(jue,"isPosixPathSeparator");function ub(t){return t>=fBt&&t<=mBt||t>=pBt&&t<=hBt}s(ub,"isWindowsDeviceRoot");function NH(t,e,r,n){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Yl}if(n(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==db||i.charCodeAt(i.length-2)!==db){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===db&&l!==-1?++l:l=-1}return i}s(NH,"normalizeString");function FMe(t,e){ABt(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(FMe,"_format");ar.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],fa(o,"path"),o.length===0)continue}else e.length===0?o=sR.cwd():(o=sR.env[`=${e}`]||sR.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Pd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)si(d)&&(l=1,u=!0);else if(si(d))if(u=!0,si(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!si(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&si(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!si(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else ub(d)&&o.charCodeAt(1)===cb&&(c=o.slice(0,2),l=2,a>2&&si(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(l)}\\${r}`,n=u,u&&e.length>0)break}return r=NH(r,!n,"\\",si),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){fa(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return jue(o)?"\\":t;if(si(o))if(i=!0,si(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!si(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!si(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(n=`\\\\${u}\\${t.slice(c,l)}`,r=l)}}}else r=1;else ub(o)&&t.charCodeAt(1)===cb&&(n=t.slice(0,2),r=2,e>2&&si(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?NH(t.slice(r),!i,"\\",si):"";return a.length===0&&!i&&(a="."),a.length>0&&si(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){fa(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return si(r)||e>2&&ub(r)&&t.charCodeAt(1)===cb&&si(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];fa(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&si(r.charCodeAt(0))){++i;let o=r.length;o>1&&si(r.charCodeAt(1))&&(++i,o>2&&(si(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&si(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ar.win32.normalize(e)},relative(t,e){if(fa(t,"from"),fa(e,"to"),t===e)return"";let r=ar.win32.resolve(t),n=ar.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Pd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Pd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Pd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Pd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Pd&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(l+m)===Pd)return n.slice(l+m+1);if(m===2)return n.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Pd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Pd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${n.slice(l,c)}`:(n.charCodeAt(l)===Pd&&++l,n.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ar.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Pd){if(e.charCodeAt(1)===Pd){let r=e.charCodeAt(2);if(r!==gBt&&r!==db)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ub(e.charCodeAt(0))&&e.charCodeAt(1)===cb&&e.charCodeAt(2)===Pd)return`\\\\?\\${e}`;return t},dirname(t){fa(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return si(i)?t:".";if(si(i)){if(r=n=1,si(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!si(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(r=n=l+1)}}}}else ub(i)&&t.charCodeAt(1)===cb&&(r=e>2&&si(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let l=e-1;l>=n;--l)if(si(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&fa(e,"ext"),fa(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&ub(t.charCodeAt(0))&&t.charCodeAt(1)===cb&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(si(c)){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(si(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){fa(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===cb&&ub(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(si(c)){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===db?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:FMe.bind(null,"\\"),parse(t){fa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return si(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(si(i)){if(n=1,si(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!si(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&si(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!si(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(ub(i)&&t.charCodeAt(1)===cb){if(r<=2)return e.root=e.dir=t,e;if(n=2,si(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,l=-1,c=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),si(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===db?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var yBt=(()=>{if(Dd){let t=/\\/g;return()=>{let e=sR.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>sR.cwd()})();ar.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:yBt();fa(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Yl)}return e=NH(e,!r,"/",jue),r?`/${e}`:e.length>0?e:"."},normalize(t){if(fa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Yl,r=t.charCodeAt(t.length-1)===Yl;return t=NH(t,!e,"/",jue),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return fa(t,"path"),t.length>0&&t.charCodeAt(0)===Yl},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];fa(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ar.posix.normalize(e)},relative(t,e){if(fa(t,"from"),fa(e,"to"),t===e||(t=ar.posix.resolve(t),e=ar.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Yl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Yl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(r+u)===Yl?c=u:u===0&&(c=0));let d="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Yl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(fa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Yl,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Yl){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&fa(e,"ext"),fa(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Yl){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Yl){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){fa(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Yl){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),l===db?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:FMe.bind(null,"/"),parse(t){fa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Yl,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){let d=t.charCodeAt(c);if(d===Yl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===db?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ar.posix.win32=ar.win32.win32=ar.win32;ar.posix.posix=ar.win32.posix=ar.posix;ar.normalize=Dd?ar.win32.normalize:ar.posix.normalize;ar.isAbsolute=Dd?ar.win32.isAbsolute:ar.posix.isAbsolute;ar.join=Dd?ar.win32.join:ar.posix.join;ar.resolve=Dd?ar.win32.resolve:ar.posix.resolve;ar.relative=Dd?ar.win32.relative:ar.posix.relative;ar.dirname=Dd?ar.win32.dirname:ar.posix.dirname;ar.basename=Dd?ar.win32.basename:ar.posix.basename;ar.extname=Dd?ar.win32.extname:ar.posix.extname;ar.format=Dd?ar.win32.format:ar.posix.format;ar.parse=Dd?ar.win32.parse:ar.posix.parse;ar.toNamespacedPath=Dd?ar.win32.toNamespacedPath:ar.posix.toNamespacedPath;ar.sep=Dd?ar.win32.sep:ar.posix.sep;ar.delimiter=Dd?ar.win32.delimiter:ar.posix.delimiter});var HMe=G(aR=>{"use strict";f();Object.defineProperty(aR,"__esModule",{value:!0});aR.URI=void 0;aR.isUriComponents=wBt;aR.uriToFsPath=QH;var QMe=MMe(),FH=Gue(),CBt=/^\w[\w\d+.-]*$/,xBt=/^\//,vBt=/^\/\//;function bBt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!CBt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!xBt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(vBt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(bBt,"_validateUri");function EBt(t,e){return!t&&!e?"file":t}s(EBt,"_schemeFix");function IBt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==rh&&(e=rh+e):e=rh;break}return e}s(IBt,"_referenceResolution");var $o="",rh="/",TBt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,MH=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||$o,this.authority=e.authority||$o,this.path=e.path||$o,this.query=e.query||$o,this.fragment=e.fragment||$o):(this.scheme=EBt(e,a),this.authority=r||$o,this.path=IBt(this.scheme,n||$o),this.query=i||$o,this.fragment=o||$o,bBt(this,a))}get fsPath(){return QH(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=$o),n===void 0?n=this.authority:n===null&&(n=$o),i===void 0?i=this.path:i===null&&(i=$o),o===void 0?o=this.query:o===null&&(o=$o),a===void 0?a=this.fragment:a===null&&(a=$o),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new fb(r,n,i,o,a)}static parse(e,r=!1){let n=TBt.exec(e);return n?new fb(n[2]||$o,LH(n[4]||$o),LH(n[5]||$o),LH(n[7]||$o),LH(n[9]||$o),r):new fb($o,$o,$o,$o,$o)}static file(e){let r=$o;if(FH.isWindows&&(e=e.replace(/\\/g,rh)),e[0]===rh&&e[1]===rh){let n=e.indexOf(rh,2);n===-1?(r=e.substring(2),e=rh):(r=e.substring(2,n),e=e.substring(n)||rh)}return new fb("file",r,e,$o,$o)}static from(e,r){return new fb(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return FH.isWindows&&e.scheme==="file"?n=t.file(QMe.win32.join(QH(e,!0),...r)).path:n=QMe.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return Vue(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new fb(e);return r._formatted=e.external??null,r._fsPath=e._sep===qMe?e.fsPath??null:null,r}}else return e}};aR.URI=MH;function wBt(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(wBt,"isUriComponents");var qMe=FH.isWindows?1:void 0,fb=class extends MH{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=QH(this,!1)),this._fsPath}toString(e=!1){return e?Vue(this,!0):(this._formatted||(this._formatted=Vue(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=qMe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},WMe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function OMe(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let l=WMe[a];l!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=l):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(OMe,"encodeURIComponentFast");function _Bt(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=WMe[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(_Bt,"encodeURIComponentMinimal");function QH(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,FH.isWindows&&(r=r.replace(/\//g,"\\")),r}s(QH,"uriToFsPath");function Vue(t,e){let r=e?_Bt:OMe,n="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=rh,n+=rh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),c&&(n+="#",n+=e?c:OMe(c,!1,!1)),n}s(Vue,"_asFormatted");function GMe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+GMe(t.substr(3)):t}}s(GMe,"decodeURIComponentGraceful");var UMe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function LH(t){return t.match(UMe)?t.replace(UMe,e=>GMe(e)):t}s(LH,"percentDecode")});var Yue=G(pb=>{"use strict";f();Object.defineProperty(pb,"__esModule",{value:!0});pb.PromptReference=pb.ChatResponseReferencePartStatusKind=pb.PromptMetadata=void 0;var d9=HMe(),$ue=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};pb.PromptMetadata=$ue;var jMe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(jMe||(pb.ChatResponseReferencePartStatusKind=jMe={}));var zue=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?d9.URI.from(n):{uri:d9.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?d9.URI.from(e.iconPath):"light"in e.iconPath?{light:d9.URI.from(e.iconPath.light),dark:d9.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};pb.PromptReference=zue});var ide=G(cR=>{"use strict";f();Object.defineProperty(cR,"__esModule",{value:!0});cR.PromptRenderer=cR.MetadataMap=void 0;var SBt=bue(),f9=_ue(),lR=ob(),Na=Oue(),nde=Yue(),VMe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(VMe||(cR.MetadataMap=VMe={}));var Jue=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new UH(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[c,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=KMe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Na.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:lR.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await zMe(v,()=>b.prepare?.(g[E],n,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await zMe(v,()=>b.render(v.node.getState(),_,n,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let B=await this._processPromptRenderPiece(new rT(_.tokenBudget,this._endpoint),b,E,k,n,i);E instanceof Na.Expandable&&this._growables.push({initialConsume:B,elem:b.node}),e.consume(B)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let l=YMe(i),c=new rT(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await RBt(this._tokenizer,r,n,l);return c.consume(u),await this._handlePromptChildren(r,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new rT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,lR.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new rT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],l=await n.tokenCount(this._tokenizer),c=[...n.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof lA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(qH),p=i.map(m=>{if(!(m instanceof lA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(qH);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=n.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Na.Expandable))throw new Error("unreachable: expected growable");let l=new UH(null,0,o.elem.id),c=new rT(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:lR.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Na.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let l of r){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},OH(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new lA(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new lA(c));else this._handleIntrinsic(e,l.name,l.props,OH(l.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};cR.PromptRenderer=Jue;async function RBt(t,e,r,n){let i=0;if((0,Na.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,lR.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:lR.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(RBt,"computeTokensConsumedByLiterals");function YMe(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new ede(String(t))):kBt(t)?OH(t.children,e):BBt(t)?OH(t,e):typeof t.ctor=="string"?e.push(new Xue(t.ctor,t.props,t.children)):e.push(new Zue(t.ctor,t.props,t.children)),e)}s(YMe,"flattenAndReduce");function OH(t,e=[]){for(let r of t)YMe(r,e);return e}s(OH,"flattenAndReduceArr");var Xue=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},Zue=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},ede=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},rT=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},UH=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new lA(nde.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return p9.fromJSON(i,a,o);default:}}).filter(qH),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Na.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Na.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Na.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Na.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Na.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Na.Chunk&&(this._objFlags|=2),this._obj instanceof Na.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new p9(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new p9(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(qH),props:{},references:this._metadata.filter(r=>r instanceof lA).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=Kue(this._obj.props,SBt.jsonRetainedProps)),this._obj instanceof Na.BaseChatMessage)e.ctor=1,Object.assign(e.props,Kue(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Na.Image)return{...e,ctor:3,props:{...e.props,...Kue(this._obj.props,["src","detail"])}};this._obj instanceof Na.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Na.Image)return new f9.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Na.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new f9.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Na.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Na.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new f9.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Na.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Na.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new tde({type:lR.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},tde=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new f9.MaterializedChatMessageBreakpoint(e,this.part)}},p9=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new lA(nde.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new f9.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof lA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function kBt(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(kBt,"isFragmentCtor");function qH(t){return t!==void 0}s(qH,"isDefined");var rde=class extends nde.PromptMetadata{static{s(this,"InternalMetadata")}},lA=class extends rde{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function BBt(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(BBt,"isIterable");function Kue(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(Kue,"pickProps");function KMe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(KMe,"atPath");var $Me=new WeakSet;async function zMe(t,e){try{return await e()}catch(r){throw r instanceof Error&&!$Me.has(r)&&r.constructor.name!=="CancellationError"&&($Me.add(r),r.message+=` (at tsx element ${KMe(t.path)})`),r}}s(zMe,"annotateError")});var JMe=G(WH=>{"use strict";f();Object.defineProperty(WH,"__esModule",{value:!0});WH.VSCodeTokenizer=void 0;var ode=ob(),sde=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=ode.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==ode.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===ode.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};WH.VSCodeTokenizer=sde});var XMe=G(uR=>{"use strict";f();Object.defineProperty(uR,"__esModule",{value:!0});uR.tracerCss=uR.tracerSrc=void 0;uR.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';uR.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var nQe=G(HH=>{"use strict";f();Object.defineProperty(HH,"__esModule",{value:!0});HH.HTMLTracer=void 0;var ZMe=XMe(),nT=_ue(),PBt=ob(),ade=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return lde.create({epochs:this.epochs,traceData:tQe(this.traceData)})}serveRouter(e){return new GH({baseAddress:e,epochs:this.epochs,traceData:tQe(this.traceData)})}};HH.HTMLTracer=ade;var GH=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${ZMe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await eQe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${ZMe.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await eQe(i.tokenizer,a),c=JSON.stringify(l);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(c)),n.end(c)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},lde=class t extends GH{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function eQe(t,e){return{container:await rQe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(eQe,"serializeRenderData");async function rQe(t,e,r){let n={metadata:e.metadata.map(NBt),priority:e.priority};if(e instanceof nT.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof nT.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof nT.MaterializedChatMessageOpaque||e instanceof nT.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>rQe(t,o,r||e instanceof nT.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof nT.GenericMaterializedContainer)return{...i,type:0};if(e instanceof nT.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:PBt.Raw.ChatRole.display(e.role),text:o}}}DBt(e)}s(rQe,"serializeMaterialized");function DBt(t){throw new Error("unreachable")}s(DBt,"assertNever");function NBt(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(NBt,"serializeMetadata");var tQe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var oQe=G(iQe=>{"use strict";f();Object.defineProperty(iQe,"__esModule",{value:!0})});var aQe=G(sQe=>{"use strict";f();Object.defineProperty(sQe,"__esModule",{value:!0})});var cQe=G(lQe=>{"use strict";f();Object.defineProperty(lQe,"__esModule",{value:!0})});var th=G(Is=>{"use strict";f();var LBt=Is&&Is.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iT=Is&&Is.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&LBt(e,t,r)};Object.defineProperty(Is,"__esModule",{value:!0});Is.contentType=Is.PromptRenderer=Is.MetadataMap=Is.PromptElement=Is.JSONTree=void 0;Is.renderPrompt=QBt;Is.renderElementJSON=OBt;var cde=ob(),uQe=ide(),FBt=JMe();iT(nQe(),Is);Is.JSONTree=bue();iT(ob(),Is);iT(Oue(),Is);iT(Yue(),Is);iT(oQe(),Is);iT(aQe(),Is);iT(cQe(),Is);var MBt=Rue();Object.defineProperty(Is,"PromptElement",{enumerable:!0,get:s(function(){return MBt.PromptElement},"get")});var dQe=ide();Object.defineProperty(Is,"MetadataMap",{enumerable:!0,get:s(function(){return dQe.MetadataMap},"get")});Object.defineProperty(Is,"PromptRenderer",{enumerable:!0,get:s(function(){return dQe.PromptRenderer},"get")});async function QBt(t,e,r,n,i,o,a=cde.OutputMode.VSCode){let l="countTokens"in n?new FBt.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,c=new uQe.PromptRenderer(r,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(QBt,"renderPrompt");Is.contentType="application/vnd.codechat.prompt+json.1";function OBt(t,e,r,n){return new uQe.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:cde.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===cde.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(OBt,"renderElementJSON")});var j9=G((AEn,cUe)=>{f();var $Pt="2.0.0",zPt=Number.MAX_SAFE_INTEGER||9007199254740991,YPt=16,KPt=250,JPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];cUe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:YPt,MAX_SAFE_BUILD_LENGTH:KPt,MAX_SAFE_INTEGER:zPt,RELEASE_TYPES:JPt,SEMVER_SPEC_VERSION:$Pt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var V9=G((CEn,uUe)=>{f();var XPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};uUe.exports=XPt});var QR=G((CA,dUe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:R0e,MAX_SAFE_BUILD_LENGTH:ZPt,MAX_LENGTH:eDt}=j9(),tDt=V9();CA=dUe.exports={};var rDt=CA.re=[],nDt=CA.safeRe=[],hr=CA.src=[],iDt=CA.safeSrc=[],gr=CA.t={},oDt=0,k0e="[a-zA-Z0-9-]",sDt=[["\\s",1],["\\d",eDt],[k0e,ZPt]],aDt=s(t=>{for(let[e,r]of sDt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),Zn=s((t,e,r)=>{let n=aDt(e),i=oDt++;tDt(t,i,e),gr[t]=i,hr[i]=e,iDt[i]=n,rDt[i]=new RegExp(e,r?"g":void 0),nDt[i]=new RegExp(n,r?"g":void 0)},"createToken");Zn("NUMERICIDENTIFIER","0|[1-9]\\d*");Zn("NUMERICIDENTIFIERLOOSE","\\d+");Zn("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${k0e}*`);Zn("MAINVERSION",`(${hr[gr.NUMERICIDENTIFIER]})\\.(${hr[gr.NUMERICIDENTIFIER]})\\.(${hr[gr.NUMERICIDENTIFIER]})`);Zn("MAINVERSIONLOOSE",`(${hr[gr.NUMERICIDENTIFIERLOOSE]})\\.(${hr[gr.NUMERICIDENTIFIERLOOSE]})\\.(${hr[gr.NUMERICIDENTIFIERLOOSE]})`);Zn("PRERELEASEIDENTIFIER",`(?:${hr[gr.NUMERICIDENTIFIER]}|${hr[gr.NONNUMERICIDENTIFIER]})`);Zn("PRERELEASEIDENTIFIERLOOSE",`(?:${hr[gr.NUMERICIDENTIFIERLOOSE]}|${hr[gr.NONNUMERICIDENTIFIER]})`);Zn("PRERELEASE",`(?:-(${hr[gr.PRERELEASEIDENTIFIER]}(?:\\.${hr[gr.PRERELEASEIDENTIFIER]})*))`);Zn("PRERELEASELOOSE",`(?:-?(${hr[gr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${hr[gr.PRERELEASEIDENTIFIERLOOSE]})*))`);Zn("BUILDIDENTIFIER",`${k0e}+`);Zn("BUILD",`(?:\\+(${hr[gr.BUILDIDENTIFIER]}(?:\\.${hr[gr.BUILDIDENTIFIER]})*))`);Zn("FULLPLAIN",`v?${hr[gr.MAINVERSION]}${hr[gr.PRERELEASE]}?${hr[gr.BUILD]}?`);Zn("FULL",`^${hr[gr.FULLPLAIN]}$`);Zn("LOOSEPLAIN",`[v=\\s]*${hr[gr.MAINVERSIONLOOSE]}${hr[gr.PRERELEASELOOSE]}?${hr[gr.BUILD]}?`);Zn("LOOSE",`^${hr[gr.LOOSEPLAIN]}$`);Zn("GTLT","((?:<|>)?=?)");Zn("XRANGEIDENTIFIERLOOSE",`${hr[gr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Zn("XRANGEIDENTIFIER",`${hr[gr.NUMERICIDENTIFIER]}|x|X|\\*`);Zn("XRANGEPLAIN",`[v=\\s]*(${hr[gr.XRANGEIDENTIFIER]})(?:\\.(${hr[gr.XRANGEIDENTIFIER]})(?:\\.(${hr[gr.XRANGEIDENTIFIER]})(?:${hr[gr.PRERELEASE]})?${hr[gr.BUILD]}?)?)?`);Zn("XRANGEPLAINLOOSE",`[v=\\s]*(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:${hr[gr.PRERELEASELOOSE]})?${hr[gr.BUILD]}?)?)?`);Zn("XRANGE",`^${hr[gr.GTLT]}\\s*${hr[gr.XRANGEPLAIN]}$`);Zn("XRANGELOOSE",`^${hr[gr.GTLT]}\\s*${hr[gr.XRANGEPLAINLOOSE]}$`);Zn("COERCEPLAIN",`(^|[^\\d])(\\d{1,${R0e}})(?:\\.(\\d{1,${R0e}}))?(?:\\.(\\d{1,${R0e}}))?`);Zn("COERCE",`${hr[gr.COERCEPLAIN]}(?:$|[^\\d])`);Zn("COERCEFULL",hr[gr.COERCEPLAIN]+`(?:${hr[gr.PRERELEASE]})?(?:${hr[gr.BUILD]})?(?:$|[^\\d])`);Zn("COERCERTL",hr[gr.COERCE],!0);Zn("COERCERTLFULL",hr[gr.COERCEFULL],!0);Zn("LONETILDE","(?:~>?)");Zn("TILDETRIM",`(\\s*)${hr[gr.LONETILDE]}\\s+`,!0);CA.tildeTrimReplace="$1~";Zn("TILDE",`^${hr[gr.LONETILDE]}${hr[gr.XRANGEPLAIN]}$`);Zn("TILDELOOSE",`^${hr[gr.LONETILDE]}${hr[gr.XRANGEPLAINLOOSE]}$`);Zn("LONECARET","(?:\\^)");Zn("CARETTRIM",`(\\s*)${hr[gr.LONECARET]}\\s+`,!0);CA.caretTrimReplace="$1^";Zn("CARET",`^${hr[gr.LONECARET]}${hr[gr.XRANGEPLAIN]}$`);Zn("CARETLOOSE",`^${hr[gr.LONECARET]}${hr[gr.XRANGEPLAINLOOSE]}$`);Zn("COMPARATORLOOSE",`^${hr[gr.GTLT]}\\s*(${hr[gr.LOOSEPLAIN]})$|^$`);Zn("COMPARATOR",`^${hr[gr.GTLT]}\\s*(${hr[gr.FULLPLAIN]})$|^$`);Zn("COMPARATORTRIM",`(\\s*)${hr[gr.GTLT]}\\s*(${hr[gr.LOOSEPLAIN]}|${hr[gr.XRANGEPLAIN]})`,!0);CA.comparatorTrimReplace="$1$2$3";Zn("HYPHENRANGE",`^\\s*(${hr[gr.XRANGEPLAIN]})\\s+-\\s+(${hr[gr.XRANGEPLAIN]})\\s*$`);Zn("HYPHENRANGELOOSE",`^\\s*(${hr[gr.XRANGEPLAINLOOSE]})\\s+-\\s+(${hr[gr.XRANGEPLAINLOOSE]})\\s*$`);Zn("STAR","(<|>)?=?\\s*\\*");Zn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Zn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var AV=G((EEn,fUe)=>{f();var lDt=Object.freeze({loose:!0}),cDt=Object.freeze({}),uDt=s(t=>t?typeof t!="object"?lDt:t:cDt,"parseOptions");fUe.exports=uDt});var B0e=G((wEn,hUe)=>{f();var pUe=/^[0-9]+$/,mUe=s((t,e)=>{let r=pUe.test(t),n=pUe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),dDt=s((t,e)=>mUe(e,t),"rcompareIdentifiers");hUe.exports={compareIdentifiers:mUe,rcompareIdentifiers:dDt}});var au=G((REn,CUe)=>{f();var yV=V9(),{MAX_LENGTH:gUe,MAX_SAFE_INTEGER:CV}=j9(),{safeRe:AUe,safeSrc:yUe,t:xV}=QR(),fDt=AV(),{compareIdentifiers:OR}=B0e(),P0e=class t{static{s(this,"SemVer")}constructor(e,r){if(r=fDt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>gUe)throw new TypeError(`version is longer than ${gUe} characters`);yV("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?AUe[xV.LOOSE]:AUe[xV.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>CV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>CV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>CV||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<CV)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(yV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),OR(this.major,e.major)||OR(this.minor,e.minor)||OR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(yV("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return OR(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(yV("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return OR(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=new RegExp(`^${this.options.loose?yUe[xV.PRERELEASELOOSE]:yUe[xV.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),OR(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};CUe.exports=P0e});var IT=G((PEn,vUe)=>{f();var xUe=au(),pDt=s((t,e,r=!1)=>{if(t instanceof xUe)return t;try{return new xUe(t,e)}catch(n){if(!r)return null;throw n}},"parse");vUe.exports=pDt});var EUe=G((LEn,bUe)=>{f();var mDt=IT(),hDt=s((t,e)=>{let r=mDt(t,e);return r?r.version:null},"valid");bUe.exports=hDt});var TUe=G((QEn,IUe)=>{f();var gDt=IT(),ADt=s((t,e)=>{let r=gDt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");IUe.exports=ADt});var SUe=G((qEn,_Ue)=>{f();var wUe=au(),yDt=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new wUe(t instanceof wUe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");_Ue.exports=yDt});var BUe=G((HEn,kUe)=>{f();var RUe=IT(),CDt=s((t,e)=>{let r=RUe(t,null,!0),n=RUe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,l=o?n:r,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"},"diff");kUe.exports=CDt});var DUe=G(($En,PUe)=>{f();var xDt=au(),vDt=s((t,e)=>new xDt(t,e).major,"major");PUe.exports=vDt});var LUe=G((KEn,NUe)=>{f();var bDt=au(),EDt=s((t,e)=>new bDt(t,e).minor,"minor");NUe.exports=EDt});var MUe=G((ZEn,FUe)=>{f();var IDt=au(),TDt=s((t,e)=>new IDt(t,e).patch,"patch");FUe.exports=TDt});var OUe=G((rIn,QUe)=>{f();var wDt=IT(),_Dt=s((t,e)=>{let r=wDt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");QUe.exports=_Dt});var Ep=G((oIn,qUe)=>{f();var UUe=au(),SDt=s((t,e,r)=>new UUe(t,r).compare(new UUe(e,r)),"compare");qUe.exports=SDt});var GUe=G((lIn,WUe)=>{f();var RDt=Ep(),kDt=s((t,e,r)=>RDt(e,t,r),"rcompare");WUe.exports=kDt});var jUe=G((dIn,HUe)=>{f();var BDt=Ep(),PDt=s((t,e)=>BDt(t,e,!0),"compareLoose");HUe.exports=PDt});var vV=G((mIn,$Ue)=>{f();var VUe=au(),DDt=s((t,e,r)=>{let n=new VUe(t,r),i=new VUe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");$Ue.exports=DDt});var YUe=G((AIn,zUe)=>{f();var NDt=vV(),LDt=s((t,e)=>t.sort((r,n)=>NDt(r,n,e)),"sort");zUe.exports=LDt});var JUe=G((xIn,KUe)=>{f();var FDt=vV(),MDt=s((t,e)=>t.sort((r,n)=>FDt(n,r,e)),"rsort");KUe.exports=MDt});var $9=G((EIn,XUe)=>{f();var QDt=Ep(),ODt=s((t,e,r)=>QDt(t,e,r)>0,"gt");XUe.exports=ODt});var bV=G((wIn,ZUe)=>{f();var UDt=Ep(),qDt=s((t,e,r)=>UDt(t,e,r)<0,"lt");ZUe.exports=qDt});var D0e=G((RIn,eqe)=>{f();var WDt=Ep(),GDt=s((t,e,r)=>WDt(t,e,r)===0,"eq");eqe.exports=GDt});var N0e=G((PIn,tqe)=>{f();var HDt=Ep(),jDt=s((t,e,r)=>HDt(t,e,r)!==0,"neq");tqe.exports=jDt});var EV=G((LIn,rqe)=>{f();var VDt=Ep(),$Dt=s((t,e,r)=>VDt(t,e,r)>=0,"gte");rqe.exports=$Dt});var IV=G((QIn,nqe)=>{f();var zDt=Ep(),YDt=s((t,e,r)=>zDt(t,e,r)<=0,"lte");nqe.exports=YDt});var L0e=G((qIn,iqe)=>{f();var KDt=D0e(),JDt=N0e(),XDt=$9(),ZDt=EV(),e9t=bV(),t9t=IV(),r9t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return KDt(t,r,n);case"!=":return JDt(t,r,n);case">":return XDt(t,r,n);case">=":return ZDt(t,r,n);case"<":return e9t(t,r,n);case"<=":return t9t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");iqe.exports=r9t});var sqe=G((HIn,oqe)=>{f();var n9t=au(),i9t=IT(),{safeRe:TV,t:wV}=QR(),o9t=s((t,e)=>{if(t instanceof n9t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?TV[wV.COERCEFULL]:TV[wV.COERCE]);else{let c=e.includePrerelease?TV[wV.COERCERTLFULL]:TV[wV.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",l=e.includePrerelease&&r[6]?`+${r[6]}`:"";return i9t(`${n}.${i}.${o}${a}${l}`,e)},"coerce");oqe.exports=o9t});var lqe=G(($In,aqe)=>{f();var F0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};aqe.exports=F0e});var Ip=G((KIn,fqe)=>{f();var s9t=/\s+/g,M0e=class t{static{s(this,"Range")}constructor(e,r){if(r=l9t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Q0e)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(s9t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!uqe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&h9t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&p9t)|(this.options.loose&&m9t))+":"+e,i=cqe.get(n);if(i)return i;let o=this.options.loose,a=o?Od[Gu.HYPHENRANGELOOSE]:Od[Gu.HYPHENRANGE];e=e.replace(a,T9t(this.options.includePrerelease)),Ts("hyphen replace",e),e=e.replace(Od[Gu.COMPARATORTRIM],u9t),Ts("comparator trim",e),e=e.replace(Od[Gu.TILDETRIM],d9t),Ts("tilde trim",e),e=e.replace(Od[Gu.CARETTRIM],f9t),Ts("caret trim",e);let l=e.split(" ").map(p=>g9t(p,this.options)).join(" ").split(/\s+/).map(p=>I9t(p,this.options));o&&(l=l.filter(p=>(Ts("loose invalid filter",p,this.options),!!p.match(Od[Gu.COMPARATORLOOSE])))),Ts("range list",l);let c=new Map,u=l.map(p=>new Q0e(p,this.options));for(let p of u){if(uqe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return cqe.set(n,d),d}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>dqe(n,r)&&e.set.some(i=>dqe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new c9t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(w9t(this.set[r],e,this.options))return!0;return!1}};fqe.exports=M0e;var a9t=lqe(),cqe=new a9t,l9t=AV(),Q0e=z9(),Ts=V9(),c9t=au(),{safeRe:Od,t:Gu,comparatorTrimReplace:u9t,tildeTrimReplace:d9t,caretTrimReplace:f9t}=QR(),{FLAG_INCLUDE_PRERELEASE:p9t,FLAG_LOOSE:m9t}=j9(),uqe=s(t=>t.value==="<0.0.0-0","isNullSet"),h9t=s(t=>t.value==="","isAny"),dqe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),g9t=s((t,e)=>(Ts("comp",t,e),t=C9t(t,e),Ts("caret",t),t=A9t(t,e),Ts("tildes",t),t=v9t(t,e),Ts("xrange",t),t=E9t(t,e),Ts("stars",t),t),"parseComparator"),Hu=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),A9t=s((t,e)=>t.trim().split(/\s+/).map(r=>y9t(r,e)).join(" "),"replaceTildes"),y9t=s((t,e)=>{let r=e.loose?Od[Gu.TILDELOOSE]:Od[Gu.TILDE];return t.replace(r,(n,i,o,a,l)=>{Ts("tilde",t,n,i,o,a,l);let c;return Hu(i)?c="":Hu(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Hu(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(Ts("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Ts("tilde return",c),c})},"replaceTilde"),C9t=s((t,e)=>t.trim().split(/\s+/).map(r=>x9t(r,e)).join(" "),"replaceCarets"),x9t=s((t,e)=>{Ts("caret",t,e);let r=e.loose?Od[Gu.CARETLOOSE]:Od[Gu.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,l,c)=>{Ts("caret",t,i,o,a,l,c);let u;return Hu(o)?u="":Hu(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Hu(l)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:c?(Ts("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(Ts("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${n} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),Ts("caret return",u),u})},"replaceCaret"),v9t=s((t,e)=>(Ts("replaceXRanges",t,e),t.split(/\s+/).map(r=>b9t(r,e)).join(" ")),"replaceXRanges"),b9t=s((t,e)=>{t=t.trim();let r=e.loose?Od[Gu.XRANGELOOSE]:Od[Gu.XRANGE];return t.replace(r,(n,i,o,a,l,c)=>{Ts("xRange",t,n,i,o,a,l,c);let u=Hu(o),d=u||Hu(a),p=d||Hu(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),n=`${i+o}.${a}.${l}${c}`):d?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Ts("xRange return",n),n})},"replaceXRange"),E9t=s((t,e)=>(Ts("replaceStars",t,e),t.trim().replace(Od[Gu.STAR],"")),"replaceStars"),I9t=s((t,e)=>(Ts("replaceGTE0",t,e),t.trim().replace(Od[e.includePrerelease?Gu.GTE0PRE:Gu.GTE0],"")),"replaceGTE0"),T9t=s(t=>(e,r,n,i,o,a,l,c,u,d,p,m)=>(Hu(n)?r="":Hu(i)?r=`>=${n}.0.0${t?"-0":""}`:Hu(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Hu(u)?c="":Hu(d)?c=`<${+u+1}.0.0-0`:Hu(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),"hyphenReplace"),w9t=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ts(t[n].semver),t[n].semver!==Q0e.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var z9=G((ZIn,yqe)=>{f();var Y9=Symbol("SemVer ANY"),q0e=class t{static{s(this,"Comparator")}static get ANY(){return Y9}constructor(e,r){if(r=pqe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),U0e("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Y9?this.value="":this.value=this.operator+this.semver.version,U0e("comp",this)}parse(e){let r=this.options.loose?mqe[hqe.COMPARATORLOOSE]:mqe[hqe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new gqe(n[2],this.options.loose):this.semver=Y9}toString(){return this.value}test(e){if(U0e("Comparator.test",e,this.options.loose),this.semver===Y9||e===Y9)return!0;if(typeof e=="string")try{e=new gqe(e,this.options)}catch{return!1}return O0e(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Aqe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Aqe(this.value,r).test(e.semver):(r=pqe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||O0e(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||O0e(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};yqe.exports=q0e;var pqe=AV(),{safeRe:mqe,t:hqe}=QR(),O0e=L0e(),U0e=V9(),gqe=au(),Aqe=Ip()});var K9=G((r2n,Cqe)=>{f();var _9t=Ip(),S9t=s((t,e,r)=>{try{e=new _9t(e,r)}catch{return!1}return e.test(t)},"satisfies");Cqe.exports=S9t});var vqe=G((o2n,xqe)=>{f();var R9t=Ip(),k9t=s((t,e)=>new R9t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");xqe.exports=k9t});var Eqe=G((l2n,bqe)=>{f();var B9t=au(),P9t=Ip(),D9t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new P9t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new B9t(n,r))}),n},"maxSatisfying");bqe.exports=D9t});var Tqe=G((d2n,Iqe)=>{f();var N9t=au(),L9t=Ip(),F9t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new L9t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new N9t(n,r))}),n},"minSatisfying");Iqe.exports=F9t});var Sqe=G((m2n,_qe)=>{f();var W0e=au(),M9t=Ip(),wqe=$9(),Q9t=s((t,e)=>{t=new M9t(t,e);let r=new W0e("0.0.0");if(t.test(r)||(r=new W0e("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let l=new W0e(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||wqe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||wqe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");_qe.exports=Q9t});var kqe=G((A2n,Rqe)=>{f();var O9t=Ip(),U9t=s((t,e)=>{try{return new O9t(t,e).range||"*"}catch{return null}},"validRange");Rqe.exports=U9t});var _V=G((x2n,Nqe)=>{f();var q9t=au(),Dqe=z9(),{ANY:W9t}=Dqe,G9t=Ip(),H9t=K9(),Bqe=$9(),Pqe=bV(),j9t=IV(),V9t=EV(),$9t=s((t,e,r,n)=>{t=new q9t(t,n),e=new G9t(e,n);let i,o,a,l,c;switch(r){case">":i=Bqe,o=j9t,a=Pqe,l=">",c=">=";break;case"<":i=Pqe,o=V9t,a=Bqe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(H9t(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===W9t&&(h=new Dqe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");Nqe.exports=$9t});var Fqe=G((E2n,Lqe)=>{f();var z9t=_V(),Y9t=s((t,e,r)=>z9t(t,e,">",r),"gtr");Lqe.exports=Y9t});var Qqe=G((w2n,Mqe)=>{f();var K9t=_V(),J9t=s((t,e,r)=>K9t(t,e,"<",r),"ltr");Mqe.exports=J9t});var qqe=G((R2n,Uqe)=>{f();var Oqe=Ip(),X9t=s((t,e,r)=>(t=new Oqe(t,r),e=new Oqe(e,r),t.intersects(e,r)),"intersects");Uqe.exports=X9t});var Gqe=G((P2n,Wqe)=>{f();var Z9t=K9(),e6t=Ep();Wqe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((d,p)=>e6t(d,p,r));for(let d of a)Z9t(d,e,r)?(o=d,i||(i=d)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let l=[];for(let[d,p]of n)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var Yqe=G((N2n,zqe)=>{f();var Hqe=Ip(),H0e=z9(),{ANY:G0e}=H0e,J9=K9(),j0e=Ep(),t6t=s((t,e,r={})=>{if(t===e)return!0;t=new Hqe(t,r),e=new Hqe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=n6t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),r6t=[new H0e(">=0.0.0-0")],jqe=[new H0e(">=0.0.0")],n6t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===G0e){if(e.length===1&&e[0].semver===G0e)return!0;r.includePrerelease?t=r6t:t=jqe}if(e.length===1&&e[0].semver===G0e){if(r.includePrerelease)return!0;e=jqe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=Vqe(i,h,r):h.operator==="<"||h.operator==="<="?o=$qe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=j0e(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!J9(h,String(i),r)||o&&!J9(h,String(o),r))return null;for(let g of e)if(!J9(h,String(g),r))return!1;return!0}let l,c,u,d,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=Vqe(i,h,r),l===h&&l!==i)return!1}else if(i.operator===">="&&!J9(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=$qe(o,h,r),c===h&&c!==o)return!1}else if(o.operator==="<="&&!J9(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),Vqe=s((t,e,r)=>{if(!t)return e;let n=j0e(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),$qe=s((t,e,r)=>{if(!t)return e;let n=j0e(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");zqe.exports=t6t});var $0e=G((M2n,Xqe)=>{f();var V0e=QR(),Kqe=j9(),i6t=au(),Jqe=B0e(),o6t=IT(),s6t=EUe(),a6t=TUe(),l6t=SUe(),c6t=BUe(),u6t=DUe(),d6t=LUe(),f6t=MUe(),p6t=OUe(),m6t=Ep(),h6t=GUe(),g6t=jUe(),A6t=vV(),y6t=YUe(),C6t=JUe(),x6t=$9(),v6t=bV(),b6t=D0e(),E6t=N0e(),I6t=EV(),T6t=IV(),w6t=L0e(),_6t=sqe(),S6t=z9(),R6t=Ip(),k6t=K9(),B6t=vqe(),P6t=Eqe(),D6t=Tqe(),N6t=Sqe(),L6t=kqe(),F6t=_V(),M6t=Fqe(),Q6t=Qqe(),O6t=qqe(),U6t=Gqe(),q6t=Yqe();Xqe.exports={parse:o6t,valid:s6t,clean:a6t,inc:l6t,diff:c6t,major:u6t,minor:d6t,patch:f6t,prerelease:p6t,compare:m6t,rcompare:h6t,compareLoose:g6t,compareBuild:A6t,sort:y6t,rsort:C6t,gt:x6t,lt:v6t,eq:b6t,neq:E6t,gte:I6t,lte:T6t,cmp:w6t,coerce:_6t,Comparator:S6t,Range:R6t,satisfies:k6t,toComparators:B6t,maxSatisfying:P6t,minSatisfying:D6t,minVersion:N6t,validRange:L6t,outside:F6t,gtr:M6t,ltr:Q6t,intersects:O6t,simplifyRange:U6t,subset:q6t,SemVer:i6t,re:V0e.re,src:V0e.src,tokens:V0e.t,SEMVER_SPEC_VERSION:Kqe.SEMVER_SPEC_VERSION,RELEASE_TYPES:Kqe.RELEASE_TYPES,compareIdentifiers:Jqe.compareIdentifiers,rcompareIdentifiers:Jqe.rcompareIdentifiers}});var Y0=G(e6=>{"use strict";f();Object.defineProperty(e6,"__esModule",{value:!0});e6.dedent=void 0;function xWe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(l){return l.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+n[c+1]}),a}s(xWe,"dedent");e6.dedent=xWe;e6.default=xWe});var SWe=G(afe=>{"use strict";f();Object.defineProperty(afe,"__esModule",{value:!0});afe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var NWe=G(cfe=>{"use strict";f();Object.defineProperty(cfe,"__esModule",{value:!0});var RWe=require("worker_threads"),lNt=require("v8"),cNt=require("os"),kWe=SWe(),FV="ready",BWe="spawning",uNt="busy",MV="off",PWe=cNt.cpus().length,DWe=process.version.replace("v","").split("."),dNt=parseInt(DWe[0]),fNt=parseInt(DWe[1]),lfe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=PWe,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new RWe.Worker(kWe.workerFile,{eval:!0});e.status=BWe,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=FV,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=MV,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===MV).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===FV){e=this.workers[c];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=uNt;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:l}=r;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=lNt.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),n.once("error",m=>{e.status=MV,l(m),this.tick()}),n.postMessage(p)}catch(c){this.free(n),l(c)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=FV,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:PWe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new RWe.Worker(kWe.workerFile,{eval:!0});this.workers.push({status:BWe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=FV,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=MV,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(dNt>=12&&fNt>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};cfe.default=new lfe});var QV=G(TT=>{"use strict";f();var pNt=TT&&TT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(TT,"__esModule",{value:!0});var t6=pNt(NWe()),mNt=`job needs a function.
Try with:
> job(() => {...}, config)`,hNt=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function gNt(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(mNt));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(hNt));t6.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(gNt,"job");TT.job=gNt;TT.stop=t6.default.teardown.bind(t6.default);TT.start=t6.default.setup.bind(t6.default)});var JWe=G(wT=>{"use strict";f();var TA=wT&&wT.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Cfe=wT&&wT.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Fy,Db;Object.defineProperty(wT,"__esModule",{value:!0});var xfe=class{static{s(this,"AwaitLock")}constructor(){Fy.set(this,!1),Db.set(this,new Set)}get acquired(){return TA(this,Fy,"f")}acquireAsync({timeout:e}={}){if(!TA(this,Fy,"f"))return Cfe(this,Fy,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{TA(this,Db,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),TA(this,Db,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{TA(this,Db,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return TA(this,Fy,"f")?!1:(Cfe(this,Fy,!0,"f"),!0)}release(){if(!TA(this,Fy,"f"))throw new Error("Cannot release an unacquired lock");if(TA(this,Db,"f").size>0){let[e]=TA(this,Db,"f");TA(this,Db,"f").delete(e),e()}else Cfe(this,Fy,!1,"f")}};wT.default=xfe;Fy=new WeakMap,Db=new WeakMap});var lVe=G((D$n,aVe)=>{f();var d3=1e3,f3=d3*60,p3=f3*60,LT=p3*24,VOt=LT*7,$Ot=LT*365.25;aVe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return zOt(t);if(r==="number"&&isFinite(t))return e.long?KOt(t):YOt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function zOt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*$Ot;case"weeks":case"week":case"w":return r*VOt;case"days":case"day":case"d":return r*LT;case"hours":case"hour":case"hrs":case"hr":case"h":return r*p3;case"minutes":case"minute":case"mins":case"min":case"m":return r*f3;case"seconds":case"second":case"secs":case"sec":case"s":return r*d3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(zOt,"parse");function YOt(t){var e=Math.abs(t);return e>=LT?Math.round(t/LT)+"d":e>=p3?Math.round(t/p3)+"h":e>=f3?Math.round(t/f3)+"m":e>=d3?Math.round(t/d3)+"s":t+"ms"}s(YOt,"fmtShort");function KOt(t){var e=Math.abs(t);return e>=LT?Az(t,e,LT,"day"):e>=p3?Az(t,e,p3,"hour"):e>=f3?Az(t,e,f3,"minute"):e>=d3?Az(t,e,d3,"second"):t+" ms"}s(KOt,"fmtLong");function Az(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(Az,"plural")});var Kpe=G((F$n,cVe)=>{f();function JOt(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=a,r.humanize=lVe(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,W)=>{if(N==="%%")return"%";k++;let ee=r.formatters[W];if(typeof ee=="function"){let me=v[k];N=ee.call(b,me),v.splice(k,1),k--}return N}),r.formatArgs.call(b,v),(b.log||r.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof r.init=="function"&&r.init(y),y}s(r,"createDebug");function n(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(n,"extend");function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...r.names.map(l),...r.skips.map(l).map(p=>"-"+p)].join(",");return r.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(d))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(JOt,"setup");cVe.exports=JOt});var uVe=G((J0,yz)=>{f();J0.formatArgs=ZOt;J0.save=eUt;J0.load=tUt;J0.useColors=XOt;J0.storage=rUt();J0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();J0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function XOt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(XOt,"useColors");function ZOt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+yz.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(ZOt,"formatArgs");J0.log=console.debug||console.log||(()=>{});function eUt(t){try{t?J0.storage.setItem("debug",t):J0.storage.removeItem("debug")}catch{}}s(eUt,"save");function tUt(){let t;try{t=J0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(tUt,"load");function rUt(){try{return localStorage}catch{}}s(rUt,"localstorage");yz.exports=Kpe()(J0);var{formatters:nUt}=yz.exports;nUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var fVe=G((q$n,dVe)=>{"use strict";f();dVe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var hVe=G((G$n,mVe)=>{"use strict";f();var iUt=require("os"),pVe=require("tty"),kp=fVe(),{env:ec}=process,qb;kp("no-color")||kp("no-colors")||kp("color=false")||kp("color=never")?qb=0:(kp("color")||kp("colors")||kp("color=true")||kp("color=always"))&&(qb=1);"FORCE_COLOR"in ec&&(ec.FORCE_COLOR==="true"?qb=1:ec.FORCE_COLOR==="false"?qb=0:qb=ec.FORCE_COLOR.length===0?1:Math.min(parseInt(ec.FORCE_COLOR,10),3));function Jpe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(Jpe,"translateLevel");function Xpe(t,e){if(qb===0)return 0;if(kp("color=16m")||kp("color=full")||kp("color=truecolor"))return 3;if(kp("color=256"))return 2;if(t&&!e&&qb===void 0)return 0;let r=qb||0;if(ec.TERM==="dumb")return r;if(process.platform==="win32"){let n=iUt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ec)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ec)||ec.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ec)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ec.TEAMCITY_VERSION)?1:0;if(ec.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ec){let n=parseInt((ec.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ec.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ec.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ec.TERM)||"COLORTERM"in ec?1:r}s(Xpe,"supportsColor");function oUt(t){let e=Xpe(t,t&&t.isTTY);return Jpe(e)}s(oUt,"getSupportLevel");mVe.exports={supportsColor:oUt,stdout:Jpe(Xpe(!0,pVe.isatty(1))),stderr:Jpe(Xpe(!0,pVe.isatty(2)))}});var AVe=G((Rc,xz)=>{f();var sUt=require("tty"),Cz=require("util");Rc.init=pUt;Rc.log=uUt;Rc.formatArgs=lUt;Rc.save=dUt;Rc.load=fUt;Rc.useColors=aUt;Rc.destroy=Cz.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Rc.colors=[6,2,3,4,5,1];try{let t=hVe();t&&(t.stderr||t).level>=2&&(Rc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Rc.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function aUt(){return"colors"in Rc.inspectOpts?!!Rc.inspectOpts.colors:sUt.isatty(process.stderr.fd)}s(aUt,"useColors");function lUt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+xz.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=cUt()+e+" "+t[0]}s(lUt,"formatArgs");function cUt(){return Rc.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(cUt,"getDate");function uUt(...t){return process.stderr.write(Cz.format(...t)+`
`)}s(uUt,"log");function dUt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(dUt,"save");function fUt(){return process.env.DEBUG}s(fUt,"load");function pUt(t){t.inspectOpts={};let e=Object.keys(Rc.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Rc.inspectOpts[e[r]]}s(pUt,"init");xz.exports=Kpe()(Rc);var{formatters:gVe}=xz.exports;gVe.o=function(t){return this.inspectOpts.colors=this.useColors,Cz.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};gVe.O=function(t){return this.inspectOpts.colors=this.useColors,Cz.inspect(t,this.inspectOpts)}});var FT=G((z$n,Zpe)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Zpe.exports=uVe():Zpe.exports=AVe()});var ome=G((X$n,vVe)=>{f();var _6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,mUt=typeof AbortController=="function",vz=mUt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new yVe}abort(){this.signal.dispatchEvent("abort")}},hUt=typeof AbortSignal=="function",gUt=typeof vz.AbortSignal=="function",yVe=hUt?AbortSignal:gUt?vz.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},nme=new Set,eme=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;bz(r)&&ime(r,`${t} option`,`options.${e}`,h3)},"deprecatedOption"),tme=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(bz(r)){let{prototype:n}=h3,{get:i}=Object.getOwnPropertyDescriptor(n,t);ime(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),AUt=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(bz(r)){let{prototype:n}=h3,{get:i}=Object.getOwnPropertyDescriptor(n,t);ime(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),CVe=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),bz=s(t=>!nme.has(t),"shouldWarn"),ime=s((t,e,r,n)=>{nme.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;CVe(i,"DeprecationWarning",t,n)},"warn"),MT=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),xVe=s(t=>MT(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?m3:null:null,"getUintArray"),m3=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},rme=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=xVe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},h3=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:B}=e instanceof t?{}:e;if(r!==0&&!MT(r))throw new TypeError("max option must be a nonnegative integer");let N=r?xVe(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new rme(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!MT(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!B,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=MT(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||k||0,this.ttl){if(!MT(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let W="LRU_CACHE_UNBOUNDED";bz(W)&&(nme.add(W),CVe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",W,t))}B&&eme("stale","allowStale"),k&&eme("maxAge","ttl"),_&&eme("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new m3(this.max),this.starts=new m3(this.max),this.setItemTTL=(n,i,o=_6.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?_6.now():0};let e=0,r=s(()=>{let n=_6.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new m3(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!MT(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!MT(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return tme("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let l=_6.now()-this.starts[r];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=_6.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];r!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new vz,l={signal:a.signal,options:n,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,l.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return r&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):l?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return tme("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return tme("reset","clear"),this.clear}get length(){return AUt("length","size"),this.size}static get AbortController(){return vz}static get AbortSignal(){return yVe}};vVe.exports=h3});var lme=G((tzn,bVe)=>{"use strict";f();var S6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},sme=class extends S6{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},ame=class extends S6{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};bVe.exports={FetchBaseError:S6,FetchError:sme,AbortError:ame}});var Hy=G((izn,IVe)=>{"use strict";f();var{constants:{MAX_LENGTH:yUt}}=require("buffer"),{pipeline:Ez,PassThrough:CUt}=require("stream"),{promisify:xUt}=require("util"),{createGunzip:vUt,createInflate:bUt,createBrotliDecompress:EUt,constants:{Z_SYNC_FLUSH:EVe}}=require("zlib"),IUt=FT()("helix-fetch:utils"),TUt=xUt(Ez),wUt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),_Ut=s((t,e,r,n)=>{if(!wUt(t,e))return r;let i=s(o=>{o&&(IUt(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Ez(r,vUt({flush:EVe,finishFlush:EVe}),i);case"deflate":case"x-deflate":return Ez(r,bUt(),i);case"br":return Ez(r,EUt(),i);default:return r}},"decodeStream"),SUt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Iz=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?RUt(t,e):kUt(t,e);default:return 0}},"calcSize"),RUt=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:Iz(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),kUt=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=Iz(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=Iz(t[i],e)}),r},"calcObjectSize"),BUt=s(t=>Iz(t,new WeakSet),"sizeof"),PUt=s(async t=>{let e=new CUt,r=0,n=[];return e.on("data",i=>{if(r+i.length>yUt)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await TUt(t,e),Buffer.concat(n,r)},"streamToBuffer");IVe.exports={decodeStream:_Ut,isPlainObject:SUt,sizeof:BUt,streamToBuffer:PUt}});var wz=G((azn,SVe)=>{"use strict";f();var{PassThrough:TVe,Readable:jy}=require("stream"),{types:{isAnyArrayBuffer:_Ve}}=require("util"),{FetchError:DUt,FetchBaseError:NUt}=lme(),{streamToBuffer:LUt}=Hy(),FUt=Buffer.alloc(0),Bp=Symbol("Body internals"),MUt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),wVe=s(async t=>{if(t[Bp].disturbed)throw new TypeError("Already read");if(t[Bp].error)throw new TypeError(`Stream had error: ${t[Bp].error.message}`);t[Bp].disturbed=!0;let{stream:e}=t[Bp];return e===null?FUt:LUt(e)},"consume"),Tz=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=jy.from(e.toString()):e instanceof jy?r=e:Buffer.isBuffer(e)?r=jy.from(e):_Ve(e)?r=jy.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=jy.from(e):r=jy.from(String(e)),this[Bp]={stream:r,disturbed:!1,error:null},e instanceof jy&&r.on("error",n=>{let i=n instanceof NUt?n:new DUt(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Bp].error=i})}get body(){return this[Bp].stream}get bodyUsed(){return this[Bp].disturbed}async buffer(){return wVe(this)}async arrayBuffer(){return MUt(await this.buffer())}async text(){return(await wVe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(Tz.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var QUt=s(t=>{if(t[Bp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Bp],r=e;if(e instanceof jy){r=new TVe;let n=new TVe;e.pipe(r),e.pipe(n),t[Bp].stream=n}return r},"cloneStream"),OUt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||_Ve(t)||t instanceof jy?null:"text/plain; charset=utf-8","guessContentType");SVe.exports={Body:Tz,cloneStream:QUt,guessContentType:OUt}});var g3=G((uzn,PVe)=>{"use strict";f();var{validateHeaderName:RVe,validateHeaderValue:kVe}=require("http"),{isPlainObject:UUt}=Hy(),Vy=Symbol("Headers internals"),R6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof RVe=="function")RVe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),BVe=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof kVe=="function")kVe(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),_z=class t{static{s(this,"Headers")}constructor(e={}){if(this[Vy]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(UUt(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[Vy].map.set(R6(e),BVe(r,e))}has(e){return this[Vy].map.has(R6(e))}get(e){let r=this[Vy].map.get(R6(e));return r===void 0?null:r}append(e,r){let n=R6(e),i=BVe(r,e),o=this[Vy].map.get(n);this[Vy].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[Vy].map.delete(R6(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[Vy].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Vy].map)}};Object.defineProperties(_z.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));PVe.exports={Headers:_z}});var cme=G((pzn,DVe)=>{"use strict";f();var{EventEmitter:qUt}=require("events"),gh=Symbol("AbortSignal internals"),A3=class{static{s(this,"AbortSignal")}constructor(){this[gh]={eventEmitter:new qUt,onabort:null,aborted:!1}}get aborted(){return this[gh].aborted}get onabort(){return this[gh].onabort}set onabort(e){this[gh].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[gh].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[gh].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[gh][n]=="function"&&this[n](r),this[gh].eventEmitter.emit(e,r)}fire(){this[gh].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(A3.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Rz=class extends A3{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[gh].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[gh].timerId)}};Object.defineProperties(Rz.prototype,{clear:{enumerable:!0}});var Sz=Symbol("AbortController internals"),kz=class{static{s(this,"AbortController")}constructor(){this[Sz]={signal:new A3}}get signal(){return this[Sz].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Sz].signal.aborted||this[Sz].signal.fire()}};Object.defineProperties(kz.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});DVe.exports={AbortController:kz,AbortSignal:A3,TimeoutSignal:Rz}});var k6=G((gzn,FVe)=>{"use strict";f();var{randomBytes:WUt}=require("crypto"),{Readable:GUt}=require("stream"),dme=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),HUt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),NVe=s(t=>`--${t}--\r
\r
`,"getFooter"),LVe=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,dme(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*jUt(t,e){for(let[r,n]of t)yield LVe(e,r,n),dme(n)?yield*n.stream():yield n,yield`\r
`;yield NVe(e)}s(jUt,"formDataIterator");var VUt=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(LVe(e,n,i)),r+=dme(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(NVe(e)),r},"getFormDataLength"),ume=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=WUt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=VUt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return GUt.from(jUt(this.fd,this.boundary))}};FVe.exports={isFormData:HUt,FormDataSerializer:ume}});var QVe=G((Czn,MVe)=>{"use strict";f();var{AbortSignal:$Ut}=cme(),{Body:zUt,cloneStream:YUt,guessContentType:KUt}=wz(),{Headers:JUt}=g3(),{isPlainObject:XUt}=Hy(),{isFormData:ZUt,FormDataSerializer:eqt}=k6(),tqt=20,Wb=Symbol("Request internals"),Bz=class t extends zUt{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?YUt(n):null),l=new JUt(r.headers||n&&n.headers||{});if(ZUt(a)&&!l.has("content-type")){let p=new eqt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(XUt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=KUt(a);p&&l.set("content-type",p)}super(a);let c=n?n.signal:null;if("signal"in r&&(c=r.signal),c&&!(c instanceof $Ut))throw new TypeError("signal needs to be an instance of AbortSignal");let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Wb]={init:{...r},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},r.follow===void 0?!n||n.follow===void 0?this.follow=tqt:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Wb].method}get url(){return this[Wb].parsedURL.toString()}get headers(){return this[Wb].headers}get redirect(){return this[Wb].redirect}get cache(){return this[Wb].cache}get signal(){return this[Wb].signal}clone(){return new t(this)}get init(){return this[Wb].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Bz.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});MVe.exports={Request:Bz}});var fme=G((bzn,OVe)=>{"use strict";f();var{Body:rqt,cloneStream:nqt,guessContentType:iqt}=wz(),{Headers:oqt}=g3(),{isPlainObject:sqt}=Hy(),{isFormData:aqt,FormDataSerializer:lqt}=k6(),Ah=Symbol("Response internals"),Pz=class t extends rqt{static{s(this,"Response")}constructor(e=null,r={}){let n=new oqt(r.headers),i=e;if(aqt(i)&&!n.has("content-type")){let o=new lqt(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(sqt(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=iqt(i);o&&n.set("content-type",o)}super(i),this[Ah]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Ah].url||""}get status(){return this[Ah].status}get statusText(){return this[Ah].statusText}get ok(){return this[Ah].status>=200&&this[Ah].status<300}get redirected(){return this[Ah].counter>0}get headers(){return this[Ah].headers}get httpVersion(){return this[Ah].httpVersion}get decoded(){return this[Ah].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(nqt(this),{...this[Ah]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Pz.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});OVe.exports={Response:Pz}});var qVe=G((wzn,UVe)=>{"use strict";f();var cqt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),uqt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),dqt=new Set([500,502,503,504]),fqt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},pqt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function QT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(QT,"toNumberOrZero");function mqt(t){return t?dqt.has(t.status):!0}s(mqt,"isErrorResponse");function pme(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(pme,"parseCacheControl");function hqt(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(hqt,"formatCacheControl");UVe.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=pme(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=pme(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":hqt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&uqt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||cqt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=pme(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)fqt[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return QT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return QT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return QT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+QT(this._rescc["stale-if-error"]),n=e+QT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+QT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+QT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&mqt(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!pqt[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var jVe=G((Rzn,HVe)=>{"use strict";f();var gqt=qVe(),{Headers:Aqt}=g3(),WVe=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),GVe=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),mme=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new gqt(WVe(e),GVe(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(WVe(e))}responseHeaders(e){return new Aqt(this.policy.responseHeaders(GVe(e)))}timeToLive(){return this.policy.timeToLive()}};HVe.exports=mme});var zVe=G((Pzn,$Ve)=>{"use strict";f();var{Readable:yqt}=require("stream"),{Headers:VVe}=g3(),{Response:Cqt}=fme(),Gb=Symbol("CacheableResponse internals"),xqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),hme=class t extends Cqt{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new VVe(r.headers);this[Gb]={headers:n,bufferedBody:e}}get headers(){return this[Gb].headers}set headers(e){if(e instanceof VVe)this[Gb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return yqt.from(this[Gb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Gb].bufferedBody}async arrayBuffer(){return xqt(this[Gb].bufferedBody)}async text(){return this[Gb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[Gb].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},vqt=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new hme(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");$Ve.exports={cacheableResponse:vqt}});var Dz=G((Lzn,YVe)=>{"use strict";f();var gme=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};YVe.exports={RequestAbortedError:gme}});var e$e=G((Qzn,ZVe)=>{"use strict";f();var JVe=require("http"),XVe=require("https"),{Readable:bqt}=require("stream"),$y=FT()("helix-fetch:h1"),{RequestAbortedError:KVe}=Dz(),{decodeStream:Eqt}=Hy(),Iqt=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new XVe.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new JVe.Agent(n),r.httpAgent):void 0},"getAgent"),Tqt=s(t=>{t.h1={}},"setupContext"),wqt=s(async({h1:t})=>{t.httpAgent&&($y("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&($y("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),_qt=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?Eqt(n,c,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),Sqt=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?XVe:JVe,i=Iqt(t,e.protocol),o={...r,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{$y(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{$y(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{$y(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&($y(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new KVe),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new KVe);return}p.addEventListener("abort",m)}d=n(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&($y(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(_qt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&($y(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||($y(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof bqt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");ZVe.exports={request:Sqt,setupContext:Tqt,resetContext:wqt}});var i$e=G((qzn,n$e)=>{"use strict";f();var{connect:Rqt,constants:kqt}=require("http2"),{Readable:Bqt}=require("stream"),_s=FT()("helix-fetch:h2"),{RequestAbortedError:t$e}=Dz(),{decodeStream:Pqt}=Hy(),{NGHTTP2_CANCEL:B6}=kqt,Dqt=5*60*1e3,Nqt=5e3,Lqt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),Fqt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),_s(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),r$e=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?Pqt(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),Mqt=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=Nqt}}}=t,u=i[":path"],d=`${e}${u}`;_s(`received PUSH_PROMISE: ${d}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{n.close(B6)},"rejectPush")),n.on("push",(p,m)=>{_s(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(c,()=>{_s(`closing pushed stream #${n.id} after ${c} ms of inactivity`),n.close(B6)}),l&&l(d,i,r$e(p,n,r))}),n.on("aborted",()=>{_s(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{_s(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{_s(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),Qqt=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=Dqt,pushPromiseHandler:p,pushHandler:m}=c,h={...r},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let B=u[n];if(!B||B.closed||B.destroyed){let ae=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),H={...c,rejectUnauthorized:ae};v&&!v.inUse&&(H.createConnection=()=>(_s(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),B=Rqt(n,{...H,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(d,()=>{_s(`closing session ${n} after ${d} ms of inactivity`),B.close()}),B.once("connect",()=>{_s(`session ${n} established`),_s(`caching session ${n}`),u[n]=B}),B.on("localSettings",le=>{_s(`session ${n} localSettings: ${JSON.stringify(le)}`)}),B.on("remoteSettings",le=>{_s(`session ${n} remoteSettings: ${JSON.stringify(le)}`)}),B.once("close",()=>{_s(`session ${n} closed`),u[n]===B&&(_s(`discarding cached session ${n}`),delete u[n])}),B.once("error",le=>{_s(`session ${n} encountered error: ${le}`),u[n]===B&&(_s(`discarding cached session ${n}`),delete u[n])}),B.on("frameError",(le,ie,V)=>{_s(`session ${n} encountered frameError: type: ${le}, code: ${ie}, id: ${V}`)}),B.once("goaway",(le,ie,V)=>{_s(`session ${n} received GOAWAY frame: errorCode: ${le}, lastStreamID: ${ie}, opaqueData: ${V?V.toString():void 0}`)}),B.on("stream",(le,ie,V)=>{Mqt(t,n,E,le,ie,V)})}else v&&v.id!==B.socket.id&&!v.inUse&&(_s(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());_s(`${g} ${e.host}${l}`);let N,{signal:W}=h,ee=s(()=>{W.removeEventListener("abort",ee),k(new t$e),N&&N.close(B6)},"onAbortSignal");if(W){if(W.aborted){k(new t$e);return}W.addEventListener("abort",ee)}let me=s(ae=>{_s(`session ${n} encountered error during ${h.method} ${e.href}: ${ae}`),k(ae)},"onSessionError");B.once("error",me),N=B.request({":method":g,":path":l,...y}),N.once("response",ae=>{B.off("error",me),W&&W.removeEventListener("abort",ee),_(r$e(ae,N,h.decode,k))}),N.once("error",ae=>{B.off("error",me),W&&W.removeEventListener("abort",ee),N.rstCode!==B6&&(_s(`${h.method} ${e.href} failed with: ${ae.message}`),N.close(B6),k(ae))}),N.once("frameError",(ae,H,U)=>{B.off("error",me),_s(`encountered frameError during ${h.method} ${e.href}: type: ${ae}, code: ${H}, id: ${U}`)}),N.on("push",(ae,H)=>{_s(`received 'push' event: headers: ${JSON.stringify(ae)}, flags: ${H}`)}),b instanceof Bqt?b.pipe(N):(b&&N.write(b),N.end())})},"request");n$e.exports={request:Qqt,setupContext:Lqt,resetContext:Fqt}});var s$e=G((Hzn,o$e)=>{"use strict";f();var{EventEmitter:Oqt}=require("events"),Uqt=s(()=>{let t={},e=new Oqt;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");o$e.exports=Uqt});var a$e=G(($zn,qqt)=>{qqt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var f$e=G((zzn,d$e)=>{"use strict";f();var{Readable:Wqt}=require("stream"),Gqt=require("tls"),{types:{isAnyArrayBuffer:Hqt}}=require("util"),jqt=ome(),Ame=FT()("helix-fetch:core"),{RequestAbortedError:Nz}=Dz(),yme=e$e(),Lz=i$e(),Vqt=s$e(),{isPlainObject:$qt}=Hy(),{isFormData:zqt,FormDataSerializer:Yqt}=k6(),{version:Kqt}=a$e(),Cme="h2",xme="h2c",vme="http/1.0",OT="http/1.1",Jqt=100,Xqt=60*60*1e3,Zqt=[Cme,OT,vme],eWt=`helix-fetch/${Kqt}`,tWt={method:"GET",compress:!0,decode:!0},l$e=0,c$e=Vqt(),u$e=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Nz;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new Nz);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Nz||(Ame(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),n(u))},"onError");o=Gqt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),l$e+=1,o.id=l$e,o.secureConnecting=!1,Ame(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",c)}),"connectTLS"),rWt=s(async(t,e)=>{let r=await c$e.acquire(t.origin);try{return r||(r=await u$e(t,e)),r}finally{c$e.release(t.origin,r)}},"connect"),nWt=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=OT,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=xme,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await rWt(e,u);return i=d.alpnProtocol,i||(i=OT),t.alpnCache.set(n,i),{protocol:i,socket:d}},"determineProtocol"),iWt=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),oWt=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=l,u.servername=a.host;let d=await u$e(e,u);return{protocol:d.alpnProtocol||OT,socket:d}}return{protocol:l.alpnProtocol||OT,socket:l}},"getProtocolAndSocketFromFactory"),sWt=s(async(t,e,r)=>{let n=new URL(e),i={...tWt,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=iWt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(zqt(i.body)){let u=new Yqt(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":$qt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Hqt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Wqt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await oWt(t.socketFactory,n,i,t.alpnProtocols):await nWt(t,n,a);switch(Ame(`${n.host} -> ${l}`),l){case Cme:try{return await Lz.request(t,n,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case xme:return Lz.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),c?{...i,socket:c}:i);case vme:case OT:return yme.request(t,n,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),aWt=s(async t=>(t.alpnCache.clear(),Promise.all([yme.resetContext(t),Lz.resetContext(t)])),"resetContext"),lWt=s(t=>{let{options:{alpnProtocols:e=Zqt,alpnCacheTTL:r=Xqt,alpnCacheSize:n=Jqt,userAgent:i=eWt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new jqt({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,yme.setupContext(t),Lz.setupContext(t)},"setupContext");d$e.exports={request:sWt,setupContext:lWt,resetContext:aWt,RequestAbortedError:Nz,ALPN_HTTP2:Cme,ALPN_HTTP2C:xme,ALPN_HTTP1_1:OT,ALPN_HTTP1_0:vme}});var m$e=G((Jzn,p$e)=>{"use strict";f();var cWt=FT()("helix-fetch:core"),{request:uWt,setupContext:dWt,resetContext:fWt,RequestAbortedError:pWt,ALPN_HTTP2:mWt,ALPN_HTTP2C:hWt,ALPN_HTTP1_1:gWt,ALPN_HTTP1_0:AWt}=f$e(),bme=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},dWt(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:pWt,ALPN_HTTP2:mWt,ALPN_HTTP2C:hWt,ALPN_HTTP1_1:gWt,ALPN_HTTP1_0:AWt}}async request(e,r){return uWt(this,e,r)}setCA(e){this.options.ca=e}async reset(){return cWt("resetting context"),fWt(this)}};p$e.exports=new bme().api()});var C$e=G((eYn,y$e)=>{"use strict";f();var{EventEmitter:yWt}=require("events"),{Readable:P6}=require("stream"),Eme=FT()("helix-fetch"),CWt=ome(),{Body:xWt}=wz(),{Headers:_me}=g3(),{Request:UT}=QVe(),{Response:Tme}=fme(),{FetchBaseError:vWt,FetchError:D6,AbortError:Fz}=lme(),{AbortController:bWt,AbortSignal:EWt,TimeoutSignal:IWt}=cme(),TWt=jVe(),{cacheableResponse:wWt}=zVe(),{sizeof:_Wt}=Hy(),{isFormData:SWt}=k6(),{context:RWt,RequestAbortedError:kWt}=m$e(),h$e=["GET","HEAD"],BWt=500,PWt=100*1024*1024,Ime="push",g$e=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof UT&&typeof r>"u"?e:new UT(e,r),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let B=new Fz("The operation was aborted.");throw i.init.body instanceof P6&&i.init.body.destroy(B),B}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof P6)&&!SWt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(B){throw m instanceof P6&&m.destroy(B),B instanceof TypeError?B:B instanceof kWt?new Fz("The operation was aborted."):new D6(B.message,"system",B)}let g=s(()=>{l.removeEventListener("abort",g);let B=new Fz("The operation was aborted.");i.init.body instanceof P6&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:B}=E,N=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new D6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new D6(`maximum redirect reached at: ${i.url}`,"max-redirect");let W={headers:new _me(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof P6)throw l&&l.removeEventListener("abort",g),new D6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length")),l&&l.removeEventListener("abort",g),g$e(t,new UT(N,W))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new Tme(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),A$e=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!h$e.includes(e.method))return r;let n=new TWt(e,r,{shared:!1});if(n.storable()){let i=await wWt(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),DWt=s(async(t,e,r)=>{let n=new UT(e,r);if(t.options.maxCacheSize!==0&&h$e.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:l}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){l.headers=new _me(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await g$e(t,n);return n.cache!=="no-store"?A$e(t,n,o):o},"cachingFetch"),NWt=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),LWt=s(t=>new IWt(t),"timeoutSignal"),wme=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:PWt,i=BWt;n===0&&(n=1,i=1);let o=s(({response:l},c)=>_Wt(l),"sizeCalculation");this.cache=new CWt({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new yWt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new Tme(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=RWt(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:xWt,Headers:_me,Request:UT,Response:Tme,AbortController:bWt,AbortSignal:EWt,FetchBaseError:vWt,FetchError:D6,AbortError:Fz,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:NWt,timeoutSignal:LWt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return DWt(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Ime,e)}offPush(e){return this.eventEmitter.off(Ime,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Eme(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new UT(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Eme(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Eme(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await A$e(this,new UT(e,{headers:r}),n);this.eventEmitter.emit(Ime,e,i)}};y$e.exports=new wme().api()});var v$e=G((nYn,x$e)=>{"use strict";f();x$e.exports=C$e()});var pYe=G((Jli,fYe)=>{f();fYe.exports=dYe;dYe.sync=Hjt;var cYe=require("fs");function Gjt(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(Gjt,"checkPathExt");function uYe(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:Gjt(e,r)}s(uYe,"checkStat");function dYe(t,e,r){cYe.stat(t,function(n,i){r(n,n?!1:uYe(i,t,e))})}s(dYe,"isexe");function Hjt(t,e){return uYe(cYe.statSync(t),t,e)}s(Hjt,"sync")});var yYe=G((eci,AYe)=>{f();AYe.exports=hYe;hYe.sync=jjt;var mYe=require("fs");function hYe(t,e,r){mYe.stat(t,function(n,i){r(n,n?!1:gYe(i,e))})}s(hYe,"isexe");function jjt(t,e){return gYe(mYe.statSync(t),e)}s(jjt,"sync");function gYe(t,e){return t.isFile()&&Vjt(t,e)}s(gYe,"checkStat");function Vjt(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=r&u||r&c&&i===a||r&l&&n===o||r&d&&o===0;return p}s(Vjt,"checkMode")});var xYe=G((ici,CYe)=>{f();var nci=require("fs"),WY;process.platform==="win32"||global.TESTING_WINDOWS?WY=pYe():WY=yYe();CYe.exports=The;The.sync=$jt;function The(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){The(t,e||{},function(o,a){o?i(o):n(a)})})}WY(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(The,"isexe");function $jt(t,e){try{return WY.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s($jt,"sync")});var _Ye=G((aci,wYe)=>{f();var F3=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",vYe=require("path"),zjt=F3?";":":",bYe=xYe(),EYe=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),IYe=s((t,e)=>{let r=e.colon||zjt,n=t.match(/\//)||F3&&t.match(/\\/)?[""]:[...F3?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=F3?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=F3?i.split(r):[""];return F3&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),TYe=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=IYe(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===n.length)return e.all&&a.length?d(a):p(EYe(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=vYe.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];bYe(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return r?l(0).then(u=>r(null,u),r):l(0)},"which"),Yjt=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=IYe(t,e),o=[];for(let a=0;a<r.length;a++){let l=r[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=vYe.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=d+n[p];try{if(bYe.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw EYe(t)},"whichSync");wYe.exports=TYe;TYe.sync=Yjt});var RYe=G((uci,whe)=>{"use strict";f();var SYe=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");whe.exports=SYe;whe.exports.default=SYe});var DYe=G((pci,PYe)=>{"use strict";f();var kYe=require("path"),Kjt=_Ye(),Jjt=RYe();function BYe(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=Kjt.sync(t.command,{path:r[Jjt({env:r})],pathExt:e?kYe.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=kYe.resolve(i?t.options.cwd:"",a)),a}s(BYe,"resolveCommandAttempt");function Xjt(t){return BYe(t)||BYe(t,!0)}s(Xjt,"resolveCommand");PYe.exports=Xjt});var NYe=G((gci,She)=>{"use strict";f();var _he=/([()\][%!^"`<>&|;, *?])/g;function Zjt(t){return t=t.replace(_he,"^$1"),t}s(Zjt,"escapeCommand");function eVt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(_he,"^$1"),e&&(t=t.replace(_he,"^$1")),t}s(eVt,"escapeArgument");She.exports.command=Zjt;She.exports.argument=eVt});var FYe=G((Cci,LYe)=>{"use strict";f();LYe.exports=/^#!(.*)/});var QYe=G((vci,MYe)=>{"use strict";f();var tVt=FYe();MYe.exports=(t="")=>{let e=t.match(tVt);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var UYe=G((Eci,OYe)=>{"use strict";f();var Rhe=require("fs"),rVt=QYe();function nVt(t){let r=Buffer.alloc(150),n;try{n=Rhe.openSync(t,"r"),Rhe.readSync(n,r,0,150,0),Rhe.closeSync(n)}catch{}return rVt(r.toString())}s(nVt,"readShebang");OYe.exports=nVt});var HYe=G((wci,GYe)=>{"use strict";f();var iVt=require("path"),qYe=DYe(),WYe=NYe(),oVt=UYe(),sVt=process.platform==="win32",aVt=/\.(?:com|exe)$/i,lVt=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function cVt(t){t.file=qYe(t);let e=t.file&&oVt(t.file);return e?(t.args.unshift(t.file),t.command=e,qYe(t)):t.file}s(cVt,"detectShebang");function uVt(t){if(!sVt)return t;let e=cVt(t),r=!aVt.test(e);if(t.options.forceShell||r){let n=lVt.test(e);t.command=iVt.normalize(t.command),t.command=WYe.command(t.command),t.args=t.args.map(o=>WYe.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(uVt,"parseNonShell");function dVt(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:uVt(n)}s(dVt,"parse");GYe.exports=dVt});var $Ye=G((Rci,VYe)=>{"use strict";f();var khe=process.platform==="win32";function Bhe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(Bhe,"notFoundError");function fVt(t,e){if(!khe)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=jYe(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(fVt,"hookChildProcess");function jYe(t,e){return khe&&t===1&&!e.file?Bhe(e.original,"spawn"):null}s(jYe,"verifyENOENT");function pVt(t,e){return khe&&t===1&&!e.file?Bhe(e.original,"spawnSync"):null}s(pVt,"verifyENOENTSync");VYe.exports={hookChildProcess:fVt,verifyENOENT:jYe,verifyENOENTSync:pVt,notFoundError:Bhe}});var KYe=G((Pci,M3)=>{"use strict";f();var zYe=require("child_process"),Phe=HYe(),Dhe=$Ye();function YYe(t,e,r){let n=Phe(t,e,r),i=zYe.spawn(n.command,n.args,n.options);return Dhe.hookChildProcess(i,n),i}s(YYe,"spawn");function mVt(t,e,r){let n=Phe(t,e,r),i=zYe.spawnSync(n.command,n.args,n.options);return i.error=i.error||Dhe.verifyENOENTSync(i.status,n),i}s(mVt,"spawnSync");M3.exports=YYe;M3.exports.spawn=YYe;M3.exports.sync=mVt;M3.exports._parse=Phe;M3.exports._enoent=Dhe});var WVt={};u1(WVt,{getTokenizer:()=>Bo,getTokenizerAsync:()=>A2e,main:()=>LKe});module.exports=sXe(WVt);f();f();FAe().install();f();f();var AB="github.copilot",MAe="github-enterprise";f();f();f();f();f();f();var ls=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();var yf=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return H7(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var Cf="X-Copilot-RelatedPluginVersion-",yB=(O=>(O.Market="X-MSEdge-Market",O.CorpNet="X-FD-Corpnet",O.Build="X-VSCode-Build",O.ApplicationVersion="X-VSCode-AppVersion",O.TargetPopulation="X-VSCode-TargetPopulation",O.ClientId="X-MSEdge-ClientId",O.ExtensionName="X-VSCode-ExtensionName",O.ExtensionVersion="X-VSCode-ExtensionVersion",O.ExtensionRelease="X-VSCode-ExtensionRelease",O.Language="X-VSCode-Language",O.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",O.CopilotEngine="X-Copilot-Engine",O.CopilotOverrideEngine="X-Copilot-OverrideEngine",O.CopilotRepository="X-Copilot-Repository",O.CopilotFileType="X-Copilot-FileType",O.CopilotUserKind="X-Copilot-UserKind",O.CopilotDogfood="X-Copilot-Dogfood",O.CopilotCustomModel="X-Copilot-CustomModel",O.CopilotOrgs="X-Copilot-Orgs",O.CopilotCustomModelNames="X-Copilot-CustomModelNames",O.CopilotTrackingId="X-Copilot-CopilotTrackingId",O.CopilotClientVersion="X-Copilot-ClientVersion",O.CopilotRelatedPluginVersionCppTools=Cf+"msvscodecpptools",O.CopilotRelatedPluginVersionCMakeTools=Cf+"msvscodecmaketools",O.CopilotRelatedPluginVersionMakefileTools=Cf+"msvscodemakefiletools",O.CopilotRelatedPluginVersionCSharpDevKit=Cf+"msdotnettoolscsdevkit",O.CopilotRelatedPluginVersionPython=Cf+"mspythonpython",O.CopilotRelatedPluginVersionPylance=Cf+"mspythonvscodepylance",O.CopilotRelatedPluginVersionJavaPack=Cf+"vscjavavscodejavapack",O.CopilotRelatedPluginVersionTypescript=Cf+"vscodetypescriptlanguagefeatures",O.CopilotRelatedPluginVersionTypescriptNext=Cf+"msvscodevscodetypescriptnext",O.CopilotRelatedPluginVersionCSharp=Cf+"msdotnettoolscsharp",O))(yB||{});var jXe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},tI=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=jXe[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();var Tn=class{static{s(this,"Fetcher")}#e;set rejectUnauthorized(e){this.#e=e}get rejectUnauthorized(){return this.#e}},CB=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Fc(t){return!t||typeof t!="object"?!1:t instanceof CB||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Fc,"isAbortError");var D_=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},rg=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},VXe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function xB(t,e=!0){return t instanceof Error?e&&"cause"in t&&xB(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof D_||t instanceof rg||t?.message?.startsWith("net::")||VXe.has(t.code??""):!1}s(xB,"isNetworkError");var yx=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new D_(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new D_(`Response body truncated: actualLength=${o}`,"Truncated"):new D_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function rI(t,e,r,n,i,o,a,l,c){let u={...l,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Ps).sessionId,"VScode-MachineId":t.get(Ps).machineId,...t0(t),"X-GitHub-Api-Version":xf};n&&(u["OpenAI-Intent"]=n);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(Tn);if(a){let h=p.makeAbortController();a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",rn.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if($Xe(h))return Bt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(rI,"postRequest");function $Xe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s($Xe,"isInterruptedNetworkError");f();f();var ac=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,l=r.enterprise_list,c=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=n,this.ftFlag=i)})}};var RL=je(vx()),kL=je(require("os"));var zXe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function YXe(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(zXe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(YXe,"buildExceptionDetail");function CX(t,e){let r=t.get(un),n=r.getEditorInfo(),i=t.get(ac),o={"#editor":n.devName??n.name,"#editor_version":ng({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":ng(r.getEditorPluginInfo()),"#session_id":t.get(Ps).sessionId,"#machine_id":t.get(Ps).machineId,"#architecture":kL.arch(),"#os_platform":kL.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(CX,"buildContext");function V1e(t,e){let r=t.get(zi),n=t.get(un).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:CX(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=YXe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,RL.SHA256)(RL.enc.Utf16.parse(u.join(`
`))).toString()),o}s(V1e,"buildPayload");f();var bB=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var z1e=je(vx());var nn=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},EB=class extends nn{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}};var ig=class{constructor(e=5){this.perTenMinutes=e;this.cache=new nn}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var vf=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:K1e(r,n),verboseLogging:JXe(r,n),testMode:e,simulation:KXe(n)})}};function tm(t){return t.get(vf).flags.testMode}s(tm,"isRunningInTest");function N_(t){return tm(t)}s(N_,"shouldFailForDebugPurposes");function IB(t){return t.get(vf).flags.debug}s(IB,"isDebugEnabled");function Y1e(t){return t.get(vf).flags.verboseLogging}s(Y1e,"isVerboseLoggingEnabled");function K1e(t,e){return t.includes("--debug")||xX(e,"DEBUG")}s(K1e,"determineDebugFlag");function KXe(t){return xX(t,"SIMULATION")}s(KXe,"determineSimulationFlag");function PL(t){return t.get(vf).flags.simulation}s(PL,"isRunningInSimulation");function JXe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||xX(e,"VERBOSE")||K1e(t,e)}s(JXe,"determineVerboseLoggingEnabled");function xX(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(xX,"determineEnvFlagEnabled");f();var va=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var Z1e=require("os"),eye=je(require("path"));function TB(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(TB,"redactPaths");var XXe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),ZXe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function bX(t){if(XXe.has(t))return t;for(let e of ZXe)if(e.test(t))return t;return TB(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(bX,"redactMessage");function DL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(DL,"escapeForRegExp");var eZe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+DL((0,Z1e.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function vX(t){return t.replace(eZe,"~")}s(vX,"redactHomeDir");var tye="[\\\\/]?([^:)]*)(?=:\\d)",J1e=new RegExp(DL(eye.sep),"g"),X1e=new RegExp(DL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+tye,"gi");function EX(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if(X1e.test(l))i.stack+=`
${TB(l.replace(X1e,(c,u)=>"./"+u.replace(J1e,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${TB(l)}`;else{let c=!1;for(let{prefix:u,path:d}of n){let p=new RegExp(DL(d.replace(/[\\/]$/,""))+tye,"gi");if(p.test(l)){i.stack+=`
${TB(l.replace(p,(m,h)=>u+h.replace(J1e,"/")))}`,c=!0;break}}if(c)continue;r?i.stack+=`
${vX(l)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=vX(o));return t.cause instanceof Error&&(i.cause=EX(t.cause,e,r,n)),i}s(EX,"cloneError");function rye(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(rye,"errorMessageWithoutPath");function nye(t,e){return EX(t,s(function(n){return vX(rye(n))},"prepareMessage"),!0,e)}s(nye,"prepareErrorForRestrictedTelemetry");function iye(t,e,r=!1){return EX(t,s(function(i){if(r)return bX(rye(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=TB(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(iye,"redactError");f();f();var Mc={};u1(Mc,{HasPropertyKey:()=>NL,IsArray:()=>ba,IsAsyncIterator:()=>IX,IsBigInt:()=>wB,IsBoolean:()=>p1,IsDate:()=>nI,IsFunction:()=>TX,IsIterator:()=>wX,IsNull:()=>_X,IsNumber:()=>r0,IsObject:()=>wo,IsRegExp:()=>_B,IsString:()=>Uo,IsSymbol:()=>SX,IsUint8Array:()=>m1,IsUndefined:()=>Ea});f();function NL(t,e){return e in t}s(NL,"HasPropertyKey");function IX(t){return wo(t)&&!ba(t)&&!m1(t)&&Symbol.asyncIterator in t}s(IX,"IsAsyncIterator");function ba(t){return Array.isArray(t)}s(ba,"IsArray");function wB(t){return typeof t=="bigint"}s(wB,"IsBigInt");function p1(t){return typeof t=="boolean"}s(p1,"IsBoolean");function nI(t){return t instanceof globalThis.Date}s(nI,"IsDate");function TX(t){return typeof t=="function"}s(TX,"IsFunction");function wX(t){return wo(t)&&!ba(t)&&!m1(t)&&Symbol.iterator in t}s(wX,"IsIterator");function _X(t){return t===null}s(_X,"IsNull");function r0(t){return typeof t=="number"}s(r0,"IsNumber");function wo(t){return typeof t=="object"&&t!==null}s(wo,"IsObject");function _B(t){return t instanceof globalThis.RegExp}s(_B,"IsRegExp");function Uo(t){return typeof t=="string"}s(Uo,"IsString");function SX(t){return typeof t=="symbol"}s(SX,"IsSymbol");function m1(t){return t instanceof globalThis.Uint8Array}s(m1,"IsUint8Array");function Ea(t){return t===void 0}s(Ea,"IsUndefined");function tZe(t){return t.map(e=>LL(e))}s(tZe,"ArrayType");function rZe(t){return new Date(t.getTime())}s(rZe,"DateType");function nZe(t){return new Uint8Array(t)}s(nZe,"Uint8ArrayType");function iZe(t){return new RegExp(t.source,t.flags)}s(iZe,"RegExpType");function oZe(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=LL(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=LL(t[r]);return e}s(oZe,"ObjectType");function LL(t){return ba(t)?tZe(t):nI(t)?rZe(t):m1(t)?nZe(t):_B(t)?iZe(t):wo(t)?oZe(t):t}s(LL,"Visit");function cs(t){return LL(t)}s(cs,"Clone");function L_(t,e){return e===void 0?cs(t):cs({...e,...t})}s(L_,"CloneType");f();f();f();function FL(t){return ci(t)&&globalThis.Symbol.asyncIterator in t}s(FL,"IsAsyncIterator");function ML(t){return ci(t)&&globalThis.Symbol.iterator in t}s(ML,"IsIterator");function RX(t){return ci(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(RX,"IsStandardObject");function QL(t){return t instanceof globalThis.Promise}s(QL,"IsPromise");function xu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(xu,"IsDate");function oye(t){return t instanceof globalThis.Map}s(oye,"IsMap");function sye(t){return t instanceof globalThis.Set}s(sye,"IsSet");function bf(t){return globalThis.ArrayBuffer.isView(t)}s(bf,"IsTypedArray");function F_(t){return t instanceof globalThis.Uint8Array}s(F_,"IsUint8Array");function mn(t,e){return e in t}s(mn,"HasPropertyKey");function ci(t){return t!==null&&typeof t=="object"}s(ci,"IsObject");function hn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(hn,"IsArray");function us(t){return t===void 0}s(us,"IsUndefined");function h1(t){return t===null}s(h1,"IsNull");function og(t){return typeof t=="boolean"}s(og,"IsBoolean");function Ur(t){return typeof t=="number"}s(Ur,"IsNumber");function OL(t){return globalThis.Number.isInteger(t)}s(OL,"IsInteger");function lc(t){return typeof t=="bigint"}s(lc,"IsBigInt");function Ui(t){return typeof t=="string"}s(Ui,"IsString");function bx(t){return typeof t=="function"}s(bx,"IsFunction");function g1(t){return typeof t=="symbol"}s(g1,"IsSymbol");function n0(t){return lc(t)||og(t)||h1(t)||Ur(t)||Ui(t)||g1(t)||us(t)}s(n0,"IsValueType");var Ko;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let l=ci(a);return t.AllowArrayObject?l:l&&!hn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Ur(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=us(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Ko||(Ko={}));f();function sZe(t){return globalThis.Object.freeze(t).map(e=>SB(e))}s(sZe,"ImmutableArray");function aZe(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=SB(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=SB(t[r]);return globalThis.Object.freeze(e)}s(aZe,"ImmutableObject");function SB(t){return ba(t)?sZe(t):nI(t)?t:m1(t)?t:_B(t)?t:wo(t)?aZe(t):t}s(SB,"Immutable");function rt(t,e){let r=e!==void 0?{...e,...t}:t;switch(Ko.InstanceMode){case"freeze":return SB(r);case"clone":return cs(r);default:return r}}s(rt,"CreateType");f();var gn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ds=Symbol.for("TypeBox.Transform"),rm=Symbol.for("TypeBox.Readonly"),cc=Symbol.for("TypeBox.Optional"),Ef=Symbol.for("TypeBox.Hint"),Ze=Symbol.for("TypeBox.Kind");function M_(t){return wo(t)&&t[rm]==="Readonly"}s(M_,"IsReadonly");function id(t){return wo(t)&&t[cc]==="Optional"}s(id,"IsOptional");function kX(t){return Di(t,"Any")}s(kX,"IsAny");function BX(t){return Di(t,"Argument")}s(BX,"IsArgument");function nm(t){return Di(t,"Array")}s(nm,"IsArray");function iI(t){return Di(t,"AsyncIterator")}s(iI,"IsAsyncIterator");function oI(t){return Di(t,"BigInt")}s(oI,"IsBigInt");function A1(t){return Di(t,"Boolean")}s(A1,"IsBoolean");function im(t){return Di(t,"Computed")}s(im,"IsComputed");function om(t){return Di(t,"Constructor")}s(om,"IsConstructor");function lZe(t){return Di(t,"Date")}s(lZe,"IsDate");function sm(t){return Di(t,"Function")}s(sm,"IsFunction");function am(t){return Di(t,"Integer")}s(am,"IsInteger");function $s(t){return Di(t,"Intersect")}s($s,"IsIntersect");function sI(t){return Di(t,"Iterator")}s(sI,"IsIterator");function Di(t,e){return wo(t)&&Ze in t&&t[Ze]===e}s(Di,"IsKindOf");function UL(t){return p1(t)||r0(t)||Uo(t)}s(UL,"IsLiteralValue");function i0(t){return Di(t,"Literal")}s(i0,"IsLiteral");function o0(t){return Di(t,"MappedKey")}s(o0,"IsMappedKey");function ds(t){return Di(t,"MappedResult")}s(ds,"IsMappedResult");function Ex(t){return Di(t,"Never")}s(Ex,"IsNever");function cZe(t){return Di(t,"Not")}s(cZe,"IsNot");function RB(t){return Di(t,"Null")}s(RB,"IsNull");function lm(t){return Di(t,"Number")}s(lm,"IsNumber");function Ia(t){return Di(t,"Object")}s(Ia,"IsObject");function aI(t){return Di(t,"Promise")}s(aI,"IsPromise");function lI(t){return Di(t,"Record")}s(lI,"IsRecord");function oa(t){return Di(t,"Ref")}s(oa,"IsRef");function PX(t){return Di(t,"RegExp")}s(PX,"IsRegExp");function y1(t){return Di(t,"String")}s(y1,"IsString");function kB(t){return Di(t,"Symbol")}s(kB,"IsSymbol");function s0(t){return Di(t,"TemplateLiteral")}s(s0,"IsTemplateLiteral");function uZe(t){return Di(t,"This")}s(uZe,"IsThis");function so(t){return wo(t)&&Ds in t}s(so,"IsTransform");function a0(t){return Di(t,"Tuple")}s(a0,"IsTuple");function C1(t){return Di(t,"Undefined")}s(C1,"IsUndefined");function qi(t){return Di(t,"Union")}s(qi,"IsUnion");function dZe(t){return Di(t,"Uint8Array")}s(dZe,"IsUint8Array");function fZe(t){return Di(t,"Unknown")}s(fZe,"IsUnknown");function pZe(t){return Di(t,"Unsafe")}s(pZe,"IsUnsafe");function mZe(t){return Di(t,"Void")}s(mZe,"IsVoid");function Ix(t){return wo(t)&&Ze in t&&Uo(t[Ze])}s(Ix,"IsKind");function Ns(t){return kX(t)||BX(t)||nm(t)||A1(t)||oI(t)||iI(t)||im(t)||om(t)||lZe(t)||sm(t)||am(t)||$s(t)||sI(t)||i0(t)||o0(t)||ds(t)||Ex(t)||cZe(t)||RB(t)||lm(t)||Ia(t)||aI(t)||lI(t)||oa(t)||PX(t)||y1(t)||kB(t)||s0(t)||uZe(t)||a0(t)||C1(t)||qi(t)||dZe(t)||fZe(t)||pZe(t)||mZe(t)||Ix(t)}s(Ns,"IsSchema");var Pe={};u1(Pe,{IsAny:()=>uye,IsArgument:()=>dye,IsArray:()=>fye,IsAsyncIterator:()=>pye,IsBigInt:()=>mye,IsBoolean:()=>hye,IsComputed:()=>gye,IsConstructor:()=>Aye,IsDate:()=>yye,IsFunction:()=>Cye,IsImport:()=>xZe,IsInteger:()=>xye,IsIntersect:()=>vye,IsIterator:()=>bye,IsKind:()=>zye,IsKindOf:()=>gi,IsLiteral:()=>PB,IsLiteralBoolean:()=>vZe,IsLiteralNumber:()=>Iye,IsLiteralString:()=>Eye,IsLiteralValue:()=>Tye,IsMappedKey:()=>wye,IsMappedResult:()=>_ye,IsNever:()=>Sye,IsNot:()=>Rye,IsNull:()=>kye,IsNumber:()=>Bye,IsObject:()=>Pye,IsOptional:()=>CZe,IsPromise:()=>Dye,IsProperties:()=>qL,IsReadonly:()=>yZe,IsRecord:()=>Nye,IsRecursive:()=>bZe,IsRef:()=>Lye,IsRegExp:()=>Fye,IsSchema:()=>ps,IsString:()=>Mye,IsSymbol:()=>Qye,IsTemplateLiteral:()=>Oye,IsThis:()=>Uye,IsTransform:()=>qye,IsTuple:()=>Wye,IsUint8Array:()=>Hye,IsUndefined:()=>Gye,IsUnion:()=>FX,IsUnionLiteral:()=>EZe,IsUnknown:()=>jye,IsUnsafe:()=>Vye,IsVoid:()=>$ye,TypeGuardUnknownTypeError:()=>DX});f();var DX=class extends gn{static{s(this,"TypeGuardUnknownTypeError")}},hZe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function aye(t){try{return new RegExp(t),!0}catch{return!1}}s(aye,"IsPattern");function NX(t){if(!Uo(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(NX,"IsControlCharacterFree");function lye(t){return LX(t)||ps(t)}s(lye,"IsAdditionalProperties");function BB(t){return Ea(t)||wB(t)}s(BB,"IsOptionalBigInt");function qo(t){return Ea(t)||r0(t)}s(qo,"IsOptionalNumber");function LX(t){return Ea(t)||p1(t)}s(LX,"IsOptionalBoolean");function _o(t){return Ea(t)||Uo(t)}s(_o,"IsOptionalString");function gZe(t){return Ea(t)||Uo(t)&&NX(t)&&aye(t)}s(gZe,"IsOptionalPattern");function AZe(t){return Ea(t)||Uo(t)&&NX(t)}s(AZe,"IsOptionalFormat");function cye(t){return Ea(t)||ps(t)}s(cye,"IsOptionalSchema");function yZe(t){return wo(t)&&t[rm]==="Readonly"}s(yZe,"IsReadonly");function CZe(t){return wo(t)&&t[cc]==="Optional"}s(CZe,"IsOptional");function uye(t){return gi(t,"Any")&&_o(t.$id)}s(uye,"IsAny");function dye(t){return gi(t,"Argument")&&r0(t.index)}s(dye,"IsArgument");function fye(t){return gi(t,"Array")&&t.type==="array"&&_o(t.$id)&&ps(t.items)&&qo(t.minItems)&&qo(t.maxItems)&&LX(t.uniqueItems)&&cye(t.contains)&&qo(t.minContains)&&qo(t.maxContains)}s(fye,"IsArray");function pye(t){return gi(t,"AsyncIterator")&&t.type==="AsyncIterator"&&_o(t.$id)&&ps(t.items)}s(pye,"IsAsyncIterator");function mye(t){return gi(t,"BigInt")&&t.type==="bigint"&&_o(t.$id)&&BB(t.exclusiveMaximum)&&BB(t.exclusiveMinimum)&&BB(t.maximum)&&BB(t.minimum)&&BB(t.multipleOf)}s(mye,"IsBigInt");function hye(t){return gi(t,"Boolean")&&t.type==="boolean"&&_o(t.$id)}s(hye,"IsBoolean");function gye(t){return gi(t,"Computed")&&Uo(t.target)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))}s(gye,"IsComputed");function Aye(t){return gi(t,"Constructor")&&t.type==="Constructor"&&_o(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(Aye,"IsConstructor");function yye(t){return gi(t,"Date")&&t.type==="Date"&&_o(t.$id)&&qo(t.exclusiveMaximumTimestamp)&&qo(t.exclusiveMinimumTimestamp)&&qo(t.maximumTimestamp)&&qo(t.minimumTimestamp)&&qo(t.multipleOfTimestamp)}s(yye,"IsDate");function Cye(t){return gi(t,"Function")&&t.type==="Function"&&_o(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(Cye,"IsFunction");function xZe(t){return gi(t,"Import")&&NL(t,"$defs")&&wo(t.$defs)&&qL(t.$defs)&&NL(t,"$ref")&&Uo(t.$ref)&&t.$ref in t.$defs}s(xZe,"IsImport");function xye(t){return gi(t,"Integer")&&t.type==="integer"&&_o(t.$id)&&qo(t.exclusiveMaximum)&&qo(t.exclusiveMinimum)&&qo(t.maximum)&&qo(t.minimum)&&qo(t.multipleOf)}s(xye,"IsInteger");function qL(t){return wo(t)&&Object.entries(t).every(([e,r])=>NX(e)&&ps(r))}s(qL,"IsProperties");function vye(t){return gi(t,"Intersect")&&!(Uo(t.type)&&t.type!=="object")&&ba(t.allOf)&&t.allOf.every(e=>ps(e)&&!qye(e))&&_o(t.type)&&(LX(t.unevaluatedProperties)||cye(t.unevaluatedProperties))&&_o(t.$id)}s(vye,"IsIntersect");function bye(t){return gi(t,"Iterator")&&t.type==="Iterator"&&_o(t.$id)&&ps(t.items)}s(bye,"IsIterator");function gi(t,e){return wo(t)&&Ze in t&&t[Ze]===e}s(gi,"IsKindOf");function Eye(t){return PB(t)&&Uo(t.const)}s(Eye,"IsLiteralString");function Iye(t){return PB(t)&&r0(t.const)}s(Iye,"IsLiteralNumber");function vZe(t){return PB(t)&&p1(t.const)}s(vZe,"IsLiteralBoolean");function PB(t){return gi(t,"Literal")&&_o(t.$id)&&Tye(t.const)}s(PB,"IsLiteral");function Tye(t){return p1(t)||r0(t)||Uo(t)}s(Tye,"IsLiteralValue");function wye(t){return gi(t,"MappedKey")&&ba(t.keys)&&t.keys.every(e=>r0(e)||Uo(e))}s(wye,"IsMappedKey");function _ye(t){return gi(t,"MappedResult")&&qL(t.properties)}s(_ye,"IsMappedResult");function Sye(t){return gi(t,"Never")&&wo(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(Sye,"IsNever");function Rye(t){return gi(t,"Not")&&ps(t.not)}s(Rye,"IsNot");function kye(t){return gi(t,"Null")&&t.type==="null"&&_o(t.$id)}s(kye,"IsNull");function Bye(t){return gi(t,"Number")&&t.type==="number"&&_o(t.$id)&&qo(t.exclusiveMaximum)&&qo(t.exclusiveMinimum)&&qo(t.maximum)&&qo(t.minimum)&&qo(t.multipleOf)}s(Bye,"IsNumber");function Pye(t){return gi(t,"Object")&&t.type==="object"&&_o(t.$id)&&qL(t.properties)&&lye(t.additionalProperties)&&qo(t.minProperties)&&qo(t.maxProperties)}s(Pye,"IsObject");function Dye(t){return gi(t,"Promise")&&t.type==="Promise"&&_o(t.$id)&&ps(t.item)}s(Dye,"IsPromise");function Nye(t){return gi(t,"Record")&&t.type==="object"&&_o(t.$id)&&lye(t.additionalProperties)&&wo(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&aye(r[0])&&wo(e.patternProperties)&&ps(e.patternProperties[r[0]])})(t)}s(Nye,"IsRecord");function bZe(t){return wo(t)&&Ef in t&&t[Ef]==="Recursive"}s(bZe,"IsRecursive");function Lye(t){return gi(t,"Ref")&&_o(t.$id)&&Uo(t.$ref)}s(Lye,"IsRef");function Fye(t){return gi(t,"RegExp")&&_o(t.$id)&&Uo(t.source)&&Uo(t.flags)&&qo(t.maxLength)&&qo(t.minLength)}s(Fye,"IsRegExp");function Mye(t){return gi(t,"String")&&t.type==="string"&&_o(t.$id)&&qo(t.minLength)&&qo(t.maxLength)&&gZe(t.pattern)&&AZe(t.format)}s(Mye,"IsString");function Qye(t){return gi(t,"Symbol")&&t.type==="symbol"&&_o(t.$id)}s(Qye,"IsSymbol");function Oye(t){return gi(t,"TemplateLiteral")&&t.type==="string"&&Uo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Oye,"IsTemplateLiteral");function Uye(t){return gi(t,"This")&&_o(t.$id)&&Uo(t.$ref)}s(Uye,"IsThis");function qye(t){return wo(t)&&Ds in t}s(qye,"IsTransform");function Wye(t){return gi(t,"Tuple")&&t.type==="array"&&_o(t.$id)&&r0(t.minItems)&&r0(t.maxItems)&&t.minItems===t.maxItems&&(Ea(t.items)&&Ea(t.additionalItems)&&t.minItems===0||ba(t.items)&&t.items.every(e=>ps(e)))}s(Wye,"IsTuple");function Gye(t){return gi(t,"Undefined")&&t.type==="undefined"&&_o(t.$id)}s(Gye,"IsUndefined");function EZe(t){return FX(t)&&t.anyOf.every(e=>Eye(e)||Iye(e))}s(EZe,"IsUnionLiteral");function FX(t){return gi(t,"Union")&&_o(t.$id)&&wo(t)&&ba(t.anyOf)&&t.anyOf.every(e=>ps(e))}s(FX,"IsUnion");function Hye(t){return gi(t,"Uint8Array")&&t.type==="Uint8Array"&&_o(t.$id)&&qo(t.minByteLength)&&qo(t.maxByteLength)}s(Hye,"IsUint8Array");function jye(t){return gi(t,"Unknown")&&_o(t.$id)}s(jye,"IsUnknown");function Vye(t){return gi(t,"Unsafe")}s(Vye,"IsUnsafe");function $ye(t){return gi(t,"Void")&&t.type==="void"&&_o(t.$id)}s($ye,"IsVoid");function zye(t){return wo(t)&&Ze in t&&Uo(t[Ze])&&!hZe.includes(t[Ze])}s(zye,"IsKind");function ps(t){return wo(t)&&(uye(t)||dye(t)||fye(t)||hye(t)||mye(t)||pye(t)||gye(t)||Aye(t)||yye(t)||Cye(t)||xye(t)||vye(t)||bye(t)||PB(t)||wye(t)||_ye(t)||Sye(t)||Rye(t)||kye(t)||Bye(t)||Pye(t)||Dye(t)||Nye(t)||Lye(t)||Fye(t)||Mye(t)||Qye(t)||Oye(t)||Uye(t)||Wye(t)||Gye(t)||FX(t)||Hye(t)||jye(t)||Vye(t)||$ye(t)||zye(t))}s(ps,"IsSchema");f();var MX="(true|false)",DB="(0|[1-9][0-9]*)",QX="(.*)",IZe="(?!.*)",EKt=`^${MX}$`,sg=`^${DB}$`,ag=`^${QX}$`,Yye=`^${IZe}$`;f();var cm={};u1(cm,{Clear:()=>wZe,Delete:()=>_Ze,Entries:()=>TZe,Get:()=>kZe,Has:()=>SZe,Set:()=>RZe});f();var Q_=new Map;function TZe(){return new Map(Q_)}s(TZe,"Entries");function wZe(){return Q_.clear()}s(wZe,"Clear");function _Ze(t){return Q_.delete(t)}s(_Ze,"Delete");function SZe(t){return Q_.has(t)}s(SZe,"Has");function RZe(t,e){Q_.set(t,e)}s(RZe,"Set");function kZe(t){return Q_.get(t)}s(kZe,"Get");var vu={};u1(vu,{Clear:()=>PZe,Delete:()=>DZe,Entries:()=>BZe,Get:()=>FZe,Has:()=>NZe,Set:()=>LZe});f();var O_=new Map;function BZe(){return new Map(O_)}s(BZe,"Entries");function PZe(){return O_.clear()}s(PZe,"Clear");function DZe(t){return O_.delete(t)}s(DZe,"Delete");function NZe(t){return O_.has(t)}s(NZe,"Has");function LZe(t,e){O_.set(t,e)}s(LZe,"Set");function FZe(t){return O_.get(t)}s(FZe,"Get");f();function Kye(t,e){return t.includes(e)}s(Kye,"SetIncludes");function Jye(t){return[...new Set(t)]}s(Jye,"SetDistinct");function MZe(t,e){return t.filter(r=>e.includes(r))}s(MZe,"SetIntersect");function QZe(t,e){return t.reduce((r,n)=>MZe(r,n),e)}s(QZe,"SetIntersectManyResolve");function Xye(t){return t.length===1?t[0]:t.length>1?QZe(t.slice(1),t[0]):[]}s(Xye,"SetIntersectMany");function Zye(t){let e=[];for(let r of t)e.push(...r);return e}s(Zye,"SetUnionMany");f();function Tx(t){return rt({[Ze]:"Any"},t)}s(Tx,"Any");f();function U_(t,e){return rt({[Ze]:"Array",type:"array",items:t},e)}s(U_,"Array");f();function eCe(t){return rt({[Ze]:"Argument",index:t})}s(eCe,"Argument");f();function q_(t,e){return rt({[Ze]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(q_,"AsyncIterator");f();f();function Jo(t,e,r){return rt({[Ze]:"Computed",target:t,parameters:e},r)}s(Jo,"Computed");f();f();function OZe(t,e){let{[e]:r,...n}=t;return n}s(OZe,"DiscardKey");function zs(t,e){return e.reduce((r,n)=>OZe(r,n),t)}s(zs,"Discard");f();function ri(t){return rt({[Ze]:"Never",not:{}},t)}s(ri,"Never");f();f();function Yi(t){return rt({[Ze]:"MappedResult",properties:t})}s(Yi,"MappedResult");f();f();function W_(t,e,r){return rt({[Ze]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(W_,"Constructor");f();function lg(t,e,r){return rt({[Ze]:"Function",type:"Function",parameters:t,returns:e},r)}s(lg,"Function");f();f();f();f();function NB(t,e){return rt({[Ze]:"Union",anyOf:t},e)}s(NB,"UnionCreate");function UZe(t){return t.some(e=>id(e))}s(UZe,"IsUnionOptional");function tCe(t){return t.map(e=>id(e)?qZe(e):e)}s(tCe,"RemoveOptionalFromRest");function qZe(t){return zs(t,[cc])}s(qZe,"RemoveOptionalFromType");function WZe(t,e){return UZe(t)?Qc(NB(tCe(t),e)):NB(tCe(t),e)}s(WZe,"ResolveUnion");function cg(t,e){return t.length===1?rt(t[0],e):t.length===0?ri(e):WZe(t,e)}s(cg,"UnionEvaluated");f();function ao(t,e){return t.length===0?ri(e):t.length===1?rt(t[0],e):NB(t,e)}s(ao,"Union");f();f();f();var WL=class extends gn{static{s(this,"TemplateLiteralParserError")}};function GZe(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(GZe,"Unescape");function OX(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(OX,"IsNonEscaped");function v1(t,e){return OX(t,e,"(")}s(v1,"IsOpenParen");function LB(t,e){return OX(t,e,")")}s(LB,"IsCloseParen");function rCe(t,e){return OX(t,e,"|")}s(rCe,"IsSeparator");function HZe(t){if(!(v1(t,0)&&LB(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(v1(t,r)&&(e+=1),LB(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(HZe,"IsGroup");function jZe(t){return t.slice(1,t.length-1)}s(jZe,"InGroup");function VZe(t){let e=0;for(let r=0;r<t.length;r++)if(v1(t,r)&&(e+=1),LB(t,r)&&(e-=1),rCe(t,r)&&e===0)return!0;return!1}s(VZe,"IsPrecedenceOr");function $Ze(t){for(let e=0;e<t.length;e++)if(v1(t,e))return!0;return!1}s($Ze,"IsPrecedenceAnd");function zZe(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(v1(t,o)&&(e+=1),LB(t,o)&&(e-=1),rCe(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(G_(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(G_(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(zZe,"Or");function YZe(t){function e(i,o){if(!v1(i,o))throw new WL("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(v1(i,l)&&(a+=1),LB(i,l)&&(a-=1),a===0)return[o,l];throw new WL("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(v1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(v1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);n.push(G_(l)),i=a}else{let[o,a]=r(t,i),l=t.slice(o,a);l.length>0&&n.push(G_(l)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(YZe,"And");function G_(t){return HZe(t)?G_(jZe(t)):VZe(t)?zZe(t):$Ze(t)?YZe(t):{type:"const",const:GZe(t)}}s(G_,"TemplateLiteralParse");function H_(t){return G_(t.slice(1,t.length-1))}s(H_,"TemplateLiteralParseExact");var UX=class extends gn{static{s(this,"TemplateLiteralFiniteError")}};function KZe(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(KZe,"IsNumberExpression");function JZe(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(JZe,"IsBooleanExpression");function XZe(t){return t.type==="const"&&t.const===".*"}s(XZe,"IsStringExpression");function cI(t){return KZe(t)||XZe(t)?!1:JZe(t)?!0:t.type==="and"?t.expr.every(e=>cI(e)):t.type==="or"?t.expr.every(e=>cI(e)):t.type==="const"?!0:(()=>{throw new UX("Unknown expression type")})()}s(cI,"IsTemplateLiteralExpressionFinite");function GL(t){let e=H_(t.pattern);return cI(e)}s(GL,"IsTemplateLiteralFinite");f();var qX=class extends gn{static{s(this,"TemplateLiteralGenerateError")}};function*nCe(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of nCe(t.slice(1)))yield`${e}${r}`}s(nCe,"GenerateReduce");function*ZZe(t){return yield*nCe(t.expr.map(e=>[...FB(e)]))}s(ZZe,"GenerateAnd");function*eet(t){for(let e of t.expr)yield*FB(e)}s(eet,"GenerateOr");function*tet(t){return yield t.const}s(tet,"GenerateConst");function*FB(t){return t.type==="and"?yield*ZZe(t):t.type==="or"?yield*eet(t):t.type==="const"?yield*tet(t):(()=>{throw new qX("Unknown expression")})()}s(FB,"TemplateLiteralExpressionGenerate");function j_(t){let e=H_(t.pattern);return cI(e)?[...FB(e)]:[]}s(j_,"TemplateLiteralGenerate");f();f();function Ni(t,e){return rt({[Ze]:"Literal",const:t,type:typeof t},e)}s(Ni,"Literal");f();function HL(t){return rt({[Ze]:"Boolean",type:"boolean"},t)}s(HL,"Boolean");f();function V_(t){return rt({[Ze]:"BigInt",type:"bigint"},t)}s(V_,"BigInt");f();function If(t){return rt({[Ze]:"Number",type:"number"},t)}s(If,"Number");f();function bu(t){return rt({[Ze]:"String",type:"string"},t)}s(bu,"String");function*ret(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield HL():e==="number"?yield If():e==="bigint"?yield V_():e==="string"?yield bu():yield(()=>{let r=e.split("|").map(n=>Ni(n.trim()));return r.length===0?ri():r.length===1?r[0]:cg(r)})()}s(ret,"FromUnion");function*net(t){if(t[1]!=="{"){let e=Ni("$"),r=WX(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=ret(t.slice(2,e)),n=WX(t.slice(e+1));return yield*[...r,...n]}yield Ni(t)}s(net,"FromTerminal");function*WX(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=Ni(t.slice(0,e)),n=net(t.slice(e));return yield*[r,...n]}yield Ni(t)}s(WX,"FromSyntax");function iCe(t){return[...WX(t)]}s(iCe,"TemplateLiteralSyntax");f();var GX=class extends gn{static{s(this,"TemplateLiteralPatternError")}};function iet(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(iet,"Escape");function oCe(t,e){return s0(t)?t.pattern.slice(1,t.pattern.length-1):qi(t)?`(${t.anyOf.map(r=>oCe(r,e)).join("|")})`:lm(t)?`${e}${DB}`:am(t)?`${e}${DB}`:oI(t)?`${e}${DB}`:y1(t)?`${e}${QX}`:i0(t)?`${e}${iet(t.const.toString())}`:A1(t)?`${e}${MX}`:(()=>{throw new GX(`Unexpected Kind '${t[Ze]}'`)})()}s(oCe,"Visit");function HX(t){return`^${t.map(e=>oCe(e,"")).join("")}$`}s(HX,"TemplateLiteralPattern");f();function uI(t){let r=j_(t).map(n=>Ni(n));return cg(r)}s(uI,"TemplateLiteralToUnion");f();function jL(t,e){let r=Uo(t)?HX(iCe(t)):HX(t);return rt({[Ze]:"TemplateLiteral",type:"string",pattern:r},e)}s(jL,"TemplateLiteral");function oet(t){return j_(t).map(r=>r.toString())}s(oet,"FromTemplateLiteral");function set(t){let e=[];for(let r of t)e.push(...od(r));return e}s(set,"FromUnion");function aet(t){return[t.toString()]}s(aet,"FromLiteral");function od(t){return[...new Set(s0(t)?oet(t):qi(t)?set(t.anyOf):i0(t)?aet(t.const):lm(t)?["[number]"]:am(t)?["[number]"]:[])]}s(od,"IndexPropertyKeys");f();function cet(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=wx(t,od(e[i]),r);return n}s(cet,"FromProperties");function uet(t,e,r){return cet(t,e.properties,r)}s(uet,"FromMappedResult");function sCe(t,e,r){let n=uet(t,e,r);return Yi(n)}s(sCe,"IndexFromMappedResult");function lCe(t,e){return t.map(r=>cCe(r,e))}s(lCe,"FromRest");function det(t){return t.filter(e=>!Ex(e))}s(det,"FromIntersectRest");function fet(t,e){return VL(det(lCe(t,e)))}s(fet,"FromIntersect");function pet(t){return t.some(e=>Ex(e))?[]:t}s(pet,"FromUnionRest");function met(t,e){return cg(pet(lCe(t,e)))}s(met,"FromUnion");function het(t,e){return e in t?t[e]:e==="[number]"?cg(t):ri()}s(het,"FromTuple");function get(t,e){return e==="[number]"?t:ri()}s(get,"FromArray");function Aet(t,e){return e in t?t[e]:ri()}s(Aet,"FromProperty");function cCe(t,e){return $s(t)?fet(t.allOf,e):qi(t)?met(t.anyOf,e):a0(t)?het(t.items??[],e):nm(t)?get(t.items,e):Ia(t)?Aet(t.properties,e):ri()}s(cCe,"IndexFromPropertyKey");function MB(t,e){return e.map(r=>cCe(t,r))}s(MB,"IndexFromPropertyKeys");function aCe(t,e){return cg(MB(t,e))}s(aCe,"FromSchema");function wx(t,e,r){if(oa(t)||oa(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ns(t)||!Ns(e))throw new gn(n);return Jo("Index",[t,e])}return ds(e)?sCe(t,e,r):o0(e)?uCe(t,e,r):rt(Ns(e)?aCe(t,od(e)):aCe(t,e),r)}s(wx,"Index");function yet(t,e,r){return{[e]:wx(t,[e],cs(r))}}s(yet,"MappedIndexPropertyKey");function Cet(t,e,r){return e.reduce((n,i)=>({...n,...yet(t,i,r)}),{})}s(Cet,"MappedIndexPropertyKeys");function xet(t,e,r){return Cet(t,e.keys,r)}s(xet,"MappedIndexProperties");function uCe(t,e,r){let n=xet(t,e,r);return Yi(n)}s(uCe,"IndexFromMappedKey");f();function $_(t,e){return rt({[Ze]:"Iterator",type:"Iterator",items:t},e)}s($_,"Iterator");f();function vet(t){let e=[];for(let r in t)id(t[r])||e.push(r);return e}s(vet,"RequiredKeys");function bet(t,e){let r=vet(t),n=r.length>0?{[Ze]:"Object",type:"object",properties:t,required:r}:{[Ze]:"Object",type:"object",properties:t};return rt(n,e)}s(bet,"_Object");var lo=bet;f();function $L(t,e){return rt({[Ze]:"Promise",type:"Promise",item:t},e)}s($L,"Promise");f();f();function Eet(t){return rt(zs(t,[rm]))}s(Eet,"RemoveReadonly");function Iet(t){return rt({...t,[rm]:"Readonly"})}s(Iet,"AddReadonly");function Tet(t,e){return e===!1?Eet(t):Iet(t)}s(Tet,"ReadonlyWithFlag");function sd(t,e){let r=e??!0;return ds(t)?dCe(t,r):Tet(t,r)}s(sd,"Readonly");function wet(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=sd(t[n],e);return r}s(wet,"FromProperties");function _et(t,e){return wet(t.properties,e)}s(_et,"FromMappedResult");function dCe(t,e){let r=_et(t,e);return Yi(r)}s(dCe,"ReadonlyFromMappedResult");f();function Tf(t,e){return rt(t.length>0?{[Ze]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Ze]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Tf,"Tuple");function fCe(t,e){return t in e?wf(t,e[t]):Yi(e)}s(fCe,"FromMappedResult");function Ret(t){return{[t]:Ni(t)}}s(Ret,"MappedKeyToKnownMappedResultProperties");function ket(t){let e={};for(let r of t)e[r]=Ni(r);return e}s(ket,"MappedKeyToUnknownMappedResultProperties");function Bet(t,e){return Kye(e,t)?Ret(t):ket(e)}s(Bet,"MappedKeyToMappedResultProperties");function Pet(t,e){let r=Bet(t,e);return fCe(t,r)}s(Pet,"FromMappedKey");function QB(t,e){return e.map(r=>wf(t,r))}s(QB,"FromRest");function Det(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=wf(t,e[n]);return r}s(Det,"FromProperties");function wf(t,e){let r={...e};return id(e)?Qc(wf(t,zs(e,[cc]))):M_(e)?sd(wf(t,zs(e,[rm]))):ds(e)?fCe(t,e.properties):o0(e)?Pet(t,e.keys):om(e)?W_(QB(t,e.parameters),wf(t,e.returns),r):sm(e)?lg(QB(t,e.parameters),wf(t,e.returns),r):iI(e)?q_(wf(t,e.items),r):sI(e)?$_(wf(t,e.items),r):$s(e)?Oc(QB(t,e.allOf),r):qi(e)?ao(QB(t,e.anyOf),r):a0(e)?Tf(QB(t,e.items??[]),r):Ia(e)?lo(Det(t,e.properties),r):nm(e)?U_(wf(t,e.items),r):aI(e)?$L(wf(t,e.item),r):e}s(wf,"FromSchemaType");function Net(t,e){let r={};for(let n of t)r[n]=wf(n,e);return r}s(Net,"MappedFunctionReturnType");function pCe(t,e,r){let n=Ns(t)?od(t):t,i=e({[Ze]:"MappedKey",keys:n}),o=Net(n,i);return lo(o,r)}s(pCe,"Mapped");f();function Let(t){return rt(zs(t,[cc]))}s(Let,"RemoveOptional");function Fet(t){return rt({...t,[cc]:"Optional"})}s(Fet,"AddOptional");function Met(t,e){return e===!1?Let(t):Fet(t)}s(Met,"OptionalWithFlag");function Qc(t,e){let r=e??!0;return ds(t)?mCe(t,r):Met(t,r)}s(Qc,"Optional");function Qet(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Qc(t[n],e);return r}s(Qet,"FromProperties");function Oet(t,e){return Qet(t.properties,e)}s(Oet,"FromMappedResult");function mCe(t,e){let r=Oet(t,e);return Yi(r)}s(mCe,"OptionalFromMappedResult");f();function OB(t,e={}){let r=t.every(i=>Ia(i)),n=Ns(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return rt(e.unevaluatedProperties===!1||Ns(e.unevaluatedProperties)||r?{...n,[Ze]:"Intersect",type:"object",allOf:t}:{...n,[Ze]:"Intersect",allOf:t},e)}s(OB,"IntersectCreate");function Uet(t){return t.every(e=>id(e))}s(Uet,"IsIntersectOptional");function qet(t){return zs(t,[cc])}s(qet,"RemoveOptionalFromType");function hCe(t){return t.map(e=>id(e)?qet(e):e)}s(hCe,"RemoveOptionalFromRest");function Wet(t,e){return Uet(t)?Qc(OB(hCe(t),e)):OB(hCe(t),e)}s(Wet,"ResolveIntersect");function VL(t,e={}){if(t.length===1)return rt(t[0],e);if(t.length===0)return ri(e);if(t.some(r=>so(r)))throw new Error("Cannot intersect transform types");return Wet(t,e)}s(VL,"IntersectEvaluated");f();function Oc(t,e){if(t.length===1)return rt(t[0],e);if(t.length===0)return ri(e);if(t.some(r=>so(r)))throw new Error("Cannot intersect transform types");return OB(t,e)}s(Oc,"Intersect");f();function _f(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new gn("Ref: $ref must be a string");return rt({[Ze]:"Ref",$ref:e},r)}s(_f,"Ref");function Get(t,e){return Jo("Awaited",[Jo(t,e)])}s(Get,"FromComputed");function Het(t){return Jo("Awaited",[_f(t)])}s(Het,"FromRef");function jet(t){return Oc(gCe(t))}s(jet,"FromIntersect");function Vet(t){return ao(gCe(t))}s(Vet,"FromUnion");function $et(t){return z_(t)}s($et,"FromPromise");function gCe(t){return t.map(e=>z_(e))}s(gCe,"FromRest");function z_(t,e){return rt(im(t)?Get(t.target,t.parameters):$s(t)?jet(t.allOf):qi(t)?Vet(t.anyOf):aI(t)?$et(t.item):oa(t)?Het(t.$ref):t,e)}s(z_,"Awaited");f();f();f();f();function ACe(t){let e=[];for(let r of t)e.push(ad(r));return e}s(ACe,"FromRest");function zet(t){let e=ACe(t);return Zye(e)}s(zet,"FromIntersect");function Yet(t){let e=ACe(t);return Xye(e)}s(Yet,"FromUnion");function Ket(t){return t.map((e,r)=>r.toString())}s(Ket,"FromTuple");function Jet(t){return["[number]"]}s(Jet,"FromArray");function Xet(t){return globalThis.Object.getOwnPropertyNames(t)}s(Xet,"FromProperties");function Zet(t){return jX?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(Zet,"FromPatternProperties");function ad(t){return $s(t)?zet(t.allOf):qi(t)?Yet(t.anyOf):a0(t)?Ket(t.items??[]):nm(t)?Jet(t.items):Ia(t)?Xet(t.properties):lI(t)?Zet(t.patternProperties):[]}s(ad,"KeyOfPropertyKeys");var jX=!1;function b1(t){jX=!0;let e=ad(t);return jX=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(b1,"KeyOfPattern");function ett(t,e){return Jo("KeyOf",[Jo(t,e)])}s(ett,"FromComputed");function ttt(t){return Jo("KeyOf",[_f(t)])}s(ttt,"FromRef");function rtt(t,e){let r=ad(t),n=ntt(r),i=cg(n);return rt(i,e)}s(rtt,"KeyOfFromType");function ntt(t){return t.map(e=>e==="[number]"?If():Ni(e))}s(ntt,"KeyOfPropertyKeysToRest");function Y_(t,e){return im(t)?ett(t.target,t.parameters):oa(t)?ttt(t.$ref):ds(t)?yCe(t,e):rtt(t,e)}s(Y_,"KeyOf");function itt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Y_(t[n],cs(e));return r}s(itt,"FromProperties");function ott(t,e){return itt(t.properties,e)}s(ott,"FromMappedResult");function yCe(t,e){let r=ott(t,e);return Yi(r)}s(yCe,"KeyOfFromMappedResult");f();function zL(t){let e=ad(t),r=MB(t,e);return e.map((n,i)=>[e[i],r[i]])}s(zL,"KeyOfPropertyEntries");function stt(t){let e=[];for(let r of t)e.push(...ad(r));return Jye(e)}s(stt,"CompositeKeys");function att(t){return t.filter(e=>!Ex(e))}s(att,"FilterNever");function ltt(t,e){let r=[];for(let n of t)r.push(...MB(n,[e]));return att(r)}s(ltt,"CompositeProperty");function ctt(t,e){let r={};for(let n of e)r[n]=VL(ltt(t,n));return r}s(ctt,"CompositeProperties");function CCe(t,e){let r=stt(t),n=ctt(t,r);return lo(n,e)}s(CCe,"Composite");f();f();function YL(t){return rt({[Ze]:"Date",type:"Date"},t)}s(YL,"Date");f();function KL(t){return rt({[Ze]:"Null",type:"null"},t)}s(KL,"Null");f();function JL(t){return rt({[Ze]:"Symbol",type:"symbol"},t)}s(JL,"Symbol");f();function XL(t){return rt({[Ze]:"Undefined",type:"undefined"},t)}s(XL,"Undefined");f();function ZL(t){return rt({[Ze]:"Uint8Array",type:"Uint8Array"},t)}s(ZL,"Uint8Array");f();function um(t){return rt({[Ze]:"Unknown"},t)}s(um,"Unknown");function utt(t){return t.map(e=>VX(e,!1))}s(utt,"FromArray");function dtt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=sd(VX(t[r],!1));return e}s(dtt,"FromProperties");function eF(t,e){return e===!0?t:sd(t)}s(eF,"ConditionalReadonly");function VX(t,e){return IX(t)?eF(Tx(),e):wX(t)?eF(Tx(),e):ba(t)?sd(Tf(utt(t))):m1(t)?ZL():nI(t)?YL():wo(t)?eF(lo(dtt(t)),e):TX(t)?eF(lg([],um()),e):Ea(t)?XL():_X(t)?KL():SX(t)?JL():wB(t)?V_():r0(t)?Ni(t):p1(t)?Ni(t):Uo(t)?Ni(t):lo({})}s(VX,"FromValue");function xCe(t,e){return rt(VX(t,!0),e)}s(xCe,"Const");f();function vCe(t,e){return om(t)?Tf(t.parameters,e):ri(e)}s(vCe,"ConstructorParameters");f();function bCe(t,e){if(Ea(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>Ni(o));return ao(i,{...e,[Ef]:"Enum"})}s(bCe,"Enum");f();f();f();var zX=class extends gn{static{s(this,"ExtendsResolverError")}},nt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(nt||(nt={}));function Sf(t){return t===nt.False?t:nt.True}s(Sf,"IntoBooleanResult");function K_(t){throw new zX(t)}s(K_,"Throw");function Wa(t){return Pe.IsNever(t)||Pe.IsIntersect(t)||Pe.IsUnion(t)||Pe.IsUnknown(t)||Pe.IsAny(t)}s(Wa,"IsStructuralRight");function Ga(t,e){return Pe.IsNever(e)?RCe(t,e):Pe.IsIntersect(e)?tF(t,e):Pe.IsUnion(e)?XX(t,e):Pe.IsUnknown(e)?DCe(t,e):Pe.IsAny(e)?JX(t,e):K_("StructuralRight")}s(Ga,"StructuralRight");function JX(t,e){return nt.True}s(JX,"FromAnyRight");function ftt(t,e){return Pe.IsIntersect(e)?tF(t,e):Pe.IsUnion(e)&&e.anyOf.some(r=>Pe.IsAny(r)||Pe.IsUnknown(r))?nt.True:Pe.IsUnion(e)?nt.Union:Pe.IsUnknown(e)||Pe.IsAny(e)?nt.True:nt.Union}s(ftt,"FromAny");function ptt(t,e){return Pe.IsUnknown(t)?nt.False:Pe.IsAny(t)?nt.Union:Pe.IsNever(t)?nt.True:nt.False}s(ptt,"FromArrayRight");function mtt(t,e){return Pe.IsObject(e)&&rF(e)?nt.True:Wa(e)?Ga(t,e):Pe.IsArray(e)?Sf(So(t.items,e.items)):nt.False}s(mtt,"FromArray");function htt(t,e){return Wa(e)?Ga(t,e):Pe.IsAsyncIterator(e)?Sf(So(t.items,e.items)):nt.False}s(htt,"FromAsyncIterator");function gtt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsBigInt(e)?nt.True:nt.False}s(gtt,"FromBigInt");function _Ce(t,e){return Pe.IsLiteralBoolean(t)||Pe.IsBoolean(t)?nt.True:nt.False}s(_Ce,"FromBooleanRight");function Att(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsBoolean(e)?nt.True:nt.False}s(Att,"FromBoolean");function ytt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsConstructor(e)?t.parameters.length>e.parameters.length?nt.False:t.parameters.every((r,n)=>Sf(So(e.parameters[n],r))===nt.True)?Sf(So(t.returns,e.returns)):nt.False:nt.False}s(ytt,"FromConstructor");function Ctt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsDate(e)?nt.True:nt.False}s(Ctt,"FromDate");function xtt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsFunction(e)?t.parameters.length>e.parameters.length?nt.False:t.parameters.every((r,n)=>Sf(So(e.parameters[n],r))===nt.True)?Sf(So(t.returns,e.returns)):nt.False:nt.False}s(xtt,"FromFunction");function SCe(t,e){return Pe.IsLiteral(t)&&Mc.IsNumber(t.const)||Pe.IsNumber(t)||Pe.IsInteger(t)?nt.True:nt.False}s(SCe,"FromIntegerRight");function vtt(t,e){return Pe.IsInteger(e)||Pe.IsNumber(e)?nt.True:Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):nt.False}s(vtt,"FromInteger");function tF(t,e){return e.allOf.every(r=>So(t,r)===nt.True)?nt.True:nt.False}s(tF,"FromIntersectRight");function btt(t,e){return t.allOf.some(r=>So(r,e)===nt.True)?nt.True:nt.False}s(btt,"FromIntersect");function Ett(t,e){return Wa(e)?Ga(t,e):Pe.IsIterator(e)?Sf(So(t.items,e.items)):nt.False}s(Ett,"FromIterator");function Itt(t,e){return Pe.IsLiteral(e)&&e.const===t.const?nt.True:Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsString(e)?PCe(t,e):Pe.IsNumber(e)?kCe(t,e):Pe.IsInteger(e)?SCe(t,e):Pe.IsBoolean(e)?_Ce(t,e):nt.False}s(Itt,"FromLiteral");function RCe(t,e){return nt.False}s(RCe,"FromNeverRight");function Ttt(t,e){return nt.True}s(Ttt,"FromNever");function ECe(t){let[e,r]=[t,0];for(;Pe.IsNot(e);)e=e.not,r+=1;return r%2===0?e:um()}s(ECe,"UnwrapTNot");function wtt(t,e){return Pe.IsNot(t)?So(ECe(t),e):Pe.IsNot(e)?So(t,ECe(e)):K_("Invalid fallthrough for Not")}s(wtt,"FromNot");function _tt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsNull(e)?nt.True:nt.False}s(_tt,"FromNull");function kCe(t,e){return Pe.IsLiteralNumber(t)||Pe.IsNumber(t)||Pe.IsInteger(t)?nt.True:nt.False}s(kCe,"FromNumberRight");function Stt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsInteger(e)||Pe.IsNumber(e)?nt.True:nt.False}s(Stt,"FromNumber");function ld(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(ld,"IsObjectPropertyCount");function ICe(t){return rF(t)}s(ICe,"IsObjectStringLike");function TCe(t){return ld(t,0)||ld(t,1)&&"description"in t.properties&&Pe.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Pe.IsString(t.properties.description.anyOf[0])&&Pe.IsUndefined(t.properties.description.anyOf[1])||Pe.IsString(t.properties.description.anyOf[1])&&Pe.IsUndefined(t.properties.description.anyOf[0]))}s(TCe,"IsObjectSymbolLike");function $X(t){return ld(t,0)}s($X,"IsObjectNumberLike");function wCe(t){return ld(t,0)}s(wCe,"IsObjectBooleanLike");function Rtt(t){return ld(t,0)}s(Rtt,"IsObjectBigIntLike");function ktt(t){return ld(t,0)}s(ktt,"IsObjectDateLike");function Btt(t){return rF(t)}s(Btt,"IsObjectUint8ArrayLike");function Ptt(t){let e=If();return ld(t,0)||ld(t,1)&&"length"in t.properties&&Sf(So(t.properties.length,e))===nt.True}s(Ptt,"IsObjectFunctionLike");function Dtt(t){return ld(t,0)}s(Dtt,"IsObjectConstructorLike");function rF(t){let e=If();return ld(t,0)||ld(t,1)&&"length"in t.properties&&Sf(So(t.properties.length,e))===nt.True}s(rF,"IsObjectArrayLike");function Ntt(t){let e=lg([Tx()],Tx());return ld(t,0)||ld(t,1)&&"then"in t.properties&&Sf(So(t.properties.then,e))===nt.True}s(Ntt,"IsObjectPromiseLike");function BCe(t,e){return So(t,e)===nt.False||Pe.IsOptional(t)&&!Pe.IsOptional(e)?nt.False:nt.True}s(BCe,"Property");function Uc(t,e){return Pe.IsUnknown(t)?nt.False:Pe.IsAny(t)?nt.Union:Pe.IsNever(t)||Pe.IsLiteralString(t)&&ICe(e)||Pe.IsLiteralNumber(t)&&$X(e)||Pe.IsLiteralBoolean(t)&&wCe(e)||Pe.IsSymbol(t)&&TCe(e)||Pe.IsBigInt(t)&&Rtt(e)||Pe.IsString(t)&&ICe(e)||Pe.IsSymbol(t)&&TCe(e)||Pe.IsNumber(t)&&$X(e)||Pe.IsInteger(t)&&$X(e)||Pe.IsBoolean(t)&&wCe(e)||Pe.IsUint8Array(t)&&Btt(e)||Pe.IsDate(t)&&ktt(e)||Pe.IsConstructor(t)&&Dtt(e)||Pe.IsFunction(t)&&Ptt(e)?nt.True:Pe.IsRecord(t)&&Pe.IsString(YX(t))?e[Ef]==="Record"?nt.True:nt.False:Pe.IsRecord(t)&&Pe.IsNumber(YX(t))?ld(e,0)?nt.True:nt.False:nt.False}s(Uc,"FromObjectRight");function Ltt(t,e){return Wa(e)?Ga(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Pe.IsOptional(e.properties[r]))return nt.False;if(Pe.IsOptional(e.properties[r]))return nt.True;if(BCe(t.properties[r],e.properties[r])===nt.False)return nt.False}return nt.True})():nt.False}s(Ltt,"FromObject");function Ftt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)&&Ntt(e)?nt.True:Pe.IsPromise(e)?Sf(So(t.item,e.item)):nt.False}s(Ftt,"FromPromise");function YX(t){return sg in t.patternProperties?If():ag in t.patternProperties?bu():K_("Unknown record key pattern")}s(YX,"RecordKey");function KX(t){return sg in t.patternProperties?t.patternProperties[sg]:ag in t.patternProperties?t.patternProperties[ag]:K_("Unable to get record value schema")}s(KX,"RecordValue");function Rf(t,e){let[r,n]=[YX(e),KX(e)];return Pe.IsLiteralString(t)&&Pe.IsNumber(r)&&Sf(So(t,n))===nt.True?nt.True:Pe.IsUint8Array(t)&&Pe.IsNumber(r)||Pe.IsString(t)&&Pe.IsNumber(r)||Pe.IsArray(t)&&Pe.IsNumber(r)?So(t,n):Pe.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(BCe(n,t.properties[i])===nt.False)return nt.False;return nt.True})():nt.False}s(Rf,"FromRecordRight");function Mtt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?So(KX(t),KX(e)):nt.False}s(Mtt,"FromRecord");function Qtt(t,e){let r=Pe.IsRegExp(t)?bu():t,n=Pe.IsRegExp(e)?bu():e;return So(r,n)}s(Qtt,"FromRegExp");function PCe(t,e){return Pe.IsLiteral(t)&&Mc.IsString(t.const)||Pe.IsString(t)?nt.True:nt.False}s(PCe,"FromStringRight");function Ott(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsString(e)?nt.True:nt.False}s(Ott,"FromString");function Utt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsSymbol(e)?nt.True:nt.False}s(Utt,"FromSymbol");function qtt(t,e){return Pe.IsTemplateLiteral(t)?So(uI(t),e):Pe.IsTemplateLiteral(e)?So(t,uI(e)):K_("Invalid fallthrough for TemplateLiteral")}s(qtt,"FromTemplateLiteral");function Wtt(t,e){return Pe.IsArray(e)&&t.items!==void 0&&t.items.every(r=>So(r,e.items)===nt.True)}s(Wtt,"IsArrayOfTuple");function Gtt(t,e){return Pe.IsNever(t)?nt.True:Pe.IsUnknown(t)?nt.False:Pe.IsAny(t)?nt.Union:nt.False}s(Gtt,"FromTupleRight");function Htt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)&&rF(e)||Pe.IsArray(e)&&Wtt(t,e)?nt.True:Pe.IsTuple(e)?Mc.IsUndefined(t.items)&&!Mc.IsUndefined(e.items)||!Mc.IsUndefined(t.items)&&Mc.IsUndefined(e.items)?nt.False:Mc.IsUndefined(t.items)&&!Mc.IsUndefined(e.items)||t.items.every((r,n)=>So(r,e.items[n])===nt.True)?nt.True:nt.False:nt.False}s(Htt,"FromTuple");function jtt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsUint8Array(e)?nt.True:nt.False}s(jtt,"FromUint8Array");function Vtt(t,e){return Wa(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?Rf(t,e):Pe.IsVoid(e)?Ytt(t,e):Pe.IsUndefined(e)?nt.True:nt.False}s(Vtt,"FromUndefined");function XX(t,e){return e.anyOf.some(r=>So(t,r)===nt.True)?nt.True:nt.False}s(XX,"FromUnionRight");function $tt(t,e){return t.anyOf.every(r=>So(r,e)===nt.True)?nt.True:nt.False}s($tt,"FromUnion");function DCe(t,e){return nt.True}s(DCe,"FromUnknownRight");function ztt(t,e){return Pe.IsNever(e)?RCe(t,e):Pe.IsIntersect(e)?tF(t,e):Pe.IsUnion(e)?XX(t,e):Pe.IsAny(e)?JX(t,e):Pe.IsString(e)?PCe(t,e):Pe.IsNumber(e)?kCe(t,e):Pe.IsInteger(e)?SCe(t,e):Pe.IsBoolean(e)?_Ce(t,e):Pe.IsArray(e)?ptt(t,e):Pe.IsTuple(e)?Gtt(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsUnknown(e)?nt.True:nt.False}s(ztt,"FromUnknown");function Ytt(t,e){return Pe.IsUndefined(t)||Pe.IsUndefined(t)?nt.True:nt.False}s(Ytt,"FromVoidRight");function Ktt(t,e){return Pe.IsIntersect(e)?tF(t,e):Pe.IsUnion(e)?XX(t,e):Pe.IsUnknown(e)?DCe(t,e):Pe.IsAny(e)?JX(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsVoid(e)?nt.True:nt.False}s(Ktt,"FromVoid");function So(t,e){return Pe.IsTemplateLiteral(t)||Pe.IsTemplateLiteral(e)?qtt(t,e):Pe.IsRegExp(t)||Pe.IsRegExp(e)?Qtt(t,e):Pe.IsNot(t)||Pe.IsNot(e)?wtt(t,e):Pe.IsAny(t)?ftt(t,e):Pe.IsArray(t)?mtt(t,e):Pe.IsBigInt(t)?gtt(t,e):Pe.IsBoolean(t)?Att(t,e):Pe.IsAsyncIterator(t)?htt(t,e):Pe.IsConstructor(t)?ytt(t,e):Pe.IsDate(t)?Ctt(t,e):Pe.IsFunction(t)?xtt(t,e):Pe.IsInteger(t)?vtt(t,e):Pe.IsIntersect(t)?btt(t,e):Pe.IsIterator(t)?Ett(t,e):Pe.IsLiteral(t)?Itt(t,e):Pe.IsNever(t)?Ttt(t,e):Pe.IsNull(t)?_tt(t,e):Pe.IsNumber(t)?Stt(t,e):Pe.IsObject(t)?Ltt(t,e):Pe.IsRecord(t)?Mtt(t,e):Pe.IsString(t)?Ott(t,e):Pe.IsSymbol(t)?Utt(t,e):Pe.IsTuple(t)?Htt(t,e):Pe.IsPromise(t)?Ftt(t,e):Pe.IsUint8Array(t)?jtt(t,e):Pe.IsUndefined(t)?Vtt(t,e):Pe.IsUnion(t)?$tt(t,e):Pe.IsUnknown(t)?ztt(t,e):Pe.IsVoid(t)?Ktt(t,e):K_(`Unknown left type operand '${t[Ze]}'`)}s(So,"Visit");function _x(t,e){return So(t,e)}s(_x,"ExtendsCheck");f();f();f();function Jtt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=J_(t[a],e,r,n,cs(i));return o}s(Jtt,"FromProperties");function Xtt(t,e,r,n,i){return Jtt(t.properties,e,r,n,i)}s(Xtt,"FromMappedResult");function NCe(t,e,r,n,i){let o=Xtt(t,e,r,n,i);return Yi(o)}s(NCe,"ExtendsFromMappedResult");function Ztt(t,e,r,n){let i=_x(t,e);return i===nt.Union?ao([r,n]):i===nt.True?r:n}s(Ztt,"ExtendsResolve");function J_(t,e,r,n,i){return ds(t)?NCe(t,e,r,n,i):o0(t)?rt(LCe(t,e,r,n,i)):rt(Ztt(t,e,r,n),i)}s(J_,"Extends");function ert(t,e,r,n,i){return{[t]:J_(Ni(t),e,r,n,cs(i))}}s(ert,"FromPropertyKey");function trt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...ert(a,e,r,n,i)}),{})}s(trt,"FromPropertyKeys");function rrt(t,e,r,n,i){return trt(t.keys,e,r,n,i)}s(rrt,"FromMappedKey");function LCe(t,e,r,n,i){let o=rrt(t,e,r,n,i);return Yi(o)}s(LCe,"ExtendsFromMappedKey");f();function nrt(t){return t.allOf.every(e=>E1(e))}s(nrt,"Intersect");function irt(t){return t.anyOf.some(e=>E1(e))}s(irt,"Union");function ort(t){return!E1(t.not)}s(ort,"Not");function E1(t){return t[Ze]==="Intersect"?nrt(t):t[Ze]==="Union"?irt(t):t[Ze]==="Not"?ort(t):t[Ze]==="Undefined"}s(E1,"ExtendsUndefinedCheck");f();function FCe(t,e){return X_(uI(t),e)}s(FCe,"ExcludeFromTemplateLiteral");function srt(t,e){let r=t.filter(n=>_x(n,e)===nt.False);return r.length===1?r[0]:ao(r)}s(srt,"ExcludeRest");function X_(t,e,r={}){return s0(t)?rt(FCe(t,e),r):ds(t)?rt(MCe(t,e),r):rt(qi(t)?srt(t.anyOf,e):_x(t,e)!==nt.False?ri():t,r)}s(X_,"Exclude");function art(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=X_(t[n],e);return r}s(art,"FromProperties");function lrt(t,e){return art(t.properties,e)}s(lrt,"FromMappedResult");function MCe(t,e){let r=lrt(t,e);return Yi(r)}s(MCe,"ExcludeFromMappedResult");f();f();f();function QCe(t,e){return Z_(uI(t),e)}s(QCe,"ExtractFromTemplateLiteral");function crt(t,e){let r=t.filter(n=>_x(n,e)!==nt.False);return r.length===1?r[0]:ao(r)}s(crt,"ExtractRest");function Z_(t,e,r){return s0(t)?rt(QCe(t,e),r):ds(t)?rt(OCe(t,e),r):rt(qi(t)?crt(t.anyOf,e):_x(t,e)!==nt.False?t:ri(),r)}s(Z_,"Extract");function urt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Z_(t[n],e);return r}s(urt,"FromProperties");function drt(t,e){return urt(t.properties,e)}s(drt,"FromMappedResult");function OCe(t,e){let r=drt(t,e);return Yi(r)}s(OCe,"ExtractFromMappedResult");f();function UCe(t,e){return om(t)?rt(t.returns,e):ri(e)}s(UCe,"InstanceType");f();f();function nF(t){return sd(Qc(t))}s(nF,"ReadonlyOptional");f();function dI(t,e,r){return rt({[Ze]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(dI,"RecordCreateFromPattern");function ZX(t,e,r){let n={};for(let i of t)n[i]=e;return lo(n,{...r,[Ef]:"Record"})}s(ZX,"RecordCreateFromKeys");function frt(t,e,r){return GL(t)?ZX(od(t),e,r):dI(t.pattern,e,r)}s(frt,"FromTemplateLiteralKey");function prt(t,e,r){return ZX(od(ao(t)),e,r)}s(prt,"FromUnionKey");function mrt(t,e,r){return ZX([t.toString()],e,r)}s(mrt,"FromLiteralKey");function hrt(t,e,r){return dI(t.source,e,r)}s(hrt,"FromRegExpKey");function grt(t,e,r){let n=Ea(t.pattern)?ag:t.pattern;return dI(n,e,r)}s(grt,"FromStringKey");function Art(t,e,r){return dI(ag,e,r)}s(Art,"FromAnyKey");function yrt(t,e,r){return dI(Yye,e,r)}s(yrt,"FromNeverKey");function Crt(t,e,r){return lo({true:e,false:e},r)}s(Crt,"FromBooleanKey");function xrt(t,e,r){return dI(sg,e,r)}s(xrt,"FromIntegerKey");function vrt(t,e,r){return dI(sg,e,r)}s(vrt,"FromNumberKey");function iF(t,e,r={}){return qi(t)?prt(t.anyOf,e,r):s0(t)?frt(t,e,r):i0(t)?mrt(t.const,e,r):A1(t)?Crt(t,e,r):am(t)?xrt(t,e,r):lm(t)?vrt(t,e,r):PX(t)?hrt(t,e,r):y1(t)?grt(t,e,r):kX(t)?Art(t,e,r):Ex(t)?yrt(t,e,r):ri(r)}s(iF,"Record");function oF(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(oF,"RecordPattern");function qCe(t){let e=oF(t);return e===ag?bu():e===sg?If():bu({pattern:e})}s(qCe,"RecordKey");function sF(t){return t.patternProperties[oF(t)]}s(sF,"RecordValue");function brt(t,e){return e.parameters=UB(t,e.parameters),e.returns=dm(t,e.returns),e}s(brt,"FromConstructor");function Ert(t,e){return e.parameters=UB(t,e.parameters),e.returns=dm(t,e.returns),e}s(Ert,"FromFunction");function Irt(t,e){return e.allOf=UB(t,e.allOf),e}s(Irt,"FromIntersect");function Trt(t,e){return e.anyOf=UB(t,e.anyOf),e}s(Trt,"FromUnion");function wrt(t,e){return Ea(e.items)||(e.items=UB(t,e.items)),e}s(wrt,"FromTuple");function _rt(t,e){return e.items=dm(t,e.items),e}s(_rt,"FromArray");function Srt(t,e){return e.items=dm(t,e.items),e}s(Srt,"FromAsyncIterator");function Rrt(t,e){return e.items=dm(t,e.items),e}s(Rrt,"FromIterator");function krt(t,e){return e.item=dm(t,e.item),e}s(krt,"FromPromise");function Brt(t,e){let r=Lrt(t,e.properties);return{...e,...lo(r)}}s(Brt,"FromObject");function Prt(t,e){let r=dm(t,qCe(e)),n=dm(t,sF(e)),i=iF(r,n);return{...e,...i}}s(Prt,"FromRecord");function Drt(t,e){return e.index in t?t[e.index]:um()}s(Drt,"FromArgument");function Nrt(t,e){let r=M_(e),n=id(e),i=dm(t,e);return r&&n?nF(i):r&&!n?sd(i):!r&&n?Qc(i):i}s(Nrt,"FromProperty");function Lrt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:Nrt(t,e[n])}),{})}s(Lrt,"FromProperties");function UB(t,e){return e.map(r=>dm(t,r))}s(UB,"FromTypes");function dm(t,e){return om(e)?brt(t,e):sm(e)?Ert(t,e):$s(e)?Irt(t,e):qi(e)?Trt(t,e):a0(e)?wrt(t,e):nm(e)?_rt(t,e):iI(e)?Srt(t,e):sI(e)?Rrt(t,e):aI(e)?krt(t,e):Ia(e)?Brt(t,e):lI(e)?Prt(t,e):BX(e)?Drt(t,e):e}s(dm,"FromType");function WCe(t,e){return dm(e,L_(t))}s(WCe,"Instantiate");f();function GCe(t){return rt({[Ze]:"Integer",type:"integer"},t)}s(GCe,"Integer");f();f();f();function Frt(t,e,r){return{[t]:fm(Ni(t),e,cs(r))}}s(Frt,"MappedIntrinsicPropertyKey");function Mrt(t,e,r){return t.reduce((i,o)=>({...i,...Frt(o,e,r)}),{})}s(Mrt,"MappedIntrinsicPropertyKeys");function Qrt(t,e,r){return Mrt(t.keys,e,r)}s(Qrt,"MappedIntrinsicProperties");function HCe(t,e,r){let n=Qrt(t,e,r);return Yi(n)}s(HCe,"IntrinsicFromMappedKey");function Ort(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(Ort,"ApplyUncapitalize");function Urt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(Urt,"ApplyCapitalize");function qrt(t){return t.toUpperCase()}s(qrt,"ApplyUppercase");function Wrt(t){return t.toLowerCase()}s(Wrt,"ApplyLowercase");function Grt(t,e,r){let n=H_(t.pattern);if(!cI(n))return{...t,pattern:jCe(t.pattern,e)};let a=[...FB(n)].map(u=>Ni(u)),l=VCe(a,e),c=ao(l);return jL([c],r)}s(Grt,"FromTemplateLiteral");function jCe(t,e){return typeof t=="string"?e==="Uncapitalize"?Ort(t):e==="Capitalize"?Urt(t):e==="Uppercase"?qrt(t):e==="Lowercase"?Wrt(t):t:t.toString()}s(jCe,"FromLiteralValue");function VCe(t,e){return t.map(r=>fm(r,e))}s(VCe,"FromRest");function fm(t,e,r={}){return o0(t)?HCe(t,e,r):s0(t)?Grt(t,e,r):qi(t)?ao(VCe(t.anyOf,e),r):i0(t)?Ni(jCe(t.const,e),r):rt(t,r)}s(fm,"Intrinsic");function $Ce(t,e={}){return fm(t,"Capitalize",e)}s($Ce,"Capitalize");f();function zCe(t,e={}){return fm(t,"Lowercase",e)}s(zCe,"Lowercase");f();function YCe(t,e={}){return fm(t,"Uncapitalize",e)}s(YCe,"Uncapitalize");f();function KCe(t,e={}){return fm(t,"Uppercase",e)}s(KCe,"Uppercase");f();f();f();f();f();function Hrt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Sx(t[i],e,cs(r));return n}s(Hrt,"FromProperties");function jrt(t,e,r){return Hrt(t.properties,e,r)}s(jrt,"FromMappedResult");function JCe(t,e,r){let n=jrt(t,e,r);return Yi(n)}s(JCe,"OmitFromMappedResult");function Vrt(t,e){return t.map(r=>eZ(r,e))}s(Vrt,"FromIntersect");function $rt(t,e){return t.map(r=>eZ(r,e))}s($rt,"FromUnion");function zrt(t,e){let{[e]:r,...n}=t;return n}s(zrt,"FromProperty");function Yrt(t,e){return e.reduce((r,n)=>zrt(r,n),t)}s(Yrt,"FromProperties");function Krt(t,e){let r=zs(t,[Ds,"$id","required","properties"]),n=Yrt(t.properties,e);return lo(n,r)}s(Krt,"FromObject");function Jrt(t){let e=t.reduce((r,n)=>UL(n)?[...r,Ni(n)]:r,[]);return ao(e)}s(Jrt,"UnionFromPropertyKeys");function eZ(t,e){return $s(t)?Oc(Vrt(t.allOf,e)):qi(t)?ao($rt(t.anyOf,e)):Ia(t)?Krt(t,e):lo({})}s(eZ,"OmitResolve");function Sx(t,e,r){let n=ba(e)?Jrt(e):e,i=Ns(e)?od(e):e,o=oa(t),a=oa(e);return ds(t)?JCe(t,i,r):o0(e)?XCe(t,e,r):o&&a?Jo("Omit",[t,n],r):!o&&a?Jo("Omit",[t,n],r):o&&!a?Jo("Omit",[t,n],r):rt({...eZ(t,i),...r})}s(Sx,"Omit");function Xrt(t,e,r){return{[e]:Sx(t,[e],cs(r))}}s(Xrt,"FromPropertyKey");function Zrt(t,e,r){return e.reduce((n,i)=>({...n,...Xrt(t,i,r)}),{})}s(Zrt,"FromPropertyKeys");function ent(t,e,r){return Zrt(t,e.keys,r)}s(ent,"FromMappedKey");function XCe(t,e,r){let n=ent(t,e,r);return Yi(n)}s(XCe,"OmitFromMappedKey");f();f();f();function tnt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Rx(t[i],e,cs(r));return n}s(tnt,"FromProperties");function rnt(t,e,r){return tnt(t.properties,e,r)}s(rnt,"FromMappedResult");function ZCe(t,e,r){let n=rnt(t,e,r);return Yi(n)}s(ZCe,"PickFromMappedResult");function nnt(t,e){return t.map(r=>tZ(r,e))}s(nnt,"FromIntersect");function int(t,e){return t.map(r=>tZ(r,e))}s(int,"FromUnion");function ont(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(ont,"FromProperties");function snt(t,e){let r=zs(t,[Ds,"$id","required","properties"]),n=ont(t.properties,e);return lo(n,r)}s(snt,"FromObject");function ant(t){let e=t.reduce((r,n)=>UL(n)?[...r,Ni(n)]:r,[]);return ao(e)}s(ant,"UnionFromPropertyKeys");function tZ(t,e){return $s(t)?Oc(nnt(t.allOf,e)):qi(t)?ao(int(t.anyOf,e)):Ia(t)?snt(t,e):lo({})}s(tZ,"PickResolve");function Rx(t,e,r){let n=ba(e)?ant(e):e,i=Ns(e)?od(e):e,o=oa(t),a=oa(e);return ds(t)?ZCe(t,i,r):o0(e)?exe(t,e,r):o&&a?Jo("Pick",[t,n],r):!o&&a?Jo("Pick",[t,n],r):o&&!a?Jo("Pick",[t,n],r):rt({...tZ(t,i),...r})}s(Rx,"Pick");function lnt(t,e,r){return{[e]:Rx(t,[e],cs(r))}}s(lnt,"FromPropertyKey");function cnt(t,e,r){return e.reduce((n,i)=>({...n,...lnt(t,i,r)}),{})}s(cnt,"FromPropertyKeys");function unt(t,e,r){return cnt(t,e.keys,r)}s(unt,"FromMappedKey");function exe(t,e,r){let n=unt(t,e,r);return Yi(n)}s(exe,"PickFromMappedKey");f();f();function dnt(t,e){return Jo("Partial",[Jo(t,e)])}s(dnt,"FromComputed");function fnt(t){return Jo("Partial",[_f(t)])}s(fnt,"FromRef");function pnt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Qc(t[r]);return e}s(pnt,"FromProperties");function mnt(t){let e=zs(t,[Ds,"$id","required","properties"]),r=pnt(t.properties);return lo(r,e)}s(mnt,"FromObject");function txe(t){return t.map(e=>rxe(e))}s(txe,"FromRest");function rxe(t){return im(t)?dnt(t.target,t.parameters):oa(t)?fnt(t.$ref):$s(t)?Oc(txe(t.allOf)):qi(t)?ao(txe(t.anyOf)):Ia(t)?mnt(t):oI(t)||A1(t)||am(t)||i0(t)||RB(t)||lm(t)||y1(t)||kB(t)||C1(t)?t:lo({})}s(rxe,"PartialResolve");function eS(t,e){return ds(t)?nxe(t,e):rt({...rxe(t),...e})}s(eS,"Partial");function hnt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=eS(t[n],cs(e));return r}s(hnt,"FromProperties");function gnt(t,e){return hnt(t.properties,e)}s(gnt,"FromMappedResult");function nxe(t,e){let r=gnt(t,e);return Yi(r)}s(nxe,"PartialFromMappedResult");f();f();function Ant(t,e){return Jo("Required",[Jo(t,e)])}s(Ant,"FromComputed");function ynt(t){return Jo("Required",[_f(t)])}s(ynt,"FromRef");function Cnt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=zs(t[r],[cc]);return e}s(Cnt,"FromProperties");function xnt(t){let e=zs(t,[Ds,"$id","required","properties"]),r=Cnt(t.properties);return lo(r,e)}s(xnt,"FromObject");function ixe(t){return t.map(e=>oxe(e))}s(ixe,"FromRest");function oxe(t){return im(t)?Ant(t.target,t.parameters):oa(t)?ynt(t.$ref):$s(t)?Oc(ixe(t.allOf)):qi(t)?ao(ixe(t.anyOf)):Ia(t)?xnt(t):oI(t)||A1(t)||am(t)||i0(t)||RB(t)||lm(t)||y1(t)||kB(t)||C1(t)?t:lo({})}s(oxe,"RequiredResolve");function tS(t,e){return ds(t)?sxe(t,e):rt({...oxe(t),...e})}s(tS,"Required");function vnt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=tS(t[n],e);return r}s(vnt,"FromProperties");function bnt(t,e){return vnt(t.properties,e)}s(bnt,"FromMappedResult");function sxe(t,e){let r=bnt(t,e);return Yi(r)}s(sxe,"RequiredFromMappedResult");function Ent(t,e){return e.map(r=>oa(r)?rZ(t,r.$ref):l0(t,r))}s(Ent,"DereferenceParameters");function rZ(t,e){return e in t?oa(t[e])?rZ(t,t[e].$ref):l0(t,t[e]):ri()}s(rZ,"Dereference");function Int(t){return z_(t[0])}s(Int,"FromAwaited");function Tnt(t){return wx(t[0],t[1])}s(Tnt,"FromIndex");function wnt(t){return Y_(t[0])}s(wnt,"FromKeyOf");function _nt(t){return eS(t[0])}s(_nt,"FromPartial");function Snt(t){return Sx(t[0],t[1])}s(Snt,"FromOmit");function Rnt(t){return Rx(t[0],t[1])}s(Rnt,"FromPick");function knt(t){return tS(t[0])}s(knt,"FromRequired");function Bnt(t,e,r){let n=Ent(t,r);return e==="Awaited"?Int(n):e==="Index"?Tnt(n):e==="KeyOf"?wnt(n):e==="Partial"?_nt(n):e==="Omit"?Snt(n):e==="Pick"?Rnt(n):e==="Required"?knt(n):ri()}s(Bnt,"FromComputed");function Pnt(t,e){return U_(l0(t,e))}s(Pnt,"FromArray");function Dnt(t,e){return q_(l0(t,e))}s(Dnt,"FromAsyncIterator");function Nnt(t,e,r){return W_(qB(t,e),l0(t,r))}s(Nnt,"FromConstructor");function Lnt(t,e,r){return lg(qB(t,e),l0(t,r))}s(Lnt,"FromFunction");function Fnt(t,e){return Oc(qB(t,e))}s(Fnt,"FromIntersect");function Mnt(t,e){return $_(l0(t,e))}s(Mnt,"FromIterator");function Qnt(t,e){return lo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:l0(t,e[n])}),{}))}s(Qnt,"FromObject");function Ont(t,e){let[r,n]=[l0(t,sF(e)),oF(e)],i=L_(e);return i.patternProperties[n]=r,i}s(Ont,"FromRecord");function Unt(t,e){return oa(e)?{...rZ(t,e.$ref),[Ds]:e[Ds]}:e}s(Unt,"FromTransform");function qnt(t,e){return Tf(qB(t,e))}s(qnt,"FromTuple");function Wnt(t,e){return ao(qB(t,e))}s(Wnt,"FromUnion");function qB(t,e){return e.map(r=>l0(t,r))}s(qB,"FromTypes");function l0(t,e){return id(e)?rt(l0(t,zs(e,[cc])),e):M_(e)?rt(l0(t,zs(e,[rm])),e):so(e)?rt(Unt(t,e),e):nm(e)?rt(Pnt(t,e.items),e):iI(e)?rt(Dnt(t,e.items),e):im(e)?rt(Bnt(t,e.target,e.parameters)):om(e)?rt(Nnt(t,e.parameters,e.returns),e):sm(e)?rt(Lnt(t,e.parameters,e.returns),e):$s(e)?rt(Fnt(t,e.allOf),e):sI(e)?rt(Mnt(t,e.items),e):Ia(e)?rt(Qnt(t,e.properties),e):lI(e)?rt(Ont(t,e)):a0(e)?rt(qnt(t,e.items||[]),e):qi(e)?rt(Wnt(t,e.anyOf),e):e}s(l0,"FromType");function Gnt(t,e){return e in t?l0(t,t[e]):ri()}s(Gnt,"ComputeType");function axe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:Gnt(t,r)}),{})}s(axe,"ComputeModuleProperties");var nZ=class{static{s(this,"TModule")}constructor(e){let r=axe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:rt(this.$defs[e],r)};return rt({[Ze]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function lxe(t){return new nZ(t)}s(lxe,"Module");f();function cxe(t,e){return rt({[Ze]:"Not",not:t},e)}s(cxe,"Not");f();function uxe(t,e){return sm(t)?Tf(t.parameters,e):ri()}s(uxe,"Parameters");f();var Hnt=0;function dxe(t,e={}){Ea(e.$id)&&(e.$id=`T${Hnt++}`);let r=L_(t({[Ze]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,rt({[Ef]:"Recursive",...r},e)}s(dxe,"Recursive");f();function fxe(t,e){let r=Uo(t)?new globalThis.RegExp(t):t;return rt({[Ze]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(fxe,"RegExp");f();function jnt(t){return $s(t)?t.allOf:qi(t)?t.anyOf:a0(t)?t.items??[]:[]}s(jnt,"RestResolve");function pxe(t){return jnt(t)}s(pxe,"Rest");f();function mxe(t,e){return sm(t)?rt(t.returns,e):ri(e)}s(mxe,"ReturnType");f();var iZ=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new oZ(this.schema,e)}},oZ=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[Ds].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[Ds].Decode(a)),"Decode")};return{...r,[Ds]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Ds]:n}}Encode(e){return so(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function hxe(t){return new iZ(t)}s(hxe,"Transform");f();function gxe(t={}){return rt({[Ze]:t[Ze]??"Unsafe"},t)}s(gxe,"Unsafe");f();function Axe(t){return rt({[Ze]:"Void",type:"void"},t)}s(Axe,"Void");f();var sZ={};u1(sZ,{Any:()=>Tx,Argument:()=>eCe,Array:()=>U_,AsyncIterator:()=>q_,Awaited:()=>z_,BigInt:()=>V_,Boolean:()=>HL,Capitalize:()=>$Ce,Composite:()=>CCe,Const:()=>xCe,Constructor:()=>W_,ConstructorParameters:()=>vCe,Date:()=>YL,Enum:()=>bCe,Exclude:()=>X_,Extends:()=>J_,Extract:()=>Z_,Function:()=>lg,Index:()=>wx,InstanceType:()=>UCe,Instantiate:()=>WCe,Integer:()=>GCe,Intersect:()=>Oc,Iterator:()=>$_,KeyOf:()=>Y_,Literal:()=>Ni,Lowercase:()=>zCe,Mapped:()=>pCe,Module:()=>lxe,Never:()=>ri,Not:()=>cxe,Null:()=>KL,Number:()=>If,Object:()=>lo,Omit:()=>Sx,Optional:()=>Qc,Parameters:()=>uxe,Partial:()=>eS,Pick:()=>Rx,Promise:()=>$L,Readonly:()=>sd,ReadonlyOptional:()=>nF,Record:()=>iF,Recursive:()=>dxe,Ref:()=>_f,RegExp:()=>fxe,Required:()=>tS,Rest:()=>pxe,ReturnType:()=>mxe,String:()=>bu,Symbol:()=>JL,TemplateLiteral:()=>jL,Transform:()=>hxe,Tuple:()=>Tf,Uint8Array:()=>ZL,Uncapitalize:()=>YCe,Undefined:()=>XL,Union:()=>ao,Unknown:()=>um,Unsafe:()=>gxe,Uppercase:()=>KCe,Void:()=>Axe});f();var I=sZ;f();f();function Vnt(t){switch(t.errorType){case Ke.ArrayContains:return"Expected array to contain at least one matching value";case Ke.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Ke.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Ke.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Ke.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Ke.ArrayUniqueItems:return"Expected array elements to be unique";case Ke.Array:return"Expected array";case Ke.AsyncIterator:return"Expected AsyncIterator";case Ke.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Ke.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Ke.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Ke.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Ke.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Ke.BigInt:return"Expected bigint";case Ke.Boolean:return"Expected boolean";case Ke.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Ke.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Ke.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Ke.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Ke.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Ke.Date:return"Expected Date";case Ke.Function:return"Expected function";case Ke.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Ke.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Ke.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Ke.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Ke.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Ke.Integer:return"Expected integer";case Ke.IntersectUnevaluatedProperties:return"Unexpected property";case Ke.Intersect:return"Expected all values to match";case Ke.Iterator:return"Expected Iterator";case Ke.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Ke.Never:return"Never";case Ke.Not:return"Value should not match";case Ke.Null:return"Expected null";case Ke.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Ke.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Ke.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Ke.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Ke.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Ke.Number:return"Expected number";case Ke.Object:return"Expected object";case Ke.ObjectAdditionalProperties:return"Unexpected property";case Ke.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Ke.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Ke.ObjectRequiredProperty:return"Expected required property";case Ke.Promise:return"Expected Promise";case Ke.RegExp:return"Expected string to match regular expression";case Ke.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Ke.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Ke.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Ke.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Ke.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Ke.String:return"Expected string";case Ke.Symbol:return"Expected symbol";case Ke.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Ke.Tuple:return"Expected tuple";case Ke.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Ke.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Ke.Uint8Array:return"Expected Uint8Array";case Ke.Undefined:return"Expected undefined";case Ke.Union:return"Expected union value";case Ke.Void:return"Expected void";case Ke.Kind:return`Expected kind '${t.schema[Ze]}'`;default:return"Unknown error type"}}s(Vnt,"DefaultErrorFunction");var $nt=Vnt;function yxe(){return $nt}s(yxe,"GetErrorFunction");f();var aZ=class extends gn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function znt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new aZ(t);return Ki(r,e)}s(znt,"Resolve");function Bl(t,e){return!Ui(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Bl,"Pushref");function Ki(t,e){return t[Ze]==="This"||t[Ze]==="Ref"?znt(t,e):t}s(Ki,"Deref");f();var lZ=class extends gn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},c0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(c0||(c0={}));var rS=BigInt("14695981039346656037"),[Ynt,Knt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Jnt=Array.from({length:256}).map((t,e)=>BigInt(e)),Cxe=new Float64Array(1),xxe=new DataView(Cxe.buffer),vxe=new Uint8Array(Cxe.buffer);function*Xnt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(Xnt,"NumberToBytes");function Znt(t){qc(c0.Array);for(let e of t)nS(e)}s(Znt,"ArrayType");function eit(t){qc(c0.Boolean),qc(t?1:0)}s(eit,"BooleanType");function tit(t){qc(c0.BigInt),xxe.setBigInt64(0,t);for(let e of vxe)qc(e)}s(tit,"BigIntType");function rit(t){qc(c0.Date),nS(t.getTime())}s(rit,"DateType");function nit(t){qc(c0.Null)}s(nit,"NullType");function iit(t){qc(c0.Number),xxe.setFloat64(0,t);for(let e of vxe)qc(e)}s(iit,"NumberType");function oit(t){qc(c0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())nS(e),nS(t[e])}s(oit,"ObjectType");function sit(t){qc(c0.String);for(let e=0;e<t.length;e++)for(let r of Xnt(t.charCodeAt(e)))qc(r)}s(sit,"StringType");function ait(t){qc(c0.Symbol),nS(t.description)}s(ait,"SymbolType");function lit(t){qc(c0.Uint8Array);for(let e=0;e<t.length;e++)qc(t[e])}s(lit,"Uint8ArrayType");function cit(t){return qc(c0.Undefined)}s(cit,"UndefinedType");function nS(t){if(hn(t))return Znt(t);if(og(t))return eit(t);if(lc(t))return tit(t);if(xu(t))return rit(t);if(h1(t))return nit(t);if(Ur(t))return iit(t);if(ci(t))return oit(t);if(Ui(t))return sit(t);if(g1(t))return ait(t);if(F_(t))return lit(t);if(us(t))return cit(t);throw new lZ(t)}s(nS,"Visit");function qc(t){rS=rS^Jnt[t],rS=rS*Ynt%Knt}s(qc,"FNV1A64");function kx(t){return rS=BigInt("14695981039346656037"),nS(t),rS}s(kx,"Hash");f();var cZ=class extends gn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function uit(t){return t[Ze]==="Any"||t[Ze]==="Unknown"}s(uit,"IsAnyOrUnknown");function bi(t){return t!==void 0}s(bi,"IsDefined");function dit(t,e,r){return!0}s(dit,"FromAny");function fit(t,e,r){return!0}s(fit,"FromArgument");function pit(t,e,r){if(!hn(r)||bi(t.minItems)&&!(r.length>=t.minItems)||bi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Pl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let l=kx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(bi(t.contains)||Ur(t.minContains)||Ur(t.maxContains)))return!0;let n=bi(t.contains)?t.contains:ri(),i=r.reduce((o,a)=>Pl(n,e,a)?o+1:o,0);return!(i===0||Ur(t.minContains)&&i<t.minContains||Ur(t.maxContains)&&i>t.maxContains)}s(pit,"FromArray");function mit(t,e,r){return FL(r)}s(mit,"FromAsyncIterator");function hit(t,e,r){return!(!lc(r)||bi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||bi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||bi(t.maximum)&&!(r<=t.maximum)||bi(t.minimum)&&!(r>=t.minimum)||bi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(hit,"FromBigInt");function git(t,e,r){return og(r)}s(git,"FromBoolean");function Ait(t,e,r){return Pl(t.returns,e,r.prototype)}s(Ait,"FromConstructor");function yit(t,e,r){return!(!xu(r)||bi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||bi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||bi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||bi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||bi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(yit,"FromDate");function Cit(t,e,r){return bx(r)}s(Cit,"FromFunction");function xit(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Pl(i,[...e,...n],r)}s(xit,"FromImport");function vit(t,e,r){return!(!OL(r)||bi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||bi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||bi(t.maximum)&&!(r<=t.maximum)||bi(t.minimum)&&!(r>=t.minimum)||bi(t.multipleOf)&&r%t.multipleOf!==0)}s(vit,"FromInteger");function bit(t,e,r){let n=t.allOf.every(i=>Pl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(b1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(Ns(t.unevaluatedProperties)){let i=new RegExp(b1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Pl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(bit,"FromIntersect");function Eit(t,e,r){return ML(r)}s(Eit,"FromIterator");function Iit(t,e,r){return r===t.const}s(Iit,"FromLiteral");function Tit(t,e,r){return!1}s(Tit,"FromNever");function wit(t,e,r){return!Pl(t.not,e,r)}s(wit,"FromNot");function _it(t,e,r){return h1(r)}s(_it,"FromNull");function Sit(t,e,r){return!(!Ko.IsNumberLike(r)||bi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||bi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||bi(t.minimum)&&!(r>=t.minimum)||bi(t.maximum)&&!(r<=t.maximum)||bi(t.multipleOf)&&r%t.multipleOf!==0)}s(Sit,"FromNumber");function Rit(t,e,r){if(!Ko.IsObjectLike(r)||bi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||bi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Pl(o,e,r[i])||(E1(o)||uit(o))&&!(i in r))return!1}else if(Ko.IsExactOptionalProperty(r,i)&&!Pl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Pl(t.additionalProperties,e,r[o])):!0}s(Rit,"FromObject");function kit(t,e,r){return QL(r)}s(kit,"FromPromise");function Bit(t,e,r){if(!Ko.IsRecordLike(r)||bi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||bi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,d])=>o.test(u)?Pl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,d])=>o.test(u)?!0:Pl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&l&&c}s(Bit,"FromRecord");function Pit(t,e,r){return Pl(Ki(t,e),e,r)}s(Pit,"FromRef");function Dit(t,e,r){let n=new RegExp(t.source,t.flags);return bi(t.minLength)&&!(r.length>=t.minLength)||bi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(Dit,"FromRegExp");function Nit(t,e,r){return!Ui(r)||bi(t.minLength)&&!(r.length>=t.minLength)||bi(t.maxLength)&&!(r.length<=t.maxLength)||bi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:bi(t.format)?cm.Has(t.format)?cm.Get(t.format)(r):!1:!0}s(Nit,"FromString");function Lit(t,e,r){return g1(r)}s(Lit,"FromSymbol");function Fit(t,e,r){return Ui(r)&&new RegExp(t.pattern).test(r)}s(Fit,"FromTemplateLiteral");function Mit(t,e,r){return Pl(Ki(t,e),e,r)}s(Mit,"FromThis");function Qit(t,e,r){if(!hn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Pl(t.items[n],e,r[n]))return!1;return!0}s(Qit,"FromTuple");function Oit(t,e,r){return us(r)}s(Oit,"FromUndefined");function Uit(t,e,r){return t.anyOf.some(n=>Pl(n,e,r))}s(Uit,"FromUnion");function qit(t,e,r){return!(!F_(r)||bi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||bi(t.minByteLength)&&!(r.length>=t.minByteLength))}s(qit,"FromUint8Array");function Wit(t,e,r){return!0}s(Wit,"FromUnknown");function Git(t,e,r){return Ko.IsVoidLike(r)}s(Git,"FromVoid");function Hit(t,e,r){return vu.Has(t[Ze])?vu.Get(t[Ze])(t,r):!1}s(Hit,"FromKind");function Pl(t,e,r){let n=bi(t.$id)?Bl(t,e):e,i=t;switch(i[Ze]){case"Any":return dit(i,n,r);case"Argument":return fit(i,n,r);case"Array":return pit(i,n,r);case"AsyncIterator":return mit(i,n,r);case"BigInt":return hit(i,n,r);case"Boolean":return git(i,n,r);case"Constructor":return Ait(i,n,r);case"Date":return yit(i,n,r);case"Function":return Cit(i,n,r);case"Import":return xit(i,n,r);case"Integer":return vit(i,n,r);case"Intersect":return bit(i,n,r);case"Iterator":return Eit(i,n,r);case"Literal":return Iit(i,n,r);case"Never":return Tit(i,n,r);case"Not":return wit(i,n,r);case"Null":return _it(i,n,r);case"Number":return Sit(i,n,r);case"Object":return Rit(i,n,r);case"Promise":return kit(i,n,r);case"Record":return Bit(i,n,r);case"Ref":return Pit(i,n,r);case"RegExp":return Dit(i,n,r);case"String":return Nit(i,n,r);case"Symbol":return Lit(i,n,r);case"TemplateLiteral":return Fit(i,n,r);case"This":return Mit(i,n,r);case"Tuple":return Qit(i,n,r);case"Undefined":return Oit(i,n,r);case"Union":return Uit(i,n,r);case"Uint8Array":return qit(i,n,r);case"Unknown":return Wit(i,n,r);case"Void":return Git(i,n,r);default:if(!vu.Has(i[Ze]))throw new cZ(i);return Hit(i,n,r)}}s(Pl,"Visit");function fi(...t){return t.length===3?Pl(t[0],t[1],t[2]):Pl(t[0],[],t[1])}s(fi,"Check");var Ke;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Ke||(Ke={}));var uZ=class extends gn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function I1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(I1,"EscapeKey");function Ei(t){return t!==void 0}s(Ei,"IsDefined");var Bx=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function er(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:yxe()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(er,"Create");function*jit(t,e,r,n){}s(jit,"FromAny");function*Vit(t,e,r,n){}s(Vit,"FromArgument");function*$it(t,e,r,n){if(!hn(n))return yield er(Ke.Array,t,r,n);Ei(t.minItems)&&!(n.length>=t.minItems)&&(yield er(Ke.ArrayMinItems,t,r,n)),Ei(t.maxItems)&&!(n.length<=t.maxItems)&&(yield er(Ke.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Dl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of n){let c=kx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield er(Ke.ArrayUniqueItems,t,r,n)),!(Ei(t.contains)||Ei(t.minContains)||Ei(t.maxContains)))return;let i=Ei(t.contains)?t.contains:ri(),o=n.reduce((a,l,c)=>Dl(i,e,`${r}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield er(Ke.ArrayContains,t,r,n)),Ur(t.minContains)&&o<t.minContains&&(yield er(Ke.ArrayMinContains,t,r,n)),Ur(t.maxContains)&&o>t.maxContains&&(yield er(Ke.ArrayMaxContains,t,r,n))}s($it,"FromArray");function*zit(t,e,r,n){FL(n)||(yield er(Ke.AsyncIterator,t,r,n))}s(zit,"FromAsyncIterator");function*Yit(t,e,r,n){if(!lc(n))return yield er(Ke.BigInt,t,r,n);Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.BigIntExclusiveMaximum,t,r,n)),Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.BigIntExclusiveMinimum,t,r,n)),Ei(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.BigIntMaximum,t,r,n)),Ei(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.BigIntMinimum,t,r,n)),Ei(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield er(Ke.BigIntMultipleOf,t,r,n))}s(Yit,"FromBigInt");function*Kit(t,e,r,n){og(n)||(yield er(Ke.Boolean,t,r,n))}s(Kit,"FromBoolean");function*Jit(t,e,r,n){yield*Dl(t.returns,e,r,n.prototype)}s(Jit,"FromConstructor");function*Xit(t,e,r,n){if(!xu(n))return yield er(Ke.Date,t,r,n);Ei(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield er(Ke.DateExclusiveMaximumTimestamp,t,r,n)),Ei(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield er(Ke.DateExclusiveMinimumTimestamp,t,r,n)),Ei(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield er(Ke.DateMaximumTimestamp,t,r,n)),Ei(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield er(Ke.DateMinimumTimestamp,t,r,n)),Ei(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield er(Ke.DateMultipleOfTimestamp,t,r,n))}s(Xit,"FromDate");function*Zit(t,e,r,n){bx(n)||(yield er(Ke.Function,t,r,n))}s(Zit,"FromFunction");function*eot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Dl(o,[...e,...i],r,n)}s(eot,"FromImport");function*tot(t,e,r,n){if(!OL(n))return yield er(Ke.Integer,t,r,n);Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.IntegerExclusiveMaximum,t,r,n)),Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.IntegerExclusiveMinimum,t,r,n)),Ei(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.IntegerMaximum,t,r,n)),Ei(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.IntegerMinimum,t,r,n)),Ei(t.multipleOf)&&n%t.multipleOf!==0&&(yield er(Ke.IntegerMultipleOf,t,r,n))}s(tot,"FromInteger");function*rot(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Dl(o,e,r,n))i=!0,yield a;if(i)return yield er(Ke.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(b1(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield er(Ke.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(b1(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let l=Dl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();l.done||(yield l.value)}}}s(rot,"FromIntersect");function*not(t,e,r,n){ML(n)||(yield er(Ke.Iterator,t,r,n))}s(not,"FromIterator");function*iot(t,e,r,n){n!==t.const&&(yield er(Ke.Literal,t,r,n))}s(iot,"FromLiteral");function*oot(t,e,r,n){yield er(Ke.Never,t,r,n)}s(oot,"FromNever");function*sot(t,e,r,n){Dl(t.not,e,r,n).next().done===!0&&(yield er(Ke.Not,t,r,n))}s(sot,"FromNot");function*aot(t,e,r,n){h1(n)||(yield er(Ke.Null,t,r,n))}s(aot,"FromNull");function*lot(t,e,r,n){if(!Ko.IsNumberLike(n))return yield er(Ke.Number,t,r,n);Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.NumberExclusiveMaximum,t,r,n)),Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.NumberExclusiveMinimum,t,r,n)),Ei(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.NumberMaximum,t,r,n)),Ei(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.NumberMinimum,t,r,n)),Ei(t.multipleOf)&&n%t.multipleOf!==0&&(yield er(Ke.NumberMultipleOf,t,r,n))}s(lot,"FromNumber");function*cot(t,e,r,n){if(!Ko.IsObjectLike(n))return yield er(Ke.Object,t,r,n);Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield er(Ke.ObjectMinProperties,t,r,n)),Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield er(Ke.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let l of i)a.includes(l)||(yield er(Ke.ObjectRequiredProperty,t.properties[l],`${r}/${I1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield er(Ke.ObjectAdditionalProperties,t,`${r}/${I1(l)}`,n[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*Dl(t.additionalProperties,e,`${r}/${I1(l)}`,n[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*Dl(c,e,`${r}/${I1(l)}`,n[l]),E1(t)&&!(l in n)&&(yield er(Ke.ObjectRequiredProperty,c,`${r}/${I1(l)}`,void 0))):Ko.IsExactOptionalProperty(n,l)&&(yield*Dl(c,e,`${r}/${I1(l)}`,n[l]))}}s(cot,"FromObject");function*uot(t,e,r,n){QL(n)||(yield er(Ke.Promise,t,r,n))}s(uot,"FromPromise");function*dot(t,e,r,n){if(!Ko.IsRecordLike(n))return yield er(Ke.Object,t,r,n);Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield er(Ke.ObjectMinProperties,t,r,n)),Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield er(Ke.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(n))a.test(l)&&(yield*Dl(o,e,`${r}/${I1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(n))a.test(l)||(yield*Dl(t.additionalProperties,e,`${r}/${I1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(n))if(!a.test(l))return yield er(Ke.ObjectAdditionalProperties,t,`${r}/${I1(l)}`,c)}}s(dot,"FromRecord");function*fot(t,e,r,n){yield*Dl(Ki(t,e),e,r,n)}s(fot,"FromRef");function*pot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);if(Ei(t.minLength)&&!(n.length>=t.minLength)&&(yield er(Ke.StringMinLength,t,r,n)),Ei(t.maxLength)&&!(n.length<=t.maxLength)&&(yield er(Ke.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield er(Ke.RegExp,t,r,n)}s(pot,"FromRegExp");function*mot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);Ei(t.minLength)&&!(n.length>=t.minLength)&&(yield er(Ke.StringMinLength,t,r,n)),Ei(t.maxLength)&&!(n.length<=t.maxLength)&&(yield er(Ke.StringMaxLength,t,r,n)),Ui(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield er(Ke.StringPattern,t,r,n))),Ui(t.format)&&(cm.Has(t.format)?cm.Get(t.format)(n)||(yield er(Ke.StringFormat,t,r,n)):yield er(Ke.StringFormatUnknown,t,r,n))}s(mot,"FromString");function*hot(t,e,r,n){g1(n)||(yield er(Ke.Symbol,t,r,n))}s(hot,"FromSymbol");function*got(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);new RegExp(t.pattern).test(n)||(yield er(Ke.StringPattern,t,r,n))}s(got,"FromTemplateLiteral");function*Aot(t,e,r,n){yield*Dl(Ki(t,e),e,r,n)}s(Aot,"FromThis");function*yot(t,e,r,n){if(!hn(n))return yield er(Ke.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield er(Ke.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield er(Ke.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Dl(t.items[i],e,`${r}/${i}`,n[i])}s(yot,"FromTuple");function*Cot(t,e,r,n){us(n)||(yield er(Ke.Undefined,t,r,n))}s(Cot,"FromUndefined");function*xot(t,e,r,n){if(fi(t,e,n))return;let i=t.anyOf.map(o=>new Bx(Dl(o,e,r,n)));yield er(Ke.Union,t,r,n,i)}s(xot,"FromUnion");function*vot(t,e,r,n){if(!F_(n))return yield er(Ke.Uint8Array,t,r,n);Ei(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield er(Ke.Uint8ArrayMaxByteLength,t,r,n)),Ei(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield er(Ke.Uint8ArrayMinByteLength,t,r,n))}s(vot,"FromUint8Array");function*bot(t,e,r,n){}s(bot,"FromUnknown");function*Eot(t,e,r,n){Ko.IsVoidLike(n)||(yield er(Ke.Void,t,r,n))}s(Eot,"FromVoid");function*Iot(t,e,r,n){vu.Get(t[Ze])(t,n)||(yield er(Ke.Kind,t,r,n))}s(Iot,"FromKind");function*Dl(t,e,r,n){let i=Ei(t.$id)?[...e,t]:e,o=t;switch(o[Ze]){case"Any":return yield*jit(o,i,r,n);case"Argument":return yield*Vit(o,i,r,n);case"Array":return yield*$it(o,i,r,n);case"AsyncIterator":return yield*zit(o,i,r,n);case"BigInt":return yield*Yit(o,i,r,n);case"Boolean":return yield*Kit(o,i,r,n);case"Constructor":return yield*Jit(o,i,r,n);case"Date":return yield*Xit(o,i,r,n);case"Function":return yield*Zit(o,i,r,n);case"Import":return yield*eot(o,i,r,n);case"Integer":return yield*tot(o,i,r,n);case"Intersect":return yield*rot(o,i,r,n);case"Iterator":return yield*not(o,i,r,n);case"Literal":return yield*iot(o,i,r,n);case"Never":return yield*oot(o,i,r,n);case"Not":return yield*sot(o,i,r,n);case"Null":return yield*aot(o,i,r,n);case"Number":return yield*lot(o,i,r,n);case"Object":return yield*cot(o,i,r,n);case"Promise":return yield*uot(o,i,r,n);case"Record":return yield*dot(o,i,r,n);case"Ref":return yield*fot(o,i,r,n);case"RegExp":return yield*pot(o,i,r,n);case"String":return yield*mot(o,i,r,n);case"Symbol":return yield*hot(o,i,r,n);case"TemplateLiteral":return yield*got(o,i,r,n);case"This":return yield*Aot(o,i,r,n);case"Tuple":return yield*yot(o,i,r,n);case"Undefined":return yield*Cot(o,i,r,n);case"Union":return yield*xot(o,i,r,n);case"Uint8Array":return yield*vot(o,i,r,n);case"Unknown":return yield*bot(o,i,r,n);case"Void":return yield*Eot(o,i,r,n);default:if(!vu.Has(o[Ze]))throw new uZ(t);return yield*Iot(o,i,r,n)}}s(Dl,"Visit");function ug(...t){let e=t.length===3?Dl(t[0],t[1],"",t[2]):Dl(t[0],[],"",t[1]);return new Bx(e)}s(ug,"Errors");f();f();var iS=class extends gn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},dZ=class extends gn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function Ls(t,e,r){try{return so(t)?t[Ds].Decode(r):r}catch(n){throw new dZ(t,e,r,n)}}s(Ls,"Default");function Tot(t,e,r,n){return hn(n)?Ls(t,r,n.map((i,o)=>pm(t.items,e,`${r}/${o}`,i))):Ls(t,r,n)}s(Tot,"FromArray");function wot(t,e,r,n){if(!ci(n)||n0(n))return Ls(t,r,n);let i=zL(t),o=i.map(d=>d[0]),a={...n};for(let[d,p]of i)d in a&&(a[d]=pm(p,e,`${r}/${d}`,a[d]));if(!so(t.unevaluatedProperties))return Ls(t,r,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Ls(c,`${r}/${d}`,u[d]));return Ls(t,r,u)}s(wot,"FromIntersect");function _ot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=pm(o,[...e,...i],r,n);return Ls(t,r,a)}s(_ot,"FromImport");function Sot(t,e,r,n){return Ls(t,r,pm(t.not,e,r,n))}s(Sot,"FromNot");function Rot(t,e,r,n){if(!ci(n))return Ls(t,r,n);let i=ad(t),o={...n};for(let u of i)mn(o,u)&&(us(o[u])&&(!C1(t.properties[u])||Ko.IsExactOptionalProperty(o,u))||(o[u]=pm(t.properties[u],e,`${r}/${u}`,o[u])));if(!Ns(t.additionalProperties))return Ls(t,r,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Ls(l,`${r}/${u}`,c[u]));return Ls(t,r,c)}s(Rot,"FromObject");function kot(t,e,r,n){if(!ci(n))return Ls(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let d of Object.getOwnPropertyNames(n))o.test(d)&&(a[d]=pm(t.patternProperties[i],e,`${r}/${d}`,a[d]));if(!Ns(t.additionalProperties))return Ls(t,r,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Ls(c,`${r}/${d}`,u[d]));return Ls(t,r,u)}s(kot,"FromRecord");function Bot(t,e,r,n){let i=Ki(t,e);return Ls(t,r,pm(i,e,r,n))}s(Bot,"FromRef");function Pot(t,e,r,n){let i=Ki(t,e);return Ls(t,r,pm(i,e,r,n))}s(Pot,"FromThis");function Dot(t,e,r,n){return hn(n)&&hn(t.items)?Ls(t,r,t.items.map((i,o)=>pm(i,e,`${r}/${o}`,n[o]))):Ls(t,r,n)}s(Dot,"FromTuple");function Not(t,e,r,n){for(let i of t.anyOf){if(!fi(i,e,n))continue;let o=pm(i,e,r,n);return Ls(t,r,o)}return Ls(t,r,n)}s(Not,"FromUnion");function pm(t,e,r,n){let i=Bl(t,e),o=t;switch(t[Ze]){case"Array":return Tot(o,i,r,n);case"Import":return _ot(o,i,r,n);case"Intersect":return wot(o,i,r,n);case"Not":return Sot(o,i,r,n);case"Object":return Rot(o,i,r,n);case"Record":return kot(o,i,r,n);case"Ref":return Bot(o,i,r,n);case"Symbol":return Ls(o,r,n);case"This":return Pot(o,i,r,n);case"Tuple":return Dot(o,i,r,n);case"Union":return Not(o,i,r,n);default:return Ls(o,r,n)}}s(pm,"Visit");function oS(t,e,r){return pm(t,e,"",r)}s(oS,"TransformDecode");f();var sS=class extends gn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},fZ=class extends gn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function uc(t,e,r){try{return so(t)?t[Ds].Encode(r):r}catch(n){throw new fZ(t,e,r,n)}}s(uc,"Default");function Lot(t,e,r,n){let i=uc(t,r,n);return hn(i)?i.map((o,a)=>mm(t.items,e,`${r}/${a}`,o)):i}s(Lot,"FromArray");function Fot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=uc(t,r,n);return mm(o,[...e,...i],r,a)}s(Fot,"FromImport");function Mot(t,e,r,n){let i=uc(t,r,n);if(!ci(n)||n0(n))return i;let o=zL(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=mm(m,e,`${r}/${p}`,l[p]));if(!so(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=uc(u,`${r}/${p}`,d[p]));return d}s(Mot,"FromIntersect");function Qot(t,e,r,n){return uc(t.not,r,uc(t,r,n))}s(Qot,"FromNot");function Oot(t,e,r,n){let i=uc(t,r,n);if(!ci(i))return i;let o=ad(t),a={...i};for(let d of o)mn(a,d)&&(us(a[d])&&(!C1(t.properties[d])||Ko.IsExactOptionalProperty(a,d))||(a[d]=mm(t.properties[d],e,`${r}/${d}`,a[d])));if(!Ns(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=uc(c,`${r}/${d}`,u[d]));return u}s(Oot,"FromObject");function Uot(t,e,r,n){let i=uc(t,r,n);if(!ci(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(l[p]=mm(t.patternProperties[o],e,`${r}/${p}`,l[p]));if(!Ns(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=uc(u,`${r}/${p}`,d[p]));return d}s(Uot,"FromRecord");function qot(t,e,r,n){let i=Ki(t,e),o=mm(i,e,r,n);return uc(t,r,o)}s(qot,"FromRef");function Wot(t,e,r,n){let i=Ki(t,e),o=mm(i,e,r,n);return uc(t,r,o)}s(Wot,"FromThis");function Got(t,e,r,n){let i=uc(t,r,n);return hn(t.items)?t.items.map((o,a)=>mm(o,e,`${r}/${a}`,i[a])):[]}s(Got,"FromTuple");function Hot(t,e,r,n){for(let i of t.anyOf){if(!fi(i,e,n))continue;let o=mm(i,e,r,n);return uc(t,r,o)}for(let i of t.anyOf){let o=mm(i,e,r,n);if(fi(t,e,o))return uc(t,r,o)}return uc(t,r,n)}s(Hot,"FromUnion");function mm(t,e,r,n){let i=Bl(t,e),o=t;switch(t[Ze]){case"Array":return Lot(o,i,r,n);case"Import":return Fot(o,i,r,n);case"Intersect":return Mot(o,i,r,n);case"Not":return Qot(o,i,r,n);case"Object":return Oot(o,i,r,n);case"Record":return Uot(o,i,r,n);case"Ref":return qot(o,i,r,n);case"This":return Wot(o,i,r,n);case"Tuple":return Got(o,i,r,n);case"Union":return Hot(o,i,r,n);default:return uc(o,r,n)}}s(mm,"Visit");function aS(t,e,r){return mm(t,e,"",r)}s(aS,"TransformEncode");f();function jot(t,e){return so(t)||dl(t.items,e)}s(jot,"FromArray");function Vot(t,e){return so(t)||dl(t.items,e)}s(Vot,"FromAsyncIterator");function $ot(t,e){return so(t)||dl(t.returns,e)||t.parameters.some(r=>dl(r,e))}s($ot,"FromConstructor");function zot(t,e){return so(t)||dl(t.returns,e)||t.parameters.some(r=>dl(r,e))}s(zot,"FromFunction");function Yot(t,e){return so(t)||so(t.unevaluatedProperties)||t.allOf.some(r=>dl(r,e))}s(Yot,"FromIntersect");function Kot(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return so(t)||dl(n,[...r,...e])}s(Kot,"FromImport");function Jot(t,e){return so(t)||dl(t.items,e)}s(Jot,"FromIterator");function Xot(t,e){return so(t)||dl(t.not,e)}s(Xot,"FromNot");function Zot(t,e){return so(t)||Object.values(t.properties).some(r=>dl(r,e))||Ns(t.additionalProperties)&&dl(t.additionalProperties,e)}s(Zot,"FromObject");function est(t,e){return so(t)||dl(t.item,e)}s(est,"FromPromise");function tst(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return so(t)||dl(n,e)||Ns(t.additionalProperties)&&so(t.additionalProperties)}s(tst,"FromRecord");function rst(t,e){return so(t)?!0:dl(Ki(t,e),e)}s(rst,"FromRef");function nst(t,e){return so(t)?!0:dl(Ki(t,e),e)}s(nst,"FromThis");function ist(t,e){return so(t)||!us(t.items)&&t.items.some(r=>dl(r,e))}s(ist,"FromTuple");function ost(t,e){return so(t)||t.anyOf.some(r=>dl(r,e))}s(ost,"FromUnion");function dl(t,e){let r=Bl(t,e),n=t;if(t.$id&&pZ.has(t.$id))return!1;switch(t.$id&&pZ.add(t.$id),t[Ze]){case"Array":return jot(n,r);case"AsyncIterator":return Vot(n,r);case"Constructor":return $ot(n,r);case"Function":return zot(n,r);case"Import":return Kot(n,r);case"Intersect":return Yot(n,r);case"Iterator":return Jot(n,r);case"Not":return Xot(n,r);case"Object":return Zot(n,r);case"Promise":return est(n,r);case"Record":return tst(n,r);case"Ref":return rst(n,r);case"This":return nst(n,r);case"Tuple":return ist(n,r);case"Union":return ost(n,r);default:return so(t)}}s(dl,"Visit");var pZ=new Set;function T1(t,e){return pZ.clear(),dl(t,e)}s(T1,"HasTransform");var mZ=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=T1(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return ug(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new iS(this.schema,e,this.Errors(e).First());return this.hasTransform?oS(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?aS(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new sS(this.schema,e,this.Errors(e).First());return r}},w1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(w1||(w1={}));var aF;(function(t){function e(o){return o.length===0?!1:w1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(w1.IsAlpha(l)||w1.IsNumeric(l)||w1.DollarSign(l)||w1.IsUnderscore(l)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(aF||(aF={}));var hZ;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);w1.IsNumeric(o)||w1.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(hZ||(hZ={}));var gZ;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(gZ||(gZ={}));var AZ=class extends gn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},lF=class extends gn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},fI;(function(t){function e(a,l,c){return Ko.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${aF.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return Ko.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return Ko.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return Ko.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Ko.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(fI||(fI={}));var ms;(function(t){function e(ce){return ce[Ze]==="Any"||ce[Ze]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ce,Oe,ye){yield"true"}s(r,"FromAny");function*n(ce,Oe,ye){yield"true"}s(n,"FromArgument");function*i(ce,Oe,ye){yield`Array.isArray(${ye})`;let[tt,X]=[Me("value","any"),Me("acc","number")];Ur(ce.maxItems)&&(yield`${ye}.length <= ${ce.maxItems}`),Ur(ce.minItems)&&(yield`${ye}.length >= ${ce.minItems}`);let ne=he(ce.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${ne})`,ps(ce.contains)||Ur(ce.minContains)||Ur(ce.maxContains)){let We=ps(ce.contains)?ce.contains:ri(),De=he(We,Oe,"value"),be=Ur(ce.minContains)?[`(count >= ${ce.minContains})`]:[],ze=Ur(ce.maxContains)?[`(count <= ${ce.maxContains})`]:[],it=`const count = value.reduce((${X}, ${tt}) => ${De} ? acc + 1 : acc, 0)`,ht=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${ht}})(${ye})`}ce.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ce,Oe,ye){yield`(typeof ${ye} === 'bigint')`,lc(ce.exclusiveMaximum)&&(yield`${ye} < BigInt(${ce.exclusiveMaximum})`),lc(ce.exclusiveMinimum)&&(yield`${ye} > BigInt(${ce.exclusiveMinimum})`),lc(ce.maximum)&&(yield`${ye} <= BigInt(${ce.maximum})`),lc(ce.minimum)&&(yield`${ye} >= BigInt(${ce.minimum})`),lc(ce.multipleOf)&&(yield`(${ye} % BigInt(${ce.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(ce,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(ce,Oe,ye){yield*re(ce.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(ce,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Ur(ce.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ce.exclusiveMaximumTimestamp}`),Ur(ce.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ce.exclusiveMinimumTimestamp}`),Ur(ce.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ce.maximumTimestamp}`),Ur(ce.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ce.minimumTimestamp}`),Ur(ce.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ce.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ce,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ce,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(ce.$defs).reduce((X,ne)=>[...X,ce.$defs[ne]],[]);yield*re(_f(ce.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(ce,Oe,ye){yield`Number.isInteger(${ye})`,Ur(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Ur(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Ur(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Ur(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Ur(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ce,Oe,ye){let tt=ce.allOf.map(X=>he(X,Oe,ye)).join(" && ");if(ce.unevaluatedProperties===!1){let X=Se(`${new RegExp(b1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key))`;yield`(${tt} && ${ne})`}else if(ps(ce.unevaluatedProperties)){let X=Se(`${new RegExp(b1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key) || ${he(ce.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${ne})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(ce,Oe,ye){typeof ce.const=="number"||typeof ce.const=="boolean"?yield`(${ye} === ${ce.const})`:yield`(${ye} === '${gZ.Escape(ce.const)}')`}s(y,"FromLiteral");function*v(ce,Oe,ye){yield"false"}s(v,"FromNever");function*b(ce,Oe,ye){yield`(!${he(ce.not,Oe,ye)})`}s(b,"FromNot");function*E(ce,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(ce,Oe,ye){yield fI.IsNumberLike(ye),Ur(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Ur(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Ur(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Ur(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Ur(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(_,"FromNumber");function*k(ce,Oe,ye){yield fI.IsObjectLike(ye),Ur(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Ur(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let tt=Object.getOwnPropertyNames(ce.properties);for(let X of tt){let ne=aF.Encode(ye,X),We=ce.properties[X];if(ce.required&&ce.required.includes(X))yield*re(We,Oe,ne),(E1(We)||e(We))&&(yield`('${X}' in ${ye})`);else{let De=he(We,Oe,ne);yield fI.IsExactOptionalProperty(ye,X,De)}}if(ce.additionalProperties===!1)if(ce.required&&ce.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let X=`[${tt.map(ne=>`'${ne}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${X}.includes(key))`}if(typeof ce.additionalProperties=="object"){let X=he(ce.additionalProperties,Oe,`${ye}[key]`),ne=`[${tt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${ne}.includes(key) || ${X}))`}}s(k,"FromObject");function*B(ce,Oe,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*N(ce,Oe,ye){yield fI.IsRecordLike(ye),Ur(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Ur(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let[tt,X]=Object.entries(ce.patternProperties)[0],ne=Se(`${new RegExp(tt)}`),We=he(X,Oe,"value"),De=ps(ce.additionalProperties)?he(ce.additionalProperties,Oe,ye):ce.additionalProperties===!1?"false":"true",be=`(${ne}.test(key) ? ${We} : ${De})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*W(ce,Oe,ye){let tt=Ki(ce,Oe);if(ue.functions.has(ce.$ref))return yield`${Ne(ce.$ref)}(${ye})`;yield*re(tt,Oe,ye)}s(W,"FromRef");function*ee(ce,Oe,ye){let tt=Se(`${new RegExp(ce.source,ce.flags)};`);yield`(typeof ${ye} === 'string')`,Ur(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Ur(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),yield`${tt}.test(${ye})`}s(ee,"FromRegExp");function*me(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,Ur(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Ur(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),ce.pattern!==void 0&&(yield`${Se(`${new RegExp(ce.pattern)};`)}.test(${ye})`),ce.format!==void 0&&(yield`format('${ce.format}', ${ye})`)}s(me,"FromString");function*ae(ce,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(ae,"FromSymbol");function*H(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${Se(`${new RegExp(ce.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*U(ce,Oe,ye){yield`${Ne(ce.$ref)}(${ye})`}s(U,"FromThis");function*le(ce,Oe,ye){if(yield`Array.isArray(${ye})`,ce.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ce.maxItems})`;for(let tt=0;tt<ce.items.length;tt++)yield`${he(ce.items[tt],Oe,`${ye}[${tt}]`)}`}s(le,"FromTuple");function*ie(ce,Oe,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*V(ce,Oe,ye){yield`(${ce.anyOf.map(X=>he(X,Oe,ye)).join(" || ")})`}s(V,"FromUnion");function*O(ce,Oe,ye){yield`${ye} instanceof Uint8Array`,Ur(ce.maxByteLength)&&(yield`(${ye}.length <= ${ce.maxByteLength})`),Ur(ce.minByteLength)&&(yield`(${ye}.length >= ${ce.minByteLength})`)}s(O,"FromUint8Array");function*Y(ce,Oe,ye){yield"true"}s(Y,"FromUnknown");function*te(ce,Oe,ye){yield fI.IsVoidLike(ye)}s(te,"FromVoid");function*pe(ce,Oe,ye){let tt=ue.instances.size;ue.instances.set(tt,ce),yield`kind('${ce[Ze]}', ${tt}, ${ye})`}s(pe,"FromKind");function*re(ce,Oe,ye,tt=!0){let X=Ui(ce.$id)?[...Oe,ce]:Oe,ne=ce;if(tt&&Ui(ce.$id)){let We=Ne(ce.$id);if(ue.functions.has(We))return yield`${We}(${ye})`;{ue.functions.set(We,"<deferred>");let De=Je(We,ce,Oe,"value",!1);return ue.functions.set(We,De),yield`${We}(${ye})`}}switch(ne[Ze]){case"Any":return yield*r(ne,X,ye);case"Argument":return yield*n(ne,X,ye);case"Array":return yield*i(ne,X,ye);case"AsyncIterator":return yield*o(ne,X,ye);case"BigInt":return yield*a(ne,X,ye);case"Boolean":return yield*l(ne,X,ye);case"Constructor":return yield*c(ne,X,ye);case"Date":return yield*u(ne,X,ye);case"Function":return yield*d(ne,X,ye);case"Import":return yield*p(ne,X,ye);case"Integer":return yield*m(ne,X,ye);case"Intersect":return yield*h(ne,X,ye);case"Iterator":return yield*g(ne,X,ye);case"Literal":return yield*y(ne,X,ye);case"Never":return yield*v(ne,X,ye);case"Not":return yield*b(ne,X,ye);case"Null":return yield*E(ne,X,ye);case"Number":return yield*_(ne,X,ye);case"Object":return yield*k(ne,X,ye);case"Promise":return yield*B(ne,X,ye);case"Record":return yield*N(ne,X,ye);case"Ref":return yield*W(ne,X,ye);case"RegExp":return yield*ee(ne,X,ye);case"String":return yield*me(ne,X,ye);case"Symbol":return yield*ae(ne,X,ye);case"TemplateLiteral":return yield*H(ne,X,ye);case"This":return yield*U(ne,X,ye);case"Tuple":return yield*le(ne,X,ye);case"Undefined":return yield*ie(ne,X,ye);case"Union":return yield*V(ne,X,ye);case"Uint8Array":return yield*O(ne,X,ye);case"Unknown":return yield*Y(ne,X,ye);case"Void":return yield*te(ne,X,ye);default:if(!vu.Has(ne[Ze]))throw new AZ(ce);return yield*pe(ne,X,ye)}}s(re,"Visit");let ue={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(ce,Oe,ye,tt=!0){return`(${[...re(ce,Oe,ye,tt)].join(" && ")})`}s(he,"CreateExpression");function Ne(ce){return`check_${hZ.Encode(ce)}`}s(Ne,"CreateFunctionName");function Se(ce){let Oe=`local_${ue.variables.size}`;return ue.variables.set(Oe,`const ${Oe} = ${ce}`),Oe}s(Se,"CreateVariable");function Je(ce,Oe,ye,tt,X=!0){let[ne,We]=[`
`,it=>"".padStart(it," ")],De=Me("value","any"),be=ft("boolean"),ze=[...re(Oe,ye,tt,X)].map(it=>`${We(4)}${it}`).join(` &&${ne}`);return`function ${ce}(${De})${be} {${ne}${We(2)}return (${ne}${ze}${ne}${We(2)})
}`}s(Je,"CreateFunction");function Me(ce,Oe){let ye=ue.language==="typescript"?`: ${Oe}`:"";return`${ce}${ye}`}s(Me,"CreateParameter");function ft(ce){return ue.language==="typescript"?`: ${ce}`:""}s(ft,"CreateReturns");function It(ce,Oe,ye){let tt=Je("check",ce,Oe,"value"),X=Me("value","any"),ne=ft("boolean"),We=[...ue.functions.values()],De=[...ue.variables.values()],be=Ui(ce.$id)?`return function check(${X})${ne} {
  return ${Ne(ce.$id)}(value)
}`:`return ${tt}`;return[...De,...We,be].join(`
`)}s(It,"Build");function yt(...ce){let Oe={language:"javascript"},[ye,tt,X]=ce.length===2&&hn(ce[1])?[ce[0],ce[1],Oe]:ce.length===2&&!hn(ce[1])?[ce[0],[],ce[1]]:ce.length===3?[ce[0],ce[1],ce[2]]:ce.length===1?[ce[0],[],Oe]:[null,[],Oe];if(ue.language=X.language,ue.variables.clear(),ue.functions.clear(),ue.instances.clear(),!ps(ye))throw new lF(ye);for(let ne of tt)if(!ps(ne))throw new lF(ne);return It(ye,tt,X)}s(yt,"Code"),t.Code=yt;function vt(ce,Oe=[]){let ye=yt(ce,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),X=new Map(ue.instances);function ne(ze,it,ht){if(!vu.Has(ze)||!X.has(it))return!1;let Ot=vu.Get(ze),lr=X.get(it);return Ot(lr,ht)}s(ne,"typeRegistryFunction");function We(ze,it){return cm.Has(ze)?cm.Get(ze)(it):!1}s(We,"formatRegistryFunction");function De(ze){return kx(ze)}s(De,"hashFunction");let be=tt(ne,We,De);return new mZ(ce,Oe,be,ye)}s(vt,"Compile"),t.Compile=vt})(ms||(ms={}));var JF=je(vx());f();f();var dc=[];for(let t=0;t<256;++t)dc.push((t+256).toString(16).slice(1));function bxe(t,e=0){return(dc[t[e+0]]+dc[t[e+1]]+dc[t[e+2]]+dc[t[e+3]]+"-"+dc[t[e+4]]+dc[t[e+5]]+"-"+dc[t[e+6]]+dc[t[e+7]]+"-"+dc[t[e+8]]+dc[t[e+9]]+"-"+dc[t[e+10]]+dc[t[e+11]]+dc[t[e+12]]+dc[t[e+13]]+dc[t[e+14]]+dc[t[e+15]]).toLowerCase()}s(bxe,"unsafeStringify");f();var Exe=require("crypto");var uF=new Uint8Array(256),cF=uF.length;function yZ(){return cF>uF.length-16&&((0,Exe.randomFillSync)(uF),cF=0),uF.slice(cF,cF+=16)}s(yZ,"rng");f();f();var Ixe=require("crypto"),CZ={randomUUID:Ixe.randomUUID};function sst(t,e,r){if(CZ.randomUUID&&!e&&!t)return CZ.randomUUID();t=t||{};let n=t.random??t.rng?.()??yZ();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return bxe(n)}s(sst,"v4");var sr=sst;var XF=je(ni());function _S(t){return t===1}s(_S,"isRestricted");var uat=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],JB=8192,dat=21;var Ll=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return _S(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(ZF(e))return this.reporterRestricted;if(N_(e))return new bB}getFTReporter(e){if(eIe(e))return this.reporterFT;if(N_(e))return new bB}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.dispose(),this.reporter=void 0);let r=Promise.resolve();this.reporterRestricted&&(r=this.reporterRestricted.dispose(),this.reporterRestricted=void 0);let n=Promise.resolve();this.reporterFT&&(n=this.reporterFT.dispose(),this.reporterFT=void 0),await Promise.all([e,r,n])}},fat=I.Object({},{additionalProperties:I.String()}),pat=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),mat=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function hat(t){return mat.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(hat,"isOomError");function gat(t){return xB(t)?"network":hat(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(gat,"getErrorType");var rn=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=ms.Compile(fat)}static{this.validateTelemetryMeasurements=ms.Compile(pat)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Ks())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Ks())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Rt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=ng(e.get(un).getEditorInfo()),this.properties.editor_plugin_version=ng(e.get(un).getEditorPluginInfo());let r=e.get(Ps);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${CI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(un);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=ng(n.getEditorInfo());let i=e.get(Tn);this.properties.fetcher=i.name;let o=i.proxySettings;this.properties.proxy_enabled=o?"true":"false",this.properties.proxy_auth=o?.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o?.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=i.rejectUnauthorized?"true":"false"}extendWithConfigProperties(e){let r=oIe(e);r["copilot.build"]=sIe(e),r["copilot.buildType"]=Pf(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(_S(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>JB){let a=0,l=0;for(;o>0&&l<dat;){l+=1;let c=n;l>1&&(c=n+"_"+(l<10?"0":"")+l);let u=a+JB;o<JB&&(u=a+o),r[c]=i.slice(a,u),o-=JB,a+=JB}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=Cat(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(N_(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return yI(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),_S(r)&&yI(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,tIe(e))}},mg=class t extends rn{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new tI({}),exp:yf.createEmptyConfig()})}};function XB(t,e,r,n){t.get(Ll).getReporter(t,e)?.sendTelemetryEvent(r,rn.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(XB,"sendTelemetryEvent");function Aat(t,e,r,n){t.get(Ll).getReporter(t,e)?.sendTelemetryErrorEvent(r,rn.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(Aat,"sendTelemetryErrorEvent");function yat(t,e,r,n){t.get(Ll).getFTReporter(t)?.sendTelemetryEvent(r,rn.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(yat,"sendFTTelemetryEvent");function SS(t){return t.isFimEnabled?{promptPrefixCharLen:t.prefix.length,promptSuffixCharLen:t.suffix.length}:{promptCharLen:t.prefix.length}}s(SS,"telemetrizePromptLength");function Ks(){return performance.now()}s(Ks,"now");function Cat(t){return Math.floor(t/1e3)}s(Cat,"nowSeconds");function ZF(t){return t.get(ac).optedIn}s(ZF,"shouldSendRestricted");function eIe(t){return t.get(ac).ftFlag!==""}s(eIe,"shouldSendFinetuningTelemetry");function Bt(t,e,r,n){return t.get(va).register(xat(t,e,Ks(),r?.extendedBy(),n))}s(Bt,"telemetry");async function xat(t,e,r,n,i=0){let o=n||rn.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!_S(i)||ZF(t))&&XB(t,i,e,o),_S(i)&&uat.includes(e)&&eIe(t)&&yat(t,i,e,o)}s(xat,"_telemetry");function H7(t,e){return t.get(va).register(vat(t,e,Ks()))}s(H7,"telemetryExpProblem");async function vat(t,e,r){let n="expProblem",i=rn.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),XB(t,0,n,i)}s(vat,"_telemetryExpProblem");function zee(t,e,r,n){return t.get(va).register(bat(t,e,r,n))}s(zee,"telemetryRaw");async function bat(t,e,r,n){let i={...r,...tIe(t)};XB(t,0,e,{properties:i,measurements:n})}s(bat,"_telemetryRaw");function tIe(t){let e=t.get(un),r={unique_id:sr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:ng(e.getEditorInfo())},n=t.get(ac);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(tIe,"createRequiredProperties");var $ee=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,JF.SHA256)(JF.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ta(t,e,r,n,i){return t.get(va).register(rIe(t,e,Ks(),r,{...n},i))}s(Ta,"telemetryException");async function rIe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Fc(a)||a instanceof ls||a instanceof XF.ConnectionError||a instanceof XF.ResponseError)return}else{if(a=new $ee(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(un).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=ZF(t),d=iye(a,c,u),p=gat(a),m=p==="exception",h=rn.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=bX(y.value):y.value="[redacted]");if(o??=V1e(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=nye(a,c),v=rn.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",r),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,XB(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(ig).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),XB(t,0,`error.${p}`,h)}s(rIe,"_telemetryException");function Eu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await rIe(t,a,Ks(),r,n)}},"wrapped");return(...o)=>t.get(va).register(i(...o))}s(Eu,"telemetryCatch");function yI(t,e,r,n){return t.get(va).register(Eat(t,e,Ks(),r?.extendedBy(),n))}s(yI,"telemetryError");async function Eat(t,e,r,n,i=0){if(_S(i)&&!ZF(t))return;let o=n||rn.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),Aat(t,i,e,o)}s(Eat,"_telemetryError");function nIe(t,e,r,n,i){let o=rn.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,l]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(n),Bt(t,"engine.completion",o,1)}s(nIe,"logEngineCompletion");function iIe(t,e,r){let n={};if(e.isFimEnabled?n={promptPrefixJson:JSON.stringify(e.prefix),promptSuffixJson:JSON.stringify(e.suffix)}:n={promptJson:JSON.stringify(e.prefix)},e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Bt(t,"engine.prompt",i,1)}s(iIe,"logEnginePrompt");f();f();var aIe=je(ni()),lIe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Yee;(r=>(r.method="github/didChangeAuth",r.type=new aIe.ProtocolNotificationType(r.method)))(Yee||={});f();var cIe=je(ni()),Kee;(r=>(r.method="copilot/ipCodeCitation",r.type=new cIe.NotificationType(r.method)))(Kee||={});f();var uIe=je(ni()),eM;(r=>(r.method="context/update",r.type=new uIe.ProtocolRequestType(r.method)))(eM||={});f();f();var qx="Cancelled";f();var _n=je(ni()),ZB=I.String(),pd=I.Object({uri:ZB}),xI=I.Intersect([pd,I.Object({version:I.Optional(I.Integer())})]),Tmr=I.Required(xI),Fl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),wa=I.Object({start:Fl,end:Fl}),Jee=I.Union([I.Integer(),I.String()]),wmr=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var dIe=je(ni()),Xee;(r=>(r.method="textDocument/didFocus",r.type=new dIe.ProtocolNotificationType(r.method)))(Xee||={});f();var Iat=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),Tat=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),fIe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),pIe=I.Object({editorInfo:I.Optional(fIe),editorPluginInfo:I.Optional(fIe),relatedPluginInfo:I.Optional(I.Array(Tat)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(Iat)),githubAppId:I.Optional(I.String())});f();var e8=je(ni());var tM=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(tM||{}),wat=I.Enum(tM),_at=I.Object({triggerKind:wat,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:wa,tooltipSignature:I.Optional(I.String())}))}),mIe=I.Object({textDocument:xI,position:Fl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:_at,data:I.Optional(I.Unknown())}),Zee;(r=>(r.method="textDocument/inlineCompletion",r.type=new e8.ProtocolRequestType(r.method)))(Zee||={});var hIe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),gIe=I.Object({item:hIe}),ete;(r=>(r.method="textDocument/didShowCompletion",r.type=new e8.ProtocolNotificationType(r.method)))(ete||={});var AIe=I.Object({item:hIe,acceptedLength:I.Integer({minimum:1})}),tte;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new e8.ProtocolNotificationType(r.method)))(tte||={});f();var yIe=je(ni()),rte;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new yIe.ProtocolRequestType(r.method)))(rte||={});f();var CIe=je(ni()),xIe=I.Object({textDocument:xI,position:Fl}),Sat=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),vIe=I.Object({item:Sat}),nte;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new CIe.ProtocolNotificationType(r.method)))(nte||={});f();var rM=je(ni());var bIe=I.Object({textDocument:xI,position:Fl,partialResultToken:I.Optional(Jee),workDoneToken:I.Optional(Jee)}),nM;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new rM.ProtocolRequestType(n.method),n.partialResult=new rM.ProgressType))(nM||={});f();var EIe=je(ni()),ite;(r=>(r.method="copilot/related",r.type=new EIe.ProtocolRequestType(r.method)))(ite||={});f();var IIe=je(ni()),ote;(r=>(r.method="statusNotification",r.type=new IIe.ProtocolNotificationType(r.method)))(ote||={});var TIe=je(require("events"));var Am=class{static{s(this,"CopilotTokenNotifier")}#e=new TIe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=Eu(e,n,`event.${r}`);return this.#e.on(r,i),_n.Disposable.create(()=>this.#e.off(r,i))}};function ia(t,e){return t.get(Am).on(t,"CopilotToken",e)}s(ia,"onCopilotToken");function t8(t,e){return t.get(Am).emitToken(e)}s(t8,"emitCopilotToken");function wIe(t){return t.get(Am).lastToken}s(wIe,"getLastCopilotToken");f();var iM=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function ste(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(ste,"findKnownOrg");function _Ie(t){let e=t.organization_list??[];return ste(e)??""}s(_Ie,"getUserKind");f();f();var vI=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(vI||{}),ja=class{static{s(this,"LogTarget")}},hg=class{static{s(this,"TelemetryLogSender")}},Tt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(ja).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(hg).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(hg).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},on=new Tt("default");f();var Va=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){return this.showWarningMessage(r,...n)}};f();var pc=class{static{s(this,"UrlOpener")}};var Rat=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],SIe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",RIe="https://gh.io/copilot-network-errors",Iu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&Rat.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new Tt("certificates").error(e,`${SIe} Please visit ${RIe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(Va).showWarningMessage(SIe,n).then(i=>{if(i?.title===n.title)return e.get(pc).open(RIe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function oM(){return typeof process>"u"}s(oM,"isWeb");var ate=class extends rg{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Df(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...oM()?{}:t0(t),...n.headers}};let i=await t.get(Tn).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new rg(i);if(!i.headers.get("x-github-request-id"))throw new ate(i);return i}s(Df,"apiFetch");f();f();var PIe=require("os"),aM=require("path");f();var kIe;(()=>{"use strict";var t={975:H=>{function U(V){if(typeof V!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(V))}s(U,"e");function le(V,O){for(var Y,te="",pe=0,re=-1,ue=0,he=0;he<=V.length;++he){if(he<V.length)Y=V.charCodeAt(he);else{if(Y===47)break;Y=47}if(Y===47){if(!(re===he-1||ue===1))if(re!==he-1&&ue===2){if(te.length<2||pe!==2||te.charCodeAt(te.length-1)!==46||te.charCodeAt(te.length-2)!==46){if(te.length>2){var Ne=te.lastIndexOf("/");if(Ne!==te.length-1){Ne===-1?(te="",pe=0):pe=(te=te.slice(0,Ne)).length-1-te.lastIndexOf("/"),re=he,ue=0;continue}}else if(te.length===2||te.length===1){te="",pe=0,re=he,ue=0;continue}}O&&(te.length>0?te+="/..":te="..",pe=2)}else te.length>0?te+="/"+V.slice(re+1,he):te=V.slice(re+1,he),pe=he-re-1;re=he,ue=0}else Y===46&&ue!==-1?++ue:ue=-1}return te}s(le,"r");var ie={resolve:s(function(){for(var V,O="",Y=!1,te=arguments.length-1;te>=-1&&!Y;te--){var pe;te>=0?pe=arguments[te]:(V===void 0&&(V=process.cwd()),pe=V),U(pe),pe.length!==0&&(O=pe+"/"+O,Y=pe.charCodeAt(0)===47)}return O=le(O,!Y),Y?O.length>0?"/"+O:"/":O.length>0?O:"."},"resolve"),normalize:s(function(V){if(U(V),V.length===0)return".";var O=V.charCodeAt(0)===47,Y=V.charCodeAt(V.length-1)===47;return(V=le(V,!O)).length!==0||O||(V="."),V.length>0&&Y&&(V+="/"),O?"/"+V:V},"normalize"),isAbsolute:s(function(V){return U(V),V.length>0&&V.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var V,O=0;O<arguments.length;++O){var Y=arguments[O];U(Y),Y.length>0&&(V===void 0?V=Y:V+="/"+Y)}return V===void 0?".":ie.normalize(V)},"join"),relative:s(function(V,O){if(U(V),U(O),V===O||(V=ie.resolve(V))===(O=ie.resolve(O)))return"";for(var Y=1;Y<V.length&&V.charCodeAt(Y)===47;++Y);for(var te=V.length,pe=te-Y,re=1;re<O.length&&O.charCodeAt(re)===47;++re);for(var ue=O.length-re,he=pe<ue?pe:ue,Ne=-1,Se=0;Se<=he;++Se){if(Se===he){if(ue>he){if(O.charCodeAt(re+Se)===47)return O.slice(re+Se+1);if(Se===0)return O.slice(re+Se)}else pe>he&&(V.charCodeAt(Y+Se)===47?Ne=Se:Se===0&&(Ne=0));break}var Je=V.charCodeAt(Y+Se);if(Je!==O.charCodeAt(re+Se))break;Je===47&&(Ne=Se)}var Me="";for(Se=Y+Ne+1;Se<=te;++Se)Se!==te&&V.charCodeAt(Se)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+O.slice(re+Ne):(re+=Ne,O.charCodeAt(re)===47&&++re,O.slice(re))},"relative"),_makeLong:s(function(V){return V},"_makeLong"),dirname:s(function(V){if(U(V),V.length===0)return".";for(var O=V.charCodeAt(0),Y=O===47,te=-1,pe=!0,re=V.length-1;re>=1;--re)if((O=V.charCodeAt(re))===47){if(!pe){te=re;break}}else pe=!1;return te===-1?Y?"/":".":Y&&te===1?"//":V.slice(0,te)},"dirname"),basename:s(function(V,O){if(O!==void 0&&typeof O!="string")throw new TypeError('"ext" argument must be a string');U(V);var Y,te=0,pe=-1,re=!0;if(O!==void 0&&O.length>0&&O.length<=V.length){if(O.length===V.length&&O===V)return"";var ue=O.length-1,he=-1;for(Y=V.length-1;Y>=0;--Y){var Ne=V.charCodeAt(Y);if(Ne===47){if(!re){te=Y+1;break}}else he===-1&&(re=!1,he=Y+1),ue>=0&&(Ne===O.charCodeAt(ue)?--ue==-1&&(pe=Y):(ue=-1,pe=he))}return te===pe?pe=he:pe===-1&&(pe=V.length),V.slice(te,pe)}for(Y=V.length-1;Y>=0;--Y)if(V.charCodeAt(Y)===47){if(!re){te=Y+1;break}}else pe===-1&&(re=!1,pe=Y+1);return pe===-1?"":V.slice(te,pe)},"basename"),extname:s(function(V){U(V);for(var O=-1,Y=0,te=-1,pe=!0,re=0,ue=V.length-1;ue>=0;--ue){var he=V.charCodeAt(ue);if(he!==47)te===-1&&(pe=!1,te=ue+1),he===46?O===-1?O=ue:re!==1&&(re=1):O!==-1&&(re=-1);else if(!pe){Y=ue+1;break}}return O===-1||te===-1||re===0||re===1&&O===te-1&&O===Y+1?"":V.slice(O,te)},"extname"),format:s(function(V){if(V===null||typeof V!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof V);return function(O,Y){var te=Y.dir||Y.root,pe=Y.base||(Y.name||"")+(Y.ext||"");return te?te===Y.root?te+pe:te+"/"+pe:pe}(0,V)},"format"),parse:s(function(V){U(V);var O={root:"",dir:"",base:"",ext:"",name:""};if(V.length===0)return O;var Y,te=V.charCodeAt(0),pe=te===47;pe?(O.root="/",Y=1):Y=0;for(var re=-1,ue=0,he=-1,Ne=!0,Se=V.length-1,Je=0;Se>=Y;--Se)if((te=V.charCodeAt(Se))!==47)he===-1&&(Ne=!1,he=Se+1),te===46?re===-1?re=Se:Je!==1&&(Je=1):re!==-1&&(Je=-1);else if(!Ne){ue=Se+1;break}return re===-1||he===-1||Je===0||Je===1&&re===he-1&&re===ue+1?he!==-1&&(O.base=O.name=ue===0&&pe?V.slice(1,he):V.slice(ue,he)):(ue===0&&pe?(O.name=V.slice(1,re),O.base=V.slice(1,he)):(O.name=V.slice(ue,re),O.base=V.slice(ue,he)),O.ext=V.slice(re,he)),ue>0?O.dir=V.slice(0,ue-1):pe&&(O.dir="/"),O},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,H.exports=ie}},e={};function r(H){var U=e[H];if(U!==void 0)return U.exports;var le=e[H]={exports:{}};return t[H](le,le.exports,r),le.exports}s(r,"r"),r.d=(H,U)=>{for(var le in U)r.o(U,le)&&!r.o(H,le)&&Object.defineProperty(H,le,{enumerable:!0,get:U[le]})},r.o=(H,U)=>Object.prototype.hasOwnProperty.call(H,U),r.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>ae,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(H,U){if(!H.scheme&&U)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(U){return U instanceof m||!!U&&typeof U.authority=="string"&&typeof U.fragment=="string"&&typeof U.path=="string"&&typeof U.query=="string"&&typeof U.scheme=="string"&&typeof U.fsPath=="string"&&typeof U.with=="function"&&typeof U.toString=="function"}scheme;authority;path;query;fragment;constructor(U,le,ie,V,O,Y=!1){typeof U=="object"?(this.scheme=U.scheme||u,this.authority=U.authority||u,this.path=U.path||u,this.query=U.query||u,this.fragment=U.fragment||u):(this.scheme=function(te,pe){return te||pe?te:"file"}(U,Y),this.authority=le||u,this.path=function(te,pe){switch(te){case"https":case"http":case"file":pe?pe[0]!==d&&(pe=d+pe):pe=d}return pe}(this.scheme,ie||u),this.query=V||u,this.fragment=O||u,c(this,Y))}get fsPath(){return E(this,!1)}with(U){if(!U)return this;let{scheme:le,authority:ie,path:V,query:O,fragment:Y}=U;return le===void 0?le=this.scheme:le===null&&(le=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),V===void 0?V=this.path:V===null&&(V=u),O===void 0?O=this.query:O===null&&(O=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),le===this.scheme&&ie===this.authority&&V===this.path&&O===this.query&&Y===this.fragment?this:new g(le,ie,V,O,Y)}static parse(U,le=!1){let ie=p.exec(U);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),le):new g(u,u,u,u,u)}static file(U){let le=u;if(i&&(U=U.replace(/\\/g,d)),U[0]===d&&U[1]===d){let ie=U.indexOf(d,2);ie===-1?(le=U.substring(2),U=d):(le=U.substring(2,ie),U=U.substring(ie)||d)}return new g("file",le,U,u,u)}static from(U){let le=new g(U.scheme,U.authority,U.path,U.query,U.fragment);return c(le,!0),le}toString(U=!1){return _(this,U)}toJSON(){return this}static revive(U){if(U){if(U instanceof m)return U;{let le=new g(U);return le._formatted=U.external,le._fsPath=U._sep===h?U.fsPath:null,le}}return U}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(U=!1){return U?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let U={$mid:1};return this._fsPath&&(U.fsPath=this._fsPath,U._sep=h),this._formatted&&(U.external=this._formatted),this.path&&(U.path=this.path),this.scheme&&(U.scheme=this.scheme),this.authority&&(U.authority=this.authority),this.query&&(U.query=this.query),this.fragment&&(U.fragment=this.fragment),U}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(H,U,le){let ie,V=-1;for(let O=0;O<H.length;O++){let Y=H.charCodeAt(O);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||U&&Y===47||le&&Y===91||le&&Y===93||le&&Y===58)V!==-1&&(ie+=encodeURIComponent(H.substring(V,O)),V=-1),ie!==void 0&&(ie+=H.charAt(O));else{ie===void 0&&(ie=H.substr(0,O));let te=y[Y];te!==void 0?(V!==-1&&(ie+=encodeURIComponent(H.substring(V,O)),V=-1),ie+=te):V===-1&&(V=O)}}return V!==-1&&(ie+=encodeURIComponent(H.substring(V))),ie!==void 0?ie:H}s(v,"m");function b(H){let U;for(let le=0;le<H.length;le++){let ie=H.charCodeAt(le);ie===35||ie===63?(U===void 0&&(U=H.substr(0,le)),U+=y[ie]):U!==void 0&&(U+=H[le])}return U!==void 0?U:H}s(b,"y");function E(H,U){let le;return le=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?U?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(le=le.replace(/\//g,"\\")),le}s(E,"v");function _(H,U){let le=U?b:v,ie="",{scheme:V,authority:O,path:Y,query:te,fragment:pe}=H;if(V&&(ie+=V,ie+=":"),(O||V==="file")&&(ie+=d,ie+=d),O){let re=O.indexOf("@");if(re!==-1){let ue=O.substr(0,re);O=O.substr(re+1),re=ue.lastIndexOf(":"),re===-1?ie+=le(ue,!1,!1):(ie+=le(ue.substr(0,re),!1,!1),ie+=":",ie+=le(ue.substr(re+1),!1,!0)),ie+="@"}O=O.toLowerCase(),re=O.lastIndexOf(":"),re===-1?ie+=le(O,!1,!0):(ie+=le(O.substr(0,re),!1,!0),ie+=O.substr(re))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let re=Y.charCodeAt(1);re>=65&&re<=90&&(Y=`/${String.fromCharCode(re+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let re=Y.charCodeAt(0);re>=65&&re<=90&&(Y=`${String.fromCharCode(re+32)}:${Y.substr(2)}`)}ie+=le(Y,!0,!1)}return te&&(ie+="?",ie+=le(te,!1,!1)),pe&&(ie+="#",ie+=U?pe:v(pe,!1,!1)),ie}s(_,"b");function k(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+k(H.substr(3)):H}}s(k,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(B)?H.replace(B,U=>k(U)):H}s(N,"w");var W=r(975);let ee=W.posix||W,me="/";var ae;(function(H){H.joinPath=function(U,...le){return U.with({path:ee.join(U.path,...le)})},H.resolvePath=function(U,...le){let ie=U.path,V=!1;ie[0]!==me&&(ie=me+ie,V=!0);let O=ee.resolve(ie,...le);return V&&O[0]===me&&!U.authority&&(O=O.substring(1)),U.with({path:O})},H.dirname=function(U){if(U.path.length===0||U.path===me)return U;let le=ee.dirname(U.path);return le.length===1&&le.charCodeAt(0)===46&&(le=""),U.with({path:le})},H.basename=function(U){return ee.basename(U.path)},H.extname=function(U){return ee.extname(U.path)}})(ae||(ae={})),kIe=n})();var{URI:Wx,Utils:sM}=kIe;function DIe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+DIe(t.substring(3)):t}}s(DIe,"decodeURIComponentGraceful");var BIe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function lte(t){return t.match(BIe)?t.replace(BIe,e=>DIe(e)):t}s(lte,"percentDecode");function fl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Wx.file(t).toString()}s(fl,"makeFsUri");function RS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Wx.parse(e[1]+e[2],!0):Wx.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(RS,"parseUri");function NIe(t){return RS(t),t}s(NIe,"validateUri");function mc(t){try{return RS(t).toString()}catch{return t}}s(mc,"normalizeUri");var LIe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function aa(t){let e=RS(t);if(!LIe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,PIe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,aM.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(aa,"fsPath");function Wo(t){try{return aa(t)}catch{return}}s(Wo,"getFsPath");function FIe(t){let e=Wo(t);if(e)return Wx.file(e).toString()}s(FIe,"getFsUri");function bI(t,...e){let r,n=Wo(t);return n?r=fl((0,aM.resolve)(n,...e)):r=sM.resolvePath(RS(t),...e.map(i=>MIe(i))).toString(),typeof t=="string"?r:{uri:r}}s(bI,"resolveFilePath");function ko(t,...e){let r=sM.joinPath(RS(t),...e.map(MIe)).toString();return typeof t=="string"?r:{uri:r}}s(ko,"joinPath");function MIe(t){return kat(t)?t.replaceAll("\\","/"):t}s(MIe,"pathToURIPath");function kat(t){return/^[^/\\]*\\/.test(t)}s(kat,"isWinPath");function Ii(t){return lte((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ii,"basename");function f0(t){let e=sM.dirname(RS(t)),r;return LIe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(f0,"dirname");var pl=class{static{s(this,"NetworkConfiguration")}};function r8(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!ute(t)&&r.protocol==="http:")return r.href}catch{}}s(r8,"ensurePermittedUrl");var n8={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function cte(t,e,r){if(r&&tm(t)){for(let n of r){let i=Gi(t,n);if(i)return i}return}for(let n of e){let i=Gi(t,n);if(i)return i}}s(cte,"urlConfigOverride");function Bat(t,e){switch(e){case"api":return cte(t,[Pt.DebugOverrideCapiUrl,Pt.DebugOverrideCapiUrlLegacy],[Pt.DebugTestOverrideCapiUrl,Pt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return cte(t,[Pt.DebugOverrideProxyUrl,Pt.DebugOverrideProxyUrlLegacy],[Pt.DebugTestOverrideProxyUrl,Pt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!ute(t))return cte(t,[Pt.DebugSnippyOverrideUrl])}}s(Bat,"getEndpointOverrideUrl");function Gx(t,e,r,...n){let i=Bat(t,r)??e.endpoints[r];return ko(i,...n)}s(Gx,"getEndpointUrl");function lM(t){return wIe(t)?.endpoints??n8}s(lM,"getLastKnownEndpoints");function QIe(t,e){if(e&&!r8(t,e)){t.get(Va).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(pl).setConfiguredUrls(t,{serverUrl:e})}s(QIe,"updateServerUrl");var p0=new Tt("auth"),qIe=60;function Hx(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Hx,"fillGitHubUrls");function OIe(){return Math.floor(Date.now()/1e3)}s(OIe,"nowSeconds");async function cM(t,e){let r=rn.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let n=await Pat(t,e),i=await n.json(),o=i.user_notification;if(UIe(t,o,e),n.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return p0.info(t,d),yI(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!n.ok||!i.token){p0.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),yI(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&UIe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=OIe()+i.refresh_in+qIe;let l=await dte(t,e),c;l.ok&&(c=await l.json());let u=new EI(i,c);return t8(t,u),Bt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:OIe()})),{kind:"success",copilotToken:u}}s(cM,"authFromGitHubSession");async function Pat(t,e){let r={"X-GitHub-Api-Version":xf},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Df(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(Pat,"fetchCopilotToken");async function dte(t,e){let r={"X-GitHub-Api-Version":xf},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Df(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(dte,"fetchCopilotUserInfo");function UIe(t,e,r){e&&t.get(Va).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(un).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(pc).open(l)}e.notification_id&&o&&await Dat(t,e.notification_id,r)}).catch(n=>{p0.exception(t,n,"copilotToken.notification")})}s(UIe,"notifyUser");async function Dat(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Df(t,r,n,{method:"POST",headers:{"X-GitHub-Api-Version":xf},body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&p0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Dat,"sendNotificationResultToGitHub");var EI=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new iM(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??n8}needsRefresh(){return(this.envelope.expires_at-qIe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return ste(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");r.set(a,l)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();var i8="apps",fte="hosts",II=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(i8,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=ym,i=await this.persistenceManager.read(i8,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(Ml).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(fte,e);if(r)return{...r,githubAppId:ym}}async saveAuthRecord(e){await this.persistenceManager.update(i8,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===ym&&await this.persistenceManager.delete(fte,r),await this.persistenceManager.delete(i8,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(i8,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:ym})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(fte)}authRecordKey(e,r){let n=r.githubAppId??e.get(Ml).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};f();f();var VIe=je(GIe()),$Ie=je(jIe()),m0=je(require("os"));var kS=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(Tn).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{on.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new $Ie.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[VIe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Nat(e),this.commonProperties=Lat(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Nat(t){let e={},r=t.get(Ps);e["ai.session.id"]=r.sessionId;let n=t.get(ac);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${m0.type()} ${m0.release()}`,e["ai.device.osArchitecture"]=m0.arch(),e["ai.device.osPlatform"]=m0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(zi).getVersion(),e}s(Nat,"getTags");function Lat(t){let e={};e.common_os=m0.platform(),e.common_platformversion=m0.release(),e.common_arch=m0.arch(),e.common_cpu=Array.from(new Set(m0.cpus().map(n=>n.model))).join();let r=t.get(Ps);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(Lat,"getCommonProperties");var Fat="7d7048df-6dd0-4048-bb23-b716c1461f8f",Mat="3fdd7f28-937a-48c8-9a21-ba337db23bd1",Qat="f0000000-0000-0000-0000-000000000000",h0=class{constructor(e,r){this.ctx=e;this.namespace=r;this._initialized=!1}static{s(this,"TelemetryInitialization")}get isInitialized(){return this._initialized}get isEnabled(){return this._enabled??!1}async initialize(e){let r=this.ctx,n=r.get(Ll).deactivate();this._enabled=e,this._initialized=!0;let i=r.get(pl).getTelemetryUrl();if(e){let o=r.get(Ll);o.setReporter(new kS(r,this.namespace,i,Fat)),o.setRestrictedReporter(new kS(r,this.namespace,i,Mat)),o.setFTReporter(new kS(r,this.namespace,i,Qat,!0))}await n}reInitialize(){return this._initialized?this.initialize(this._enabled):Promise.reject(new Error("Cannot re-initialize telemetry that has not been initialized."))}};function fM(t,e){return t.get(h0).initialize(e)}s(fM,"setupTelemetryReporters");var Sn=class{constructor(e,r){this.ctx=e;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Gr)}get authPersistence(){return this.ctx.get(II)}getConfiguredUrls(){return this.ctx.get(pl).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof Nf)return r&&n.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession({authAuthority:e}={}){let r=Oat(this.env)??this.#e;if(r!==null){if(r){let n={...r,...Hx(r)};if(!e||e===new URL(n.serverUrl).hostname)return n}return await this.getPersistedSession()}}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&Pf(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}async signUpLimited(e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Df(this.ctx,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":xf},body:JSON.stringify({restricted_telemetry:this.ctx.get(h0).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(n){return p0.exception(this.ctx,n,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Oat(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Oat,"getSessionFromEnv");f();var Ji=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},pM=class extends Ji{static{s(this,"NoOpStatusReporter")}didChange(){}};var Gr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Nf=class extends ls{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},mM=class extends Gr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new Nf({reason:"NotSignedIn"});if(!r.accessToken)throw new Nf({reason:"HTTP401"});let n=await cM(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new Nf(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(zIe(this.ctx))throw r;p0.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(Ji).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(Ji);if(n instanceof Nf)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Bt(this.ctx,"auth.reset_token_"+r),p0.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):p0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},BS=class extends mM{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(Sn).getSession()}};f();var gg=class{static{s(this,"Clock")}now(){return new Date}};f();var Cm=class{static{s(this,"ExpConfigMaker")}},o8=class extends Cm{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(Tn),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",n.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return yf.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return yf.createFallbackConfig(r,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return Ta(r,m,"fetchExperiments"),yf.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new yf(d.Parameters,u.AssignmentContext,p.join(";"))}},hM=class extends Cm{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(yf.createEmptyConfig())}};f();f();var gM=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},pte=class extends gM{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},YIe=s(t=>new pte(t),"DEFAULT_GRANULARITY"),AM=class extends gM{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)n.push(this.prefix+a+l);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var KIe="X-Copilot-ClientTimeBucket",yM=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=YIe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new AM(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(KIe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(KIe,o))}}};f();f();f();function Uat(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Uat,"getIntegrationId");function jx(t){let e={...t0(t),"X-GitHub-Api-Version":xf},r=Uat(t.get(un));return r&&(e["Copilot-Integration-Id"]=r),e}s(jx,"getCapiHeaders");function CM(t,e,...r){return Gx(t,e,"api",...r)}s(CM,"getCapiUrl");async function TI(t,e){let r=await t.get(Gr).getToken(),n=CM(t,r,e),i={Authorization:`Bearer ${r.token}`,...jx(t)};return await t.get(Tn).fetch(new URL(n).href,{method:"GET",headers:i})}s(TI,"fetchCapiUrl");async function JIe(t,e,r){let n=await t.get(Gr).getToken(),i=CM(t,n,e),o={Authorization:`Bearer ${n.token}`,...jx(t)};return await t.get(Tn).fetch(new URL(i).href,{method:"POST",headers:o,body:r})}s(JIe,"postCapiUrl");f();var XIe=10*60*1e3,sn={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},ZIe=new Set([sn.O1Ga,sn.O3Mini,sn.O1Mini,sn.Gemini20Pro,sn.Gemini20Flash]);function Lf(t){switch(t){case"edits":case"user":case"inline":return[sn.Gpt4o,sn.Gpt4turbo,sn.Gpt4,sn.O1Mini,sn.O1Ga,sn.Claude35Sonnet,sn.O3Mini,sn.Gemini20Flash,sn.Claude37Sonnet,sn.Claude37SonnetThought,sn.Gpt45,sn.Gpt41,sn.CopilotBase];case"meta":case"suggestions":case"synonyms":return[sn.Gpt4oMini,sn.Gpt4o,sn.Gpt35turbo,sn.Gpt41,sn.CopilotBase];case"gitCommit":return[sn.Gpt4oMini,sn.Gpt4o,sn.Gpt4,sn.Gpt41,sn.CopilotBase];case"codeReview":return[sn.Gpt4,sn.Gpt4o,sn.Gpt41,sn.CopilotBase];case"nesStubs":return[sn.Gpt4oMini,sn.Gpt4o,sn.Gpt41,sn.CopilotBase]}}s(Lf,"getSupportedModelFamiliesForPrompt");var bM={textEmbedding3Small:"text-embedding-3-small"},qat=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),Wat=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:qat,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),e2e=I.Object({data:I.Array(Wat)}),Tu=class{static{s(this,"ModelMetadataProvider")}},xM=class extends Tu{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ia(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await TI(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){on.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw on.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new rg(r)}await this.processModels(r)}async fetchModel(r){let n=await TI(this.ctx,`/models/${r}`);if(!n.ok){on.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await JIe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){on.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>XIe}},vM=class extends Tu{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Rt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<XIe)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function t2e(t){let e=Gi(t,Pt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(t2e,"getUserSelectedModelConfiguration");f();f();f();var PS=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var r2e=je(require("node:fs/promises")),EM=je(require("node:path"));async function IM(t){return await r2e.readFile(mte(t))}s(IM,"readFile");function mte(t){return EM.default.resolve(EM.default.extname(__filename)!==".ts"?__dirname:EM.default.resolve(__dirname,"../../dist"),t)}s(mte,"locateFile");var DS=je(g2e());var a8=new Map;function Bo(t="o200k_base"){let e=a8.get(t);return e!==void 0?e:a8.get("o200k_base")}s(Bo,"getTokenizer");async function A2e(t="o200k_base"){return await Tte,Bo(t)}s(A2e,"getTokenizerAsync");async function ilt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await IM(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(ilt,"parseTikTokenNoIndex");var kM=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,DS.createTokenizer)(await ilt(`resources/${e}.tiktoken.noindex`),(0,DS.getSpecialTokensByEncoder)(e),(0,DS.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new PS("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),l=this.tokenize(a);for(;l.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),l=this.tokenize(a);return l.length<r?{text:e,tokens:l}:(l=l.slice(-r),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<r?{text:e,tokens:l}:(l=l.slice(0,r),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},Ite=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},olt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},BM=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){throw new Error("Not implemented")}detokenize(e){throw new Error("Not implemented")}tokenizeStrings(e){throw new Error("Not implemented")}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?olt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){throw new Error("Not implemented")}},Tte=(async()=>{a8.set("mock",new Ite),a8.set("cl100k_base",await kM.create("cl100k_base")),a8.set("o200k_base",await kM.create("o200k_base"))})();f();f();var slt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},C2e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},wte,PM,x2e,_te=class extends gn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),wte.add(this),PM.set(this,void 0),slt(this,PM,e,"f"),this.error=r}Errors(){return new Bx(C2e(this,wte,"m",x2e).call(this))}};PM=new WeakMap,wte=new WeakSet,x2e=s(function*(){this.error&&(yield this.error),yield*C2e(this,PM,"f")},"_AssertError_Iterator");function y2e(t,e,r){if(!fi(t,e,r))throw new _te(ug(t,e,r))}s(y2e,"AssertValue");function DM(...t){return t.length===3?y2e(t[0],t[1],t[2]):y2e(t[0],[],t[1])}s(DM,"Assert");f();f();f();function alt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Xi(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Xi(t[r]);return e}s(alt,"FromObject");function llt(t){return t.map(e=>Xi(e))}s(llt,"FromArray");function clt(t){return t.slice()}s(clt,"FromTypedArray");function ult(t){return new Map(Xi([...t.entries()]))}s(ult,"FromMap");function dlt(t){return new Set(Xi([...t.entries()]))}s(dlt,"FromSet");function flt(t){return new Date(t.toISOString())}s(flt,"FromDate");function Xi(t){if(hn(t))return llt(t);if(xu(t))return flt(t);if(bf(t))return clt(t);if(oye(t))return ult(t);if(sye(t))return dlt(t);if(ci(t))return alt(t);if(n0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Xi,"Clone");var g0=class extends gn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Zi(t){return bx(t)?t():Xi(t)}s(Zi,"FromDefault");function plt(t,e){return mn(t,"default")?Zi(t.default):{}}s(plt,"FromAny");function mlt(t,e){return{}}s(mlt,"FromArgument");function hlt(t,e){if(t.uniqueItems===!0&&!mn(t,"default"))throw new g0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!mn(t,"default"))throw new g0(t,"Array with the contains constraint requires a default value");return"default"in t?Zi(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>md(t.items,e)):[]}s(hlt,"FromArray");function glt(t,e){return mn(t,"default")?Zi(t.default):async function*(){}()}s(glt,"FromAsyncIterator");function Alt(t,e){return mn(t,"default")?Zi(t.default):BigInt(0)}s(Alt,"FromBigInt");function ylt(t,e){return mn(t,"default")?Zi(t.default):!1}s(ylt,"FromBoolean");function Clt(t,e){if(mn(t,"default"))return Zi(t.default);{let r=md(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(Clt,"FromConstructor");function xlt(t,e){return mn(t,"default")?Zi(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(xlt,"FromDate");function vlt(t,e){return mn(t,"default")?Zi(t.default):()=>md(t.returns,e)}s(vlt,"FromFunction");function blt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return md(n,[...e,...r])}s(blt,"FromImport");function Elt(t,e){return mn(t,"default")?Zi(t.default):t.minimum!==void 0?t.minimum:0}s(Elt,"FromInteger");function Ilt(t,e){if(mn(t,"default"))return Zi(t.default);{let r=t.allOf.reduce((n,i)=>{let o=md(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!fi(t,e,r))throw new g0(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(Ilt,"FromIntersect");function Tlt(t,e){return mn(t,"default")?Zi(t.default):function*(){}()}s(Tlt,"FromIterator");function wlt(t,e){return mn(t,"default")?Zi(t.default):t.const}s(wlt,"FromLiteral");function _lt(t,e){if(mn(t,"default"))return Zi(t.default);throw new g0(t,"Never types cannot be created. Consider using a default value.")}s(_lt,"FromNever");function Slt(t,e){if(mn(t,"default"))return Zi(t.default);throw new g0(t,"Not types must have a default value")}s(Slt,"FromNot");function Rlt(t,e){return mn(t,"default")?Zi(t.default):null}s(Rlt,"FromNull");function klt(t,e){return mn(t,"default")?Zi(t.default):t.minimum!==void 0?t.minimum:0}s(klt,"FromNumber");function Blt(t,e){if(mn(t,"default"))return Zi(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=md(o,e));return n}}s(Blt,"FromObject");function Plt(t,e){return mn(t,"default")?Zi(t.default):Promise.resolve(md(t.item,e))}s(Plt,"FromPromise");function Dlt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(mn(t,"default"))return Zi(t.default);if(r===ag||r===sg)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=md(n,e);return o}}s(Dlt,"FromRecord");function Nlt(t,e){return mn(t,"default")?Zi(t.default):md(Ki(t,e),e)}s(Nlt,"FromRef");function Llt(t,e){if(mn(t,"default"))return Zi(t.default);throw new g0(t,"RegExp types cannot be created. Consider using a default value.")}s(Llt,"FromRegExp");function Flt(t,e){if(t.pattern!==void 0){if(mn(t,"default"))return Zi(t.default);throw new g0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(mn(t,"default"))return Zi(t.default);throw new g0(t,"String types with formats must specify a default value")}else return mn(t,"default")?Zi(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(Flt,"FromString");function Mlt(t,e){return mn(t,"default")?Zi(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(Mlt,"FromSymbol");function Qlt(t,e){if(mn(t,"default"))return Zi(t.default);if(!GL(t))throw new g0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return j_(t)[0]}s(Qlt,"FromTemplateLiteral");function Olt(t,e){if(v2e++>$lt)throw new g0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return mn(t,"default")?Zi(t.default):md(Ki(t,e),e)}s(Olt,"FromThis");function Ult(t,e){return mn(t,"default")?Zi(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>md(t.items[n],e))}s(Ult,"FromTuple");function qlt(t,e){if(mn(t,"default"))return Zi(t.default)}s(qlt,"FromUndefined");function Wlt(t,e){if(mn(t,"default"))return Zi(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return md(t.anyOf[0],e)}s(Wlt,"FromUnion");function Glt(t,e){return mn(t,"default")?Zi(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(Glt,"FromUint8Array");function Hlt(t,e){return mn(t,"default")?Zi(t.default):{}}s(Hlt,"FromUnknown");function jlt(t,e){if(mn(t,"default"))return Zi(t.default)}s(jlt,"FromVoid");function Vlt(t,e){if(mn(t,"default"))return Zi(t.default);throw new Error("User defined types must specify a default value")}s(Vlt,"FromKind");function md(t,e){let r=Bl(t,e),n=t;switch(n[Ze]){case"Any":return plt(n,r);case"Argument":return mlt(n,r);case"Array":return hlt(n,r);case"AsyncIterator":return glt(n,r);case"BigInt":return Alt(n,r);case"Boolean":return ylt(n,r);case"Constructor":return Clt(n,r);case"Date":return xlt(n,r);case"Function":return vlt(n,r);case"Import":return blt(n,r);case"Integer":return Elt(n,r);case"Intersect":return Ilt(n,r);case"Iterator":return Tlt(n,r);case"Literal":return wlt(n,r);case"Never":return _lt(n,r);case"Not":return Slt(n,r);case"Null":return Rlt(n,r);case"Number":return klt(n,r);case"Object":return Blt(n,r);case"Promise":return Plt(n,r);case"Record":return Dlt(n,r);case"Ref":return Nlt(n,r);case"RegExp":return Llt(n,r);case"String":return Flt(n,r);case"Symbol":return Mlt(n,r);case"TemplateLiteral":return Qlt(n,r);case"This":return Olt(n,r);case"Tuple":return Ult(n,r);case"Undefined":return qlt(n,r);case"Union":return Wlt(n,r);case"Uint8Array":return Glt(n,r);case"Unknown":return Hlt(n,r);case"Void":return jlt(n,r);default:if(!vu.Has(n[Ze]))throw new g0(n,"Unknown type");return Vlt(n,r)}}s(md,"Visit");var $lt=512,v2e=0;function Ff(...t){return v2e=0,t.length===2?md(t[0],t[1]):md(t[0],[])}s(Ff,"Create");var NM=class extends gn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function zlt(t,e,r){if(t[Ze]==="Object"&&typeof r=="object"&&!h1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Ze]==="Literal"&&d.const===r[u]?l:0,m=fi(d,e,r[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return fi(t,e,r)?1:0}s(zlt,"ScoreUnion");function Ylt(t,e,r){let n=t.anyOf.map(a=>Ki(a,e)),[i,o]=[n[0],0];for(let a of n){let l=zlt(a,e,r);l>o&&(i=a,o=l)}return i}s(Ylt,"SelectUnion");function Klt(t,e,r){if("default"in t)return typeof r=="function"?t.default:Xi(t.default);{let n=Ylt(t,e,r);return l8(n,e,r)}}s(Klt,"CastUnion");function Jlt(t,e,r){return fi(t,e,r)?Xi(r):Ff(t,e)}s(Jlt,"DefaultClone");function Xlt(t,e,r){return fi(t,e,r)?r:Ff(t,e)}s(Xlt,"Default");function Zlt(t,e,r){if(fi(t,e,r))return Xi(r);let n=hn(r)?Xi(r):Ff(t,e),i=Ur(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Ur(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>xm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!fi(t,e,l))throw new NM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s(Zlt,"FromArray");function ect(t,e,r){if(fi(t,e,r))return Ff(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=xm(a,e,r.prototype[o]));return i}s(ect,"FromConstructor");function tct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return xm(i,[...e,...n],r)}s(tct,"FromImport");function rct(t,e,r){let n=Ff(t,e),i=ci(n)&&ci(r)?{...n,...r}:r;return fi(t,e,i)?i:Ff(t,e)}s(rct,"FromIntersect");function nct(t,e,r){throw new NM(t,"Never types cannot be cast")}s(nct,"FromNever");function ict(t,e,r){if(fi(t,e,r))return r;if(r===null||typeof r!="object")return Ff(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=xm(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=xm(t.additionalProperties,e,r[a]))}return i}s(ict,"FromObject");function oct(t,e,r){if(fi(t,e,r))return Xi(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Ff(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,l]of Object.entries(r))o[a]=xm(i,e,l);return o}s(oct,"FromRecord");function sct(t,e,r){return xm(Ki(t,e),e,r)}s(sct,"FromRef");function act(t,e,r){return xm(Ki(t,e),e,r)}s(act,"FromThis");function lct(t,e,r){return fi(t,e,r)?Xi(r):hn(r)?t.items===void 0?[]:t.items.map((n,i)=>xm(n,e,r[i])):Ff(t,e)}s(lct,"FromTuple");function cct(t,e,r){return fi(t,e,r)?Xi(r):Klt(t,e,r)}s(cct,"FromUnion");function xm(t,e,r){let n=Ui(t.$id)?Bl(t,e):e,i=t;switch(t[Ze]){case"Array":return Zlt(i,n,r);case"Constructor":return ect(i,n,r);case"Import":return tct(i,n,r);case"Intersect":return rct(i,n,r);case"Never":return nct(i,n,r);case"Object":return ict(i,n,r);case"Record":return oct(i,n,r);case"Ref":return sct(i,n,r);case"This":return act(i,n,r);case"Tuple":return lct(i,n,r);case"Union":return cct(i,n,r);case"Date":case"Symbol":case"Uint8Array":return Jlt(t,e,r);default:return Xlt(i,n,r)}}s(xm,"Visit");function l8(...t){return t.length===3?xm(t[0],t[1],t[2]):xm(t[0],[],t[1])}s(l8,"Cast");f();function uct(t){return Ix(t)&&t[Ze]!=="Unsafe"}s(uct,"IsCheckable");function dct(t,e,r){return hn(r)?r.map(n=>hd(t.items,e,n)):r}s(dct,"FromArray");function fct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return hd(i,[...e,...n],r)}s(fct,"FromImport");function pct(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(l=>hd(l,e,Xi(r))).reduce((l,c)=>ci(c)?{...l,...c}:c,{});if(!ci(r)||!ci(o)||!Ix(n))return o;let a=ad(t);for(let l of Object.getOwnPropertyNames(r))a.includes(l)||fi(n,e,r[l])&&(o[l]=hd(n,e,r[l]));return o}s(pct,"FromIntersect");function mct(t,e,r){if(!ci(r)||hn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(mn(t.properties,i)){r[i]=hd(t.properties[i],e,r[i]);continue}if(Ix(n)&&fi(n,e,r[i])){r[i]=hd(n,e,r[i]);continue}delete r[i]}return r}s(mct,"FromObject");function hct(t,e,r){if(!ci(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){r[c]=hd(a,e,r[c]);continue}if(Ix(n)&&fi(n,e,r[c])){r[c]=hd(n,e,r[c]);continue}delete r[c]}return r}s(hct,"FromRecord");function gct(t,e,r){return hd(Ki(t,e),e,r)}s(gct,"FromRef");function Act(t,e,r){return hd(Ki(t,e),e,r)}s(Act,"FromThis");function yct(t,e,r){if(!hn(r))return r;if(us(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=hd(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(yct,"FromTuple");function Cct(t,e,r){for(let n of t.anyOf)if(uct(n)&&fi(n,e,r))return hd(n,e,r);return r}s(Cct,"FromUnion");function hd(t,e,r){let n=Ui(t.$id)?Bl(t,e):e,i=t;switch(i[Ze]){case"Array":return dct(i,n,r);case"Import":return fct(i,n,r);case"Intersect":return pct(i,n,r);case"Object":return mct(i,n,r);case"Record":return hct(i,n,r);case"Ref":return gct(i,n,r);case"This":return Act(i,n,r);case"Tuple":return yct(i,n,r);case"Union":return Cct(i,n,r);default:return r}}s(hd,"Visit");function LM(...t){return t.length===3?hd(t[0],t[1],t[2]):hd(t[0],[],t[1])}s(LM,"Clean");f();function FM(t){return Ui(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(FM,"IsStringNumeric");function xct(t){return lc(t)||og(t)||Ur(t)}s(xct,"IsValueToString");function c8(t){return t===!0||Ur(t)&&t===1||lc(t)&&t===BigInt("1")||Ui(t)&&(t.toLowerCase()==="true"||t==="1")}s(c8,"IsValueTrue");function u8(t){return t===!1||Ur(t)&&(t===0||Object.is(t,-0))||lc(t)&&t===BigInt("0")||Ui(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(u8,"IsValueFalse");function vct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(vct,"IsTimeStringWithTimeZone");function bct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(bct,"IsTimeStringWithoutTimeZone");function Ect(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Ect,"IsDateTimeStringWithTimeZone");function Ict(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Ict,"IsDateTimeStringWithoutTimeZone");function Tct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(Tct,"IsDateString");function wct(t,e){let r=E2e(t);return r===e?r:t}s(wct,"TryConvertLiteralString");function _ct(t,e){let r=I2e(t);return r===e?r:t}s(_ct,"TryConvertLiteralNumber");function Sct(t,e){let r=b2e(t);return r===e?r:t}s(Sct,"TryConvertLiteralBoolean");function Rct(t,e){return Ui(t.const)?wct(e,t.const):Ur(t.const)?_ct(e,t.const):og(t.const)?Sct(e,t.const):e}s(Rct,"TryConvertLiteral");function b2e(t){return c8(t)?!0:u8(t)?!1:t}s(b2e,"TryConvertBoolean");function kct(t){let e=s(r=>r.split(".")[0],"truncateInteger");return FM(t)?BigInt(e(t)):Ur(t)?BigInt(Math.trunc(t)):u8(t)?BigInt(0):c8(t)?BigInt(1):t}s(kct,"TryConvertBigInt");function E2e(t){return g1(t)&&t.description!==void 0?t.description.toString():xct(t)?t.toString():t}s(E2e,"TryConvertString");function I2e(t){return FM(t)?parseFloat(t):c8(t)?1:u8(t)?0:t}s(I2e,"TryConvertNumber");function Bct(t){return FM(t)?parseInt(t):Ur(t)?Math.trunc(t):c8(t)?1:u8(t)?0:t}s(Bct,"TryConvertInteger");function Pct(t){return Ui(t)&&t.toLowerCase()==="null"?null:t}s(Pct,"TryConvertNull");function Dct(t){return Ui(t)&&t==="undefined"?void 0:t}s(Dct,"TryConvertUndefined");function Nct(t){return xu(t)?t:Ur(t)?new Date(t):c8(t)?new Date(1):u8(t)?new Date(0):FM(t)?new Date(parseInt(t)):bct(t)?new Date(`1970-01-01T${t}.000Z`):vct(t)?new Date(`1970-01-01T${t}`):Ict(t)?new Date(`${t}.000Z`):Ect(t)?new Date(t):Tct(t)?new Date(`${t}T00:00:00.000Z`):t}s(Nct,"TryConvertDate");function Lct(t,e,r){return(hn(r)?r:[r]).map(i=>vm(t.items,e,i))}s(Lct,"FromArray");function Fct(t,e,r){return kct(r)}s(Fct,"FromBigInt");function Mct(t,e,r){return b2e(r)}s(Mct,"FromBoolean");function Qct(t,e,r){return Nct(r)}s(Qct,"FromDate");function Oct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return vm(i,[...e,...n],r)}s(Oct,"FromImport");function Uct(t,e,r){return Bct(r)}s(Uct,"FromInteger");function qct(t,e,r){return t.allOf.reduce((n,i)=>vm(i,e,n),r)}s(qct,"FromIntersect");function Wct(t,e,r){return Rct(t,r)}s(Wct,"FromLiteral");function Gct(t,e,r){return Pct(r)}s(Gct,"FromNull");function Hct(t,e,r){return I2e(r)}s(Hct,"FromNumber");function jct(t,e,r){if(!ci(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))mn(r,n)&&(r[n]=vm(t.properties[n],e,r[n]));return r}s(jct,"FromObject");function Vct(t,e,r){if(!ci(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(r))r[a]=vm(o,e,l);return r}s(Vct,"FromRecord");function $ct(t,e,r){return vm(Ki(t,e),e,r)}s($ct,"FromRef");function zct(t,e,r){return E2e(r)}s(zct,"FromString");function Yct(t,e,r){return Ui(r)||Ur(r)?Symbol(r):r}s(Yct,"FromSymbol");function Kct(t,e,r){return vm(Ki(t,e),e,r)}s(Kct,"FromThis");function Jct(t,e,r){return hn(r)&&!us(t.items)?r.map((i,o)=>o<t.items.length?vm(t.items[o],e,i):i):r}s(Jct,"FromTuple");function Xct(t,e,r){return Dct(r)}s(Xct,"FromUndefined");function Zct(t,e,r){for(let n of t.anyOf){let i=vm(n,e,Xi(r));if(fi(n,e,i))return i}return r}s(Zct,"FromUnion");function vm(t,e,r){let n=Bl(t,e),i=t;switch(t[Ze]){case"Array":return Lct(i,n,r);case"BigInt":return Fct(i,n,r);case"Boolean":return Mct(i,n,r);case"Date":return Qct(i,n,r);case"Import":return Oct(i,n,r);case"Integer":return Uct(i,n,r);case"Intersect":return qct(i,n,r);case"Literal":return Wct(i,n,r);case"Null":return Gct(i,n,r);case"Number":return Hct(i,n,r);case"Object":return jct(i,n,r);case"Record":return Vct(i,n,r);case"Ref":return $ct(i,n,r);case"String":return zct(i,n,r);case"Symbol":return Yct(i,n,r);case"This":return Kct(i,n,r);case"Tuple":return Jct(i,n,r);case"Undefined":return Xct(i,n,r);case"Union":return Zct(i,n,r);default:return r}}s(vm,"Visit");function MM(...t){return t.length===3?vm(t[0],t[1],t[2]):vm(t[0],[],t[1])}s(MM,"Convert");f();function T2e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!fi(e,r,n))throw new iS(e,n,ug(e,r,n).First());return T1(e,r)?oS(e,r,n):n}s(T2e,"Decode");f();function R1(t,e){let r=mn(t,"default")?t.default:void 0,n=bx(r)?r():Xi(r);return us(e)?n:ci(e)&&ci(n)?Object.assign(n,e):e}s(R1,"ValueOrDefault");function Ste(t){return Ix(t)&&"default"in t}s(Ste,"HasDefaultProperty");function eut(t,e,r){if(hn(r)){for(let i=0;i<r.length;i++)r[i]=_u(t.items,e,r[i]);return r}let n=R1(t,r);if(!hn(n))return n;for(let i=0;i<n.length;i++)n[i]=_u(t.items,e,n[i]);return n}s(eut,"FromArray");function tut(t,e,r){return xu(r)?r:R1(t,r)}s(tut,"FromDate");function rut(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return _u(i,[...e,...n],r)}s(rut,"FromImport");function nut(t,e,r){let n=R1(t,r);return t.allOf.reduce((i,o)=>{let a=_u(o,e,n);return ci(a)?{...i,...a}:a},{})}s(nut,"FromIntersect");function iut(t,e,r){let n=R1(t,r);if(!ci(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=_u(t.properties[o],e,n[o]);us(a)||(n[o]=_u(t.properties[o],e,n[o]))}if(!Ste(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=_u(t.additionalProperties,e,n[o]));return n}s(iut,"FromObject");function sut(t,e,r){let n=R1(t,r);if(!ci(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(n))l.test(c)&&Ste(a)&&(n[c]=_u(a,e,n[c]));if(!Ste(i))return n;for(let c of Object.getOwnPropertyNames(n))l.test(c)||(n[c]=_u(i,e,n[c]));return n}s(sut,"FromRecord");function aut(t,e,r){return _u(Ki(t,e),e,R1(t,r))}s(aut,"FromRef");function lut(t,e,r){return _u(Ki(t,e),e,r)}s(lut,"FromThis");function cut(t,e,r){let n=R1(t,r);if(!hn(n)||us(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=_u(i[a],e,n[a]));return n}s(cut,"FromTuple");function uut(t,e,r){let n=R1(t,r);for(let i of t.anyOf){let o=_u(i,e,Xi(n));if(fi(i,e,o))return o}return n}s(uut,"FromUnion");function _u(t,e,r){let n=Bl(t,e),i=t;switch(i[Ze]){case"Array":return eut(i,n,r);case"Date":return tut(i,n,r);case"Import":return rut(i,n,r);case"Intersect":return nut(i,n,r);case"Object":return iut(i,n,r);case"Record":return sut(i,n,r);case"Ref":return aut(i,n,r);case"This":return lut(i,n,r);case"Tuple":return cut(i,n,r);case"Union":return uut(i,n,r);default:return R1(i,r)}}s(_u,"Visit");function QM(...t){return t.length===3?_u(t[0],t[1],t[2]):_u(t[0],[],t[1])}s(QM,"Default");f();f();var bm={};u1(bm,{Delete:()=>fut,Format:()=>d8,Get:()=>mut,Has:()=>put,Set:()=>dut,ValuePointerRootDeleteError:()=>UM,ValuePointerRootSetError:()=>OM});f();var OM=class extends gn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},UM=class extends gn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function w2e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(w2e,"Escape");function*d8(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield w2e(t.slice(e,r))),e=n+1):r=n;yield w2e(t.slice(e))}s(d8,"Format");function dut(t,e,r){if(e==="")throw new OM(t,e,r);let[n,i,o]=[null,t,""];for(let a of d8(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(dut,"Set");function fut(t,e){if(e==="")throw new UM(t,e);let[r,n,i]=[null,t,""];for(let o of d8(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(fut,"Delete");function put(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of d8(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(put,"Has");function mut(t,e){if(e==="")return t;let r=t;for(let n of d8(e)){if(r[n]===void 0)return;r=r[n]}return r}s(mut,"Get");f();function hut(t,e){if(!ci(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>wI(t[i],e[i]))}s(hut,"ObjectType");function gut(t,e){return xu(e)&&t.getTime()===e.getTime()}s(gut,"DateType");function Aut(t,e){return!hn(e)||t.length!==e.length?!1:t.every((r,n)=>wI(r,e[n]))}s(Aut,"ArrayType");function yut(t,e){return!bf(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>wI(r,e[n]))}s(yut,"TypedArrayType");function Cut(t,e){return t===e}s(Cut,"ValueType");function wI(t,e){if(xu(t))return gut(t,e);if(bf(t))return yut(t,e);if(hn(t))return Aut(t,e);if(ci(t))return hut(t,e);if(n0(t))return Cut(t,e);throw new Error("ValueEquals: Unable to compare value")}s(wI,"Equal");var xut=lo({type:Ni("insert"),path:bu(),value:um()}),vut=lo({type:Ni("update"),path:bu(),value:um()}),but=lo({type:Ni("delete"),path:bu()}),S2e=ao([xut,vut,but]),qM=class extends gn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function WM(t,e){return{type:"update",path:t,value:e}}s(WM,"CreateUpdate");function R2e(t,e){return{type:"insert",path:t,value:e}}s(R2e,"CreateInsert");function k2e(t){return{type:"delete",path:t}}s(k2e,"CreateDelete");function _2e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new qM(t,"Cannot diff objects with symbols")}s(_2e,"AssertDiffable");function*Eut(t,e,r){if(_2e(e),_2e(r),!RX(r))return yield WM(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)mn(e,o)||(yield R2e(`${t}/${o}`,r[o]));for(let o of n)mn(r,o)&&(wI(e,r)||(yield*GM(`${t}/${o}`,e[o],r[o])));for(let o of n)mn(r,o)||(yield k2e(`${t}/${o}`))}s(Eut,"ObjectType");function*Iut(t,e,r){if(!hn(r))return yield WM(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*GM(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield R2e(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield k2e(`${t}/${n}`))}s(Iut,"ArrayType");function*Tut(t,e,r){if(!bf(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield WM(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*GM(`${t}/${n}`,e[n],r[n])}s(Tut,"TypedArrayType");function*wut(t,e,r){e!==r&&(yield WM(t,r))}s(wut,"ValueType");function*GM(t,e,r){if(RX(e))return yield*Eut(t,e,r);if(hn(e))return yield*Iut(t,e,r);if(bf(e))return yield*Tut(t,e,r);if(n0(e))return yield*wut(t,e,r);throw new qM(e,"Unable to diff value")}s(GM,"Visit");function B2e(t,e){return[...GM("",t,e)]}s(B2e,"Diff");function _ut(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(_ut,"IsRootUpdate");function Sut(t){return t.length===0}s(Sut,"IsIdentity");function P2e(t,e){if(_ut(e))return Xi(e[0].value);if(Sut(e))return Xi(t);let r=Xi(t);for(let n of e)switch(n.type){case"insert":{bm.Set(r,n.path,n.value);break}case"update":{bm.Set(r,n.path,n.value);break}case"delete":{bm.Delete(r,n.path);break}}return r}s(P2e,"Patch");f();function D2e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=T1(e,r)?aS(e,r,n):n;if(!fi(e,r,i))throw new sS(e,i,ug(e,r,i).First());return i}s(D2e,"Encode");f();function HM(t){return ci(t)&&!hn(t)}s(HM,"IsStandardObject");var jM=class extends gn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function Rut(t,e,r,n){if(!HM(r))bm.Set(t,e,Xi(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Rte(t,`${e}/${a}`,r[a],n[a])}}s(Rut,"ObjectType");function kut(t,e,r,n){if(!hn(r))bm.Set(t,e,Xi(n));else{for(let i=0;i<n.length;i++)Rte(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(kut,"ArrayType");function But(t,e,r,n){if(bf(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else bm.Set(t,e,Xi(n))}s(But,"TypedArrayType");function Put(t,e,r,n){r!==n&&bm.Set(t,e,n)}s(Put,"ValueType");function Rte(t,e,r,n){if(hn(n))return kut(t,e,r,n);if(bf(n))return But(t,e,r,n);if(HM(n))return Rut(t,e,r,n);if(n0(n))return Put(t,e,r,n)}s(Rte,"Visit");function N2e(t){return bf(t)||n0(t)}s(N2e,"IsNonMutableValue");function Dut(t,e){return HM(t)&&hn(e)||hn(t)&&HM(e)}s(Dut,"IsMismatchedValue");function L2e(t,e){if(N2e(t)||N2e(e))throw new jM("Only object and array types can be mutated at the root level");if(Dut(t,e))throw new jM("Cannot assign due type mismatch of assignable values");Rte(t,"",t,e)}s(L2e,"Mutate");f();var VM=class extends gn{static{s(this,"ParseError")}constructor(e){super(e)}},kte;(function(t){let e=new Map([["Assert",(o,a,l)=>(DM(o,a,l),l)],["Cast",(o,a,l)=>l8(o,a,l)],["Clean",(o,a,l)=>LM(o,a,l)],["Clone",(o,a,l)=>Xi(l)],["Convert",(o,a,l)=>MM(o,a,l)],["Decode",(o,a,l)=>T1(o,a)?oS(o,a,l):l],["Default",(o,a,l)=>QM(o,a,l)],["Encode",(o,a,l)=>T1(o,a)?aS(o,a,l):l]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(kte||(kte={}));var F2e=["Clone","Clean","Default","Convert","Assert","Decode"];function Nut(t,e,r,n){return t.reduce((i,o)=>{let a=kte.Get(o);if(us(a))throw new VM(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(Nut,"ParseValue");function M2e(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?hn(t[0])?[t[0],t[1],[],t[2]]:[F2e,t[0],t[1],t[2]]:t.length===2?[F2e,t[0],[],t[1]]:(()=>{throw new VM("Invalid Arguments")})();return Nut(e,r,n,i)}s(M2e,"Parse");f();var $x={};u1($x,{Assert:()=>DM,Cast:()=>l8,Check:()=>fi,Clean:()=>LM,Clone:()=>Xi,Convert:()=>MM,Create:()=>Ff,Decode:()=>T2e,Default:()=>QM,Diff:()=>B2e,Edit:()=>S2e,Encode:()=>D2e,Equal:()=>wI,Errors:()=>ug,Hash:()=>kx,Mutate:()=>L2e,Parse:()=>M2e,Patch:()=>P2e,ValueErrorIterator:()=>Bx});f();var Lut={capabilities:{family:"gpt-3.5-turbo",object:"model_capabilities",supports:{streaming:!0},tokenizer:"cl100k_base",type:"completion"},id:"copilot-codex",model_picker_enabled:!0,name:"GPT-3.5 Turbo",object:"model",preview:!1,version:"copilot-codex"},Fut="gpt-4o-copilot",Mf=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ia(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return Fut}parseModelsResponse(e){try{return $x.Parse(e2e,e)}catch(r){on.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",e.getTokenValue("fcv1")=="1"?Promise.resolve([Lut]):await this.fetch()}async fetch(){let e=await TI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(on.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=t2e(this._ctx);if(n){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(n)||(l.length>0&&on.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=Gi(this._ctx,Pt.DebugOverrideEngine)||Gi(this._ctx,Pt.DebugOverrideEngineLegacy);if(i)return new zx(i,"override");let o=e?this._ctx.get(Rt).customEngine(e):"",a=e?this._ctx.get(Rt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new zx(o,"exp"):new zx(n,"modelpicker"):o?new zx(o,"exp"):this.customModels.length>0?new zx(this.customModels[0],"custommodel"):new zx(r,"default")}},zx=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Yx(t,e=void 0){let r=t.get(Mf),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(Yx,"getEngineRequestInfo");f();f();var po=class{static{s(this,"FileSystem")}};var tTe=je(eTe());function rTe(t){return t!==void 0&&t!==0}s(rTe,"isRepoInfo");function nTe(t){if(t===void 0||t===0)return"";let e=k1(t);if(e==="github/github")return e;let r=ldt(t)?.toLowerCase();return r!==void 0?r:""}s(nTe,"getDogFood");function k1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(k1,"tryGetGitHubNWO");function ldt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(ldt,"tryGetADONWO");function Kx(t,e){let r=f0(e);return cdt(t,r)}s(Kx,"extractRepoInfoInBackground");var cdt=pdt(udt,1e4);async function udt(t,e){let r=FIe(e);if(!r)return;let n=await ddt(t,r);if(!n)return;let i=t.get(po),o=ko(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=fdt(a)??"",c=Nte(l),u={uri:n};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s(udt,"extractRepoInfo");function Nte(t){let e;try{if(e=(0,tTe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Nte,"parseRepoUrl");async function ddt(t,e){let r=e+"_add_to_make_longer",n=t.get(po);for(;e!=="file:///"&&e.length<r.length;){let i=ko(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=f0(e)}}s(ddt,"getRepoBaseUri");function fdt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(r);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(n);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(fdt,"getRepoUrlFromConfigText");var Dte=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function pdt(t,e){let r=new nn(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=r.get(a);if(l)return l.result;if(n.has(a))return 0;let c=t(i,...o);return n.add(a),c.then(u=>{r.set(a,new Dte(u)),n.delete(a)}),0}}s(pdt,"computeInBackgroundAndMemoize");f();var f8=500,iTe=8192-f8,oTe=4,$M=10,sTe=15,mdt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function p8(t){return t=t.toLowerCase(),mdt[t]??t}s(p8,"normalizeLanguageId");var Lte=class{constructor(e){this.ctx=e;this.cache=new nn(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new Fte(()=>this.ctx.get(Cm).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Fte=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function gdt(t){return"uri"in t}s(gdt,"isCompletionsFiltersInfo");var Rt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Lte(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=rn.createAndMarkAsIssued(),n=void 0){if(r instanceof mg)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&gdt(e)?Kx(this.ctx,e.uri):void 0,o=k1(i)??"",a=nTe(i)??"",l=e?.languageId??"",c=Yx(this.ctx).modelId;n??=await this.ctx.get(Gr).getToken();let u=_Ie(n),d=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),B=k.newFilterSettings,N=await this.getExpConfig(B,g),W=new Promise(ee=>setTimeout(ee,t.upcomingDynamicFilterCheckDelayMs));for(let ee of k.otherFilterSettingsToPrefetch)W=W.then(async()=>{await new Promise(me=>setTimeout(me,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(ee,g)});return this.prepareForUpcomingFilters(B,g),new mg(r.properties,r.measurements,r.issuedTime,{filters:B,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ps).machineId;this.granularityDirectory=new yM(e,this.ctx.get(gg))}return this.granularityDirectory}makeFilterSettings(e){return new tI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return yf.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new tI({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=lM(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??sTe}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??$M}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??iTe+f8}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}triggerCompletionAfterAccept(e){return e.filtersAndExp.exp.variables.copilottriggercompletionafteraccept}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}vscodeDebounceThreshold(e){return e.filtersAndExp.exp.variables.copilotvscodedebouncethreshold}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}enableMultilineAfterAccept(e){return e.filtersAndExp.exp.variables.copilotmultilineafteraccept??!1}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}completionsElisionStrategy(e){switch(e.filtersAndExp.exp.variables.copilotcompletionselisionstrategy??""){case"elidableText":return"elidableText";case"elidableTextWithoutChunks":return"elidableTextWithoutChunks";default:return"wishlist"}}approximateElision(e){return e.filtersAndExp.exp.variables.copilotapproximateelision??!1}beforeCursorLines(e){return e.filtersAndExp.exp.variables.copilotbeforecursorlines??60}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};f();f();var zM=je(aTe());var Qte={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function A0(t){return t in Qte&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(A0,"isSupportedLanguageId");function YM(t){if(!(t in Qte))throw new Error(`Unrecognized language: ${t}`);return Qte[t]}s(YM,"languageIdToWasmLanguage");var Mte=new Map;async function Adt(t){let e;try{e=await IM(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new PS(`Could not load tree-sitter-${t}.wasm`,r):r}return zM.default.Language.load(e)}s(Adt,"loadWasmLanguage");function ydt(t){let e=YM(t);if(!Mte.has(e)){let r=Adt(e);Mte.set(e,r)}return Mte.get(e)}s(ydt,"getLanguage");var Ote=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function B1(t,e){await zM.default.init({locateFile:s(o=>mte(o),"locateFile")});let r;try{r=new zM.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Ote(`Could not init Parse for language <${t}>`,o):o}let n=await ydt(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(B1,"parseTreeSitter");function lTe(t){switch(YM(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(lTe,"getBlockCloseToken");function Cdt(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(Cdt,"innerQuery");var xdt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function cTe(t){return Cdt([xdt],t).length==1}s(cTe,"queryPythonIsDocstring");var Cg=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),l=n?`
${r}${a}+- `:"";return i+this.description+l}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},jc=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return m8.languageIds.has(e)||h8.languageIds.has(e)||g8.languageIds.has(e)||A8.languageIds.has(e)||y8.languageIds.has(e)||C8.languageIds.has(e)||x8.languageIds.has(e)||v8.languageIds.has(e)}static create(e,r,n,i){if(m8.languageIds.has(e))return new m8(e,r,n,i);if(h8.languageIds.has(e))return new h8(e,r,n,i);if(g8.languageIds.has(e))return new g8(e,r,n,i);if(C8.languageIds.has(e))return new C8(e,r,n,i);if(A8.languageIds.has(e))return new A8(e,r,n,i);if(y8.languageIds.has(e))return new y8(e,r,n,i);if(x8.languageIds.has(e))return new x8(e,r,n,i);if(v8.languageIds.has(e))return new v8(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await B1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Ute=class t extends Cg{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},m8=class extends jc{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Ute(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},qte=class t extends Cg{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},h8=class extends jc{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new qte(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Wte=class t extends Cg{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},g8=class extends jc{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Wte(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Gte=class t extends Cg{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},A8=class extends jc{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Gte(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Hte=class t extends Cg{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},y8=class extends jc{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Hte(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},jte=class t extends Cg{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},C8=class extends jc{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new jte(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},Vte=class t extends Cg{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},x8=class extends jc{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new Vte(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},$te=class t extends Cg{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},v8=class extends jc{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new $te(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var zte={};u1(zte,{activationEvents:()=>Udt,badges:()=>Odt,browser:()=>qdt,bugs:()=>Bdt,build:()=>Tdt,buildType:()=>wdt,categories:()=>Mdt,contributes:()=>Yte,default:()=>zdt,dependencies:()=>Vdt,description:()=>Edt,devDependencies:()=>jdt,displayName:()=>bdt,enabledApiProposals:()=>Gdt,engines:()=>Fdt,extensionPack:()=>Ldt,homepage:()=>Rdt,icon:()=>Ddt,keywords:()=>Qdt,license:()=>kdt,main:()=>Wdt,name:()=>vdt,overrides:()=>$dt,preview:()=>Sdt,pricing:()=>Ndt,publisher:()=>_dt,qna:()=>Pdt,scripts:()=>Hdt,version:()=>Idt});var vdt="copilot",bdt="GitHub Copilot",Edt="Your AI pair programmer",Idt="1.339.0",Tdt="1654",wdt="prod",_dt="GitHub",Sdt=!1,Rdt="https://github.com/features/copilot?editor=vscode",kdt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",Bdt={url:"https://github.com/microsoft/vscode/issues"},Pdt="https://github.com/github-community/community/discussions/categories/copilot",Ddt="assets/Copilot-App-Icon.png",Ndt="Trial",Ldt=["GitHub.copilot-chat","GitHub.copilot"],Fdt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},Mdt=["AI","Chat","Programming Languages","Machine Learning"],Qdt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],Odt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],Udt=["onStartupFinished"],qdt="./dist/web",Wdt="./dist/extension",Gdt=["inlineCompletionsAdditions"],Yte={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completion Model"__ command or open the model picker from the Copilot menu. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers)"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},Hdt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},jdt={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},Vdt={"@adobe/helix-fetch":"github:devm33/helix-fetch#1088e599270f36632703f138d88c2100cbe468db","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},$dt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},zdt={name:vdt,displayName:bdt,description:Edt,version:Idt,build:Tdt,buildType:wdt,publisher:_dt,preview:Sdt,homepage:Rdt,license:kdt,bugs:Bdt,qna:Pdt,icon:Ddt,pricing:Ndt,extensionPack:Ldt,engines:Fdt,categories:Mdt,keywords:Qdt,badges:Odt,activationEvents:Udt,browser:qdt,main:Wdt,enabledApiProposals:Gdt,contributes:Yte,scripts:Hdt,devDependencies:jdt,dependencies:Vdt,overrides:$dt};var Pt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",UseAsyncCompletions:"internal.useAsyncCompletions",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",VSCodeDebounceThreshold:"internal.vscodeDebounceThreshold",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",MultilineAfterAccept:"internal.multilineAfterAccept",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt"};function dTe(t){return["server","parsingandserver"].includes(t)}s(dTe,"shouldDoServerTrimming");var Em=class{static{s(this,"BlockModeConfig")}},LS=class extends Em{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Rt).overrideBlockMode(n);if(i)return uTe(i,r);let o=e.get(Rt).enableProgressiveReveal(n);return Gi(e,Pt.AlwaysRequestMultiline)??o?uTe("moremultiline",r):r=="ruby"?"parsing":A0(r)?"parsingandserver":"server"}};function Ydt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(Ydt,"blockModeRequiresTreeSitter");function uTe(t,e){return t==="moremultiline"&&jc.isSupported(e)?t:Ydt(t)&&!A0(e)?"server":t}s(uTe,"toApplicableBlockMode");var xg=class{static{s(this,"ConfigProvider")}},MS=class extends xg{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return Jdt(e)}getOptionalConfig(e){return Xdt(e)}dumpForTelemetry(){return{}}},SI=class extends xg{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[Pt.ShowEditorCompletions,Pt.EnableAutoCompletions,Pt.DelayCompletions,Pt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function Kdt(t){return t?.type==="object"&&"properties"in t}s(Kdt,"isContributesObject");function fTe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(fTe,"getConfigKeyRecursively");function Jdt(t){if(NS.has(t))return NS.get(t);throw new Error(`Missing config default value: ${AB}.${t}`)}s(Jdt,"getConfigDefaultForKey");function Xdt(t){return NS.get(t)}s(Xdt,"getOptionalConfigDefaultForKey");var NS=new Map([[Pt.DebugOverrideCppHeadersEnableSwitch,!1],[Pt.RelatedFilesVSCodeCSharp,!1],[Pt.RelatedFilesVSCodeTypeScript,!1],[Pt.RelatedFilesVSCode,!1],[Pt.IncludeNeighboringFiles,!1],[Pt.ExcludeRelatedFiles,!1],[Pt.ContextProviders,[]],[Pt.DebugUseEditorFetcher,null],[Pt.DebugUseElectronFetcher,null],[Pt.DebugOverrideLogLevels,{}],[Pt.DebugSnippyOverrideUrl,""],[Pt.FetchStrategy,"auto"],[Pt.UseSubsetMatching,null],[Pt.ContextProviderTimeBudget,void 0],[Pt.DebugOverrideCapiUrl,""],[Pt.DebugTestOverrideCapiUrl,""],[Pt.DebugOverrideProxyUrl,""],[Pt.DebugTestOverrideProxyUrl,""],[Pt.DebugOverrideEngine,""],[Pt.UseAsyncCompletions,void 0],[Pt.EnableSpeculativeRequests,void 0],[Pt.AlwaysRequestMultiline,void 0],[Pt.ModelAlwaysTerminatesSingleline,void 0],[Pt.TrimCompletionsAggressively,void 0],[Pt.VSCodeDebounceThreshold,void 0],[Pt.MultilineAfterAccept,void 0],[Pt.NESXTab,void 0],[Pt.UseWorkspaceContextCoordinator,void 0],[Pt.CompletionsDelay,void 0],[Pt.UseSplitContextPrompt,void 0],[Pt.ShowEditorCompletions,void 0],[Pt.EnableAutoCompletions,void 0],[Pt.DelayCompletions,void 0],[Pt.FilterCompletions,void 0]]);for(let t of Object.values(Pt)){let e=Yte.configuration[0],r=[],n=`${AB}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(Kdt(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(NS.has(t))throw new Error(`Duplicate config default value ${AB}.${t}`);NS.set(t,i.default)}}if(!NS.has(t))throw new Error(`Missing config default value ${AB}.${t}`)}function Gi(t,e){return t.get(xg).getConfig(e)}s(Gi,"getConfig");function oIe(t){return t.get(xg).dumpForTelemetry()}s(oIe,"dumpForTelemetry");var zi=class{constructor(){this.packageJson=zte}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function ute(t){return t.get(zi).isProduction()}s(ute,"isProduction");function zIe(t){return t.get(zi).getBuildType()==="dev"}s(zIe,"isDevBuild");function Pf(t){return t.get(zi).getBuildType()}s(Pf,"getBuildType");function sIe(t){return t.get(zi).getBuild()}s(sIe,"getBuild");function CI(t){return t.get(zi).getVersion()}s(CI,"getVersion");var Ps=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function ng({name:t,version:e}){return`${t}/${e}`}s(ng,"formatNameAndVersion");var un=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},xf="2025-05-01";function t0(t){let e=t.get(un);return{"Editor-Version":ng(e.getEditorInfo()),"Editor-Plugin-Version":ng(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":CI(t)}}s(t0,"editorVersionHeaders");var ym="Iv1.b507a08c87ecfe98",Ml=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??ym}};f();var Jx=require("fs"),pTe=require("os"),mTe=je(require("path")),QS=require("process");var hc=class{static{s(this,"PersistenceManager")}},Kte=class extends hc{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await Jx.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await Jx.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await Jx.promises.rm(i):await Jx.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await Jx.promises.rm(n)}catch{}}async listSettings(){try{return(await Jx.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await Jx.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function Jte(){return QS.env.XDG_CONFIG_HOME&&mTe.isAbsolute(QS.env.XDG_CONFIG_HOME)?QS.env.XDG_CONFIG_HOME+"/github-copilot":(0,pTe.platform)()==="win32"?QS.env.USERPROFILE+"\\AppData\\Local\\github-copilot":QS.env.HOME+"/.config/github-copilot"}s(Jte,"getXdgConfigPath");function hTe(){return new Kte(Jte())}s(hTe,"makeXdgPersistenceManager");f();f();f();var RI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var gTe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],ATe={".php":[".blade"]},b8=Object.keys(RI).flatMap(t=>RI[t].extensions);var Xte=je(require("node:path"));var US=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},E8=class{static{s(this,"LanguageDetection")}},Zte=new Map,OS=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(RI)){for(let n of e)Zte.set(n,[...Zte.get(n)??[],t]);for(let n of r??[])OS.set(n,[...OS.get(n)??[],t])}var ere=class extends E8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Ii(e.uri),n=Xte.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new US(o.languageId,o.isGuess,a):new US(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(gTe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=Xte.extname(n).toLowerCase();if(i.length>0&&b8.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=ATe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(OS.has(e))return{languageId:OS.get(e)[0],isGuess:!1};let n=Zte.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),OS.has(e))return{languageId:OS.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},tre=class extends E8{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new US("cpp",n.isGuess,n.fileExtension):n}},rre=class extends E8{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new US(r.languageId,!0,""):this.delegate.detectLanguage(r)}},Zdt=new tre(new rre(new ere));function qS({uri:t,languageId:e}){let r=Zdt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(qS,"detectLanguage");f();f();f();f();function P1(t){if(t.isCancellationRequested)throw new KM}s(P1,"throwIfCancellationRequested");function XM(t){return t instanceof KM?!0:t instanceof Error&&t.name===nre&&t.message===nre}s(XM,"isCancellationError");var KM=class extends Error{static{s(this,"CancellationError")}constructor(){super(nre),this.name=this.message}},nre="Canceled",JM=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function kI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(kI,"isTypeDefinition");var Zo=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=CTe(e,e.length,i),yTe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=CTe(e,e.length,++i),yTe(n,r)):i++;return n.join("")}};function yTe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(yTe,"appendIndent");function CTe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(CTe,"consumeIndent");var Qf=class{constructor(e,r,n,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Ya=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await B1(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new JM,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,r,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=Zo.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(n):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=n.length,c=m);let y=Zo.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new Qf(r,"","",Zo.fromBounds(o,a),Zo.fromBounds(u,d),Zo.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(n),E=this.createNameFromScopes(n,e.toArray());return E=g?`${g}.${E}`:E,new Qf(r,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var ZM=class extends Ya{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,e0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},eQ=class extends Ya{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,r0t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,n0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},tQ=class extends Ya{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,t0t),i=new Set;try{n.matches.forEach(o=>{let a,l,c;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?l=u:u.name==="import"&&(c=u);if(a&&c){let u=this.cleanQuotedString(a.node.text),d=a.node.startIndex+1,p=a.node.endIndex-1,m=l?new Zo(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Zo(d,p-d),h=new Zo(c.node.startIndex,c.node.endIndex-c.node.startIndex),g=Zo.empty,y=Zo.empty,v=u.substring(u.lastIndexOf("/")+1);i.add(new Qf(e,u,v,g,m,y,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},e0t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,t0t=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,r0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,n0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var nQ=class extends Ya{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,i0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},iQ=class extends Ya{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,s0t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,a0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},oQ=class extends Ya{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,o0t)).filter(i=>i.kind===0)}},i0t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,o0t=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,s0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,a0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var l0t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),sQ=class extends Ya{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,c0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},aQ=class extends Ya{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,u0t)).filter(i=>!l0t.has(i.unqualifiedName))}};var c0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,u0t=`
(call_expression function: (_) @name) @reference
`;f();var d0t=new Set(["int","str","float","bool","list","dict","tuple","set"]),lQ=class extends Ya{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,f0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},cQ=class extends Ya{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,p0t)).filter(i=>!d0t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,h0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},uQ=class extends Ya{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,m0t),i=new Set;try{n.matches.forEach(o=>{let a,l,c,u;for(let d of o.captures)d.name==="import.name"?a=d:d.name==="import.module"?c=d:d.name==="alias"?l=d:d.name==="import"&&(u=d);if(c&&u){let d=a||c,p=l?new Zo(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Zo(d.node.startIndex,u.node.endIndex-d.node.endIndex),m=new Zo(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Zo.empty,g=Zo.empty,y=d.node.text,v=y.split(".").pop()||y,b;a?b=`${c.node.text}.${a.node.text}`:b=c.node.text,i.add(new Qf(e,b,v,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},f0t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,p0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,m0t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,h0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var g0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),WS=class extends Ya{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,A0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},GS=class extends Ya{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,y0t)).filter(i=>!g0t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var A0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,y0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var C0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),dQ=class extends WS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,x0t),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},fQ=class extends GS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,v0t),super.extractReferences(e,r)]);return[...n.filter(o=>!C0t.has(o.unqualifiedName)),...i]}},x0t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,v0t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var I8=[{symbolExtractor:new nQ,referenceExtractor:new iQ,importExtractor:new oQ,languageId:"java"},{symbolExtractor:new ZM,referenceExtractor:new eQ,importExtractor:new tQ,languageId:"go"},{symbolExtractor:new lQ,referenceExtractor:new cQ,importExtractor:new uQ,languageId:"python"},{symbolExtractor:new WS,referenceExtractor:new GS,languageId:"typescript"},{symbolExtractor:new dQ,referenceExtractor:new fQ,languageId:"typescriptreact"},{symbolExtractor:new sQ,referenceExtractor:new aQ,languageId:"javascript"}];function xTe(t){let e=qS({uri:t});if(e&&I8.some(r=>e===r.languageId))return e}s(xTe,"getSupportedLanguageIdForMultiLanguageProvider");var vTe=new Map(I8.map(t=>[t.languageId,t.referenceExtractor])),pQ=new Map(I8.map(t=>[t.languageId,t.symbolExtractor])),bTe=new Map(I8.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),ire=I8.map(t=>RI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function ore(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(ore,"virtualNode");function ETe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(ETe,"lineNode");function sre(t){return{type:"blank",lineNumber:t,subs:[]}}s(sre,"blankNode");function mQ(t){return{type:"top",indentation:-1,subs:t??[]}}s(mQ,"topNode");function gc(t){return t.type==="blank"}s(gc,"isBlank");function BI(t){return t.type==="line"}s(BI,"isLine");function PI(t){return t.type==="virtual"}s(PI,"isVirtual");f();function ITe(t,e){return Vc(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(ITe,"clearLabelsIf");function DI(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>DI(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>DI(r,e)),label:t.label?e(t.label):void 0}}}s(DI,"mapLabels");function Vc(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Vc,"visitTree");function are(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Vc(t,o,n),i}s(are,"foldTree");function hQ(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:mQ()}s(hQ,"rebuildTree");f();function E0t(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,r[u]);return[ETe(r[u],u,n[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>d);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(sre(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<n.length&&n[c]==="";)a.push(sre(c)),c+=1;if(c<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${n.length}`);return mQ(a)}s(E0t,"parseRaw");function T8(t,e){function r(n){if(BI(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Vc(t,r,"bottomUp")}s(T8,"labelLines");function gQ(t){function e(r){if(PI(r)&&r.label===void 0){let n=r.subs.filter(i=>!gc(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Vc(t,e,"bottomUp")}s(gQ,"labelVirtualInherited");function w8(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(w8,"buildLabelRules");function lre(t){let r=hQ(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let l=n.subs[a],c=n.subs[a-1];if(l.label==="opener"&&c!==void 0&&BI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(BI(l)||PI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&gc(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[ore(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),gc(l)||(o=l)}return n.subs=i,n},"rebuilder"));return ITe(t,n=>n==="newVirtual"),r}s(lre,"combineClosersAndOpeners");function TTe(t,e=gc,r){return hQ(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=ore(l,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),gc(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(TTe,"groupBlocks");function NI(t){return hQ(t,s(function(r){return PI(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&PI(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(NI,"flattenVirtual");var I0t={opener:/^[[({]/,closer:/^[\])}]/},T0t=w8(I0t),wTe={};function cre(t,e){wTe[t]=e}s(cre,"registerLanguageSpecificParser");function _8(t,e){let r=E0t(t),n=wTe[e??""];return n?n(r):(T8(r,T0t),lre(r))}s(_8,"parseTree");var w0t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},_0t=w8(w0t);function _Te(t){let e=t;return T8(e,_0t),e=lre(e),e=NI(e),gQ(e),Vc(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!gc(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(_Te,"processJava");f();var S0t={heading:/^# /,subheading:/^## /,subsubheading:/### /},R0t=w8(S0t);function STe(t){let e=t;if(T8(e,R0t),gc(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||gc(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=TTe(e),e=NI(e),gQ(e),e}s(STe,"processMarkdown");f();function RTe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(RTe,"deparseLine");cre("markdown",STe);cre("java",_Te);var k0t={worthUp:.9,worthSibling:.88,worthDown:.8};function ure(t,e,r=Bo(),n=k0t){let i=DI(t,o=>o?1:void 0);return Vc(i,o=>{if(gc(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Vc(i,o=>{if(gc(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,n.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),B0t(i,e,r)}s(ure,"fromTreeWithFocussedLines");function B0t(t,e,r=Bo()){let n=are(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[RTe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new _t(n,e,r)}s(B0t,"fromTreeWithValuedLines");function Su(t,e=!0,r=!0,n,i=Bo()){let o=typeof t=="string"?_8(t):_8(t.source,t.languageId);NI(o);let a=DI(o,l=>e&&l!=="closer");return Vc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Vc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),r&&Vc(a,l=>{l.label||=(BI(l)||gc(l))&&l.lineNumber==0},"topDown"),ure(a,n,i)}s(Su,"elidableTextForSourceCode");f();var S8=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Bo().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var k8="elidableTextChunk",_t=class t{constructor(e,r,n=Bo()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new S8(c,a,n.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&Su(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Bo().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:c,priorityQueue:u,chunksToLinesMap:d}=D0t(this.lines,i);if(c<=e)return dre(l);N0t(u,a);let p=c;for(;p>e&&u.length>0;){let h=u.shift().originalIndex,g=l[h];if(g.markedForRemoval)continue;p=F0t(l,h,g,d,r,p);let v=n?L0t(l,h):"",b=kTe(v,r,o,g);l[h]=b,p-=g.cost,p+=b.cost;let E=h+1;if(E<l.length){let k=l[E];R8(k,r)&&(p-=k.cost,k.markedForRemoval=!0)}let _=h-1;if(_>=0){let k=l[_];R8(k,r)&&(p-=k.cost,k.markedForRemoval=!0)}}if(p>e)return dre([kTe("",r,o)]);let m=l.filter(h=>!h.markedForRemoval);for(let h=m.length-1;h>0;h--)R8(m[h],r)&&R8(m[h-1],r)&&m.splice(h,1);return dre(m)}};function P0t(t){return t?.text.match(/^\s*/)?.[0]??""}s(P0t,"getIndentation");function R8(t,e){return t?.text.trim()===e.trim()}s(R8,"isEllipsis");function dre(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(dre,"produceElidedText");function D0t(t,e){let r=0,n=[],i=new Map;return{lines:t.map((a,l)=>{let c=a.copy();e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:l,value:c.value});let u=c.metadata?.get(k8);if(u)for(let d of u)i.has(d)||i.set(d,new Set),i.get(d).add(l);return c}),totalCost:r,priorityQueue:n,chunksToLinesMap:i}}s(D0t,"initializeElisionContext");function N0t(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(N0t,"sortPriorityQueue");function L0t(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=P0t(i);break}}return r}s(L0t,"getClosestIndentation");function kTe(t,e,r,n){let i=t+e;return new S8(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(kTe,"getNewEllipsis");function F0t(t,e,r,n,i,o){let a=r.metadata?.get(k8);if(a&&a.size>0){let l=new Set;for(let c of a){let u=n.get(c);if(u)for(let d of u)d!==e&&!t[d].markedForRemoval&&l.add(d)}for(let c of l){let u=t[c];if(!R8(u,i)&&!u.markedForRemoval){let d=u.metadata?.get(k8);d&&d.size>0&&[...a].every(p=>d.has(p))&&(u.markedForRemoval=!0,o-=u.cost)}}}return o}s(F0t,"handleChunks");f();f();function Im(){}s(Im,"Diff");Im.prototype={diff:s(function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var c=r.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],r,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(BTe(a,g[0].lastComponent,r,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var B=void 0,N=g[k-1],W=g[k+1];N&&(g[k-1]=void 0);var ee=!1;if(W){var me=W.oldPos-k;ee=W&&0<=me&&me<c}var ae=N&&N.oldPos+1<u;if(!ee&&!ae){g[k]=void 0;continue}if(!ae||ee&&N.oldPos<W.oldPos?B=a.addToPath(W,!0,!1,0,i):B=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(B,r,e,k,i),B.oldPos+1>=u&&y+1>=c)return l(BTe(a,B.lastComponent,r,e,a.useLongestToken));g[k]=B,B.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,r,n,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,r,n,i,o){for(var a=r.length,l=n.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(n[c+1],r[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function BTe(t,e,r,n,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(n.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=r.slice(u,u+p.count);m=m.map(function(h,g){var y=n[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(r.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(BTe,"buildValues");var h2r=new Im;function PTe(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}s(PTe,"longestCommonPrefix");function DTe(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}s(DTe,"longestCommonSuffix");function fre(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}s(fre,"replacePrefix");function pre(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}s(pre,"replaceSuffix");function B8(t,e){return fre(t,e,"")}s(B8,"removePrefix");function AQ(t,e){return pre(t,e,"")}s(AQ,"removeSuffix");function NTe(t,e){return e.slice(0,M0t(t,e))}s(NTe,"maximumOverlap");function M0t(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),o=0;i[0]=0;for(var a=1;a<n;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=r;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(M0t,"overlapCount");var yQ="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Q0t=new RegExp("[".concat(yQ,"]+|\\s+|[^").concat(yQ,"]"),"ug"),CQ=new Im;CQ.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};CQ.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else r=t.match(Q0t)||[];var n=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?n.push(o):n.push(n.pop()+o):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+o):n.push(i+o):n.push(o),i=o}),n};CQ.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};CQ.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(o){o.added?n=o:o.removed?i=o:((n||i)&&LTe(r,i,n,o),r=o,n=null,i=null)}),(n||i)&&LTe(r,i,n,null),t};function LTe(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],l=r.value.match(/\s*$/)[0];if(t){var c=PTe(i,a);t.value=pre(t.value,a,c),e.value=B8(e.value,c),r.value=B8(r.value,c)}if(n){var u=DTe(o,l);n.value=fre(n.value,l,u),e.value=AQ(e.value,u),r.value=AQ(r.value,u)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var d=n.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=PTe(d,p);e.value=B8(e.value,h);var g=DTe(B8(d,h),m);e.value=AQ(e.value,g),n.value=fre(n.value,d,g),t.value=pre(t.value,d,d.slice(0,d.length-g.length))}else if(n){var y=n.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=NTe(v,y);e.value=AQ(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=NTe(E,_);e.value=B8(e.value,k)}}s(LTe,"dedupeWhitespaceInChangeObjects");var O0t=new Im;O0t.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(yQ,"]+|[^\\S\\n\\r]+|[^").concat(yQ,"]"),"ug");return t.match(e)||[]};var Are=new Im;Are.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};Are.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Im.prototype.equals.call(this,t,e,r)};var U0t=new Im;U0t.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var q0t=new Im;q0t.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function mre(t){"@babel/helpers - typeof";return mre=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mre(t)}s(mre,"_typeof");var P8=new Im;P8.useLongestToken=!0;P8.tokenize=Are.tokenize;P8.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(hre(t,null,null,i),i,"  ")};P8.equals=function(t,e,r){return Im.prototype.equals.call(P8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function hre(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=hre(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),mre(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=hre(t[c],e,r,n,c);e.pop(),r.pop()}else a=t;return a}s(hre,"canonicalize");var gre=new Im;gre.tokenize=function(t){return t.slice()};gre.join=gre.removeEmpty=function(t){return t};var FTe=require("fs");async function MTe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;P1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await G0t([y])).elide(b).getText();l-=n.tokenLength(E),u.push({uri:h,value:E})}}return u}s(MTe,"symbolRangesToCodeSnippets");async function G0t(t){if(t.length===0)return new _t([]);let e=t[0].node.fileName,r=[],n="";try{let i=Wo(e);i&&(n=(await FTe.promises.readFile(i)).toString())}catch{}for(let i of t)QTe(i,n).forEach(o=>r.push(o));return new _t(r)}s(G0t,"sameFileSymbolRangeToElidableText");function QTe(t,e){let n=[],i=t.node,o=e.substring(yre(e,i.commentRange.start),i.commentRange.end);n.push([Cre(o),1-3e-4]);let a=yre(e,i.bodyRange.start),l=yre(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(kI(i.kind)&&(c="BEGIN "+c.trimStart()),n.push([Cre(c),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...QTe(u,e));else{let u=1-(kI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);n.push([Cre(d),u])}return kI(i.kind)&&n.push(["END "+c.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(QTe,"prepareForElidableText");function yre(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(yre,"shiftLeftToNearestLineEndingOrAlphanumeric");function Cre(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(Cre,"trimLineEndingsAndTrailingWhitespace");var xre=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},Xx=class extends xre{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];P1(a);let c=await l.extractReferences(e,r);P1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>kI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(d.length+m.length>r.mlcpMaxContextItems){d.push(...m.slice(0,r.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,r){if(P1(r),kI(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),l=Math.abs(r.extentRange.start-n);return a-l}},xQ=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new Xx(e,r,!0,!0)),this.strategies.set("java",new Xx(e,r,!0,!0)),this.strategies.set("python",new Xx(e,r,!0,!1)),this.strategies.set("typescript",new Xx(e,r,!0,!0)),this.strategies.set("typescriptreact",new Xx(e,r,!0,!0)),this.strategies.set("javascript",new Xx(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,l){let c=await this.getContextAtPositionAsync(e,r,n,i,o,l);P1(l);let u=Bo();return MTe(c,a,e,u,l)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};f();f();f();f();var LI={Id:"id"},y0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Li={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var vQ=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new vre(LI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},D8=class t extends vQ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${y0.FilePath}');`]);this.fields=[new F8(y0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new gd(y0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},N8=class t extends vQ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Li.DocumentId}', '${Li.ExtentStart}', '${Li.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Li.UnqualifiedName}');`],`FOREIGN KEY(${Li.DocumentId}) REFERENCES Document(${LI.Id}) ON DELETE CASCADE`);this.fields=[new gd(Li.DocumentId),new F8(Li.FullyQualifiedName,{notNull:!0}),new F8(Li.UnqualifiedName,{notNull:!0}),new gd(Li.CommentStart,{notNull:!0}),new gd(Li.CommentLength,{notNull:!0}),new gd(Li.NameStart,{notNull:!0}),new gd(Li.NameLength,{notNull:!0}),new gd(Li.BodyStart,{notNull:!0}),new gd(Li.BodyLength,{notNull:!0}),new gd(Li.ExtentStart,{notNull:!0}),new gd(Li.ExtentLength,{notNull:!0}),new gd(Li.SymbolKind,{notNull:!0}),new gd(Li.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},L8=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},F8=class extends L8{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},gd=class extends L8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},vre=class extends L8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var bQ=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?Of(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return Of(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${LI.Id} = ?`,[e])}},D1=class t extends bQ{static{s(this,"DocumentTable")}static{this.tableName=D8.tableName}createQueryGenerator(){return new D8}async updateTimestamp(e,r){let n=await this.init;n&&await Of(n,`UPDATE ${t.tableName} SET ${y0.LastWriteTimeUtc} = ? WHERE ${y0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await Of(r,`DELETE FROM ${t.tableName} WHERE ${y0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?Of(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${y0.FilePath} = ?`,[e]):[]}},Ka=class t extends bQ{static{s(this,"SymbolTable")}static{this.tableName=N8.tableName}createQueryGenerator(){return new N8}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return Of(r,`DELETE FROM ${t.tableName} WHERE ${Li.DocumentId} = ?`,[e])}};async function Of(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(Of,"runPromisifiedDBQuery");var TQ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${D1.tableName} ON ${Ka.tableName}.${Li.DocumentId} = ${D1.tableName}.${LI.Id}`;this.db=this.initDb(e),this.documentTable=new D1(this.db),this.symbolTable=new Ka(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>je(KTe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Of(n,"pragma journal_mode=wal",[]),await Of(n,"pragma synchronous=normal",[]),await Of(n,"pragma optimize=0x10002",[]),await Of(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Ka.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Li.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ka.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ka.tableName}`,this.innerJoinStatement,`WHERE ${Li.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Ka.tableName}`,this.innerJoinStatement,`WHERE ${D1.tableName}.${y0.FilePath} = ? AND ${Ka.tableName}.${Li.ExtentStart} <= ? AND (${Ka.tableName}.${Li.ExtentStart} + ${Ka.tableName}.${Li.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Ka.tableName}`,this.innerJoinStatement,`WHERE ${D1.tableName}.${y0.FilePath} = ? AND ${Ka.tableName}.${Li.ExtentStart} >= ? AND (${Ka.tableName}.${Li.ExtentStart} + ${Ka.tableName}.${Li.ExtentLength}) <= ?`,`ORDER BY ${Ka.tableName}.${Li.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Ka.tableName}`,this.innerJoinStatement,`WHERE ${D1.tableName}.${y0.FilePath} = ? AND ${Ka.tableName}.${Li.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ka.tableName}.${Li.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,Of(n,e,r)):[]}};var wQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new TQ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return VS(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,r);i.push(...c),P1(n)}return VS(i)}async getDefinitionsAsync(e){return VS(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return VS(n)}async findSymbolsContainedByRangeAsync(e,r,n){return VS(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return VS(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function VS(t){return t.map(e=>new Qf(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Zo(e.commentStart,e.commentLength),new Zo(e.nameStart,e.nameLength),new Zo(e.bodyStart,e.bodyLength),new Zo(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(VS,"symbolsToSymbolRanges");var SQ=je(require("fs/promises"));var _Q=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new wQ(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=Wo(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await SQ.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.get(r);if(!l)return;let c=(await SQ.readFile(n)).toString(),u=await l.extractSymbols(e,c),d=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,c);d=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,d)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function _re(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>K0t(r))}s(_re,"isIndexWorkerData");var Q8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},Zx=class extends Q8{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},RQ=class extends Q8{constructor(r){super($c.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},$c={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},kQ=class extends Zx{constructor(r,n,i){super(r,$c.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},BQ=class extends Zx{constructor(r,n){super(r,$c.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},PQ=class extends Zx{constructor(r,n,i){super(r,$c.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},DQ=class extends Zx{constructor(r,n){super(r,$c.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},NQ=class extends Zx{constructor(r,n,i,o,a,l){super(r,$c.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},LQ=class extends Zx{static{s(this,"ExitRequest")}constructor(e){super(e,$c.Exit)}},Tm=class extends Q8{constructor(r,n,i){super($c.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function K0t(t){return"databaseFilePath"in t&&"rootPath"in t}s(K0t,"isIndexableWorkspaceFolder");var JTe=je(ni()),ev=require("worker_threads");var FQ=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new _Q(e,pQ,bTe,r),this.contextRetreival=new xQ(this.index.reader,vTe)}},Sre=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=aa(i.rootPath);this.indices.set(o,new FQ(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new JTe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case $c.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case $c.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case $c.Cancel:n.get(e.id)?.cancel(),o=new Tm(e.id,void 0,void 0);break;case $c.Exit:o=await this.dispatchExit(e,r,i.token);break;case $c.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case $c.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case $c.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new Tm(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=aa(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new Tm(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=aa(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new Tm(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=aa(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new Tm(e.id,a,l)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new Tm(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=aa(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new FQ(e.databaseFilePath)),new Tm(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=aa(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new Tm(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function XTe(){return _re(ev.workerData)}s(XTe,"isIndexWorker");function ZTe(){let t=ev.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!_re(ev.workerData))throw new Error("Worker data must provide a valid database path.");let e=ev.workerData.cwd;process.cwd=()=>e,new Sre(t,ev.workerData.indexWorkspaceRoots,ev.workerData.params)}s(ZTe,"runIndexWorker");f();var O8=je(require("util"));function ewe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(Pf(t)==="dev")return t.get(ja).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",O8.format(...i)))},e.dir=(n,i)=>r(4,O8.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(O8.format(...n));i.name="Trace",e.log(i)},e}s(ewe,"createConsole");var Zy=je(require("fs/promises")),DKe=je(require("os")),nN=je(require("path")),Np=je(_m()),NKe=require("worker_threads");f();f();var xO=require("assert");f();f();var cpt={right:mpt,center:hpt},upt=0,pO=1,dpt=2,mO=3,ene=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&C0.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),C0.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=C0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>C0.stringWidth(a)&&(d+=" ".repeat(u-C0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=cpt[e[l].align];d=m(d,u),C0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-C0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[mO]&&(o+=" ".repeat(p[mO])),o+=zwe(e[l],d,"| "),o+=d,o+=zwe(e[l],d," |"),p[pO]&&(o+=" ".repeat(p[pO])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=C0.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=C0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[upt]||0).fill("")),i.push(...new Array(o.padding[dpt]||0).fill(""))),i.forEach((l,c)=>{r[c]||r.push([]);let u=r[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[mO]||0)+(e.padding[pO]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||C0.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,l)=>a===void 0?Math.max(o,fpt(e[l])):a)}};function zwe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(zwe,"addBorder");function fpt(t){let e=t.padding||[],r=1+(e[mO]||0)+(e[pO]||0);return t.border?r+4:r}s(fpt,"_minWidth");function ppt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(ppt,"getWindowWidth");function mpt(t,e){t=t.trim();let r=C0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(mpt,"alignRight");function hpt(t,e){t=t.trim();let r=C0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(hpt,"alignCenter");var C0;function Ywe(t,e){return C0=e,new ene({width:t?.width||ppt(),wrap:t?.wrap})}s(Ywe,"cliui");f();var Kwe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function tne(t){return t.replace(Kwe,"")}s(tne,"stripAnsi");function Jwe(t,e){let[r,n]=t.match(Kwe)||["",""];t=tne(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(Jwe,"wrap");function rne(t){return Ywe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:tne,wrap:Jwe})}s(rne,"ui");f();var KS=require("path"),hO=require("fs");function nne(t,e){let r=(0,KS.resolve)(".",t),n;for((0,hO.statSync)(r).isDirectory()||(r=(0,KS.dirname)(r));;){if(n=e(r,(0,hO.readdirSync)(r)),n)return(0,KS.resolve)(r,n);if(r=(0,KS.dirname)(n=r),n===r)break}}s(nne,"default");var p_e=require("util"),m_e=require("fs"),h_e=require("url");f();var r_e=require("util"),CO=require("path");f();function OI(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(OI,"camelCase");function gO(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(gO,"decamelize");function AO(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(AO,"looksLikeNumber");f();f();function Xwe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(Xwe,"tokenizeArgString");f();var jf;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(jf||(jf={}));var N1,yO=class{static{s(this,"YargsParser")}constructor(e){N1=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=Xwe(e),o=typeof e=="string",a=gpt(Object.assign(Object.create(null),n.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),c=Object.assign(Object.create(null),n.default),u=n.configObjects||[],d=n.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=n.__||N1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(X){let ne=typeof X=="object"?X.key:X,We=Object.keys(X).map(function(De){return{boolean:"bools",string:"strings",number:"numbers"}[De]}).filter(Boolean).pop();We&&(v[We][ne]=!0),v.arrays[ne]=!0,v.keys.push(ne)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(X){v.bools[X]=!0,v.keys.push(X)}),[].concat(n.string||[]).filter(Boolean).forEach(function(X){v.strings[X]=!0,v.keys.push(X)}),[].concat(n.number||[]).filter(Boolean).forEach(function(X){v.numbers[X]=!0,v.keys.push(X)}),[].concat(n.count||[]).filter(Boolean).forEach(function(X){v.counts[X]=!0,v.keys.push(X)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(X){v.normalize[X]=!0,v.keys.push(X)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([X,ne])=>{typeof ne=="number"&&(v.nargs[X]=ne,v.keys.push(X))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([X,ne])=>{typeof ne=="function"&&(v.coercions[X]=ne,v.keys.push(X))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(X){v.configs[X]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([X,ne])=>{(typeof ne=="boolean"||typeof ne=="function")&&(v.configs[X]=ne)})),Ne(n.key,a,n.default,v.arrays),Object.keys(c).forEach(function(X){(v.aliases[X]||[]).forEach(function(ne){c[ne]=c[X]})});let _=null;tt();let k=[],B=Object.assign(Object.create(null),{_:[]}),N={};for(let X=0;X<i.length;X++){let ne=i[X],We=ne.replace(/^-{3,}/,"---"),De,be,ze,it,ht,Ot;if(ne!=="--"&&/^-/.test(ne)&&It(ne))W(ne);else if(We.match(/^---+(=|$)/)){W(ne);continue}else if(ne.match(/^--.+=/)||!l["short-option-groups"]&&ne.match(/^-.+=/))it=ne.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(Se(it[1],v.arrays)?X=me(X,it[1],i,it[2]):Se(it[1],v.nargs)!==!1?X=ee(X,it[1],i,it[2]):ae(it[1],it[2],!0));else if(ne.match(E)&&l["boolean-negation"])it=ne.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ae(be,Se(be,v.arrays)?[!1]:!1));else if(ne.match(/^--.+/)||!l["short-option-groups"]&&ne.match(/^-[^-]+/))it=ne.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],Se(be,v.arrays)?X=me(X,be,i):Se(be,v.nargs)!==!1?X=ee(X,be,i):(ht=i[X+1],ht!==void 0&&(!ht.match(/^-/)||ht.match(b))&&!Se(be,v.bools)&&!Se(be,v.counts)||/^(true|false)$/.test(ht)?(ae(be,ht),X++):ae(be,vt(be))));else if(ne.match(/^-.\..+=/))it=ne.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&ae(it[1],it[2]);else if(ne.match(/^-.\..+/)&&!ne.match(b))ht=i[X+1],it=ne.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ht!==void 0&&!ht.match(/^-/)&&!Se(be,v.bools)&&!Se(be,v.counts)?(ae(be,ht),X++):ae(be,vt(be)));else if(ne.match(/^-[^-]+/)&&!ne.match(b)){ze=ne.slice(1,-1).split(""),De=!1;for(let lr=0;lr<ze.length;lr++){if(ht=ne.slice(lr+2),ze[lr+1]&&ze[lr+1]==="="){Ot=ne.slice(lr+3),be=ze[lr],Se(be,v.arrays)?X=me(X,be,i,Ot):Se(be,v.nargs)!==!1?X=ee(X,be,i,Ot):ae(be,Ot),De=!0;break}if(ht==="-"){ae(ze[lr],ht);continue}if(/[A-Za-z]/.test(ze[lr])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(ht)&&Se(ht,v.bools)===!1){ae(ze[lr],ht),De=!0;break}if(ze[lr+1]&&ze[lr+1].match(/\W/)){ae(ze[lr],ht),De=!0;break}else ae(ze[lr],vt(ze[lr]))}be=ne.slice(-1)[0],!De&&be!=="-"&&(Se(be,v.arrays)?X=me(X,be,i):Se(be,v.nargs)!==!1?X=ee(X,be,i):(ht=i[X+1],ht!==void 0&&(!/^(-|--)[^-]/.test(ht)||ht.match(b))&&!Se(be,v.bools)&&!Se(be,v.counts)||/^(true|false)$/.test(ht)?(ae(be,ht),X++):ae(be,vt(be))))}else if(ne.match(/^-[0-9]$/)&&ne.match(b)&&Se(ne.slice(1),v.bools))be=ne.slice(1),ae(be,vt(be));else if(ne==="--"){k=i.slice(X+1);break}else if(l["halt-at-non-option"]){k=i.slice(X);break}else W(ne)}Y(B,!0),Y(B,!1),ie(B),O(),re(B,v.aliases,c,!0),te(B),l["set-placeholder-key"]&&pe(B),Object.keys(v.counts).forEach(function(X){ue(B,X.split("."))||ae(X,0)}),p&&k.length&&(B[m]=[]),k.forEach(function(X){B[m].push(X)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(B).filter(X=>X!=="--"&&X.includes("-")).forEach(X=>{delete B[X]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(X=>a[X])).forEach(X=>{l["camel-case-expansion"]&&X.includes("-")&&delete B[X.split(".").map(ne=>OI(ne)).join(".")],delete B[X]});function W(X){let ne=le("_",X);(typeof ne=="string"||typeof ne=="number")&&B._.push(ne)}s(W,"pushPositional");function ee(X,ne,We,De){let be,ze=Se(ne,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(De)||(_=Error(y("Argument unexpected for: %s",ne))),ae(ne,vt(ne)),X;let it=ye(De)?0:1;if(l["nargs-eats-options"])We.length-(X+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",ne))),it=ze;else{for(be=X+1;be<We.length&&(!We[be].match(/^-[^0-9]/)||We[be].match(b)||It(We[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",ne)))}let ht=Math.min(it,ze);for(!ye(De)&&ht>0&&(ae(ne,De),ht--),be=X+1;be<ht+X+1;be++)ae(ne,We[be]);return X+ht}s(ee,"eatNargs");function me(X,ne,We,De){let be=[],ze=De||We[X+1],it=Se(ne,v.nargs);if(Se(ne,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(De)&&/^-/.test(ze)&&!b.test(ze)&&!It(ze)){if(c[ne]!==void 0){let ht=c[ne];be=Array.isArray(ht)?ht:[ht]}}else{ye(De)||be.push(U(ne,De,!0));for(let ht=X+1;ht<We.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=We[ht],/^-/.test(ze)&&!b.test(ze)&&!It(ze)));ht++)X=ht,be.push(U(ne,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",ne))),ae(ne,be),X}s(me,"eatArray");function ae(X,ne,We=o){if(/-/.test(X)&&l["camel-case-expansion"]){let ze=X.split(".").map(function(it){return OI(it)}).join(".");H(X,ze)}let De=U(X,ne,We),be=X.split(".");he(B,be,De),v.aliases[X]&&v.aliases[X].forEach(function(ze){let it=ze.split(".");he(B,it,De)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),ht=[].concat(be);ht.shift(),it=it.concat(ht),(v.aliases[X]||[]).includes(it.join("."))||he(B,it,De)}),Se(X,v.normalize)&&!Se(X,v.arrays)&&[X].concat(v.aliases[X]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return ne},set(ht){ne=typeof ht=="string"?N1.normalize(ht):ht}})})}s(ae,"setArg");function H(X,ne){v.aliases[X]&&v.aliases[X].length||(v.aliases[X]=[ne],h[ne]=!0),v.aliases[ne]&&v.aliases[ne].length||H(ne,X)}s(H,"addNewAlias");function U(X,ne,We){We&&(ne=Apt(ne)),(Se(X,v.bools)||Se(X,v.counts))&&typeof ne=="string"&&(ne=ne==="true");let De=Array.isArray(ne)?ne.map(function(be){return le(X,be)}):le(X,ne);return Se(X,v.counts)&&(ye(De)||typeof De=="boolean")&&(De=ine()),Se(X,v.normalize)&&Se(X,v.arrays)&&(Array.isArray(ne)?De=ne.map(be=>N1.normalize(be)):De=N1.normalize(ne)),De}s(U,"processValue");function le(X,ne){return!l["parse-positional-numbers"]&&X==="_"||!Se(X,v.strings)&&!Se(X,v.bools)&&!Array.isArray(ne)&&(AO(ne)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ne}`)))||!ye(ne)&&Se(X,v.numbers))&&(ne=Number(ne)),ne}s(le,"maybeCoerceNumber");function ie(X){let ne=Object.create(null);re(ne,v.aliases,c),Object.keys(v.configs).forEach(function(We){let De=X[We]||ne[We];if(De)try{let be=null,ze=N1.resolve(N1.cwd(),De),it=v.configs[We];if(typeof it=="function"){try{be=it(ze)}catch(ht){be=ht}if(be instanceof Error){_=be;return}}else be=N1.require(ze);V(be)}catch(be){be.name==="PermissionDenied"?_=be:X[We]&&(_=Error(y("Invalid JSON config file: %s",De)))}})}s(ie,"setConfig");function V(X,ne){Object.keys(X).forEach(function(We){let De=X[We],be=ne?ne+"."+We:We;typeof De=="object"&&De!==null&&!Array.isArray(De)&&l["dot-notation"]?V(De,be):(!ue(B,be.split("."))||Se(be,v.arrays)&&l["combine-arrays"])&&ae(be,De)})}s(V,"setConfigObject");function O(){typeof u<"u"&&u.forEach(function(X){V(X)})}s(O,"setConfigObjects");function Y(X,ne){if(typeof d>"u")return;let We=typeof d=="string"?d:"",De=N1.env();Object.keys(De).forEach(function(be){if(We===""||be.lastIndexOf(We,0)===0){let ze=be.split("__").map(function(it,ht){return ht===0&&(it=it.substring(We.length)),OI(it)});(ne&&v.configs[ze.join(".")]||!ne)&&!ue(X,ze)&&ae(ze.join("."),De[be])}})}s(Y,"applyEnvVars");function te(X){let ne,We=new Set;Object.keys(X).forEach(function(De){if(!We.has(De)&&(ne=Se(De,v.coercions),typeof ne=="function"))try{let be=le(De,ne(X[De]));[].concat(v.aliases[De]||[],De).forEach(ze=>{We.add(ze),X[ze]=be})}catch(be){_=be}})}s(te,"applyCoercions");function pe(X){return v.keys.forEach(ne=>{~ne.indexOf(".")||typeof X[ne]>"u"&&(X[ne]=void 0)}),X}s(pe,"setPlaceholderKeys");function re(X,ne,We,De=!1){Object.keys(We).forEach(function(be){ue(X,be.split("."))||(he(X,be.split("."),We[be]),De&&(g[be]=!0),(ne[be]||[]).forEach(function(ze){ue(X,ze.split("."))||he(X,ze.split("."),We[be])}))})}s(re,"applyDefaultsAndAliases");function ue(X,ne){let We=X;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(be){We=We[be]||{}});let De=ne[ne.length-1];return typeof We!="object"?!1:De in We}s(ue,"hasKey");function he(X,ne,We){let De=X;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(Ot){Ot=Zwe(Ot),typeof De=="object"&&De[Ot]===void 0&&(De[Ot]={}),typeof De[Ot]!="object"||Array.isArray(De[Ot])?(Array.isArray(De[Ot])?De[Ot].push({}):De[Ot]=[De[Ot],{}],De=De[Ot][De[Ot].length-1]):De=De[Ot]});let be=Zwe(ne[ne.length-1]),ze=Se(ne.join("."),v.arrays),it=Array.isArray(We),ht=l["duplicate-arguments-array"];!ht&&Se(be,v.nargs)&&(ht=!0,(!ye(De[be])&&v.nargs[be]===1||Array.isArray(De[be])&&De[be].length===v.nargs[be])&&(De[be]=void 0)),We===ine()?De[be]=ine(De[be]):Array.isArray(De[be])?ht&&ze&&it?De[be]=l["flatten-duplicate-arrays"]?De[be].concat(We):(Array.isArray(De[be][0])?De[be]:[De[be]]).concat([We]):!ht&&!!ze==!!it?De[be]=We:De[be]=De[be].concat([We]):De[be]===void 0&&ze?De[be]=it?We:[We]:ht&&!(De[be]===void 0||Se(be,v.counts)||Se(be,v.bools))?De[be]=[De[be],We]:De[be]=We}s(he,"setKey");function Ne(...X){X.forEach(function(ne){Object.keys(ne||{}).forEach(function(We){v.aliases[We]||(v.aliases[We]=[].concat(a[We]||[]),v.aliases[We].concat(We).forEach(function(De){if(/-/.test(De)&&l["camel-case-expansion"]){let be=OI(De);be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].concat(We).forEach(function(De){if(De.length>1&&/[A-Z]/.test(De)&&l["camel-case-expansion"]){let be=gO(De,"-");be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].forEach(function(De){v.aliases[De]=[We].concat(v.aliases[We].filter(function(be){return De!==be}))}))})})}s(Ne,"extendAliases");function Se(X,ne){let We=[].concat(v.aliases[X]||[],X),De=Object.keys(ne),be=We.find(ze=>De.includes(ze));return be?ne[be]:!1}s(Se,"checkAllAliases");function Je(X){let ne=Object.keys(v);return[].concat(ne.map(De=>v[De])).some(function(De){return Array.isArray(De)?De.includes(X):De[X]})}s(Je,"hasAnyFlag");function Me(X,...ne){return[].concat(...ne).some(function(De){let be=X.match(De);return be&&Je(be[1])})}s(Me,"hasFlagsMatching");function ft(X){if(X.match(b)||!X.match(/^-[^-]+/))return!1;let ne=!0,We,De=X.slice(1).split("");for(let be=0;be<De.length;be++){if(We=X.slice(be+2),!Je(De[be])){ne=!1;break}if(De[be+1]&&De[be+1]==="="||We==="-"||/[A-Za-z]/.test(De[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||De[be+1]&&De[be+1].match(/\W/))break}return ne}s(ft,"hasAllShortFlags");function It(X){return l["unknown-options-as-args"]&&yt(X)}s(It,"isUnknownOptionAsArg");function yt(X){return X=X.replace(/^-{3,}/,"--"),X.match(b)||ft(X)?!1:!Me(X,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(yt,"isUnknownOption");function vt(X){return!Se(X,v.bools)&&!Se(X,v.counts)&&`${X}`in c?c[X]:ce(Oe(X))}s(vt,"defaultValue");function ce(X){return{[jf.BOOLEAN]:!0,[jf.STRING]:"",[jf.NUMBER]:void 0,[jf.ARRAY]:[]}[X]}s(ce,"defaultForType");function Oe(X){let ne=jf.BOOLEAN;return Se(X,v.strings)?ne=jf.STRING:Se(X,v.numbers)?ne=jf.NUMBER:Se(X,v.bools)?ne=jf.BOOLEAN:Se(X,v.arrays)&&(ne=jf.ARRAY),ne}s(Oe,"guessType");function ye(X){return X===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(X=>Se(X,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",X)),!0):Se(X,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",X)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,B),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function gpt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(gpt,"combineAliases");function ine(t){return t!==void 0?t+1:1}s(ine,"increment");function Zwe(t){return t==="__proto__"?"___proto___":t}s(Zwe,"sanitizeKey");function Apt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(Apt,"stripQuotes");var n_e=require("fs");var one,sne,ane,e_e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,t_e=(sne=(one=process==null?void 0:process.versions)===null||one===void 0?void 0:one.node)!==null&&sne!==void 0?sne:(ane=process==null?void 0:process.version)===null||ane===void 0?void 0:ane.slice(1);if(t_e&&Number(t_e.match(/^([^.]+)/)[1])<e_e)throw Error(`yargs parser supports a minimum Node.js version of ${e_e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var ypt=process?process.env:{},i_e=new yO({cwd:process.cwd,env:s(()=>ypt,"env"),format:r_e.format,normalize:CO.normalize,resolve:CO.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,n_e.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),V8=s(function(e,r){return i_e.parse(e.slice(),r).argv},"Parser");V8.detailed=function(t,e){return i_e.parse(t.slice(),e)};V8.camelCase=OI;V8.decamelize=gO;V8.looksLikeNumber=AO;var o_e=V8;var Rm=require("path");f();function Cpt(){return xpt()?0:1}s(Cpt,"getProcessArgvBinIndex");function xpt(){return vpt()&&!process.defaultApp}s(xpt,"isBundledElectronApp");function vpt(){return!!process.versions.electron}s(vpt,"isElectronApp");function s_e(){return process.argv[Cpt()]}s(s_e,"getProcessArgvBin");f();var gs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var JS=require("fs"),a_e=require("util"),l_e=require("path");var c_e={fs:{readFileSync:JS.readFileSync,writeFile:JS.writeFile},format:a_e.format,resolve:l_e.resolve,exists:s(t=>{try{return(0,JS.statSync)(t).isFile()}catch{return!1}},"exists")};f();var Sm,lne=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),Sm.format.apply(Sm.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),Sm.format.apply(Sm.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),l=JSON.stringify(this.cache[i],null,2);Sm.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{Sm.fs.readFileSync&&(e=JSON.parse(Sm.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=Sm.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=Sm.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return Sm.exists(e)}};function u_e(t,e){Sm=e;let r=new lne(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(u_e,"y18n");var bpt=s(t=>u_e(t,c_e),"y18n"),d_e=bpt;var Ept="require is not supported by ESM",f_e="loading a directory of commands is not supported yet for ESM",$8;try{$8=(0,h_e.fileURLToPath)(importMetaUrlShim)}catch{$8=process.cwd()}var Ipt=$8.substring(0,$8.lastIndexOf("node_modules")),g_e={assert:{notStrictEqual:xO.notStrictEqual,strictEqual:xO.strictEqual},cliui:rne,findUp:nne,getEnv:s(t=>process.env[t],"getEnv"),inspect:p_e.inspect,getCallerFile:s(()=>{throw new gs(f_e)},"getCallerFile"),getProcessArgvBin:s_e,mainFilename:Ipt||process.cwd(),Parser:o_e,path:{basename:Rm.basename,dirname:Rm.dirname,extname:Rm.extname,relative:Rm.relative,resolve:Rm.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:m_e.readFileSync,require:s(()=>{throw new gs(Ept)},"require"),requireDirectory:s(()=>{throw new gs(f_e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:d_e({directory:(0,Rm.resolve)($8,"../../../locales"),updateFiles:!1})};f();f();f();function ku(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(ku,"assertNotStrictEqual");function cne(t,e){e.assert.strictEqual(typeof t,"string")}s(cne,"assertSingleKey");function XS(t){return Object.keys(t)}s(XS,"objectKeys");f();function As(t){return!!t&&!!t.then&&typeof t.then=="function"}s(As,"isPromise");f();f();f();function iv(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===r.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:c})}),o}s(iv,"parseCommand");var Tpt=["first","second","third","fourth","fifth","sixth"];function Cr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[iv(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,l]=n(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new gs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new gs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=A_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&y_e(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=A_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&y_e(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Cr,"argsert");function A_e(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(A_e,"guessType");function y_e(t,e,r){throw new gs(`Invalid ${Tpt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(y_e,"argumentTypeError");var vO=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Cr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function C_e(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(C_e,"commandMiddlewareFactory");function UI(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(As(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return As(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(UI,"applyMiddleware");f();function qI(t,e,r=n=>{throw n}){try{let n=wpt(t)?t():t;return As(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(qI,"maybeAsyncResult");function wpt(t){return typeof t=="function"}s(wpt,"isFunction");f();function une(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(une,"whichModule");var ZS=/(^\*)|(^\$0)/,dne=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let l=[],c=C_e(o);if(i=i||(()=>{}),Array.isArray(e))if(_pt(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(Rpt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(x_e(n)){this.addHandler([e].concat(l),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=iv(e);l=l.map(m=>iv(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>ZS.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(ZS,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,d,l,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=r.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,r,n.aliases,u,i,o,a);return As(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,r)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,l,c){let u=r.builder,d=n;if(bO(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),c);if(As(p))return p.then(m=>(d=b_e(m)?m:n,this.parseAndUpdateUsage(e,r,d,o,a,l)))}else Spt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),d=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,d,o,a,l)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let l=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return As(l)?l.then(c=>({aliases:n.parsed.aliases,innerArgv:c})):{aliases:n.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=ZS.test(r.original)?r.original.replace(ZS,"").trim():r.original,i=e.filter(o=>!ZS.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);n=qI(n,d=>(u(d),d))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=UI(n,a,l,!1),n=qI(n,d=>{let p=r.handler(d);return As(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),As(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,l){let c={};if(o)return n;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(r,n,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),d=UI(n,l,u,!0);return As(d)?d.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,r,d,i,a,l,u,c)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let c=o.shift();this.populatePositional(c,r,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,r,l)}return r._=n.commands.concat(r._.map(c=>""+c)),this.postProcessPositionals(r,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=iv(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(r);Object.keys(r).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(r[d]||(r[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=ZS.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(bO(r))return r(e,!0);x_e(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=une(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;ku(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();ku(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function v_e(t,e,r,n){return new dne(t,e,r,n)}s(v_e,"command");function x_e(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(x_e,"isCommandBuilderDefinition");function _pt(t){return t.every(e=>typeof e=="string")}s(_pt,"isCommandAndAliases");function bO(t){return typeof t=="function"}s(bO,"isCommandBuilderCallback");function Spt(t){return typeof t=="object"}s(Spt,"isCommandBuilderOptionDefinitions");function Rpt(t){return typeof t=="object"&&!Array.isArray(t)}s(Rpt,"isCommandHandlerDefinition");f();f();function ov(t={},e=()=>!0){let r={};return XS(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(ov,"objFilter");f();function sv(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(sv,"setBlocking");function kpt(t){return typeof t=="boolean"}s(kpt,"isBoolean");function I_e(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(U){i.push(U)},"failFn");let o=null,a=null,l=!0;n.showHelpOnFail=s(function(U=!0,le){let[ie,V]=typeof U=="string"?[!0,U]:[U,le];return t.getInternalMethods().isGlobalContext()&&(a=V),o=V,l=ie,n},"showHelpOnFailFn");let c=!1;n.fail=s(function(U,le){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let V=i.length-1;V>=0;--V){let O=i[V];if(kpt(O)){if(le)throw le;if(U)throw Error(U)}else O(U,le,n)}else{if(t.getExitProcess()&&sv(!0),!c){c=!0,l&&(t.showHelp("error"),ie.error()),(U||le)&&ie.error(U||le);let V=o||a;V&&((U||le)&&ie.error(""),ie.error(V))}if(le=le||new gs(U),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,le);throw le}},"fail");let u=[],d=!1;n.usage=(H,U)=>H===null?(d=!0,u=[],n):(d=!1,u.push([H,U||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>d,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(H,U)=>{p.push([H,U||""])};let m=[];n.command=s(function(U,le,ie,V,O=!1){ie&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([U,le||"",ie,V,O])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(U,le){Array.isArray(U)?U.forEach(ie=>{n.describe(ie,le)}):typeof U=="object"?Object.keys(U).forEach(ie=>{n.describe(ie,U[ie])}):h[U]=le},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=H=>{g.push(H)};let y=!1,v;n.wrap=H=>{y=!0,v=H},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=ee(),y=!0),v);let b="__yargsString__:";n.deferY18nLookup=H=>b+H,n.help=s(function(){if(k)return k;_();let U=t.customScriptName?t.$0:e.path.basename(t.$0),le=t.getDemandedOptions(),ie=t.getDemandedCommands(),V=t.getDeprecatedOptions(),O=t.getGroups(),Y=t.getOptions(),te=[];te=te.concat(Object.keys(h)),te=te.concat(Object.keys(le)),te=te.concat(Object.keys(ie)),te=te.concat(Object.keys(Y.default)),te=te.filter(N),te=Object.keys(te.reduce((Me,ft)=>(ft!=="_"&&(Me[ft]=!0),Me),{}));let pe=n.getWrap(),re=e.cliui({width:pe,wrap:!!pe});if(!d){if(u.length)u.forEach(Me=>{re.div({text:`${Me[0].replace(/\$0/g,U)}`}),Me[1]&&re.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),re.div();else if(m.length){let Me=null;ie._?Me=`${U} <${r("command")}>
`:Me=`${U} [${r("command")}]
`,re.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){re.div(r("Commands:"));let Me=t.getInternalMethods().getContext(),ft=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((yt,vt)=>yt[0].localeCompare(vt[0])));let It=U?`${U} `:"";m.forEach(yt=>{let vt=`${It}${ft}${yt[0].replace(/^\$0 ?/,"")}`;re.span({text:vt,padding:[0,2,0,2],width:E(m,pe,`${U}${ft}`)+4},{text:yt[1]});let ce=[];yt[2]&&ce.push(`[${r("default")}]`),yt[3]&&yt[3].length&&ce.push(`[${r("aliases:")} ${yt[3].join(", ")}]`),yt[4]&&(typeof yt[4]=="string"?ce.push(`[${r("deprecated: %s",yt[4])}]`):ce.push(`[${r("deprecated")}]`)),ce.length?re.div({text:ce.join(" "),padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}let ue=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);te=te.filter(Me=>!t.parsed.newAliases[Me]&&ue.every(ft=>(Y.alias[ft]||[]).indexOf(Me)===-1));let he=r("Options:");O[he]||(O[he]=[]),B(te,Y.alias,O,he);let Ne=s(Me=>/^--/.test(EO(Me)),"isLongSwitch"),Se=Object.keys(O).filter(Me=>O[Me].length>0).map(Me=>{let ft=O[Me].filter(N).map(It=>{if(ue.includes(It))return It;for(let yt=0,vt;(vt=ue[yt])!==void 0;yt++)if((Y.alias[vt]||[]).includes(It))return vt;return It});return{groupName:Me,normalizedKeys:ft}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:ft})=>{let It=ft.reduce((yt,vt)=>(yt[vt]=[vt].concat(Y.alias[vt]||[]).map(ce=>Me===n.getPositionalGroupName()?ce:(/^[0-9]$/.test(ce)?Y.boolean.includes(vt)?"-":"--":ce.length>1?"--":"-")+ce).sort((ce,Oe)=>Ne(ce)===Ne(Oe)?0:Ne(ce)?1:-1).join(", "),yt),{});return{groupName:Me,normalizedKeys:ft,switches:It}});if(Se.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).some(({normalizedKeys:Me,switches:ft})=>!Me.every(It=>Ne(ft[It])))&&Se.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:ft})=>{Me.forEach(It=>{Ne(ft[It])&&(ft[It]=Bpt(ft[It],4))})}),Se.forEach(({groupName:Me,normalizedKeys:ft,switches:It})=>{re.div(Me),ft.forEach(yt=>{let vt=It[yt],ce=h[yt]||"",Oe=null;ce.includes(b)&&(ce=r(ce.substring(b.length))),Y.boolean.includes(yt)&&(Oe=`[${r("boolean")}]`),Y.count.includes(yt)&&(Oe=`[${r("count")}]`),Y.string.includes(yt)&&(Oe=`[${r("string")}]`),Y.normalize.includes(yt)&&(Oe=`[${r("string")}]`),Y.array.includes(yt)&&(Oe=`[${r("array")}]`),Y.number.includes(yt)&&(Oe=`[${r("number")}]`);let ye=s(ne=>typeof ne=="string"?`[${r("deprecated: %s",ne)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),tt=[yt in V?ye(V[yt]):null,Oe,yt in le?`[${r("required")}]`:null,Y.choices&&Y.choices[yt]?`[${r("choices:")} ${n.stringifiedValues(Y.choices[yt])}]`:null,W(Y.default[yt],Y.defaultDescription[yt])].filter(Boolean).join(" ");re.span({text:EO(vt),padding:[0,2,0,2+E_e(vt)],width:E(It,pe)+4},ce);let X=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!X?re.div({text:tt,padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}),p.length&&(re.div(r("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,U)}),p.forEach(Me=>{Me[1]===""?re.div({text:Me[0],padding:[0,2,0,2]}):re.div({text:Me[0],padding:[0,2,0,2],width:E(p,pe)+4},{text:Me[1]})}),re.div()),g.length>0){let Me=g.map(ft=>ft.replace(/\$0/g,U)).join(`
`);re.div(`${Me}
`)}return re.toString().replace(/\s*$/,"")},"help");function E(H,U,le){let ie=0;return Array.isArray(H)||(H=Object.values(H).map(V=>[V])),H.forEach(V=>{ie=Math.max(e.stringWidth(le?`${le} ${EO(V[0])}`:EO(V[0]))+E_e(V[0]),ie)}),U&&(ie=Math.min(ie,parseInt((U*.5).toString(),10))),ie}s(E,"maxWidth");function _(){let H=t.getDemandedOptions(),U=t.getOptions();(Object.keys(U.alias)||[]).forEach(le=>{U.alias[le].forEach(ie=>{h[ie]&&n.describe(le,h[ie]),ie in H&&t.demandOption(le,H[ie]),U.boolean.includes(ie)&&t.boolean(le),U.count.includes(ie)&&t.count(le),U.string.includes(ie)&&t.string(le),U.normalize.includes(ie)&&t.normalize(le),U.array.includes(ie)&&t.array(le),U.number.includes(ie)&&t.number(le)})})}s(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function B(H,U,le,ie){let V=[],O=null;return Object.keys(le).forEach(Y=>{V=V.concat(le[Y])}),H.forEach(Y=>{O=[Y].concat(U[Y]),O.some(te=>V.indexOf(te)!==-1)||le[ie].push(Y)}),V}s(B,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=H=>{let U=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:U[H])(n.help())},n.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(U,le){let ie="",V=le||", ",O=[].concat(U);return!U||!O.length||O.forEach(Y=>{ie.length&&(ie+=V),ie+=JSON.stringify(Y)}),ie},"stringifiedValues");function W(H,U){let le=`[${r("default:")} `;if(H===void 0&&!U)return null;if(U)le+=U;else switch(typeof H){case"string":le+=`"${H}"`;break;case"object":le+=JSON.stringify(H);break;default:le+=H}return`${le}]`}s(W,"defaultString");function ee(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(ee,"windowWidth");let me=null;n.version=H=>{me=H},n.showVersion=H=>{let U=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:U[H])(me)},n.reset=s(function(U){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=ov(h,le=>!U[le]),n},"reset");let ae=[];return n.freeze=s(function(){ae.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(U=!1){let le=ae.pop();le&&(U?(h={...le.descriptions,...h},m=[...le.commands,...m],u=[...le.usages,...u],p=[...le.examples,...p],g=[...le.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=le)},"unfreeze"),n}s(I_e,"usage");function fne(t){return typeof t=="object"}s(fne,"isIndentedText");function Bpt(t,e){return fne(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(Bpt,"addIndentation");function E_e(t){return fne(t)?t.indentation:0}s(E_e,"getIndentation");function EO(t){return fne(t)?t.text:t}s(EO,"getText");f();f();var T_e=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,w_e=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var pne=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,l;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(bO(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=iv(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(r,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[n._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!n||c.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(ku(this.customCompletionFunction,null,this.shim),Dpt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return As(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return Npt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return As(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?w_e:T_e,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function __e(t,e,r,n){return new pne(t,e,r,n)}s(__e,"completion");function Dpt(t){return t.length<3}s(Dpt,"isSyncCompletionFunction");function Npt(t){return t.length>3}s(Npt,"isFallbackCompletionFunction");f();f();function S_e(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(S_e,"levenshtein");var R_e=["$0","--","_"];function k_e(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!R_e.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let B=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+B;N<p._.length&&p._.slice(N).forEach(W=>{W=String(W),!_.commands.includes(W)&&!E.includes(W)&&E.push(W)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{R_e.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=n("Invalid values:");g.forEach(v=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){Cr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(ku(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){Cr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=S_e(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=ov(a,m=>!p[m]),c=ov(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();ku(p,void 0,r),{implied:a,conflicting:c}=p},"unfreeze"),o}s(k_e,"validation");f();var mne=[],z8;function IO(t,e,r,n){z8=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=Fpt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}Lpt(a),mne.push(a),i=o?JSON.parse(z8.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=IO(i,z8.path.dirname(a),r,z8)}return mne=[],r?B_e(i,t):Object.assign({},i,t)}s(IO,"applyExtends");function Lpt(t){if(mne.indexOf(t)>-1)throw new gs(`Circular extended configurations: '${t}'.`)}s(Lpt,"checkForCircularExtends");function Fpt(t,e){return z8.path.resolve(t,e)}s(Fpt,"getPathToDefaultConfig");function B_e(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=B_e(t[i],e[i]):r[i]=e[i];return r}s(B_e,"mergeDeep");var Er=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},fe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_a,WI,Y8,Vf,x0,TO,av,GI,wO,$f,_O,zf,vg,v0,Yf,SO,e5,Ql,Qr,RO,kO,b0,HI,t5,jI,lv,BO,Nn,VI,$I,zI,Hn,PO,bg,la;function J_e(t){return(e=[],r=t.process.cwd(),n)=>{let i=new Tne(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(J_e,"YargsFactory");var P_e=Symbol("copyDoubleDash"),D_e=Symbol("copyDoubleDash"),hne=Symbol("deleteFromParserHintObject"),N_e=Symbol("emitWarning"),L_e=Symbol("freeze"),F_e=Symbol("getDollarZero"),YI=Symbol("getParserConfiguration"),M_e=Symbol("getUsageConfiguration"),gne=Symbol("guessLocale"),Q_e=Symbol("guessVersion"),O_e=Symbol("parsePositionalNumbers"),Ane=Symbol("pkgUp"),cv=Symbol("populateParserHintArray"),r5=Symbol("populateParserHintSingleValueDictionary"),yne=Symbol("populateParserHintArrayDictionary"),Cne=Symbol("populateParserHintDictionary"),xne=Symbol("sanitizeKey"),vne=Symbol("setKey"),bne=Symbol("unfreeze"),U_e=Symbol("validateAsync"),q_e=Symbol("getCommandInstance"),W_e=Symbol("getContext"),G_e=Symbol("getHasOutput"),H_e=Symbol("getLoggerInstance"),j_e=Symbol("getParseContext"),V_e=Symbol("getUsageInstance"),$_e=Symbol("getValidationInstance"),DO=Symbol("hasParseCallback"),z_e=Symbol("isGlobalContext"),KI=Symbol("postProcess"),Y_e=Symbol("rebase"),Ene=Symbol("reset"),K8=Symbol("runYargsParserAndExecuteCommands"),Ine=Symbol("runValidation"),K_e=Symbol("setHasOutput"),JI=Symbol("kTrackManuallySetKeys"),Tne=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,_a.set(this,void 0),WI.set(this,void 0),Y8.set(this,{commands:[],fullCommands:[]}),Vf.set(this,null),x0.set(this,null),TO.set(this,"show-hidden"),av.set(this,null),GI.set(this,!0),wO.set(this,{}),$f.set(this,!0),_O.set(this,[]),zf.set(this,void 0),vg.set(this,{}),v0.set(this,!1),Yf.set(this,null),SO.set(this,!0),e5.set(this,void 0),Ql.set(this,""),Qr.set(this,void 0),RO.set(this,void 0),kO.set(this,{}),b0.set(this,null),HI.set(this,null),t5.set(this,{}),jI.set(this,{}),lv.set(this,void 0),BO.set(this,!1),Nn.set(this,void 0),VI.set(this,!1),$I.set(this,!1),zI.set(this,!1),Hn.set(this,void 0),PO.set(this,{}),bg.set(this,null),la.set(this,void 0),Er(this,Nn,i,"f"),Er(this,lv,e,"f"),Er(this,WI,r,"f"),Er(this,RO,n,"f"),Er(this,zf,new vO(this),"f"),this.$0=this[F_e](),this[Ene](),Er(this,_a,fe(this,_a,"f"),"f"),Er(this,Hn,fe(this,Hn,"f"),"f"),Er(this,la,fe(this,la,"f"),"f"),Er(this,Qr,fe(this,Qr,"f"),"f"),fe(this,Qr,"f").showHiddenOpt=fe(this,TO,"f"),Er(this,e5,this[D_e](),"f")}addHelpOpt(e,r){let n="help";return Cr("[string|boolean] [string]",[e,r],arguments.length),fe(this,Yf,"f")&&(this[hne](fe(this,Yf,"f")),Er(this,Yf,null,"f")),e===!1&&r===void 0?this:(Er(this,Yf,typeof e=="string"?e:n,"f"),this.boolean(fe(this,Yf,"f")),this.describe(fe(this,Yf,"f"),r||fe(this,Hn,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Cr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:fe(this,TO,"f");return this.boolean(n),this.describe(n,r||fe(this,Hn,"f").deferY18nLookup("Show hidden options")),fe(this,Qr,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Cr("<object|string|array> [string|array]",[e,r],arguments.length),this[yne](this.alias.bind(this),"alias",e,r),this}array(e){return Cr("<array|string>",[e],arguments.length),this[cv]("array",e),this[JI](e),this}boolean(e){return Cr("<array|string>",[e],arguments.length),this[cv]("boolean",e),this[JI](e),this}check(e,r){return Cr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>qI(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&fe(this,Hn,"f").fail(o.toString(),o):fe(this,Hn,"f").fail(fe(this,Nn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(fe(this,Hn,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Cr("<object|string|array> [string|array]",[e,r],arguments.length),this[yne](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Cr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new gs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new gs("coerce callback must be provided");return fe(this,Qr,"f").key[e]=!0,fe(this,zf,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?qI(()=>(o=i.getAliases(),r(n[e])),l=>{n[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])n[u]=l;return n},l=>{throw new gs(l.message)}):n},e),this}conflicts(e,r){return Cr("<string|object> [string|array]",[e,r],arguments.length),fe(this,la,"f").conflicts(e,r),this}config(e="config",r,n){return Cr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=IO(e,fe(this,WI,"f"),this[YI]()["deep-merge-config"]||!1,fe(this,Nn,"f")),fe(this,Qr,"f").configObjects=(fe(this,Qr,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||fe(this,Hn,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{fe(this,Qr,"f").config[i]=n||!0}),this)}completion(e,r,n){return Cr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Er(this,x0,e||fe(this,x0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(fe(this,x0,"f"),r),n&&fe(this,Vf,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Cr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),fe(this,_a,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Cr("<string> [object]",[e,r],arguments.length);let n=fe(this,RO,"f")||fe(this,Nn,"f").require;return fe(this,_a,"f").addDirectory(e,n,fe(this,Nn,"f").getCallerFile(),r),this}count(e){return Cr("<array|string>",[e],arguments.length),this[cv]("count",e),this[JI](e),this}default(e,r,n){return Cr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(cne(e,fe(this,Nn,"f")),fe(this,Qr,"f").defaultDescription[e]=n),typeof r=="function"&&(cne(e,fe(this,Nn,"f")),fe(this,Qr,"f").defaultDescription[e]||(fe(this,Qr,"f").defaultDescription[e]=fe(this,Hn,"f").functionDescription(r)),r=r.call()),this[r5](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Cr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),fe(this,Qr,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{ku(n,!0,fe(this,Nn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(ku(n,!0,fe(this,Nn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{ku(n,!0,fe(this,Nn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Cr("<object|string|array> [string]",[e,r],arguments.length),this[r5](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Cr("<string> [string|boolean]",[e,r],arguments.length),fe(this,Qr,"f").deprecatedOptions[e]=r,this}describe(e,r){return Cr("<object|string|array> [string]",[e,r],arguments.length),this[vne](e,!0),fe(this,Hn,"f").describe(e,r),this}detectLocale(e){return Cr("<boolean>",[e],arguments.length),Er(this,GI,e,"f"),this}env(e){return Cr("[string|boolean]",[e],arguments.length),e===!1?delete fe(this,Qr,"f").envPrefix:fe(this,Qr,"f").envPrefix=e||"",this}epilogue(e){return Cr("<string>",[e],arguments.length),fe(this,Hn,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Cr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):fe(this,Hn,"f").example(e,r),this}exit(e,r){Er(this,v0,!0,"f"),Er(this,av,r,"f"),fe(this,$f,"f")&&fe(this,Nn,"f").process.exit(e)}exitProcess(e=!0){return Cr("[boolean]",[e],arguments.length),Er(this,$f,e,"f"),this}fail(e){if(Cr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new gs("Invalid first argument. Expected function or boolean 'false'");return fe(this,Hn,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Cr("<array> [function]",[e,r],arguments.length),r?fe(this,Vf,"f").getCompletion(e,r):new Promise((n,i)=>{fe(this,Vf,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Cr([],0),fe(this,Qr,"f").demandedOptions}getDemandedCommands(){return Cr([],0),fe(this,Qr,"f").demandedCommands}getDeprecatedOptions(){return Cr([],0),fe(this,Qr,"f").deprecatedOptions}getDetectLocale(){return fe(this,GI,"f")}getExitProcess(){return fe(this,$f,"f")}getGroups(){return Object.assign({},fe(this,vg,"f"),fe(this,jI,"f"))}getHelp(){if(Er(this,v0,!0,"f"),!fe(this,Hn,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[K8](fe(this,lv,"f"),void 0,void 0,0,!0);if(As(r))return r.then(()=>fe(this,Hn,"f").help())}let e=fe(this,_a,"f").runDefaultBuilderOn(this);if(As(e))return e.then(()=>fe(this,Hn,"f").help())}return Promise.resolve(fe(this,Hn,"f").help())}getOptions(){return fe(this,Qr,"f")}getStrict(){return fe(this,VI,"f")}getStrictCommands(){return fe(this,$I,"f")}getStrictOptions(){return fe(this,zI,"f")}global(e,r){return Cr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?fe(this,Qr,"f").local=fe(this,Qr,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{fe(this,Qr,"f").local.includes(n)||fe(this,Qr,"f").local.push(n)}),this}group(e,r){Cr("<string|array> <string>",[e,r],arguments.length);let n=fe(this,jI,"f")[r]||fe(this,vg,"f")[r];fe(this,jI,"f")[r]&&delete fe(this,jI,"f")[r];let i={};return fe(this,vg,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Cr("<string>",[e],arguments.length),fe(this,Qr,"f").hiddenOptions.push(e),this}implies(e,r){return Cr("<string|object> [number|string|array]",[e,r],arguments.length),fe(this,la,"f").implies(e,r),this}locale(e){return Cr("[string]",[e],arguments.length),e===void 0?(this[gne](),fe(this,Nn,"f").y18n.getLocale()):(Er(this,GI,!1,"f"),fe(this,Nn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return fe(this,zf,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Cr("<string|object|array> [number]",[e,r],arguments.length),this[r5](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Cr("<array|string>",[e],arguments.length),this[cv]("normalize",e),this}number(e){return Cr("<array|string>",[e],arguments.length),this[cv]("number",e),this[JI](e),this}option(e,r){if(Cr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[JI](e),fe(this,bg,"f")&&(e==="version"||r?.alias==="version")&&this[N_e](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),fe(this,Qr,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(fe(this,Qr,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=fe(this,Hn,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Cr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[L_e](),typeof e>"u"&&(e=fe(this,lv,"f")),typeof r=="object"&&(Er(this,HI,r,"f"),r=n),typeof r=="function"&&(Er(this,b0,r,"f"),r=!1),r||Er(this,lv,e,"f"),fe(this,b0,"f")&&Er(this,$f,!1,"f");let i=this[K8](e,!!r),o=this.parsed;return fe(this,Vf,"f").setParsed(this.parsed),As(i)?i.then(a=>(fe(this,b0,"f")&&fe(this,b0,"f").call(this,fe(this,av,"f"),a,fe(this,Ql,"f")),a)).catch(a=>{throw fe(this,b0,"f")&&fe(this,b0,"f")(a,this.parsed.argv,fe(this,Ql,"f")),a}).finally(()=>{this[bne](),this.parsed=o}):(fe(this,b0,"f")&&fe(this,b0,"f").call(this,fe(this,av,"f"),i,fe(this,Ql,"f")),this[bne](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return As(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(As(i))throw new gs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Cr("<object>",[e],arguments.length),Er(this,kO,e,"f"),this}pkgConf(e,r){Cr("<string> [string]",[e,r],arguments.length);let n=null,i=this[Ane](r||fe(this,WI,"f"));return i[e]&&typeof i[e]=="object"&&(n=IO(i[e],r||fe(this,WI,"f"),this[YI]()["deep-merge-config"]||!1,fe(this,Nn,"f")),fe(this,Qr,"f").configObjects=(fe(this,Qr,"f").configObjects||[]).concat(n)),this}positional(e,r){Cr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=ov(r,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:n.includes(a));let i=fe(this,Y8,"f").fullCommands[fe(this,Y8,"f").fullCommands.length-1],o=i?fe(this,_a,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return XS(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(r[a]=!0):l[e]&&!(a in r)&&(r[a]=l[e])}),this.group(e,fe(this,Hn,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Cr("[boolean]",[e],arguments.length),Er(this,BO,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Cr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&fe(this,Qr,"f").narg[e]?this:(this[r5](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Cr("[string] [string]",[e,r],arguments.length),e=e||this.$0,fe(this,e5,"f").log(fe(this,Vf,"f").generateCompletionScript(e,r||fe(this,x0,"f")||"completion")),this}showHelp(e){if(Cr("[string|function]",[e],arguments.length),Er(this,v0,!0,"f"),!fe(this,Hn,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[K8](fe(this,lv,"f"),void 0,void 0,0,!0);if(As(n))return n.then(()=>{fe(this,Hn,"f").showHelp(e)}),this}let r=fe(this,_a,"f").runDefaultBuilderOn(this);if(As(r))return r.then(()=>{fe(this,Hn,"f").showHelp(e)}),this}return fe(this,Hn,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Cr("[boolean|string] [string]",[e,r],arguments.length),fe(this,Hn,"f").showHelpOnFail(e,r),this}showVersion(e){return Cr("[string|function]",[e],arguments.length),fe(this,Hn,"f").showVersion(e),this}skipValidation(e){return Cr("<array|string>",[e],arguments.length),this[cv]("skipValidation",e),this}strict(e){return Cr("[boolean]",[e],arguments.length),Er(this,VI,e!==!1,"f"),this}strictCommands(e){return Cr("[boolean]",[e],arguments.length),Er(this,$I,e!==!1,"f"),this}strictOptions(e){return Cr("[boolean]",[e],arguments.length),Er(this,zI,e!==!1,"f"),this}string(e){return Cr("<array|string>",[e],arguments.length),this[cv]("string",e),this[JI](e),this}terminalWidth(){return Cr([],0),fe(this,Nn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Cr("<object>",[e],arguments.length),Er(this,GI,!1,"f"),fe(this,Nn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Cr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(ku(e,null,fe(this,Nn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new gs(".usage() description must start with $0 if being used as alias for .command()")}else return fe(this,Hn,"f").usage(e),this}usageConfiguration(e){return Cr("<object>",[e],arguments.length),Er(this,PO,e,"f"),this}version(e,r,n){let i="version";if(Cr("[boolean|string] [string] [string]",[e,r,n],arguments.length),fe(this,bg,"f")&&(this[hne](fe(this,bg,"f")),fe(this,Hn,"f").version(void 0),Er(this,bg,null,"f")),arguments.length===0)n=this[Q_e](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Er(this,bg,typeof e=="string"?e:i,"f"),r=r||fe(this,Hn,"f").deferY18nLookup("Show version number"),fe(this,Hn,"f").version(n||void 0),this.boolean(fe(this,bg,"f")),this.describe(fe(this,bg,"f"),r),this}wrap(e){return Cr("<number|null|undefined>",[e],arguments.length),fe(this,Hn,"f").wrap(e),this}[(_a=new WeakMap,WI=new WeakMap,Y8=new WeakMap,Vf=new WeakMap,x0=new WeakMap,TO=new WeakMap,av=new WeakMap,GI=new WeakMap,wO=new WeakMap,$f=new WeakMap,_O=new WeakMap,zf=new WeakMap,vg=new WeakMap,v0=new WeakMap,Yf=new WeakMap,SO=new WeakMap,e5=new WeakMap,Ql=new WeakMap,Qr=new WeakMap,RO=new WeakMap,kO=new WeakMap,b0=new WeakMap,HI=new WeakMap,t5=new WeakMap,jI=new WeakMap,lv=new WeakMap,BO=new WeakMap,Nn=new WeakMap,VI=new WeakMap,$I=new WeakMap,zI=new WeakMap,Hn=new WeakMap,PO=new WeakMap,bg=new WeakMap,la=new WeakMap,P_e)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[D_e](){return{log:s((...e)=>{this[DO]()||console.log(...e),Er(this,v0,!0,"f"),fe(this,Ql,"f").length&&Er(this,Ql,fe(this,Ql,"f")+`
`,"f"),Er(this,Ql,fe(this,Ql,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[DO]()||console.error(...e),Er(this,v0,!0,"f"),fe(this,Ql,"f").length&&Er(this,Ql,fe(this,Ql,"f")+`
`,"f"),Er(this,Ql,fe(this,Ql,"f")+e.join(" "),"f")},"error")}}[hne](e){XS(fe(this,Qr,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=fe(this,Qr,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete fe(this,Hn,"f").getDescriptions()[e]}[N_e](e,r,n){fe(this,wO,"f")[n]||(fe(this,Nn,"f").process.emitWarning(e,r),fe(this,wO,"f")[n]=!0)}[L_e](){fe(this,_O,"f").push({options:fe(this,Qr,"f"),configObjects:fe(this,Qr,"f").configObjects.slice(0),exitProcess:fe(this,$f,"f"),groups:fe(this,vg,"f"),strict:fe(this,VI,"f"),strictCommands:fe(this,$I,"f"),strictOptions:fe(this,zI,"f"),completionCommand:fe(this,x0,"f"),output:fe(this,Ql,"f"),exitError:fe(this,av,"f"),hasOutput:fe(this,v0,"f"),parsed:this.parsed,parseFn:fe(this,b0,"f"),parseContext:fe(this,HI,"f")}),fe(this,Hn,"f").freeze(),fe(this,la,"f").freeze(),fe(this,_a,"f").freeze(),fe(this,zf,"f").freeze()}[F_e](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(fe(this,Nn,"f").process.argv()[0])?r=fe(this,Nn,"f").process.argv().slice(1,2):r=fe(this,Nn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[Y_e](fe(this,WI,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),fe(this,Nn,"f").getEnv("_")&&fe(this,Nn,"f").getProcessArgvBin()===fe(this,Nn,"f").getEnv("_")&&(e=fe(this,Nn,"f").getEnv("_").replace(`${fe(this,Nn,"f").path.dirname(fe(this,Nn,"f").process.execPath())}/`,"")),e}[YI](){return fe(this,kO,"f")}[M_e](){return fe(this,PO,"f")}[gne](){if(!fe(this,GI,"f"))return;let e=fe(this,Nn,"f").getEnv("LC_ALL")||fe(this,Nn,"f").getEnv("LC_MESSAGES")||fe(this,Nn,"f").getEnv("LANG")||fe(this,Nn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[Q_e](){return this[Ane]().version||"unknown"}[O_e](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)fe(this,Nn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[Ane](e){let r=e||"*";if(fe(this,t5,"f")[r])return fe(this,t5,"f")[r];let n={};try{let i=e||fe(this,Nn,"f").mainFilename;!e&&fe(this,Nn,"f").path.extname(i)&&(i=fe(this,Nn,"f").path.dirname(i));let o=fe(this,Nn,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});ku(o,void 0,fe(this,Nn,"f")),n=JSON.parse(fe(this,Nn,"f").readFileSync(o,"utf8"))}catch{}return fe(this,t5,"f")[r]=n||{},fe(this,t5,"f")[r]}[cv](e,r){r=[].concat(r),r.forEach(n=>{n=this[xne](n),fe(this,Qr,"f")[e].push(n)})}[r5](e,r,n,i){this[Cne](e,r,n,i,(o,a,l)=>{fe(this,Qr,"f")[o][a]=l})}[yne](e,r,n,i){this[Cne](e,r,n,i,(o,a,l)=>{fe(this,Qr,"f")[o][a]=(fe(this,Qr,"f")[o][a]||[]).concat(l)})}[Cne](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of XS(n))e(a,n[a]);else o(r,this[xne](n),i)}[xne](e){return e==="__proto__"?"___proto___":e}[vne](e,r){return this[r5](this[vne].bind(this),"key",e,r),this}[bne](){var e,r,n,i,o,a,l,c,u,d,p,m;let h=fe(this,_O,"f").pop();ku(h,void 0,fe(this,Nn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){Er(e,Qr,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){Er(r,$f,y,"f")}}.value,groups:{set value(y){Er(n,vg,y,"f")}}.value,output:{set value(y){Er(i,Ql,y,"f")}}.value,exitError:{set value(y){Er(o,av,y,"f")}}.value,hasOutput:{set value(y){Er(a,v0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){Er(l,VI,y,"f")}}.value,strictCommands:{set value(y){Er(c,$I,y,"f")}}.value,strictOptions:{set value(y){Er(u,zI,y,"f")}}.value,completionCommand:{set value(y){Er(d,x0,y,"f")}}.value,parseFn:{set value(y){Er(p,b0,y,"f")}}.value,parseContext:{set value(y){Er(m,HI,y,"f")}}.value}=h,fe(this,Qr,"f").configObjects=g,fe(this,Hn,"f").unfreeze(),fe(this,la,"f").unfreeze(),fe(this,_a,"f").unfreeze(),fe(this,zf,"f").unfreeze()}[U_e](e,r){return qI(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[q_e].bind(this),getContext:this[W_e].bind(this),getHasOutput:this[G_e].bind(this),getLoggerInstance:this[H_e].bind(this),getParseContext:this[j_e].bind(this),getParserConfiguration:this[YI].bind(this),getUsageConfiguration:this[M_e].bind(this),getUsageInstance:this[V_e].bind(this),getValidationInstance:this[$_e].bind(this),hasParseCallback:this[DO].bind(this),isGlobalContext:this[z_e].bind(this),postProcess:this[KI].bind(this),reset:this[Ene].bind(this),runValidation:this[Ine].bind(this),runYargsParserAndExecuteCommands:this[K8].bind(this),setHasOutput:this[K_e].bind(this)}}[q_e](){return fe(this,_a,"f")}[W_e](){return fe(this,Y8,"f")}[G_e](){return fe(this,v0,"f")}[H_e](){return fe(this,e5,"f")}[j_e](){return fe(this,HI,"f")||{}}[V_e](){return fe(this,Hn,"f")}[$_e](){return fe(this,la,"f")}[DO](){return!!fe(this,b0,"f")}[z_e](){return fe(this,SO,"f")}[KI](e,r,n,i){return n||As(e)||(r||(e=this[P_e](e)),(this[YI]()["parse-positional-numbers"]||this[YI]()["parse-positional-numbers"]===void 0)&&(e=this[O_e](e)),i&&(e=UI(e,this,fe(this,zf,"f").getMiddleware(),!1))),e}[Ene](e={}){Er(this,Qr,fe(this,Qr,"f")||{},"f");let r={};r.local=fe(this,Qr,"f").local||[],r.configObjects=fe(this,Qr,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(l=>{n[l]=!0})}),Object.assign(fe(this,jI,"f"),Object.keys(fe(this,vg,"f")).reduce((a,l)=>{let c=fe(this,vg,"f")[l].filter(u=>!(u in n));return c.length>0&&(a[l]=c),a},{})),Er(this,vg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(fe(this,Qr,"f")[a]||[]).filter(l=>!n[l])}),o.forEach(a=>{r[a]=ov(fe(this,Qr,"f")[a],l=>!n[l])}),r.envPrefix=fe(this,Qr,"f").envPrefix,Er(this,Qr,r,"f"),Er(this,Hn,fe(this,Hn,"f")?fe(this,Hn,"f").reset(n):I_e(this,fe(this,Nn,"f")),"f"),Er(this,la,fe(this,la,"f")?fe(this,la,"f").reset(n):k_e(this,fe(this,Hn,"f"),fe(this,Nn,"f")),"f"),Er(this,_a,fe(this,_a,"f")?fe(this,_a,"f").reset():v_e(fe(this,Hn,"f"),fe(this,la,"f"),fe(this,zf,"f"),fe(this,Nn,"f")),"f"),fe(this,Vf,"f")||Er(this,Vf,__e(this,fe(this,Hn,"f"),fe(this,_a,"f"),fe(this,Nn,"f")),"f"),fe(this,zf,"f").reset(),Er(this,x0,null,"f"),Er(this,Ql,"","f"),Er(this,av,null,"f"),Er(this,v0,!1,"f"),this.parsed=!1,this}[Y_e](e,r){return fe(this,Nn,"f").path.relative(e,r)}[K8](e,r,n,i=0,o=!1){let a=!!n||o;e=e||fe(this,lv,"f"),fe(this,Qr,"f").__=fe(this,Nn,"f").y18n.__,fe(this,Qr,"f").configuration=this[YI]();let l=!!fe(this,Qr,"f").configuration["populate--"],c=Object.assign({},fe(this,Qr,"f").configuration,{"populate--":!0}),u=fe(this,Nn,"f").Parser.detailed(e,Object.assign({},fe(this,Qr,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,fe(this,HI,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===fe(this,Yf,"f")&&d[y]?h=!0:y===fe(this,bg,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&fe(this,Hn,"f").clearCachedHelpMessage();try{if(this[gne](),r)return this[KI](d,l,!!n,!1);fe(this,Yf,"f")&&[fe(this,Yf,"f")].concat(m[fe(this,Yf,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),Er(this,SO,!1,"f");let y=fe(this,_a,"f").getCommands(),v=fe(this,Vf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==fe(this,x0,"f")){let B=fe(this,_a,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[KI](B,l,!!n,!1)}else if(!E&&k!==fe(this,x0,"f")){E=k;break}!fe(this,_a,"f").hasDefaultCommand()&&fe(this,BO,"f")&&E&&!b&&fe(this,la,"f").recommendCommands(E,y)}fe(this,x0,"f")&&d._.includes(fe(this,x0,"f"))&&!v&&(fe(this,$f,"f")&&sv(!0),this.showCompletionScript(),this.exit(0))}if(fe(this,_a,"f").hasDefaultCommand()&&!b){let E=fe(this,_a,"f").runCommand(null,this,u,0,o,h||g||o);return this[KI](E,l,!!n,!1)}if(v){fe(this,$f,"f")&&sv(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${fe(this,Vf,"f").completionKey}`)+1);return fe(this,Vf,"f").getCompletion(E,(_,k)=>{if(_)throw new gs(_.message);(k||[]).forEach(B=>{fe(this,e5,"f").log(B)}),this.exit(0)}),this[KI](d,!l,!!n,!1)}if(fe(this,v0,"f")||(h?(fe(this,$f,"f")&&sv(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(fe(this,$f,"f")&&sv(!0),a=!0,fe(this,Hn,"f").showVersion("log"),this.exit(0))),!a&&fe(this,Qr,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>fe(this,Qr,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new gs(u.error.message);if(!v){let E=this[Ine](m,{},u.error);n||(p=UI(d,this,fe(this,zf,"f").getMiddleware(),!0)),p=this[U_e](E,p??d),As(p)&&!n&&(p=p.then(()=>UI(d,this,fe(this,zf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof gs)fe(this,Hn,"f").fail(y.message,y);else throw y}return this[KI](p??d,l,!!n,!0)}[Ine](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new gs(n.message);fe(this,la,"f").nonOptionCount(a),fe(this,la,"f").requiredArguments(a,o);let l=!1;fe(this,$I,"f")&&(l=fe(this,la,"f").unknownCommands(a)),fe(this,VI,"f")&&!l?fe(this,la,"f").unknownArguments(a,e,r,!!i):fe(this,zI,"f")&&fe(this,la,"f").unknownArguments(a,e,{},!1,!1),fe(this,la,"f").limitedChoices(a),fe(this,la,"f").implications(a),fe(this,la,"f").conflicting(a)}}[K_e](){Er(this,v0,!0,"f")}[JI](e){if(typeof e=="string")fe(this,Qr,"f").key[e]=!0;else for(let r of e)fe(this,Qr,"f").key[r]=!0}};function b_e(t){return!!t&&typeof t.getInternalMethods=="function"}s(b_e,"isYargsInstance");var Mpt=J_e(g_e),X_e=Mpt;f();f();f();var Z_e={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function eSe(t,e,r){let n=rn.createAndMarkAsIssued({authSource:e,authType:r});return Bt(t,Z_e.NewGitHubLogin,n)}s(eSe,"telemetryNewGitHubLogin");function tSe(t,e){let r=rn.createAndMarkAsIssued({authType:e});return Bt(t,Z_e.GitHubLoginSuccess,r)}s(tSe,"telemetryGitHubLoginSuccess");var wne=class extends ls{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function Qpt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...t0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(Tn).fetch(o,n)}catch(a){throw a instanceof Error&&xB(a)?new ls(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new ls(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(Qpt,"requestDeviceFlowStage1");async function Opt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...t0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(Tn).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new wne(a):new ls(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(Opt,"requestDeviceFlowStage2");async function Upt(t,e){tSe(t,"deviceFlow");let n=await(await Df(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new ls(`Error retrieving user information: ${String(n.errors)}`);return n}s(Upt,"requestUserInfo");var XI=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(Iu).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){eSe(e,"unknown","deviceFlow");let i=await Qpt(e,r,n),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await Opt(e,i.device_code,r,n);if(a-=c,l=u.access_token,l){let d=await Upt(e,{...n,accessToken:l});return{...n,githubAppId:r,login:d.login,accessToken:l}}c=u.interval??c}throw new ls("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var E0=class{static{s(this,"CitationManager")}},NO=class extends E0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var qpt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},Go=class{constructor(){this.capabilities={...qpt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};f();f();f();f();function L1(t,e){let r=I0(t,e);return r===-1?void 0:t[r]}s(L1,"findLastMonotonous");function I0(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(I0,"findLastIdxMonotonous");function rSe(t,e){let r=ZI(t,e);return r===t.length?void 0:t[r]}s(rSe,"findFirstMonotonous");function ZI(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(ZI,"findFirstIdxMonotonousOrArrLen");var J8=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=I0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var _ne=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?LO.isErrorNoTelemetry(e)?new LO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},nSe=new _ne;function e2(t){nSe.onUnexpectedError(t)}s(e2,"onBugIndicatingError");function n5(t){Wpt(t)||nSe.onUnexpectedError(t)}s(n5,"onUnexpectedError");var Sne="Canceled";function Wpt(t){return t instanceof Eg?!0:t instanceof Error&&t.name===Sne&&t.message===Sne}s(Wpt,"isCancellationError");var Eg=class extends Error{static{s(this,"CancellationError")}constructor(){super(Sne),this.name=this.message}};function X8(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(X8,"illegalArgument");function iSe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(iSe,"illegalState");var LO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},An=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function t2(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(t2,"equals");function*i5(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(i5,"groupAdjacentBy");function sSe(t,e){for(let r=0;r<=t.length;r++)e(r===0?void 0:t[r-1],r===t.length?void 0:t[r])}s(sSe,"forEachAdjacent");function aSe(t,e){for(let r=0;r<t.length;r++)e(r===0?void 0:t[r-1],t[r],r+1===t.length?void 0:t[r+1])}s(aSe,"forEachWithNeighbors");function lSe(t){return t.filter(e=>!!e)}s(lSe,"coalesce");function cSe(t,e){for(let r of e)t.push(r)}s(cSe,"pushMany");var uSe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(c){return c>0}l.isGreaterThan=r,s(r,"isGreaterThan");function n(c){return c===0}l.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(uSe||={});function T0(t,e){return(r,n)=>e(t(r),t(n))}s(T0,"compareBy");var w0=s((t,e)=>t-e,"numberComparator");function dSe(t){return(e,r)=>-t(e,r)}s(dSe,"reverseOrder");var FO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},oSe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||uSe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};f();function hSe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(hSe,"groupBy");var pSe,mSe,fSe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[pSe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(mSe=Symbol.iterator,pSe=Symbol.toStringTag,mSe)](){return this.values()}};f();function Rne(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(Rne,"createSingleCallFunction");f();var kne;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(k){yield k}_.single=n,s(n,"single");function i(k){return t(k)?k:n(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let B=k.length-1;B>=0;B--)yield k[B]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,B){let N=0;for(let W of k)if(B(W,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,B){for(let N of k)if(B(N))return N}_.find=d,s(d,"find");function*p(k,B){for(let N of k)B(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,B){let N=0;for(let W of k)yield B(W,N++)}_.map=m,s(m,"map");function*h(k,B){let N=0;for(let W of k)yield*B(W,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let B of k)yield*B}_.concat=g,s(g,"concat");function y(k,B,N){let W=N;for(let ee of k)W=B(W,ee);return W}_.reduce=y,s(y,"reduce");function*v(k,B,N=k.length){for(B<-k.length&&(B=0),B<0&&(B+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);B<N;B++)yield k[B]}_.slice=v,s(v,"slice");function b(k,B=Number.POSITIVE_INFINITY){let N=[];if(B===0)return[N,k];let W=k[Symbol.iterator]();for(let ee=0;ee<B;ee++){let me=W.next();if(me.done)return[N,_.empty()];N.push(me.value)}return[N,{[Symbol.iterator](){return W}}]}_.consume=b,s(b,"consume");async function E(k){let B=[];for await(let N of k)B.push(N);return Promise.resolve(B)}_.asyncToArray=E,s(E,"asyncToArray")})(kne||={});f();var Bne=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function Hpt(t){return Array.isArray(t)}s(Hpt,"isEntries");var ASe,MO=class t{constructor(e,r){this[ASe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(Hpt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Bne(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(ASe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},ySe,gSe=class{constructor(e,r){this[ySe]="ResourceSet";!e||typeof e=="function"?this._map=new MO(e):(this._map=new MO(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(ySe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var CSe,Pne=class{constructor(){this[CSe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(CSe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Dne=class extends Pne{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},QO=class extends Dne{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var o5=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var jpt=!1,s5=null;var xSe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&d.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new o5;for(let c of n){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}n.sort(T0(c=>c.idx,w0));let a="",l=0;for(let c of n.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=hSe([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${n.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function Vpt(t){s5=t}s(Vpt,"setDisposableTracker");if(jpt){let t="__is_disposable_tracked__";Vpt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ho.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ho.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function a5(t){return s5?.trackDisposable(t),t}s(a5,"trackDisposable");function l5(t){s5?.markAsDisposed(t)}s(l5,"markAsDisposed");function Nne(t,e){s5?.setParent(t,e)}s(Nne,"setParentOfDisposable");function $pt(t,e){if(s5)for(let r of t)s5.setParent(r,e)}s($pt,"setParentOfDisposables");function vSe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(vSe,"isDisposable");function OO(t){if(kne.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(OO,"dispose");function bSe(...t){let e=Sa(()=>OO(t));return $pt(t,e),e}s(bSe,"combinedDisposable");function Sa(t){let e=a5({dispose:Rne(()=>{l5(e),t()})});return e}s(Sa,"toDisposable");var Bu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;a5(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(l5(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{OO(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Nne(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Nne(e,null))}},Ho=class{constructor(){this._store=new Bu;a5(this),Nne(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){l5(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Kf=class extends Ho{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",l=parseFloat(n.get("rem")||"0.0"),c=n.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var ESe=je(require("events"));var UO="CompletionRequested",Ig=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new ESe.default;notifyRequest(e,r,n,i,o){return this.#e.emit(UO,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=Eu(this.ctx,e,`event.${UO}`);return this.#e.on(UO,r),_n.Disposable.create(()=>this.#e.off(UO,r))}};f();var Lne=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},c5=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Lne(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();var qO=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=wSe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=ISe(n.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=n.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=ISe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&TSe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},uv;(function(t){function e(i,o,a,l){return new qO(i,o,a,l)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof qO)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),l=Fne(o.map(zpt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(uv||(uv={}));function Fne(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);Fne(n,e),Fne(i,e);let o=0,a=0,l=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[l++]=n[o++]:t[l++]=i[a++];for(;o<n.length;)t[l++]=n[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(Fne,"mergeSort");function ISe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);TSe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(ISe,"computeLineOffsets");function TSe(t){return t===13||t===10}s(TSe,"isEOL");function wSe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(wSe,"getWellformedRange");function zpt(t){let e=wSe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(zpt,"getWellformedEdit");f();var _Se;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(_Se||(_Se={}));var Mne;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(Mne||(Mne={}));var SSe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(SSe||(SSe={}));var WO;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(WO||(WO={}));var Yc;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=WO.MAX_VALUE),i===Number.MAX_VALUE&&(i=WO.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.uinteger(i.line)&&Ve.uinteger(i.character)}s(r,"is"),t.is=r})(Yc||(Yc={}));var es;(function(t){function e(n,i,o,a){if(Ve.uinteger(n)&&Ve.uinteger(i)&&Ve.uinteger(o)&&Ve.uinteger(a))return{start:Yc.create(n,i),end:Yc.create(o,a)};if(Yc.is(n)&&Yc.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Yc.is(i.start)&&Yc.is(i.end)}s(r,"is"),t.is=r})(es||(es={}));var GO;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.range)&&(Ve.string(i.uri)||Ve.undefined(i.uri))}s(r,"is"),t.is=r})(GO||(GO={}));var RSe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.targetRange)&&Ve.string(i.targetUri)&&es.is(i.targetSelectionRange)&&(es.is(i.originSelectionRange)||Ve.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(RSe||(RSe={}));var Qne;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.numberRange(i.red,0,1)&&Ve.numberRange(i.green,0,1)&&Ve.numberRange(i.blue,0,1)&&Ve.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(Qne||(Qne={}));var kSe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.range)&&Qne.is(i.color)}s(r,"is"),t.is=r})(kSe||(kSe={}));var BSe;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.undefined(i.textEdit)||d5.is(i))&&(Ve.undefined(i.additionalTextEdits)||Ve.typedArray(i.additionalTextEdits,d5.is))}s(r,"is"),t.is=r})(BSe||(BSe={}));var PSe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(PSe||(PSe={}));var DSe;(function(t){function e(n,i,o,a,l,c){let u={startLine:n,endLine:i};return Ve.defined(o)&&(u.startCharacter=o),Ve.defined(a)&&(u.endCharacter=a),Ve.defined(l)&&(u.kind=l),Ve.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.uinteger(i.startLine)&&Ve.uinteger(i.startLine)&&(Ve.undefined(i.startCharacter)||Ve.uinteger(i.startCharacter))&&(Ve.undefined(i.endCharacter)||Ve.uinteger(i.endCharacter))&&(Ve.undefined(i.kind)||Ve.string(i.kind))}s(r,"is"),t.is=r})(DSe||(DSe={}));var One;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&GO.is(i.location)&&Ve.string(i.message)}s(r,"is"),t.is=r})(One||(One={}));var NSe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(NSe||(NSe={}));var LSe;(function(t){t.Unnecessary=1,t.Deprecated=2})(LSe||(LSe={}));var FSe;(function(t){function e(r){let n=r;return Ve.objectLiteral(n)&&Ve.string(n.href)}s(e,"is"),t.is=e})(FSe||(FSe={}));var HO;(function(t){function e(n,i,o,a,l,c){let u={range:n,message:i};return Ve.defined(o)&&(u.severity=o),Ve.defined(a)&&(u.code=a),Ve.defined(l)&&(u.source=l),Ve.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Ve.defined(o)&&es.is(o.range)&&Ve.string(o.message)&&(Ve.number(o.severity)||Ve.undefined(o.severity))&&(Ve.integer(o.code)||Ve.string(o.code)||Ve.undefined(o.code))&&(Ve.undefined(o.codeDescription)||Ve.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Ve.string(o.source)||Ve.undefined(o.source))&&(Ve.undefined(o.relatedInformation)||Ve.typedArray(o.relatedInformation,One.is))}s(r,"is"),t.is=r})(HO||(HO={}));var u5;(function(t){function e(n,i,...o){let a={title:n,command:i};return Ve.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.title)&&Ve.string(i.command)}s(r,"is"),t.is=r})(u5||(u5={}));var d5;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Ve.objectLiteral(a)&&Ve.string(a.newText)&&es.is(a.range)}s(i,"is"),t.is=i})(d5||(d5={}));var Une;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ve.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(Une||(Une={}));var f5;(function(t){function e(r){let n=r;return Ve.string(n)}s(e,"is"),t.is=e})(f5||(f5={}));var MSe;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function r(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return d5.is(a)&&(Une.is(a.annotationId)||f5.is(a.annotationId))}s(i,"is"),t.is=i})(MSe||(MSe={}));var qne;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Vne.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(qne||(qne={}));var Wne;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||f5.is(i.annotationId))}s(r,"is"),t.is=r})(Wne||(Wne={}));var Gne;(function(t){function e(n,i,o,a){let l={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Ve.string(i.oldUri)&&Ve.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||f5.is(i.annotationId))}s(r,"is"),t.is=r})(Gne||(Gne={}));var Hne;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ve.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ve.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||f5.is(i.annotationId))}s(r,"is"),t.is=r})(Hne||(Hne={}));var jne;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Ve.string(i.kind)?Wne.is(i)||Gne.is(i)||Hne.is(i):qne.is(i)))}s(e,"is"),t.is=e})(jne||(jne={}));var QSe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)}s(r,"is"),t.is=r})(QSe||(QSe={}));var OSe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.integer(i.version)}s(r,"is"),t.is=r})(OSe||(OSe={}));var Vne;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)&&(i.version===null||Ve.integer(i.version))}s(r,"is"),t.is=r})(Vne||(Vne={}));var USe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.string(i.languageId)&&Ve.integer(i.version)&&Ve.string(i.text)}s(r,"is"),t.is=r})(USe||(USe={}));var $ne;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})($ne||($ne={}));var Z8;(function(t){function e(r){let n=r;return Ve.objectLiteral(r)&&$ne.is(n.kind)&&Ve.string(n.value)}s(e,"is"),t.is=e})(Z8||(Z8={}));var qSe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(qSe||(qSe={}));var WSe;(function(t){t.PlainText=1,t.Snippet=2})(WSe||(WSe={}));var GSe;(function(t){t.Deprecated=1})(GSe||(GSe={}));var HSe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Ve.string(i.newText)&&es.is(i.insert)&&es.is(i.replace)}s(r,"is"),t.is=r})(HSe||(HSe={}));var jSe;(function(t){t.asIs=1,t.adjustIndentation=2})(jSe||(jSe={}));var VSe;(function(t){function e(r){let n=r;return n&&(Ve.string(n.detail)||n.detail===void 0)&&(Ve.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(VSe||(VSe={}));var $Se;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})($Se||($Se={}));var zSe;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(zSe||(zSe={}));var jO;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Ve.string(i)||Ve.objectLiteral(i)&&Ve.string(i.language)&&Ve.string(i.value)}s(r,"is"),t.is=r})(jO||(jO={}));var YSe;(function(t){function e(r){let n=r;return!!n&&Ve.objectLiteral(n)&&(Z8.is(n.contents)||jO.is(n.contents)||Ve.typedArray(n.contents,jO.is))&&(r.range===void 0||es.is(r.range))}s(e,"is"),t.is=e})(YSe||(YSe={}));var KSe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(KSe||(KSe={}));var JSe;(function(t){function e(r,n,...i){let o={label:r};return Ve.defined(n)&&(o.documentation=n),Ve.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(JSe||(JSe={}));var XSe;(function(t){t.Text=1,t.Read=2,t.Write=3})(XSe||(XSe={}));var ZSe;(function(t){function e(r,n){let i={range:r};return Ve.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(ZSe||(ZSe={}));var e5e;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(e5e||(e5e={}));var t5e;(function(t){t.Deprecated=1})(t5e||(t5e={}));var r5e;(function(t){function e(r,n,i,o,a){let l={name:r,kind:n,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(r5e||(r5e={}));var n5e;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(n5e||(n5e={}));var i5e;(function(t){function e(n,i,o,a,l,c){let u={name:n,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Ve.string(i.name)&&Ve.number(i.kind)&&es.is(i.range)&&es.is(i.selectionRange)&&(i.detail===void 0||Ve.string(i.detail))&&(i.deprecated===void 0||Ve.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(i5e||(i5e={}));var o5e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(o5e||(o5e={}));var VO;(function(t){t.Invoked=1,t.Automatic=2})(VO||(VO={}));var s5e;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.typedArray(i.diagnostics,HO.is)&&(i.only===void 0||Ve.typedArray(i.only,Ve.string))&&(i.triggerKind===void 0||i.triggerKind===VO.Invoked||i.triggerKind===VO.Automatic)}s(r,"is"),t.is=r})(s5e||(s5e={}));var a5e;(function(t){function e(n,i,o){let a={title:n},l=!0;return typeof i=="string"?(l=!1,a.kind=i):u5.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Ve.string(i.title)&&(i.diagnostics===void 0||Ve.typedArray(i.diagnostics,HO.is))&&(i.kind===void 0||Ve.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||u5.is(i.command))&&(i.isPreferred===void 0||Ve.boolean(i.isPreferred))&&(i.edit===void 0||jne.is(i.edit))}s(r,"is"),t.is=r})(a5e||(a5e={}));var l5e;(function(t){function e(n,i){let o={range:n};return Ve.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.command)||u5.is(i.command))}s(r,"is"),t.is=r})(l5e||(l5e={}));var c5e;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.uinteger(i.tabSize)&&Ve.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(c5e||(c5e={}));var u5e;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.target)||Ve.string(i.target))}s(r,"is"),t.is=r})(u5e||(u5e={}));var d5e;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(d5e||(d5e={}));var f5e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(f5e||(f5e={}));var p5e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(p5e||(p5e={}));var m5e;(function(t){function e(r){let n=r;return Ve.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(m5e||(m5e={}));var h5e;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&Ve.string(i.text)}s(r,"is"),t.is=r})(h5e||(h5e={}));var g5e;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&Ve.boolean(i.caseSensitiveLookup)&&(Ve.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(g5e||(g5e={}));var A5e;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&(Ve.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(A5e||(A5e={}));var y5e;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&es.is(n.stoppedLocation)}s(r,"is"),t.is=r})(y5e||(y5e={}));var zne;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(zne||(zne={}));var Yne;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&(i.tooltip===void 0||Ve.string(i.tooltip)||Z8.is(i.tooltip))&&(i.location===void 0||GO.is(i.location))&&(i.command===void 0||u5.is(i.command))}s(r,"is"),t.is=r})(Yne||(Yne={}));var C5e;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Yc.is(i.position)&&(Ve.string(i.label)||Ve.typedArray(i.label,Yne.is))&&(i.kind===void 0||zne.is(i.kind))&&i.textEdits===void 0||Ve.typedArray(i.textEdits,d5.is)&&(i.tooltip===void 0||Ve.string(i.tooltip)||Z8.is(i.tooltip))&&(i.paddingLeft===void 0||Ve.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Ve.boolean(i.paddingRight))}s(r,"is"),t.is=r})(C5e||(C5e={}));var x5e;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(x5e||(x5e={}));var v5e;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(v5e||(v5e={}));var b5e;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(b5e||(b5e={}));var E5e;(function(t){t.Invoked=0,t.Automatic=1})(E5e||(E5e={}));var I5e;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(I5e||(I5e={}));var T5e;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(T5e||(T5e={}));var w5e;(function(t){function e(r){let n=r;return Ve.objectLiteral(n)&&Mne.is(n.uri)&&Ve.string(n.name)}s(e,"is"),t.is=e})(w5e||(w5e={}));var _5e;(function(t){function e(o,a,l,c){return new Kne(o,a,l,c)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Ve.defined(a)&&Ve.string(a.uri)&&(Ve.undefined(a.languageId)||Ve.string(a.languageId))&&Ve.uinteger(a.lineCount)&&Ve.func(a.getText)&&Ve.func(a.positionAt)&&Ve.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(_5e||(_5e={}));var Kne=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Yc.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Yc.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Ve;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Ve||(Ve={}));var jo=class{static{s(this,"LocationFactory")}static{this.range=es.create.bind(es)}static{this.position=Yc.create.bind(Yc)}},F1=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=uv.create(e.clientUri,e.clientLanguageId,n,e.getText());return uv.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=uv.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return uv.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=qS({uri:e,languageId:r})){return new t(mc(e),uv.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=es.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=es.create(Yc.create(r,0),Yc.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var eP={isBlocked:!1,reason:"VALID_FILE"},$O={isBlocked:!1,reason:"NO_MATCHING_POLICY"},S5e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},r2={all:"all",repo:"repo"},M1=new Tt("contentExclusion");f();f();var zO=class{static{s(this,"PolicyEvaluator")}};f();f();f();var R5e=new Tt("repository"),n2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},km=class{static{s(this,"GitConfigLoader")}},YO=class extends km{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};f();var k5e=require("os");var KO=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Wx.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Wx.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,k5e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var JO=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(km).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new KO(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var Ypt=100,Jne=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},Q1=class t{constructor(e){this.ctx=e;this.remoteResolver=new JO;this.cache=new nn(Ypt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=f0(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Jne(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(po),i=ko(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=ko(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=bI(r,o[1]),l=ko(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=ko(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=ko(a,"commondir");a=bI(a,(await e.readFileString(u)).trimEnd());let d=ko(a,"config");return await e.stat(d),d}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var B5e=s((t,e)=>{if($x.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...$x.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var ZO=new WeakMap;function eU(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&ZO.has(t))return ZO.get(t);switch(ZO.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=eU(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+eU(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+eU(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return ZO.set(t,n),n}s(eU,"t");function tU(t){return eU(t,0)}s(tU,"r");var Xne=new WeakMap;function P5e(t,e,r=tU(e)){let n,i,o=Xne.get(t);o||(Xne.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=n[d++];u.r(m));}s(p,"o"),Xne.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?n[d-1].r(u):n[d-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let l=o[0].push(r)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(P5e,"n");var D5e=new WeakMap;function Kpt(t,e,r,n=tU(r)){if(e||(e=D5e.get(t)),e||D5e.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=P5e(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(Kpt,"n");function N5e(t,e){return function(r,n){return Kpt(t,e,r,n)}}s(N5e,"o");f();var t4e=je($5e(),1);f();var rP=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var imt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},nP=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),omt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),z5e=s(t=>t.join(""),"rangesToString"),Y5e=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,c=!1,u=!1,d=r,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===r+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(imt))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-r,!0];o+=v.length,_?i.push(b):n.push(b),l=l||E;continue e}}if(c=!1,p){y>p?n.push(nP(p)+"-"+nP(y)):y===p&&n.push(nP(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(nP(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}n.push(nP(y)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let y=n[0].length===2?n[0].slice(-1):n[0];return[omt(y),!1,d-r,!1]}let m="["+(u?"^":"")+z5e(n)+"]",h="["+(u?"":"^")+z5e(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,l,d-r,!0]},"parseClass");f();var dv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var smt=new Set(["!","?","+","*","@"]),K5e=s(t=>smt.has(t),"isExtglobType"),amt="(?!(?:^|/)\\.\\.?(?:$|/))",rU="(?!\\.)",lmt=new Set(["[","."]),cmt=new Set(["..","."]),umt=new Set("().*{}+?[]^$\\!"),dmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),tie="[^/]",J5e=tie+"*?",X5e=tie+"+?",p5=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#l=this.#e===this?n:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,l=-1,c=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&K5e(y)&&e.charAt(h)==="("){r.push(g),g="";let v=new t(y,r);h=t.#u(e,v,h,i),r.push(v);continue}g+=y}return r.push(g),h}let u=n+1,d=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(K5e(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),d.push(m),m="",r.push(...p,d),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#l}toRegExpSource(e){let r=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&cmt.has(this.#n[0]))){let g=lmt,y=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!r&&!e&&g.has(u.charAt(0));d=y?amt:v?rU:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,dv(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#n=[c],this.type=null,this.#t=void 0,[c,dv(this.toString()),!1,!1]}let a=!n||e||r||!rU?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!r?rU:"")+X5e;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?rU:"")+J5e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,dv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(umt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=Y5e(e,l);if(p){o+=u,a=a||d,l+=p-1,r=r||m;continue}}if(c==="*"){n&&e==="*"?o+=X5e:o+=J5e,r=!0;continue}if(c==="?"){o+=tie,r=!0;continue}o+=dmt(c)}return[o,dv(e),!!r,a]}};f();var rie=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Ra=s((t,e,r={})=>(rP(e),!r.nocomment&&e.charAt(0)==="#"?!1:new m5(e,r).match(t)),"minimatch"),fmt=/^\*+([^+@!?\*\[\(]*)$/,pmt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),mmt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),hmt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),gmt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),Amt=/^\*+\.\*+$/,ymt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),Cmt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),xmt=/^\.\*+$/,vmt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),bmt=/^\*+$/,Emt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),Imt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),Tmt=/^\?+([^+@!?\*\[\(]*)?$/,wmt=s(([t,e=""])=>{let r=r4e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),_mt=s(([t,e=""])=>{let r=n4e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),Smt=s(([t,e=""])=>{let r=n4e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),Rmt=s(([t,e=""])=>{let r=r4e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),r4e=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),n4e=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),i4e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Z5e={win32:{sep:"\\"},posix:{sep:"/"}},kmt=i4e==="win32"?Z5e.win32.sep:Z5e.posix.sep;Ra.sep=kmt;var Xf=Symbol("globstar **");Ra.GLOBSTAR=Xf;var Bmt="[^/]",Pmt=Bmt+"*?",Dmt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Nmt="(?:(?!(?:\\/|^)\\.).)*?",Lmt=s((t,e={})=>r=>Ra(r,t,e),"filter");Ra.filter=Lmt;var Jf=s((t,e={})=>Object.assign({},t,e),"ext"),Fmt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ra;let e=Ra;return Object.assign(s((n,i,o={})=>e(n,i,Jf(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Jf(t,o))}static defaults(i){return e.defaults(Jf(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Jf(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Jf(t,o))}},unescape:s((n,i={})=>e.unescape(n,Jf(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Jf(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Jf(t,i)),"filter"),defaults:s(n=>e.defaults(Jf(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Jf(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Jf(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Jf(t,o)),"match"),sep:e.sep,GLOBSTAR:Xf})},"defaults");Ra.defaults=Fmt;var o4e=s((t,e={})=>(rP(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,t4e.default)(t)),"braceExpand");Ra.braceExpand=o4e;var Mmt=s((t,e={})=>new m5(t,e).makeRe(),"makeRe");Ra.makeRe=Mmt;var Qmt=s((t,e,r={})=>{let n=new m5(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");Ra.match=Qmt;var e4e=/[?*]|[+@!]\(.*?\)|\[|\]/,Omt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),m5=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){rP(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||i4e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!e4e.test(o[2]))&&!e4e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],c=n[i+2],u=n[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let c=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...c),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),E=!b&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[B,N]=[e[_],r[k]];B.toLowerCase()===N.toLowerCase()&&(r[k]=B,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,c=e.length,u=r.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],p=e[a];if(this.debug(r,d,p),d===!1)return!1;if(d===Xf){this.debug("GLOBSTAR",[r,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return n;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return o4e(this.pattern,this.options)}parse(e){rP(e);let r=this.options;if(e==="**")return Xf;if(e==="")return"";let n,i=null;(n=e.match(bmt))?i=r.dot?Imt:Emt:(n=e.match(fmt))?i=(r.nocase?r.dot?gmt:hmt:r.dot?mmt:pmt)(n[1]):(n=e.match(Tmt))?i=(r.nocase?r.dot?_mt:wmt:r.dot?Smt:Rmt)(n):(n=e.match(Amt))?i=r.dot?Cmt:ymt:(n=e.match(xmt))&&(i=vmt);let o=p5.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?Pmt:r.dot?Dmt:Nmt,i=new Set(r.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?Omt(d):d===Xf?Xf:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==Xf||h===Xf||(h===void 0?m!==void 0&&m!==Xf?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==Xf&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=Xf))}),u.filter(d=>d!==Xf).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(n.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Ra.defaults(e).Minimatch}};Ra.AST=p5;Ra.Minimatch=m5;Ra.escape=rie;Ra.unescape=dv;var nie="contentExclusion",nU=class extends zO{static{s(this,"CopilotContentExclusion")}#e;#t=new nn(1e4);#i=new nn(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=bI(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??r2.all);if(!i)return $O;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,r);if(l.isBlocked)return l}catch(n){return M1.exception(this.#e,n,`${nie}.evaluate`),S5e}return eP}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=eP,a,l=lte(e.replace(r,""));e:for(let c of n)for(let u of c.paths)if(Ra(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=iie(c,"FILE_BLOCKED_PATH"),a=u;break e}return M1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(l=>l.ifAnyMatch),o=r.filter(l=>l.ifNoneMatch);if(!n||i.length===0&&o.length===0)return eP;let a=this.evaluateFileContent(i,o,n);return M1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>s4e(a)).some(a=>a.test(n)))return iie(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>s4e(a)).some(a=>a.test(n)))return iie(i,"FILE_BLOCKED_TEXT_BASED");return eP}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ta(this.#e,e,`${nie}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=N5e(async e=>{let r=await this.#e.get(Gr).getGitHubSession();if(!r)throw new ls("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(r2.all);e.filter(u=>u!==r2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==r2.all).join(",")),i.searchParams.set("scope",o?r2.all:r2.repo);let l=await Df(this.#e,r,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new rg(l)}return this.#s("fetch.success"),B5e(Gmt,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(Q1).getRepo(f0(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Bt(this.#e,`${nie}.${e}`,rn.createAndMarkAsIssued(r,n))}};function s4e(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(s4e,"stringToRegex");function iie(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(iie,"fileBlockedEvaluationResult");var Umt=I.Object({name:I.String(),type:I.String()}),qmt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:Umt}),oie=I.Array(qmt),Wmt=I.Object({rules:oie,last_updated_at:I.String(),scope:I.String()}),Gmt=I.Array(Wmt);var Kc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new nU(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Dr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(Dr).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){let i=Wo(e)!==void 0;if(i||M1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,r),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){M1.error(this.ctx,"Error tracking telemetry",u)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(Ji).setInactive(r??"Copilot is disabled"):this.ctx.get(Ji).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===$O.reason)return M1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let l={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},c={elapsedMs:i};return Bt(this.ctx,e,rn.createAndMarkAsIssued(l,c)),Bt(this.ctx,e,rn.createAndMarkAsIssued({...l,path:r},c),1),M1.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function O1(t,e,r){let n=await t.get(Kc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(O1,"isDocumentValid");var Dr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await O1(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=mc(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return O1(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(po).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(po).readFileString(e)}getWorkspaceFolder(e){let r=mc(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(mc(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=mc(e.uri);for(let n of this.getWorkspaceFolders()){let i=mc(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Ii(r)}};function ys(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ys,"statusFromTextDocumentResult");var Ln=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Dr).getRelativePath(e)??Ii(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Dr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await O1(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:F1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(po).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(po).stat(e)).size/1024/1024}};f();f();var fv=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function i2(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(i2,"delay");f();var sie=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},iU=class extends sie{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var yd=class{constructor(e){this.ctx=e;this.#e=new Tt("AsyncCompletionManager");this.requests=new nn(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(aie(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new iU;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Rt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new fv,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(aie(r,n,d)){if(d.state===0){let p=r.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)aie(r,n,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function aie(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(aie,"isCandidate");f();f();var oP=class{constructor(e){this.maxSize=e;this.root=new iP;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new iP;n.removeChild(o),n.addChild(l,c),c.addChild(o.slice(l.length),a),n=c,i=i.slice(l.length);break}if(i.length>0){let o=new iP;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],l=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},iP=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Bm=class{constructor(){this.cache=new oP(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new oP(100)}};f();f();f();var Pm=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return jc.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=$J(n,jc.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{zJ(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var oU=class extends Pm{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,l=r.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function a4e(t,e){var l=[];try{let r=t.getText();let n=t.offsetAt(e);let i=$J(l,jc.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{zJ(l,u,d)}}s(a4e,"getBlockPositionType");f();f();var U1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function l4e(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let W;t[131]>1e-35?W=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?W=.07473600489975568:t[0]>93.50000000000001?W=-.021596848506011502:W=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?W=.10264284346448256:W=.031042487183181262:W=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?W=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?W=.006271403149804702:W=-.030013637555715046:t[0]>4449.500000000001?W=-.06556876058654929:W=.06437994816903034:t[32]>1e-35?W=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?W=-.09349726304052086:t[210]>1e-35?W=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?W=-.029188394315052574:W=.017219308333820193:W=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?W=-.04428555753857688:W=.0001456106867817353:t[5]>213.50000000000003?W=.01740292726636365:W=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?W=.03410288911259329:t[121]>1e-35?W=-.06056527462120627:t[8]>2592.5000000000005?W=.12166808844363577:t[191]>1e-35?W=.11669879218998758:W=-.001664858391716235:W=-.01262927450503166:W=-.04506589951879664:t[227]>1e-35?W=-.08548904959752329:W=.02156080776537726;let ee;t[306]>1e-35?t[149]>1e-35?ee=-.1389218965136736:ee=-.032218642644416894:t[13]>1e-35?ee=.006465035217331847:t[50]>1e-35?ee=-.1381687930130022:t[179]>1e-35?ee=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?ee=-.03262719498763048:ee=.023342916702125613:t[191]>1e-35?ee=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?ee=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?ee=-.09989343595668776:ee=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?ee=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?ee=-.09165257825246746:t[9]>32.50000000000001?ee=.02484870392366004:ee=-.008499493096971395:t[8]>24.500000000000004?ee=.02459679192828244:ee=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?ee=.0015644546318714849:ee=-.06579524865022705:ee=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?ee=.03331853632960164:ee=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?ee=-.019091477207111116:ee=.037878468575478504:t[94]>1e-35?ee=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?ee=.16919658785098224:t[243]>1e-35?ee=-.06580584936754524:ee=.01567555159935563:t[129]>1e-35?ee=.06721746994993226:t[10]>32.50000000000001?ee=-.046394462507797975:ee=-.006436180519584767;let me;t[131]>1e-35?me=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?me=.019122095523977856:t[298]>1e-35?me=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?me=-.026094309429557913:t[204]>1e-35?me=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?me=.012643810980689466:me=-.07884161741497837:me=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?me=.04493082949897325:me=.18046359750455776:t[7]>18.500000000000004?me=-.018667348656891496:me=.02584325784698236:me=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?me=.04749240016989375:me=-.0333334578246718:t[5]>3276.5000000000005?me=.11330554740098908:t[7]>94.50000000000001?me=.1296600395033268:me=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?me=-.13787130789142835:t[0]>1847.5000000000002?me=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?me=.028856848462727104:me=-.11197632885851168:me=.08169801342016791:t[1]>22.500000000000004?me=-.021052888644970163:me=.019048604298876753:t[7]>4.500000000000001?me=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?me=.03432638833359197:me=-.0036767863082454973:t[1]>48.50000000000001?me=.03087375270128195:t[2]>3.5000000000000004?me=-.04219917149740248:me=.018818493993207935;let ae;t[306]>1e-35?ae=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?ae=-.09091897542577475:ae=.04042943082645558:t[218]>1e-35?ae=.056254985867151:ae=-.053848117950183044:ae=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?ae=.021581808008986944:ae=-.05639286496176611:ae=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?ae=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?ae=.023885302967553288:ae=.1617794086125622:t[212]>1e-35?ae=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?ae=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?ae=.01894935813286188:ae=-.06449356357429188:ae=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?ae=-.034718828212885515:ae=.0898976288814321:t[1]>17.500000000000004?ae=-.15440137451988326:ae=-.03864183216821465:ae=.009988507307006308:ae=-.08540311947043305:t[50]>1e-35?ae=-.13323659732101975:t[134]>1e-35?ae=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?ae=.08082476177379844:ae=-.041665761903645876:t[179]>1e-35?ae=-.12405023987936657:t[39]>1e-35?ae=-.06247416524997478:t[138]>1e-35?ae=-.10724031753676487:ae=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let U;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?U=-.03461119351456781:U=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?U=-.12404435523286539:U=-.0034376913880382956:U=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?U=.0037507103585310234:U=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?U=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?U=-.04832024079663151:t[37]>1e-35?U=-.037103393468366934:U=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?U=.032539071163832034:t[5]>1643.5000000000002?U=.036408625378035665:t[0]>1500.5000000000002?U=-.1346358322854993:U=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?U=-.1133991164577881:t[9]>52.50000000000001?U=-.024478640359723122:U=.03673777861098756:U=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?U=.002583438691776944:U=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?U=-.02141222346712401:U=.06392462314316179:t[4]>12.500000000000002?U=.08700122294434816:t[8]>267.50000000000006?U=.056923170082743224:U=-.07716309825583327:t[32]>1e-35?U=-.03961343943752142:U=.002674914122888783:t[1]>42.50000000000001?U=-.05217539654421676:t[145]>1e-35?U=.09553630282946368:U=-.009424791262477729;let le;t[183]>1e-35?le=-.05753337139158443:t[308]>1e-35?le=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?le=-.10477869875380448:le=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?le=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?le=-.04442302951713574:le=.00012409888451734224:le=-.092199119633697:t[225]>1e-35?le=.13773072450201831:t[0]>2882.5000000000005?le=.0028540012229920533:t[298]>1e-35?le=.07134486044361629:le=.014297412329837425:t[145]>1e-35?le=.05608385321902638:t[92]>1e-35?le=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?le=-.0039957800609801315:le=.0776927564241081:t[203]>1e-35?le=-.05502900859432093:t[105]>1e-35?le=.06062892720841595:le=-.009574839629252128:t[31]>1e-35?le=.009488858841144216:t[23]>1e-35?t[20]>1e-35?le=.08818126313644752:t[8]>161.50000000000003?le=.014353968957885408:le=-.022240738532827903:t[210]>1e-35?le=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?le=-.043902062079383485:le=-.014741559220396223:le=-.00934935734853194:t[6]>32.50000000000001?le=.1514593126307404:le=.010771222510801532:t[10]>22.500000000000004?le=.01412495209334078:le=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let V;t[294]>1e-35?V=-.042529778074638265:t[266]>1e-35?V=-.1180276669679798:t[134]>1e-35?V=-.026818144353279623:t[183]>1e-35?V=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?V=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?V=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?V=-.03049646619610203:t[1]>50.50000000000001?V=.20634590755061122:V=.06956378103625731:t[0]>3770.5000000000005?V=-.07946414366134913:t[19]>1e-35?V=.17083312065604694:t[2]>21.500000000000004?V=-.02327981978127724:V=.129717297518715:t[145]>1e-35?V=.006891245076133524:V=-.0789123467863741:t[3]>99.50000000000001?V=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?V=.06447639919732716:V=-.05457561977645972:t[306]>1e-35?V=-.029995903305383882:t[191]>1e-35?V=.030596508110850414:t[242]>1e-35?V=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?V=.09518584795377832:V=-.018197744600833596:t[13]>1e-35?V=.006751790086127549:t[148]>1e-35?V=.01904174573618417:t[99]>1e-35?V=.025287735102561926:t[4]>14.500000000000002?V=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?V=-.09467943982430241:t[243]>1e-35?V=-.02521824751996268:V=.005437570718352172:V=-.022476214821960674;let O;t[0]>384.50000000000006?t[84]>1e-35?O=-.06088131453064195:t[147]>1e-35?O=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?O=.04219361472548491:O=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?O=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?O=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?O=-.11431764534511478:O=.013549717238356157:O=-.020987333767091276:t[6]>2.5000000000000004?O=-.02914877855133127:O=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?O=-.10087072787978416:t[37]>1e-35?O=-.030467397753331196:t[229]>1e-35?O=-.1017559811057469:t[4]>20.500000000000004?O=-.00413177742240167:t[20]>1e-35?O=.05213315982685969:O=.0037921635866823133:t[8]>51.50000000000001?O=.07327913092421544:t[6]>49.50000000000001?O=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?O=.02744420891894289:O=.11288946357194463:O=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?O=-.012329314369909049:O=.026816658655600168:O=-.0872405354618811:O=.007872673500247845:t[1]>42.50000000000001?O=-.04309044198258254:t[145]>1e-35?O=.07572529147860785:t[7]>5.500000000000001?O=-.013837187093264945:t[1]>17.500000000000004?O=.04208698439539668:O=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let te;t[8]>2915.5000000000005?t[297]>1e-35?te=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?te=-.01034964686484714:te=-.07357437440667927:te=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?te=-.09476398869062203:t[9]>72.50000000000001?te=-.0757383854264379:te=.02806542779508718:te=-.05147742568418084:te=.10212721564444344:te=.0518263760642861:te=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?te=-.10669213185972036:te=.027050434286384796:t[302]>1e-35?te=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?te=.06354599160071946:t[1]>67.50000000000001?te=.05317447949011187:te=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?te=-.09369289448773599:t[0]>2215.5000000000005?te=.04077965380363924:t[0]>807.5000000000001?te=-.0591771776458298:te=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?te=-.016323380219241672:te=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?te=.03720704290087811:te=-.008730548158766654:t[4]>80.50000000000001?te=-.05346644687473197:te=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?te=.019984510398089086:te=-.03917825025861855:t[9]>170.50000000000003?te=-.09759719821334525:te=-.0023586682752856298;let pe;t[183]>1e-35?t[17]>1e-35?pe=.030100940443356424:t[10]>1.5000000000000002?pe=-.10861112216742408:pe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?pe=-.032062878390325456:pe=-.10808232631806887:t[8]>1641.5000000000002?pe=-.06147013392655731:t[4]>12.500000000000002?pe=.03324767551088266:t[145]>1e-35?pe=.028851633810612017:pe=-.054871239091792784:t[134]>1e-35?pe=-.023813968121342108:t[266]>1e-35?pe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?pe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?pe=-.025350325484720576:pe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?pe=.056817276537534815:pe=-.07674158463557636:pe=-.06335553143454145:t[1]>56.50000000000001?pe=.16390494217299284:pe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?pe=.041717597065890205:pe=-.10357913492269129:t[10]>29.500000000000004?pe=.1365512866715726:pe=.020600048310575665:pe=.09708785634773187:pe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?pe=-.03146213719547347:pe=.11784024316238083:pe=-.050940520532045355:pe=-.047988344143075616:t[191]>1e-35?pe=.028764654731460032:pe=.0011911575567860023;let re;t[294]>1e-35?t[10]>50.50000000000001?re=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?re=-.05103908560370243:re=.05002066201169583:re=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?re=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?re=.127983140816313:re=-.05436534163636867:re=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?re=-.009504203657088933:t[8]>819.5000000000001?re=.18689664822602375:re=.03635576744011826:re=-.029862411809998525:t[223]>1e-35?re=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?re=-.09405026597863717:t[0]>4153.500000000001?re=.053577663326799765:re=-.05062127873995668:re=.06512222894425874:t[39]>1e-35?re=-.04985311717827547:t[51]>1e-35?re=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?re=-.02860634573675884:re=.08863753005590103:re=.11158892111063744:t[0]>655.5000000000001?re=-.031005736641654926:re=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?re=-.00843386136334982:re=-.05273594615999777:re=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?re=-.015774115523598486:re=.10147367091236065:re=-.048307000563071016:re=.002118376117677254;let ue;t[8]>1014.5000000000001?t[9]>137.50000000000003?ue=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?ue=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?ue=.07211107542565391:ue=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?ue=-.0751486415451188:t[1]>59.50000000000001?ue=.13459005084554104:ue=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?ue=.06715575425741895:ue=-.005895690393702183:t[8]>2915.5000000000005?ue=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?ue=-.00029068886245881074:ue=.0613467393188786:t[148]>1e-35?ue=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?ue=.003887223773199377:ue=-.08553893131979015:ue=.025654192706396767:ue=-.05651733979610658:ue=-.02039913645229667:t[2]>7.500000000000001?ue=-.1058450646728524:ue=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?ue=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?ue=.1283258201586378:ue=-.01718135372229775:ue=-.07702452408491414:t[125]>1e-35?ue=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?ue=.04273051857848212:ue=-.04533122948101463:t[2]>196.50000000000003?ue=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?ue=.0231032972703664:ue=-.04807386814498683:ue=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Ne;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Ne=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Ne=-.017696526862422682:Ne=.1450050954613223:Ne=-.05406930069823832:Ne=-.08308700260259043:t[120]>1e-35?Ne=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Ne=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Ne=.038431826961746934:Ne=-.05937462906539856:t[9]>65.50000000000001?Ne=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Ne=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Ne=-.09579030954062734:Ne=.025064711572811746:Ne=.02579440518821548:Ne=.1044440128091862:Ne=-.058348633139536844:Ne=.07766788227934436:Ne=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Ne=.07463684068207214:Ne=.18244269035484484:t[6]>39.50000000000001?Ne=-.06050050067471004:Ne=.05787759066913493:Ne=.010783225857972171:Ne=.1674891243602606:t[4]>9.500000000000002?Ne=-.004814132027475892:Ne=-.14543299413454813:Ne=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Ne=-.07634466313617769:Ne=.0287825335169114:Ne=-.06894721943300268:Ne=-.00023988459059521937;let Se;t[131]>1e-35?t[1]>93.50000000000001?Se=-.05706887458825395:t[2]>1.5000000000000002?Se=.011446637886629108:Se=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Se=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Se=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Se=.026278724448495064:Se=.17053138400480508:t[0]>4463.500000000001?Se=-.06482289890096041:Se=.03026516489536295:Se=-.031785170717683144:Se=.1312690622980455:t[13]>1e-35?Se=.14336922540461444:Se=.03523850945454039:Se=-.015407465968975714:t[39]>1e-35?Se=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Se=-.0659975068798723:Se=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Se=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Se=.057409156184759516:Se=.2024322059866388:Se=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Se=.010648654146284154:t[308]>1e-35?Se=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Se=.12364025998551711:Se=-.02247495081065243:t[1]>22.500000000000004?Se=-.0726295464624251:Se=.03481895086048152:t[0]>4331.500000000001?Se=-.04775443357020673:Se=.07172377425057568:t[2]>89.50000000000001?Se=-.11782645274716962:Se=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let ft;t[179]>1e-35?ft=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ft=-.07595415373151816:ft=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ft=.022822510448266862:ft=.17491569312933697:ft=-.058362287133533565:t[2]>2.5000000000000004?ft=-.03633895806364428:ft=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ft=-.07294848747514579:ft=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ft=-.07009535282685533:t[8]>2640.0000000000005?ft=-.051761240111316276:t[131]>1e-35?ft=-.06245774419231631:ft=.03495606662854905:ft=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ft=.0015036626973581122:ft=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ft=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ft=.022343994371919224:ft=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ft=.07724450228328664:t[0]>3853.5000000000005?ft=-.15671707454435677:t[10]>28.500000000000004?ft=-.10179090671841723:ft=.014878216919760927:ft=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ft=.14054154485273487:ft=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ft=-.08632985141410315:ft=.005524157938954954:ft=-.08802502622523681:ft=-.0004649168897260341;let It;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?It=-.007458687464321174:It=-.09444966249102484:t[1]>23.500000000000004?It=.08564129697360716:It=-.07105002902845851:It=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?It=-.10326216566705966:t[1]>26.500000000000004?It=.0050539832484585365:It=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?It=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?It=.05783632021087773:t[10]>17.500000000000004?It=-.06720598671764105:t[1]>47.50000000000001?It=.097495825172558:It=-.013372242800584872:It=-.06463226787713715:t[42]>1e-35?It=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?It=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?It=.11051270080118503:It=.027719462817590454:t[8]>597.5000000000001?It=-.08441503592016869:It=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?It=-.12190088985091102:It=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?It=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?It=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?It=.016585157185448045:It=-.11032043771149425:It=.01586986028570486:t[8]>388.50000000000006?It=-.10592413013261853:It=.04930703248769364:t[13]>1e-35?It=.003621937787920821:It=-.0013786331198611841;let yt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?yt=.009769895322846493:yt=-.10620052926943656:t[9]>19.500000000000004?yt=.03781202525403449:t[9]>14.500000000000002?yt=-.11485785321365344:t[9]>6.500000000000001?yt=.07677177833073881:t[0]>4342.500000000001?yt=-.07079285609687631:t[49]>1e-35?yt=.06156814809246001:yt=-.014788509042554625:yt=-.032659201618470655:t[5]>5207.500000000001?yt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?yt=-.03094160322187924:t[1]>29.500000000000004?yt=.09474646043921069:yt=.023445783928231618:yt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?yt=-.07164443768784848:t[1]>29.500000000000004?yt=.089473622509272:t[8]>597.5000000000001?yt=-.08155349903101317:yt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?yt=-.004003900679358653:t[190]>1e-35?yt=-.09236113461485262:t[8]>3198.5000000000005?yt=-.0124130160451179:yt=.018453070064009328:t[15]>1e-35?yt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?yt=-.0009580759587680961:yt=-.03227283036698222:yt=.01369287669536875:t[1]>50.50000000000001?yt=-.04213060332500437:t[35]>1e-35?yt=-.11508095777767471:t[190]>1e-35?yt=-.08611884672400155:t[297]>1e-35?yt=.05723551879433584:yt=-.004829340082311461;let vt;t[183]>1e-35?vt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?vt=-.11753465135886734:vt=-.007515490299047085:vt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?vt=-.12371142493530439:t[1]>36.50000000000001?vt=.032189417575190435:vt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?vt=-.0784518658439288:t[2]>54.50000000000001?vt=.12477882322370665:vt=.000313468482399738:vt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?vt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?vt=.0353146070135579:vt=-.06327619611098285:vt=.02813577701641991:vt=-.12354390728506215:t[34]>1e-35?vt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?vt=-.01245803535276381:vt=-.07169472553475001:t[1]>11.500000000000002?vt=.12989984824561698:vt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?vt=.010390226893521422:t[10]>14.500000000000002?vt=.16790888126487719:vt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?vt=-.043398307129729134:vt=.09963544907820426:t[9]>30.500000000000004?vt=-.13540713124984502:t[9]>17.500000000000004?vt=.0509435850590757:vt=-.04761897852404613:t[4]>78.50000000000001?vt=.09197086656470652:vt=.0006771050176682337;let ce;t[122]>1e-35?t[6]>36.50000000000001?ce=.05686884451670743:ce=-.05334759543084309:t[266]>1e-35?ce=-.08603579519816038:t[157]>1e-35?ce=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ce=-.0499592651503952:t[0]>725.5000000000001?ce=.11780353905132664:ce=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ce=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ce=-.03190157229022304:ce=.07985197845805492:ce=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ce=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ce=-.027174047777029083:ce=.057117284879796476:t[3]>43.50000000000001?ce=-.0016147040913107311:ce=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ce=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ce=-.01466076988151239:ce=.13375695925484857:ce=-.04885873081899647:t[0]>5566.500000000001?ce=.11086813028591343:t[8]>992.5000000000001?ce=-.07622304217072383:ce=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ce=.03285858361708423:ce=-.12354858211764992:ce=.0672788301823281:t[15]>1e-35?ce=.08658836986585006:ce=-.02741484278509758:t[290]>1e-35?ce=-.08161310335133287:t[135]>1e-35?ce=-.04824156054814152:ce=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let X;t[179]>1e-35?X=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?X=.1470294450403005:X=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?X=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?X=.07965955447707423:t[10]>10.500000000000002?X=-.09236156404262426:X=.03396273196231458:X=-.13246465021467432:X=.07092822261735353:X=-.08753829085942:X=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?X=.004705878789890202:X=.13775378964952867:X=-.04770928980587811:t[10]>29.500000000000004?X=.011221519891071544:t[0]>3853.5000000000005?X=.06365381191628273:X=.15506252245336827:t[1]>37.50000000000001?X=-.07254777021042061:X=.026514587757252385:t[308]>1e-35?X=.04115804816617256:t[10]>26.500000000000004?X=.02077721353011946:t[5]>3548.5000000000005?X=-.1280907116663952:X=-.021974774274438:t[306]>1e-35?X=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?X=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?X=-.005710865560475598:t[94]>1e-35?X=-.06751507982853555:X=.027250040757588703:t[9]>52.50000000000001?X=.07060357924595577:X=-.030297760713011795:X=-.0006005400085266517;let ne;t[113]>1e-35?ne=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ne=-.06996356565314456:ne=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ne=-.08317707559926495:t[21]>1e-35?ne=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ne=-.010538203005984922:ne=.08454819465349446:t[9]>124.50000000000001?ne=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ne=-.08542251249346582:t[9]>50.50000000000001?ne=-.023428882537657472:ne=.010042500833979073:ne=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ne=.03006025206979096:t[9]>108.50000000000001?ne=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ne=.04222035773042132:ne=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ne=-.07209095448054853:ne=.028065954981903313:ne=.08714651929917122:ne=-.006678820669279169:t[10]>40.50000000000001?ne=.006982396294941626:ne=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ne=-.09351114982645548:t[4]>3.5000000000000004?ne=-.004837550129223451:ne=-.08324141237464677:t[303]>1e-35?ne=.10703037493990825:t[9]>156.50000000000003?ne=-.10803018621648303:t[116]>1e-35?ne=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ne=.10261721665006701:ne=.018994509090668264:ne=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let De;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?De=.08396556264106572:De=-.0562516995099192:De=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?De=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?De=.0052017514017035915:De=-.11194119432743639:De=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?De=-.025692451287403446:De=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?De=-.11892250746801664:t[10]>22.500000000000004?De=.07548493166973796:De=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?De=.13750699058082427:t[18]>1e-35?De=.06535408879552801:De=-.054118179035040674:De=.1344282838979622:t[0]>3982.5000000000005?De=-.10409582202467015:t[19]>1e-35?De=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?De=.012705935670766466:De=.14149359442527545:De=-.047977876173706004:t[20]>1e-35?De=.057945228080337946:t[0]>3642.5000000000005?De=-.008726535792122467:De=-.08424769891378858:t[34]>1e-35?De=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?De=.01196849566739346:De=.1614642278429876:De=-.043022338150701625:t[3]>5.500000000000001?De=-.03907848255033881:De=.018280601026175593:De=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let ht;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?ht=-.01192072916082109:ht=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?ht=.06874032717466054:t[4]>40.50000000000001?ht=-.07752510020707537:t[1]>76.50000000000001?ht=-.09944032260703917:t[8]>1381.5000000000002?ht=-.054466635810800745:t[1]>32.50000000000001?ht=.05974084520839573:ht=-.0384718740755954:ht=-.11374190719134032:t[0]>2151.5000000000005?ht=-.13703645155803298:ht=.004833344758654556:t[297]>1e-35?t[212]>1e-35?ht=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?ht=.013539805885738608:ht=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?ht=.09941880179344399:ht=-.01608127391210995:ht=.08025226531247417:t[9]>67.50000000000001?ht=.13525448212444113:t[6]>61.50000000000001?ht=-.05511099182158894:t[94]>1e-35?ht=-.06821509831783572:t[128]>1e-35?ht=.11361314817714643:ht=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?ht=-.09954181329804547:t[197]>1e-35?ht=.10102833149755386:t[188]>1e-35?ht=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?ht=-.03781554214742005:ht=.09927933385592314:ht=-.020006000056720083:ht=-.10520473615957895:ht=-.12006990846253787:ht=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let lr;t[147]>1e-35?t[1]>53.50000000000001?lr=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?lr=-.030504020655417463:lr=.07102458639110094:lr=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?lr=.055304563442710876:t[1]>53.50000000000001?lr=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?lr=-.1568835288372895:lr=-.0279829124400056:lr=.04493843959601833:lr=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?lr=-.054133834303687026:t[9]>48.50000000000001?lr=.11263810289007213:t[9]>9.500000000000002?lr=-.02202034562838259:t[4]>45.50000000000001?lr=-.03410927569045158:lr=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?lr=-.029687297407295893:lr=.10673602850001934:t[4]>42.50000000000001?lr=.0036275562945108117:lr=-.0760789221330622:lr=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?lr=.08274426793676076:lr=-.07076234425516396:lr=.13890177606150175:lr=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?lr=-.09250637750836187:lr=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?lr=-.01897867921812603:lr=.04890781705365262:lr=-.11569892307597907:t[2]>106.50000000000001?lr=.09032697440623969:lr=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let qr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?qr=.0011484728213539738:qr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?qr=-.09828874964938798:t[8]>1586.5000000000002?qr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?qr=.011938269926919522:qr=.17541983715953954:t[19]>1e-35?qr=.023002786011088672:qr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?qr=.06508934844183291:qr=-.10168553534835639:qr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?qr=.021140806225203937:qr=-.1167833342453639:t[2]>33.50000000000001?qr=.13163585734056618:qr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?qr=.06314479201263888:qr=-.09639088327091713:t[10]>29.500000000000004?qr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?qr=40577156464836036e-21:qr=.12322387121810757:qr=-.03697224045046014:t[1]>22.500000000000004?qr=.016474835887320276:qr=.16919298733903063:qr=.07633203630214054:qr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?qr=.14150493354700563:qr=-.01831155354975749:t[1]>28.500000000000004?qr=-.07952557178685365:t[10]>28.500000000000004?qr=.0665695554984927:qr=-.053640139319277094:qr=.0004754840665898665;let $r;t[76]>1e-35?$r=-.06814884255939921:t[179]>1e-35?$r=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?$r=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?$r=.004193658608848433:$r=-.1066968975983452:t[8]>302.50000000000006?$r=.05476730110440451:$r=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?$r=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?$r=.013555772109446666:$r=-.09856116699770784:$r=.0284329611813383:t[2]>52.50000000000001?$r=.04008708444763762:t[9]>29.500000000000004?$r=-.1289599546008197:$r=-.018566534248335896:t[8]>747.5000000000001?$r=.02236484980076122:$r=.1148871655157582:t[8]>3084.0000000000005?$r=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?$r=.03164751204281298:$r=.11752140436184891:t[9]>42.50000000000001?$r=-.07180559595410106:t[22]>1e-35?$r=.09325040416256854:$r=-.016041122807939914:$r=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?$r=-.010718250133458515:$r=.09818827994853763:$r=.010180038981174032:$r=-.039472162599295535:t[9]>170.50000000000003?$r=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?$r=-.08674788057474031:$r=.02077653508548371:$r=-.0003536561382007414;let dn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?dn=.018337297491457794:dn=-.05926206443180149:dn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?dn=.10747078482128616:t[126]>1e-35?dn=-.10550625192391357:t[7]>71.50000000000001?dn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?dn=.1317396472229434:dn=-.025035791351328947:dn=-.0728334305864372:t[8]>963.5000000000001?dn=.023642201723096064:dn=.183010326734258:t[128]>1e-35?dn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?dn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?dn=-.1088876900335281:dn=.02758317023002635:dn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?dn=-.01928020117446408:dn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?dn=.07893723375925096:dn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?dn=-.10301657587280551:dn=.005787463140224318:dn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?dn=-.019296977889522397:dn=-.07274529751752634:t[1]>30.500000000000004?dn=-.050368901143148286:dn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?dn=.0015332402792773946:dn=.09930153676749967:dn=-.06370844564357069:dn=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let At;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?At=-.10504730480402079:t[5]>3341.5000000000005?At=.11087894671081754:At=-.0406668834674614:At=.03308382165616109:t[8]>104.50000000000001?At=-.10431436764549162:At=.0073928337244891455:t[4]>34.50000000000001?At=-.10571751512748416:At=-.006081128814142983:t[13]>1e-35?At=.1299673566095023:t[4]>60.50000000000001?At=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?At=.04857126072645073:At=-.03431365358104773:t[4]>16.500000000000004?At=.04101865986596709:At=.16480274980378218:t[10]>26.500000000000004?At=.03673978504199255:t[10]>9.500000000000002?At=-.10996402743800027:t[308]>1e-35?At=.0553693735082498:At=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?At=.010902983761213922:At=.1325118659895645:At=-.064362945508595:t[1]>66.50000000000001?At=.033416767779331176:At=-.054080316225040496:t[42]>1e-35?At=-.07762364337810815:t[10]>1089.5000000000002?At=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?At=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?At=.0220102041325908:At=-.06516708740003069:At=.012833498905748267:t[224]>1e-35?At=-.007038418272997865:At=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Gt;t[248]>1e-35?Gt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Gt=-.06455513326540585:t[1]>29.500000000000004?Gt=.07718474591552532:t[4]>7.500000000000001?Gt=.040139336931404826:Gt=-.09685734690563386:Gt=.00015327283570347363:t[9]>88.50000000000001?Gt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Gt=-.04077257804338707:Gt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Gt=.03778141591008941:Gt=-.06459919920634845:Gt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Gt=.14063930759326346:t[0]>179.50000000000003?Gt=.07287482250668585:t[8]>1180.5000000000002?Gt=-.14419393112726253:t[10]>28.500000000000004?Gt=-.07993142770099469:t[17]>1e-35?Gt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Gt=.05527969663610186:Gt=-.10824385941441346:t[3]>11.500000000000002?Gt=.12358502961047915:Gt=-.017509147119622873:t[0]>74.50000000000001?Gt=-.014907705458730486:t[8]>95.50000000000001?Gt=-.02225118168342062:Gt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Gt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Gt=.04962819555610421:Gt=-.07213577821855309:Gt=.09139529824708481:t[19]>1e-35?Gt=.013439401088345224:Gt=-.049274647207292056:Gt=.10531673719686951;let Ar;t[40]>1e-35?t[0]>1937.5000000000002?Ar=-.06421671152073961:Ar=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Ar=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Ar=-.03520420769287065:t[8]>1085.5000000000002?Ar=-.019817352506127633:Ar=.11444439424520964:Ar=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Ar=-.010490117519863269:Ar=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Ar=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Ar=.06619344145920268:t[0]>4091.5000000000005?Ar=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ar=.10016091391222309:Ar=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Ar=-.019511460451434884:Ar=-.11643672465055221:t[2]>18.500000000000004?Ar=.07848228087333317:t[8]>55.50000000000001?Ar=.032583027899956235:Ar=-.11209832692153521:t[11]>1e-35?Ar=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Ar=-.09996887746328006:t[9]>2.5000000000000004?Ar=.02157682011863397:Ar=-.05247727848991843:Ar=.07409150201483244:t[1]>38.50000000000001?Ar=-.11378466075449625:t[224]>1e-35?Ar=-.10741749127732923:t[1]>26.500000000000004?Ar=.07343136534146562:Ar=-.07013573628594773:t[25]>1e-35?Ar=-.04626669734164317:Ar=.05518333197956482:Ar=.00032434010867555516;let xr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?xr=.026313251010808853:xr=-.08997339150292381:xr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?xr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?xr=.0905155504503746:t[8]>1049.5000000000002?xr=-.062312558183394054:t[8]>719.5000000000001?xr=.09583836191410239:t[0]>3719.5000000000005?xr=-.0778097309430818:xr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?xr=-.12920865648544927:t[0]>2699.5000000000005?xr=-.07086587879041864:xr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?xr=-.11377786322600797:xr=-.009486325820117998:t[1]>55.50000000000001?xr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?xr=-.07938291201004219:t[2]>36.50000000000001?xr=.01520046732530246:xr=.13649854049662832:xr=-.07145015938528873:t[8]>407.50000000000006?xr=-.00350257360822279:xr=.11332047082193297:xr=-.10060624458629897:xr=.05429496612497562:t[8]>1446.5000000000002?xr=.006073419197482838:xr=-.08718676350883998:xr=-.11532497988252638:xr=.10766270463068293:t[34]>1e-35?xr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?xr=-.0004109812623829506:xr=.021601073497455662:xr=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let rr;t[76]>1e-35?rr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?rr=.013633653464240465:rr=-.10164319411983509:rr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?rr=.00632864847804078:rr=-.08393000368134668:rr=.07870508617440916:t[284]>1e-35?rr=.1092302727710421:rr=-.0025505047582483234:t[248]>1e-35?rr=.07101822393621864:t[274]>1e-35?rr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?rr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?rr=.025081789181021243:rr=-.014813325803582618:t[9]>33.50000000000001?rr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?rr=.11926990418060353:rr=.01852125513565268:rr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?rr=-.1178464984373743:t[283]>1e-35?rr=.043370859226927405:t[5]>4320.500000000001?rr=-.01103141226366587:t[8]>1104.5000000000002?rr=-.023053423988095886:rr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?rr=.000579145585864887:rr=.03389152834202143:t[128]>1e-35?rr=-.14527722052568462:t[210]>1e-35?rr=-.08915971541902741:t[7]>9.500000000000002?rr=-.03307314577076116:t[18]>1e-35?rr=-.05521712302023565:rr=.009315605032770029:rr=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let Ir;t[3]>7.500000000000001?t[157]>1e-35?Ir=-.07514182877923786:Ir=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ir=.028692053800951845:Ir=.14081686716133598:Ir=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Ir=.0037139292567243084:Ir=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Ir=.01202688580305612:Ir=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Ir=.043935495082738626:Ir=-.05639305759669704:t[247]>1e-35?Ir=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Ir=.10331836202616368:Ir=.0006926658459781341:t[96]>1e-35?Ir=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Ir=-.0741403257305367:Ir=.022900127535540854:t[7]>3.5000000000000004?Ir=.038110741403836294:Ir=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ir=-.09552842289807008:t[1]>27.500000000000004?Ir=.012505935885798007:Ir=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Ir=-.1046104767723845:Ir=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Ir=.023466328488582572:Ir=.11730925774586994:Ir=-.04771965631104874:Ir=.17059689880751394:Ir=-.08181850955999449:t[26]>1e-35?Ir=-.12727482696678769:Ir=-.014343123272734182;let Lr;t[147]>1e-35?t[1]>53.50000000000001?Lr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Lr=-.02763546051134888:Lr=.06423344777499343:Lr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Lr=.049825139823021586:t[7]>22.500000000000004?Lr=-.01131680751379858:t[0]>2579.5000000000005?Lr=-.10673674485369694:Lr=-.015387212937189957:Lr=.04347325151148724:t[179]>1e-35?Lr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Lr=.0650355590939066:Lr=-.0473332870892226:Lr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Lr=.11139543329789044:t[126]>1e-35?Lr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Lr=.06370903833231022:t[10]>29.500000000000004?Lr=.03415223859607161:t[10]>3.5000000000000004?Lr=-.07415518117873297:Lr=-.0014119203473324082:Lr=.12617652343819508:t[9]>41.50000000000001?Lr=-.10311145857176976:t[8]>2757.5000000000005?Lr=-.08106484219011428:t[7]>71.50000000000001?Lr=-.09783384432091176:t[1]>88.50000000000001?Lr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Lr=-.008884084501608536:Lr=.061339437777743616:Lr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Lr=.01526664064166223:Lr=.13534828515415498:Lr=-.06985484465894776:Lr=.0005758961943178744;let zr;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?zr=-.029152732370514342:zr=.07173628916139178:t[1]>36.50000000000001?zr=-.08859111297255318:zr=.0018030071815630785:zr=.13652461563759322:zr=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?zr=-.07145140450454163:t[21]>1e-35?zr=-.07422841663493233:zr=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?zr=.11864240653986852:t[3]>33.50000000000001?zr=-.08821209591953476:zr=.05706392280054726:zr=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?zr=.01953613016837112:zr=-.059781039130025006:t[148]>1e-35?zr=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?zr=.07207826841738371:t[202]>1e-35?zr=.08163917539410503:zr=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?zr=-.06858280496900336:zr=-.1781828899516648:zr=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?zr=.018232649414147116:zr=-.04419781124222661:zr=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?zr=.11452368095776105:zr=-.036496437259924026:zr=-.040445338739465486:zr=.0816572651001145:zr=-.08968914517368663:zr=.0002826343082585516;let qn;t[189]>1e-35?t[0]>5269.500000000001?qn=-.08839493050459957:t[10]>85.50000000000001?qn=.10046908365702462:t[8]>2592.5000000000005?qn=-.09632233975926387:t[8]>2000.5000000000002?qn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?qn=.035504970430426296:t[1]>31.500000000000004?qn=-.1133764813142531:qn=-.01138280942244812:t[8]>1125.5000000000002?qn=.09800530246229806:qn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?qn=.07316772160107896:qn=-.059095014819051765:qn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?qn=-.09150209066166894:t[8]>3084.0000000000005?qn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?qn=-.04449234460408263:qn=.05568837973347338:qn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?qn=.12741077850267066:qn=.007372371864985329:t[2]>39.50000000000001?qn=.02295917234617787:qn=.14966532083907075:t[1]>39.50000000000001?qn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?qn=-.02511861881285652:t[1]>27.500000000000004?qn=.08683660011672288:qn=.02956214835267301:t[9]>15.500000000000002?qn=-.016538805462996232:qn=.04352738094981517:qn=-.05561856645643868:t[9]>170.50000000000003?qn=-.07996752635874248:t[179]>1e-35?qn=-.09065975936933919:qn=-.00042817975060427177;let Kn;t[39]>1e-35?t[4]>25.500000000000004?Kn=.03443173196222934:Kn=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Kn=-.0013415395759330318:Kn=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Kn=.002297618040307216:Kn=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Kn=-.015297257305397608:Kn=.09651828834062742:Kn=-.06636003334371929:t[10]>11.500000000000002?Kn=.17631616138309397:t[0]>1639.5000000000002?Kn=3804386478092585e-20:Kn=-.09099296398683193:Kn=-.06874415876172972:t[0]>2151.5000000000005?Kn=-.1311264883406766:Kn=.00809052010141122:t[253]>1e-35?Kn=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Kn=.045038497754638605:Kn=-.07770167665661752:Kn=-.08596294280650517:Kn=.08538655727027213:Kn=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Kn=.054627956617973275:t[1]>61.50000000000001?Kn=-.11994465088415499:t[4]>8.500000000000002?Kn=.06676200239406452:Kn=-.027503148069376867:t[8]>676.5000000000001?Kn=-.10363964928357075:t[4]>8.500000000000002?Kn=-.07589816227175682:Kn=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Kn=.009093153189012338:Kn=-.06119765876605404:Kn=.0004668642103528348;let Mn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Mn=-.10100794502567233:Mn=.08000205636470442:Mn=-.11945419826856896:t[113]>1e-35?Mn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Mn=.1224302423880318:Mn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Mn=.0019277012166729114:t[1]>28.500000000000004?Mn=-.054445821715687494:Mn=.045645722976713245:t[30]>1e-35?Mn=.13402660155331655:Mn=.008921176001777645:Mn=-.058547426505451076:Mn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Mn=-.13526418192218206:Mn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Mn=.0007263224246135398:Mn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Mn=-.11575657261278308:Mn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Mn=-.01995960178292952:Mn=.11216586049153021:Mn=-.10050961087149474:Mn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Mn=.10303451081526649:Mn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Mn=-.043799548968209395:Mn=-.12451444314954115:t[4]>12.500000000000002?Mn=-.03838117361958468:Mn=.06504990789767144:t[57]>1e-35?Mn=.06890006938293915:Mn=.0003914274695562949;let Vn;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?Vn=.004271749009686975:Vn=-.10523878297127605:Vn=.04633982158107851:Vn=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?Vn=-.08655730561951676:t[8]>919.5000000000001?Vn=-.0676453705610183:t[7]>18.500000000000004?Vn=-.027787974193650575:Vn=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?Vn=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?Vn=-.03473877164537313:t[8]>719.5000000000001?Vn=.10471053866934404:Vn=.008236107678382981:t[4]>57.50000000000001?Vn=.09412219478825269:t[10]>66.50000000000001?Vn=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?Vn=-.040681323751002293:Vn=.06374650297561021:Vn=.12884615227401788:t[10]>5.500000000000001?Vn=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?Vn=-.05474068967150784:Vn=.03744700650806603:Vn=-.07846396348680855:t[1]>42.50000000000001?Vn=.018972315810821302:Vn=.10953621007604744:t[5]>4439.500000000001?Vn=.010999776705494586:t[1]>40.50000000000001?Vn=-.12394200059775967:t[10]>2.5000000000000004?Vn=.013528093962849453:Vn=-.09222088417048682:Vn=-.12662967149701485:Vn=.09327296405849603:t[3]>99.50000000000001?Vn=-.013581954439986752:Vn=.0005526498251862075;let Zr;t[187]>1e-35?t[243]>1e-35?Zr=-.08392792551692502:t[10]>68.50000000000001?Zr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?Zr=-.0825306209711224:Zr=.049559996084532945:Zr=-.1064938580886302:Zr=.03353240732240275:Zr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?Zr=.16966001471529374:t[1]>57.50000000000001?Zr=-.005772777673676247:Zr=.09383677041525058:t[8]>747.5000000000001?Zr=.054068175469351235:Zr=-.049968216310277036:t[8]>753.5000000000001?Zr=-.0679383555784074:t[4]>8.500000000000002?Zr=-.059757341189735386:Zr=.05701083682780414:Zr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?Zr=.05820296128730006:Zr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?Zr=.15340611616954566:Zr=.04385036188666874:t[0]>4449.500000000001?Zr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?Zr=.004840354641006495:Zr=.09967827580276283:Zr=.11605363537391578:t[9]>19.500000000000004?Zr=-.0735831692725717:Zr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?Zr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?Zr=-.02442182361342386:Zr=.10334853004243093:Zr=-.030431948680167104:Zr=-956078595250818e-19;let $n;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?$n=-.040232505718244854:t[0]>3030.5000000000005?$n=.0634109586813073:$n=-.04043617034245621:$n=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?$n=-.007859096946435131:$n=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?$n=.05515771679628051:$n=-.04214471312668263:$n=-.09589322222261765:t[193]>1e-35?$n=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?$n=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?$n=-.08152604001147906:t[11]>1e-35?$n=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?$n=.13100930780107503:t[10]>25.500000000000004?$n=.05921074710011526:$n=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?$n=.0009447118243153454:$n=-.09820565036865991:$n=.057146909749745546:t[0]>2115.5000000000005?$n=-.12331216726611678:$n=.007281983677694285:t[2]>56.50000000000001?$n=.012310154675612615:$n=-.08873665774670461:t[6]>25.500000000000004?$n=.134708740821879:t[9]>5.500000000000001?$n=-.0805901581148979:t[224]>1e-35?$n=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?$n=.10842593386554122:t[2]>13.500000000000002?$n=.06466798320378395:$n=-.08578130788886655:$n=-.03590892078300114:$n=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let q;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?q=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?q=.020637047900190317:q=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?q=-.04632587527094407:q=.08603684785510396:q=-.05101401015448496:q=.025466432054358498:q=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?q=.020385355430046367:q=.12032592051335252:q=-.012387370292173013:t[2]>23.500000000000004?q=-.12568545484492677:q=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?q=.043528764484784536:q=.14352071657196003:q=-.009332833816977268:q=.11186782227735846:q=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?q=-.05649104643152564:q=.03884200719305747:t[42]>1e-35?q=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?q=-.04103416502526736:q=.04881823954656287:t[4]>15.500000000000002?q=.009342724662897898:t[0]>3969.5000000000005?q=-.025637309961309498:q=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?q=-.08185697075265091:t[0]>2215.5000000000005?q=.030063975892297354:t[0]>807.5000000000001?q=-.03924325550733229:q=.0415330999189793:q=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let Z;t[7]>17.500000000000004?t[115]>1e-35?Z=.08741852531696623:t[167]>1e-35?Z=.10078975495600809:Z=-.0018324767784017562:t[290]>1e-35?Z=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Z=.1379733311640402:Z=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Z=-.09360083033774169:Z=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Z=-.015599362579530679:t[0]>4593.500000000001?Z=-.12029549262691491:Z=-.018917032256501397:Z=.04632831686576592:Z=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Z=-.05894883236412263:Z=.05213944998315824:Z=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Z=.07577412405680808:Z=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Z=-.0277076900736147:t[1]>65.50000000000001?Z=-.023587471585763506:Z=.10184896592433082:Z=-.057699270527916825:Z=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Z=.06566902102799584:t[10]>25.500000000000004?Z=-.07033633753181047:Z=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Z=-.08108035861059537:Z=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Z=-.12431182772561139:Z=.01886235886984271:Z=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let ke;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ke=.029186512383291244:t[7]>1.5000000000000002?ke=-.14984127276725573:t[1]>40.50000000000001?ke=.032757060730648144:ke=-.07675575422749602:t[6]>8.500000000000002?ke=.10599766037117893:ke=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ke=-.051394622947855385:ke=.03237141302699347:ke=.12526173027943244:ke=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ke=-.07383912482657777:t[0]>5147.500000000001?ke=.07008813937042091:t[10]>38.50000000000001?ke=-.06779203808365307:ke=-.013782769999524498:ke=.0880038869117715:ke=-.12846294176070952:t[281]>1e-35?ke=-.06810806903850834:t[10]>227.50000000000003?ke=-.08937977001661111:t[10]>130.50000000000003?ke=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ke=.011036530162093841:ke=-.11500797478569702:ke=.03702229366129399:ke=.07242026683784307:t[189]>1e-35?ke=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ke=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ke=-.02608892716555304:ke=.09609599320761308:t[9]>105.50000000000001?ke=-.06848127135991534:ke=.0023675721254089715:t[86]>1e-35?ke=-.11049635625500497:ke=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let _r;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?_r=.057446442918106:_r=-.04404018270156349:_r=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?_r=-.05930486238817954:t[1]>29.500000000000004?_r=.06955866121256543:t[8]>597.5000000000001?_r=-.06538593556505168:_r=.06212512595497445:_r=.00021102929959182257:t[9]>90.50000000000001?_r=.0958061289119631:t[102]>1e-35?_r=.07172059675638813:t[1]>47.50000000000001?_r=-.03879798603977766:t[297]>1e-35?_r=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?_r=.003805910996312012:_r=.09304295674749524:t[11]>1e-35?t[18]>1e-35?_r=.11252376801858695:t[288]>1e-35?_r=-.10293901912180432:_r=.014669268837893872:t[1]>42.50000000000001?_r=-.05988274123836837:t[145]>1e-35?_r=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?_r=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?_r=-.03366718308159971:_r=.11936550608549797:t[1]>31.500000000000004?_r=-.07454716789539667:_r=.027859650621164217:t[10]>10.500000000000002?_r=-.11806374092321247:_r=-.03506042229223101:_r=-.0007080765837654515:t[10]>6.500000000000001?_r=-.028077713664996503:t[2]>7.500000000000001?_r=.15803724124216814:_r=.0351381284833169:_r=-.07877953381054767;let pr;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?pr=.14144941521975005:pr=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?pr=.10514088112381886:t[7]>18.500000000000004?pr=-.10370643555956745:pr=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?pr=-.0508129468802936:t[224]>1e-35?pr=-.037816066368733595:t[10]>43.50000000000001?pr=.07793408602607932:pr=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?pr=.036972453794202324:pr=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?pr=.09475302525132188:pr=-.03580104945898193:pr=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?pr=-.1282448778804823:pr=-.014395808269207212:pr=-.008940927190750592:pr=-.1459118815453748:t[0]>4897.500000000001?pr=-.09733068457286576:t[1]>57.50000000000001?pr=.06575271409540207:pr=-.019556422817450115:pr=-.10623959222984136:t[18]>1e-35?pr=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?pr=.008125645893104896:pr=-.11084368630465868:pr=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?pr=-.05854904579626861:t[4]>5.500000000000001?pr=.02985784951394175:pr=-.03247600140149334:pr=-.11152899295304973:pr=-.00035424577714215764;let ln;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?ln=-.06563670567578264:ln=.067656954313663:ln=-.10388217548685377:t[8]>2302.5000000000005?ln=.07190621943790435:t[4]>67.50000000000001?ln=.060020507643618604:t[4]>38.50000000000001?ln=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?ln=-.06568134366461277:t[8]>1075.5000000000002?ln=-.004768057709758692:ln=.11785959165999467:ln=-.05080221682879267:ln=.14814206127494542:ln=-.07241946332311736:t[253]>1e-35?ln=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?ln=-.02471195342450034:ln=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?ln=-.10741850739482771:ln=.010051635824944:ln=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?ln=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?ln=-.08992396138178163:ln=.010944365997007212:ln=.06221307021813793:ln=.1286024087559141:t[127]>1e-35?ln=.06568148624531012:t[10]>40.50000000000001?ln=-.07567979134643352:t[5]>5647.500000000001?ln=.07594672895572069:ln=-.018158016446439187:t[6]>55.50000000000001?ln=.009293422430111872:t[4]>45.50000000000001?ln=-.017749818406964022:t[2]>46.50000000000001?ln=.01714136511113982:ln=-724762291423549e-19;let fn;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?fn=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?fn=.07084726276890757:fn=-.11232323677722932:fn=.04812773089510436:fn=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?fn=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?fn=.0879462816013881:fn=-.002966662093626573:t[306]>1e-35?fn=-.04588085188342676:fn=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?fn=-.006600332774461143:fn=.1272481351557754:fn=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?fn=.011884312066620044:fn=.11678751052403374:t[4]>8.500000000000002?fn=.03627129613273813:fn=-.12132783497902287:fn=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?fn=-.06830131718398992:t[0]>5147.500000000001?fn=.062360406249609306:t[4]>4.500000000000001?fn=-.013162203864592055:fn=-.07153029184927609:fn=.07628618062271557:fn=-.12085065687320373:t[190]>1e-35?fn=-.045816889524231186:t[137]>1e-35?fn=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?fn=.025895337822752502:fn=-.06503949350616421:t[10]>227.50000000000003?fn=-.09989456525790491:t[10]>130.50000000000003?fn=.08616651057030683:fn=.0001234981796706021;let vr;t[8]>1014.5000000000001?t[9]>137.50000000000003?vr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?vr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?vr=-.141732381961068:vr=-.0317152307496497:vr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?vr=.12191801556691254:vr=-.0003444689085397977:vr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?vr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?vr=-.05676033995381961:vr=.10933961076803381:t[4]>26.500000000000004?vr=-.11667582544549814:t[8]>1765.5000000000002?vr=.032174455312047705:vr=-.0755016390126608:t[293]>1e-35?vr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?vr=.026571311956824436:t[15]>1e-35?vr=.06175459479851121:vr=-.018778084411148754:t[9]>40.50000000000001?vr=-.09420232889965811:vr=-.004578248021263184:t[2]>1.5000000000000002?vr=.005453714644971445:vr=-.03907138175699279:vr=-.055296364182154736:t[23]>1e-35?vr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?vr=-.09358146510580179:vr=.060524657996178094:vr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?vr=-.12698331085931538:vr=.006059605604079918:t[2]>196.50000000000003?vr=-.09451315810804783:vr=.0011390147031687425;let Ht;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Ht=.05517359070460923:Ht=-.04758751221404857:Ht=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Ht=.1040436595565776:t[9]>21.500000000000004?Ht=.04032250517675179:t[107]>1e-35?Ht=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Ht=.1192453009230486:t[1]>51.50000000000001?Ht=.0443376336292195:Ht=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Ht=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Ht=-.08999822408398037:Ht=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Ht=-.061850439226075:Ht=.08849196353361093:Ht=.10536348167793089:t[92]>1e-35?Ht=.04894947712119185:t[9]>16.500000000000004?Ht=.05900227903883853:t[9]>5.500000000000001?Ht=-.11946594348916476:Ht=-.03652096348071964:t[1]>41.50000000000001?Ht=-.07411603110840567:Ht=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Ht=.08493634342741495:t[11]>1e-35?Ht=-.10899097825564363:Ht=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Ht=.08356655906359918:t[7]>25.500000000000004?Ht=-.09475076526194888:t[10]>5.500000000000001?Ht=-.01999406228763778:Ht=.06696212545889428:t[6]>20.500000000000004?Ht=.14713592661393468:Ht=.0459917279002218:Ht=.00027445928493734093;let Qn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Qn=-.06904501553217077:Qn=.05696231672035904:Qn=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Qn=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Qn=-.011419256378538392:t[0]>3830.5000000000005?Qn=.140315841503076:Qn=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Qn=-.04027822909411164:Qn=.03176085103667189:Qn=.06779515865838849:t[4]>15.500000000000002?Qn=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Qn=.06124039747298539:Qn=-.04312732764434027:Qn=.09161522761808062:Qn=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Qn=.11211681010488772:t[13]>1e-35?Qn=.06725735814960367:Qn=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Qn=.11743605068905603:Qn=-.011309033539148687:Qn=-.07896094707523052:Qn=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Qn=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Qn=.02836295848998302:Qn=.12210680366745175:Qn=-.058302317470509096:t[5]>4144.500000000001?Qn=.06123341960495106:Qn=-.03840046906926525:Qn=-.05221474543453495:Qn=.03988215485860711:Qn=-.00033074684693083496;let Ws=Hmt(e+r+n+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+B+N+W+ee+me+ae+H+U+le+ie+V+O+Y+te+pe+re+ue+he+Ne+Se+Je+Me+ft+It+yt+vt+ce+Oe+ye+tt+X+ne+We+De+be+ze+it+ht+Ot+lr+Lt+qr+$r+dn+Ae+Ge+ut+At+Xt+Gt+Ar+xr+jt+rr+Jt+Ir+Lr+zr+qn+Kn+Mn+Vn+Zr+$n+_e+q+ge+ve+Z+M+ke+$e+qt+_r+pr+ln+fn+vr+Ht+Qn);return[1-Ws,Ws]}s(l4e,"multilineModelPredict");function Hmt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(Hmt,"sigmoid");var jmt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},c4e={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function u4e(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(jmt[r]??[]).some(l=>o.includes(l))}s(u4e,"hasComment");var sU=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=u4e(e,-2,r),this.rstripSecondToLastLineHasComment=u4e(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},lie=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new sU(e,n),this.suffixFeatures=new sU(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(c4e).length+1).fill(0);r[c4e[this.language]??0]=1;let n=new Array(Object.keys(U1).length+1).fill(0);n[U1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(U1).length+1).fill(0);i[U1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(U1).length+1).fill(0);o[U1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(U1).length+1).fill(0);return a[U1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function Vmt(t,e){return new lie(t.prefix,t.suffix,e)}s(Vmt,"constructMultilineFeatures");function d4e(t,e){let r=Vmt(t,e).constructFeatures();return l4e(r)[1]}s(d4e,"requestMultilineScore");f();f();f();f();async function*q1(t,e){for await(let r of t)yield e(r)}s(q1,"asyncIterableMap");async function*f4e(t,e){for await(let r of t)await e(r)&&(yield r)}s(f4e,"asyncIterableFilter");async function*sP(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(sP,"asyncIterableMapFilter");async function*p4e(...t){for(let e of t)yield*e}s(p4e,"asyncIterableConcat");f();async function aP(t,e,r,n){let i=rn.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Rt).updateExPValuesAndAssignments(n,i)}s(aP,"createTelemetryWithExpWithId");function ml(t,{turn:e,conversation:r}={},n){return aP(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(ml,"createTelemetryWithExpWithTurn");function lP(t,e,r,n,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify($mt(l))),a=a.extendedBy(u,d),a}s(lP,"extendUserMessageTelemetryData");function $mt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s($mt,"mapSkillResolutionsForTelemetry");function m4e(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),aU(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(m4e,"createUserMessageTelemetryData");function h4e(t,e,r,n,i,o,a,l){let c=Ymt(n);return aU(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:n.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s(h4e,"createModelMessageTelemetryData");function g4e(t,e,r,n,i,o,a){aU(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(g4e,"createOffTopicMessageTelemetryData");function A4e(t,e,r,n,i,o,a,l,c){let u=aU(t,l,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},c);return zmt(t,r,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(A4e,"createSuggestionMessageTelemetryData");var y4e={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function C4e(t,e,r){let n=await ml(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Pu(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(C4e,"telemetryIndexCodesearch");function aU(t,e,r,n,i,o,a){let l=a??rn.createAndMarkAsIssued(),c={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=sr();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=Ac(r);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,d,1),u}s(aU,"telemetryMessage");function x4e(t,e,r,n){Pu(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(x4e,"createSuggestionShownTelemetryData");function zmt(t,e,r,n,i,o,a,l){Pu(t,l,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(zmt,"createSuggestionSelectedTelemetryData");function Pu(t,e,r,n,i,o){let a=o??rn.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let l=a.extendedBy(r,n);return Bt(t,i,l),l}s(Pu,"telemetryUserAction");function g5(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",n,1)}s(g5,"logEngineMessages");function Ac(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Ac,"telemetryPrefixForUiKind");function Ymt(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(Ymt,"getCodeBlocks");function v4e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(v4e,"uiKindToIntent");function pv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(pv,"conversationSourceToUiKind");function b4e(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};I4e(t,"round",i.extendedBy(o,a))}s(b4e,"createAgentRoundTelemetryData");function E4e(t,e,r,n,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};I4e(t,"toolCall",l.extendedBy(c,u))}s(E4e,"createToolInvocationTelemetryData");function I4e(t,e,r){return Bt(t,`${Ac("agentPanel")}.${e}`,r)}s(I4e,"logAgenticEvent");f();f();function o2(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(o2,"toString");var Cd=new Tt("streamChoices"),cie=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new fie;this.tool_calls=[];this.function_call=new die;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new uie),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function Kmt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(Kmt,"splitChunk");var uie=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},die=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},fie=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},mv=class t{constructor(e,r,n,i,o,a,l){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=hv(this.response);this.stats=new pie;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let l=n.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,r,n,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Cd.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Cd.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Cd.debug(this.ctx,"chunk",a.toString());let[l,c]=Kmt(r+a.toString());r=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(d)}catch{Cd.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Jmt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Cd.error(this.ctx,"Error in response:",p.error.message):Cd.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(this.requestId.created==0&&(this.requestId=hv(this.response,p),this.requestId.created===0&&p.choices?.length&&Cd.error(this.ctx,'Request id invalid, should have "completionId" and "created":',this.requestId)),i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Cd.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new cie);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>cP(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Yx(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Cd.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Cd.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>cP(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Cd.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function lU(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Cd.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Cd.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Cd.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=cP(e.solution);return cU(t,n,o,e.index,e.requestId,i,r)}s(lU,"prepareSolutionForReturn");function cP(t){let e=t.text.join(""),r=Xmt(t),n=Zmt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(cP,"convertToAPIJsonData");function Jmt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Jmt,"isCopilotConfirmation");function T4e(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${o2(n)}. Input: '${t}'`)}}s(T4e,"parseCallArguments");function Xmt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=T4e(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(Xmt,"extractToolCalls");function Zmt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=T4e(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(Zmt,"extractFunctionCall");var pie=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new mie,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},mie=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function uU(t,e){return t!==null&&typeof t=="object"&&e in t}s(uU,"hasKey");function Du(t,e){return uU(t,e)?t[e]:void 0}s(Du,"getKey");var _4e=je(ni());var Js=new Tt("fetchCompletions");function hv(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(hv,"getRequestId");function A5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(A5,"getProcessingTime");function S4e(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(S4e,"uiKindToIntent");var xd=class{static{s(this,"OpenAIFetcher")}};function eht(t,e,r,n){return Gx(t,e,"proxy","v1/engines",r,n)}s(eht,"getProxyEngineUrl");function dU(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let l={...a};for(let c of n)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(dU,"sanitizeRequestOptionTelemetry");async function w4e(t,e,r,n,i,o,a,l,c,u,d){let p=t.get(Ji),m=eht(t,a,r,n),h=c.extendedBy({endpoint:n,engineName:r,uiKind:l},SS(e));dU(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Bt(t,"request.sent",h);let g=Ks(),y=S4e(l);return rI(t,m,a.token,y,i,o,u,d).then(v=>{let b=hv(v,void 0);h.extendWithRequestId(b);let E=Ks()-g;return h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),Js.debug(t,"request.response properties",h.properties),Js.debug(t,"request.response measurements",h.measurements),Js.debug(t,"prompt:",e),Bt(t,"request.response",h),v}).catch(v=>{if(Fc(v))throw Bt(t,"request.cancel",h),v;p.setWarning(Du(v,"message")??"");let b=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",b),h.properties.message=String(Du(v,"name")??""),h.properties.code=String(Du(v,"code")??""),h.properties.errno=String(Du(v,"errno")??""),h.properties.type=String(Du(v,"type")??"");let E=Ks()-g;throw h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),Js.debug(t,"request.error properties",h.properties),Js.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),v}).finally(()=>{iIe(t,e,h)})}s(w4e,"fetchWithInstrumentation");async function tht(t,e,r,n,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:l});dU(o,d,["messages"]),d.properties.headerRequestId=i,Bt(t,"request.sent",d);let p=Ks(),m=S4e(l),h={...jx(t)};try{let g=await rI(t,n,a.token,m,i,o,u,h),y=hv(g,void 0);d.extendWithRequestId(y);let v=Ks()-p;return d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${v}ms`),Js.debug(t,"request.response properties",d.properties),Js.debug(t,"request.response measurements",d.measurements),Js.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",d),g}catch(g){if(Fc(g))throw Bt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",y),d.properties.message=String(Du(g,"name")??""),d.properties.code=String(Du(g,"code")??""),d.properties.errno=String(Du(g,"errno")??""),d.properties.type=String(Du(g,"type")??"");let v=Ks()-p;throw d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${v}ms`),Js.debug(t,"request.error properties",d.properties),Js.debug(t,"request.error measurements",d.measurements),Bt(t,"request.error",d),g}finally{g5(t,e,d)}}s(tht,"fetchChatWithInstrumentation");function hie(t){return f4e(t,e=>e.completionText.trim().length>0)}s(hie,"postProcessChoices");var rht="github.copilot.completions.quotaExceeded",uP=class extends xd{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ji),l="completions",c=await e.get(Gr).getToken(),u=await this.fetchWithParameters(e,l,r,c,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Js.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,r);return this.handleError(e,a,h,u,c)}let p=mv.create(e,r.count,u,n,[],o).processSSE(i),m=q1(p,h=>lU(e,h,n));return{type:"success",choices:hie(m),getProcessingTime:s(()=>A5(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:l.id,stream:!0,...c},m=n.extendedBy({endpoint:d,model:l.name}),h=e.get(Ji),g=await e.get(Gr).getToken(),y=await tht(e,r,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){Js.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=rn.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=mv.create(e,1,y,m,[],_4e.CancellationToken.None).processSSE(),E=q1(b,_=>lU(e,_,n));return{type:"success",choices:hie(E),getProcessingTime:s(()=>A5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ji),l="speculation",c=await e.get(Gr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:sr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,n,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){Js.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=mv.create(e,1,d,n,[],o).processSSE(i),h=q1(m,g=>lU(e,g,n));return{type:"success",choices:hie(h),getProcessingTime:s(()=>A5(d),"getProcessingTime")}}createTelemetryData(e,r,n){return rn.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let l={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await i2(0),a?.isCancellationRequested?"not-sent":await w4e(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let l=e.get(Rt).disableLogProb(o),c={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:pU(e),temperature:y5(e,n.count),top_p:fU(e),n:n.count,stop:R4e(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!l)&&(c.logprobs=2);let u=k1(n.repoInfo);return u!==void 0&&(c.nwo=u),n.postOptions&&Object.assign(c,n.postOptions),n.prompt.context&&(c.extra.context=n.prompt.context),await i2(0),a?.isCancellationRequested?"not-sent":await w4e(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:rht,title:"Learn More"});let c=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Js.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Js.error(e,l),r.setWarning(l),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Js.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Bt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Gr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Js.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Js.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Js.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function cU(t,e,r,n,i,o,a){return nIe(t,e,r,i,n),{completionText:e,meanLogProb:nht(t,r),meanAlternativeLogProb:iht(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:sr(),finishReason:r.finish_reason}}s(cU,"convertToAPIChoice");function nht(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){on.exception(t,r,"Error calculating mean prob")}}s(nht,"calculateMeanLogProb");function iht(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){on.exception(t,r,"Error calculating mean prob")}}s(iht,"calculateMeanAlternativeLogProb");function y5(t,e){return tm(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(y5,"getTemperatureForSamples");var oht={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function R4e(t,e){return oht[e??""]??[`


`,"\n```"]}s(R4e,"getStops");function fU(t){return 1}s(fU,"getTopP");function pU(t){return f8}s(pU,"getMaxSolutionTokens");var gie=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},mU=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new gie(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new oU(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=cU(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();var hU=new Tt("getCompletions");function gU(t,e,r){r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=C5(r.resultType),Bt(t,`${e}.shown`,r.telemetry)}s(gU,"telemetryShown");function k4e(t,e,r){let n=e+".accepted";Bt(t,n,r)}s(k4e,"telemetryAccepted");function B4e(t,e,r){let n=e+".rejected";Bt(t,n,r)}s(B4e,"telemetryRejected");function Tg(t,e={}){return{...e,telemetryBlob:t}}s(Tg,"mkCanceledResultTelemetry");function Xs(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Xs,"mkBasicResultTelemetry");function P4e(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=Ks()-e.telemetryBlob.issuedTime,n=C5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return hU.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${l}`),zee(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(hU.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}zee(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(P4e,"handleGhostTextResultTelemetry");function C5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(C5,"resultTypeToString");f();f();f();async function sht(t){if(t.isCancellationRequested)return;let e=new fv,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(sht,"cancellationTokenToPromise");async function D4e(t,e){if(e){let r=sht(e);await Promise.race([t,r])}else await t}s(D4e,"raceCancellation");function Aie(t){return Array.isArray(t)}s(Aie,"isArrayOfT");async function N4e(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let l;o instanceof Promise?l=await aht(o,e):l=await lht(o,e),r.set(i,l)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(N4e,"resolveAll");async function aht(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:Aie(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await D4e(i,e),n.resolutionTime=performance.now()-r,n}s(aht,"resolvePromise");async function lht(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await D4e(i,e),n.resolutionTime=performance.now()-r,n}s(lht,"resolveIterable");f();var cht={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},uht="ms-vscode.cpptools",dht="CppCompletionContextProvider";function L4e(t,e,r,n){(e.includes(dht)||e.length===1&&e[0]==="*")&&M4e(t,r,n)}s(L4e,"fillInCppVSActiveExperiments");function F4e(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(uht))&&M4e(t,r,n)}s(F4e,"fillInCppVSCodeActiveExperiments");function M4e(t,e,r){try{let n=cht,i=t.get(Rt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){on.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){on.exception(t,n,"fillInCppActiveExperiments")}}s(M4e,"addActiveExperiments");f();function AU(t,e,r){try{let n=t.get(Rt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return on.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(AU,"fillInCSharpActiveExperiments");f();var gv="fallbackContextProvider",yU={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function Q4e(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(gv))&&fht(t,r,n)}s(Q4e,"fillInMultiLanguageActiveExperiments");function fht(t,e,r){try{let n=pht(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){on.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(fht,"addActiveExperiments");function pht(t,e){let r=yU,n=t.get(Rt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){on.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(pht,"getMultiLanguageContextProviderParamsFromExp");function O4e(t){let e={...yU};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(O4e,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var mht="typescript-ai-context-provider";function U4e(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(mht)))return!1;try{let i=t.get(Rt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,l]of Object.entries(o))r.set(a,l)}}catch(i){return on.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(U4e,"fillInTsActiveExperiments");f();var q4e=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),W4e=I.Intersect([I.Object({name:I.String(),value:I.String()}),q4e]),G4e=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),q4e]),hht=[W4e,G4e],ght=I.Union(hht),Aht=new Map([["Trait",ms.Compile(W4e)],["CodeSnippet",ms.Compile(G4e)]]),yht=s(t=>t,"ensureTypesAreEqual");yht(!0);var Cht=I.Object({contextItems:I.Array(ght)}),xht=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),yie=I.Object({id:I.String()}),vht=I.Intersect([yie,xht]),bht=I.Intersect([yie,Cht]),H4e=I.Object({providers:I.Array(vht)}),j4e=I.Object({providers:I.Array(yie)}),Cie=I.Object({providers:I.Array(bht),updating:I.Optional(I.Array(I.String()))}),CU=I.Intersect([mIe,I.Object({contextItems:I.Optional(Cie)})]);function xU(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(xU,"filterContextItemsByType");function V4e(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of Aht.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(V4e,"filterSupportedContextItems");function Eht(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(Eht,"validateContextItemId");function $4e(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??sr();if(!Eht(o)){let a=sr();on.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=sr();on.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s($4e,"addOrValidateContextItemsIDs");f();var Ol=class{constructor(e=()=>new xie){this.createStatistics=e;this.statistics=new nn(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},xie=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/n.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function z4e(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(z4e,"componentStatisticsToPromptMatcher");var Y4e=je(ni());var ka=class{static{s(this,"ContextProviderRegistry")}},wg=class{static{s(this,"DefaultContextProviders")}},v5=class extends wg{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},vie=class extends ka{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a){if(o?.isCancellationRequested)return on.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;AU(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(n,i),d=u.filter(_=>_[1]>0);if(u.filter(_=>_[1]<=0).forEach(([_,k])=>{let B={providerId:_.id,matchScore:k,resolution:"none",resolutionTimeMs:0,data:[]};c.push(B)}),d.length===0)return c;if(o?.isCancellationRequested)return on.debug(this.ctx,"Resolving context providers cancelled"),[];F4e(this.ctx,d.map(_=>_[0].id),l,i),Q4e(this.ctx,d.map(_=>_[0].id),l,i),U4e(this.ctx,d.map(_=>_[0].id),l,i);let m=new Y4e.CancellationTokenSource;if(o){let _=o.onCancellationRequested(k=>{m.cancel(),_.dispose()})}let h=IB(this.ctx)&&!PL(this.ctx)?0:Iht(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map,b={completionId:r,documentContext:n,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a};for(let[_]of d){let k=this.ctx.get(Ol).getPreviousStatisticsForCompletion(r)?.get(_.id);k&&(b.previousUsageStatistics=k);let B=_.resolver.resolve(b,m.token);v.set(_.id,B)}let E=await N4e(v,m.token);y&&clearTimeout(y);for(let[_,k]of d){let B=E.get(_.id);if(B){if(B.status==="error")XM(B.reason)||on.error(this.ctx,`Error resolving context from ${_.id}: `,B.reason),c.push({providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:[]});else{let N=[...B.value??[]];if((B.status==="none"||B.status==="partial")&&(on.info(this.ctx,`Context provider ${_.id} exceeded time budget of ${h}ms`),_.resolver.resolveOnTimeout))try{let H=_.resolver.resolveOnTimeout(b);Aie(H)?N.push(...H):H&&N.push(H),N.length>0&&(B.status="partial")}catch(H){on.error(this.ctx,`Error in fallback logic for context provider ${_.id}: `,H)}let[W,ee]=V4e(N);ee&&on.error(this.ctx,`Dropped ${ee} context items from ${_.id} due to invalid schema`);let me=$4e(this.ctx,W),ae={providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:me};c.push(ae)}this.ctx.get(Ol).getStatisticsForCompletion(r).setLastResolution(_.id,B.status)}else on.error(this.ctx,`Context provider ${_.id} not found in results`)}return c.sort((_,k)=>k.matchScore-_.matchScore)}async matchProviders(r,n){let i=bU(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,r);return[l,c]}))}},bie=class extends ka{constructor(r){super();this.delegate=r;this._cachedContextItems=new nn(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(r,n,i,o,a);return c.length>0&&r&&this._cachedContextItems.set(r,c),c}};function vU(t,e){return new bie(new vie(t,e))}s(vU,"getContextProviderRegistry");function K4e(t,e,r){let n=t.get(Ol).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=n.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(K4e,"telemetrizeContextItems");function J4e(t){return t.matchScore>0&&t.resolution!=="error"}s(J4e,"matchContextItems");function bU(t,e){let r=Eie(t,e),n=Gi(t,Pt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(wg).getIds();return Array.from(new Set([...i,...r,...n]))}s(bU,"getActiveContextProviders");function Eie(t,e){return IB(t)?["*"]:t.get(Rt).contextProviders(e)}s(Eie,"getExpContextProviders");function Iie(t,e){return bU(t,e).length>0}s(Iie,"useContextProviderAPI");function Iht(t,e){let r=Gi(t,Pt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Rt).contextProviderTimeBudget(e)}s(Iht,"getContextProviderTimeBudget");var Zf=class{constructor(e){this.ctx=e;this.scheduledResolutions=new nn(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o){let a=this.ctx.get(ka),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(r,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},n,i,o?.data);this.scheduledResolutions.set(r,m)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var EU=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await B1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},IU=class extends EU{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=Z4e(r,n),this.isBlockStart(Tht(r,n))&&this.isBlockBodyEmpty(r,n)}};function Tht(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(Tht,"getLineAtOffset");function Z4e(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(Z4e,"rewindToNearestNonWs");function X4e(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(X4e,"indent");function wht(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=X4e(t,r),i=X4e(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(wht,"outdented");var _g=class extends EU{constructor(r,n,i,o,a,l,c){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&cTe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=Z4e(r,n);let i=await B1(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&wht(d,p,r)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=n}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},_ht={python:new _g("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new _g("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new _g("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new _g("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new IU("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new IU("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new _g("csharp",{},new Map([]),[],"block",null,!0),java:new _g("java",{},new Map([]),[],"block",null,!0),php:new _g("php",{},new Map([]),[],"block",null,!0),cpp:new _g("cpp",{},new Map([]),[],"block",null,!0)};function Tie(t){if(!A0(t))throw new Error(`Language ${t} is not supported`);return _ht[YM(t)]}s(Tie,"getBlockParser");async function eRe(t,e,r){return A0(t)?Tie(t).isEmptyBlockStart(e,r):!1}s(eRe,"isEmptyBlockStart");async function tRe(t,e,r,n){if(A0(t))return Tie(t).isBlockBodyFinished(e,r,n)}s(tRe,"isBlockBodyFinished");async function rRe(t,e,r){if(A0(t))return Tie(t).getNodeStart(e,r)}s(rRe,"getNodeStart");var o9r=new Tt("parseBlock");function dP(t,e,r,n){let i=e.getText(jo.range(jo.position(0,0),r))+(n?`
`:""),o=e.offsetAt(r)+(n?1:0),a=e.detectedLanguageId;return l=>tRe(a,i,l,o)}s(dP,"parsingBlockFinished");function wU(t,e){return eRe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(wU,"isEmptyBlockStartUtil");async function nRe(t,e,r,n){let o=e.getText(jo.range(jo.position(0,0),r))+n,a=await rRe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(nRe,"getNodeStartUtil");var Sht=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),Rht=new RegExp(`^(${Sht.join("|")})`);function kht(t){return Rht.test(t.trimLeft().toLowerCase())}s(kht,"isContinuationLine");function TU(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(TU,"indentationOfLine");function fP(t,e){let r=t.getText(),n=t.offsetAt(e);return wie(r,n,t.detectedLanguageId)}s(fP,"contextIndentation");function wie(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=TU(d[h]),y=h,h+=m;if(r==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=TU(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(n,n.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=TU(n[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(wie,"contextIndentationFromText");var Bht=!1;function Pht(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&Bht&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<n.length;c++){let u=n[c];c==0&&o!==void 0&&(u=o+u);let d=TU(u);if(d!==void 0&&(d<l||d===l&&!kht(u)))return n.slice(0,c).join(`
`).length}return"continue"}s(Pht,"completionCutOrContinue");function iRe(t,e){return async r=>{let n=Pht(r,t,e);return n==="continue"?void 0:n}}s(iRe,"indentationBlockFinished");f();f();f();f();f();f();var Dht={tokenizerName:"o200k_base"};function Nht(t){return{...Dht,...t}}s(Nht,"cursorContextOptions");function pP(t,e={}){let r=Nht(e),n=Bo(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(pP,"getCursorContext");f();f();var Lht={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function oRe(t){let e=Lht[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(oRe,"announceSnippet");var _ie=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Sie=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=Oht.get(e.languageId)??Qht}tokenize(e){return new Set(Fht(e).filter(r=>!this.stopsForLanguage.has(r)))}},sRe=new _ie(20),b5=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Sie(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=sRe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&d>0&&n[n.length-1].endLine>d){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=d,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:d,endLine:p})}return l&&sRe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let l=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function Fht(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(Fht,"splitIntoWords");var Mht=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Qht=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Mht]),Oht=new Map([]);f();function _U(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(_U,"getBasicWindowDelineations");var SU=class t extends b5{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return _U(this.windowLength,e)}_getCursorContextInfo(e){return pP(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return Uht(e,r)}};function Uht(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(Uht,"computeScore");f();var RU=class t extends b5{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return _U(this.windowLength,e)}_getCursorContextInfo(e){return pP(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):pP(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return qht(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await B1(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function qht(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(qht,"computeScore");var Wht=0,Ght=60,Hht=4,jht=1,Vht=20,$ht=1e4,aRe={snippetLength:Ght,threshold:Wht,maxTopSnippets:Hht,maxCharPerFile:$ht,maxNumberOfFiles:Vht,maxSnippetsPerFile:jht,useSubsetMatching:!1};var Rie={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function zht(t,e){return(e.useSubsetMatching?RU.FACTORY(e.snippetLength):SU.FACTORY(e.snippetLength)).to(t)}s(zht,"getMatcher");async function lRe(t,e,r){let n=zht(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(lRe,"getSimilarSnippets");function cRe(t,e){return{...Rie,useSubsetMatching:kie(t,e)}}s(cRe,"getCppSimilarFilesOptions");function uRe(t){return Rie.maxTopSnippets}s(uRe,"getCppNumberOfSnippets");var Yht=new Map([["cpp",cRe]]);function kU(t,e,r){let n=Yht.get(r);return n?n(t,e):{...aRe,useSubsetMatching:kie(t,e)}}s(kU,"getSimilarFilesOptions");var Kht=new Map([["cpp",uRe]]);function dRe(t,e){let r=Kht.get(e);return r?r(t):oTe}s(dRe,"getNumberOfSnippets");function kie(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Gi(t,Pt.UseSubsetMatching))??!1}s(kie,"useSubsetMatching");f();f();var Jht=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Xht(t){return Jht.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Xht,"isOomError");function E5(t,e,r,n=on){if(!Fc(e)){if(e instanceof Error){let i=e;Xht(i)?t.get(Ji).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Ji).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Ji).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Ji).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Ji).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(E5,"handleException");function fRe(t){process.addListener("uncaughtException",r=>{E5(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,E5(t,r,"unhandledRejection")}finally{e=!1}})}s(fRe,"registerDefaultHandlers");f();f();var Zht="content_excluded";async function pRe(t,e,r,n){let i=xU(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(Dr),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Ol).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,Zht]]),m}).map(d=>d.data)}s(pRe,"getCodeSnippetsFromContextItems");function mRe(t,e){let r=t.get(Dr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(mRe,"addRelativePathToCodeSnippets");f();function hl(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(hl,"Text");function Av(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Av,"Code");function yv(t){return t.children}s(yv,"Chunk");f();function Br(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Br,"functionComponentFunction");function Dm(t){return{type:"f",children:t}}s(Dm,"fragmentFunction");Dm.isFragmentFunction=!0;var BU=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(vd,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=mRe(t.ctx,r),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(Br(hl,{expElidableTextWeight:1,children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Br(Av,{source:p,expElidableTextWeight:.99,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Br(hl,{expElidableTextWeight:.5,children:"---"}))}),Br(yv,{children:d})})},"CodeSnippets");f();function Bie(t){return t.children}s(Bie,"CompletionsContext");function Pie(t){return t.children}s(Pie,"StableCompletionsContext");function Die(t){return t.children}s(Die,"AdditionalCompletionsContext");function PU(t){return t.name===Bie.name||t.name===Pie.name||t.name===Die.name}s(PU,"isContextNode");f();f();f();f();f();f();var Cs=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},mP=class{constructor(){this._first=Cs.Undefined;this._last=Cs.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===Cs.Undefined}clear(){let e=this._first;for(;e!==Cs.Undefined;){let r=e.next;e.prev=Cs.Undefined,e.next=Cs.Undefined,e=r}this._first=Cs.Undefined,this._last=Cs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new Cs(e);if(this._first===Cs.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Cs.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Cs.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Cs.Undefined&&e.next!==Cs.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===Cs.Undefined&&e.next===Cs.Undefined?(this._first=Cs.Undefined,this._last=Cs.Undefined):e.next===Cs.Undefined?(this._last=this._last.prev,this._last.next=Cs.Undefined):e.prev===Cs.Undefined&&(this._first=this._first.next,this._first.prev=Cs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Cs.Undefined;)yield e.element,e=e.next}};f();var egt=globalThis.performance&&typeof globalThis.performance.now=="function",I5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=egt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var hRe=!1,tgt=!1,s2;(ie=>{ie.None=s(()=>Ho.None,"None");function e(V){if(tgt){let{onDidAddListener:O}=V,Y=hP.create(),te=0;V.onDidAddListener=()=>{++te===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),O?.()}}}s(e,"_addLeakageTraceLogic");function r(V,O){return h(V,()=>{},0,void 0,!0,void 0,O)}ie.defer=r,s(r,"defer");function n(V){return(O,Y=null,te)=>{let pe=!1,re;return re=V(ue=>{if(!pe)return re?re.dispose():pe=!0,O.call(Y,ue)},null,te),pe&&re.dispose(),re}}ie.once=n,s(n,"once");function i(V,O){return ie.once(ie.filter(V,O))}ie.onceIf=i,s(i,"onceIf");function o(V,O,Y){return p((te,pe=null,re)=>V(ue=>te.call(pe,O(ue)),null,re),Y)}ie.map=o,s(o,"map");function a(V,O,Y){return p((te,pe=null,re)=>V(ue=>{O(ue),te.call(pe,ue)},null,re),Y)}ie.forEach=a,s(a,"forEach");function l(V,O,Y){return p((te,pe=null,re)=>V(ue=>O(ue)&&te.call(pe,ue),null,re),Y)}ie.filter=l,s(l,"filter");function c(V){return V}ie.signal=c,s(c,"signal");function u(...V){return(O,Y=null,te)=>{let pe=bSe(...V.map(re=>re(ue=>O.call(Y,ue))));return m(pe,te)}}ie.any=u,s(u,"any");function d(V,O,Y,te){let pe=Y;return o(V,re=>(pe=O(pe,re),pe),te)}ie.reduce=d,s(d,"reduce");function p(V,O){let Y,te={onWillAddFirstListener(){Y=V(pe.fire,pe)},onDidRemoveLastListener(){Y?.dispose()}};O||e(te);let pe=new _0(te);return O?.add(pe),pe.event}s(p,"snapshot");function m(V,O){return O instanceof Array?O.push(V):O&&O.add(V),V}s(m,"addAndReturnDisposable");function h(V,O,Y=100,te=!1,pe=!1,re,ue){let he,Ne,Se,Je=0,Me,ft={leakWarningThreshold:re,onWillAddFirstListener(){he=V(yt=>{Je++,Ne=O(Ne,yt),te&&!Se&&(It.fire(Ne),Ne=void 0),Me=s(()=>{let vt=Ne;Ne=void 0,Se=void 0,(!te||Je>1)&&It.fire(vt),Je=0},"doFire"),typeof Y=="number"?(clearTimeout(Se),Se=setTimeout(Me,Y)):Se===void 0&&(Se=0,queueMicrotask(Me))})},onWillRemoveListener(){pe&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,he.dispose()}};ue||e(ft);let It=new _0(ft);return ue?.add(It),It.event}ie.debounce=h,s(h,"debounce");function g(V,O=0,Y){return ie.debounce(V,(te,pe)=>te?(te.push(pe),te):[pe],O,void 0,!0,void 0,Y)}ie.accumulate=g,s(g,"accumulate");function y(V,O=(te,pe)=>te===pe,Y){let te=!0,pe;return l(V,re=>{let ue=te||!O(re,pe);return te=!1,pe=re,ue},Y)}ie.latch=y,s(y,"latch");function v(V,O,Y){return[ie.filter(V,O,Y),ie.filter(V,te=>!O(te),Y)]}ie.split=v,s(v,"split");function b(V,O=!1,Y=[],te){let pe=Y.slice(),re=V(Ne=>{pe?pe.push(Ne):he.fire(Ne)});te&&te.add(re);let ue=s(()=>{pe?.forEach(Ne=>he.fire(Ne)),pe=null},"flush"),he=new _0({onWillAddFirstListener(){re||(re=V(Ne=>he.fire(Ne)),te&&te.add(re))},onDidAddFirstListener(){pe&&(O?setTimeout(ue):ue())},onDidRemoveLastListener(){re&&re.dispose(),re=null}});return te&&te.add(he),he.event}ie.buffer=b,s(b,"buffer");function E(V,O){return s((te,pe,re)=>{let ue=O(new k);return V(function(he){let Ne=ue.evaluate(he);Ne!==_&&te.call(pe,Ne)},void 0,re)},"fn")}ie.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(O){return this.steps.push(O),this}forEach(O){return this.steps.push(Y=>(O(Y),Y)),this}filter(O){return this.steps.push(Y=>O(Y)?Y:_),this}reduce(O,Y){let te=Y;return this.steps.push(pe=>(te=O(te,pe),te)),this}latch(O=(Y,te)=>Y===te){let Y=!0,te;return this.steps.push(pe=>{let re=Y||!O(pe,te);return Y=!1,te=pe,re?pe:_}),this}evaluate(O){for(let Y of this.steps)if(O=Y(O),O===_)break;return O}}function B(V,O,Y=te=>te){let te=s((...he)=>ue.fire(Y(...he)),"fn"),pe=s(()=>V.on(O,te),"onFirstListenerAdd"),re=s(()=>V.removeListener(O,te),"onLastListenerRemove"),ue=new _0({onWillAddFirstListener:pe,onDidRemoveLastListener:re});return ue.event}ie.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function N(V,O,Y=te=>te){let te=s((...he)=>ue.fire(Y(...he)),"fn"),pe=s(()=>V.addEventListener(O,te),"onFirstListenerAdd"),re=s(()=>V.removeEventListener(O,te),"onLastListenerRemove"),ue=new _0({onWillAddFirstListener:pe,onDidRemoveLastListener:re});return ue.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function W(V,O){return new Promise(Y=>n(V)(Y,null,O))}ie.toPromise=W,s(W,"toPromise");function ee(V){let O=new _0;return V.then(Y=>{O.fire(Y)},()=>{O.fire(void 0)}).finally(()=>{O.dispose()}),O.event}ie.fromPromise=ee,s(ee,"fromPromise");function me(V,O){return V(Y=>O.fire(Y))}ie.forward=me,s(me,"forward");function ae(V,O,Y){return O(Y),V(te=>O(te))}ie.runAndSubscribe=ae,s(ae,"runAndSubscribe");class H{constructor(O,Y){this._observable=O;this._counter=0;this._hasChanged=!1;let te={onWillAddFirstListener:s(()=>{O.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{O.removeObserver(this)},"onDidRemoveLastListener")};Y||e(te),this.emitter=new _0(te),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(O){this._counter++}handlePossibleChange(O){}handleChange(O,Y){this._hasChanged=!0}endUpdate(O){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function U(V,O){return new H(V,O).emitter.event}ie.fromObservable=U,s(U,"fromObservable");function le(V){return(O,Y,te)=>{let pe=0,re=!1,ue={beginUpdate(){pe++},endUpdate(){pe--,pe===0&&(V.reportChanges(),re&&(re=!1,O.call(Y)))},handlePossibleChange(){},handleChange(){re=!0}};V.addObserver(ue),V.reportChanges();let he={dispose(){V.removeObserver(ue)}};return te instanceof Bu?te.add(he):Array.isArray(te)&&te.push(he),he}}ie.fromObservableLight=le,s(le,"fromObservableLight")})(s2||={});var Nie=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new I5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},gRe=-1;var Lie=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new Fie(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},hP=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Fie=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Mie=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},rgt=0,T5=class{constructor(e){this.value=e;this.id=rgt++}static{s(this,"UniqueContainer")}},ngt=2,igt=s((t,e)=>{if(t instanceof T5)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),_0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=gRe>0||this._options?.leakWarningThreshold?new Lie(e?.onListenerError??n5,this._options?.leakWarningThreshold??gRe):void 0,this._perfMon=this._options?._profName?new Nie(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(hRe){let e=this._listeners;queueMicrotask(()=>{igt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Mie(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||n5)(d),Ho.None}if(this._disposed)return Ho.None;r&&(e=e.bind(r));let i=new T5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=hP.create(),o=this._leakageMon.check(i.stack,this._size+1)),hRe&&(i.stack=a??hP.create()),this._listeners?this._listeners instanceof T5?(this._deliveryQueue??=new Qie,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=Sa(()=>{o?.(),this._removeListener(i)});return n instanceof Bu?n.add(l):Array.isArray(n)&&n.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*ngt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||n5;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof T5)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Qie=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var ARe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),DU;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof w5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:s2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ARe})})(DU||={});var w5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ARe:(this._emitter||(this._emitter=new _0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},W1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new w5),this._token}cancel(){this._token?this._token instanceof w5&&this._token.cancel():this._token=DU.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof w5&&this._token.dispose():this._token=DU.None}};function yRe(t){return t}s(yRe,"identity");var NU=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=yRe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},G1=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=yRe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var Sg=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function a2(t){return t<0?0:t>4294967295?4294967295:t|0}s(a2,"toUint32");function Oie(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(Oie,"escapeRegExpCharacters");function Rg(t){return t.split(/\r\n|\r|\n/)}s(Rg,"splitLines");function gP(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(gP,"commonPrefixLength");function S5(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(S5,"commonSuffixLength");var sgt=/^[\t\n\r\x20-\x7E]*$/;function Uie(t){return sgt.test(t)}s(Uie,"isBasicASCII");var kNr=String.fromCharCode(65279);function bRe(t){return t.charAt(0).toUpperCase()+t.slice(1)}s(bRe,"uppercaseFirstLetter");var CRe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=agt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function agt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(agt,"getGraphemeBreakRawData");var xRe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Sg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new NU({getCacheKey:JSON.stringify},e=>{function r(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(r,"arrayToMap");function n(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=r(o[d]);l=i(l,p)}let c=r(o._common),u=n(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Sg(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},vRe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();f();function ERe(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(ERe,"findEditDistanceScore");var IRe=50;function qie(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(qie,"approximateMaxCharacters");function AP(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(vd,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=qie(a);return Br(Dm,{children:[Br(l2,{document:r,position:i,maxCharacters:m}),Br(LU,{document:r,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s(AP,"CurrentFile");function l2(t){if(t.document===void 0||t.position===void 0)return Br(hl,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Br(Av,{children:e})}s(l2,"BeforeCursor");function LU(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Br(hl,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Br(hl,{});if(r===o)return Br(hl,{children:r});let a=o;if(r!==""){let l=Bo(t.tokenizer),c=l.takeFirstTokens(o,IRe);c.tokens.length>0&&100*ERe(c.tokens,l.takeFirstTokens(r,IRe).tokens)?.score<(t.suffixMatchThreshold??$M)*c.tokens.length&&(a=r)}return a!==r&&n(a),Br(hl,{children:a})}s(LU,"AfterCursor");function TRe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0);e.useData(vd,u=>{let d=u.document;(u.document.uri!==r?.uri||d.getText()!==r?.getText())&&n(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&l(u.maxPromptTokens)});let c=qie(a);return Br(l2,{document:r,position:i,maxCharacters:c})}s(TRe,"DocumentPrefix");function wRe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(vd,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=qie(a);return Br(LU,{document:r,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})}s(wRe,"DocumentSuffix");f();var FU=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return c+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let l=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-l.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,r,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=r&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=r)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=n.takeLastTokens(a.line,r);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(l)}return[o,i]}};function Wie(t){return t.map(e=>e.elidedValue).join("")}s(Wie,"makePrompt");function SRe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(SRe,"makePrefixPrompt");function RRe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(RRe,"makeContextPrompt");var MU=class{constructor(e="[...]",r=`
`,n=!1,i=60){this.ellipsis=e;this.delimiter=r;this.turnOffChunks=n;this.beforeCursorLines=i}static{s(this,"ElidableTextElision")}elide(e,r,n,i,o){let a;if(n.value.length===0||i<=o.tokenLength(this.ellipsis))a=[],r=r+Math.max(0,i);else{let h=_Re([n],o).elide(i,this.ellipsis,!0,"removeLeastDesirable",o,"bottomToTop");r=r+Math.max(0,i-o.tokenLength(h.getText())),a=h.getLines()}let c=_Re(e.map(m=>this.turnOffChunks?{...m,chunks:void 0}:m),o,this.beforeCursorLines).elide(r),u=r-o.tokenLength(c.getText()),d=[...c.getLines(),...a];return{cycles:1,blocks:[n,...e].map(m=>{let h=d.filter(g=>g.metadata?.get("componentPath")===m.componentPath);if(h.length===0&&m.type!=="prefix")return{...m,tokens:o.tokenLength(m.value),elidedValue:"",elidedTokens:0};{let g=h.map(y=>y.text).join(this.delimiter);return m.type==="prefix"&&u>0&&(g.trim()===this.ellipsis||g.trim()==="")?g=this.ellipsis+this.delimiter+o.takeLastTokens(m.value,u-o.tokenLength(this.ellipsis+this.delimiter)).text:m.type==="context"&&(g=g.endsWith(this.delimiter)?g:g+this.delimiter),{...m,tokens:o.tokenLength(m.value),elidedValue:g,elidedTokens:o.tokenLength(g)}}})}}},kRe=(r=>(r.componentPath="componentPath",r[r.chunk=k8]="chunk",r))(kRe||{});function _Re(t,e,r=0){return new _t(t.map(i=>{let o=new Map([["componentPath",i.componentPath],[kRe.chunk,i.chunks]]);if(i.isCode){let a=new _t([[Su(i.value,!0,!0,o,e),i.expElidableTextWeight]]);if(i.type==="prefix"&&r>0){let l=a.lines.length;for(let c=0;c<Math.min(r,l);c++)a.lines[l-1-c].setValue(1)}return a}return new _t([[i.value,i.expElidableTextWeight]],o,e)}),void 0,e)}s(_Re,"prepareWeightedBlocks");var QU=class{constructor(e,r="o200k_base",n){this.delegate=e;this.approximateTokenizer=new BM(r,n)}static{s(this,"ApproximateElision")}elide(e,r,n,i,o){let{blocks:[a,...l]}=this.delegate.elide(e,r,n,i,this.approximateTokenizer),c=Wie(l);if(o.tokenLength(c+a.elidedValue)>r+i){let{blocks:d}=this.delegate.elide(e,r,n,i,o);return{blocks:d,cycles:2}}else return{blocks:[a,...l],cycles:1}}};f();var R5=class{constructor(e,r=Gie()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((l,c)=>c(e,r,l),{...i});if(n(e,r,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,n,o)}};function Gie(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{r.expElidableTextWeight===void 0&&(r.expElidableTextWeight=1);let n=t.props?.expElidableTextWeight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,expElidableTextWeight:i*r.expElidableTextWeight}},(t,e,r)=>{if(t.name===yv.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r,(t,e,r)=>t.name===Av.name?{...r,isCode:!0}:r]}s(Gie,"defaultTransformers");f();var yP={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Hie={};for(let[t,e]of Object.entries(yP))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Hie[r]=t;else Hie[t]=t;function PRe(t){return Hie[t]}s(PRe,"mdCodeBlockLangToLanguageId");var lgt={start:"//",end:""},cgt=["php","plaintext"],jie={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function DRe(t){return Object.values(jie).includes(t.trim())}s(DRe,"isShebangLine");function ugt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(ugt,"hasLanguageMarker");function dgt(t,e){let r=yP[e]?yP[e].lineComment:lgt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(dgt,"comment");function OU(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>dgt(o,e)).join(`
`);return r?i+`
`:i}s(OU,"commentBlockAsSingles");function NRe(t){let{languageId:e}=t;return cgt.indexOf(e)===-1&&!ugt(t)?e in jie?jie[e]:`Language: ${e}`:""}s(NRe,"getLanguageMarker");function LRe(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(LRe,"getPathMarker");function CP(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(CP,"newLineEnded");function FRe(t){return BRe(typeof t=="string"?t:"plaintext")}s(FRe,"getLanguage");function BRe(t){return yP[t]!==void 0?{languageId:t,...yP[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(BRe,"_getLanguage");var fgt=5,k5=class{constructor(){this.renderId=0;this.formatPrefix=Wie}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",l=r.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),[g,y]=mgt(r),{blocks:[v,...b],cycles:E}=g.elide(c,p,u,m,Bo(l)),_=performance.now(),k=this.formatPrefix(b),B=this.formatContext?this.formatContext(b):void 0,N=v.elidedValue,W=b.reduce((ee,me)=>ee+me.elidedTokens,0);return d.push(...pgt([...b,v])),{prefix:k,prefixTokens:W,suffix:N,suffixTokens:v.elidedTokens,context:B,status:"ok",metadata:{renderId:i,rendererName:"completions",tokenizer:l,elisionStrategy:y,elisionCycles:E,elisionTimeMs:_-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((ee,me)=>ee+(me.updateDataTimeMs??0),0),status:"ok"}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-fgt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],l=!1;if(new R5(e,Vie).walkSnapshot((d,p,m)=>{if(d===e||(d.name===AP.name&&(l=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode;if(m.type==="suffix")o.push({value:xP(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let y=d.value.endsWith(r)?d.value:d.value+r,v=y;m.type==="prefix"?v=d.value:DRe(d.value)?v=y:v=OU(y,n),i.push({type:m.type==="prefix"?"prefix":"context",value:xP(v),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g})}return!0}),!l)throw new Error(`Node of type ${AP.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Vie=[...Gie(),(t,e,r)=>PU(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===l2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===LU.name?{...r,type:"suffix"}:r];function pgt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(pgt,"computeComponentStatistics");function xP(t){return t.replace(/\r\n?/g,`
`)}s(xP,"normalizeLineEndings");function mgt(t){let e=t.elisionStrategy,r=t.elisionStrategy==="wishlist"?new FU:new MU(t.ellipsis,t.delimiter,t.elisionStrategy==="elidableTextWithoutChunks",t.beforeCursorLines);return t.approximateElision?[new QU(r,t.tokenizer,t.languageId),"approximate"+bRe(e)]:[r,e]}s(mgt,"chooseElisionStrategy");f();var UU=s((t,e)=>{let[r,n]=e.useState();if(e.useData(vd,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(Dr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},l=i.findNotebook(r);return a.relativePath&&!l?Br(hgt,{docInfo:a}):Br(ggt,{docInfo:a})}},"DocumentMarker"),hgt=s(t=>Br(hl,{children:LRe(t.docInfo)}),"PathMarker"),ggt=s(t=>Br(hl,{children:NRe(t.docInfo)}),"LanguageMarker");f();f();f();f();function vP(t,e="Unreachable"){throw new Error(e)}s(vP,"assertNever");function Ul(t,e="unexpected state"){if(!t)throw new An(`Assertion Failed: ${e}`)}s(Ul,"assert");function Nu(t){if(!t()){debugger;t(),n5(new An("Assertion Failed"))}}s(Nu,"assertFn");function Cv(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(Cv,"checkAdjacentItems");f();f();f();f();f();var H1=s((t,e)=>t===e,"strictEquals");f();var Lu=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return URe(e,this)}},MRe=new Map,$ie=new WeakMap;function URe(t,e){let r=$ie.get(t);if(r)return r;let n=Agt(t,e);if(n){let i=MRe.get(n)??0;i++,MRe.set(n,i);let o=i===1?n:`${n}#${i}`;return $ie.set(t,o),o}}s(URe,"getDebugName");function Agt(t,e){let r=$ie.get(t);if(r)return r;let n=e.owner?Cgt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=qU(a),i!==void 0))return n+i;if(e.owner!==void 0){let l=ygt(e.owner,t);if(l!==void 0)return n+l}}s(Agt,"computeDebugName");function ygt(t,e){for(let r in t)if(t[r]===e)return r}s(ygt,"findKey");var QRe=new Map,ORe=new WeakMap;function Cgt(t){let e=ORe.get(t);if(e)return e;let r=xgt(t),n=QRe.get(r)??0;n++,QRe.set(r,n);let i=n===1?r:`${r}#${n}`;return ORe.set(t,i),i}s(Cgt,"formatOwner");function xgt(t){let e=t.constructor;return e?e.name:"Object"}s(xgt,"getClassName");function qU(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(qU,"getFunctionName");f();var c2;function GU(t){c2?c2 instanceof WU?c2.loggers.push(t):c2=new WU([c2,t]):c2=t}s(GU,"addLogger");function Ms(){return c2}s(Ms,"getLogger");var zie;function qRe(t){zie=t}s(qRe,"setLogObservableFn");function WRe(t){zie&&zie(t)}s(WRe,"logObservable");var WU=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var GRe;function HRe(t){GRe=t}s(HRe,"_setRecomputeInitiallyAndOnChange");var jRe;function VRe(t){jRe=t}s(VRe,"_setKeepObserved");var Yie;function $Re(t){Yie=t}s($Re,"_setDerivedOpts");var HU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return Yie({owner:n,debugName:s(()=>{let o=qU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return Yie({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(GRe(this,r)),this}keepObserved(e){return e.add(jRe(this)),this}get debugValue(){return this.get()}},xv=class extends HU{constructor(){super();this.observers=new Set;Ms()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Ms()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Ms()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Ms();return WRe(this),r||Ms()?.handleObservableCreated(this),this}};function VU(t,e){let r=new B5(t,e);try{t(r)}finally{r.finish()}}s(VU,"transaction");function Kie(t,e,r){t?e(t):VU(e,r)}s(Kie,"subtransaction");var B5=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Ms()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():qU(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Ms()?.handleEndTransaction(this)}};function Nm(t,e){let r;return typeof t=="string"?r=new Lu(void 0,t,void 0):r=new Lu(t,void 0,void 0),new jU(r,e,H1)}s(Nm,"observableValue");var jU=class extends xv{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,Ms()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new B5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),Ms()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)n.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function u2(t){return new P5(new Lu(void 0,void 0,t),t,void 0,void 0)}s(u2,"autorun");function Jie(t,e){return new P5(new Lu(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Jie,"autorunOpts");function $U(t,e){return new P5(new Lu(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s($U,"autorunHandleChanges");function Xie(t,e){let r=new Bu,n=$U({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return Sa(()=>{n.dispose(),r.dispose()})}s(Xie,"autorunWithStoreHandleChanges");function Zie(t){let e=new Bu,r=Jie({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return Sa(()=>{r.dispose(),e.dispose()})}s(Zie,"autorunWithStore");var P5=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Ms()?.handleAutorunCreated(this),this._runIfNeeded(),a5(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ms()?.handleAutorunDisposed(this),l5(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Ms()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){e2(n)}finally{this._isRunning=!1}}}finally{this.disposed||Ms()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Nu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Ms()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){e2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new An("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=P5)(u2||={});f();function zU(t,e){return new d2(new Lu(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??H1)}s(zU,"derivedOpts");$Re(zU);var d2=class extends xv{constructor(r,n,i,o,a=void 0,l){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Ms()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){e2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new An("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Nu(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Ms()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){e2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new An("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function eoe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new vv(new Lu(e,void 0,n),r,n,()=>vv.globalTransaction,H1)}s(eoe,"observableFromEvent");var vv=class extends xv{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,Kie(this._getTransaction(),l=>{Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=vv;function e(n,i){let o=!1;vv.globalTransaction===void 0&&(vv.globalTransaction=n,o=!0);try{i()}finally{o&&(vv.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(eoe||={});function YRe(t){let e=new YU(!1,void 0);return t.addObserver(e),Sa(()=>{t.removeObserver(e)})}s(YRe,"keepObserved");VRe(YRe);function KRe(t,e){let r=new YU(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),Sa(()=>{t.removeObserver(r)})}s(KRe,"recomputeInitiallyAndOnChange");HRe(KRe);var YU=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function ep(t,e,r,n){let i=new KU(r,n);return zU({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new KU(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(ep,"mapObservableArrayCached");var KU=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let l=new Bu;a={out:this._map(i,l),store:l},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function toe(t,e){let r;return Xie({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(toe,"runOnChange");f();f();f();var JU;function JRe(t){JU||(JU=new EP,GU(JU)),JU.addFilteredObj(t)}s(JRe,"logObservableToConsole");var EP=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return vgt([D5(Igt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[D5(" "),tp(bP(e.oldValue,70),{color:"red",strikeThrough:!0}),D5(" "),tp(bP(e.newValue,60),{color:"green"})]:[D5(" (unchanged)")]:[D5(" "),tp(bP(e.newValue,60),{color:"green"}),D5(" (initial)")]}handleObservableCreated(e){if(e instanceof d2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=l=>(i.push(l),o.apply(r,[l]));let a=r.endUpdate;r.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",r.debugName,l.debugName),i.splice(c,1),a.apply(r,[l])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof d2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([N5("observable value changed"),tp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return tp(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([N5("derived recomputed"),tp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("derived cleared"),tp(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("observable from event triggered"),tp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("autorun"),tp(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("transaction"),tp(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function vgt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(vgt,"consoleTextToArgs");function D5(t){return tp(t,{color:"black"})}s(D5,"normalText");function N5(t){return tp(Tgt(`${t}: `,10),{color:"black",bold:!0})}s(N5,"formatKind");function tp(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(tp,"styled");function bP(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?bgt(t,e):Egt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(bP,"formatValue");function bgt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${bP(i,e-r.length)}`}return r+=" ]",r}s(bgt,"formatArray");function Egt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${bP(o,e-r.length)}`}return r+=" }",r}s(Egt,"formatObject");function Igt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(Igt,"repeat");function Tgt(t,e){for(;t.length<e;)t+=" ";return t}s(Tgt,"padStr");qRe(JRe);var wgt=!1;wgt&&GU(new EP);f();var f2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(f2||={});f();f();var kt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new An(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new An(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new An(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};f();var tn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=r.startLineNumber,c=r.startColumn,u=r.endLineNumber,d=r.endColumn;return n<l?(n=l,i=c):n===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new tn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new tn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=r.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=r.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new p2(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new p2(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new An("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new An(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new kt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},p2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=ZI(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=I0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=L1(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=L1(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[n],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,n++):(a=c,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=ZI(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=I0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&r.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var ql=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new tn(e.lineNumber,e.column+this.columnCount):new tn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Wl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new roe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Rg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},roe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=I0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new tn(n,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return ql.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new ql(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Lm=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var XU=class extends Ho{constructor(r,n,i,o,a,l){super();this.id=r;this.workspaceRoot=l;this.value=Nm(this,n),this.selection=Nm(this,i),this.languageId=Nm(this,o),this._register(Sa(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};f();f();function j1(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return $U({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=n.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}r(a)})}s(j1,"autorunWithChanges");f();var kg=class extends Ho{static{s(this,"RecentEditsProvider")}};function _gt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(_gt,"editIsTooCloseToCursor");var ZU=s((t,e)=>{let[r,n]=e.useState();return e.useData(vd,async i=>{if(!i.document)return;let o=t.ctx.get(kg);if(o.isEnabled())o.start();else return;let a=o.config,l=o.getRecentEdits(),c=new Set,u=t.ctx.get(Dr),d=[];for(let m=l.length-1;m>=0&&!(d.length>=a.maxEdits);m--){let h=l[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!c.has(h.file);if(c.size+(g?1:0)>a.maxFiles)break;let v=h.file===i.document?.uri,b=v?i.position.line:void 0;if(_gt(h,v,b,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(h);if(_){c.add(h.file);let k=u.getRelativePath({uri:h.file});d.unshift(CP(`File: ${k}`)+CP(_))}}if(d.length===0){n(void 0);return}let p=CP("These are recently edited files. Do not suggest code that has been deleted.")+d.join("")+CP("End of recent edits");n(p)}),r?Br(yv,{children:Br(hl,{children:r})}):void 0},"RecentEdits");f();f();f();f();var noe=new nn;function XRe(t){return[...t].sort((e,r)=>{let n=noe.get(e.uri)??0;return(noe.get(r.uri)??0)-n})}s(XRe,"sortByAccessTimes");var ZRe=s(t=>t.get(Dr).onDidFocusTextDocument(e=>{e&&noe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var eq=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>m2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&r.startsWith("file:")&&l.uri!==r&&tq(n,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(XRe(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function e3e(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(e3e,"shortCircuit");f();function Rgt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(Rgt,"defaultHash");function ioe(t,e={}){let{hash:r=Rgt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw n.delete(o),l})),n.set(o,a),a}}s(ioe,"memoize");var t3e={entries:[],traits:[]},rq={entries:new Map,traits:[]},ooe=class extends nn{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},gl=new Tt("relatedFiles"),kgt=1e3,nq=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},h2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{gl.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){gl.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){gl.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){gl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(po).readFileString(e)}catch(r){gl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Kc).evaluate(e,r)).isBlocked}catch(n){gl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},Bgt=3,r3e=new ooe(kgt);async function n3e(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(c){gl.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(r3e.bumpRetryCount(e.uri)>=Bgt?a=rq:a=void 0);let l=performance.now()-o;if(gl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new nq;return a}s(n3e,"getRelatedFiles");var soe=ioe(n3e,{cache:r3e,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});soe=e3e(soe,200,rq);async function iq(t,e,r,n,i,o=!1){let a=t.get(h2),l=rq;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await n3e(t,c,r,n,a):await soe(t,c,r,n,a)}catch(c){l=rq,c instanceof nq&&Bt(t,"getRelatedFilesList",r)}return gl.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(iq,"getRelatedFilesAndTraits");function tq(t,e){return p8(t)===p8(e)}s(tq,"considerNeighborFile");var m2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,l){let c=e.get(Dr);t.instance===void 0&&(t.instance=new eq(c));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(Pgt(e,i))return u;let d=await c.getTextDocument({uri:r});if(!d)return gl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=c.getWorkspaceFolder(d);if(!p)return gl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await iq(e,d,i,o,a,l);return m.entries.size===0?(gl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function Pgt(t,e){return t.get(Rt).excludeRelatedFiles(e)||Gi(t,Pt.ExcludeRelatedFiles)}s(Pgt,"isExcludeRelatedFilesActive");function i3e(t,e){return t.get(Rt).includeNeighboringFiles(e)||Gi(t,Pt.IncludeNeighboringFiles)}s(i3e,"isIncludeNeighborFilesActive");var oq=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(vd,async c=>{c.document.uri!==r?.uri&&o([]),n(c.document);let u=m2.defaultEmptyResult();c.turnOffSimilarFiles||(u=await m2.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data));let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=sq(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...oRe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||kU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(Dr).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await lRe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),Br(Dm,{children:[...i.map((c,u)=>Br(Dgt,{snippet:c}))]})},"SimilarFiles"),Dgt=s((t,e)=>Br(yv,{children:[Br(hl,{expElidableTextWeight:1,children:t.snippet.headline}),Br(Av,{expElidableTextWeight:.99,children:t.snippet.snippet})]}),"SimilarFile");f();f();var aq=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(vd,a=>{a.traits!==r&&n(a.traits);let l=p8(a.document.detectedLanguageId);l!==i&&o(l)}),!(!r||r.length===0||!i))return Br(Dm,{children:[Br(hl,{expElidableTextWeight:1,children:`Consider this related information:
`}),...r.map(a=>Br(hl,{source:a,expElidableTextWeight:.99,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function o3e(t,e){return Gi(t,Pt.UseSplitContextPrompt)??t.get(Rt).enablePromptContextProxyField(e)}s(o3e,"shouldUseSplitContextPrompt");function s3e(t){return Br(Dm,{children:[Br(Pie,{children:[Br(UU,{ctx:t,weight:.7,expElidableTextWeight:.99}),Br(aq,{weight:.6,expElidableTextWeight:.5}),Br(BU,{ctx:t,weight:.9,expElidableTextWeight:.7}),Br(oq,{ctx:t,weight:.8,expElidableTextWeight:.6})]}),Br(wRe,{weight:1,expElidableTextWeight:1}),Br(Die,{children:Br(ZU,{ctx:t,weight:.99,expElidableTextWeight:.9})}),Br(TRe,{weight:1,expElidableTextWeight:1})]})}s(s3e,"splitContextCompletionsPrompt");f();var a3e=0;function Ngt(){a3e=0}s(Ngt,"resetContextIndex");function Lgt(){return a3e++}s(Lgt,"getNextContextIndex");var lq=class extends k5{constructor(){super(...arguments);this.formatPrefix=SRe;this.formatContext=RRe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],l=!1;if(Ngt(),new R5(r,Fgt).walkSnapshot((d,p,m)=>{if(d===r||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===l2.name&&(l=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode,y=m.type;if(y==="suffix")o.push({value:xP(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let v=y==="prefix",b=v||d.value.endsWith(n)?d.value:d.value+n;i.push({type:v?"prefix":"context",value:xP(b),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g,index:v?void 0:m.index})}return!0}),!l)throw new Error(`Node of type ${l2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Fgt=[...Vie,(t,e,r)=>PU(t)?{...r,index:Lgt()}:r];f();function l3e(t,e,r){let n=xU(r,"Trait");for(let o of n)Mgt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(l3e,"getTraitsFromContextItems");function Mgt(t,e,r,n){let i=t.get(Ol).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(Mgt,"setupExpectationsForTraits");var Qgt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function c3e(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let c of r){let u=Qgt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return Bt(e,t,l)}}s(c3e,"ReportTraitsTelemetry");f();f();f();var cq=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},uq=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var dq=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(Ogt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,l=new loe(this.getOrCreateLifecycleData(a)),c=i(n.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:l}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new aoe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},aoe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},loe=class{constructor(e){this.lifecycleData=e;this.stateHook=new cq(e.state),this.dataHook=new uq(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function Ogt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(Ogt,"isFragmentFunction");var IP=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new dq(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};var Fm=class{static{s(this,"CompletionsPromptFactory")}};function fq(t,e,r){return new uoe(new doe(new foe(t,e,r)))}s(fq,"createCompletionsPromptFactory");var uoe=class extends Fm{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return L5;try{return await this.delegate.prompt(r,n)}catch{return poe}}},Ugt=1200,doe=class extends Fm{constructor(r){super();this.delegate=r}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(r,n){let i=new _n.CancellationTokenSource,o=i.token;return n?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(r,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(h3e)},Ugt)})])}};function vd(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(vd,"isCompletionRequestData");var coe={default:{promptFunction:u3e,renderer:k5},splitContext:{promptFunction:s3e,renderer:lq}};function u3e(t){return Br(Dm,{children:[Br(Bie,{children:[Br(UU,{ctx:t,weight:.7,expElidableTextWeight:.99}),Br(aq,{weight:.6,expElidableTextWeight:.5}),Br(BU,{ctx:t,weight:.9,expElidableTextWeight:.7}),Br(oq,{ctx:t,weight:.8,expElidableTextWeight:.6}),Br(ZU,{ctx:t,weight:.99,expElidableTextWeight:.9})]}),Br(AP,{weight:1,expElidableTextWeight:1})]})}s(u3e,"defaultCompletionsPrompt");var foe=class extends Fm{constructor(r,n,i){super();this.ctx=r;this.promptOrdering=i??"default",this.virtualPrompt=n??new IP(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(r,n){try{return await this.createPromptUnsafe(r,n)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:r,completionState:n,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=sq(this.ctx,i,n.textDocument.detectedLanguageId),d=await this.failFastPrompt(n.textDocument,n.position,c,a);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:v}=await this.resolveContext(r,n,i,a,o);if(await this.updateComponentData(n.textDocument,n.position,h,g,i,y,l,a,o,u,o?.tokenizer),a?.isCancellationRequested)return L5;let b=this.virtualPrompt.snapshot(a),E=b.status;if(E==="cancelled")return L5;if(E==="error")return this.errorPrompt(b.error);let _=this.renderer.render(b.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l,suffixPercent:c,elisionStrategy:this.ctx.get(Rt).completionsElisionStrategy(i),approximateElision:this.ctx.get(Rt).approximateElision(i),languageId:n.textDocument.detectedLanguageId,beforeCursorLines:this.ctx.get(Rt).beforeCursorLines(i)},a);if(_.status==="cancelled")return L5;if(_.status==="error")return this.errorPrompt(_.error);let[k,B]=F5(_.prefix),N={..._,prefix:k},W;if(Iie(this.ctx,i)){let me=z4e(_.metadata.componentStatistics);this.ctx.get(Ol).getStatisticsForCompletion(r).computeMatch(me),W=K4e(this.ctx,r,v),on.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(W)}'`)}let ee=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,ee,m,B,W)}async updateComponentData(r,n,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(r,n,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(r,n,i,o,a={}){let l=[],c,u,d=!1;if(Iie(this.ctx,i)){l=await this.ctx.get(Zf).resolution(r);let{textDocument:p}=n,m=l.filter(J4e);qgt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=l3e(this.ctx,r,m),c3e("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await pRe(this.ctx,r,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(r,n,i,o){if(o?.isCancellationRequested)return L5;if((await this.ctx.get(Kc).evaluate(r.uri,r.getText(),"UPDATE")).isBlocked)return m3e;if((i>0?r.getText().length:r.offsetAt(n))<f3e)return p3e}createRequestData(r,n,i,o,a,l,c,u,d,p,m){return{document:r,position:n,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(r){r.prefix.length===0&&r.suffix.length===0&&this.reset()}successPrompt(r,n,i,o,a){return{type:"prompt",prompt:{prefix:r.prefix,prefixTokens:r.prefixTokens,suffix:r.suffix,suffixTokens:r.suffixTokens,context:r.context,isFimEnabled:r.suffix.length>0},computeTimeMs:n-i,trailingWs:o,neighborSource:new Map,metadata:r.metadata,contextProvidersTelemetry:a}}errorPrompt(r){return Ta(this.ctx,r,"PromptComponents.CompletionsPromptFactory"),this.reset(),poe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new IP(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(r){this.promptOrdering!==r&&(this.promptOrdering=r,this.reset())}completionsPrompt(){return(coe[this.promptOrdering]?.promptFunction??u3e)(this.ctx)}getRenderer(){let r=coe[this.promptOrdering]??coe.default;return new r.renderer}};function qgt(t,e,r,n){let i=["cpp","c"];return i3e(t,n)||i.includes(e)||!r.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(qgt,"similarFilesEnabled");async function d3e(t){try{await Tte}catch(e){E5(t,e,"initializeTokenizers")}}s(d3e,"waitForTokenizers");var f3e=10,p3e={type:"contextTooShort"},m3e={type:"copilotContentExclusion"},poe={type:"promptError"},L5={type:"promptCancelled"},h3e={type:"promptTimeout"};function F5(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(F5,"trimLastLine");function M5(t,e,r,n,i,o={}){let l=t.get(Dr).findNotebook(r.textDocument),c=l?.getCellFor(r.textDocument);l&&c&&(r=Ggt(r,l,c)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=o3e(t,n);return t.get(Fm).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(M5,"extractPrompt");function Wgt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:OU(n,e)}s(Wgt,"addNeighboringCellsToPrompt");function Ggt(t,e,r){let i=e.getCells().filter(l=>l.index<r.index&&tq(r.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>Wgt(l,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(Ggt,"applyEditsForNotebook");function sq(t,e,r){let i=t.get(Rt).maxPromptCompletionTokens(e)-pU(t),o=dRe(e,r),a=kU(t,e,r),l=t.get(Rt).suffixPercent(e),c=t.get(Rt).suffixMatchThreshold(e);if(l<0||l>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${l}`);if(c<0||c>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${c}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:l,suffixMatchThreshold:c}}s(sq,"getPromptOptions");f();f();var g3e=2.98410452738298,A3e=-.838732736843507,y3e=1.50314646255716,C3e=-.237798634012662,pq={python:.314368072478742},x3e={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var Hgt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function jgt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(jgt,"linearInterpolation");var Q5=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},moe=class{constructor(e,r,n){this.link=Hgt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return jgt(n,this.logitsToQuantiles)}},v3e=new moe(g3e,[new Q5("compCharLen",A3e,t=>Math.log(1+t)),new Q5("meanLogProb",y3e),new Q5("meanAlternativeLogProb",C3e)].concat(Object.entries(pq).map(t=>new Q5(t[0],t[1]))),x3e);function b3e(t,e){let r={...e.measurements};return Object.keys(pq).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),v3e.predict(t,r)}s(b3e,"ghostTextScoreConfidence");function E3e(t,e){let r={...e.measurements};return Object.keys(pq).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),v3e.quantile(t,r)}s(E3e,"ghostTextScoreQuantile");f();f();var Vgt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function mq(t){let e=t.slice();return e.reverse(),I3e(e)||I3e(e.filter(r=>r.trim().length>0))}s(mq,"isRepetitive");function I3e(t){let e=$gt(t);for(let r of Vgt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(I3e,"isRepeatedPattern");function $gt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s($gt,"kmp_prefix_function");function zgt(t,e,r,n){let i="}";try{i=lTe(e.detectedLanguageId)??"}"}catch{}return Ygt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(zgt,"maybeSnipCompletion");function Ygt(t,e,r,n){let i=Kgt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return r}s(Ygt,"maybeSnipCompletionImpl");function Kgt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(Kgt,"splitByNewLine");function Jgt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(Jgt,"matchesNextLine");function TP(t,e,r,n,i,o){if(mq(n.tokens)){let l=rn.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Bt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(Jgt(e,r,a.completionText,!i)){let l=rn.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Bt(t,"completion.alreadyInDocument",l),Bt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=zgt(t,e,r,a.completionText),a.completionText?a:void 0}s(TP,"postProcessChoiceInContext");function T3e(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=r.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(T3e,"checkSuffix");var R3e=je(vx());var co=new Tt("ghostText");var Zgt=200,w3e=20;async function k3e(t,e,r,n,i,o,a){co.debug(t,`Getting ${o} from network`),r=r.extendedBy();let l=e.isCycling?3:1,c=y5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:dTe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=Gi(t,Pt.ModelAlwaysTerminatesSingleline)??t.get(Rt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&Pm.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(xd).fetchAndStreamCompletions(t,y,r,i,n);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Xs(r)}:v.type==="canceled"?(co.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:Tg(r)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Fc(y))return{type:"canceled",reason:"network request aborted",telemetryData:Tg(r,{cancelledNetworkRequest:!0})};if(co.exception(t,y,"Error on ghost text request"),t.get(Iu).notifyUser(t,y),N_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Xs(r)}}}s(k3e,"genericGetCompletionsFromNetwork");function hoe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return e.requestForNextLine&&(t.completionText=`
`+t.completionText),t}s(hoe,"postProcessChoices");async function eAt(t,e,r,n,i){return k3e(t,e,r,n,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return co.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Xs(r)};if(n?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:Tg(r)};let d=u.value;if(d===void 0)return co.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Xs(r)};P3e(t,"performance",d,o,a),co.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=hoe(d,e);p&&(hq(t,e,p),co.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;co.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=hoe(g,e,h);y&&(h.push(y),hq(t,e,y))}})();return tm(t)&&await m,p?{type:"success",value:[goe(p,{forceSingleLine:!1}),m],telemetryData:Xs(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Xs(r)}})}s(eAt,"getCompletionsFromNetwork");async function tAt(t,e,r,n,i){return k3e(t,e,r,n,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(n?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:Tg(r)};let d=hoe(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)hq(t,e,u);P3e(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:Xs(r),telemetryBlob:r,resultType:3}})}s(tAt,"getAllCompletionsFromNetwork");function goe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(goe,"makeGhostAPIChoice");function _3e(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(_3e,"takeNLines");async function rAt(t,e,r,n,i,o,a,l,c,u,d){let p=t.get(Rt).multilineAfterAcceptLines(d),m=t.get(Em).forLanguage(t,e.textDocument.detectedLanguageId,d);switch(m){case"server":return a&&u?{blockMode:"parsing",requestMultiline:!0,finishedCb:_3e(p),stop:[`

`],maxTokens:w3e*p}:{blockMode:"server",requestMultiline:!0,finishedCb:s(h=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let h;try{h=await uAt(t,m,e.textDocument,e.position,o,l,c,n)}catch{h={requestMultiline:!1}}if(!a&&h.requestMultiline&&t.get(Rt).singleLineUnlessAccepted(d)&&(h.requestMultiline=!1),h.requestMultiline){let g;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?g=jo.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):g=e.position,{blockMode:m,requestMultiline:!0,...S3e(t,m,e.textDocument,g,h.blockPosition,r,c,!0,n.prompt,d)}}if(a&&(u||m==="moremultiline")){let g={blockMode:"parsing",requestMultiline:!0,finishedCb:_3e(p),stop:[`

`],maxTokens:w3e*p};return m==="moremultiline"&&(g.blockMode="moremultiline"),g}return{blockMode:m,requestMultiline:!1,...S3e(t,m,e.textDocument,e.position,h.blockPosition,r,c,!1,n.prompt,d)}}}}s(rAt,"getGhostTextStrategy");function S3e(t,e,r,n,i,o,a,l,c,u){if(l&&e==="moremultiline"&&Pm.isSupported(r.detectedLanguageId)){let d=i==="empty-block"||i==="block-end"?t.get(Rt).longLookaheadSize(u):t.get(Rt).shortLookaheadSize(u);return{finishedCb:new mU(t,o,r.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:o+m,prompt:{...c,prefix:c.prefix+m}};hq(t,g,h)}).getFinishedCallback(),maxTokens:Zgt}}return{finishedCb:l?dP(t,r,n,a):d=>{}}}s(S3e,"buildFinishedCallback");var nAt={isCycling:!1,promptOnly:!1,isSpeculative:!1};async function iAt(t,e,r,n,i,o){let a=n.issuedTime,l=[];function c(b){let E=Ks();l.push([b,E-a]),a=E}s(c,"recordPerformance"),c("telemetry");let u=t.get(Rt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Xs(n)};let d=sAt(e.textDocument,e.position);if(d===void 0)return co.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Xs(n)};let p=i,m=new _n.CancellationTokenSource;i=m.token;let h=Yx(t,n),g={...nAt,...o,tokenizer:h.tokenizer},y=await M5(t,r,e,n,i,g);return c("prompt"),y.type==="copilotContentExclusion"?(co.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Xs(n)}):y.type==="contextTooShort"?(co.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Xs(n)}):y.type==="promptError"?(co.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Xs(n)}):g.promptOnly?{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y}:y.type==="promptCancelled"?(co.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Xs(n)}):y.type==="promptTimeout"?(co.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Xs(n)}):y.prompt.prefix.length===0&&y.prompt.suffix.length===0?(co.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Xs(n)}):i?.isCancellationRequested?(co.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:Xs(n)}):t.get(Ji).withProgress(async()=>{let[b]=F5(e.textDocument.getText(jo.range(jo.position(0,0),e.position))),E=u.triggerCompletionAfterAccept(n),_=t.get(bd).hasAcceptedCurrentCompletion(b,y.prompt.suffix),k=Gi(t,Pt.MultilineAfterAccept)??u.enableMultilineAfterAccept(n),B=(Gi(t,Pt.AlwaysRequestMultiline)??u.enableProgressiveReveal(n))&&Pm.isSupported(e.textDocument.detectedLanguageId),N=E&&!k&&!B?_:void 0,W=y.prompt;N&&(y.prompt={...y.prompt,prefix:y.prompt.prefix+`
`});let ee=await rAt(t,e,b,y,g.isCycling,d,_,g.isSpeculative,N??!1,k,n);if(c("strategy"),i?.isCancellationRequested)return co.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:Xs(n)};let me=oAt(t,b,W,ee.requestMultiline);c("cache");let ae=Kx(t,e.textDocument.uri),H={blockMode:ee.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:ae,engineModelId:h.modelId,ourRequestId:r,prefix:b,prompt:y.prompt,multiline:ee.requestMultiline,indentation:fP(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,requestForNextLine:N,stop:ee.stop,maxTokens:ee.maxTokens};H.headers={...H.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let U=hAt(t,e.textDocument,H,e.position,y,n,h,g);if(me===void 0&&!g.isCycling&&t.get(yd).shouldWaitForAsyncCompletions(b,y.prompt)){let ue=await t.get(yd).getFirstMatchingRequestWithTimeout(r,b,y.prompt,g.isSpeculative,U);if(c("asyncWait"),ue){let he=!ee.requestMultiline;me=[[goe(ue[0],{forceSingleLine:he})],4]}if(p?.isCancellationRequested)return co.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Xs(U)}}let le=ee.blockMode==="moremultiline"&&Pm.isSupported(e.textDocument.detectedLanguageId);if(me!==void 0&&(me[0]=me[0].map(ue=>TP(t,e.textDocument,e.position,ue,le,co)).filter(ue=>ue!==void 0)),me!==void 0&&me[0].length===0)return co.debug(t,`Found empty inline suggestions locally via ${C5(me[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Xs(U)};if(me!==void 0&&me[0].length>0&&(!g.isCycling||me[0].length>1))co.debug(t,`Found inline suggestions locally via ${C5(me[1])}`);else{if(g.isCycling){let ue=await tAt(t,H,U,i,ee.finishedCb);if(ue.type==="success"){let he=me?.[0]??[];ue.value[0].forEach(Ne=>{he.findIndex(Se=>Se.completionText.trim()===Ne.completionText.trim())===-1&&he.push(Ne)}),me=[he,3]}else if(me===void 0)return ue}else{if(i?.isCancellationRequested)return co.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:Tg(U)};let he=eAt(t,H,U,i,s((Se,Je)=>(t.get(yd).updateCompletion(r,Se),ee.finishedCb(Se,Je)),"finishedCb"));t.get(yd).queueCompletionRequest(r,b,y.prompt,m,he);let Ne=await t.get(yd).getFirstMatchingRequest(r,b,y.prompt,g.isSpeculative);if(Ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Xs(U)};me=[[Ne[0]],4]}c("network")}if(me===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Xs(U)};let[ie,V]=me,O=ie.map(ue=>TP(t,e.textDocument,e.position,ue,le,co)).filter(ue=>ue!==void 0),Y=[];for(let ue of O){let he=mAt(t,e.textDocument,H,ue,U),Ne=d?T3e(e.textDocument,e.position,ue):0,Je={completion:dAt(ue.choiceIndex,ue.completionText,y.trailingWs),telemetry:he,isMiddleOfTheLine:d,suffixCoverage:Ne,copilotAnnotations:ue.copilotAnnotations};Y.push(Je)}if(p?.isCancellationRequested)return co.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:Tg(U)};U.properties.clientCompletionId=Y?.[0]?.telemetry?.properties.clientCompletionId,U.measurements.foundOffset=Y?.[0]?.telemetry?.measurements?.foundOffset??-1,co.debug(t,`Produced ${Y.length} results from ${C5(V)} at ${U.measurements.foundOffset} offset`);let te=Gi(t,Pt.CompletionsDelay)??u.completionsDelay(n),pe=Ks()-n.issuedTime,re=Math.max(te-pe,0);return V!==2&&!g.isCycling&&re>0&&(co.debug(t,`Waiting ${re}ms before returning completion`),await i2(re),p?.isCancellationRequested)?(co.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:Tg(U)}):r!==t.get(bd).currentRequestId?(co.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:Tg(U)}):(g.isSpeculative||t.get(bd).setGhostText(b,y.prompt.suffix,O,V),c("complete"),{type:"success",value:[Y,V],telemetryData:Xs(U),telemetryBlob:U,resultType:V,performanceMetrics:l})})}s(iAt,"getGhostTextWithoutAbortHandling");async function Aoe(t,e,r,n){let i=sr();t.get(bd).currentRequestId=i;let o=await pAt(t,e.textDocument,i,n);try{return t.get(Zf).schedule(e,i,o,r,n),t.get(Ig).notifyRequest(e,i,o,r,n),await iAt(t,e,i,o,r,n)}catch(a){if(Fc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:Tg(o,{cancelledNetworkRequest:!0})};throw a}}s(Aoe,"getGhostText");function oAt(t,e,r,n){let i=t.get(bd).getCompletionsForUserTyping(e,r.suffix),o=fAt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(oAt,"getLocalInlineSuggestion");function sAt(t,e){let r=aAt(e,t),n=lAt(e,t);return r&&!n?void 0:r&&n}s(sAt,"isInlineSuggestion");function aAt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(aAt,"isMiddleOfTheLine");function lAt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(lAt,"isValidMiddleOfTheLinePosition");function cAt(t,e){return e.lineAt(t).text.trim().length===0}s(cAt,"isNewLine");var V1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function uAt(t,e,r,n,i,o,a,l){if(t.get(V1).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",rn.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&Pm.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await a4e(r,n)}:{requestMultiline:!1};if(a){let d=fP(r,n),p=d.current>0?r.lineAt(n).text[0]:void 0,m={range:{start:n,end:n},newText:`
`+(p?p.repeat(d.current):"")};r=r.applyEdits([m])}if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&cAt(n,r))return{requestMultiline:!0};let u=!1;return!i&&A0(r.detectedLanguageId)?u=await wU(r,n):i&&A0(r.detectedLanguageId)&&(u=await wU(r,n)||await wU(r,r.lineAt(n).range.end)),u||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(u=d4e(l.prompt,r.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}s(uAt,"shouldRequestMultiline");function hq(t,e,r){t.get(Bm).append(e.prefix,e.prompt.suffix,r)}s(hq,"appendToCache");function dAt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(dAt,"adjustLeadingWhitespace");function fAt(t,e,r,n){let i=t.get(Bm).findAll(e,r);return i.length===0?(co.debug(t,"Found no completions in cache"),[]):(co.debug(t,`Found ${i.length} completions in cache`),i.map(o=>goe(o,{forceSingleLine:!n})))}s(fAt,"getCompletionsFromCache");async function pAt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=rn.createAndMarkAsIssued(i);return await t.get(Rt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(pAt,"createTelemetryWithExp");function mAt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let l=n.completionText.split(`
`).length,c={compCharLen:n.completionText.length,numLines:r.requestForNextLine?l-1:l};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let u=n.telemetryData.extendedBy(a,c);return u.issuedTime=i.issuedTime,u.measurements.timeToProduceMs=performance.now()-i.issuedTime,B3e(u,e),u.extendWithRequestId(o),u.measurements.confidence=b3e(t,u),u.measurements.quantile=E3e(t,u),co.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}s(mAt,"telemetryWithAddData");function hAt(t,e,r,n,i,o,a,l){let c={languageId:e.detectedLanguageId};r.requestForNextLine!==void 0&&(c.requestForNextLine=r.requestForNextLine.toString()),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);B3e(u,e);let d=r.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(jo.range(p.range.start,n)),h=e.getText(jo.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(E=>[E[0],E[1].map(_=>(0,R3e.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},v={...SS(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=u.extendedBy(y,v);return Bt(t,"ghostText.issued",b),u}s(hAt,"telemetryIssued");function B3e(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(B3e,"addDocumentTelemetry");function P3e(t,e,r,n,i){let o=Date.now()-n,a=o-i,l=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});l.extendWithRequestId(r.requestId),Bt(t,`ghostText.${e}`,l)}s(P3e,"telemetryPerformance");var bd=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&D3e(this.choices[0].completionText,n))return gAt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function gAt(t,e){return t.filter(r=>D3e(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(gAt,"adjustChoicesStart");function D3e(t,e){return t.startsWith(e)&&t.length>e.length}s(D3e,"startsWithAndExceeds");f();f();f();var g2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(Dr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var yoe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??_n.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=n.getText(l),d=n.offsetAt(l.end);if(n=n.applyEdits([{range:l,newText:c}]),o<n.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:_n.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=n.positionAt(o);let p={range:l,newText:c,positionAfterEdit:_n.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function Bg(t,e){return new yoe(t,e)}s(Bg,"createCompletionState");f();function Coe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=n,n=d,d=a,a=i,i=d,l=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],l,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)n[u]<n[c]&&(c=u);return{distance:n[c],startOffset:i[c],endOffset:c}}s(Coe,"editDistance");function AAt(){return new Map}s(AAt,"emptyLexDictionary");function yAt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(yAt,"reverseLexDictionary");function*CAt(t){let e="",r;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(CAt,"lexGeneratorWords");function N3e(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(N3e,"lexicalAnalyzer");function L3e(t){return t!==" "}s(L3e,"notSingleSpace");function F3e(t,e,r=CAt){let[n,i]=N3e(t,AAt(),r,L3e),[o,a]=N3e(e,i,r,L3e);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let l=yAt(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[n[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=Coe(n.map(y=>y[0]),o.map(y=>y[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(F3e,"lexEditDistance");f();function M3e(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(M3e,"computeCompCharLen");function Q3e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(Q3e,"computeCompletionText");function O3e(t,e,r){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||r===3?e:e-t.range.end.character+t.range.start.character}s(O3e,"computePartialLength");var bv=new Tt("postInsertion"),U3e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],q3e=50,xAt=1500,vAt=.5,bAt=500,xoe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function W3e(t,e,r,n,i){let o=await t.get(Ln).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return bv.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,n),u=a.positionAt(n),d=await M5(t,r.properties.headerRequestId,Bg(a,u),r),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(n,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(n),h=wie(c,n,a.detectedLanguageId),y=await iRe(h,void 0)(m),v=Math.min(l.length,n+(y?y*2:bAt)),b=l.substring(n,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(W3e,"captureCode");function gq(t,e,r,n,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{bv.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),B4e(t,e,u)});let o=new g2(t,n,r-1),a=new g2(t,n,r),l=s(async c=>{bv.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await W3e(t,n,u,o.offset+1,a.offset),h;d.isFimEnabled?h={hypotheticalPromptPrefixJson:JSON.stringify(d.prefix),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)}:h={hypotheticalPromptJson:JSON.stringify(d.prefix)};let g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});bv.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");U3e.filter(c=>c.captureRejection).map(c=>o.push(Eu(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(gq,"postRejectionTasks");function A2(t,e,r,n,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:M3e(a,r)});bv.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),k4e(t,e,c);let u=r;r=Q3e(r,a);let d=r.trim(),p=new g2(t,i,n),m=new g2(t,i,n+r.length),h=s(async g=>{await wAt(t,e,d,n,i,g,c,p,m)},"stillInCodeCheck");if(xoe.triggerPostInsertionSynchroneously&&tm(t)){let g=h({seconds:0,captureCode:xoe.captureCode,captureRejection:xoe.captureRejection});t.get(va).register(g)}else U3e.map(g=>p.push(Eu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Eu(t,EAt,"post insertion citation check")(t,i,u,r,n,l)}s(A2,"postInsertionTasks");async function EAt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(Dr).getTextDocument({uri:e});if(a){let l=voe(a.getText(),n,q3e,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=IAt(r.length,n.length,l.start_offset);if(c===void 0){bv.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+TAt(r.length,n.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(E0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(EAt,"citationCheck");function IAt(t,e,r){if(!(e<t&&r>e))return r}s(IAt,"computeCitationStart");function TAt(t,e,r){return e<t?Math.min(r,e):r}s(TAt,"computeCitationEnd");function voe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=F3e(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=Coe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=vAt?1:0}}s(voe,"find");async function wAt(t,e,r,n,i,o,a,l,c){let u=await t.get(Ln).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=voe(p,r,q3e,l.offset);m.stillInCodeHeuristic||(m=voe(p,r,xAt,l.offset)),bv.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:l.offset}).extendedBy({},m);if(Bt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await W3e(t,i,h,l.offset,c.offset),b;g.isFimEnabled?b={hypotheticalPromptPrefixJson:JSON.stringify(g.prefix),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)}:b={hypotheticalPromptJson:JSON.stringify(g.prefix)};let E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:n,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});bv.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Bt(t,e+".capturedAfterAccepted",E,1)}}}s(wAt,"checkStillInCode");var boe=new Tt("ghostText"),Fu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function _At(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(_At,"computeRejectedCompletions");function Eoe(t,e){let r=t.get(Fu);if(!r.position||!r.uri)return;let n=_At(r);n.length>0&&gq(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(Eoe,"rejectLastShown");function G3e(t,e,r,n){let i=t.get(Fu);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&Eoe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(G3e,"setLastShown");function H3e(t,e){let r=t.get(Fu);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;boe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,gU(t,"ghostText",e)}}s(H3e,"handleGhostTextShown");function Aq(t,e){let r=t.get(Fu);r.resetState(),boe.debug(t,"Ghost text post insert");let n={compType:"full"};return r.resetPartialAcceptanceState(),A2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,n,e.copilotAnnotations)}s(Aq,"handleGhostTextPostInsert");function j3e(t,e,r,n=0){let i=t.get(Fu);boe.debug(t,"Ghost text partial post insert");let o=O3e(e,r,n);if(o)return i.partiallyAcceptedLength=r,A2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(j3e,"handlePartialGhostTextPostInsert");function V3e(t){let e=new c5;return e.set(xg,t),e.set(gg,new gg),e.set(zi,new zi),e.set(Bm,new Bm),e.set(Am,new Am),e.set(Rt,new Rt(e)),e.set(ig,new ig),e.set(ac,new ac(e)),e.set(Ll,new Ll),e.set(Iu,new Iu),e.set(xd,new uP),e.set(Em,new LS),e.set(Cm,new o8),e.set(va,new va),e.set(Ig,new Ig(e)),e.set(Ln,new Ln(e)),e.set(Fm,fq(e)),e.set(Fu,new Fu),e.set(bd,new bd),e.set(V1,V1.default),e.set(Q1,new Q1(e)),e.set(Mf,new Mf(e)),e.set(Ml,new Ml),e.set(yd,new yd(e)),e.set(Go,new Go),e.set(Kf,new Kf(e)),e}s(V3e,"createCommonContext");f();f();var yq=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var O5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Ajr=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),wP=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Rt).updateExPValuesAndAssignments(),a=await this.ctx.get(xd).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new yq(a.reason);case"failed":throw new O5(a.reason)}}};f();f();var $3e=je(require("node:util"));function z3e(t,...e){return`[${t}] ${SAt(e)}`}s(z3e,"formatLogMessage");function SAt(t){return $3e.default.formatWithOptions({maxStringLength:1/0},...t)}s(SAt,"format");function Cq(t){return Y1e(t)}s(Cq,"verboseLogging");var xq=class extends ja{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||Cq(r))&&this.console.warn(`[${i}]`,...o)}};f();var Y3e=require("node:util");var U5=class extends hg{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){yI(e,"log",rn.createAndMarkAsIssued({context:r,level:vI[1],message:RAt(...n)}),1)}sendException(e,r,n){Ta(e,r,n)}};function RAt(...t){return t.map(e=>(0,Y3e.inspect)(e)).join(" ")}s(RAt,"telemetryMessage");f();var cFe=je(require("crypto")),uFe=je(require("fs")),XG=je(aFe()),dFe=require("tls"),fFe=je(lFe());var Y4=new Tt("certificates"),rl=class{static{s(this,"RootCertificateReader")}};function ZG(t,e=process.platform){return new zce(t,[new Yce,new Kce,k3t(t,e)])}s(ZG,"getRootCertificateReader");function k3t(t,e){switch(e){case"linux":return new Jce(t);case"darwin":return new Xce(t);case"win32":return new Zce(t);default:return new eue}}s(k3t,"createPlatformReader");var $ce=class extends rl{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return Y4.warn(this.ctx,"Failed to read root certificates:",r),[]}}},zce=class extends rl{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new $ce(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new cFe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>n}catch(a){return Y4.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&Y4.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},Yce=class extends rl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return dFe.rootCertificates}},Kce=class extends rl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await pFe(e):[]}},Jce=class extends rl{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await pFe(n);Y4.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},Xce=class extends rl{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=XG.get({excludeBundled:!1,format:XG.Format.pem});return Y4.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},Zce=class extends rl{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=fFe.all();return Y4.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},eue=class extends rl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function pFe(t){let e;try{e=await uFe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(pFe,"readCertsFromFile");f();var TFe=je(require("http"));var tkt=407,bc=new Tt("proxySocketFactory"),Zg=class{static{s(this,"ProxySocketFactory")}},K2=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function eH(t){return new nue(t,new iue(t))}s(eH,"getProxySocketFactory");var nue=class extends Zg{constructor(r,n,i=new jD,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new nn(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(bc.debug(this.ctx,"Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof K2&&i.code===`ProxyStatusCode${tkt}`){bc.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return bc.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(bc.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(bc.debug(this.ctx,"Proxy authorization successful, received token"),i)return bc.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){bc.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);bc.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);bc.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return bc.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.proxyKerberosServicePrincipal;if(n)return bc.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.host}`:`HTTP@${r.host}`;return bc.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return r.host+":"+r.port}},iue=class extends Zg{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(zi).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{bc.debug(this.ctx,"Attempting to establish connection to proxy");let l=TFe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{bc.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new K2(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new K2(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(bc.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{bc.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new K2(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{bc.debug(this.ctx,"Proxy socket connection timeout"),a(new K2(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.host,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.proxyAuthorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},jD=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>je(IFe()))}};f();var RFe=require("node:os");var rkt=new Tt("repository"),J2="\\\\",kFe="(?:[#;].*)",X4=`(?:[^"${J2}]|${J2}.)`,nkt="[0-9A-Za-z-]",wFe=`[A-Za-z]${nkt}*`,BFe=`\\s*${kFe}?$`,PFe=`(?:[^"${J2};#]|${J2}.)`,ikt=`(?:"${X4}*"|"${X4}*(?<strCont>${J2})$)`,okt=`(?:${PFe}|${ikt})+`,skt=`(?:(?<cont>${J2})$)`,DFe=`(?<value>${okt})${skt}?${BFe}`,_Fe=new RegExp(`^${DFe}`),akt=new RegExp(`^(?<value>${X4}*(?:(?<strCont>${J2})$|(?<quote>")))`),lkt=new RegExp(`^\\s*(?:(?<key>${wFe})\\s*=\\s*${DFe}|(?<soloKey>${wFe})${BFe})`),ckt=new RegExp(`(?<value>${PFe}+)|"(?<string>${X4}*)"`,"g"),SFe="[-.0-9A-Za-z]+",ukt=`\\s+"(?<ext>${X4}*)"`,dkt=`\\s+"(?<extOnly>${X4}*)"`,fkt=new RegExp(`^\\s*\\[(?:(?<simple>${SFe})${ukt}|${dkt}|(?<simpleOnly>${SFe}))\\]`),pkt=new RegExp(`^\\s*${kFe}$`),oue=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(fkt);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(lkt);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(akt),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(_Fe),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(_Fe),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(ckt)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){pkt.test(this.line)&&(this.line="")}},tH=class extends km{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await Q1.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new n2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new oue(i),a=new n2;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,r,n){try{return await e.get(po).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&rkt.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=ko(this.xdgConfigUri(),"git","config"),o=ko(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Ii(r).toLowerCase()!=="config.worktree")return;let n=f0(r),i=ko(n,"commondir");try{let o=(await e.get(po).readFileString(i)).trimEnd();return ko(bI(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?fl(process.env.XDG_CONFIG_HOME):ko(this.homeUri(),".config")}homeUri(){return fl((0,RFe.homedir)())}};f();var NFe=require("child_process");var rH=class extends km{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,NFe.execFile)(r,n,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){R5e.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=Wo(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new n2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};f();var FFe=je(require("node:events"));var LFe="onWorkspaceChanged",Q0=class{constructor(){this.emitter=new FFe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(LFe,e)}emit(e){this.emitter.emit(LFe,e)}};function MFe(t){let e=V3e(t);return mkt(e),e.set(rl,ZG(e)),e.set(Zg,eH(e)),e.set(km,new YO([new rH,new tH])),e.set(Q0,new Q0),e.set(wP,new wP(e)),e}s(MFe,"createProductionContext");function mkt(t){t.set(vf,vf.fromEnvironment(!1)),t.set(hg,new U5),t.set(ja,new xq(console))}s(mkt,"setupRudimentaryLogging");var ren=new Tt("context");f();f();var Nr=new Tt("chat");f();f();var yl=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(yl||{});function jr(t){return t?(t=O0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(jr,"getTextPart");var QFe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),OFe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function eb(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(eb,"parseToolCallArguments");function UFe(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(UFe,"toOpenAIToolCall");function qFe(t,e,r,n,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return r.tool_calls&&(c.tool_calls=r.tool_calls),g5(t,[c],l),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:l}}s(qFe,"convertToChatCompletion");function VD(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(VD,"isChatCompletionContentPartArray");function nH(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(nH,"isChatMessageArray");function O0(t){if(typeof t=="string")return t;if(VD(t))return t;if(nH(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(O0,"resolveAsChatMessageContent");function $D(t,e){return(typeof t=="string"||VD(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s($D,"appendChatMessageContent");function sue(t,e){if(t){if(typeof t=="string"||VD(t))return[{role:"assistant",content:t}];if(nH(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(sue,"resolveResponseAsChatMessages");f();var aue=new Tt("streamMessages");function WFe(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(aue.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),aue.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),aue.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=cP(e.solution),a={role:"assistant",content:n};return qFe(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(WFe,"prepareChatCompletionForReturn");var gp=new Tt("fetchChat"),iH=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){gp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,l,a)}if(e.get(Kf).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??sr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:jr(u.content).split(" "),requestId:{headerRequestId:d,completionId:c.id?c.id:"",created:c.created?Number(c.created):0,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=jr(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>A5(a),"getProcessingTime")}}else{let c=mv.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:q1(c,d=>WFe(e,d,n)),getProcessingTime:s(()=>A5(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return rn.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:y5(e,n.count),top_p:fU(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},l=k1(n.repoInfo);return l!==void 0&&(a.nwo=l),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await hkt(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;gp.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Bt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Gr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return gp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return gp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Gr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let c=n.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return gp.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status}}};async function hkt(t,e,r,n,i,o,a,l,c,u,d,p){let m=ko(r,n,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:n,uiKind:c});dU(a,h,["messages"]),h.properties.headerRequestId=o,Bt(t,"request.sent",h);let g=Ks(),y=v4e(c),v={...jx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{gkt(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>UFe(E)))}),rI(t,m,l,y,o,a,p,v).then(b=>{let E=hv(b,void 0);h.extendWithRequestId(E);let _=Ks()-g;return h.measurements.totalTimeMs=_,gp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),gp.debug(t,"request.response properties",h.properties),gp.debug(t,"request.response measurements",h.measurements),gp.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",h),b}).catch(b=>{if(Fc(b))throw b;let E=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),h.properties.message=String(Du(b,"name")??""),h.properties.code=String(Du(b,"code")??""),h.properties.errno=String(Du(b,"errno")??""),h.properties.type=String(Du(b,"type")??"");let _=Ks()-g;throw h.measurements.totalTimeMs=_,gp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),gp.debug(t,"request.error properties",h.properties),gp.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),b}).finally(()=>{g5(t,e,h)})}s(hkt,"fetchWithInstrumentation");function gkt(t){return"tool_calls"in t}s(gkt,"isChatMessageWithToolCalls");var ta=class{constructor(e){this.ctx=e;this.fetcher=new iH}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=sr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(Gr).getToken(),u=Gx(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=sP(r.chatCompletions,c=>this.postProcess(c,i));Nr.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)Nr.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:jr(c.message?.content)??"",toolCalls:c.tool_calls,requestId:n,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:jr(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>jr(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return mq(e.tokens)?(r.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Nr.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Fc(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Nr.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var eA=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var tb=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var Akt=".github/copilot-instructions.md",ykt=".github/git-commit-instructions.md",Ckt="global-copilot-instructions",xkt="global-git-commit-instructions",tA=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Ckt}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:xkt}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let l=ko(r.uri,n),c=(await e.get(po).readFileString(l)).trim();if(!c)return;(await O1(e,{uri:l},c)).status==="valid"&&o.push({kind:a,content:[{instruction:c,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let l=[];return n.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,a,Akt,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,a,ykt,void 0,i,0)),l});return await Promise.all(o),i}};f();var Ec=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},oH=class extends Ec{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};f();f();f();function sH(){return sr()}s(sH,"uuidV4");f();var rb=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var rA=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var zD="filepath:",Cl="...existing code...",lue="copilot-edited-file";f();function Z4(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(Z4,"getFenceForCodeBlock");var U0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=Z4(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${zD} ${aa(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var cue=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},YD=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=jr(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let l=jr(a.content).endsWith(`
`)?jr(a.content):`${jr(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${lue}>.
</SYSTEM>


`}return o+jr(a.content)},"")+`


The resulting document:
<${lue}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${Cl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new U0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new cue({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new U0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var dy=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(Ln).getOrReadTextDocument({uri:e})}};f();var Da=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var vkt=1e3,bkt={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:sn.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},eR=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new Tt("CopilotEditsCodeMapper")}async mapCode(e,r,n,i,o=!1){if(!e.resource)throw new rA("No uri found in code block");if(n.isCancellationRequested)throw new rb;e.code.includes(Cl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let a=await this.ctx.get(Ln).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new rA(v);throw this.logger.error(this.ctx,v,b),b}let l=a.document.getText();if(l.length===0&&!e.code.includes(Cl))return i&&await this.reportCodeBlock(e,i),e.code;let c=new YD({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new dy(this.ctx)}),u=await c.render();u=c.transformToFastApplyMessage(u),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ii(e.resource),editDescription:e.markdownBeforeBlock});let d=await this.ctx.get(Rt).updateExPValuesAndAssignments(),p=sH(),m=[],h=0,g=0,y=l.length+e.code.length+vkt;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:bkt,messages:u,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${p} in iteration ${g} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(ta).fetchResponse(v,n,d);if(this.logger.debug(this.ctx,`Received map code response ${p} in iteration ${g} with result: ${JSON.stringify(E,null,2)}`),h=this.calculateResponseLength(E,m,h),E.type==="length"){if(h>y)throw new rA(`Code mapper might be in a loop: Rewritten length: ${h}, Document length: ${l.length}, Code block length ${e.code.length}`);u=await new YD({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new dy(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=m.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ii(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:Z4(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new rA(k)}}else{if(E.type==="canceled")throw new Da;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new rA(_)}}g+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ii(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ii(e.resource)})}};f();var tu=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var nb=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var aH=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var ib=class{constructor(e,r){this.request=e;this.id=sr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},uue=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},lH=class{constructor(e=[],r="panel",n="en"){this._id=sr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new uue(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new aH(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var cH=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new tu({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:qx,type:"user"},new tu({message:qx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new tu({message:nb.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new tu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new tu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new tu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new tu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new tu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new tu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new tu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new tu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*HFe(t){yield t}s(HFe,"stringToAsyncIterable");f();f();var nA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(tA),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),l=[...o,...a];return this.processInstructions(l,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};f();var fy=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||fl(r)}static uriToPath(e){let r=Wo(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var uH=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await nA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(fy.posixFilePathToUri(e))}getFilePath(e){return fy.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${zD} ${this.exampleFilePath}`,`// ${Cl}`,"{ changed code }",`// ${Cl}`,"{ changed code }",`// ${Cl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${zD} ${this.tsExampleFilePath}`,"class Person {",`   // ${Cl}`,"   age: number;",`   // ${Cl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new U0({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${Cl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var dH=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var due="<file>",KD="```",XD="###",Ikt=/^(`+)([^ \n]*)/,JD="filepath:";async function*VFe(t,e){let r=new dH(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(KD.length,due.length,XD.length));if(y.startsWith(due)||y.startsWith(KD))break;if(y.startsWith(XD)){let v=await r.readLineIncludingLF(),b=v.substring(XD.length).trim();await e(b)?n.length=0:n.push(v)}else await jFe(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(due);for(;!r.endOfStream&&!i.startsWith(KD);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Ikt),l=a?a[2]:void 0,c=FRe(l?PRe(l):void 0),u=[`${c.lineComment.start} ${JD}`,`:: ${JD}`,`<!-- ${JD}`,`// ${JD}`,`# ${JD}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(KD.length,d));if(y.startsWith(KD)){let v=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await r.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await jFe(r,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(VFe,"getCodeBlocksFromResponse");async function jFe(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(jFe,"pipeOneLine");function $Fe(t){if(t.startsWith(`${XD} `))return"";let e=t.indexOf(`
${XD} `);return e===-1?"":t.substring(0,e)+`
`}s($Fe,"parseOverallDescription");f();f();var fH=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var Tkt=new Tt("CopilotEditsConversations"),nl=class{constructor(e){this.editConversations=new nn(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new lH([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&Tkt.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new fH(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};f();f();var ra=class{static{s(this,"ModelConfigurationProvider")}},pH=class extends ra{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Nr.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Tu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(Tu).getMetadata(),i=_kt(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===sn.Gpt35turbo||r===sn.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:pue(6144,i),maxResponseTokens:fue(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===sn.Gpt4||r===sn.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:pue(10240,i),maxResponseTokens:fue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===sn.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await wkt(this.ctx,i),maxResponseTokens:fue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case bM.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function wkt(t,e){let r=t.get(Rt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),pue(i,e)}s(wkt,"getExpRequestTokens");function pue(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(pue,"getRequestTokens");function fue(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(fue,"getResponseTokens");function _kt(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(_kt,"filterModelsByCapabilities");var xo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(ra).getBestChatModelConfig([n]);if(e.get(Kf).quotaExhausted&&!(await e.get(Gr).getToken()).userInfo?.isFreeUser){let o=await e.get(Tu).getFallbackModel();if(o)return e.get(ra).getBestChatModelConfig([o?.id])}return e.get(ra).getBestChatModelConfig(Lf(r),i)}static transformMessages(e,r){return r===sn.O1Ga||r===sn.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var py=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ta(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=cH.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof rb)await this.reportEnd(e,{message:qx});else if(n instanceof tu)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Rt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=xo.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new uH({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new dy(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:qx,type:"user"},new rb;this.ctx.get(nl).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=HFe(r),o=new eR(this.ctx),a=s(async u=>fy.pathToUri(e,u),"createUri"),l=[],c=$Fe(r);c&&await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,n);for await(let u of VFe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),n,async d=>{await this.ctx.get(Ec).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof rA||i instanceof O5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof rb)e.currentTurn.status="cancelled",e.currentTurn.response={message:qx,type:"user"},await this.reportEnd(e,{message:qx});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};f();var Skt="github.com",tR=class extends pl{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls()),ia(r,i=>this.onCopilotToken(r,i))}static{s(this,"DefaultNetworkConfiguration")}onCopilotToken(r,n){this.updateServiceEndpoints(r,n.envelope.endpoints)}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}getTelemetryUrl(){return this.telemetryUrl}setTelemetryUrlForTesting(r){this.telemetryUrl=r}setConfiguredUrls(r,n){this.withTelemetryReInitialization(r,()=>{let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(Gr).resetToken()})}updateServiceEndpoints(r,n){n&&r8(r,n.telemetry)&&this.withTelemetryReInitialization(r,()=>{this.telemetryUrl=new URL("telemetry",n.telemetry).href})}withTelemetryReInitialization(r,n){let i=this.telemetryUrl;if(n(),i===this.telemetryUrl)return;let o=r.get(h0);o.isInitialized&&o.reInitialize()}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Hx({serverUrl:r8(r,n.serverUrl),apiUrl:r8(r,n.apiUrl)});this.baseUrlObject=new URL(i);let a=this.getAuthAuthority()!==Skt;this.apiUrl=o,this.telemetryUrl=new URL("/telemetry",a?this.prefixWith("copilot-telemetry-service.",this.baseUrlObject).href:n8.telemetry).href}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}prefixWith(r,n){return new URL(`${n.protocol}//${r}${n.host}`)}};f();var con=new Tt("exp");function zFe(t){let e=t.get(Rt);e.registerStaticFilters(Bkt(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Gi(t,Pt.DebugOverrideEngine)||Gi(t,Pt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>oM()?"copilot-web":t.get(un).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>mue(!t.get(zi).isProduction()&&t.get(un).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(un).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Rkt(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(un).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>mue(t.get(un).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>kkt(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(un).getRelatedPluginInfo()){let i=Cf+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(yB).includes(i)){H7(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=mue(n.version)}return r})}s(zFe,"setupExperimentationService");function Rkt(t){let e=t.get(un).getEditorPluginInfo();return e.name==="copilot"&&Pf(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Rkt,"getPluginRelease");function kkt(t){let e=t.get(un).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(kkt,"getTargetPopulation");function Bkt(t){return Pkt(t)}s(Bkt,"createAllFilters");function Pkt(t){let e=t.get(Ps);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(zi).isProduction()?CI(t):"1.999.0"}}s(Pkt,"createDefaultFilters");function mue(t){return t.split("-")[0]}s(mue,"trimVersionSuffix");f();var ZD=(r=>(r.enabled="enabled",r.disabled="disabled",r))(ZD||{}),my=Symbol("onMCPToolsListChanged"),q0=class{static{s(this,"McpManager")}};f();var Km=class{static{s(this,"McpRuntimeNotifier")}},mH=class extends Km{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var rR=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var hue=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},hH=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new hue(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var Mo;(n=>{function t(i){return new gue(i)}n.ok=t,s(t,"ok");function e(i){return new Aue(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(Mo||={});var gue=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Aue=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();f();var YFe=-1;function nR(){return YFe!==-1?YFe:Date.now()}s(nR,"now");function KFe(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(KFe,"lineRangeDistance");f();f();var Ap=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new An(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(il.fromJson))}static from(e){let r=e.map(i=>new il(kt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new il(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new il(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return Dkt(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new il(kt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(kt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(r.push(new il(l.replaceRange.delta(o),l.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new il(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new kt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new kt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},il=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(kt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=gP(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,S5(r,this.newText)),o=new kt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Dkt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)n.push(new il(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new il(kt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new kt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new il(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Ap(n).normalize()}s(Dkt,"joinEdits");var Es=class t{constructor(e){this.edits=e;Ul(Cv(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Us.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Us.replace(e,r)])}static insert(e,r){return new t([Us.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Us.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,l)=>" ".repeat(l-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Ap(this.edits.map(e=>new il(e.range,e.newText)))}compose(e){return Nkt(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Us.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Us.replace(kt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Us.replaceWithData(kt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new gH(i)}if(this.edits.length!==e.arrayLength)throw X8(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let l=o;l<n.length;++l){let c=a.newText.length-a.range.length,u=n[l];n[l]=Us.replaceWithData(kt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new gH(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new kt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Us.replace(kt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],l=this.edits[i];if(l)if(!a)r.push(Us.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(r.push(Us.replace(l.range.delta(o),l.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function Nkt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,r.shift(),i+=u.newText.length-u.range.length}if(!l)n.push(Us.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&n.push(Us.replaceWithData(kt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Us.replaceWithData(kt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new kt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Us.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return Es.create(n).normalize()}s(Nkt,"joinEdits");var Us=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new kt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new kt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new kt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Es.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=Lkt(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=Fkt(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function Lkt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(Lkt,"commonPrefixLength");function Fkt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(Fkt,"commonSuffixLength");var ru=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Nu(()=>null.base.equals(this.base.apply(e))),Nu(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return oA.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},gH=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Es.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new iA(this.edits.map(e=>e.toEdit()))}},iA=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Es.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=Es.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>Es.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=No.fromEdit(new ru(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};f();var iR=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new hy(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Us.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return Es.create(r)}mapEdits(e){return new t(this.edits.map(e))}},hy=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new An;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(zt.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Us.replace(n,this.newText)}};var No=class t{constructor(e){this.edits=e;Ul(Cv(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>Jm.deserialize(r)))}static fromEdit(e){let r=iR.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let l=n[a],c=a+1<n.length?n[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=hy.joinEdits(o,r);o.length=0;let d=Jm.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(T0(n=>n.lineRange.startLineNumber,w0)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return Es.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Yt.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new Jm(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of i5(this.edits,(c,u)=>KFe(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new Jm(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},Jm=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Rg(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(zt.fromPositions(new tn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,c=r.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new tn(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+c;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===c.length&&(a--,n.pop()),new t(new Yt(i,a),n)}toLineEdit(){return new No([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new tn(o,a)}else n=new tn(1,1);let i=r.addToPosition(new tn(1,1));return new hy(zt.fromPositions(n,i),"")}else return new hy(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new hy(zt.fromPositions(new tn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new zt(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new hy(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Us.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Yt(r,n),this.newLines.slice(i,this.newLines.length-o))}},Mkt;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Mkt||={});var oA=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=No.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new ru(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new No(r))}};f();var AH=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw X8(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw X8(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var m9=je(th());function fQe(t){return t.map(UBt).join(`
`)}s(fQe,"stringifyChatMessages");function UBt({role:t,content:e}){if(t!==m9.Raw.ChatRole.User&&t!==m9.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===m9.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==m9.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(UBt,"stringifyMessage");f();f();var qBt=Symbol("MicrotaskDelay");function WBt(t){let e=new W1,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new Eg)});Promise.resolve(r).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(WBt,"createCancelablePromise");function vy(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Eg)})}):WBt(r=>vy(t,r))}s(vy,"timeout");var jH=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new An("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new An("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var h9=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Eg)}},GBt;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(GBt||={});var g9=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new _0,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await s2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var VH=class{constructor(e){this._deferred=new h9;this._asyncIterable=new g9(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();f();f();f();f();var zH=!1,YH=!1,$H=!1,HBt=!1,jBt=!1,pQe=!1,VBt=!1,$Bt=!1,zBt=!1,YBt=!1;var by,Ey=globalThis,Cp;typeof Ey.vscode<"u"&&typeof Ey.vscode.process<"u"?Cp=Ey.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Cp=process);var mQe=typeof Cp?.versions?.electron=="string",KBt=mQe&&Cp?.type==="renderer";typeof Cp=="object"?(zH=Cp.platform==="win32",YH=Cp.platform==="darwin",$H=Cp.platform==="linux",HBt=$H&&!!Cp.env.SNAP&&!!Cp.env.SNAP_REVISION,VBt=mQe,zBt=!!Cp.env.CI||!!Cp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,jBt=!0):typeof navigator=="object"&&!KBt?(by=navigator.userAgent,zH=by.indexOf("Windows")>=0,YH=by.indexOf("Macintosh")>=0,$Bt=(by.indexOf("Macintosh")>=0||by.indexOf("iPad")>=0||by.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,$H=by.indexOf("Linux")>=0,YBt=by?.indexOf("Mobi")>=0,pQe=!0):console.error("Unable to resolve platform.");var ude=0;YH?ude=1:zH?ude=3:$H&&(ude=2);var oT=zH,hQe=YH;var JBt=pQe&&typeof Ey.importScripts=="function",nln=JBt?Ey.origin:void 0;var cA=by;var XBt=typeof Ey.postMessage=="function"&&!Ey.importScripts,iln=(()=>{if(XBt){let t=[];Ey.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Ey.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var ZBt=!!(cA&&cA.indexOf("Chrome")>=0),oln=!!(cA&&cA.indexOf("Firefox")>=0),sln=!!(!ZBt&&cA&&cA.indexOf("Safari")>=0),aln=!!(cA&&cA.indexOf("Edg/")>=0),lln=!!(cA&&cA.indexOf("Android")>=0);var sT,dde=globalThis.vscode;if(typeof dde<"u"&&typeof dde.process<"u"){let t=dde.process;sT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?sT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:sT={get platform(){return oT?"win32":hQe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var A9=sT.cwd,gQe=sT.env,AQe=sT.platform,mln=sT.arch;var t8t=65,r8t=97,n8t=90,i8t=122,gb=46,Kl=47,Nd=92,mb=58,o8t=63,KH=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function s8t(t,e){if(t===null||typeof t!="object")throw new KH(e,"Object",t)}s(s8t,"validateObject");function pa(t,e){if(typeof t!="string")throw new KH(e,"string",t)}s(pa,"validateString");var Ld=AQe==="win32";function ai(t){return t===Kl||t===Nd}s(ai,"isPathSeparator");function fde(t){return t===Kl}s(fde,"isPosixPathSeparator");function hb(t){return t>=t8t&&t<=n8t||t>=r8t&&t<=i8t}s(hb,"isWindowsDeviceRoot");function JH(t,e,r,n){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Kl}if(n(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==gb||i.charCodeAt(i.length-2)!==gb){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===gb&&l!==-1?++l:l=-1}return i}s(JH,"normalizeString");function a8t(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(a8t,"formatExt");function yQe(t,e){s8t(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${a8t(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(yQe,"_format");var ma={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],pa(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=A9():(o=gQe[`=${e}`]||A9(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Nd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)ai(d)&&(l=1,u=!0);else if(ai(d))if(u=!0,ai(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!ai(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else hb(d)&&o.charCodeAt(1)===mb&&(c=o.slice(0,2),l=2,a>2&&ai(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(l)}\\${r}`,n=u,u&&e.length>0)break}return r=JH(r,!n,"\\",ai),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){pa(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return fde(o)?"\\":t;if(ai(o))if(i=!0,ai(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!ai(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(n=`\\\\${u}\\${t.slice(c,l)}`,r=l)}}}else r=1;else hb(o)&&t.charCodeAt(1)===mb&&(n=t.slice(0,2),r=2,e>2&&ai(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?JH(t.slice(r),!i,"\\",ai):"";return a.length===0&&!i&&(a="."),a.length>0&&ai(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){pa(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return ai(r)||e>2&&hb(r)&&t.charCodeAt(1)===mb&&ai(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];pa(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&ai(r.charCodeAt(0))){++i;let o=r.length;o>1&&ai(r.charCodeAt(1))&&(++i,o>2&&(ai(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&ai(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ma.normalize(e)},relative(t,e){if(pa(t,"from"),pa(e,"to"),t===e)return"";let r=ma.resolve(t),n=ma.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Nd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Nd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Nd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Nd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Nd&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(l+m)===Nd)return n.slice(l+m+1);if(m===2)return n.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Nd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Nd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${n.slice(l,c)}`:(n.charCodeAt(l)===Nd&&++l,n.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ma.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Nd){if(e.charCodeAt(1)===Nd){let r=e.charCodeAt(2);if(r!==o8t&&r!==gb)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(hb(e.charCodeAt(0))&&e.charCodeAt(1)===mb&&e.charCodeAt(2)===Nd)return`\\\\?\\${e}`;return t},dirname(t){pa(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return ai(i)?t:".";if(ai(i)){if(r=n=1,ai(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!ai(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(r=n=l+1)}}}}else hb(i)&&t.charCodeAt(1)===mb&&(r=e>2&&ai(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let l=e-1;l>=n;--l)if(ai(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&pa(e,"suffix"),pa(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&hb(t.charCodeAt(0))&&t.charCodeAt(1)===mb&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(ai(c)){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(ai(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){pa(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===mb&&hb(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(ai(c)){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===gb?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:yQe.bind(null,"\\"),parse(t){pa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return ai(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(ai(i)){if(n=1,ai(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!ai(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(hb(i)&&t.charCodeAt(1)===mb){if(r<=2)return e.root=e.dir=t,e;if(n=2,ai(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,l=-1,c=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),ai(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===gb?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},l8t=(()=>{if(Ld){let t=/\\/g;return()=>{let e=A9().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>A9()})(),La={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:l8t();pa(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Kl)}return e=JH(e,!r,"/",fde),r?`/${e}`:e.length>0?e:"."},normalize(t){if(pa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,r=t.charCodeAt(t.length-1)===Kl;return t=JH(t,!e,"/",fde),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return pa(t,"path"),t.length>0&&t.charCodeAt(0)===Kl},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];pa(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":La.normalize(e)},relative(t,e){if(pa(t,"from"),pa(e,"to"),t===e||(t=La.resolve(t),e=La.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Kl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Kl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(r+u)===Kl?c=u:u===0&&(c=0));let d="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Kl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(pa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Kl){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&pa(e,"ext"),pa(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Kl){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Kl){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){pa(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Kl){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),l===gb?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:yQe.bind(null,"/"),parse(t){pa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Kl,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){let d=t.charCodeAt(c);if(d===Kl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===gb?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};La.win32=ma.win32=ma;La.posix=ma.posix=La;var gln=Ld?ma.normalize:La.normalize,Aln=Ld?ma.isAbsolute:La.isAbsolute,yln=Ld?ma.join:La.join,Cln=Ld?ma.resolve:La.resolve,xln=Ld?ma.relative:La.relative,vln=Ld?ma.dirname:La.dirname,CQe=Ld?ma.basename:La.basename,xQe=Ld?ma.extname:La.extname,bln=Ld?ma.format:La.format,Eln=Ld?ma.parse:La.parse,Iln=Ld?ma.toNamespacedPath:La.toNamespacedPath,Tln=Ld?ma.sep:La.sep,wln=Ld?ma.delimiter:La.delimiter;var u8t=/^\w[\w\d+.-]*$/,d8t=/^\//,f8t=/^\/\//;function p8t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!u8t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!d8t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(f8t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(p8t,"_validateUri");function m8t(t,e){return!t&&!e?"file":t}s(m8t,"_schemeFix");function h8t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==nh&&(e=nh+e):e=nh;break}return e}s(h8t,"_referenceResolution");var zo="",nh="/",g8t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,yb=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||zo,this.authority=e.authority||zo,this.path=e.path||zo,this.query=e.query||zo,this.fragment=e.fragment||zo):(this.scheme=m8t(e,a),this.authority=r||zo,this.path=h8t(this.scheme,n||zo),this.query=i||zo,this.fragment=o||zo,p8t(this,a))}get fsPath(){return pde(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=zo),n===void 0?n=this.authority:n===null&&(n=zo),i===void 0?i=this.path:i===null&&(i=zo),o===void 0?o=this.query:o===null&&(o=zo),a===void 0?a=this.fragment:a===null&&(a=zo),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Ab(r,n,i,o,a)}static parse(e,r=!1){let n=g8t.exec(e);return n?new Ab(n[2]||zo,XH(n[4]||zo),XH(n[5]||zo),XH(n[7]||zo),XH(n[9]||zo),r):new Ab(zo,zo,zo,zo,zo)}static file(e){let r=zo;if(oT&&(e=e.replace(/\\/g,nh)),e[0]===nh&&e[1]===nh){let n=e.indexOf(nh,2);n===-1?(r=e.substring(2),e=nh):(r=e.substring(2,n),e=e.substring(n)||nh)}return new Ab("file",r,e,zo,zo)}static from(e,r){return new Ab(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return oT&&e.scheme==="file"?n=t.file(ma.join(pde(e,!0),...r)).path:n=La.join(e.path,...r),e.with({path:n})}toString(e=!1){return mde(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Ab(e);return r._formatted=e.external??null,r._fsPath=e._sep===EQe?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var EQe=oT?1:void 0,Ab=class extends yb{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=pde(this,!1)),this._fsPath}toString(r=!1){return r?mde(this,!0):(this._formatted||(this._formatted=mde(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=EQe),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},IQe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function vQe(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let l=IQe[a];l!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=l):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(vQe,"encodeURIComponentFast");function A8t(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=IQe[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(A8t,"encodeURIComponentMinimal");function pde(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,oT&&(r=r.replace(/\//g,"\\")),r}s(pde,"uriToFsPath");function mde(t,e){let r=e?A8t:vQe,n="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=nh,n+=nh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),c&&(n+="#",n+=e?c:vQe(c,!1,!1)),n}s(mde,"_asFormatted");function TQe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+TQe(t.substr(3)):t}}s(TQe,"decodeURIComponentGraceful");var bQe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function XH(t){return t.match(bQe)?t.replace(bQe,e=>TQe(e)):t}s(XH,"percentDecode");f();var ih=class t{constructor(e){this.uri=e;this._uri=yb.parse(mc(this.uri))}static{s(this,"DocumentId")}static{this._cache=new G1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return CQe(this.uri)}get extension(){return xQe(this.uri)}toUri(){return this._uri}};var y9=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},ZH=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new W1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new h9;Ul(r.length>0),Ul(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>C9.deserialize(r)),e.activeDocumentIdx,[],y9.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},C9=class t{constructor(e,r,n,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Wl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(ih.create(e.id),e.workspaceRoot?yb.parse(e.workspaceRoot):void 0,f2.create(e.languageId),e.documentLinesBeforeEdit,No.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Wl(e.documentBeforeEdits),iA.deserialize(e.recentEdits),new Wl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Si=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=Mo.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=Mo.ok(e),i=r.build(n);return new t(n,i)}},Cb=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?fQe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:vP(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Ul(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function y8t(t,...e){let r=t;for(let n of e)r=n(r);return r}s(y8t,"chainStatelessNextEditProviders");var dR=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=y8t(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},fR=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Si(Mo.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let l=AH.createSortPermutation(a,T0(u=>u.lineRange.startLineNumber,w0)),c=new No(l.apply(a));return new Si(Mo.ok({edit:c,permutation:l.inverse()}),n.telemetry)}},pR=class extends fR{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},mR=class extends fR{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var C8t=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),x8t=new Map(Object.entries(C8t).map(([t,e])=>[t,{languageId:t,...e}]));function _Qe(t){return hde(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(_Qe,"getLanguage");function hde(t){return x8t.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(hde,"_getLanguage");f();var hR=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Fd.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new Fd(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new Fd(new Io(0,0),new Io(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!Fd.isRange(e))throw xb("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw xb("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw xb("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Io=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw xb("line must be non-negative");if(r<0)throw xb("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw xb();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw xb();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Fd=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Io.isPosition(e.start)&&Io.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new Io(e,r),a=new Io(n,i)):Io.isPosition(e)&&Io.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Io.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=Io.Max(e.start,this._start),n=Io.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=Io.Min(e.start,this._start),n=Io.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw xb();let n;return e?Io.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return v8t(this)}};function xb(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(xb,"illegalArgument");function v8t(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(v8t,"getDebugDescriptionOfRange");f();function SQe(t){let r=t.split(/\r?\n/).map(b8t),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(SQe,"looksLikeCode");function b8t(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Uie(t)||(e+=1);{Uie(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(b8t,"guessLineType");var gR;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(gR||={});function E8t(t){return t.replace(/^\s+/g,"")}s(E8t,"trimLeadingWhitespace");function gde(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(gde,"isImportStatement");var I8t=new G1(t=>{let e=_Qe(t),{start:r,end:n}=e.lineComment,i=`(?:${Oie(r)})`,o=n?`(?:${Oie(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function Ade(t,e){let r=t.match(I8t.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=E8t(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(Ade,"extractEndLineComment");function tj(t,e){let r=Ade(t,e);if(!(r&&r.content.trim().length>0&&SQe(r.commentWithoutTokens)))return r}s(tj,"extractExplicativeEndLineComment");var AR=class t extends fR{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>gde(i,r))||T8t(e,n).some(i=>gde(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function T8t(t,e){return lSe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(T8t,"getOldLines");f();var Cde=je(th());f();f();f();var oh;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(oh||={});var uA=Md("instantiationService");function w8t(t,e,r){e[oh.DI_TARGET]===e?e[oh.DI_DEPENDENCIES].push({id:t,index:r}):(e[oh.DI_DEPENDENCIES]=[{id:t,index:r}],e[oh.DI_TARGET]=e)}s(w8t,"storeServiceDependency");function Md(t){if(oh.serviceIds.has(t))return oh.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");w8t(e,r,i)},"id");return e.toString=()=>t,oh.serviceIds.set(t,e),e}s(Md,"createDecorator");f();f();var H0=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var yde=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},x9=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new yde(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};f();var aT=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var _8t=!1,rj=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},nj=class t{constructor(e=new aT,r=!1,n,i=_8t){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(uA,this),this._globalGraph=i?n?._globalGraph??new x9(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,OO(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)vSe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=v9.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw iSe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,n);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof H0?(n=v9.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=v9.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=oh.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,n);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let l=a-r.length;l>0?r=r.concat(new Array(l)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof H0)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof H0?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new x9(c=>c.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new rj(i);for(let u of oh.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof H0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new rj(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof H0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof H0)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(r,n,o);return a.add(l),l}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var v9=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){r=!0,l.push(`${c}CREATES -> ${u}`);let m=n(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var ij=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new aT(...e):e??new aT}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new nj(this._collection,!0)}};var sj=Md("ITelemetrySender"),sh=Md("IChatMLFetcher");var oj=class{constructor(){this._stream=new VH;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},aj=Md("IEndpointProvider");f();var Iy=Md("IParserService");f();var yR=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},b9=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},E9=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},vb=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},bb=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var lj=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new yR(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},I9=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let d;return n<=i?(vb.Assert(e===r+1,"originalStart should only be one more than originalEnd"),d=[new yR(e,0,n,i-n+1)]):e<=r?(vb.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new yR(e,r-e+1,n,0)]):(vb.Assert(e===r+1,"originalStart should only be one more than originalEnd"),vb.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,r,n,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,n,u),p=this.ComputeDiffRecursive(c+1,r,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,r,n,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new lj,B=r,N=n,W=h[0]-v[0]-i,ee=-1073741824,me=this.m_forwardHistory.length-1;do{let ae=W+e;ae===B||ae<N&&u[ae-1]<u[ae+1]?(p=u[ae+1],g=p-W-i,p<ee&&k.MarkNextChange(),ee=p,k.AddModifiedElement(p+1,g),W=ae+1-e):(p=u[ae-1]+1,g=p-W-i,p<ee&&k.MarkNextChange(),ee=p-1,k.AddOriginalElement(p,g+1),W=ae-1-e),me>=0&&(u=this.m_forwardHistory[me],e=u[0],B=1,N=u.length-1)}while(--me>=-1);E=k.getReverseChanges(),k=new lj,B=a,N=l,W=h[0]-v[0]-c,ee=1073741824,me=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let ae=W+o;ae===B||ae<N&&d[ae-1]>=d[ae+1]?(p=d[ae+1]-1,g=p-W-c,p>ee&&k.MarkNextChange(),ee=p+1,k.AddOriginalElement(p+1,g+1),W=ae+1-o):(p=d[ae-1],g=p-W-c,p>ee&&k.MarkNextChange(),ee=p,k.AddModifiedElement(p+1,g+1),W=ae-1-o),me>=0&&(d=this.m_reverseHistory[me],o=d[0],B=1,N=d.length-1)}while(--me>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,r,n,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-n,E=r-e,_=e-n,k=r-i,N=(E-b)%2===0;y[b]=e,v[E]=r;for(let W=1;W<=h/2+1;W++){let ee=0,me=0;u=this.ClipDiagonalBound(b-W,W,b,g),d=this.ClipDiagonalBound(b+W,W,b,g);for(let ae=u;ae<=d;ae+=2){ae===u||ae<d&&y[ae-1]<y[ae+1]?l=y[ae+1]:l=y[ae-1]+1,c=l-(ae-b)-_;let H=l;for(;l<r&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[ae]=l,l+c>ee+me&&(ee=l,me=c),!N&&Math.abs(ae-E)<=W-1&&l>=v[ae])return o[0]=l,a[0]=c,H<=v[ae]&&W<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-W,W,E,g),m=this.ClipDiagonalBound(E+W,W,E,g);for(let ae=p;ae<=m;ae+=2){ae===p||ae<m&&v[ae-1]>=v[ae+1]?l=v[ae+1]-1:l=v[ae-1],c=l-(ae-E)-k;let H=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[ae]=l,N&&Math.abs(ae-b)<=W&&l<=y[ae])return o[0]=l,a[0]=c,H>=y[ae]&&W<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N):null}if(W<=1447){let ae=new Int32Array(d-u+2);ae[0]=b-u+1,bb.Copy2(y,u,ae,1,d-u+1),this.m_forwardHistory.push(ae),ae=new Int32Array(m-p+2),ae[0]=E-p+1,bb.Copy2(v,p,ae,1,m-p+1),this.m_reverseHistory.push(ae)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return bb.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],bb.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return bb.Copy(e,0,i,0,e.length),bb.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(vb.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),vb.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(l=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new yR(i,o,a,l),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,l=r%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function RQe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(RQe,"isObject");function cj(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(cj,"assertType");function kQe(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(RQe(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(kQe,"safeStringify");var uj=!1,bde=!0,S8t=200,T9=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new Cb(e),i=e.getActiveDocument(),o=lT(i);if(!o||!o.isEmpty())return Si.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let _ of e.documents)_.id!==i.id&&(c.push(`RELATED DOC: ${_.getDisplayPath()}`),c.push("```patch"),c.push(...D8t(_)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let _=p<l.length;c.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),_&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,r);if(r.isCancellationRequested)return Si.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Si.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Si.noEdit({kind:"fetchFailure",error:new Error(kQe(g.err))},n);let{result:y,ttft:v}=g.val;if(v!==void 0&&n.setTtft(v),y.trim().length===0)return Si.noEdit({kind:"noSuggestions"},n);let b=dj(i.languageId,l,d,void 0,y,m),E=await Tde(this._parserService,b,i,{requireEditWithinNLines:5});if(E){let _=new No([E]);return Si.edit({edit:_},n)}else return Si.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};T9=Cu([Bs(1,Iy)],T9);var CR=class extends T9{constructor(r,n){super(CR.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return Mo.error({kind:"cancel"});let o=await Ede(this.ID,this._chatMLFetcher,[{role:Cde.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:Cde.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:l,ttft:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),Mo.ok({ignored:a,result:l,ttft:c})}};CR=Cu([Bs(0,Iy),Bs(1,sh)],CR);async function Ede(t,e,r,n,i){let o=new oj,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=k8t(c,n),d=e.fetchOne(r,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?Mo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Mo.ok({ttft:l,ignored:p,result:m})}s(Ede,"fetchUntilConvergence");function lT(t){let e=new kt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:R8t(t)}s(lT,"getOrDeduceSelectionFromLastEdit");function R8t(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],l=S5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(R8t,"deduceSelectionFromLastEdit");async function k8t(t,e){let r=B8t(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(n.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s(k8t,"fetchCompletionUntilConvergence");function B8t(t,e){let r=[],n=[];return new g9(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||r[l]){i.emitOne({kind:"completion",index:l,text:c});continue}n[l]=(n[l]??"")+c;let u=n[l].match(e);!u||typeof u.index>"u"||(r[l]=!0,i.emitOne({kind:"ignore",index:l,text:n[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[l].substring(u.index+u[0].length)}),n[l]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(B8t,"getTextAfterFirstPattern");function P8t(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],l=o[0];if(a!==l)break;n++,o.shift()}return new Jm(new Yt(n,i),o)}s(P8t,"createReducedLineEdit");var xR=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=P8t(r,n,i);let o=new No([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new xde(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new b9(this.oldLines,n),o=new b9(this.newLines,n),a=new I9(i,o),l=e(a.ComputeDiff(),i,o),c=r(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(t2(this.newLines,u))return new vde(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return PQe(this.languageId,this.oldLines,u);function d(p,m){let h=new E9(p),g=new E9(m),v=new I9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,B=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:B}}}},xde=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},vde=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new No([this.edit]);{let r=this.groupInHunks();return new No(r.map(n=>{let i=n[0],o=n[n.length-1];return new Jm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!bde)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,l)=>a+l.editDistance,0)>S8t&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!Ide(new Yt(a,l),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((c,u)=>c+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new No([this.edit]),i=r(n);this.parseErrorCount=await w9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,1),e(d)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);n=n||l,e=e.concat(c),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=tj(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(c=>tj(c,this.languageId)),i=r.map(c=>tj(c,this.languageId)),o=n.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let l=!1;for(let c=0;c<r.length;c++){let u=r[c],d=i[c];if(!d)continue;let{content:p}=d;r[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return PQe(this.languageId,this.oldLines,e)}};function Ide(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Ide,"editIsInsideEditWindow");function PQe(t,e,r){let i=e.length+1,o=r.slice(0);return new xR(t,e,new Yt(1,i),o).resolveDiff()}s(PQe,"createPossibleEditFromLines");function dj(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=gR.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new xR(t,e,v,b))},"generateEdit");function d(){n&&u(n,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(r.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let B=e.slice(_,_+v).join(`
`);E===B&&u(new Yt(r.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...dj(t,e,r,n,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let B=b(k);E.has(B)||(E.add(B),_.push(k))}return _}}s(dj,"generatePossibleEdits");async function Tde(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=uj?await w9(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(uj){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(Tde,"selectBestEdit");function D8t(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&r.push("[...]"),u?r.push(`-${n[c]}`):r.push(`${n[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;r.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&l(i,!1),i++;return r.push("[...]"),r}s(D8t,"summariseDocDiff");function DQe(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(DQe,"summarizeEditsAsUnifiedDiff");async function w9(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(w9,"getParseErrorCount");f();var Ty=je(th());f();var _9=Md("ITokenizerProvider");var Eb=class extends Ty.PromptRenderer{constructor(r,n,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,r,n,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let l=a.get(_9);return new Eb(n,i,o,l,r,a.get(sh))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===Ty.Raw.ChatRole.System&&d.role===Ty.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===Ty.Raw.ChatCompletionContentPartKind.Text&&m.type===Ty.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:Ty.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==Ty.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};Eb=Cu([Bs(3,_9),Bs(4,uA),Bs(5,sh)],Eb);f();var NQe=je(th());var fj=class extends NQe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var cT=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=I0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new tn(n,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return ql.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new ql(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var wde=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new kt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Fd(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},ah=class extends wde{constructor(r){super();this.value=r;this._transformer=new cT(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new tn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return N8t(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(L8t(r))}_validatePosition(r){if(r.line<0)return new Io(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new Io(n-1,o)}if(r.character<0)return new Io(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new Io(r.line,i):r}};function N8t(t){return new Io(t.lineNumber-1,t.column-1)}s(N8t,"corePositionToVSCodePosition");function L8t(t){return new tn(t.line+1,t.character+1)}s(L8t,"vsCodePositionToCorePosition");f();f();function LQe(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(LQe,"min");f();function _de(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>_de(n,e))}}s(_de,"toAstNode");function FQe(t,e){let r=ZI(e,a=>a.endExclusive>=t.start),n=I0(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let l=e[a];l.start>o&&i.push(new kt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new kt(o,t.endExclusive)),i}s(FQe,"subtractRange");f();f();f();var pj=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=a2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=a2(e),r=a2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=a2(e),r=a2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=a2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Sde(i,e-a)}};var Sde=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var S9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Rg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new pj(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Rg(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new Io(r.index,Math.min(r.remainder,n))}toRange(e){return new Fd(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new kt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new hR(this.validateRange(n.range),n.newText));return new Ap(r.map(n=>new il(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new hR(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof Io))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new Io(r,n):e}validateRange(e){return new Fd(this.validatePosition(e.start),this.validatePosition(e.end))}};var mj=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Sg(()=>new S9(this.text));this._originalPositionOffsetTransformer=new Sg(()=>new S9(this.originalText));this._text=new Sg(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var Rde=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},dT=class extends mj{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function gj(t,e,r){let n=[],i=[],o=[];for(let l=0;l<r.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=r[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=MQe(u,c),g=kde.fromRootNode(h,p),y=Bde.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(W=>W.node.range.intersectsOrTouches(m)?(W.node.children.length===0&&W.markAsSurviving(),!0):!1),n.push(y),i.push(y.getTextFragment());let v=s(W=>m?W.range.endExclusive<m.start?m.start-W.range.endExclusive:W.range.start>m.endExclusive?3*(W.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new G1(W=>m?W.children.length===0?W.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:LQe(W.children.map(ee=>b.get(ee)))+1:0),E=new G1(W=>{let ee=W.parent?E.get(W.parent):Number.MAX_SAFE_INTEGER,me=b.get(W);return Math.min(ee,me)}),_=!!e.tryPreserveTypeChecking,k=s(W=>_&&W.node?.kind==="import_statement"?0:100*E.get(W)+W.depth+10*(v(W)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(B!==void 0){let W=k;k=s(ee=>{let me=W(ee);return me===!1?!1:ee.node?B(ee.node,me,c):me},"costFn")}let N=y.getDescendantsAndSelf();for(let W of N){if(!W.node.node)continue;let ee=k(W.node);ee!==!1&&o.push({idx:l,node:W,cost:ee})}}o.sort(T0(l=>l.cost,w0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),n.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=n[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=r[l],d=new dT(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=n[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:FQe(kt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:_de(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(gj,"summarizeDocumentsSyncImpl");function MQe(t,e,r=void 0){let n=new kt(t.startIndex,t.endIndex),i=[],o=new Rde(r,t,n,i,e);for(let a of t.children)i.push(MQe(a,e,o));return o}s(MQe,"createRemovableNodeFromOverlayNode");var kde=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new kt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new kt(0,e.range.start),o=new kt(e.range.endExclusive,r.length),a=[],l=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,l,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,r)),l}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new kt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),l=u.range.endExclusive}let c=new kt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],n,a,r))}return a}getLeadingWs(){return F8t(this.document,this.range)}getTrailingWs(){return M8t(this.document,this.range)}};function F8t(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(F8t,"getLeadingWs");function M8t(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(M8t,"getTrailingWs");var Bde=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let l of e.children){let c=t.fromNodeParent(l,a,n,i);o.push(c)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Ib(this.node.range,this.node.document);if(!this._surviving)return new uT("");let e=Array.from(i5(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),l=e[n+1].at(0);if(a.fragment instanceof Ib&&l.fragment instanceof Ib){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=c,i.length=1,i[0].fragment=new uT(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new uT(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let r=[];for(let n of e)for(let i of n)Q8t(r,i.fragment);return hj.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},R9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(l){(n!==l||i.length>0)&&(r.push(new il(new kt(n,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof hj)for(let c of l.fragments)a(c);else l instanceof uT?i+=l.text:l instanceof Ib&&(o(l.range.start),n=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new Ap(r)}},uT=class extends R9{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Ib=class t extends R9{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new kt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new kt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new kt(this.range.start,r.range.endExclusive),this.originalText):null}},hj=class t extends R9{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new uT(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function Q8t(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof Ib&&e instanceof Ib){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(Q8t,"pushFragment");f();var Aj=je(th());function k9(t){if(Array.isArray(t))return t.map(r=>k9(r));let e=(0,Aj.toMode)(Aj.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(k9,"rawMessageToCAPI");f();f();var yj=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new An("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new An("Invalid child startIndex");if(a.endIndex>r)throw new An("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function OQe(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=O8t(o,e),[l]=UQe(t,a,void 0);return l.adjust(t,qQe(e)),l.toOverlayNode(t,!0)}catch{return new Cj(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(OQe,"getStructureUsingIndentation");function UQe(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let l=e.getStartLineNumber(r),c=e.getEndLineNumber(r);if(l>i||c>i)break;let u=a;if([a,r]=UQe(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new An("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new An("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Cj(n,i,o),r]}s(UQe,"createFoldingRangeTree");var Cj=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new An("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=Pde(e,a,a,"LINE",[]);l&&n.push(l)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Pde(e,o,o,"LINE",[]);a&&n.push(a)}return Pde(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function Pde(t,e,r,n,i){let o=t.getOffsetAtPosition(new Io(e-1,0)),a=r<t.getLineCount()?new Io(r,0):new Io(r-1,t.getLineLength(r-1)),l=t.getOffsetAtPosition(a);return new yj(o,l,n,i)}s(Pde,"createOverlayNode");function O8t(t,e){return U8t(t,qQe(e))}s(O8t,"generateFoldingRegions");function qQe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(qQe,"isOffSide");function U8t(t,e){let r=t.getOptions().tabSize,n=new Dde,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=W8t(l,r),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&n.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return n.toIndentRanges()}s(U8t,"_computeRanges");var q8t=65535,fT=16777215,QQe=4278190080,Dde=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>fT||r>fT)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new Nde(e,r)}};function W8t(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(W8t,"computeIndentLevel");var Nde=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>fT||a>fT)throw new Error("startLineNumber or endLineNumber must not exceed "+fT);for(;e.length>0&&!r(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((l&255)<<24),this._endIndexes[n]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&fT}getEndLineNumber(e){return this._endIndexes[e]&fT}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&QQe)>>>24)+((this._endIndexes[e]&QQe)>>>16);return r===q8t?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function pT(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(pT,"fromUnknown");var xl=je(th());var xj="current-version",j0="next-version",GQe=2,HQe=10,jQe=.7,G8t=/```[^\n]*\n/,wy=class extends dR{constructor(r,n,i){super(wy.ID,[o=>new AR(o),o=>new pR(o),o=>new mR(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new hH}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=lT(a),u=c?Lde(a,c):null,d=lT(l),p=d?Lde(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(GQe,HQe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new Cb(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(c){return Si.noEdit({kind:"unexpected",error:pT(c)},i)}let l=o.getArtificalDelay();return l>0&&await vy(l),a}async doGetNextEdit(r,n,i,o){return r.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Si.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Si.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Si.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Si.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let b=await Ede(this.ID,this.fetcher,k9(p),{convergence:g,ignoreReplyTextBefore:G8t,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&o.setTtft(b.val.ttft),i.isCancellationRequested)return Si.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Si.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Si.noEdit({kind:"fetchFailure",error:pT(b.err.err)},o);let E=b.val.result;if(E.length===0){let k=`<${j0}>
`,B=b.val.ignored.indexOf(k);B>=0&&(E=b.val.ignored.substring(B+k.length))}if(E=H8t(E),E.trim().length===0)return Si.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=j8t(y,l,c,E);if(!k||k.edits.length===0)return Si.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=V8t(l,k);if(B.edits.length===0)return Si.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(uj){let ee=await w9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),me=B.apply(y.documentAfterEditsNoShortening.value);if(await w9(this._parserService,y.languageId,me)>ee)return Si.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=$8t(y,B);let N=_.edits[0].lineRange.startLineNumber,W=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Ide(new Yt(N,W),u))return Si.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=dj(y.languageId,v,m,h,E,void 0),B=await Tde(this._parserService,k,y,{requireEditWithinNLines:100});if(!B)return Si.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new No([B])}return z8t(y,_)?Si.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Y8t(y,_)?Si.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):K8t(y,_)?Si.noEdit({kind:"filteredOut",message:"uncategorized"},o):J8t(y,_)?Si.noEdit({kind:"filteredOut",message:"uncategorized"},o):Si.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await vy(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=lT(i);if(c===null)return;let u=Lde(i,c),d=new ah(i.documentAfterEditsNoShortening.value),p=await ePt(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let me=X8t(i.documentAfterEditsLines,c.startLineNumber),ae=Math.max(1,Math.min(me,c.startLineNumber-GQe)),H=c.startLineNumber-ae,U=Math.min(l.length,c.endLineNumber+HQe),le=U-c.endLineNumber,ie=u.line-H,V=u.line+le,O=new Fd(ie,0,V,d.getLineLength(V));return{firstEditableLineInShortenedDocument:ae,lastEditableLineInShortenedDocument:U,editWindow:O}}(),y=gj(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:B}=await this._renderPrompt({request:r,activeDocumentSlice:E,languageId:i.languageId},n),N=E.split(/\r\n|\r|\n/).length,W=y.projectRange(g),ee=y.positionOffsetTransformer.toOffsetRange(W);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(W.start.line+1,W.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:ee.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await Eb.create(this._instantiationService,Mde,r).render(void 0,n,{trace:!1}),a=o.metadata.get(Tj)?.prediction,l=!!o.metadata.get(bj);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};wy=Cu([Bs(0,sh),Bs(1,Iy),Bs(2,uA)],wy);function H8t(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${j0}>`,`
`),t=e(t,`\`\`\`
</${j0}>`,`
`),t=e(t,`</${j0}>`,`
`),t}s(H8t,"removeSuffixFromReply");function Lde(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new ah(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(Lde,"getCursorPositionInOuterDocument");function j8t(t,e,r,n){let i=gR.fromString(e.text),o=gR.fromString(n.trimEnd()),l=new xR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(r);if(!c)return null;let u=bde?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(j8t,"generateSummarizedEditWindowEdit");function V8t(t,e){let r=e.toEdit(new Wl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(V8t,"convertSummarizedEditWindowEditToOuterDocumentEdit");function $8t(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Us.replace(new kt(a,a+i.replaceRange.length),i.newText)}),n=new ru(t.documentAfterEdits,Es.create(r));return No.fromEdit(n)}s($8t,"convertOuterDocumentEditToProjectedEdit");function z8t(t,e){let r=e.toEdit(t.documentAfterEdits),n=VQe(t.documentAfterEdits.value,r),i=new vj,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(VQe(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(z8t,"editWouldUndo");function Y8t(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!JQe(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Y8t,"editWouldDeleteWhatWasJustInserted");function K8t(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!JQe(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(Ade(i,t.languageId))return!0}return!1}s(K8t,"editWouldDeleteAComment");function J8t(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return Fde(o,i)/i.size>.8}s(J8t,"editWouldDuplicateExistingLines");function JQe(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(JQe,"editIsDeletion");function X8t(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(X8t,"findLineNumberAboveWithContent");var vj=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(zQe(this.inserted,e.inserted),zQe(this.deleted,e.deleted))}isUndoneBy(e){let r=YQe(e.inserted,e.deleted),n=YQe(e.deleted,e.inserted),i=Fde(n,this.inserted),o=Fde(r,this.deleted);return n.size>6&&i/n.size>jQe||r.size>6&&o/r.size>jQe}};function VQe(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of $Qe(c))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of $Qe(l))r.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o(Z8t(l.newText,c.newText)))}return new vj(r,n)}s(VQe,"getInformationDelta");function Z8t(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Z8t,"trimOverlap");function $Qe(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s($Qe,"to4grams");function zQe(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(zQe,"setUnion");function YQe(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(YQe,"setMinus");function Fde(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(Fde,"setIntersectionCount");async function ePt(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||OQe(new ah(e.getText()),e.languageId,void 0)}s(ePt,"getStructure");var Mde=class extends xl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${j0}>`,`\`\`\`${o}`,`${i}`,"```",`</${j0}>`].join(`
`),l=(0,xl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Tj(a)}),vscpp(xl.SystemMessage,{priority:1e3},vscpp(fj,null),this._getInstructions()),vscpp(xl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((c,u)=>c.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp(Ej,{doc:c}))):vscpp(xl.Chunk,{priority:100+u},vscpp(Ej,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((c,u)=>c.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp(Ij,{doc:c}))):vscpp(xl.Chunk,{priority:200+u},vscpp(Ij,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new bj}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",xj,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",xj,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",xj,"> and </",xj,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",j0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",j0,">IDENTICAL</",j0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",j0,">.")}}},bj=class extends xl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Ej=class extends xl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Ij=class extends xl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...DQe(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},Tj=class extends xl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};f();f();function XQe(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(XQe,"findIndexes");function tPt(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=XQe(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=r[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=XQe(t,e[l]).slice(-n).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(tPt,"deduplicateEditRegion");function ZQe(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:tPt(i,r.split(/\r?\n/),o).join(`
`)}}s(ZQe,"postProcessUpdatedEditWindow");f();var wj=je(th());function eOe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===wj.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===wj.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(eOe,"getTextPart");function rPt(t){return{type:wj.Raw.ChatCompletionContentPartKind.Text,text:t}}s(rPt,"toTextPart");function Qde(t){return[rPt(t)]}s(Qde,"toTextParts");f();var _j=Md("IDiffService");var Gde=je(th());f();var Sj="<|cursor|>",mT="<|code_to_edit|>",vR="<|/code_to_edit|>",rOe="<|area_around_code_to_edit|>",nOe="<|/area_around_code_to_edit|>",nPt="<|current_file_content|>",iPt="<|/current_file_content|>",oPt="<|edit_diff_history|>",sPt="<|/edit_diff_history|>",aPt="<|recently_viewed_code_snippets|>",lPt="<|/recently_viewed_code_snippets|>",cPt="<|recently_viewed_code_snippet|>",uPt="<|/recently_viewed_code_snippet|>",iOe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${mT} and ${vR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Sj}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${mT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${mT} and ${vR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${mT} or ${vR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function oOe(t,e,r,n){let i=t.getActiveDocument(),o=pPt(t,n),a=dPt(t,n,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${aPt}
${o}
${lPt}

${nPt}
current_file_path: ${l}
${e}
${iPt}

${oPt}
${a}
${sPt}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Sj}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${mT}\` and \`${vR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(oOe,"getUserPrompt");function dPt(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let l=fPt(a);if(l===null)continue;let c=e(l);if(r-=c,r<0)break;n.push(l)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(dPt,"getEditDiffHistory");function fPt(t){let e=[],r=No.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(fPt,"generateDocDiff");function tOe(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[cPt,n,e,uPt].join(`
`)}s(tOe,"formatCodeSnippet");function pPt(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);n&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(tOe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>r;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(tOe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(pPt,"getRecentCodeSnippets");function Ode(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Ode,"truncateCode");var sOe=2,aOe=10,Ude=15,qde=1e3,Wde=2e3;var xp=class extends dR{constructor(r,n,i){super(xp.ID,[o=>new AR(o),o=>new pR(o),o=>new mR(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new Cb(r);try{if(r.xtabEditHistory.length===0)return Si.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Si(o,i.build(o))}catch(o){return Si.noEdit({kind:"unexpected",error:pT(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=lT(o);if(a===null)return Mo.error({kind:"uncategorized",error:pT(new Error("NoSelection"))});let l=s(pe=>Math.floor(pe.length/4),"computeTokens"),c=new tn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+Sj+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-Ude),y=Math.min(h.length,m+Ude+1),v=sOe,b=aOe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),B;B=d.split(/\r?\n/).slice(E,_);let N=[E,_],W=h.slice(E,_),ee=[rOe,...h.slice(g,E),mT,...W,vR,...h.slice(_,y),nOe].join(`
`),me=ee,ae;{let pe=l(ee),re=0;if(pe>=Wde)ae=ee,re=g;else{let ue=Math.floor((Wde-pe)/2),[he]=Ode(h.slice(0,g),!0,ue),[,Ne]=Ode(h.slice(y),!1,ue);re=Math.max(he,m-qde);let Se=Math.min(Ne+y,m+qde+1);ae=[...h.slice(re,g),ee,...h.slice(y,Se)].join(`
`)}}let H=oOe(r,ae,me,l),U=[{role:Gde.Raw.ChatRole.System,content:Qde(iOe)},{role:Gde.Raw.ChatRole.User,content:Qde(H)}];if(i.setPrompt(U),await this.debounce(i),n.isCancellationRequested)return Mo.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let le=new I5,ie,V=await this._endpointProvider.getEndpointInfo(this.ID),O=await this._chatMLFetcher.fetchOne(k9(U),async(pe,re,ue)=>{ie===void 0&&(ie=le.elapsed())},{id:V.id,name:V.name},{temperature:0},n);if(O.type==="canceled")return Mo.error({kind:"gotCancelled",message:"afterFetchCall"});if(O.type!=="success")return Mo.error({kind:"fetchFailure",error:pT(O)});ie&&i.setTtft(ie),i.setResponse(O.value);let Y=xp.getBacktickSection(O.value);return await this.generateReturnEditFormat(o,k,B.join(`
`),Y,N,i)}async generateReturnEditFormat(r,n,i,o,a,l){let{updatedEditWindow:c}=ZQe(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Jm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Mo.error({kind:"noSuggestions"}):Mo.ok({editWindow:n,edit:new No(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,xp.DEBOUNCE_MS-n);r.setDebounceTime(i),await vy(i)}};xp=Cu([Bs(0,_j),Bs(1,sh),Bs(2,aj)],xp);f();var Rj=class t extends Ho{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new mP,ep(this,r.openDocuments,(i,o)=>{o.add(j1(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ul(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new ru(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=No.fromEdit(p),h=No.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new ru(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var Hde=class t{constructor(e){this.edits=e;Nu(()=>Cv(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new dA(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new dA(e,r)])}static insert(e,r){return new t([new dA(zt.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new dA(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=ql.ofText(o.text);if(e.isBefore(l)){let u=new tn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),d=c.addToPosition(u);return kj(u,d)}a.lineNumber+r!==n&&(i=0),r+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,n=l.lineNumber+r}return new tn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof tn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof tn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return kj(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new tn(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=kj(n,l);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=c}let i=kj(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new Vde(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new dA(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=ql.ofText(o.text),l=tn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),c=a.createRange(l);e.push(c),n=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new An;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new dA(zt.fromPositions(r,n),i)}equals(e){return t2(this.edits,e.edits,(r,n)=>r.equals(n))}},dA=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new An;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Hde([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(zt.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=gP(r,n),o=ql.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=gP(r,n);r=r.substring(i),n=n.substring(i);let o=S5(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function kj(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new An("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s(kj,"rangeFromPositions");var Bj=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new tn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new cT(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Rg(e)}},jde=class extends Bj{constructor(r,n){Ul(n>=1);super();this._getLineContent=r;this._lineCount=n}static{s(this,"LineBasedText")}getValueOfRange(r){if(r.startLineNumber===r.endLineNumber)return this._getLineContent(r.startLineNumber).substring(r.startColumn-1,r.endColumn-1);let n=this._getLineContent(r.startLineNumber).substring(r.startColumn-1);for(let i=r.startLineNumber+1;i<r.endLineNumber;i++)n+=`
`+this._getLineContent(i);return n+=`
`+this._getLineContent(r.endLineNumber).substring(0,r.endColumn-1),n}getLineLength(r){return this._getLineContent(r).length}get length(){let r=this._getLineContent(this._lineCount);return new ql(this._lineCount-1,r.length)}},hT=class extends jde{static{s(this,"ArrayText")}constructor(e){super(r=>e[r-1],e.length)}},Vde=class extends Bj{constructor(r){super();this.value=r;this._t=new cT(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();var bR=class{constructor(e,r,n){this.changes=e;this.moves=r;this.hitTimeout=n}static{s(this,"LinesDiff")}},ER=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var vp=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,r+1),new Yt(a,n+1));return l.modified.isEmpty||i.push(l),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),l=o.modified.intersect(n);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new Qd(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new An("not a valid diff");return new Qd(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Qd(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(lOe(this.original.endLineNumberExclusive,e)&&lOe(this.modified.endLineNumberExclusive,r))return new Qd(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Qd(zt.fromPositions(new tn(this.original.startLineNumber,1),IR(new tn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new tn(this.modified.startLineNumber,1),IR(new tn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Qd(zt.fromPositions(IR(new tn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),IR(new tn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(IR(new tn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),IR(new tn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new An}};function IR(t,e){if(t.lineNumber<1)return new tn(1,1);if(t.lineNumber>e.length)return new tn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new tn(t.lineNumber,r.length+1):t}s(IR,"normalizePosition");function lOe(t,e){return t>=1&&t<=e.length}s(lOe,"isValidLineNumber");var Tb=class t extends vp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Qd=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new An("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new An("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new dA(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function $de(t,e,r,n=!1){let i=[];for(let o of i5(t.map(a=>hPt(a,e,r)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new Tb(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Nu(()=>!n&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||r.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:Cv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s($de,"lineRangeMappingFromRangeMappings");function hPt(t,e,r){let n=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+n<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+n<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=r.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(n=1);let o=new Yt(t.originalRange.startLineNumber+n,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+n,t.modifiedRange.endLineNumber+1+i);return new Tb(o,a,[t])}s(hPt,"getLineRangeMapping");f();var pA=class t{constructor(e,r){this.diffs=e;this.hitTimeout=r}static{s(this,"DiffAlgorithmResult")}static trivial(e,r){return new t([new Yo(kt.ofLength(e.length),kt.ofLength(r.length))],!1)}static trivialTimedOut(e,r){return new t([new Yo(kt.ofLength(e.length),kt.ofLength(r.length))],!0)}},Yo=class t{constructor(e,r){this.seq1Range=e;this.seq2Range=r}static{s(this,"SequenceDiff")}static invert(e,r){let n=[];return sSe(e,(i,o)=>{n.push(t.fromOffsetPairs(i?i.getEndExclusives():fA.zero,o?o.getStarts():new fA(r,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+r)))}),n}static fromOffsetPairs(e,r){return new t(new kt(e.offset1,r.offset1),new kt(e.offset2,r.offset2))}static assertSorted(e){let r;for(let n of e){if(r&&!(r.seq1Range.endExclusive<=n.seq1Range.start&&r.seq2Range.endExclusive<=n.seq2Range.start))throw new An("Sequence diffs must be sorted");r=n}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let r=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!r||!n))return new t(r,n)}getStarts(){return new fA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new fA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},fA=class t{constructor(e,r){this.offset1=e;this.offset2=r}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},wb=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},Pj=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new An("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var TR=class{constructor(e,r){this.width=e;this.height=r;this.array=[];this.array=new Array(e*r)}static{s(this,"Array2D")}get(e,r){return this.array[e+r*this.width]}set(e,r,n){this.array[e+r*this.width]=n}};function P9(t){return t===32||t===9}s(P9,"isSpace");var B9=class t{constructor(e,r,n){this.range=e;this.lines=r;this.source=n;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=r[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let r=this.chrKeys.get(e);return r===void 0&&(r=this.chrKeys.size,this.chrKeys.set(e,r)),r}computeSimilarity(e){let r=0,n=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<n;i++)r+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-r/(this.totalCount+e.totalCount)}};var Dj=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,r,n=wb.instance,i){if(e.length===0||r.length===0)return pA.trivial(e,r);let o=new TR(e.length,r.length),a=new TR(e.length,r.length),l=new TR(e.length,r.length);for(let g=0;g<e.length;g++)for(let y=0;y<r.length;y++){if(!n.isValid())return pA.trivialTimedOut(e,r);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===r.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=r.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new Yo(new kt(g+1,u),new kt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=r.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new pA(c,!1)}};f();var wR=class{static{s(this,"MyersDiffAlgorithm")}compute(e,r,n=wb.instance){if(e.length===0||r.length===0)return pA.trivial(e,r);let i=e,o=r;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new zde;c.set(0,a(0,0));let u=new Yde;u.set(0,c.get(0)===0?null:new Nj(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!n.isValid())return pA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),B=k-d;if(b++,k>i.length||B>o.length)continue;let N=a(k,B);c.set(d,N);let W=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new Nj(W,k,B,N-k):W),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new Yo(new kt(y,h),new kt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new pA(m,!1)}},Nj=class{constructor(e,r,n,i){this.prev=e;this.x=r;this.y=n;this.length=i}static{s(this,"SnakePath")}},zde=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=r}else{if(e>=this.positiveArr.length){let n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=r}}},Yde=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){e<0?(e=-e-1,this.negativeArr[e]=r):this.positiveArr[e]=r}};f();f();var _b=class{constructor(e,r,n){this.lines=e;this.range=r;this.considerWhitespaceChanges=n;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!n){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new kt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(r=>String.fromCharCode(r)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let r=dOe(e>0?this.elements[e-1]:-1),n=dOe(e<this.elements.length?this.elements[e]:-1);if(r===7&&n===8)return 0;if(r===8)return 150;let i=0;return r!==n&&(i+=10,r===0&&n===1&&(i+=1)),i+=uOe(r),i+=uOe(n),i}translateOffset(e,r="right"){let n=I0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[n];return new tn(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+i+(i===0&&r==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){let r=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(r)?zt.fromPositions(n,n):zt.fromPositions(r,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!_R(this.elements[e]))return;let r=e;for(;r>0&&_R(this.elements[r-1]);)r--;let n=e;for(;n<this.elements.length&&_R(this.elements[n]);)n++;return new kt(r,n)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!_R(this.elements[e]))return;let r=e;for(;r>0&&_R(this.elements[r-1])&&!cOe(this.elements[r]);)r--;let n=e;for(;n<this.elements.length&&_R(this.elements[n])&&!cOe(this.elements[n]);)n++;return new kt(r,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,r){return this.elements[e]===this.elements[r]}extendToFullLines(e){let r=L1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,n=rSe(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new kt(r,n)}};function _R(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(_R,"isWordChar");function cOe(t){return t>=65&&t<=90}s(cOe,"isUpperCase");var gPt={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function uOe(t){return gPt[t]}s(uOe,"getCategoryBoundaryScore");function dOe(t){return t===10?8:t===13?7:P9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(dOe,"getCategory");function pOe(t,e,r,n,i,o){let{moves:a,excludedChanges:l}=yPt(t,e,r,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=CPt(c,n,i,e,r,o);return cSe(a,u),a=xPt(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&APt(p,h=>h.length>=2)>=2}),a=vPt(t,a),a}s(pOe,"computeMovedLines");function APt(t,e){let r=0;for(let n of t)e(n)&&r++;return r}s(APt,"countWhere");function yPt(t,e,r,n){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new B9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new B9(c.modified,r,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new vp(c.range,d.range)),l.add(c.source),l.add(d.source)),!n.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(yPt,"computeMovesFromSimpleDeletionsToSimpleInsertions");function CPt(t,e,r,n,i,o){let a=[],l=new o5;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(T0(m=>m.modified.startLineNumber,w0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${r[g-1]}:${r[g+1-1]}:${r[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(dSe(T0(m=>m.modifiedLineRange.length,w0)));let u=new p2,d=new p2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new vp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(T0(m=>m.original.startLineNumber,w0));let p=new J8(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=L1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=L1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,W=h.modified.startLineNumber-k-1;if(N>n.length||W>i.length||u.contains(W)||d.contains(N)||!fOe(n[N-1],i[W-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let B;for(B=0;B<_;B++){let N=h.original.endLineNumberExclusive+B,W=h.modified.endLineNumberExclusive+B;if(N>n.length||W>i.length||u.contains(W)||d.contains(N)||!fOe(n[N-1],i[W-1],o))break}B>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+B)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+B))),(k>0||B>0)&&(a[m]=new vp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+B),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+B)))}return a}s(CPt,"computeUnchangedMoves");function fOe(t,e,r){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new wR().compute(new _b([t],new zt(1,1,1,t.length),!1),new _b([e],new zt(1,1,1,e.length),!1),r),o=0,a=Yo.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{P9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)P9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(fOe,"areLinesSimilar");function xPt(t){if(t.length===0)return t;t.sort(T0(r=>r.original.startLineNumber,w0));let e=[t[0]];for(let r=1;r<t.length;r++){let n=e[e.length-1],i=t[r],o=i.original.startLineNumber-n.original.endLineNumberExclusive,a=i.modified.startLineNumber-n.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=n.join(i);continue}e.push(i)}return e}s(xPt,"joinCloseConsecutiveMoves");function vPt(t,e){let r=new J8(t);return e=e.filter(n=>{let i=r.findLastMonotonous(l=>l.original.startLineNumber<n.original.endLineNumberExclusive)||new vp(new Yt(1,1),new Yt(1,1)),o=L1(t,l=>l.modified.startLineNumber<n.modified.endLineNumberExclusive);return i!==o}),e}s(vPt,"removeMovesInSameDiff");f();function Kde(t,e,r){let n=r;return n=mOe(t,e,n),n=mOe(t,e,n),n=bPt(t,e,n),n}s(Kde,"optimizeSequenceDiffs");function mOe(t,e,r){if(r.length===0)return r;let n=[];n.push(r[0]);for(let o=1;o<r.length;o++){let a=n[n.length-1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){n[n.length-1]=new Yo(new kt(a.seq1Range.start,l.seq1Range.endExclusive-c),new kt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}n.push(l)}let i=[];for(let o=0;o<n.length-1;o++){let a=n[o+1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){n[o+1]=new Yo(new kt(l.seq1Range.start+c,a.seq1Range.endExclusive),new kt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return n.length>0&&i.push(n[n.length-1]),i}s(mOe,"joinSequenceDiffsByShifting");function bPt(t,e,r){if(!t.getBoundaryScore||!e.getBoundaryScore)return r;for(let n=0;n<r.length;n++){let i=n>0?r[n-1]:void 0,o=r[n],a=n+1<r.length?r[n+1]:void 0,l=new kt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new kt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?r[n]=hOe(o,t,e,l,c):o.seq2Range.isEmpty&&(r[n]=hOe(o.swap(),e,t,c,l).swap())}return r}s(bPt,"shiftSequenceDiffs");function hOe(t,e,r,n,i){let a=1;for(;t.seq1Range.start-a>=n.start&&t.seq2Range.start-a>=i.start&&r.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<n.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&r.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+r.getBoundaryScore(p)+r.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(hOe,"shiftDiffToBetterPosition");function gOe(t,e,r){let n=[];for(let i of r){let o=n[n.length-1];if(!o){n.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?n[n.length-1]=new Yo(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):n.push(i)}return n}s(gOe,"removeShortMatches");function Jde(t,e,r,n,i=!1){let o=Yo.invert(r,t.length),a=[],l=new fA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=n(t,d.offset1),h=n(e,d.offset2);if(!m||!h)return;let g=new Yo(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=n(t,E.seq1Range.start),B=n(e,E.seq2Range.start),N=new Yo(k,B),W=N.intersect(E);if(v+=W.seq1Range.length,b+=W.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return EPt(r,a)}s(Jde,"extendDiffsToEntireWordIfAppropriate");function EPt(t,e){let r=[];for(;t.length>0||e.length>0;){let n=t[0],i=e[0],o;n&&(!i||n.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),r.length>0&&r[r.length-1].seq1Range.endExclusive>=o.seq1Range.start?r[r.length-1]=r[r.length-1].join(o):r.push(o)}return r}s(EPt,"mergeSequenceDiffs");function AOe(t,e,r){let n=r;if(n.length===0)return n;let i=0,o;do{o=!1;let l=[n[0]];for(let c=1;c<n.length;c++){let p=function(h,g){let y=new kt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=n[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}n=l}while(i++<10&&o);return n}s(AOe,"removeVeryShortMatchingLinesBetweenDiffs");function yOe(t,e,r){let n=r;if(n.length===0)return n;let i=0,o;do{o=!1;let c=[n[0]];for(let u=1;u<n.length;u++){let m=function(g,y){let v=new kt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,B=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,W=t.countLinesIn(y.seq1Range),ee=y.seq1Range.length,me=e.countLinesIn(y.seq2Range),ae=y.seq2Range.length,H=2*40+50;function U(le){return Math.min(le,H)}return s(U,"cap"),Math.pow(Math.pow(U(_*40+k),1.5)+Math.pow(U(B*40+N),1.5),1.5)+Math.pow(Math.pow(U(W*40+ee),1.5)+Math.pow(U(me*40+ae),1.5),1.5)>(H**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=n[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}n=c}while(i++<10&&o);let a=[];return aSe(n,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new kt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new kt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=Yo.fromOffsetPairs(c?c.getEndExclusives():fA.zero,d?d.getStarts():fA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(yOe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var D9=class{constructor(e,r){this.trimmedHash=e;this.lines=r}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let r=e===0?0:COe(this.lines[e-1]),n=e===this.lines.length?0:COe(this.lines[e]);return 1e3-(r+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,r){return this.lines[e]===this.lines[r]}};function COe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(COe,"getIndentation");var Lj=class{constructor(){this.dynamicProgrammingDiffing=new Dj;this.myersDiffingAlgorithm=new wR}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,r,n){if(e.length<=1&&t2(e,r,(B,N)=>B===N))return new bR([],[],!1);if(e.length===1&&e[0].length===0||r.length===1&&r[0].length===0)return new bR([new Tb(new Yt(1,e.length+1),new Yt(1,r.length+1),[new Qd(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,r.length,r[r.length-1].length+1))])],[],!1);let i=n.maxComputationTimeMs===0?wb.instance:new Pj(n.maxComputationTimeMs),o=!n.ignoreTrimWhitespace,a=new Map;function l(B){let N=a.get(B);return N===void 0&&(N=a.size,a.set(B,N)),N}s(l,"getOrCreateHash");let c=e.map(B=>l(B.trim())),u=r.map(B=>l(B.trim())),d=new D9(c,e),p=new D9(u,r),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(B,N)=>e[B]===r[N]?r[N].length===0?.1:1+Math.log(1+r[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=Kde(d,p,h),h=AOe(d,p,h);let y=[],v=s(B=>{if(o)for(let N=0;N<B;N++){let W=b+N,ee=E+N;if(e[W]!==r[ee]){let me=this.refineDiff(e,r,new Yo(new kt(W,W+1),new kt(ee,ee+1)),i,o,n);for(let ae of me.mappings)y.push(ae);me.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let B of h){Nu(()=>B.seq1Range.start-b===B.seq2Range.start-E);let N=B.seq1Range.start-b;v(N),b=B.seq1Range.endExclusive,E=B.seq2Range.endExclusive;let W=this.refineDiff(e,r,B,i,o,n);W.hitTimeout&&(g=!0);for(let ee of W.mappings)y.push(ee)}v(e.length-b);let _=$de(y,new hT(e),new hT(r)),k=[];return n.computeMoves&&(k=this.computeMoves(_,e,r,c,u,i,o,n)),Nu(()=>{function B(W,ee){if(W.lineNumber<1||W.lineNumber>ee.length)return!1;let me=ee[W.lineNumber-1];return!(W.column<1||W.column>me.length+1)}s(B,"validatePosition");function N(W,ee){return!(W.startLineNumber<1||W.startLineNumber>ee.length+1||W.endLineNumberExclusive<1||W.endLineNumberExclusive>ee.length+1)}s(N,"validateRange");for(let W of _){if(!W.innerChanges)return!1;for(let ee of W.innerChanges)if(!(B(ee.modifiedRange.getStartPosition(),r)&&B(ee.modifiedRange.getEndPosition(),r)&&B(ee.originalRange.getStartPosition(),e)&&B(ee.originalRange.getEndPosition(),e)))return!1;if(!N(W.modified,r)||!N(W.original,e))return!1}return!0}),new bR(_,k,g)}computeMoves(e,r,n,i,o,a,l,c){return pOe(e,r,n,i,o,a).map(p=>{let m=this.refineDiff(r,n,new Yo(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=$de(m.mappings,new hT(r),new hT(n),!0);return new ER(p,h)})}refineDiff(e,r,n,i,o,a){let c=IPt(n).toRangeMapping2(e,r),u=new _b(e,c.originalRange,o),d=new _b(r,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&Yo.assertSorted(h),h=Kde(u,d,h),m&&Yo.assertSorted(h),h=Jde(u,d,h,(y,v)=>y.findWordContaining(v)),m&&Yo.assertSorted(h),a.extendToSubwords&&(h=Jde(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&Yo.assertSorted(h)),h=gOe(u,d,h),m&&Yo.assertSorted(h),h=yOe(u,d,h),m&&Yo.assertSorted(h);let g=h.map(y=>new Qd(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Qd.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function IPt(t){return new vp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(IPt,"toLineRangeMapping");var Fj=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,r,n){let i=await TPt(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new ER(new vp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new Tb(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Qd(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function TPt(t,e,r){let n=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new Lj().computeDiff(n,i,r),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(TPt,"computeDiff");f();var Xde=je(require("crypto"));var N9=Xde.randomUUID.bind(Xde);var SOe=je(th()),n0e=je(e9());f();var Mj=Md("ISnippyService");f();f();var L9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Qj=65;function wPt(t){let e=0,r;L9.lastIndex=0;do if(r=L9.exec(t),r&&(e+=1),e>=Qj)break;while(r);return e}s(wPt,"lexemeLength");function _Pt(t,e){let r=0,n;L9.lastIndex=0;do if(n=L9.exec(t),n&&(r+=1,r>=e))return L9.lastIndex;while(n);return t.length}s(_Pt,"offsetFirstLexemes");function xOe(t,e){let r=t.split("").reverse().join(""),n=_Pt(r,e);return r.length-n}s(xOe,"offsetLastLexemes");function Zde(t){return wPt(t)>=Qj}s(Zde,"hasMinLexemeLength");f();f();var vOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(vOe||={});var e0e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(e0e||={});var bOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(vOe.is)}e.is=t,s(t,"is")})(bOe||={});var t0e;(e=>{function t(r){if(e0e.is(r))return Mo.error(r);if(bOe.is(r))return Mo.ok(r)}e.to=t,s(t,"to")})(t0e||={});var EOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(EOe||={});var IOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(IOe||={});var TOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(TOe||={});var wOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(EOe.is)&&"page_info"in r&&IOe.is(r.page_info)&&"license_stats"in r&&TOe.is(r.license_stats)}e.is=t,s(t,"is")})(wOe||={});var r0e;(e=>{function t(r){if(e0e.is(r))return Mo.error(r);if(wOe.is(r))return Mo.ok(r)}e.to=t,s(t,"to")})(r0e||={});var Oj=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,t0e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,r0e.to)}async fetch(e,r,n){let i=this.ctx.get(Tn),o=await this.ctx.get(Gr).getToken(),a=Gx(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...t0(this.ctx),"X-GitHub-Api-Version":xf},c=i.makeAbortController(),u=await i.fetch(a,{method:"POST",headers:l,json:r,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return n(d)}};var _Oe=new Tt("[CODE REFERENCING]"),SR=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Oj,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(Dr).getTextDocument({uri:e.toString()});if(!a){_Oe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){_Oe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(E0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=Es.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!Zde(c)){let m=a.value.slice(0,o.start),h=xOe(m,Qj);l=h,c=a.value.slice(h,o.start+r.newText.length)}if(!Zde(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};SR=Cu([Bs(1,uA)],SR);async function ROe(t){let e=new ij;return e.define(sj,new i0e(t)),e.define(_j,new Fj),e.define(Iy,new H0(o0e,[!0])),e.define(Mj,new H0(SR,[t])),e.define(sh,await a0e.Create(t)),e.define(_9,new H0(l0e)),e.define(aj,new s0e(t)),e.seal()}s(ROe,"createInstantiationService");var i0e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),a=rn.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},o0e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},s0e=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==xp.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Rt).updateExPValuesAndAssignments();return{id:this.ctx.get(Rt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},a0e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await xo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=N9(),c=await this.ctx.get(xd).fetchAndStreamChat(this.ctx,a,mg.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(r)return await r(u,0,{text:d.text})},n,i,o);if(c.type==="success"){let u=[];if(r)for await(let p of c.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:eOe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},l0e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Uj("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new Uj(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Uj=class{constructor(e){this.mode=SOe.OutputMode.Raw;this.tokenizer=Bo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===n0e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===n0e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var qj=class extends Ho{constructor(r){super();this.workspace=r;this._garbageCollector=new d0e(20);this._documentCaches=new Map;ep(this,r.openDocuments,(n,i)=>{let o=new c0e(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(j1(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Sa(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},c0e=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new u0e(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},u0e=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},d0e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var F9=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},Wj=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new F9("",null),this._tail=new F9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new F9(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var Gj=class extends Ho{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new Wj(50);ep(this,r.openDocuments,(n,i)=>{let o=new f0e(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(j1(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Sa(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},f0e=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var Hj=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),n=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},RR=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:W,promptCharCount:ee,isDefaultEndpoint:me,hadLowLogProbSuggestion:ae,nonTerminatingError:H,nEditsSuggested:U,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:V,hasNextEdit:O,nextEditLogprob:Y,maxLinesPerEdit:te,noNextEditReasonKind:pe,noNextEditReasonMessage:re,firstEditStrategy:ue,firstPickStrategyOverride:he,fetchTime:Ne,fetchResult:Se,fetchError:Je,fetchStartedAfterMs:Me}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:H,noNextEditReasonKind:pe,noNextEditReasonMessage:re,firstEditStrategy:ue,firstPickStrategyOverride:he,fetchResult:Se,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(me),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:W,promptCharCount:ee,hadLowLogProbSuggestion:this._boolToNum(ae),nEditsSuggested:U,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:V,fetchStartedAfterMs:Me,fetchTime:Ne,hasNextEdit:this._boolToNum(O),nextEditLogprob:Y,maxLinesPerEdit:te})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};RR=Cu([Bs(0,sj)],RR);f();var kR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var gT=!1,kOe=300,BR=class extends Ho{constructor(r,n,i,o,a,l,c){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new qj(this._workspace);this._nextEditCache=new Gj(this._workspace);this._recentlyShownCache=new h0e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;ep(this,this._workspace.openDocuments,(u,d)=>{d.add(toe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(RR)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),l=new Hj(this._statelessNextEditProvider.ID);l.setOpportunityId(n.requestUuid??N9());let c=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await vy(kOe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await vy(kOe);else{h=new m0e,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,r,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:vP(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new kR(void 0);if(this._rejectionCollector.isRejected(r,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new kR(void 0);Ul(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new kR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(r,a,[d,h]),y}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),l=Es.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=p0e(r.lastEdits.swap(l)),d=c.compose(),p=new dT(new ah(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new Wl(o.text),g=oA.fromEdit(new ru(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new Wl(p.text).getTransformer().getRange(y));let b=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(r.docId),_=s(W=>{let me=new oA(new Wl(p.text),W).toEdit();return BOe(me,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(W=>p.projectBack(W),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(W=>p.project(W),"toProjectedOffset"),N=new C9(r.docId,E,r.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,B,r.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return Mo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=p0e(a.getDocumentAndIdx(n)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(W=>this._shortenDocument(W,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new ZH(r.headerRequestId,u.map(W=>W.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,gT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let W=this._hookupCancellation(g,o);try{y=await g.result}finally{W.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let W=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let ee=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(me){throw g.setResultError(me),me}finally{ee.dispose(),W()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return Mo.error({kind:"noSuggestions"});let _=new oA(new Wl(d.projectedDocument.text),b).toEdit(),k=BOe(_,d.projectedDocument),B=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(B);return Mo.ok(N)}_hookupCancellation(r,n){let i=new Bu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),l=i.add(new jH);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){gT&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){gT&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(r.liveDependentants>0){gT&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}gT&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(Sa(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){cj(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new dT(new ah(r.base.value),new Ap([])),clippedRange:new Yt(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new kt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,n.textLength.lineCount+1),c=p0e(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new dT(new ah(r.base.value),new Ap(u.map(p=>il.delete(n.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new y9("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await BPt(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new ah(n.base.value),a=n.edit.edits.at(0)?.range??new kt(0,0),l;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);l=o.offsetRangeToRange(new kt(h.range.start,g.range.endExclusive))}let c=POe(o.offsetRangeToRange(a)),u=gj(200*50,{costFnOverride:s((h,g,y)=>{let v=POe(y.offsetRangeToRange(h.range)),b=kPt(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};BR=Cu([Bs(4,Iy),Bs(5,uA),Bs(6,Mj)],BR);function BOe(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return Es.fromOffsetEdit(r)}s(BOe,"projectBackEdit");function POe(t){return new Yt(t.start.line+1,t.end.line+1)}s(POe,"lineRangeFromVSCodeRange");function kPt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(kPt,"lineRangeDist");async function BPt(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(BPt,"getStructure");function p0e(t){if(!t)throw new An("expected value to be defined, but it was not");return t}s(p0e,"assertDefined");var m0e=class{constructor(){this.headerRequestId=N9()}static{s(this,"NextEditFetchRequest")}},h0e=class{constructor(){this._cache=new QO(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};f();f();f();f();var AT=0;function jj(t){return t===0}s(jj,"lengthIsZero");var V0=2**26;function PR(t,e){return t*V0+e}s(PR,"toLength");function _y(t){let e=t,r=Math.floor(e/V0),n=e-r*V0;return new ql(r,n)}s(_y,"lengthToObj");function M9(t,e){let r=t+e;return e>=V0&&(r=r-t%V0),r}s(M9,"lengthAdd");function DOe(t,e){return t.reduce((r,n)=>M9(r,e(n)),AT)}s(DOe,"sumLengths");function g0e(t,e){return t===e}s(g0e,"lengthEquals");function Q9(t,e){let r=t,n=e;if(n-r<=0)return AT;let o=Math.floor(r/V0),a=Math.floor(n/V0),l=n-a*V0;if(o===a){let c=r-o*V0;return PR(0,l-c)}else return PR(a-o,l)}s(Q9,"lengthDiffNonNegative");function NOe(t,e){let r=t,n=Math.floor(r/V0),i=r-n*V0,o=e,a=Math.floor(o/V0),l=o-a*V0;return new zt(n+1,i+1,a+1,l+1)}s(NOe,"lengthsToRange");f();var DR=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${_y(this.startOffset)}...${_y(this.endOffset)}) -> ${_y(this.newLength)}`}};function FOe(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new FO(LOe(t)),n=LOe(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!jj(u);){let[p,m]=i.splitAt(u);d.push(p),u=Q9(p.lengthAfter,u),i=m??r.dequeue()}return jj(u)||d.push(new O9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&g0e(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new DR(m.startOffset,d,M9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=AT;for(let u of n){let d=o(u.lengthBefore);if(u.modified){let p=DOe(d,h=>h.lengthBefore),m=M9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=M9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(FOe,"combineTextEditInfos");var O9=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=Q9(e,this.lengthAfter);return g0e(r,AT)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,AT,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${_y(this.lengthBefore)} -> ${_y(this.lengthAfter)}`}};function LOe(t){let e=[],r=AT;for(let n of t){let i=Q9(r,n.startOffset);jj(i)||e.push(new O9(!1,i,i));let o=Q9(n.startOffset,n.endOffset);e.push(new O9(!0,o,n.newLength)),r=n.endOffset}return e}s(LOe,"toLengthMapping");var U9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Vj(n.range,ql.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=_y(n.newLength);return new Vj(NOe(n.startOffset,n.endOffset),new ql(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new DR(PR(e.range.startLineNumber-1,e.range.startColumn-1),PR(e.range.endLineNumber-1,e.range.endColumn-1),PR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=FOe(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Vj=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var $j=class{constructor(e){this.documents=e;Ul(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},zj=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new ru(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var Yj=class extends Ho{constructor(){super();this.branch=Nm("branchName",void 0);this._register(Zie((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var Jj=class extends Ho{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new y0e(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new Yj;this._register(u2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=nR(),this._documentState.forEach(o=>o.applyAllEdits()))})),ep(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new A0e(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(j1(this,{value:n.value,selection:n.selection,languageId:n.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Sa(()=>{let l=this._documentState.get(n.id);l&&this._lastDocuments.remove(l),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===r&&(l=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===r))return new $j(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=nR()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},A0e=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Wl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=iR.fromEdit(e,this._currentValue),i=U9.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return Kj(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&PPt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=nR(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:nR()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new iA(this._edits.map(o=>o.edit));return{history:new zj(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=Es.empty,o=U9.empty,a,l=0,c=Es.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(nR()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();cj(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=Kj(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||Kj(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Kj(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let B=Es.trySwap(u.edit,c);if(B)c=B.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(n.value);n=n.apply(v);let b=u.edit.compose(i),E=No.fromEdit(new ru(n,b)),k=new oA(n,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new iA(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Kj(t,e){let r=0;for(let n of t)r+=e(n);return r}s(Kj,"sum");function PPt(t,e){let r=e.getNewRanges();return t.edits.every(n=>DPt(n.range,r))}s(PPt,"editExtends");function DPt(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(DPt,"doesTouch");var y0e=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var MOe=10,lh=class{constructor(e){this.lastResultsById=new nn(MOe);this.lastResultsByUri=new nn(MOe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=ih.create(e),l=await i.getNextEdit(a,{triggerKind:1},n);if(l.result==null)return;let c=await this.ctx.get(Dr).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=sr(),m={resultId:p,nextEditResult:l,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await ROe(this.ctx),r;try{let o=await this.ctx.get(Rt).updateExPValuesAndAssignments(),a=NPt(this.ctx,o);r=e.createInstance(a?xp:wy)}catch{r=e.createInstance(wy)}let n=this.ctx.get(Lm),i=new Jj(n);return e.createInstance(BR,n,r,i,new Rj(n))}};function NPt(t,e){let r=Gi(t,Pt.NESXTab);return r!==void 0?r:t.get(Rt).enableNESXTab(e)}s(NPt,"shouldUseXTab");f();var QOe=je(ni());var Xj=class extends Lm{constructor(r){super();this._openDocuments=Nm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Dr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=ih.create(r);return this.addDocument({id:o,initialValue:i,languageId:f2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=ih.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=ih.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=ih.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new C0e(r.id,new Wl(r.initialValue??""),[],r.languageId??f2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(Dr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},C0e=class extends XU{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new tn(e.lineNumber+1,e.column+1));this.updateSelection([new kt(r,r)])}editFromLspContentChanges(e){return new iA(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(QOe.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new tn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new tn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new An(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return Es.replace(new kt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};f();var OOe=require("crypto"),mA=je(require("fs/promises")),UOe=require("os"),Sy=je(require("path"));var Ry=class{constructor(e){this.ctx=e;this.logger=new Tt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=Sy.extname(__filename)===".ts"?Sy.resolve(__dirname,"../../../packages/ripgrep/bin"):Sy.resolve(__dirname,"./bin"),o=Sy.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await mA.readFile(o),l=(0,OOe.createHash)("sha256").update(a).digest("hex"),c=Sy.join((0,UOe.homedir)(),".cache/pkg",l);await mA.mkdir(c,{recursive:!0});let u=Ii(fl(o)),d=Sy.join(c,u);try{await mA.stat(d)}catch{await mA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await mA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var qOe=require("child_process"),x0e=require("perf_hooks");var ky=new Tt("ripgrepProcessManager"),ch=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,ky.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){ky.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){ky.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){ky.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){ky.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}ky.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:sH(),command:e,args:r,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);ky.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=x0e.performance.now();ky.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,qOe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),n.stdout?.on("data",c=>{i+=c.toString()}),n.stderr?.on("data",c=>{o+=c.toString()}),n.on("close",c=>{let d=x0e.performance.now()-r;ky.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),n.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var NR=class extends kg{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var WOe=100,GOe=1e3*60*5;function HOe(t){let e=new v0e(t);t.get(ka).registerContextProvider(e),t.get(wg).add(e.id)}s(HOe,"registerRelatedFilesShim");var v0e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new EB(WOe,GOe);this.relatedFilesCache=new EB(WOe,GOe);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Rt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},l=await iq(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){E5(this.ctx,o,"relatedFilesShim")}}};f();f();f();var jOe=je(require("node:events"));var Zj="onWorkspaceWatcherChanged";var eV=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new jOe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(Zj,Eu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(Zj,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(Zj,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(Zj,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var iu=class{constructor(e){this.ctx=e;this.watchers=new nn(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Nr.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var LR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},LPt="workspaceLifecycleManager",ou=new Tt(LPt),hA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ia(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?ou.debug(this.ctx,`listener ${e.constructor.name} is already started`):(ou.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):ou.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);ou.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(Q0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Dr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){ou.debug(r,"No workspaces to add.");return}ou.debug(r,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];ou.debug(r,`Combined workspaces: ${n.map(l=>l.uri).join(", ")}`);let i=n.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));ou.debug(r,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));ou.debug(r,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));ou.debug(r,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){ou.debug(r,`Terminating watching for removed workspace: ${l.uri}`),r.get(iu).terminateWatching(l);for(let u of this.activeListeners)ou.debug(r,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;ou.debug(r,`Starting to watch new workspace: ${l.uri}`);let c=r.get(iu);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){ou.debug(r,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)ou.debug(r,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)ou.debug(r,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(iu).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function tV(t){t.set(hA,new hA(t))}s(tV,"setupWorkspaceLifecycleListener");f();f();var rV=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var FPt=64;var Rb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},gA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},b0e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,FPt)}},Sb=class extends b0e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},yi=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},yT=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},CT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Hi=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},$Oe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),nV=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(nV||{}),zOe=I.Object({result:I.Enum(nV)});var bp=class extends Sb{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:Rb,type:"shared"})}};f();var MPt=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),QPt=new Map;for(let[t,e]of MPt)QPt.set(e,t);f();function FR(t){return`[${Ii(t)}](${t})`}s(FR,"formatUriForFileWidget");function AA(t){let e=OPt(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(AA,"resolvePathInput");function OPt(t){if(t.startsWith("/")||KOe()&&qPt(t)||KOe()&&t.startsWith("\\\\"))return fl(t)}s(OPt,"resolveFsUri");function KOe(){return process.platform==="win32"}s(KOe,"isWindows");function UPt(t){return t>=65&&t<=90||t>=97&&t<=122}s(UPt,"isWindowsDriveLetter");function qPt(t){return UPt(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(qPt,"hasDriveLetter");function q9(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof yi?r.value:r instanceof CT?"":r instanceof yT?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(q9,"parseToolResultToString");function iV(t){let{content:e}=t;return{message:q9(e)}}s(iV,"formatToolErrorResult");function JOe(t){let{content:e}=t;return{data:e.map(r=>r instanceof yi?{type:"text",value:r.value}:r instanceof CT?{type:"text",value:"<unsupported>"}:r instanceof yT?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(JOe,"formatToolSuccessResult");var oV=class extends bp{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=await this.invokeClientEditFileTool(e,r,i,n);return this.getFinalEditFileResult(r,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new yi(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=AA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new eR(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(su).getToolByNameAndProvider("insert_edit_into_file",gA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(su).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}getFinalEditFileResult(e,r){if(r.status!=="success")return r;let n=q9(r.content),i=qS({uri:AA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new U0({code:n,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Hi([new yi(o.join(`
`))],"success")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=AA(n.filePath);return{progressMessage:`Editing ${FR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var XOe=new Tt("findFilesTool"),sV=class t extends bp{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new Hi([new yi("Cancelled")],"cancelled");i=await e.ctx.get(Ry).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,l=e.turn.workspaceFolders;if(!l?.length)return new Hi([new yi("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(ch),u={},d=l.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{XOe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],n,{cwd:aa(g.uri)},t.timeOutInSeconds*1e3);XOe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${aa(ko(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Hi([new yi(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Hi([new yi(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new yi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var ZOe=new Tt("findTextInFilesTool"),aV=class t extends bp{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new Hi([new yi("Cancelled")],"cancelled");i=await e.ctx.get(Ry).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=r.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Hi([new yi("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(ch),p={},m=u.map(async v=>{if(n.isCancellationRequested)throw new Error("Canceled");try{ZOe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",aa(v.uri)],E=await d.execute(i,b,n,{cwd:aa(v.uri)},t.timeOutInSeconds*1e3);ZOe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Hi([new yi(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Hi([new yi(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new yi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var lV=class extends bp{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=AA(i),l=await e.ctx.get(po).readDirectory(o.toString());return l.length===0?new Hi([new yi("Folder is empty")],"success"):new Hi([new yi(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=AA(e.input.path);return{progressMessage:`Reading directory ${FR(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var cV=class extends bp{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,l=AA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(Ln).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new U0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Hi([new yi(d.renderAsString(`
`))],"success")}else return new Hi([new yi(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new yi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=AA(n.filePath);return{progressMessage:`Reading file ${FR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function eUe(){return[new lV,new cV,new oV,new sV,new aV]}s(eUe,"getAllClsTools");var su=class{constructor(e){this.ctx=e;this._toolRegistry=new rV;for(let r of eUe())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new Da;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new Hi([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new Da;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let r=e.get(Rb.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(Rb.id)?.splice(e.get(Rb.id)?.indexOf(r)??0,1);let n=e.get(gA.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(gA.id)?.splice(e.get(gA.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(gA.id)??[],a=e.get(Rb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==Rb.id&&c!==gA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var xT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var nUe=require("crypto"),E0e=require("fs"),I0e=je(require("path"));var tUe="symbolDatabaseLookup",rUe="multiLanguageContextProviderDocumentSymbols",vT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(tUe,e);return r||(r=await this.createDBFile(e)),I0e.default.join(this.persistenceManager.directory,rUe,r)}async init(){let e=I0e.default.join(this.persistenceManager.directory,rUe);await this.createIfNotExists(e)}async dirExists(e){try{return await E0e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await E0e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,nUe.randomUUID)()}.db`;return await this.persistenceManager.update(tUe,e,r),r}async deleteDBFile(e){}};f();f();var bT=class{static{s(this,"FileSearch")}};f();var W9=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};f();f();f();var uV=je(require("path")),iUe=require("worker_threads");function oUe(t,e){return new iUe.Worker(uV.default.resolve(uV.default.extname(__filename)!==".ts"?__dirname:uV.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(oUe,"createWorker");f();var dV=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var sUe=je(ni());var fV="main.js",pV=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=oUe(fV,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new dV(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new LQ(this.id++),sUe.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new PQ(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new DQ(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new NQ(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new kQ(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new BQ(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new RQ(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(fV+"'")&&(r=new Error(`Failed to load ${fV}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${fV} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var G9=je(ni());var $0=new Tt(gv),ET=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,l)=>{await this.indexFile(l,this.languageId(l)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,l)=>{if(a===1){$0.debug(this.ctx,`workspace removed: ${l}`),await this.indexClient.tryRemoveIndex(l,G9.CancellationToken.None);return}$0.debug(this.ctx,`workspace added: ${l}`),await this.indexAddedWorkspace(l)}),this.indexClient=new pV(i,o);for(let a of i){let l=a.rootPath;this.workspaceInit.set(l,this.doWorkspaceIndex(l).then(()=>{$0.debug(this.ctx,`workspace ${l} indexed`),this.workspaceInit.delete(l)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await GPt(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,G9.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{$0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){$0.debug(this.ctx,`indexing workspace ${e}`);let r=ire.map(d=>`*${d}`);if(r.length===0)return;let i=`**/${ire.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(bT),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,G9.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));$0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),$0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{$0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,G9.CancellationToken.None)}catch(n){$0.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return xTe(e)}};async function GPt(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(GPt,"createIndexableWorkspaceFolder");f();f();var aUe=100,HPt=5e3,mV=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,l,c){let u=Date.now(),d=this.get(n,i,r,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(r,n,i,o,l,c);let p=new _n.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>aUe)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>HPt))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let l=e.substring(0,r),c=/[A-Za-z0-9]+$/.exec(l),u=r;c&&(u=c.index),r-u>aUe&&(u=r);let d={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:sr(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var hV=class{constructor(e){this.id=gv;this.selector=Array.from(pQ.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Dr),this.resolver=new T0e(this.documentManager,e)}catch(r){throw $0.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},T0e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new mV}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(xT).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Bg(o,a);c=c.applyEdits(l);let u=O4e(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,r);return $0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(XM(o))return[];throw $0.error(this.ctx,"Failed to get context",o),o}}};var H9=class extends LR{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(hA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(ka).providers.some(r=>r.id===gv)){let r=this.ctx.get(vT);this.fileWatcher=new w0e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new ET(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new _0e(this.ctx),this.ctx.set(W9,this.fileWatcher),this.ctx.set(bT,this.fileSearch),this.ctx.set(ET,this.multiLanguageContextIndexWatcher),this.ctx.get(ka).registerContextProvider(new hV(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Rt).updateExPValuesAndAssignments(),n=bU(this.ctx,r);return n.includes(gv)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},w0e=class extends W9{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},_0e=class extends bT{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(iu).getWatchedFiles(n)).map(a=>this.ctx.get(Dr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var S0e=class extends xT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new H9(e),e.set(H9,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function lUe(t){let e=t.get(hc),r=new vT(e);t.set(vT,r),t.set(xT,new S0e(t))}s(lUe,"setupMultiLanguageContextProviderFeature");f();f();f();var yA=new Map;yA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});yA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});yA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});yA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});yA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});yA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var VPt=new Tt("sdk");function gV(t,e){yA.has(t.get(un).getEditorPluginInfo().name)||VPt.warn(t,...e)}s(gV,"deprecationWarning");var cze=je($0e()),yh=je(_m());f();f();f();var Xr={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Ic=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(Zqe(e))}};function ot(t,e){let r=ms.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=Zqe(r.Errors(o));return[null,{code:Xr.InvalidParams,message:a}]}return e(n,i,o)}}s(ot,"addMethodHandlerValidation");function Zqe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(Zqe,"createErrorMessage");f();var z0e=je(ni());f();var xA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var SV="github.copilot.finishDeviceFlow",Y0e=class extends xA{constructor(){super(...arguments);this.name=SV;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(Sn).pendingSignIn;if(!i)throw new z0e.ResponseError(Xr.InvalidRequest,"No pending sign in");try{await this.ctx.get(pc).open(i.verificationUri)}catch(o){p0.warn(this.ctx,"Failed to open",i.verificationUri),p0.exception(this.ctx,o,SV)}try{return await i.status}catch(o){throw new z0e.ResponseError(Xr.DeviceFlowFailed,String(o))}finally{this.ctx.get(Sn).pendingSignIn=void 0}}},eWe=[Y0e];f();f();var is=class extends nn{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var X9="github.copilot.didAcceptCompletionItem",K0e=class extends xA{constructor(){super(...arguments);this.name=X9;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(is).get(n);return o?(Aq(this.ctx,o),!0):!1}},tWe=[K0e];f();var W6t="github.copilot.didAcceptNextEditSuggestionItem",J0e=class extends xA{constructor(){super(...arguments);this.name=W6t;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(lh).handleAcceptance(n),!0}},rWe=[J0e];f();var Z0e="github.copilot.didAcceptPanelCompletionItem",X0e=class extends xA{constructor(){super(...arguments);this.name=Z0e;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(is).get(i);return a?(A2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},nWe=[X0e];var G6t=[...eWe,...tWe,...rWe,...nWe];function iWe(t,e){let r=new Map;for(let n of G6t){let i=new n(t),o=ms.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=Py(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new Ic(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(iWe,"registerCommands");f();var oWe=je(require("node:events"));var z0=class extends SI{constructor(r){super(new MS,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${H6t(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(Pt[n],this.env[o]),this.setConfig(Pt[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new oWe.default),this.emitters.get(r)?.on("change",n)}};function H6t(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(H6t,"camelCaseToSnakeCaseAllCaps");var j6t="unknown-editor",sWe="unknown-editor-plugin",RV=class extends un{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:j6t,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:sWe,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function aWe(t){return t.getEditorPluginInfo().name!==sWe}s(aWe,"hasValidInfo");f();var cWe=require("node:events");var lWe="initialize",Dy=class{constructor(){this.emitter=new cWe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(lWe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(lWe)}};f();var Ny=je(_m());var V6t=new Map([[4,Ny.MessageType.Log],[3,Ny.MessageType.Info],[2,Ny.MessageType.Warning],[1,Ny.MessageType.Error]]),kV=class extends ja{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!Cq(e)&&n!=="console")return;let o={type:V6t.get(r),message:z3e(n,...i)},a=e.get(yr).connection;try{a.sendNotification(new Ny.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof Ny.ConnectionError)return;throw l}}};f();var uWe=je(Xa());var BV=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(yr).connection.sendNotification(new uWe.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function dWe(t){let e=t.get(Ll),r=e.deactivate();e.setReporter(new BV(t)),e.setRestrictedReporter(new BV(t,!0)),await r}s(dWe,"setupRedirectingTelemetryReporters");f();f();var PV=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var Z9=je($0e());var UR=class extends PV{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(un).getEditorPluginInfo();return await e.get(hc).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(hc).listSettings()).length>0}async markInstalled(e){let r=e.get(un).getEditorPluginInfo();await e.get(hc).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(un).getEditorPluginInfo(),n=await e.get(hc).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,Z9.gt)((0,Z9.coerce)(r.version),(0,Z9.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(un).getEditorPluginInfo();await e.get(hc).delete("versions",r.name),(await e.get(hc).listKeys("versions")).length===0&&await e.get(hc).deleteSetting("versions")}};f();var fWe=require("events"),tfe=je(require("path")),DV=je(Xa());var efe="didChangeWatchedFiles",$6t={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},uh=class t{constructor(e){this.ctx=e;this.emitter=new fWe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new DV.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(yr).connection}init(){this.ctx.get(Go).getCapabilities().watchedFiles&&this.connection.onNotification(DV.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(Go).getCapabilities().watchedFiles)return $6t;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=tfe.extname(c).toLowerCase();if(!b8.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(efe,e)}offDidChangeWatchedFiles(e){this.emitter.off(efe,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=tfe.extname(o.uri).toLowerCase();if(!b8.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:n.push(l);break;case 2:r.push(l);break;case 3:i.push(l);break}}this.emitter.emit(efe,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(Ln).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var z6t=I.Object({uri:I.String({minLength:1})});async function Y6t(t,e,r){let n=await t.get(Ln).getOrReadTextDocument(r);return[{status:ys(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Y6t,"handleCheckFileStatusChecked");var pWe=ot(z6t,Y6t);f();var K6t=I.Object({});function mWe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(mWe,"calculatePercentRemaining");async function J6t(t,e,r){let n=await t.get(Sn).getSession();if(n){let i=await dte(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:mWe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:mWe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:Xr.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:Xr.InternalError,message:"Not signed in"}]}s(J6t,"handleCheckQuotaChecked");var hWe=ot(K6t,J6t);f();var X6t=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function Z6t(t,e,r){return[await t.get(Sn).checkAndUpdateStatus(r.options),null]}s(Z6t,"handleCheckStatusChecked");var gWe=ot(X6t,Z6t);f();f();f();f();f();f();function AWe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(AWe,"filterUnsupportedReferences");function yWe(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(yWe,"convertToCopilotReferences");var CWe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var kb=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,AWe(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};f();var ol=class{static{s(this,"ConversationInspector")}};f();var rfe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ws=class{constructor(e){this.ctx=e;this.progressEntries=new nn(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Nr.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();var vA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Sn).getSession({authAuthority:n}),o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let{apiUrl:a}=this.ctx.get(pl).getConfiguredUrls(),l=new URL(`repos/${e}/${r}`,a).href;return this.ctx.get(Tn).fetch(l,{method:"GET",headers:o})}};f();f();f();var vWe=je(Y0());var bA=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-l)}}let i=new _t([(0,vWe.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},l={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[l,.4],[c,.2]],d=new _t(u.filter(([p,m])=>!qR(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Su(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||qR(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new _t([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function qR(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(qR,"isEmptyRange");var bWe=je(require("path"));var EWe=I.Object({uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa)}),nfe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Ln),n=await r.getOrReadTextDocument(e),i=ys(n);if(await this.turnContext.collectFile(lu,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new bA(n.document,e.selection,e.visibleRange),l=r.getRelativePath(n.document);if(i==="empty")return new _t([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(qR(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new _t([...c,...u])}else if(n.status==="invalid")return new _t([`The currently open file \`${bWe.basename(e.uri)}\` is content excluded.`])}},lu="current-editor",NV=class{constructor(e){this._resolver=e;this.id=lu;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new nfe(e)}};f();f();var vl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},ife=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},ofe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Jl=class{constructor(e,r,n,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new ife(this._resolver(e),this.id,this.stepTitle)}processor(e){return new ofe(this._processor(e),this.id)}};var IWe=I.Object({name:I.String(),url:I.String()}),TWe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(IWe)})),remotes:I.Optional(I.Array(IWe))}),sfe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(EA,"git repository information");let r=[];return r.push([new _t(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new _t([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new _t([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new _t(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new _t([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new _t(r)}},EA="git-metadata",LV=class extends Jl{static{s(this,"GitMetadataSkill")}constructor(e){super(EA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new sfe(r))}};async function wWe(t){let e=await t.skillResolver.resolve(lu);if(e){let a=e.uri,l=Kx(t.ctx,a);if(rTe(l))return{repoInfo:l,skillUsed:lu}}let r=await t.skillResolver.resolve(EA);if(!r||!r.remotes||r.remotes.length===0){Nr.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Nte(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:EA}}s(wWe,"extractRepoInfo");async function _We(t){let e=[];return await eNt(t,e),await tNt(t,e),await rNt(t,e),e}s(_We,"skillsToReference");async function eNt(t,e){let r=await nNt(t);r&&e.push(r)}s(eNt,"addRepositoryReference");async function tNt(t,e){let r=await iNt(t);r&&e.push(r)}s(tNt,"addSelectionReference");async function rNt(t,e){let r=[],n=await sNt(t);n&&r.push(n),r.push(...await aNt(t)),r.length>0&&e.push(...r)}s(rNt,"addFileReferences");async function nNt(t){let e=await wWe(t);if(e){let r=t.ctx.get(vA),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(nNt,"gitMetadataToReference");async function iNt(t){let e=await t.skillResolver.resolve(lu);if(e&&e.selection){let n=await t.ctx.get(Ln).getOrReadTextDocument(e),i=ys(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return oNt(e,n.document)}}s(iNt,"currentEditorToSelectionReference");function oNt(t,e){if(t.selection&&!qR(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(oNt,"extractSelection");async function sNt(t){let e=await t.skillResolver.resolve(lu);if(e){let n=await t.ctx.get(Ln).getOrReadTextDocument(e),i=ys(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(sNt,"currentEditorToFileReference");async function aNt(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(Ln);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=ys(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s(aNt,"fileReferenceToPlatformFileReference");f();f();f();f();var LWe=je(QV()),ufe=je(require("path"));var FWe=500,ANt=Math.floor(.25*FWe),OV=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=ufe.default.extname(__filename)===".ts"?ufe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await LWe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),B=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:B,end:B+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:FWe,overlap:ANt}}),n}};var yNt="fixedSize",CNt=new Map([["fixedSize",OV]]);function MWe(t){let e=t==="default"?yNt:t,r=CNt.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(MWe,"getChunkingAlgorithm");f();f();var UV=je(vx()),IA=je(require("fs")),QWe=require("os"),Tp=je(require("path")),WR=require("process");var dfe=5e4,xNt=new Tt("workspaceChunks"),qV=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Ii(r.uri),i=(0,UV.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=Tp.join(vNt(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,UV.SHA256)(e).toString().substring(0,this.pathHashLength),n=Tp.basename(e);return Tp.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await IA.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await IA.promises.mkdir(Tp.dirname(n),{recursive:!0}),await IA.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){xNt.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await IA.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await IA.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=Tp.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(Tp.join(this.cacheRootPath,n))}}async getFileHash(e){let r=Wo(e),n="";return r&&(n=await IA.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,UV.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=Wo(e);if(!i)return;async function o(p){try{return(await IA.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let r=fl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=Wo(e);if(!r)return[];let n;try{n=await IA.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=fl(Tp.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await IA.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function vNt(){return WR.env.XDG_CACHE_HOME&&Tp.isAbsolute(WR.env.XDG_CACHE_HOME)?WR.env.XDG_CACHE_HOME+"/github-copilot":(0,QWe.platform)()==="win32"?WR.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":WR.env.HOME+"/.cache/github-copilot"}s(vNt,"getXdgCachePath");var ffe=1e4;var WV=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new mfe;this.status="notStarted",this.workspaceChunks=new qV(e,r),this.cancellationToken=new pfe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(iu).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>ffe&&(this._fileCountExceeded=!0,n=n.slice(0,ffe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ta(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>dfe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Ta(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>dfe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>ffe&&(this._fileCountExceeded=!0),p4e(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await xo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},pfe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},mfe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var ha=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=MWe(r),i=new n;return new WV(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=rn.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),l=rn.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",l),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};f();f();f();f();f();function HV(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(HV,"toChatModeEnum");var Bb=class{constructor(e,r){this.request=e;this.telemetryId=sr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}},GV=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=sr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();f();f();var OWe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},UWe="Alright, This response contains a code citation.";f();var qWe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var WWe=je(require("fs")),ju=je(require("path"));var hfe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],gfe="test_",r6={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},n6=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Ii(e),n=ju.extname(r).replace(".",""),i=r6[n]??{location:"sameFolder",prefix:gfe,suffix:hfe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let d=r.replace(`.${n}`,u+"."+n);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Wo(f0(e)),l===void 0)return}else{let u=Wo(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=ju.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=fl(l);if(await this.fileExists(c))return ko(c,o[0])}parseTestFilePath(e){try{return fl(e)}catch(r){on.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Ii(e),n=ju.extname(r).replace(".",""),i=r6[n]??{location:"sameFolder",prefix:gfe,suffix:hfe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=r.substring(0,r.length-c.length-1-n.length)+"."+n;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=f0(e):l=this.determineImplFolder(e);for(let c of o){let u=ko(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=Wo(e);if(r===void 0)return;let n=ju.extname(Ii(e)).replace(".",""),i,o=r6[n]?.location??"sameFolder";o==="sameFolder"?i=ju.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,r6[n]);if(a.length>0)return fl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${ju.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(l),n?.suffix&&n?.suffix.some(c=>a.endsWith(c+r))&&o.push(l)}return o}_readdir(e){return WWe.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&Wo(this.baseUri))??"",i=ju.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(ju.sep)}getRelativeTestFolder(e,r,n,i){let o=ju.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=ju.extname(Ii(e)).replace(".",""),n=f0(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function i6(t){let e=Ii(t),r=ju.extname(e),n=r6[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(hfe.some(o=>e.endsWith(o+r))||e.startsWith(gfe))}s(i6,"isTestFile");f();var GWe=["indexed","indexing","not_indexed"],Pb=class{constructor(){this._cache=new nn(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Df(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=k1(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function HWe(t,e,r,n){let i=Bo(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(Gr).getToken(),c=CM(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!n.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await bNt(t,c,u,e.modelId,p,n);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(HWe,"fetchEmbeddings");async function bNt(t,e,r,n,i,o){let a=sr(),l=i.map(u=>u.text),c=await rI(t,e,r,void 0,a,{input:l,model:n,dimensions:1024},o,jx(t));if(c.status!==200||o.isCancellationRequested){Ta(t,new Ly(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(bNt,"sendEmbeddingsRequest");f();f();var jV=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(r.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*r[c],0)/(n*i)}terminateScoring(){}};var ENt="cosine",INt=new Map([["cosine",jV]]);function jWe(t){let e=t==="default"?ENt:t,r=INt.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(jWe,"getScoringAlgorithm");f();var K0=class{constructor(){this.workspaceScoringProviders=new nn(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=jWe(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var VWe={modelFamily:bM.textEmbedding3Small,scoringType:"default",dimensions:null};async function $We(t,e,r,n,i,o,a,l=VWe){let c={...VWe,...l},u=wNt(t,e,r,n);Nr.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(ra).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await HWe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=_Nt(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return Nr.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(B=>u.find(N=>N.id===B.id).id)}s($We,"rerankSnippets");function wNt(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(wNt,"formatEmbeddingsInput");function _Nt(t,e,r,n,i){let o=t.get(K0);return r.map(l=>({id:l.id,score:o.score(t,e,n.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s(_Nt,"scoreEmbeddings");f();f();f();var yfe=je(QV());var SNt=.75,RNt=1.2,kNt=47,VV=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await $V();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(l=>l.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,kNt),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(ha).getChunks(this.workspaceFolder),n=q1(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=q1(n,o=>o.chunk);return await BNt(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(ha).getChunks(this.workspaceFolder),a=new Afe(i);for await(let l of o){let c=await PNt({...l,chunk:l.chunk.toLowerCase()},e,r,n);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function BNt(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let c of e){o++;let u=yfe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(BNt,"calculateIDFValues");async function PNt(t,e,r,n){return{score:await yfe.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:RNt,b:SNt}}),...t}}s(PNt,"calculateBM25Score");var Afe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var NNt="bm25",LNt=new Map([["bm25",VV]]);function zWe(t){let e=t==="default"?NNt:t,r=LNt.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(zWe,"getRankingAlgorithm");var Tc=class{constructor(){this.workspaceRankingProviders=new nn(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=zWe(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};f();async function YWe(t,e){let r=t.ctx,n=await xo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(wc).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new ta(r),c=await ml(r,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Nr.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";Ta(r,new Ly(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(YWe,"parseUserQuery");var KWe=je(Y0());var Ly=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},zV=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(ha),o=i.status(e.turn.workspaceFolder),a=n.get(Tc),l=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(r){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,c).then(u=>{if(i.status(c)==="completed")return a.initialize(n,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(n,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(ha).chunkCount(n);if(a===0)return[];r.chunkCount=a;let l,c=performance.now();try{l=await YWe(e,e.cancelationToken)}catch(g){let y=new Ly(g);Ta(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(Tc),p=[],m=performance.now();try{let g=await d.query(i,n,l);r.localSnippetCount=g.length,p=g}catch(g){let y=new Ly(g);Ta(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=jr(e.turn.request.message),l=[];try{l=await $We(o,i,a,r,5,e.cancelationToken,n)}catch(d){let p=new Ly(d);Ta(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(Ln);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=jo.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...y4e},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Nr.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(ha).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return KWe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var XWe=je(JWe()),JV=je(QV()),ZWe=je(require("os")),eGe=je(Y0());var QNt=Math.min(Math.max(Math.ceil(ZWe.cpus().length/2),1),10),o6=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new XWe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await JV.start({maxWorkers:QNt})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await JV.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},$V=o6.startWorkerPool.bind(o6);var ARn=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),vfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(GR);return}let r=[],n=this.turnContext.ctx.get(Ln),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let d=new bA(u.document,c,c),p=new _t([l]),h=i6(a)?.5:.8;r.push([`Code excerpt from file \`${Wo(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(HR,a,ys(u),c)}}if(r.length>0)return r.unshift([new _t(["The user wants you to consider the following snippets when computing your answer."]),1]),new _t(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},GR="collect-project-context",YV=class extends LR{constructor(r,n=[new zV]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(hA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await $V(),!r.uri))return;let n=this.ctx.get(ha),i=this.ctx.get(iu),o=this.ctx.get(Tc),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get(ha);if(!r)return;let i=n.getParentFolder(r);if(i){let l=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Tc).deleteEmbeddings(this.ctx,i,l);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Tc).terminateRanking(this.ctx,r),this.ctx.get(K0).terminateScoring(this.ctx,r),n.workspaceCount===0&&await o6.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get(ha),o=this.ctx.get(Tc),a=this.ctx.get(K0);for(let l of n)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await $V();try{let i=r.documents.map(c=>c.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(ha),l=this.ctx.get(Tc);if(r.type==="delete"||r.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(r.type==="create"||r.type==="update"){let c=await a.chunk(this.ctx,o,r.documents);await l.addChunks(this.ctx,o,c)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(GR,"Collecting relevant project context"),await r.info(eGe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async l=>l.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let l of GWe){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(r);if(await C4e(r,a.providerType,c),l.length===0){await r.steps.error(GR,"No project context found");return}return await r.steps.finish(GR),l}case"indexing":{await r.steps.error(GR,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(GR,"No project context available");return}}}},HR="project-context",KV=class extends Jl{static{s(this,"ProjectContextSkill")}constructor(e){super(HR,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new vfe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var tGe=I.Object({labels:I.Array(I.String())}),bfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new _t(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new _t([`- ${n}`]),.9]),this.turnContext.collectLabel(dh,n)}),new _t(r)}},dh="project-labels",XV=class{constructor(e){this._resolver=e;this.id=dh;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new bfe(e)}};f();var ZV=je(Y0());var nGe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},iGe=ZV.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,oGe=ZV.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,ONt=ZV.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,Efe=`

`,rGe=iGe+Efe+oGe;function sGe(t){let e=1;if(t.length===0)return{reply:rGe,vulnerabilities:e};if(t==="0")return{reply:rGe,vulnerabilities:0};if(t==="help")return{reply:ONt,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=iGe+Efe:i==="c"&&(n+=oGe+Efe);return{reply:n.trimEnd(),vulnerabilities:e}}s(sGe,"parseVulnerabilitiesInstructions");var aGe=je(Y0());var UNt="Oops, your response got filtered. Vote down if you think this shouldn't have happened",qNt="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Ife=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},WNt=new Ife,Tfe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Xl(qNt,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},GNt=new Tfe,wfe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Xl("Alright, I'm producing a notification",void 0,[],o)}},HNt=new wfe,_fe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Xl(UNt,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},jNt=new _fe,Sfe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Xl(await cGe(e))}},VNt=new Sfe,Rfe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[dh,lu]}instructions(e,r){return"Create a function that prints a christmas tree"}},$Nt=new Rfe,kfe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Xl(jr(e.turn.request.message))}},zNt=new kfe,Bfe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Zl).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=aGe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Xl(i)}return new Xl("No prompt available")}},YNt=new Bfe,Pfe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Xl(await uGe(e,n,i))}},KNt=new Pfe,Dfe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=sGe(r);for(let o=0;o<i;o++)e.turn.annotations.push(nGe);return new Xl(n,void 0,e.turn.annotations)}},JNt=new Dfe,Nfe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(OWe),new Xl(UWe,void 0,e.turn.annotations)}},XNt=new Nfe,Lfe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Xl(qWe)}},ZNt=new Lfe,Ffe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},e7t=new Ffe,Mfe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[HR]}},t7t=new Mfe,Qfe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Xl("Alright, I'm producing a notification",void 0,[],[],[],e)}},r7t=new Qfe;function lGe(){return[WNt,GNt,HNt,jNt,$Nt,VNt,zNt,YNt,KNt,JNt,XNt,r7t,ZNt,e7t,t7t]}s(lGe,"getDebugTemplates");f();f();function Nb(t,e){if(t.length==0)return new _t([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new _t(r)}s(Nb,"weighElidableList");var dGe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:wa}))}),Ofe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Ln),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Lb,e.uri,ys(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(Lb,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Lb,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new _t([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),Nb(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new _t([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let l=r.document.detectedLanguageId;i.push(new _t([["```"+l,1],[Su(a),.8],["```",1]]))}return new _t(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new _t([n])}},Lb="problems-in-active-document",e$=class extends Jl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Lb,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new Ofe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var t$=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Dr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new n6(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=i6(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!i6(e))return;let n=this.turnContext.ctx.get(Dr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new n6(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new _t([[`${n7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new _t([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new _t([[`${i7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new _t([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new _t([[`${o7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new _t([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(Ln),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(fh,e,ys(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[Su(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(po).stat(e),!0}catch{return!1}}}},n7t="Code excerpt from the implementation source file",i7t="Code excerpt from the test file",o7t="Code excerpt from an example test file";var fGe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),qfe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(Ln),n=new t$(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(fh,e.testFileUri,ys(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(fh,e.sourceFileUri,ys(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(fh,e.sourceFileUri,ys(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(fh,e.testFileUri,ys(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},fh="test-context",r$=class extends Jl{static{s(this,"TestContextSkill")}constructor(e){super(fh,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new qfe(r))}};f();var pGe=je(Y0());var mGe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:wa}))}),Wfe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(_T,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new _t(["The latest test run produced the following failures and errors:"]);return new _t([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(Ln),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(_T,o,ys(l)),l.status==="valid"){let c=r.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);n.push([d,1])}}if(n.length>0)return new _t(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${r}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new _t([pGe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new _t(n)}appendCode(e,r,n){let i=[new _t([`
The code of file \`${r}\` is:
`]),.6],o=[new _t([["```"+n.detectedLanguageId,1],[Su(n.getText()),.9],["```",1]]),.7];return new _t([[e,1],i,o])}},_T="test-failures",n$=class extends Jl{static{s(this,"TestFailuresSkill")}constructor(e){super(_T,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new Wfe(r))}};var wp=je(Y0());var Xl=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},ST=class{constructor(e,r,n,i,o=[],a=[],l,c=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},s7t=new ST("tests","Generate unit tests","Generate Tests",wp.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[fh,_T],["chat-panel","editor"]),a7t=new ST("simplify","Simplify the code","Simplify This",wp.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],wp.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),l7t=new ST("fix","Fix problems and compile errors","Fix This",wp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Lb],["editor","chat-panel","inline"],wp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),c7t=new ST("explain","Explain how the code works","Explain This",wp.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],wp.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),u7t=new ST("doc","Document the current selection of code","Generate Docs",wp.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],wp.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),Gfe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=Vfe(e.conversation),n=wp.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new Xl(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Xl(n)}},d7t=new Gfe,Hfe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=jfe(e.ctx).filter(i=>i!=this),n=wp.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Xl(n)}},f7t=new Hfe;function s6(){return[s7t,a7t,l7t,c7t,u7t,d7t,f7t,...lGe()]}s(s6,"getPromptTemplates");function jfe(t){let e=s6();return!IB(t)&&!tm(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(jfe,"getUserFacingPromptTemplates");var $fe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Ri=class{constructor(e){this.ctx=e;this.conversations=new nn(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new GV([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(vl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new $fe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,l,c){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),l&&l.length>0&&(r.ignoredSkills=l.map(d=>({skillId:d}))),c&&(r.agent={agentSlug:c.agentSlug},r.confirmationResponse=c),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&jr(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(jr(r.request.message),"@");(await wA(this.ctx)).find(l=>l.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(jr(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(jr(r.request.message),"/"),o=s6().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(vl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function kGe(t){return typeof t>"u"||t===null}s(kGe,"isNothing");function p7t(t){return typeof t=="object"&&t!==null}s(p7t,"isObject");function m7t(t){return Array.isArray(t)?t:kGe(t)?[]:[t]}s(m7t,"toArray");function h7t(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(h7t,"extend");function g7t(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(g7t,"repeat");function A7t(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(A7t,"isNegativeZero");var y7t=kGe,C7t=p7t,x7t=m7t,v7t=g7t,b7t=A7t,E7t=h7t,bl={isNothing:y7t,isObject:C7t,toArray:x7t,repeat:v7t,isNegativeZero:b7t,extend:E7t};function BGe(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(BGe,"formatError");function l6(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=BGe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(l6,"YAMLException$1");l6.prototype=Object.create(Error.prototype);l6.prototype.constructor=l6;l6.prototype.toString=s(function(e){return this.name+": "+BGe(this,e)},"toString");var Ud=l6;function zfe(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(zfe,"getLine");function Yfe(t,e){return bl.repeat(" ",e-t.length)+t}s(Yfe,"padStart");function I7t(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=zfe(t.buffer,n[a-c],i[a-c],t.position-(n[a]-n[a-c]),p),l=bl.repeat(" ",e.indent)+Yfe((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=zfe(t.buffer,n[a],i[a],t.position,p),l+=bl.repeat(" ",e.indent)+Yfe((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bl.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=zfe(t.buffer,n[a+c],i[a+c],t.position-(n[a]-n[a+c]),p),l+=bl.repeat(" ",e.indent)+Yfe((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(I7t,"makeSnippet");var T7t=I7t,w7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],_7t=["scalar","sequence","mapping"];function S7t(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(S7t,"compileStyleAliases");function R7t(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(w7t.indexOf(r)===-1)throw new Ud('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=S7t(e.styleAliases||null),_7t.indexOf(this.kind)===-1)throw new Ud('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(R7t,"Type$1");var cu=R7t;function hGe(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(hGe,"compileList");function k7t(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(k7t,"compileMap");function Jfe(t){return this.extend(t)}s(Jfe,"Schema$1");Jfe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof cu)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Ud("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof cu))throw new Ud("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Ud("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Ud("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof cu))throw new Ud("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Jfe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=hGe(i,"implicit"),i.compiledExplicit=hGe(i,"explicit"),i.compiledTypeMap=k7t(i.compiledImplicit,i.compiledExplicit),i},"extend");var B7t=Jfe,P7t=new cu("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),D7t=new cu("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),N7t=new cu("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),L7t=new B7t({explicit:[P7t,D7t,N7t]});function F7t(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(F7t,"resolveYamlNull");function M7t(){return null}s(M7t,"constructYamlNull");function Q7t(t){return t===null}s(Q7t,"isNull");var O7t=new cu("tag:yaml.org,2002:null",{kind:"scalar",resolve:F7t,construct:M7t,predicate:Q7t,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function U7t(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(U7t,"resolveYamlBoolean");function q7t(t){return t==="true"||t==="True"||t==="TRUE"}s(q7t,"constructYamlBoolean");function W7t(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(W7t,"isBoolean");var G7t=new cu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:U7t,construct:q7t,predicate:W7t,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function H7t(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(H7t,"isHexCode");function j7t(t){return 48<=t&&t<=55}s(j7t,"isOctCode");function V7t(t){return 48<=t&&t<=57}s(V7t,"isDecCode");function $7t(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!H7t(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!j7t(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!V7t(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s($7t,"resolveYamlInteger");function z7t(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(z7t,"constructYamlInteger");function Y7t(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bl.isNegativeZero(t)}s(Y7t,"isInteger");var K7t=new cu("tag:yaml.org,2002:int",{kind:"scalar",resolve:$7t,construct:z7t,predicate:Y7t,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),J7t=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function X7t(t){return!(t===null||!J7t.test(t)||t[t.length-1]==="_")}s(X7t,"resolveYamlFloat");function Z7t(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Z7t,"constructYamlFloat");var eLt=/^[-+]?[0-9]+e/;function tLt(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bl.isNegativeZero(t))return"-0.0";return r=t.toString(10),eLt.test(r)?r.replace("e",".e"):r}s(tLt,"representYamlFloat");function rLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bl.isNegativeZero(t))}s(rLt,"isFloat");var nLt=new cu("tag:yaml.org,2002:float",{kind:"scalar",resolve:X7t,construct:Z7t,predicate:rLt,represent:tLt,defaultStyle:"lowercase"}),iLt=L7t.extend({implicit:[O7t,G7t,K7t,nLt]}),oLt=iLt,PGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),DGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sLt(t){return t===null?!1:PGe.exec(t)!==null||DGe.exec(t)!==null}s(sLt,"resolveYamlTimestamp");function aLt(t){var e,r,n,i,o,a,l,c=0,u=null,d,p,m;if(e=PGe.exec(t),e===null&&(e=DGe.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s(aLt,"constructYamlTimestamp");function lLt(t){return t.toISOString()}s(lLt,"representYamlTimestamp");var cLt=new cu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sLt,construct:aLt,instanceOf:Date,represent:lLt});function uLt(t){return t==="<<"||t===null}s(uLt,"resolveYamlMerge");var dLt=new cu("tag:yaml.org,2002:merge",{kind:"scalar",resolve:uLt}),rpe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function fLt(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=rpe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(fLt,"resolveYamlBinary");function pLt(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=rpe,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}s(pLt,"constructYamlBinary");function mLt(t){var e="",r=0,n,i,o=t.length,a=rpe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(mLt,"representYamlBinary");function hLt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(hLt,"isBinary");var gLt=new cu("tag:yaml.org,2002:binary",{kind:"scalar",resolve:fLt,construct:pLt,predicate:hLt,represent:mLt}),ALt=Object.prototype.hasOwnProperty,yLt=Object.prototype.toString;function CLt(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,yLt.call(i)!=="[object Object]")return!1;for(o in i)if(ALt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(CLt,"resolveYamlOmap");function xLt(t){return t!==null?t:[]}s(xLt,"constructYamlOmap");var vLt=new cu("tag:yaml.org,2002:omap",{kind:"sequence",resolve:CLt,construct:xLt}),bLt=Object.prototype.toString;function ELt(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],bLt.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(ELt,"resolveYamlPairs");function ILt(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(ILt,"constructYamlPairs");var TLt=new cu("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ELt,construct:ILt}),wLt=Object.prototype.hasOwnProperty;function _Lt(t){if(t===null)return!0;var e,r=t;for(e in r)if(wLt.call(r,e)&&r[e]!==null)return!1;return!0}s(_Lt,"resolveYamlSet");function SLt(t){return t!==null?t:{}}s(SLt,"constructYamlSet");var RLt=new cu("tag:yaml.org,2002:set",{kind:"mapping",resolve:_Lt,construct:SLt}),NGe=oLt.extend({implicit:[cLt,dLt],explicit:[gLt,vLt,TLt,RLt]}),Mb=Object.prototype.hasOwnProperty,i$=1,LGe=2,FGe=3,o$=4,Kfe=1,kLt=2,gGe=3,BLt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PLt=/[\x85\u2028\u2029]/,DLt=/[,\[\]\{\}]/,MGe=/^(?:!|!!|![a-z\-]+!)$/i,QGe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function AGe(t){return Object.prototype.toString.call(t)}s(AGe,"_class");function _A(t){return t===10||t===13}s(_A,"is_EOL");function kT(t){return t===9||t===32}s(kT,"is_WHITE_SPACE");function qd(t){return t===9||t===32||t===10||t===13}s(qd,"is_WS_OR_EOL");function VR(t){return t===44||t===91||t===93||t===123||t===125}s(VR,"is_FLOW_INDICATOR");function NLt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(NLt,"fromHexCode");function LLt(t){return t===120?2:t===117?4:t===85?8:0}s(LLt,"escapedHexLen");function FLt(t){return 48<=t&&t<=57?t-48:-1}s(FLt,"fromDecimalCode");function yGe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(yGe,"simpleEscapeSequence");function MLt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(MLt,"charFromCodepoint");var OGe=new Array(256),UGe=new Array(256);for(RT=0;RT<256;RT++)OGe[RT]=yGe(RT)?1:0,UGe[RT]=yGe(RT);var RT;function QLt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||NGe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(QLt,"State$1");function qGe(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=T7t(r),new Ud(e,r)}s(qGe,"generateError");function Vr(t,e){throw qGe(t,e)}s(Vr,"throwError");function s$(t,e){t.onWarning&&t.onWarning.call(null,qGe(t,e))}s(s$,"throwWarning");var CGe={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&Vr(e,"duplication of %YAML directive"),n.length!==1&&Vr(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Vr(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&Vr(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&s$(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&Vr(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],MGe.test(i)||Vr(e,"ill-formed tag handle (first argument) of the TAG directive"),Mb.call(e.tagMap,i)&&Vr(e,'there is a previously declared suffix for "'+i+'" tag handle'),QGe.test(o)||Vr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Vr(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Fb(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||Vr(t,"expected valid JSON character");else BLt.test(l)&&Vr(t,"the stream contains non-printable characters");t.result+=l}}s(Fb,"captureSegment");function xGe(t,e,r,n){var i,o,a,l;for(bl.isObject(r)||Vr(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],Mb.call(e,o)||(e[o]=r[o],n[o]=!0)}s(xGe,"mergeMappings");function $R(t,e,r,n,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&Vr(t,"nested arrays are not supported inside keys"),typeof i=="object"&&AGe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&AGe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)xGe(t,e,o[u],r);else xGe(t,e,o,r);else!t.json&&!Mb.call(r,i)&&Mb.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,Vr(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s($R,"storeMappingPair");function npe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Vr(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(npe,"readLineBreak");function sl(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;kT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(_A(i))for(npe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&s$(t,"deficient indentation"),n}s(sl,"skipSeparationSpace");function c$(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||qd(r)))}s(c$,"testDocumentSeparator");function ipe(t,e){e===1?t.result+=" ":e>1&&(t.result+=bl.repeat(`
`,e-1))}s(ipe,"writeFoldedLines");function OLt(t,e,r){var n,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),qd(h)||VR(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),qd(i)||r&&VR(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),qd(i)||r&&VR(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),qd(n))break}else{if(t.position===t.lineStart&&c$(t)||r&&VR(h))break;if(_A(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,sl(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Fb(t,o,a,!1),ipe(t,t.line-c),o=a=t.position,l=!1),kT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Fb(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(OLt,"readPlainScalar");function ULt(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Fb(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else _A(r)?(Fb(t,n,i,!0),ipe(t,sl(t,!1,e)),n=i=t.position):t.position===t.lineStart&&c$(t)?Vr(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Vr(t,"unexpected end of the stream within a single quoted scalar")}s(ULt,"readSingleQuotedScalar");function qLt(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Fb(t,r,t.position,!0),t.position++,!0;if(l===92){if(Fb(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),_A(l))sl(t,!1,e);else if(l<256&&OGe[l])t.result+=UGe[l],t.position++;else if((a=LLt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=NLt(l))>=0?o=(o<<4)+a:Vr(t,"expected hexadecimal character");t.result+=MLt(o),t.position++}else Vr(t,"unknown escape sequence");r=n=t.position}else _A(l)?(Fb(t,r,n,!0),ipe(t,sl(t,!1,e)),r=n=t.position):t.position===t.lineStart&&c$(t)?Vr(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Vr(t,"unexpected end of the stream within a double quoted scalar")}s(qLt,"readDoubleQuotedScalar");function WLt(t,e){var r=!0,n,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(sl(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;r?E===44&&Vr(t,"expected the node content, but found ','"):Vr(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),qd(u)&&(p=m=!0,t.position++,sl(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,zR(t,e,i$,!1,!0),v=t.tag,y=t.result,sl(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===n)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),sl(t,!0,e),zR(t,e,i$,!1,!0),b=t.result),h?$R(t,l,g,v,y,b,n,i,o):p?l.push($R(t,null,g,v,y,b,n,i,o)):l.push(y),sl(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(r=!0,E=t.input.charCodeAt(++t.position)):r=!1}Vr(t,"unexpected end of the stream within a flow collection")}s(WLt,"readFlowCollection");function GLt(t,e){var r,n,i=Kfe,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Kfe===i?i=p===43?gGe:kLt:Vr(t,"repeat of a chomping mode identifier");else if((d=FLt(p))>=0)d===0?Vr(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Vr(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(kT(p)){do p=t.input.charCodeAt(++t.position);while(kT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!_A(p)&&p!==0)}for(;p!==0;){for(npe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),_A(p)){c++;continue}if(t.lineIndent<l){i===gGe?t.result+=bl.repeat(`
`,o?1+c:c):i===Kfe&&o&&(t.result+=`
`);break}for(n?kT(p)?(u=!0,t.result+=bl.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=bl.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=bl.repeat(`
`,c):t.result+=bl.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,r=t.position;!_A(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Fb(t,r,t.position,!1)}return!0}s(GLt,"readBlockScalar");function vGe(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Vr(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!qd(a))));){if(l=!0,t.position++,sl(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,zR(t,e,FGe,!1,!0),o.push(t.result),sl(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)Vr(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(vGe,"readBlockSequence");function HLt(t,e,r){var n,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Vr(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&qd(n))E===63?(v&&($R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):Vr(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=n;else{if(a=t.line,l=t.lineStart,c=t.position,!zR(t,r,LGe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);kT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),qd(E)||Vr(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&($R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)Vr(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)Vr(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),zR(t,e,o$,!0,i)&&(v?g=t.result:y=t.result),v||($R(t,p,m,h,g,y,a,l,c),h=g=y=null),sl(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)Vr(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&$R(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(HLt,"readBlockMapping");function jLt(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&Vr(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Vr(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!qd(a);)a===33&&(n?Vr(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),MGe.test(i)||Vr(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),DLt.test(o)&&Vr(t,"tag suffix cannot contain flow indicator characters")}o&&!QGe.test(o)&&Vr(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Vr(t,"tag name is malformed: "+o)}return r?t.tag=o:Mb.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Vr(t,'undeclared tag handle "'+i+'"'),!0}s(jLt,"readTagProperty");function VLt(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Vr(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!qd(r)&&!VR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Vr(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(VLt,"readAnchorProperty");function $Lt(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!qd(n)&&!VR(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Vr(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Mb.call(t.anchorMap,r)||Vr(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],sl(t,!0,-1),!0}s($Lt,"readAlias");function zR(t,e,r,n,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=o$===r||FGe===r,n&&sl(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;jLt(t)||VLt(t);)sl(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||o$===r)&&(i$===r||LGe===r?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(vGe(t,v)||HLt(t,v,y))||WLt(t,y)?d=!0:(a&&GLt(t,y)||ULt(t,y)||qLt(t,y)?d=!0:$Lt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&Vr(t,"alias node should not have any properties")):OLt(t,y,i$===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&vGe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Vr(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Mb.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||Vr(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&Vr(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Vr(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(zR,"composeNode");function zLt(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(sl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!qd(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Vr(t,"directive name must not be less than one character in length");a!==0;){for(;kT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!_A(a));break}if(_A(a))break;for(r=t.position;a!==0&&!qd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&npe(t),Mb.call(CGe,n)?CGe[n](t,n,i):s$(t,'unknown document directive "'+n+'"')}if(sl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,sl(t,!0,-1)):o&&Vr(t,"directives end mark is expected"),zR(t,t.lineIndent-1,o$,!1,!0),sl(t,!0,-1),t.checkLineBreaks&&PLt.test(t.input.slice(e,t.position))&&s$(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&c$(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,sl(t,!0,-1));return}if(t.position<t.length-1)Vr(t,"end of the stream or a document separator is expected");else return}s(zLt,"readDocument");function WGe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new QLt(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Vr(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)zLt(r);return r.documents}s(WGe,"loadDocuments");function YLt(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=WGe(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(YLt,"loadAll$1");function KLt(t,e){var r=WGe(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Ud("expected a single document in the stream, but found more")}}s(KLt,"load$1");var JLt=YLt,XLt=KLt,GGe={loadAll:JLt,load:XLt},HGe=Object.prototype.toString,jGe=Object.prototype.hasOwnProperty,ope=65279,ZLt=9,c6=10,eFt=13,tFt=32,rFt=33,nFt=34,Xfe=35,iFt=37,oFt=38,sFt=39,aFt=42,VGe=44,lFt=45,a$=58,cFt=61,uFt=62,dFt=63,fFt=64,$Ge=91,zGe=93,pFt=96,YGe=123,mFt=124,KGe=125,uu={};uu[0]="\\0";uu[7]="\\a";uu[8]="\\b";uu[9]="\\t";uu[10]="\\n";uu[11]="\\v";uu[12]="\\f";uu[13]="\\r";uu[27]="\\e";uu[34]='\\"';uu[92]="\\\\";uu[133]="\\N";uu[160]="\\_";uu[8232]="\\L";uu[8233]="\\P";var hFt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],gFt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function AFt(t,e){var r,n,i,o,a,l,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&jGe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),r[a]=l;return r}s(AFt,"compileStyleMap");function yFt(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Ud("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bl.repeat("0",n-e.length)+e}s(yFt,"encodeHex");var CFt=1,u6=2;function xFt(t){this.schema=t.schema||NGe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=AFt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?u6:CFt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(xFt,"State");function bGe(t,e){for(var r=bl.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(bGe,"indentString");function Zfe(t,e){return`
`+bl.repeat(" ",t.indent*e)}s(Zfe,"generateNextLine");function vFt(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(vFt,"testImplicitResolving");function l$(t){return t===tFt||t===ZLt}s(l$,"isWhitespace");function d6(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ope||65536<=t&&t<=1114111}s(d6,"isPrintable");function EGe(t){return d6(t)&&t!==ope&&t!==eFt&&t!==c6}s(EGe,"isNsCharOrWhitespace");function IGe(t,e,r){var n=EGe(t),i=n&&!l$(t);return(r?n:n&&t!==VGe&&t!==$Ge&&t!==zGe&&t!==YGe&&t!==KGe)&&t!==Xfe&&!(e===a$&&!i)||EGe(e)&&!l$(e)&&t===Xfe||e===a$&&i}s(IGe,"isPlainSafe");function bFt(t){return d6(t)&&t!==ope&&!l$(t)&&t!==lFt&&t!==dFt&&t!==a$&&t!==VGe&&t!==$Ge&&t!==zGe&&t!==YGe&&t!==KGe&&t!==Xfe&&t!==oFt&&t!==aFt&&t!==rFt&&t!==mFt&&t!==cFt&&t!==uFt&&t!==sFt&&t!==nFt&&t!==iFt&&t!==fFt&&t!==pFt}s(bFt,"isPlainSafeFirst");function EFt(t){return!l$(t)&&t!==a$}s(EFt,"isPlainSafeLast");function a6(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(a6,"codePointAt");function JGe(t){var e=/^\n* /;return e.test(t)}s(JGe,"needIndentIndicator");var XGe=1,epe=2,ZGe=3,eHe=4,jR=5;function IFt(t,e,r,n,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=n!==-1,g=-1,y=bFt(a6(t,0))&&EFt(a6(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=a6(t,c),!d6(u))return jR;y=y&&IGe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=a6(t,c),u===c6)p=!0,h&&(m=m||c-g-1>n&&t[g+1]!==" ",g=c);else if(!d6(u))return jR;y=y&&IGe(u,d,l),d=u}m=m||h&&c-g-1>n&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?XGe:o===u6?jR:epe:r>9&&JGe(t)?jR:a?o===u6?jR:epe:m?eHe:ZGe}s(IFt,"chooseScalarStyle");function TFt(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===u6?'""':"''";if(!t.noCompatMode&&(hFt.indexOf(e)!==-1||gFt.test(e)))return t.quotingType===u6?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function c(u){return vFt(t,u)}switch(s(c,"testAmbiguity"),IFt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!n,i)){case XGe:return e;case epe:return"'"+e.replace(/'/g,"''")+"'";case ZGe:return"|"+TGe(e,t.indent)+wGe(bGe(e,o));case eHe:return">"+TGe(e,t.indent)+wGe(bGe(wFt(e,a),o));case jR:return'"'+_Ft(e)+'"';default:throw new Ud("impossible error: invalid scalar style")}}()}s(TFt,"writeScalar");function TGe(t,e){var r=JGe(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(TGe,"blockHeader");function wGe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(wGe,"dropEndingNewline");function wFt(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,_Ge(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",n+=l+(!i&&!o&&c!==""?`
`:"")+_Ge(c,e),i=o}return n}s(wFt,"foldString");function _Ge(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,c="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(_Ge,"foldLine");function _Ft(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=a6(t,i),n=uu[r],!n&&d6(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||yFt(r);return e}s(_Ft,"escapeString");function SFt(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(My(t,e,l,!1,!1)||typeof l>"u"&&My(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(SFt,"writeFlowSequence");function SGe(t,e,r,n){var i="",o=t.tag,a,l,c;for(a=0,l=r.length;a<l;a+=1)c=r[a],t.replacer&&(c=t.replacer.call(r,String(a),c)),(My(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&My(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Zfe(t,e)),t.dump&&c6===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(SGe,"writeBlockSequence");function RFt(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),My(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),My(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}s(RFt,"writeFlowMapping");function kFt(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Ud("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!n||i!=="")&&(m+=Zfe(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),My(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&c6===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=Zfe(t,e)),My(t,e+1,d,!0,p)&&(t.dump&&c6===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(kFt,"writeBlockMapping");function RGe(t,e,r){var n,i,o,a,l,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,HGe.call(l.represent)==="[object Function]")n=l.represent(e,c);else if(jGe.call(l.represent,c))n=l.represent[c](e,c);else throw new Ud("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}s(RGe,"detectType");function My(t,e,r,n,i,o,a){t.tag=null,t.dump=r,RGe(t,r,!1)||RGe(t,r,!0);var l=HGe.call(t.dump),c=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(kFt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(RFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?SGe(t,e-1,t.dump,i):SGe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(SFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&TFt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Ud("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(My,"writeNode");function BFt(t,e){var r=[],n=[],i,o;for(tpe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(BFt,"getDuplicateReferences");function tpe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)tpe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)tpe(t[n[i]],e,r)}s(tpe,"inspectNode");function PFt(t,e){e=e||{};var r=new xFt(e);r.noRefs||BFt(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),My(r,0,n,!0,!0)?r.dump+`
`:""}s(PFt,"dump$1");var DFt=PFt,NFt={dump:DFt};function spe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(spe,"renamed");var ukn=GGe.load,dkn=GGe.loadAll,ape=NFt.dump;var fkn=spe("safeLoad","load"),pkn=spe("safeLoadAll","loadAll"),mkn=spe("safeDump","dump");var BT=je(Y0());var lpe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Zl=class{constructor(){this.dump=new nn(25);this.promptsDump=new nn(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new lpe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function tHe(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(tHe,"filterConversationTurns");function Vfe(t){return tHe(t).getLastTurn()?.id}s(Vfe,"getLastTurnId");async function cGe(t){let e=tHe(t.conversation),r=Vfe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Zl).getDump(r),o=MFt(i,e.turns);on.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await QFt(i,t.ctx);return BT.default`
        ${FFt(t.conversation,r)}
        ${LFt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(cGe,"getConversationDump");function LFt(t){let e=t.get(un);return BT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(LFt,"getEditorInfoDumpMessage");function FFt(t,e){return BT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(FFt,"getInfoDumpMessage");async function uGe(t,e,r){let n=t.ctx.get(vl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Ri).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&jr(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${jr(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=BT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=n.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=BT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${ape(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=BT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(uGe,"getSkillsDump");function MFt(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:jr(n.request.message)};return n.response&&(o.response=jr(n.response.message)),o})};return ape(r)}s(MFt,"toSimulationFormat");async function QFt(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(Ln).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();on.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(QFt,"fileDump");f();function cpe(t,e){let r=Bo(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(jr(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(cpe,"countMessagesTokens");f();function rHe(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=r?`The user is logged in as ${r} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(rHe,"chatBasePrompt");f();f();f();f();f();function nHe(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([Su(i.join(`
`)),1]),i=[],r.push([new _t([o]),1])):r.push([new _t([o]),1]),n=!n):n?i.push(o):r.push([new _t([o]),.8]);return n&&(r.push([Su(i.join(`
`)),1]),r.push([new _t(["```"]),1])),new _t(r)}s(nHe,"fromMessage");function YR(t){let e=upe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=iHe(i.request,n+1),a=i.response&&i.response?.type!=="meta"?iHe(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(nHe(l))}return r.length>0?new _t([[new _t(["Consider the following conversation history:"]),1],[Nb(r,"inverseLinear"),1]]):null}s(YR,"fromHistory");var OFt=5;function upe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&jr(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,OFt).reverse()}s(upe,"filterTurns");function iHe(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=jr(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${jr(t.message)}`}s(iHe,"formatTurnMessage");f();f();f();var UFt=4,dpe={skillIds:[]},u$=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let l=await xo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:l},u=await this.ctx.get(wc).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,d);return m.type!=="success"&&(Nr.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,d)),await e.ctx.get(ol).inspectFetchResult(m),this.handleResult(m,d,jr(a),o,u.toolConfig)}else return dpe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),dpe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,UFt);else return Nr.error(this.ctx,"Missing tool call in meta prompt response"),dpe;let c=r.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:n});return Bt(this.ctx,`${Ac(i)}.metaPrompt`,c,0),Bt(this.ctx,`${Ac(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Bt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var d$=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return de(e,r,"org.springframework.boot","Spring Boot"),de(e,r,"jakarta.jakartaee-api","Jakarta EE"),de(e,r,"javax:javaee-api","Java EE"),de(e,r,"org.apache.struts:struts2-core","Apache Struts"),de(e,r,"org.hibernate:hibernate-core","Hibernate"),de(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),de(e,r,"javax.faces:jsf-api","JSF"),de(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return de(e,r,"com.google.guava","Google Guava"),de(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),de(e,r,"org.apache.commons:commons-io","Apache Commons IO"),de(e,r,"joda-time:joda-time","Joda-Time"),de(e,r,"com.google.code.gson:gson","Google Gson"),de(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),de(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),de(e,r,"org.apache.commons:commons-net","Apache Commons Net"),de(e,r,"org.apache.poi:poi","Apache POI"),de(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),de(e,r,"junit:junit","JUnit"),de(e,r,"org.testng:testng","TestNG"),de(e,r,"org.spockframework:spock-core","Spock"),de(e,r,"io.cucumber:cucumber-java","Cucumber"),de(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return de(e,r,"org.mockito","Mockito"),de(e,r,"org.assertj","AssertJ"),de(e,r,"org.hamcrest","Hamcrest"),de(e,r,"org.powermock","PowerMock"),de(e,r,"org.jmock","JMock"),de(e,r,"org.easymock","EasyMock"),de(e,r,"org.jmockit:jmockit","JMockit"),de(e,r,"com.github.tomakehurst:wiremock","WireMock"),de(e,r,"org.dbunit:dbunit","DBUnit"),de(e,r,"com.icegreen:greenmail","GreenMail"),de(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),de(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),de(e,r,"io.rest-assured:rest-assured","Rest-Assured"),de(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),de(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},f$=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"@types/node","Node.js"),de(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||de(e,r,"react","React"),de(e,r,"angular","Angular"),de(e,r,"vue","Vue.js"),de(e,r,"ember","Ember.js"),de(e,r,"backbone","Backbone.js"),de(e,r,"meteor","Meteor"),de(e,r,"polymer","Polymer"),de(e,r,"aurelia","Aurelia"),de(e,r,"knockout","Knockout.js"),de(e,r,"dojo","Dojo Toolkit"),de(e,r,"mithril","Mithril.js"),de(e,r,"marionette","Marionette.js"),de(e,r,"marko","Marko.js"),de(e,r,"svelte","Svelte"),de(e,r,"hyperapp","Hyperapp"),de(e,r,"inferno","Inferno.js"),de(e,r,"preact","Preact"),de(e,r,"riot","Riot.js"),de(e,r,"moon","Moon.js"),de(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return de(e,r,"lodash","Lodash"),de(e,r,"moment","Moment.js"),de(e,r,"axios","Axios"),de(e,r,"redux","Redux"),de(e,r,"recoil","Recoil"),de(e,r,"jquery","jQuery"),de(e,r,"d3","D3.js"),de(e,r,"underscore","Underscore.js"),de(e,r,"ramda","Ramda"),de(e,r,"immutable","Immutable.js"),de(e,r,"rxjs","RxJS"),de(e,r,"three","Three.js"),de(e,r,"socket.io","Socket.IO"),de(e,r,"express","Express.js"),de(e,r,"next","Next.js"),de(e,r,"puppeteer","Puppeteer"),de(e,r,"cheerio","Cheerio"),de(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"jest","Jest"),de(e,r,"mocha","Mocha"),de(e,r,"jasmine","Jasmine"),de(e,r,"ava","AVA"),de(e,r,"qunit","QUnit"),de(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return de(e,r,"chai","Chai"),de(e,r,"sinon","Sinon"),de(e,r,"enzyme","Enzyme"),de(e,r,"protractor","Protractor"),de(e,r,"supertest","Supertest"),de(e,r,"nock","Nock"),de(e,r,"cypress","Cypress"),de(e,r,"@testing-library/react","React Testing Library"),r}},p$=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"github.com/gorilla/mux","Gorilla Mux"),de(e,r,"github.com/go-chi/chi","Chi"),de(e,r,"github.com/gin-gonic/gin","Gin"),de(e,r,"github.com/labstack/echo","Echo"),de(e,r,"github.com/revel/revel","Revel"),de(e,r,"github.com/astaxie/beego","Beego"),de(e,r,"github.com/go-martini/martini","Martini"),de(e,r,"github.com/gobuffalo/buffalo","Buffalo"),de(e,r,"github.com/goji/goji","Goji"),de(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return de(e,r,"net/http","net/http"),de(e,r,"fmt","fmt"),de(e,r,"io","io"),de(e,r,"time","time"),de(e,r,"math","math"),de(e,r,"strconv","strconv"),de(e,r,"strings","strings"),de(e,r,"sort","sort"),de(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"github.com/onsi/ginkgo","ginkgo"),de(e,r,"github.com/onsi/gomega","gomega"),de(e,r,"github.com/stretchr/testify","testify"),de(e,r,"gopkg.in/check.v1","gocheck"),de(e,r,"github.com/franela/goblin","goblin"),de(e,r,"github.com/DATA-DOG/godog","godog"),de(e,r,"github.com/stesla/gospec","gospec"),de(e,r,"github.com/rjeczalik/gotest","gotest"),de(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return de(e,r,"github.com/stretchr/testify","Testify"),de(e,r,"github.com/smartystreets/goconvey","GoConvey"),de(e,r,"github.com/onsi/ginkgo","Ginkgo"),de(e,r,"github.com/golang/mock","GoMock"),de(e,r,"gopkg.in/check.v1","GoCheck"),de(e,r,"github.com/franela/goblin","Goblin"),de(e,r,"github.com/DATA-DOG/godog","GoDog"),de(e,r,"github.com/onsi/gomega","Gomega"),de(e,r,"github.com/stesla/gospec","GoSpec"),de(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},m$=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"flask","Flask"),de(e,r,"django","Django"),de(e,r,"pyramid","Pyramid"),de(e,r,"tornado","Tornado"),de(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return de(e,r,"requests","requests"),de(e,r,"numpy","numpy"),de(e,r,"pandas","pandas"),de(e,r,"scipy","scipy"),de(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"pytest","Pytest"),de(e,r,"unittest","Unittest"),de(e,r,"doctest","Doctest"),de(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return de(e,r,"mock","Mock"),de(e,r,"hypothesis","Hypothesis"),de(e,r,"behave","Behave"),de(e,r,"lettuce","Lettuce"),de(e,r,"testify","Testify"),de(e,r,"pyhamcrest","PyHamcrest"),r}},h$=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"laravel/framework","Laravel"),de(e,r,"symfony/symfony","Symfony"),de(e,r,"slim/slim","Slim"),de(e,r,"cakephp/cakephp","CakePHP"),de(e,r,"yiisoft/yii2","Yii"),de(e,r,"zendframework/zendframework","Zend Framework"),de(e,r,"phalcon/cphalcon","Phalcon"),de(e,r,"bcosca/fatfree","Fat-Free"),de(e,r,"fuel/fuel","FuelPHP"),de(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return de(e,r,"monolog/monolog","Monolog"),de(e,r,"vlucas/phpdotenv","PHP dotenv"),de(e,r,"symfony/console","Symfony Console"),de(e,r,"guzzlehttp/guzzle","GuzzleHttp"),de(e,r,"ramsey/uuid","Ramsey UUID"),de(e,r,"doctrine/orm","Doctrine ORM"),de(e,r,"php-di/php-di","PHP-DI"),de(e,r,"phpunit/php-timer","PHPUnit Timer"),de(e,r,"symfony/finder","Symfony Finder"),de(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"phpunit/phpunit","PHPUnit"),de(e,r,"behat/behat","Behat"),de(e,r,"phpspec/phpspec","PHPSpec"),de(e,r,"codeception/codeception","Codeception"),de(e,r,"atoum/atoum","Atoum"),de(e,r,"pestphp/pest","PestPHP"),de(e,r,"kahlan/kahlan","Kahlan"),de(e,r,"peridot-php/peridot","Peridot"),de(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return de(e,r,"mockery/mockery","Mockery"),de(e,r,"php-mock/php-mock","PHP-Mock"),de(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),de(e,r,"padraic/mockery","Padraic Mockery"),de(e,r,"phpspec/prophecy","PHPSpec Prophecy"),de(e,r,"phpunit/php-invoker","PHPUnit Invoker"),de(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),de(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),de(e,r,"phpunit/php-timer","PHPUnit Timer"),de(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},g$=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"Microsoft.NETCore.App",".NET Core"),de(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return de(e,r,"EntityFramework","Entity Framework"),de(e,r,"Newtonsoft.Json","Newtonsoft.Json"),de(e,r,"AutoMapper","AutoMapper"),de(e,r,"Serilog","Serilog"),de(e,r,"Dapper","Dapper"),de(e,r,"Polly","Polly"),de(e,r,"FluentValidation","FluentValidation"),de(e,r,"MediatR","MediatR"),de(e,r,"Hangfire","Hangfire"),de(e,r,"RabbitMQ.Client","RabbitMQ.Client"),de(e,r,"MassTransit","MassTransit"),de(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),de(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),de(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),de(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"xunit","xUnit"),de(e,r,"NUnit","NUnit"),de(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return de(e,r,"Moq","Moq"),de(e,r,"FluentAssertions","FluentAssertions"),de(e,r,"Bogus","Bogus"),de(e,r,"RestSharp","RestSharp"),de(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},A$=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"flutter","Flutter"),de(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return de(e,r,"dartx","dartx"),de(e,r,"provider","Provider"),de(e,r,"rxdart","RxDart"),de(e,r,"dio","Dio"),de(e,r,"json_serializable","json_serializable"),de(e,r,"freezed","Freezed"),de(e,r,"moor","Moor"),de(e,r,"hive","Hive"),de(e,r,"http","http"),de(e,r,"path","path"),de(e,r,"intl","intl"),de(e,r,"equatable","equatable"),de(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"test","test"),de(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return de(e,r,"mockito","mockito"),de(e,r,"bloc_test","bloc_test"),r}},y$=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"rails","Rails"),de(e,r,"sinatra","Sinatra"),de(e,r,"hanami","Hanami"),de(e,r,"grape","Grape"),de(e,r,"roda","Roda"),de(e,r,"padrino","Padrino"),de(e,r,"cuba","Cuba"),de(e,r,"ramaze","Ramaze"),de(e,r,"nyara","Nyara"),de(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return de(e,r,"active_record","ActiveRecord"),de(e,r,"sequel","Sequel"),de(e,r,"rom","ROM"),de(e,r,"datamapper","DataMapper"),de(e,r,"mongoid","Mongoid"),de(e,r,"neo4j","Neo4j"),de(e,r,"redis","Redis"),de(e,r,"cassandra","Cassandra"),de(e,r,"couchrest","CouchRest"),de(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"rspec","RSpec"),de(e,r,"minitest","Minitest"),de(e,r,"cucumber","Cucumber"),de(e,r,"spinach","Spinach"),de(e,r,"turnip","Turnip"),de(e,r,"bacon","Bacon"),de(e,r,"shoulda","Shoulda"),de(e,r,"test-unit","Test::Unit"),de(e,r,"wrong","Wrong"),de(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return de(e,r,"factory_bot","FactoryBot"),de(e,r,"faker","Faker"),de(e,r,"ffaker","FFaker"),de(e,r,"fabrication","Fabrication"),de(e,r,"machinist","Machinist"),de(e,r,"mocha","Mocha"),de(e,r,"flexmock","FlexMock"),de(e,r,"rr","RR"),de(e,r,"bourne","Bourne"),de(e,r,"not_a_mock","NotAMock"),r}},C$=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return de(e,r,"tokio","tokio"),de(e,r,"async-std","async-std"),de(e,r,"hyper","hyper"),de(e,r,"actix-web","actix-web"),de(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return de(e,r,"serde","serde"),de(e,r,"regex","regex"),de(e,r,"rand","rand"),de(e,r,"log","log"),de(e,r,"lazy_static","lazy_static"),de(e,r,"libc","libc"),de(e,r,"futures","futures"),de(e,r,"rayon","rayon"),de(e,r,"reqwest","reqwest"),de(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return de(e,r,"test-case","test-case"),de(e,r,"proptest","proptest"),de(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return de(e,r,"mockall","mockall"),de(e,r,"double","double"),de(e,r,"rstest","rstest"),de(e,r,"mockiato","mockiato"),de(e,r,"mock_derive","mock_derive"),de(e,r,"mocktopus","mocktopus"),de(e,r,"mockers","mockers"),de(e,r,"mock_it","mock_it"),r}},x$=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function de(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(de,"addFromLibraries");var v$=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function sHe(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(sHe,"determineProgrammingLanguage");var oHe=[new d$,new f$,new p$,new m$,new h$,new g$,new A$,new y$,new C$,new x$];function aHe(t){let e=oHe.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new v$(t,oHe);return new fpe(e)}s(aHe,"getMetadataLookup");var fpe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var lHe=I.Object({name:I.String(),version:I.Optional(I.String())}),cHe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(lHe),buildTools:I.Array(lHe)}),ppe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new _t([`The user is working on a project with the following characteristics:
`]),1]);let n=aHe(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new _t(r)}addProgrammingLanguage(e,r){let n=sHe(e);this.turnContext.collectLabel(SA,n),r.push([new _t([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(SA,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new _t([`${r}
${i}`]),1])}}},SA="project-metadata",b$=class{constructor(e){this._resolver=e;this.id=SA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new ppe(e)}};f();var uHe=je(require("path"));var mpe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Ln),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new _t(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new _t(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=ys(n);if(await this.turnContext.collectFile(I$,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new bA(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new _t([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new _t([`The referenced file \`${uHe.basename(r.uri)}\` is content excluded.`]),1]]}},hpe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},I$="references",E$=class{constructor(){this.id=I$;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new hpe}processor(e){return new mpe(e)}};var PT=s(()=>[SA,dh,I$,lu],"mandatorySkills"),T$=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new u$(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!PT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!PT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!PT().includes(u)))}return l.push(...PT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(Ri).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Ri).getSupportedSkills(r.id),a=e.get(vl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,n)&&l.push(c)}return l}async getNonSelectableSkills(e){let r=await wA(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...PT(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var w$=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===r))Nr.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Nr.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var _$=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Nr.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var qFt="X-Initiator",WFt="X-Interaction-ID",GFt="X-Interaction-Type";var S$=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},gpe=class extends S${static{s(this,"User")}static id(){return"user"}},Ape=class extends S${static{s(this,"Agent")}static id(){return"agent"}},ype=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[qFt]:this.initiator,[WFt]:this.interactionId,[GFt]:this.interactionType.toString()}}},Wd=class t extends ype{static{s(this,"LlmInteraction")}static user(e,r){return new t(gpe,e,r)}static agent(e,r){return new t(Ape,e,r)}};var Qb=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new Cpe(this),this.steps=new _$(e,r,n,e.get(ws)),this.collector=new xpe(r,n,e.get(ws)),this.agentToolCalls=new w$(e,r,n,e.get(ws))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Wd.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Wd.agent("conversation-panel",this.turn.telemetryId):Wd.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(ws).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},R$=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},f6=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},Cpe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Ri).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Zl).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new R$(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(vl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Zl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof R$||i instanceof f6)throw i;Nr.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},xpe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function dHe(t,e){let[r,n,i]=await HFt(t,e);return i.push(...$Ft(t)),r.length>0||n.length>0?[new _t([[new _t(["Consider the additional context:"]),1],[Nb(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(dHe,"fromSkills");async function HFt(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await zFt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await jFt(t,a.skillId);l&&(PT().indexOf(a.skillId)===-1?n.push(l):i.push(l)),r.push(c)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(HFt,"handleSkillsInReverse");async function jFt(t,e){let n=t.ctx.get(vl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=n?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await VFt(t,n,l,u,a,d):[void 0,await B$(t,n,"unprocessable",void 0,a,d)]}else return[void 0,await B$(t,n,"unresolvable",void 0,a)]}catch(i){if(Nr.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof f6)throw i;return[void 0,await B$(t,n,"failed")]}}s(jFt,"safelyProcessSkill");async function VFt(t,e,r,n,i,o){let a;return typeof n=="string"?a=new _t([[n,1]]):a=n,[[a,r?.value()||0],await B$(t,e,"resolved",a,i,o)]}s(VFt,"handleProcessedSkill");async function B$(t,e,r,n,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:r,files:l,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(ra).getBestChatModelConfig(Lf("user")),d=n.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Bo(u.tokenizer).tokenLength(d)}return t.ctx.get(Zl).addResolution(t.turn.id,c),c}s(B$,"determineResolution");function $Ft(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s($Ft,"handleIgnoredSkills");async function zFt(t,e,r){if(e!==SA&&e!==dh)return!0;let n=t.ctx.get(Rt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===SA:e===dh}s(zFt,"includeSkill");var fHe=je(Y0());var DT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=YR(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new _t(n),a]}async elidableSkills(e,r){return await dHe(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await nA.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=O0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},P$=class extends DT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return fHe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var pHe=je(Y0());var D$=class extends DT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return pHe.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var vpe=je(Y0());var N$=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=YR(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new _t(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return vpe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=QFe(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:eb(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:vpe.default`
                    This is the user's question: 
                    ${jr(i).trim()} 
                `.trim()}],[]]}};f();var mHe=je(Y0());var L$=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=eb(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return mHe.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=YR(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new _t(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var YFt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],F$=class extends DT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=O0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:YFt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=eb(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!uU(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!uU(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var bpe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function p6(t,e,r){return new bpe(t,e,r)}s(p6,"descriptor");var hHe=[p6("user",Lf("user"),()=>new P$),p6("inline",Lf("inline"),()=>new D$),p6("meta",Lf("meta"),()=>new N$),p6("suggestions",Lf("suggestions"),()=>new L$),p6("synonyms",Lf("synonyms"),()=>new F$)],M$=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=hHe.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return hHe}};var AHe=require("console");var wc=class{constructor(e,r=new M$){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Sn).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[l,c]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(ol).inspectPrompt({type:r.promptType,prompt:gHe(l),tokens:c}),this.ctx.get(Zl).addPrompt(e.turn.id,gHe(l),r.promptType),{messages:l,tokens:c,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,AHe.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:KFt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,cpe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),cpe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(un).getEditorInfo().readableName??this.ctx.get(un).getEditorInfo().name,i=JFt(process.platform);return rHe(this.ctx,n,r?.login,i,e)}};function KFt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(KFt,"processResultOfElidableText");function gHe(t){return t.map(e=>jr(e.content)).join(`

`)}s(gHe,"debugChatMessages");function JFt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(JFt,"mapPlatformToOs");var KR=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await xo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(wc).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,r,c);if(d.type!=="success"&&(Nr.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,r,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Nr.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){Nr.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Nr.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Nr.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Nr.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var JR=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,l,c){switch(m4e(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(ha).workspaceCount})),await this.turnContext.ctx.get(ol).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:jr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:nb.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},h4e(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:jr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new KR(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let l=this.enrichFollowup(a,r,n,i);return Nr.debug(this.turnContext.ctx,"Computed followup",l),Nr.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:sr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return x4e(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",g4e(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};f();var Q$=I.Union([I.String(),I.Number()]),NT=I.Union([I.String(),I.Number()]),XFt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),O$=I.Object({uri:I.String(),position:I.Optional(Fl)}),m6=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa),status:I.Optional(XFt),range:I.Optional(wa)}),ZFt=I.Object({type:I.Literal("directory"),uri:I.String()}),XR=I.Union([m6,ZFt,CWe]),_p=I.Union([I.Literal("panel"),I.Literal("inline")]),eMt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),Epe=I.Union([I.String(),I.Array(eMt)]),yHe=I.Object({request:Epe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(NT)});function U$(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(U$,"convertToMessageContent");function q$(t,e){if(t=O0(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(q$,"appendToMessage");var W$=I.Union([I.Literal("Ask"),I.Literal("Agent")]),tMt=I.Object({type:I.String(),description:I.String()}),CHe=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),tMt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),G$=I.Object({uri:I.String(),name:I.String()});var Ipe="generate-response",H$=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},h6=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(r.ctx),this.postProcessor=new JR(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Nr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof H$?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await ml(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(ol).inspectPrompt(l),await n.steps.start(Ipe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:O0(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return sr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return upe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:O0(r.request.message)}),r.response&&r.response.type==="model"){let i=yWe(r.response.references);n.push({role:"assistant",content:O0(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await _We(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new kb((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=q$(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(Gr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:jr(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,n,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),jr(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new H$("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return lP(this.conversation,"conversationPanel",jr(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Ipe,e.error.message):await r.steps.finish(Ipe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var g6=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new h6(this,e)}},j$=class extends g6{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new h6(this,e)}};f();var rMt="github",ph=class{static{s(this,"RemoteAgentRegistry")}},V$=class extends ph{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await TI(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(on.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||on.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||on.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==rMt).map(i=>new g6(i.id,i.slug,i.name,i.description,i.avatar_url))}};var Tpe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[HR]}};async function wA(t){let e=[];return e.push(new j$),e.push(...await t.get(ph).agents()),e.push(new Tpe),e}s(wA,"getAgents");var nMt=I.Object({});async function iMt(t,e,r){return[(await wA(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(iMt,"handleConversationAgentsChecked");var xHe=ot(nMt,iMt);f();f();var A6=je(Xa());function oMt(t,e,r){let n=rn.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",n)}s(oMt,"telemetryVersionMismatch");async function mh(t,e,r){let i=t.get(Dr).getTextDocumentUnsafe(e);if(!i)throw new A6.ResponseError(Xr.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await O1(t,e,i.getText());if(o.status==="invalid")throw t.get(Ji).setInactive(o.reason),new A6.ResponseError(Xr.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(oMt(t,i,e.version),_c.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new A6.ResponseError(Xr.ContentModified,"Document Version Mismatch");return i}s(mh,"getTextDocument");async function RA(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await mh(t,n,r)}catch(i){if(i instanceof A6.ResponseError&&i.code===Xr.CopilotNotAvailable)return;throw i}}s(RA,"getTextDocumentIfAvailable");var sMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),aMt=I.Object({turnId:NT,codeBlockIndex:I.Number(),source:sMt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(O$),textDocument:I.Optional(pd),position:I.Optional(Fl),conversationSource:I.Optional(_p)});async function lMt(t,e,r){let n=await RA(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=pv(r.conversationSource),l=await ml(t,t.get(Ri).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Pu(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a},i,`${Ac(a)}.acceptedCopy`,l),["OK",null]}s(lMt,"handleConversationCodeCopyChecked");var vHe=ot(aMt,lMt);f();var cMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),uMt=I.Object({turnId:NT,source:cMt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(O$),textDocument:I.Optional(pd),position:I.Optional(Fl),conversationSource:I.Optional(_p)});async function dMt(t,e,r){let n=await RA(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=pv(r.conversationSource),l=await ml(t,t.get(Ri).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Pu(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full"},i,`${Ac(a)}.acceptedInsert`,l),["OK",null]}s(dMt,"handleConversationCodeInsertChecked");var bHe=ot(uMt,dMt);f();f();var $$=I.Array(wa);function z$(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(z$,"resolveAsActiveEditor");f();var EHe=je(Xa());var Y$=new EHe.ProgressType,wpe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(yr).connection.sendProgress(Y$,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(yr).connection.sendProgress(Y$,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(yr).connection.sendProgress(Y$,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(yr).connection.sendProgress(Y$,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function ZR(t){return new wpe(t.workDoneToken)}s(ZR,"createProgressHandler");f();f();f();var Sc=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var Qy=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var e3=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var IHe="```",y6=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,fMt=String.raw`${IHe}[\w]*?\n(?<codeblock>[\s\S]*?)\n${IHe}`,pMt=new RegExp(y6+`
`+fMt,"gs"),_pe=["replace","delete"];function Spe(t,e){let r=t.matchAll(pMt),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!_pe.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=Rpe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(Spe,"extractEditsFromTaggedCodeblocks");function Rpe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,l=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let c=r[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),r.splice(i,o-i+1,...l)}}}return r.join(`
`)}s(Rpe,"applyEditsToDocument");f();f();f();f();var Oy=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new U0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var mMt=new Tt("activeEditorPrompt");async function THe(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new Da;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&hMt(n.selection)){let o=new Oy(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ii(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new Oy(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new Oy(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Ii(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new Oy(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else mMt.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(THe,"processActiveEditor");function hMt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(hMt,"notEmptySelection");f();f();function wHe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(wHe,"partsLength");async function SHe(t,e=1/0,r){let n=_He(0,t,e),i=e-wHe(n);for(;;){let o=!1,a=[];for(let l of n)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(r?.isCancellationRequested)return gMt();let u=_He(l.level+1,c,i-1);u.length&&(o=!0,i-=wHe(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(SHe,"visualFileTree");function _He(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let l=e[a],c=n+l.name+(l.type===2?"/":"");if(c.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(_He,"toParts");var gMt=s(()=>({tree:"",files:[]}),"emptyTree");var AMt=new Tt("fileReferencesPrompt");async function RHe(t,e,r,n){let i=await kHe(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=Z4(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(RHe,"generateWorkspaceStructurePrompt");async function kHe(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await SHe(await BHe(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:l}})):[]}s(kHe,"generateWorkspaceStructure");async function BHe(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(po).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=ko(e,o);return r.excludeDotFiles&&o.startsWith(".")||xMt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>BHe(t,l,r,n),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(BHe,"buildFileList");var yMt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],CMt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function xMt(t){return!!(CMt.includes(Ii(t).toLowerCase())||Wo(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>yMt.includes(r)))}s(xMt,"shouldAlwaysIgnoreFile");async function K$(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Ii(a.uri)})),i=await kHe(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${aa(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(n){return AMt.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(K$,"processDirectoryReferences");var vMt=new Tt("fileReferencesPrompt");async function PHe(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Da;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new Oy(h,void 0,[]);g&&m.push(...g.render())}else vMt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),THe(t,e),K$(t.context,e,n)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(PHe,"processFileReferences");var DHe=new Tt("editAgentPrompt"),J$=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=sue(this.currentTurn.response?.message,!0),o=await nA.appendToUserMessage(this.ctx,this.props.workspaceFolders,jr(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return VD(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:O0(n.request.message)}),n.response){let i=sue(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):DHe.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=$D(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+q9(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(nH(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===r)){DHe.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=$D(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${Cl}`),o.push("changed code"),o.push(`// ${Cl}`),o.push("changed code"),o.push(`// ${Cl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${Cl}`),o.push("	age: number;"),o.push(`	// ${Cl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await PHe({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${Cl}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${Wo(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await RHe(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var NHe=15,LHe=128,t3=new Tt("toolCallingLoop"),X$=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ws),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(su),this.prompt=new J$(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new dy(this.turnContext.ctx)}),this.requestId=sr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(b4e(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new kb((u,d,p,m)=>{let h=u.trim().match(y6)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let l={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(l),t3.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,r,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),t3.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new Sc({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Da;case"failed":throw this.turn.status="error",new Sc({message:nb.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new Sc({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Sc({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Sc({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Sc({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Sc({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Sc({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Sc({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Sc({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(r,a);for(let l of a)await this.handleSingleToolCall(l,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),l="success";try{let c=eb(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=JOe(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=iV(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof Qy||c instanceof Da)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Hi([new yi("")],"cancelled"),e.id),new Qy(c.message);{t3.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${o2(c)}`,c),l="error";let u=new Hi([new yi(o2(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=iV(u);await this.turnContext.agentToolCalls.error(n,e.id,d.message)}}finally{let c=performance.now()-a;E4e(this.turnContext.ctx,this.turnContext,o,e.id,n,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;t3.error(this.turnContext.ctx,a);let l=new Hi([new yi(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=iV(l);await this.turnContext.agentToolCalls.error(n,e.id,c.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Da}async requestToolInvocationApproval(e,r,n,i,o,a,l,c){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new Qy("Cancelled by user");case"accept":return Promise.resolve();default:throw new Qy(`Invalid confirmation result ${u.result}`)}}else t3.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>NHe)throw t3.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${NHe} for turn ${this.turn.id}`),new e3}checkChatPayload(e){if(e.messages.length===0)throw new Sc({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>LHe)throw new Sc({message:`You may not include more than ${LHe} tools in your request.`,responseIsFiltered:!1})}};var Z$=new Tt("agenticTurnProcessor"),ez=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.turnSuggestions=new KR(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Nr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:rfe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await ml(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Z$.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await xo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new X$(this.turnContext,this.chatFetcher,c,l).run(r);let d={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(r,l.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(d.suggestedTitle=p)}await this.endProgress(d)}catch(c){if(c instanceof Qy)Z$.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof Da)Z$.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof e3)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:rfe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof Sc)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw Z$.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Nr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=$D(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var kpe="collect-context",Bpe="generate-response",tz=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.postProcessor=new JR(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Nr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await ml(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=s6().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,r);return}let u=(await wA(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await n.steps.start(kpe,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(ra).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,d);if(!p)await n.steps.error(kpe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(kpe),await n.steps.start(Bpe,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,n),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Nr.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let c=await new T$(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new kb((h,g,y,v)=>{let b=h.trim().match(y6)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=q$(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await xo.getModelConfiguration(this.turnContext.ctx,"user",a);e=xo.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:jr(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,r,n,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,r,u.appliedText,n,i,jr(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",A4e(this.turnContext.ctx,this.conversation,this.strategy.uiKind,jr(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=lP(this.conversation,this.strategy.uiKind,jr(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=lP(this.conversation,this.strategy.uiKind,jr(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Bpe,e.error.message):await r.steps.finish(Bpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var rz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await xo.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(wc).toPrompt(e,l)}extractEditsFromResponse(e,r){return[]}},nz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(ra).getBestChatModelConfig(Lf(a)),c={promptType:a,modelConfiguration:l,languageId:r};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(wc).toPrompt(e,c)}async processResponse(e){let r=[],n=jr(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(lu);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(Ln).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=Spe(e,r).filter(a=>_pe.includes(a.mode)),o=Rpe(i,r);if(o)return await this.ctx.get(ol).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return Spe(e,r)}};f();f();var FHe=je(Xa()),MHe=je(_m());var Vu=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new FHe.ProtocolRequestType("conversation/context");this.typeCheck=ms.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(yr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,l]=o;if(l){let c=new MHe.ResponseError(l.code,l.message,l.data);Nr.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){Nr.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Ic(this.typeCheck.Errors(i));return i}}};var Ppe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Uy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let l=new Ppe(e,r,n,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(r=>r.progressToken===e)}},iz=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(ws)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Nr.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Ri).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let l=await new Vu(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await i2(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:sr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var qy=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(Uy).get(r);if(i)return new iz(e,i);let a=(await wA(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new nz(e.ctx):l=new rz(e.ctx),n!==void 0&&(l.computeSuggestions=n),e.turn.chatMode==="Agent"?new ez(e,l):new tz(e,l)}};f();var QHe=je(Xa());var r3=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new QHe.ResponseError(Xr.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function oz(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ii(t.uri)}]}s(oz,"resolveAsWorkspaceFolders");f();f();var bMt=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Gd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?bMt(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var $u=class{constructor(){this.tokens=new nn(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new _n.CancellationTokenSource,i=new Gd([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var EMt=I.Object({conversationId:I.Optional(Q$),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(yHe,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(pd),textDocument:I.Optional(pd),selection:I.Optional(wa),visibleRanges:I.Optional($$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(XR)),source:I.Optional(_p),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(G$)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(W$),needToolCallConfirmation:I.Optional(I.Boolean())});async function IMt(t,e,r){r3.validate(r.workspaceFolders);let n=await RA(t,r,e),i=t.get(Ri).create(r);await TMt(t,i,r,n);let o=i.turns[i.turns.length-1],a=ZR(r),l=t.get($u).add(a.progressToken,e),c=new Qb(t,i,o,l);return await(await t.get(qy).createProcessor(c,a.progressToken,r.computeSuggestions)).process(a,l,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(IMt,"handleConversationCreateChecked");async function TMt(t,e,r,n){for(let i of r.turns){let o=U$(i.request),a=new Bb({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=HV(r.chatMode),a.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,c=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:oz(l),u=z$({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Ri).addTurn(e.id,a,r.references,u,l,c,r.ignoredSkills,void 0)}}s(TMt,"addTurns");var OHe=ot(EMt,IMt);f();var wMt=I.Object({conversationId:I.String()});function _Mt(t,e,r){return t.get(Ri).destroy(r.conversationId),["OK",null]}s(_Mt,"handleConversationDestroyChecked");var UHe=ot(wMt,_Mt);f();var SMt=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),RMt=new Tt("conversationNotifyCodeAcceptance");async function kMt(t,e,r){let n=t.get(Ri).findByTurnId(r.turnId);if(!n)return RMt.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await ml(t,n,{languageId:""});return Pu(t,void 0,{},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Ac("agentPanel")}.codeAcceptance`,i),["OK",null]}s(kMt,"handleConversationNotifyCodeAcceptanceChecked");var qHe=ot(SMt,kMt);f();var BMt=I.Object({});function PMt(t,e,r){return[{path:t.get(hc).directory},null]}s(PMt,"handleConversationPersistenceChecked");var WHe=ot(BMt,PMt);f();f();var HHe=je(require("node:events"));var Dpe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Sn).getSession(),n=e.get(Ml);return r&&r.githubAppId&&r.githubAppId!==ym?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},Npe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Gr).getToken()).envelope.chat_enabled?"ok":"failed"}}},DMt=[new Dpe,new Npe],GHe="onPreconditionsChanged",Sp=class{constructor(e,r=DMt){this.ctx=e;this.checks=r;this.emitter=new HHe.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(GHe,e)}emit(e){this.emitter.emit(GHe,e)}};var NMt=I.Object({forceCheck:I.Optional(I.Boolean())});async function LMt(t,e,r){let n=r.forceCheck??!1;return[await t.get(Sp).check(n),null]}s(LMt,"handleConversationPreconditionsChecked");var jHe=ot(NMt,LMt);f();var FMt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(pd),textDocument:I.Optional(pd),source:I.Optional(_p)});async function MMt(t,e,r){let n=await RA(t,r,e),i=pv(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await ml(t,t.get(Ri).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Pu(t,n,{rating:o,uiKind:i},{},`${Ac(i)}.messageRating`,a),["OK",null]}s(MMt,"handleConversationRatingChecked");var VHe=ot(FMt,MMt);f();f();var sz=class extends Sb{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:gA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(tb).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Da;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(eA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var QMt=I.Object({tools:I.Array(CHe)});function OMt(t,e,r){return r.tools.forEach(n=>{t.get(su).registerTool(new sz({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(OMt,"conversationRegisterToolsChecked");var $He=ot(QMt,OMt);f();var UMt=I.Object({});function qMt(t,e,r){return[jfe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(qMt,"handleConversationTemplatesChecked");var zHe=ot(UMt,qMt);f();var WMt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:Q$,turnId:I.Optional(NT),message:Epe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(pd),textDocument:I.Optional(pd),selection:I.Optional(wa),visibleRanges:I.Optional($$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(XR)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(G$)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:OFe,model:I.Optional(I.String()),chatMode:I.Optional(W$),needToolCallConfirmation:I.Optional(I.Boolean())});async function GMt(t,e,r){r3.validate(r.workspaceFolders);let n=await RA(t,r,e),i=t.get(Ri),o=i.get(r.conversationId),a=U$(r.message),l=new Bb({message:a,type:"user"},r.turnId);l.chatMode=HV(r.chatMode),l.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:oz(c),d=z$({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});l=await i.addTurn(o.id,l,r.references,d,c,u,r.ignoredSkills,r.confirmationResponse);let p=ZR(r),m=t.get($u).add(p.progressToken,e),h=new Qb(t,o,l,m);return await(await t.get(qy).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:r.model},null]}s(GMt,"handleConversationTurnChecked");var YHe=ot(WMt,GMt);f();var HMt=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(_p)});async function jMt(t,e,r){t.get(Ri).deleteTurn(r.conversationId,r.turnId);let i=pv(r.source),o=await ml(t,t.get(Ri).findByTurnId(r.turnId),{languageId:""});return Pu(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Ac(i)}.messageDelete`,o),["OK",null]}s(jMt,"handleConversationTurnDeleteChecked");var KHe=ot(HMt,jMt);f();var VMt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function $Mt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s($Mt,"buildSystemMessage");function zMt(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>n&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(zMt,"buildUserMessage");function YMt(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=n.length)continue;let g=n[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};r.push(b)}return r}s(YMt,"parseReviewComments");async function KMt(t,e,r){if(!r.document.text)return[null,{code:Xr.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:Xr.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:Xr.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:Xr.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:Xr.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ta),o=await xo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:$Mt()},{role:"user",content:zMt(r)}],l=await t.get(Rt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Wd.user("code-review",sr())},e,l);if(c.type!=="success")return[null,{code:Xr.InternalError,message:"Failed to generate code review"}];let u=YMt(r.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(KMt,"handleCopilotCodeReviewChecked");var JHe=ot(VMt,KMt);f();f();var Ob=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,fy.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return Wd.user("conversation-edit-panel",this.editTurnId)}};f();async function az(t,e,r,n){let o=t.get(nl).create("panel","en"),a=new ib({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new Ob(t,o,a,n,sn.Gpt4o),u=t.get(Ec);await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(az,"streamMockedResult");f();var JMt=I.Object({enableMock:I.Boolean()}),kA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function XMt(t,e,r){return t.get(kA).setMockEnabled(r.enableMock),["OK",null]}s(XMt,"handleTestingSetCopilotEditsResponseChecked");var XHe=ot(JMt,XMt);var ZMt=I.Object({request:I.String(),response:I.Optional(I.String())}),eQt=I.Union([I.Literal("panel")]),tQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(ZMt,{minItems:1}),workingSet:I.Optional(I.Array(m6)),source:I.Optional(eQt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function rQt(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new ib({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(rQt,"buildEditConversation");async function nQt(t,e,r){if(t.get(kA).isMockEnabled())return await az(t,sr(),sr(),r.partialResultToken),[[],null];let n=rQt(t.get(nl),r),i=n.getLastTurn(),o=new Ob(t,n,i,r.partialResultToken,r.model),a=t.get($u).add(r.partialResultToken,e);return[await t.get(py).createOrContinueEditConversation(o,a),null]}s(nQt,"handleEditConversationCreateChecked");var ZHe=ot(tQt,nQt);f();var iQt=I.Object({editConversationId:I.String()});function oQt(t,e,r){return t.get(nl).destroy(r.editConversationId),["OK",null]}s(oQt,"handleEditConversationDestroyChecked");var eje=ot(iQt,oQt);f();var sQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(m6)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function aQt(t,e,r){let n=t.get(e),i=new ib({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(aQt,"buildEditConversation");async function lQt(t,e,r){if(t.get(kA).isMockEnabled())return await az(t,r.editConversationId,sr(),r.partialResultToken),[[],null];let n=t.get(nl),i=aQt(n,r.editConversationId,r),o=i.getLastTurn(),a=new Ob(t,i,o,r.partialResultToken,r.model),l=t.get($u).add(r.partialResultToken,e);return[await t.get(py).createOrContinueEditConversation(a,l),null]}s(lQt,"handleEditConversationTurnChecked");var tje=ot(sQt,lQt);f();var cQt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(_p)});async function uQt(t,e,r){t.get(nl).deleteTurn(r.editConversationId,r.editTurnId);let i=await aP(t,r.editTurnId,r.editConversationId,{languageId:""});return Pu(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Ac("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(uQt,"handleEditConversationTurnDeleteChecked");var rje=ot(cQt,uQt);f();var dQt=I.Object({}),fQt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(ZD)}))}))});function pQt(t,e,r){return[t.get(q0).getAllTools(),null]}s(pQt,"handleGetMCPToolsChecked");function mQt(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:l}of o)t.get(q0).updateMCPToolStatus(i,a,l);return[t.get(q0).getAllTools(),null]}s(mQt,"handleUpdateMCPToolsStatusChecked");var nje=ot(dQt,pQt),ije=ot(fQt,mQt);f();var hQt=I.Object({});async function gQt(t,e,r){let n=await t.get(Gr).getToken();return[AQt(await t.get(Tu).getMetadata(),n),null]}s(gQt,"handleCopilotModelsChecked");function AQt(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=Mf.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!ZIe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(AQt,"filterModels");var oje=ot(hQt,gQt);f();var yQt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function CQt(t,e,r){return r.model&&r.status==="enabled"?await t.get(Tu).acceptModelPolicy(r.model)?["OK",null]:[null,{code:Xr.InternalError,message:"Failed to accept model policy"}]:[null,{code:Xr.InvalidRequest,message:"Invalid model or status"}]}s(CQt,"handleCopilotModelsPolicyChecked");var sje=ot(yQt,CQt);f();f();var Wy=10;function aje(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(aje,"panelPositionForDocument");f();var Lpe=new Tt("solutions");async function*xQt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(xQt,"trimChoices");var n3=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=aje(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};function lz(t){return t.replace(/\s+/g,"")}s(lz,"normalizeCompletionText");async function vQt(t,e){let r=e.targetPosition,n=e.textDocument,i=Kx(t,n.uri),o=sr(),a=rn.createAndMarkAsIssued({headerRequestId:o,languageId:n.detectedLanguageId,source:"open copilot"},{});e.savedTelemetryData=await t.get(Rt).updateExPValuesAndAssignments({uri:n.uri,languageId:n.detectedLanguageId},a);let l=await M5(t,o,Bg(n,r),e.savedTelemetryData);if(l.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(l.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(l.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(l.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(l.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let c=l.prompt,u=l.trailingWs;u.length>0&&(e.startPosition=jo.position(e.startPosition.line,e.startPosition.character-u.length));let d=e.cancellationToken;e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...SS(c),solutionCount:e.solutionCountTarget,promptEndPos:n.offsetAt(r)}),Lpe.debug(t,"prompt:",c),Bt(t,"solution.requested",e.savedTelemetryData);let p=t.get(Em).forLanguage(t,n.detectedLanguageId,e.savedTelemetryData),m=A0(n.detectedLanguageId),h=fP(n,r),g={language:n.detectedLanguageId,next_indent:h.next??0,prompt_tokens:c.prefixTokens??0,suffix_tokens:c.suffixTokens??0},y={};p==="parsing"&&!m&&(y.stop=[`

`,`\r
\r
`]);let v=Yx(t,e.savedTelemetryData),b={prompt:c,languageId:n.detectedLanguageId,repoInfo:i,ourRequestId:o,engineModelId:v.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:y,headers:v.headers,extra:g},E;switch(p){case"server":E=s(()=>{},"finishedCb"),g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsingandserver":E=m?dP(t,n,e.startPosition,!1):()=>{},g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsing":default:E=m?dP(t,n,e.startPosition,!1):()=>{};break}let _=e.savedTelemetryData,k=await t.get(xd).fetchAndStreamCompletions(t,b,_.extendedBy(),E,d);if(k.type==="failed"||k.type==="canceled")return{status:"FinishedWithError",error:`${k.type}: ${k.reason}`};let B=k.choices;B=xQt(B),B=sP(B,ee=>TP(t,n,r,ee,!1,Lpe));let N=sP(B,async ee=>{let me=ee.completionText;Lpe.info(t,`Open Copilot completion: [${ee.completionText}]`);let ae=await nRe(t,n,r,ee.completionText)??jo.position(r.line,0),[H]=F5(n.getText(jo.range(ae,r)));me=H+me;let U=ee.completionText;u.length>0&&U.startsWith(u)&&(U=U.substring(u.length));let le=ee.meanLogProb,ie=le!==void 0?Math.exp(le):0,V=_.extendedBy({choiceIndex:ee.choiceIndex.toString()});return{completionText:U,insertText:me,range:jo.range(ae,r),meanProb:ie,meanLogProb:le||0,requestId:ee.requestId,choiceIndex:ee.choiceIndex,telemetryData:V,copilotAnnotations:ee.copilotAnnotations}});return cje(d,N[Symbol.asyncIterator]())}s(vQt,"launchSolutions");async function lje(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await lje(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(lje,"reportSolutions");async function cz(t,e,r){return t.get(Ji).withProgress(async()=>{let i=vQt(t,e);return await lje(i,r)})}s(cz,"runSolutions");async function cje(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:cje(t,e)}}s(cje,"generateSolutionsStream");var dje=je(vx()),x6=je(Xa());f();f();function uz(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(uz,"parseChallengeDoc");var bQt=I.Object({text:I.String(),score:I.Number()}),EQt=I.Object({documents:I.Array(bQt),options:I.Optional(I.Object({}))});async function dz(t,e,r){let n=sr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=uz(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);r.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,completionId:sr(),created:0,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:mg.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(dz,"runTestSolutions");var hh=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function IQt(t,e,r){return t.forceSet(hh,new hh(r.documents)),["OK",null]}s(IQt,"handleTestingSetPanelCompletionDocumentsChecked");var uje=ot(EQt,IQt);var fje=nM.type;function TQt(t,e,r,n,i){let o=lz(n.completionText),a=(0,dje.SHA256)(o).toString();return t.get(is).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations}),{range:n.range,insertText:n.insertText,command:{command:Z0e,title:`Accept completion ${i}`,arguments:[a]}}}s(TQt,"makeCompletion");function Mpe(t,e){return`${t}/${e}`}s(Mpe,"progressMessage");var Fpe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(yr)}async onSolution(e){this.count+=1;let r=TQt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(x6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:Mpe(this.count,Wy),percentage:Math.round(100*this.count/Wy)})}onFinishedNormally(){return wQt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(x6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function wQt(t,e,r=0){t!==void 0&&await e.connection.sendProgress(x6.WorkDoneProgress.type,t,{kind:"end",message:Mpe(r,Wy)})}s(wQt,"reportDone");var C6;async function _Qt(t,e,r){let n=await mh(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(yr).connection.sendProgress(x6.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:Mpe(0,Wy),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=r.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(yr).connection.sendProgress(nM.partialResult,l,{items:[d]})},"onCompletion"));let c=new Fpe(t,r,a),u=t.get(hh);if(u.documents){let d=u.documents;await dz(i,d,c)}else{c.offset=n.offsetAt(i);let d=new n3(n,i,e,Wy);await cz(t,d,c)}return c.error!==void 0?[null,{code:Xr.InternalError,message:c.error}]:[{items:o},null]}s(_Qt,"handleChecked");async function SQt(t,e,r){C6&&(C6.cancel(),C6.dispose()),C6=new _n.CancellationTokenSource;let n=C6.token,i=new Gd([e,n]);try{return await _Qt(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:Xr.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(SQt,"handleCheckedWithAbort");var pje=ot(bIe,SQt);f();f();f();function kQt(t){let{apiUrl:e,serverUrl:r}=t.get(pl).getConfiguredUrls(),n=new URL("login/device",r).href,i=lM(t),o=new URL("_ping",i.proxy).href,a=new URL("_ping",i.api).href,l=new URL("_ping",i.telemetry).href;function c(u){return new URL(u).host}return s(c,"label"),[{label:c(n),url:n},{label:c(e),url:e},{label:c(o),url:o},{label:c(a),url:a},{label:c(l),url:l}]}s(kQt,"urlsToCheck");async function mje(t){let e=kQt(t).map(async({label:r,url:n})=>{let{message:i,status:o}=await BQt(t,n);return{label:r,url:n,message:i,status:o}});return await Promise.all(e)}s(mje,"checkReachability");async function BQt(t,e){try{let r=await t.get(Tn).fetch(e,{}),n=r.status>=200&&r.status<400?"reachable":"unreachable";return{message:`HTTP ${r.status}`+(r.statusText?` - ${r.statusText}`:""),status:n}}catch(r){return{message:String(r),status:"unreachable"}}}s(BQt,"determineReachability");var Rp=je(require("os")),i3=je(require("tls"));async function hje(t){return{sections:[PQt(t),DQt(),await LQt(t),NQt(),FQt(t),await MQt(t)]}}s(hje,"collectDiagnostics");function gje(t){return t.sections.map(QQt).join(Rp.EOL+Rp.EOL)}s(gje,"formatDiagnosticsAsMarkdown");function PQt(t){return{name:"Copilot",items:{Version:CI(t),Build:Pf(t),Editor:t0(t)["Editor-Version"]}}}s(PQt,"collectCopilotSection");function DQt(){return{name:"Environment",items:{http_proxy:Gy("http_proxy"),https_proxy:Gy("https_proxy"),no_proxy:Gy("no_proxy"),SSL_CERT_FILE:Gy("SSL_CERT_FILE"),SSL_CERT_DIR:Gy("SSL_CERT_DIR"),OPENSSL_CONF:Gy("OPENSSL_CONF")}}}s(DQt,"collectEnvironmentSection");function NQt(){return{name:"Node setup",items:{"Number of root certificates":i3.rootCertificates.length,"Operating system":Rp.type(),"Operating system version":Rp.release(),"Operating system architecture":Rp.arch(),NODE_OPTIONS:Gy("NODE_OPTIONS"),NODE_EXTRA_CA_CERTS:Gy("NODE_EXTRA_CA_CERTS"),NODE_TLS_REJECT_UNAUTHORIZED:Gy("NODE_TLS_REJECT_UNAUTHORIZED"),"tls default min version":i3.DEFAULT_MIN_VERSION,"tls default max version":i3.DEFAULT_MAX_VERSION}}}s(NQt,"collectNodeSection");async function LQt(t){let e={};try{let r=await t.get(Gr).getToken();e["Send Restricted Telemetry"]=r.getTokenValue("rt")==="1"?"enabled":"disabled",e.Chat=r.envelope?.chat_enabled?"enabled":void 0,e["Content exclusion"]=r.envelope?.copilotignore_enabled?"enabled":"unavailable"}catch{}return Object.keys(e).forEach(r=>e[r]===void 0&&delete e[r]),{name:"Feature Flags",items:e}}s(LQt,"collectFeatureFlagsSection");function FQt(t){let e=t.get(Tn);return{name:"Network Configuration",items:{"Proxy host":e.proxySettings?.host,"Proxy port":e.proxySettings?.port,"Kerberos SPN":e.proxySettings?.proxyKerberosServicePrincipal,"Reject unauthorized":e.rejectUnauthorized?"enabled":"disabled",Fetcher:e.name}}}s(FQt,"collectNetworkConfigSection");async function MQt(t){return{name:"Reachability",items:Object.fromEntries((await mje(t)).map(({label:r,status:n,message:i})=>[r,i]))}}s(MQt,"collectReachabilitySection");function Gy(t){let e=Object.keys(process.env).find(r=>r.toLowerCase()===t.toLowerCase());return e?process.env[e]:void 0}s(Gy,"findEnvironmentVariable");function QQt(t){return`## ${t.name}`+Rp.EOL+Rp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"n/a"}`).join(Rp.EOL)}s(QQt,"formatSectionAsMarkdown");var OQt=I.Object({});async function UQt(t){return[{report:gje(await hje(t))},null]}s(UQt,"handleDiagnosticsChecked");var Aje=ot(OQt,UQt);f();f();f();f();function yje(t,e,r){function n(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return n(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(yje,"normalizeIndentCharacter");function Cje(t,e,r,n,i,o,a){let l=n.lineAt(i),c=e.map(u=>{let d=jo.range(jo.position(i.line,0),jo.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=yje(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=jo.range(d.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:sr(),insertText:p,range:d,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations}});if(r===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(Cje,"completionsFromGhostTextResults");async function Qpe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await Aoe(t,e,r,n);if(o.type!=="success")return o;let[a,l]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=G3e(t,e.textDocument,e.position,l),u=Cje(t,a,l,e.textDocument,e.position,n.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=t.get(Rt),p=(Gi(t,Pt.AlwaysRequestMultiline)??d.enableProgressiveReveal(o.telemetryBlob))&&Pm.isSupported(e.textDocument.detectedLanguageId),m=Gi(t,Pt.EnableSpeculativeRequests),h=d.enableSpeculativeRequests(o.telemetryBlob);(p||(m??h))&&l!==2&&(e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]),Promise.resolve().then(()=>{Aoe(t,e,void 0,{isSpeculative:!0,opportunityId:n.opportunityId})}));let y=u.map(v=>{let{start:b,end:E}=v.range,_=_n.Range.create(b,_n.Position.create(E.line,E.character-i));return{...v,range:_}});return{...o,value:y}}s(Qpe,"getInlineCompletionsResult");async function fz(t,e,r,n,i={}){qQt(t,e,r);let o=await Qpe(t,Bg(e,r),n,i);return P4e(t,o)}s(fz,"getInlineCompletions");function qQt(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});hU.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(qQt,"logCompletionLocation");var Tje=je(Xa());f();var xje=require("crypto");var o3=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new Upe(e,this.id)}},Upe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(yr),o=(0,xje.randomUUID)(),a=i.connection.onProgress(eM.type,o,l=>{n.push(...l)});r.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(eM.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function s3(t,e,r){try{let n=t.get(ka),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof o3&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof o3&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){on.error(t,"Failed to set context items on context providers",n)}}s(s3,"setContextItems");var Ope={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function vje(t,e,r){return e.map(i=>{try{if(typeof i=="string")return Ra(r.uri,i,Ope);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=Ra(r.uri,i.scheme||"",Ope)),"pattern"in i&&(o&&=Ra(r.uri,i.pattern||"",Ope)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(vje,"match");f();var WQt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),Ub=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function GQt(t,e,r){return t.forceSet(Ub,new Ub(r.documents,r.basename||"")),["OK",null]}s(GQt,"handleTestingSetCompletionDocumentsChecked");var bje=new Tt("setCompletionDocuments"),Ije=ot(WQt,GQt);function pz(t,e,r,n){let i=t.get(Ub);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){bje.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=HQt(i,r);return a&&a.length>0?Eje(a,o,e):void 0}else return bje.debug(t,"Returning completions for all pre-set documents"),Eje(i.documents,o,e)}}s(pz,"getTestCompletions");function Eje(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:l}=uz(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:l}}})}s(Eje,"sliceAndMapCompletions");function HQt(t,e){return t.basename===Ii(e)?t.documents||[]:[]}s(HQt,"getFilteredDocs");var wje=I.Object({doc:I.Object({position:Fl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:ZB,version:I.Number()}),contextItems:I.Optional(Cie)}),v6;async function _je(t,e,r,n){v6&&(v6.cancel(),v6.dispose()),v6=new _n.CancellationTokenSource;let i=new Gd([e,v6.token]);r.contextItems&&s3(t,r.contextItems);let o=pz(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:sr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await mh(t,r.doc,i)}catch(p){if(!(p instanceof Tje.ResponseError))throw p;switch(p.code){case Xr.CopilotNotAvailable:case Xr.ContentModified:return[{completions:[]},null]}throw p}let l=r.doc.position,c=await fz(t,a,l,i,{isCycling:n,formattingOptions:r.doc});if(!c)return[{completions:[]},null];let u=t.get(is);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(_je,"handleGetCompletionsHelper");var Sje=ot(wje,(t,e,r)=>_je(t,e,r,!1)),Rje=ot(wje,(t,e,r)=>_je(t,e,r,!0));f();var kje=je(vx()),a3=je(Xa());var jQt=I.Object({doc:I.Object({position:Fl,uri:ZB,version:I.Number()}),panelId:I.String()});function VQt(t,e,r,n,i){let o=lz(i.completionText),a=(0,kje.SHA256)(o).toString();return t.get(is).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(VQt,"makeSolution");var qpe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(yr)}onSolution(e){return this.service.connection.sendNotification(new a3.NotificationType("PanelSolution"),VQt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Bje(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new a3.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Bje(t,e){return e.connection.sendNotification(new a3.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Bje,"reportDone");var b6;async function $Qt(t,e,r){b6&&(b6.cancel(),b6.dispose()),b6=new _n.CancellationTokenSource;let n=new Gd([e,b6.token]),i=r.doc.position,o=jo.range(i,i),a=new qpe(t,r,o),l=t.get(hh);if(l.documents){let c=l.documents;dz(i,c,a)}else{let c;try{c=await mh(t,r.doc,n)}catch(d){if(!(d instanceof a3.ResponseError))throw d;switch(d.code){case Xr.CopilotNotAvailable:case Xr.ContentModified:return zQt(t,r)}throw d}a.offset=c.offsetAt(i);let u=new n3(c,i,n,Wy);cz(t,u,a)}return[{solutionCountTarget:Wy},null]}s($Qt,"handleGetPanelCompletionsChecked");async function zQt(t,e){return await Bje(e.panelId,t.get(yr)),[{solutionCountTarget:0},null]}s(zQt,"produceEmptySolutions");var Pje=ot(jQt,$Qt);f();var YQt=I.Object({});function KQt(t,e,r){return[{version:t.get(zi).getDisplayVersion(),buildType:Pf(t),runtimeVersion:`node/${process.versions.node}`},null]}s(KQt,"handleGetVersionChecked");var Dje=ot(YQt,KQt);f();var JQt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function XQt(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(XQt,"buildSystemMessage");function ZQt(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(ZQt,"buildUserMessage");async function eOt(t,e,r){if(r.changes.length===0)return[null,{code:Xr.InvalidRequest,message:"No changes provided"}];let n=new ta(t),i=await xo.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:fl(process.cwd())}],a=await nA.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(Ri),c=l.create({capabilities:{skills:[EA]}}),u=new Bb({message:"",type:"user"});await l.addTurn(c.id,u);let d=ZR({workDoneToken:sr()});await t.get(ws).begin(c,u,d);let h=(await new Qb(t,c,u,e).skillResolver.resolve(EA))?.head?.name,g=[{role:"system",content:await XQt(r.userLanguage,h)},{role:"user",content:ZQt(r,a)}],y=await t.get(Rt).updateExPValuesAndAssignments(),v=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Wd.user("git-commit",sr())},e,y);if(v.type!=="success")return[null,{code:Xr.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(eOt,"handleGitCommitGenerateChecked");var Nje=ot(JQt,eOt);f();var Fje=Zee.type,E6;function Lje(t){return{title:"Completion Accepted",command:X9,arguments:[t]}}s(Lje,"makeCommand");async function tOt(t,e,r){E6&&(E6.cancel(),E6.dispose());let n=r.context.triggerKind===1;E6=new _n.CancellationTokenSource;let i=E6.token,o=new Gd([e,i]);r.contextItems&&s3(t,r.contextItems,r.data);let a=pz(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:Lje(sr()),...h}))},null];let l=await mh(t,r.textDocument,o),c=r.position,u=await fz(t,l,c,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:Xr.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:Xr.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(is);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Lje(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(tOt,"handleChecked");var Mje=ot(CU,(t,e,r)=>tOt(t,e,r));f();var Qje=rte.type,I6;async function nOt(t,e,r){I6&&(I6.cancel(),I6.dispose());let n=r.context.triggerKind===1;I6=new _n.CancellationTokenSource;let i=I6.token,o=new Gd([e,i]);r.contextItems&&s3(t,r.contextItems);let a=await mh(t,r.textDocument,o),l=await Qpe(t,Bg(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(nOt,"handleChecked");var Oje=ot(CU,(t,e,r)=>nOt(t,e,r));f();f();function Wpe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return l3(i)}s(Wpe,"asReadableCert");function l3(t){return t.replace(/\s/g,"")}s(l3,"normalizeNewlines");var oOt=I.Object({});async function sOt(t){return[{certificates:(await t.get(rl).getAllRootCAs()).map(l3)},null]}s(sOt,"handleListCertificatesChecked");var Uje=ot(oOt,sOt);f();async function aOt(t,e,r){let n=t.get(lh);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=mc(r.textDocument.uri);t.get(Lm).onUserPositionChange(i,new tn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:X9,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(aOt,"handleChecked");var qje=ot(xIe,aOt);f();var lOt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function cOt(t,e,r){let n=t.get(is),i=n.get(r.uuid);if(i){n.delete(r.uuid);let o=uOt(r,i);A2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(cOt,"notifyAcceptedChecked");function uOt(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(uOt,"getSuggestionStatus");var Wje=ot(lOt,cOt);f();var dOt=I.Object({uuids:I.Array(I.String())});function fOt(t,e,r){let n=t.get(is),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let l of r.uuids)n.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));gq(t,"ghostText",o.offset,o.uri,a),t.get(Fu).resetState()}return["OK",null]}s(fOt,"notifyRejectedChecked");var Gje=ot(dOt,fOt);f();var pOt=I.Object({uuid:I.String({minLength:1})});function mOt(t,e,r){let i=t.get(is).get(r.uuid);return i&&gU(t,i.triggerCategory,i),["OK",null]}s(mOt,"notifyShownChecked");var Hje=ot(pOt,mOt);f();var hOt=H4e;function gOt(t,e,r){let n=t.get(ka),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new o3(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(gOt,"registerContextProviders");var jje=ot(hOt,gOt);f();f();var Vje=require("net");function Gpe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(Gpe,"getProxyFromEnvironment");function AOt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(AOt,"getRejectUnauthorizedFromEnvironment");var $je=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function zje(t){let r={proxy:Gpe(t),proxyStrictSSL:AOt(t)},n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(zje,"getHttpSettingsFromEnvironment");function mz(t){(0,Vje.isIPv6)(t)?t="https://["+t+"]":/:\/\//.test(t)||(t=`https://${t}`);let{hostname:e,port:r,username:n,password:i}=new URL(t);return{host:e,port:yOt(r),proxyAuthorization:COt(n,i)}}s(mz,"proxySettingFromUrl");function yOt(t){if(!t)return 80;let e=Number(t);if(isNaN(e))throw new TypeError("Invalid proxy port");return e}s(yOt,"parsePort");function COt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(COt,"getAuth");f();var xOt=I.Object({uri:I.Optional(I.String())}),vOt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),Kje=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[MAe]:I.Optional(xOt),http:I.Optional($je),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),jpe=Object.keys(Kje.properties).filter(t=>t!=="github"),bOt=I.Intersect([Kje,vOt]),EOt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),Yje=ms.Compile(EOt),Hpe=ms.Compile(bOt);async function Jje(t,e){if(!Yje.Check(e))throw new Ic(Yje.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&await Vpe(t,r),await T6(t,r)}s(Jje,"notifyChangeConfiguration");async function Vpe(t,e){for(let i of Hpe.Errors(e)){let o=i.path.split("/")?.[1];_c.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Hpe.Check(e))throw new Ic(Hpe.Errors(e));let r=t.get(z0);r.setConfig(Pt.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(Pt.DelayCompletions,e.delayCompletions),r.setConfig(Pt.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(Pt.FilterCompletions,e.filterCompletions),e.http&&$pe(t,e.http);let n=e["github-enterprise"];n&&QIe(t,n.uri),e.github?.copilot&&await IOt(t,e.github.copilot)}s(Vpe,"applySettingsToConfiguration");async function IOt(t,e){let r=t.get(z0);for(let n of Object.values(Pt)){let i=fTe(e,n);r.setConfig(n,i)}e.mcp?await _Ot(t,e.mcp):await SOt(t),TOt(t,e.globalCopilotInstructions||""),wOt(t,e.globalGitCommitInstructions||"")}s(IOt,"applyCopilotConfiguration");function TOt(t,e){try{t.get(tA).setGlobalCopilotInstructions(e)}catch(r){_c.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(TOt,"applyGlobalCopilotInstructionsConfiguration");function wOt(t,e){try{t.get(tA).setGlobalGitCommitInstructions(e)}catch(r){_c.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(wOt,"applyGlobalGitCommitInstructionsConfiguration");function $pe(t,e){let r=t.get(z0),n=t.get(Tn);if(e.proxy===void 0&&(e=zje(r.env)),n.rejectUnauthorized=e?.proxyStrictSSL,!e.proxy){n.proxySettings=void 0;return}try{n.proxySettings=mz(e.proxy),e.proxyAuthorization&&(n.proxySettings.proxyAuthorization=e.proxyAuthorization),e.proxyKerberosServicePrincipal&&(n.proxySettings.proxyKerberosServicePrincipal=e.proxyKerberosServicePrincipal)}catch(i){if(!(i instanceof TypeError))throw i;_c.warn(t,"Invalid proxy URL",e.proxy,i),n.proxySettings=void 0}}s($pe,"applyHttpConfiguration");async function _Ot(t,e){try{let r=JSON.parse(e);await t.get(q0).updateMCPServers(r)}catch(r){_c.error(t,"Failed to apply MCP configuration",r)}}s(_Ot,"applyMCPConfiguration");async function SOt(t){await t.get(q0).updateMCPServers({})}s(SOt,"removeMCPConfiguration");async function T6(t,e){if(!t.get(Go).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";await fM(t,r)}await t.get(Gr).primeToken()}s(T6,"initializePostConfigurationDependencies");var Xje=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),ROt=I.Object({editorInfo:Xje,editorPluginInfo:Xje,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function kOt(t,e,r){t.get(un).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),gV(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&await Vpe(t,r.editorConfiguration);let n=t.get(Tn),i=t.get(z0).env,o=Gpe(i);return o&&!("http"in(r.editorConfiguration??{}))&&(n.proxySettings=mz(o)),await T6(t,r.editorConfiguration),["OK",null]}s(kOt,"handleSetEditorInfoChecked");var Zje=ot(ROt,kOt);f();var BOt=I.Object({options:I.Optional(I.Object({}))});async function POt(t,e,r){let n=t.get(Sn).pendingSignIn?.status;if(n===void 0)return[null,{code:Xr.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:Xr.DeviceFlowFailed,message:String(o)}]}finally{t.get(Sn).pendingSignIn=void 0}}s(POt,"handleSignInConfirmChecked");var eVe=ot(BOt,POt);f();var DOt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function NOt(t,e,r){try{let n=t.get(Sn),i=await n.checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(Ml).findAppIdToAuthenticate(),a=await t.get(XI).getToken(t,o,n.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(Ml).githubAppId=o,await t.get(Sn).setPersistedSession(c),await t.get(Sn).checkAndUpdateStatus({freshSignIn:!0})));return t.get(Sn).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:SV,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof ls))throw n;return[null,{code:Xr.DeviceFlowFailed,message:n.message}]}}s(NOt,"handleSignInInitiateChecked");var zpe=ot(DOt,NOt);f();var LOt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function FOt(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(Sn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(Sn).checkAndUpdateStatus(),null]}s(FOt,"handleSignInWithGithubTokenChecked");var tVe=ot(LOt,FOt);f();var MOt=I.Object({options:I.Optional(I.Object({}))});async function QOt(t,e,r){return await t.get(Sn).deletePersistedSession(),[await t.get(Sn).checkAndUpdateStatus(),null]}s(QOt,"handleSignOutChecked");var rVe=ot(MOt,QOt);f();var OOt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Ype=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function UOt(t,e,r){let n=t.get(zi),i=t.get(un).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&yA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:CX(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},yA.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new Ype(r.stacktrace??"N/A",i.name);return l.stack=void 0,Ta(t,l,void 0,o,a),["OK",null]}s(UOt,"handleTelemetryExceptionChecked");var nVe=ot(OOt,UOt);f();f();function iVe(t={}){return{accessToken:sr(),...t,...Hx(t)}}s(iVe,"testGitHubSession");var hz=class extends Sn{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},c3=class extends Sn{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};f();function qOt(t){return new EI({token:`test token ${sr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(qOt,"createTestCopilotToken");var w6=class extends Gr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=iVe()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>qOt(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},gz=class extends w6{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},u3=class extends gz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var WOt=I.Object({options:I.Optional(I.Object({}))});async function GOt(t,e,r){let n=new u3("tid=valid-copilot-token");return t.forceSet(Sn,new c3(t,"",n)),t.get(Gr).resetToken(),t.get(Ji).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(GOt,"handleTestingAlwaysAuthChecked");var oVe=ot(WOt,GOt);f();var HOt=I.Object({messages:I.Array(I.Object({role:I.Enum(yl),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(sn)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function jOt(t,e,r){let n=new ta(t),i=await t.get(ra).getBestChatModelConfig([r.modelFamily??sn.CopilotBase]),o=await aP(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:Wd.user("test",sr())},e,o),null]}s(jOt,"handleChatMLChecked");var sVe=ot(HOt,jOt);f();f();f();var y3=je(v$e(),1),oYn={ALPN_HTTP2:y3.default.ALPN_HTTP2,ALPN_HTTP2C:y3.default.ALPN_HTTP2C,ALPN_HTTP1_1:y3.default.ALPN_HTTP1_1,ALPN_HTTP1_0:y3.default.ALPN_HTTP1_0},{fetch:sYn,context:b$e,reset:aYn,noCache:lYn,h1:cYn,keepAlive:uYn,h1NoCache:dYn,keepAliveNoCache:fYn,cacheStats:pYn,clearCache:mYn,offPush:hYn,onPush:gYn,createUrl:AYn,timeoutSignal:yYn,Body:CYn,Headers:E$e,Request:xYn,Response:vYn,AbortController:Mz,AbortError:Qz,AbortSignal:I$e,FetchBaseError:bYn,FetchError:EYn,ALPN_HTTP2:IYn,ALPN_HTTP2C:TYn,ALPN_HTTP1_1:wYn,ALPN_HTTP1_0:_Yn}=y3.default;var w$e=require("crypto"),_$e=require("http"),S$e=require("stream"),R$e=require("util"),x3=je(_m());var FWt=9e4,MWt=new x3.ProtocolRequestType("copilot/fetch"),QWt=new x3.ProtocolRequestType("copilot/fetchCancel"),OWt=new x3.ProgressType,UWt=new x3.ProtocolRequestType("copilot/fetchDisconnectAll"),BA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},C3=class extends Tn{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(zi).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(yr).connection.sendRequest(UWt,{})}makeAbortController(){return new Mz}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(yr).connection,a=(0,w$e.randomUUID)(),l=new _n.CancellationTokenSource,c=new S$e.PassThrough,u=s(()=>{o.sendRequest(QWt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new Qz("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof I$e))throw new BA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new Qz("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(OWt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new BA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new BA("Request timed out from lsp server"))},n.timeout??FWt),y=s(()=>{h(new Qz("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(MWt,WWt(r,a,n),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,R$e.inspect)(v.data)}`),h(new BA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new BA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new yx(p.status,_$e.STATUS_CODES[p.status]??"",new E$e(p.headers),()=>qWt(c),()=>c)}};function qWt(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(qWt,"consumeStream");function WWt(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(WWt,"convertOptionsToParams");var GWt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function HWt(t,e,r){let n=new C3(t),i=n.makeAbortController(),o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=r;l&&i.abort();let p=n.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof BA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof BA?y.message:String(y)}`},null]}}s(HWt,"handleTestingFetchChecked");var k$e=ot(GWt,HWt);f();var jWt=I.Object({});async function VWt(t,e,r){return await t.get(va).flush(),["OK",null]}s(VWt,"handleTestingFlushPromiseQueueChecked");var B$e=ot(jWt,VWt);f();var $Wt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function zWt(t,e,r){try{await t.get(hA).start();let n=t.get(ET),i=r.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,yU,e)}catch{}finally{l=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(zWt,"handleTestingGetContextChecked");var P$e=ot($Wt,zWt);f();var YWt=I.Object({uri:I.String()});async function KWt(t,e,r){let i=await t.get(Dr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(KWt,"handleGetDocumentChecked");var D$e=ot(YWt,KWt);f();var JWt=I.Object({options:I.Optional(I.Object({}))});async function XWt(t,e,r){t.forceSet(Sn,new hz(t)),t.get(Gr).resetToken();try{await t.get(Gr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(XWt,"handleTestingNeverAuthChecked");var N$e=ot(JWt,XWt);f();f();f();var Sme=class extends rl{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},L$e=s(t=>new Sme(t),"createTestCertificateReader");function Bme(t,e,r){let n=new Rme;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new yx(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Bme,"createFakeResponse");function F$e(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Bme(t,n,Object.assign({"content-type":"application/json"},r))}s(F$e,"createFakeJsonResponse");var N6=class extends Tn{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}makeAbortController(){return new kme}};var Oz=class extends N6{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var Rme=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}},kme=class{constructor(){this.signal={aborted:!1,addEventListener:s(()=>{},"addEventListener"),removeEventListener:s(()=>{},"removeEventListener")}}static{s(this,"FakeAbortController")}abort(){this.signal.aborted=!0}};var Pme=class extends N6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(F$e(200,this.fullConfig)):Promise.resolve(Bme(404,""))}},Uz=class extends Pme{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}makeAbortController(){return this.delegate.makeAbortController()}};var ZWt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function eGt(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(Tn,new Uz(n,t.get(Tn)))}return["OK",null]}s(eGt,"handleTestingOverrideExpFlagsChecked");var M$e=ot(ZWt,eGt);f();var tGt=I.Object({rules:oie});function rGt(t,e,r){let n=t.get(Kc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:Xr.InternalError,message:"Could not set content exclusion rules"}]}s(rGt,"handleTestingSetContentExclusionRulesChecked");var Q$e=ot(tGt,rGt);f();var nGt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(XR)),options:I.Optional(I.Object({}))});function iGt(t,e,r){return t.get(Uy).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(iGt,"handleTestingSetSyntheticTurnsChecked");var O$e=ot(nGt,iGt);f();var oGt=I.Object({});async function sGt(t,e,r){let n=t.get(Va),i=t.get(ja);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(sGt,"handleTriggerShowMessageChecked");var U$e=ot(oGt,sGt);f();f();f();f();var q$e=je(require("tls"));var qz=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(rl)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=q$e.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var v3=class extends Tn{constructor(r){super();this.ctx=r;this.name="HelixFetcher";this.createSocketFactory=s((r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);return await this.proxySocketFactory.createSocket(i,o)},"createSocketFactory");this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new qz(r),this.proxySocketFactory=r.get(Zg)}static{s(this,"HelixFetcher")}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.ctx)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.ctx)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(r){let n=r.get(zi);return super.rejectUnauthorized===!1&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0"),b$e({userAgent:`GithubCopilot/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=this.makeAbortController();setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new CB(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new yx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new Mz}};f();f();var L6=require("fs"),W$e=require("path");var b3=class extends po{static{s(this,"LocalFileSystem")}async readFileString(e){return(await L6.promises.readFile(aa(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(aa(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=aa(e),n=await L6.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,W$e.join)(r,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let r=await L6.promises.lstat(e);if(r.isSymbolicLink())try{let n=await L6.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};f();var Wz=class extends ph{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var Gz=class extends ol{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();function aGt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(aGt,"fakeChatModelConfiguration");function lGt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(lGt,"fakeEmbeddingModelConfiguration");var Hz=class extends ra{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(aGt(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(lGt(e))}};f();var jz=class extends pc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new fv}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Vz=class extends Va{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function G$e(t,e,r,n){return F1.create(NIe(t),e,r,n,e)}s(G$e,"createTextDocument");var Dme=class extends Dr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Ii(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=G$e(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=G$e(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},$z=class extends Dme{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var Nme=class extends ja{static{s(this,"NullLog")}logIt(...e){}};function cGt(t){let e=new c5;return e.set(xg,t),e.set(SI,t),e.set(zi,new zi),e.set(vf,new vf({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(rl,L$e([])),e.set(Zg,eH(e)),e.set(gg,new gg),e.set(Cm,new hM),e.set(Am,new Am),e.set(ig,new ig),e.set(ac,new ac(e,"tid=test",!0)),e.set(Ll,new Ll),e.set(Va,new Vz),e.set(pc,new jz),e.set(hg,new U5),e.set(ja,new Nme),e.set(Iu,new Iu),e.set(Ps,new Ps("test-session","test-machine")),e.set(pl,new tR(e)),e.set(h0,new h0(e,"copilot-test")),fM(e,!0),e.set(Rt,new Rt(e)),e.set(Bm,new Bm),e.set(Em,new LS),e.set(Gr,new u3("tid=test")),e.set(Ji,new pM),e.set(va,new va),e.set(Ig,new Ig(e)),e.set(Fm,fq(e)),e.set(Fu,new Fu),e.set(bd,new bd),e.set(V1,V1.default),e.set(Q0,new Q0),e.set(Mf,new Mf(e,!1)),e.set(Ml,new Ml),e.set(Ln,new Ln(e)),e.set(E0,new NO),e.set(Ol,new Ol),e.set(ka,vU(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(Zf,new Zf(e)),uGt(e),e.set(yd,new yd(e)),e.set(Go,new Go),e.set(kg,new NR),e}s(cGt,"_createBaselineContext");function uGt(t){t.set(Ri,new Ri(t)),t.set(ws,new ws(t)),t.set(wc,new wc(t)),t.set(vl,new vl),t.set(Zl,new Zl),t.set(ol,new Gz),t.set(Sp,new Sp(t,[])),t.set(ra,new Hz),t.set(ph,new Wz),t.set(vA,new vA(t)),t.set(Pb,new Pb),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(K0,new K0)}s(uGt,"registerConversation");function H$e(){let t=cGt(new SI(new MS,new Map));return t.set(Tn,new Oz),t.set(un,new Lme),t.set(Dr,new $z(t)),t.set(po,new b3),t.set(Kc,new Kc(t)),t.set(nl,new nl(t)),t.set(Ec,new oH(t)),t.set(Kf,new Kf(t)),t.set(wg,new v5),t.set(Km,new mH),tV(t),t}s(H$e,"createLibTestingContext");var Lme=class extends un{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var V$e=je(require("fs"));var j$e=`${process.env.HOME}/.copilot-testing-gh-token`,zz,Yz;function $$e(t){let e=new w6(dGt);t.forceSet(Gr,e)}s($$e,"setIntegrationTokenManager");var dGt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(Yz)return Yz;let e=t||process.env.GITHUB_COPILOT_TOKEN||await fGt(),r=H$e(),n=new v3(r);return r.forceSet(Tn,n),Yz=cM(r,{...Hx({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new ls('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Yz},"getEnvelope");async function fGt(){try{zz??=(await V$e.promises.readFile(j$e)).toString().trim()}catch{zz??=process.env.GITHUB_TOKEN??""}if(!zz)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${j$e}. Run "npm run get_token" to get one.`);return zz}s(fGt,"getTestingGitHubToken");var pGt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function mGt(t,e,r){return $$e(t),t.forceSet(Sn,new c3(t,r.githubAppId)),["OK",null]}s(mGt,"handleTestingUseTestingTokenChecked");var z$e=ot(pGt,mGt);f();var hGt=I.Object({});async function gGt(t,e,r){return await new UR().uninstall(t),["OK",null]}s(gGt,"handleUninstallChecked");var Y$e=ot(hGt,gGt);f();var AGt=j4e;function yGt(t,e,r){let n=t.get(ka),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(yGt,"unregisterContextProviders");var K$e=ot(AGt,yGt);f();var Fme=je(require("os"));var CGt=I.Object({expectedCertificate:I.String()});async function xGt(t,e,r){let i=(await ZG(t).getAllRootCAs()).map(l3),o=l3(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Wpe(o)}. Only found those installed on the system:${Fme.EOL}${i.map(a=>"- "+Wpe(a)).join(Fme.EOL)}`},null]}s(xGt,"handleVerifyCertificateChecked");var J$e=ot(CGt,xGt);f();var vGt=I.Object({});async function bGt(){return[{status:!!await new jD().load()},null]}s(bGt,"handleVerifyKerberosChecked");var X$e=ot(vGt,bGt);f();var EGt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function IGt(t,e,r){let i=await t.get(Dr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(IGt,"handleVerifyStateChecked");var Z$e=ot(EGt,IGt);f();var TGt=I.Object({});function wGt(t,e,r){return[t.get(Dr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(wGt,"handleVerifyWorkspaceStateChecked");var eze=ot(TGt,wGt);var qT=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function tze(){let t=new Map;return t.set(Fje.method,Mje),t.set(Qje.method,Oje),t.set("getCompletions",Sje),t.set("getCompletionsCycling",Rje),t.set("getPanelCompletions",Pje),t.set(fje.method,pje),t.set("getVersion",Dje),t.set("setEditorInfo",Zje),t.set("checkStatus",gWe),t.set("checkQuota",hWe),t.set("checkFileStatus",pWe),t.set("signInInitiate",zpe),t.set("signIn",zpe),t.set("signInConfirm",eVe),t.set("signInWithGithubToken",tVe),t.set("signOut",rVe),t.set("notifyShown",Hje),t.set("notifyAccepted",Wje),t.set("notifyRejected",Gje),t.set("telemetry/exception",nVe),t.set("textDocument/copilotInlineEdit",qje),t.set("testing/overrideExpFlags",M$e),t.set("testing/alwaysAuth",oVe),t.set("testing/neverAuth",N$e),t.set("testing/useTestingToken",z$e),t.set("testing/setCompletionDocuments",Ije),t.set("testing/setPanelCompletionDocuments",uje),t.set("testing/triggerShowMessageRequest",U$e),t.set("testing/flushPromiseQueue",B$e),t.set("testing/getDocument",D$e),t.set("testing/chatml",sVe),t.set("testing/setSyntheticTurns",O$e),t.set("testing/fetch",k$e),t.set("testing/setContentExclusionRules",Q$e),t.set("testing/setCopilotEditsResponse",XHe),t.set("testing/getContext",P$e),t.set("uninstall",Y$e),t.set("debug/diagnostics",Aje),t.set("debug/listCertificates",Uje),t.set("debug/verifyState",Z$e),t.set("debug/verifyCertificate",J$e),t.set("debug/verifyKerberos",X$e),t.set("debug/verifyWorkspaceState",eze),t.set("context/registerProviders",jje),t.set("context/unregisterProviders",K$e),t.set("conversation/preconditions",jHe),t.set("conversation/persistence",WHe),t.set("conversation/create",OHe),t.set("conversation/turn",YHe),t.set("conversation/turnDelete",KHe),t.set("conversation/destroy",UHe),t.set("conversation/rating",VHe),t.set("conversation/copyCode",vHe),t.set("conversation/insertCode",bHe),t.set("conversation/templates",zHe),t.set("conversation/agents",xHe),t.set("conversation/registerTools",$He),t.set("conversation/notifyCodeAcceptance",qHe),t.set("copilot/models",oje),t.set("copilot/setModelPolicy",sje),t.set("copilot/codeReview",JHe),t.set("git/commitGenerate",Nje),t.set("editConversation/create",ZHe),t.set("editConversation/turn",tje),t.set("editConversation/turnDelete",rje),t.set("editConversation/destroy",eje),t.set("mcp/getTools",nje),t.set("mcp/updateToolsStatus",ije),new qT(t)}s(tze,"getAllMethods");f();f();f();var rze=je(_m());var PA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new rze.NotificationType(this.name)}};var Mme=class extends PA{constructor(){super(...arguments);this.name=Yee.method;this.params=lIe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Sn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},nze=[Mme];f();var Qme=class extends PA{constructor(){super(...arguments);this.name=ete.method;this.params=gIe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(is).get(n);o&&H3e(this.ctx,o)}},Ome=class extends PA{constructor(){super(...arguments);this.name=nte.method;this.params=vIe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(lh).handleShown(n)}},Ume=class extends PA{constructor(){super(...arguments);this.name=tte.method;this.params=AIe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(is),a=o.get(n);a&&(o.delete(n),i>=a.insertText.length?Aq(this.ctx,a):j3e(this.ctx,a,i))}},ize=[Qme,Ome,Ume];f();var Kz=class extends PA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get($u).cancel(r.token)}};var _Gt=[...nze,...ize,Kz];function oze(t,e){for(let r of _Gt){let n=new r(t),i=ms.Compile(n.params);e.onNotification(n.type,Eu(t,async o=>{Py(o),i.Check(o)?await n.handle(o):_c.error(t,`Notification ${n.name}:`,new Ic(i.Errors(o)))},`Notification ${n.name}`))}}s(oze,"registerNotifications");f();var aze=je(require("events")),Jz=je(Xa());var sze=new Tt("AgentTextDocumentConfiguration"),qme=class{constructor(e){this.ctx=e;this.emitter=new aze.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return F1.create(e,r,n,i)}catch(o){throw sze.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(Jz.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),F1.withChanges(e,r,n)}catch(i){throw sze.exception(this.ctx,i,".update"),i}}},Hb=class extends Dr{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(Xee.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(l=>void l.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new qme(r),this._notebookDocuments=new Jz.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(yr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(mc(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=mc(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(n=>{let i=mc(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(mc(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var lze=ms.Compile(pIe);function Py(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Py(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=Py(e[r])}return t}}s(Py,"purgeNulls");var yr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(ja)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),oze(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(zi).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await r.workspace.getConfiguration(["github.copilot",...jpe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of jpe)d[p]=u.shift();c.settings=d}return Jje(e,Py(c))}catch(u){_c.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Hb).didChangeWorkspaceFolders(c),e.get(Q0).emit(c)}catch(u){_c.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),r.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Py(c.initializationOptions);if(d){if(!lze.Check(d))throw new Ic(lze.Errors(d));let g=d,y=e.get(un);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):_c.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Ml).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Hb).init(c.workspaceFolders??[]),ZRe(this.ctx),e.get(Q0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Go).setCapabilities(u),"openURL"in u&&gV(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,_c.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await T6(e),this.installationTelemetryTimer=setTimeout(()=>{new UR().startup(e).catch(()=>{})},1e3),e.get(Dy).emit(),await d3e(e))},"onInitialized");return r.onInitialized(Eu(e,h,"onInitialized")),e.get(uh).init(),u?.token&&e.get(Sn).setTransientSession(null),u?.redirectedTelemetry&&await dWe(e),cze.lt(process.versions.node,"20.8.0")&&_c.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:yh.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:iWe(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(Eu(e,o,"onDidChangeConfiguration")),r.listen();let l=new kV;this.ctx.forceSet(ja,l)}async messageHandler(e,r,n){let i=this.ctx.get(qT).handlers.get(e);if(!i)return new yh.ResponseError(Xr.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new yh.ResponseError(Xr.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new yh.ResponseError(Xr.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!aWe(this.ctx.get(un)))throw new yh.ResponseError(Xr.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),Py(r);try{let[o,a]=await i(this.ctx,n,r);return a?new yh.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new yh.ResponseError(Xr.RequestCancelled,"Request was canceled");if(o instanceof ls)return new yh.ResponseError(Xr.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof yh.ResponseError||_c.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(ch).dispose()}catch(e){_c.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(ja,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),Eoe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(va).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Ll).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},_c=new Tt("lsp");var Xz=class t extends h2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(yr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),gl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){gl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(Go).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return gl.debug(this.context,"`copilot/related` not supported"),t3e;try{let a=await this.service.connection.sendRequest(ite.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){gl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){gl.exception(r,o,"copilotRelated")}}};f();var uze=je(Xa());var Zz=new Tt("copilotTokenManager"),Wme=class t extends BS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new uze.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(yr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw Zz.debug(this.ctx,"Envelope missing from copilot/token response"),new Nf({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=r;if(Zz.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new ls("Expired token in copilot/token response");if(i&&n){let u;if(l!==void 0){try{let d=new URL(l);d.protocol==="https:"&&d.hostname.startsWith("api.")?u=d.origin:Zz.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}catch{Zz.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(pl).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(Sn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Nf({reason:"NotSignedIn"});let c=new EI(a,void 0);return t8(this.ctx,c),c}catch(r){throw r instanceof Error?new ls(r.message,r):r}}},F6=class extends Gr{constructor(r,n=new BS(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new Wme(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Go).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var SGt=new Tt("Public Code References"),eY=class extends E0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");SGt.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(Go).getCapabilities().ipCodeCitation===!0&&await e.get(yr).connection.sendNotification(Kee.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function dze(t){RGt(t)}s(dze,"activateExtensibilityPlatformFeature");function RGt(t){t.set(ph,new V$(t)),t.set(vA,new vA(t))}s(RGt,"registerContextDependencies");f();var fze=I.String(),Gme=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(rY,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},rY="build-logs",tY=class extends Jl{static{s(this,"BuildLogsSkill")}constructor(e){super(rY,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new Gme(r))}};f();var Hme=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await K$(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new _t(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new _t([o]),1]);return new _t(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},jme=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},kGt="directory-references",nY=class{constructor(){this.id=kGt;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new jme}processor(e){return new Hme(e)}};f();var BGt=I.Object({uri:I.String(),visibleRange:I.Optional(wa),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),pze=I.Object({files:I.Array(BGt)}),PGt=3,Vme=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=Nb(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(Ln),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),l=ys(a);if(await this.turnContext.collectFile(oY,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===PGt))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(Ln).getRelativePath(n),a=new bA(n,void 0,i.visibleRange);return new _t([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new _t([n])}},oY="recent-files",iY=class extends Jl{static{s(this,"RecentFilesSkill")}constructor(e){super(oY,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new Vme(r))}};f();var mze=I.String(),$me=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(aY,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},aY="runtime-logs",sY=class extends Jl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(aY,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new $me(r))}};f();var lY=je(_m());var cY=class extends ol{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return PL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(yr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new lY.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new lY.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new lY.NotificationType("conversation/documentDiff"),r)}};f();var hze=je(Xa());var M6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Sp).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(yr).connection.sendNotification(new hze.NotificationType(this.notificationEndpoint),e)}};function gze(t){DGt(t),NGt(t),dze(t)}s(gze,"activateConversationFeature");function DGt(t){t.set(Ri,new Ri(t)),t.set(Zl,new Zl),t.set(wc,new wc(t)),t.set(ra,new pH(t)),t.set(Uy,new Uy),t.set(ws,new ws(t)),t.set(Sp,new Sp(t)),t.set(M6,new M6(t)),t.set(Tu,new vM(t,new xM(t))),t.set(qy,new qy),t.set(Pb,new Pb),t.set(ol,new cY(t)),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(K0,new K0)}s(DGt,"registerContextDependencies");function NGt(t){let e=new vl;e.registerSkill(new KV(new YV(t))),e.registerSkill(new b$(new Vu(t,SA,cHe))),e.registerSkill(new XV(new Vu(t,dh,tGe))),e.registerSkill(new NV(new Vu(t,lu,EWe))),e.registerSkill(new E$),e.registerSkill(new nY),e.registerSkill(new iY(new Vu(t,oY,pze))),e.registerSkill(new LV(new Vu(t,EA,TWe))),e.registerSkill(new e$(new Vu(t,Lb,dGe))),e.registerSkill(new sY(new Vu(t,aY,mze))),e.registerSkill(new tY(new Vu(t,rY,fze))),e.registerSkill(new r$(new Vu(t,fh,fGe))),e.registerSkill(new n$(new Vu(t,_T,mGe))),t.set(vl,e)}s(NGt,"registerSkills");f();var Aze=je(ni());var uY=class extends Ec{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(yr).connection.sendProgress(new Aze.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var yze=je(Xa()),Cze=je(_m());var dY=class extends eA{constructor(){super(...arguments);this.requestType=new yze.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=ms.Compile(zOe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(yr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[l,c]=a;if(c){let u=new Cze.ResponseError(c.code,c.message,c.data);throw Nr.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return o}};f();var xze=je(Xa()),vze=je(_m());var fY=class extends tb{constructor(){super(...arguments);this.requestType=new xze.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=ms.Compile($Oe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(yr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[l,c]=a;if(c){let u=new vze.ResponseError(c.code,c.message,c.data);throw Nr.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new yi(i.value):new CT(i.value));return new Hi(n,r.status??"success")}};f();f();function bze(t,e,r){try{let n=t.get(Rt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return on.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(bze,"fillInJavaActiveExperiments");var zme=je(_m());var LGt={type:new zme.NotificationType("featureFlagsNotification")},FGt={type:new zme.NotificationType("copilot/didChangeFeatureFlags")},Q6=class{constructor(e){this.ctx=e;ia(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Rt).updateExPValuesAndAssignments(),o={};r.get(Rt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Eie(r,i);a.length>0&&(o.ExpContextProviders=a);let l=new Map;L4e(r,a,l,i),AU(r,l,i),bze(r,l,i);for(let[d,p]of l.entries())o[d]=p;let c=r.get(Go),u=r.get(yr).connection;if(c.getCapabilities().didChangeFeatureFlags)await u.sendNotification(FGt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let d={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(d.xc=!0),await u.sendNotification(LGt.type,d)}}};f();var pY=class extends Ji{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(yr).connection.sendNotification(ote.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(yr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var Eze=new b3;f();f();f();f();var Qo=new Tt("CopilotMCP");async function Yme(t,e){await t.get(Km).notifyLog(e)}s(Yme,"notifyMCPRuntimeLog");async function DA(t,e){await Yme(t,{...e,level:"error"})}s(DA,"notifyMCPRuntimeError");async function WT(t,e){await Yme(t,{...e,level:"warning"})}s(WT,"notifyMCPRuntimeWarning");async function du(t,e){await Yme(t,{...e,level:"info"})}s(du,"notifyMCPRuntimeInfo");f();var Kme=/[^a-z0-9_-]/gi;var MGt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Ize(){let t={};for(let e of MGt){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Ize,"getDefaultEnvironment");async function Tze(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Qo.warn(t,n),await WT(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(Kme.lastIndex=0,Kme.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Qo.warn(t,n),await WT(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(Kme,"_")}else e._nameForModel=e.name;return e}s(Tze,"normalizeTool");var mY=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};f();f();f();f();var no;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(no||(no={}));var Xme;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Xme||(Xme={}));var fr=no.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yy=s(t=>{switch(typeof t){case"undefined":return fr.undefined;case"string":return fr.string;case"number":return isNaN(t)?fr.nan:fr.number;case"boolean":return fr.boolean;case"function":return fr.function;case"bigint":return fr.bigint;case"symbol":return fr.symbol;case"object":return Array.isArray(t)?fr.array:t===null?fr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fr.promise:typeof Map<"u"&&t instanceof Map?fr.map:typeof Set<"u"&&t instanceof Set?fr.set:typeof Date<"u"&&t instanceof Date?fr.date:fr.object;default:return fr.unknown}},"getParsedType"),St=no.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),QGt=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),X0=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,no.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};X0.create=t=>new X0(t);var T3=s((t,e)=>{let r;switch(t.code){case St.invalid_type:t.received===fr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case St.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,no.jsonStringifyReplacer)}`;break;case St.unrecognized_keys:r=`Unrecognized key(s) in object: ${no.joinValues(t.keys,", ")}`;break;case St.invalid_union:r="Invalid input";break;case St.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${no.joinValues(t.options)}`;break;case St.invalid_enum_value:r=`Invalid enum value. Expected ${no.joinValues(t.options)}, received '${t.received}'`;break;case St.invalid_arguments:r="Invalid function arguments";break;case St.invalid_return_type:r="Invalid function return type";break;case St.invalid_date:r="Invalid date";break;case St.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:no.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case St.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case St.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case St.custom:r="Invalid input";break;case St.invalid_intersection_types:r="Intersection results could not be merged";break;case St.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case St.not_finite:r="Number must be finite";break;default:r=e.defaultError,no.assertNever(t)}return{message:r}},"errorMap"),Rze=T3;function OGt(t){Rze=t}s(OGt,"setErrorMap");function hY(){return Rze}s(hY,"getErrorMap");var gY=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),UGt=[];function tr(t,e){let r=hY(),n=gY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===T3?void 0:T3].filter(i=>!!i)});t.common.issues.push(n)}s(tr,"addIssueToContext");var fu=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Fn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Fn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},Fn=Object.freeze({status:"aborted"}),I3=s(t=>({status:"dirty",value:t}),"DIRTY"),zu=s(t=>({status:"valid",value:t}),"OK"),Zme=s(t=>t.status==="aborted","isAborted"),ehe=s(t=>t.status==="dirty","isDirty"),GT=s(t=>t.status==="valid","isValid"),q6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function AY(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(AY,"__classPrivateFieldGet");function kze(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(kze,"__classPrivateFieldSet");var Pr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Pr||(Pr={}));var O6,U6,Dp=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},wze=s((t,e)=>{if(GT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new X0(t.common.issues);return this._error=r,this._error}}},"handleResult");function ei(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ei,"processCreateParams");var ti=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Yy(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Yy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fu,ctx:{common:e.parent.common,data:e.data,parsedType:Yy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(q6(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return wze(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return GT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>GT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yy(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(q6(i)?i:Promise.resolve(i));return wze(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:St.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Z0({schema:this,typeName:kn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return Pp.create(this,this._def)}nullable(){return LA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jy.create(this)}promise(){return $b.create(this,this._def)}or(e){return KT.create([this,e],this._def)}and(e){return JT.create(this,e,this._def)}transform(e){return new Z0({...ei(this._def),schema:this,typeName:kn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new rw({...ei(this._def),innerType:this,defaultValue:r,typeName:kn.ZodDefault})}brand(){return new W6({typeName:kn.ZodBranded,type:this,...ei(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new nw({...ei(this._def),innerType:this,catchValue:r,typeName:kn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return G6.create(this,e)}readonly(){return iw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},qGt=/^c[^\s-]{8,}$/i,WGt=/^[0-9a-z]+$/,GGt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,HGt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jGt=/^[a-z0-9_-]{21}$/i,VGt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$Gt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zGt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YGt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Jme,KGt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JGt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,XGt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ZGt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eHt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tHt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Bze="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rHt=new RegExp(`^${Bze}$`);function Pze(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(Pze,"timeRegexSource");function nHt(t){return new RegExp(`^${Pze(t)}$`)}s(nHt,"timeRegex");function Dze(t){let e=`${Bze}T${Pze(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(Dze,"datetimeRegex");function iHt(t,e){return!!((e==="v4"||!e)&&KGt.test(t)||(e==="v6"||!e)&&XGt.test(t))}s(iHt,"isValidIP");function oHt(t,e){if(!VGt.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(oHt,"isValidJWT");function sHt(t,e){return!!((e==="v4"||!e)&&JGt.test(t)||(e==="v6"||!e)&&ZGt.test(t))}s(sHt,"isValidCidr");var jb=class t extends ti{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==fr.string){let o=this._getOrReturnCtx(e);return tr(o,{code:St.invalid_type,expected:fr.string,received:o.parsedType}),Fn}let n=new fu,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tr(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tr(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")zGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"email",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Jme||(Jme=new RegExp(YGt,"u")),Jme.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"emoji",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")HGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"uuid",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")jGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"nanoid",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")qGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cuid",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")WGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cuid2",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")GGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"ulid",code:St.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tr(i,{validation:"url",code:St.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"regex",code:St.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tr(i,{code:St.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tr(i,{code:St.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tr(i,{code:St.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Dze(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:St.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?rHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:St.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?nHt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:St.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?$Gt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"duration",code:St.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?iHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"ip",code:St.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?oHt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"jwt",code:St.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?sHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cidr",code:St.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?eHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"base64",code:St.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?tHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"base64url",code:St.invalid_string,message:o.message}),n.dirty()):no.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:St.invalid_string,...Pr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Pr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Pr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Pr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Pr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Pr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Pr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Pr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Pr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Pr.errToObj(r)})}nonempty(e){return this.min(1,Pr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};jb.create=t=>{var e;return new jb({checks:[],typeName:kn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ei(t)})};function aHt(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(aHt,"floatSafeRemainder");var HT=class t extends ti{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==fr.number){let o=this._getOrReturnCtx(e);return tr(o,{code:St.invalid_type,expected:fr.number,received:o.parsedType}),Fn}let n,i=new fu;for(let o of this._def.checks)o.kind==="int"?no.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),tr(n,{code:St.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:St.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:St.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?aHt(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),tr(n,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),tr(n,{code:St.not_finite,message:o.message}),i.dirty()):no.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Pr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Pr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&no.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};HT.create=t=>new HT({checks:[],typeName:kn.ZodNumber,coerce:t?.coerce||!1,...ei(t)});var jT=class t extends ti{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==fr.bigint)return this._getInvalidInput(e);let n,i=new fu;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:St.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:St.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):no.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return tr(r,{code:St.invalid_type,expected:fr.bigint,received:r.parsedType}),Fn}gte(e,r){return this.setLimit("min",e,!0,Pr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};jT.create=t=>{var e;return new jT({checks:[],typeName:kn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ei(t)})};var VT=class extends ti{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==fr.boolean){let n=this._getOrReturnCtx(e);return tr(n,{code:St.invalid_type,expected:fr.boolean,received:n.parsedType}),Fn}return zu(e.data)}};VT.create=t=>new VT({typeName:kn.ZodBoolean,coerce:t?.coerce||!1,...ei(t)});var $T=class t extends ti{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==fr.date){let o=this._getOrReturnCtx(e);return tr(o,{code:St.invalid_type,expected:fr.date,received:o.parsedType}),Fn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tr(o,{code:St.invalid_date}),Fn}let n=new fu,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:St.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:St.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):no.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Pr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Pr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};$T.create=t=>new $T({checks:[],coerce:t?.coerce||!1,typeName:kn.ZodDate,...ei(t)});var w3=class extends ti{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==fr.symbol){let n=this._getOrReturnCtx(e);return tr(n,{code:St.invalid_type,expected:fr.symbol,received:n.parsedType}),Fn}return zu(e.data)}};w3.create=t=>new w3({typeName:kn.ZodSymbol,...ei(t)});var zT=class extends ti{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==fr.undefined){let n=this._getOrReturnCtx(e);return tr(n,{code:St.invalid_type,expected:fr.undefined,received:n.parsedType}),Fn}return zu(e.data)}};zT.create=t=>new zT({typeName:kn.ZodUndefined,...ei(t)});var YT=class extends ti{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==fr.null){let n=this._getOrReturnCtx(e);return tr(n,{code:St.invalid_type,expected:fr.null,received:n.parsedType}),Fn}return zu(e.data)}};YT.create=t=>new YT({typeName:kn.ZodNull,...ei(t)});var Vb=class extends ti{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return zu(e.data)}};Vb.create=t=>new Vb({typeName:kn.ZodAny,...ei(t)});var Ky=class extends ti{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return zu(e.data)}};Ky.create=t=>new Ky({typeName:kn.ZodUnknown,...ei(t)});var Ch=class extends ti{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return tr(r,{code:St.invalid_type,expected:fr.never,received:r.parsedType}),Fn}};Ch.create=t=>new Ch({typeName:kn.ZodNever,...ei(t)});var _3=class extends ti{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==fr.undefined){let n=this._getOrReturnCtx(e);return tr(n,{code:St.invalid_type,expected:fr.void,received:n.parsedType}),Fn}return zu(e.data)}};_3.create=t=>new _3({typeName:kn.ZodVoid,...ei(t)});var Jy=class t extends ti{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==fr.array)return tr(r,{code:St.invalid_type,expected:fr.array,received:r.parsedType}),Fn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(tr(r,{code:a?St.too_big:St.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(tr(r,{code:St.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(tr(r,{code:St.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new Dp(r,a,r.path,l)))).then(a=>fu.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new Dp(r,a,r.path,l)));return fu.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Pr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Pr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Pr.toString(r)}})}nonempty(e){return this.min(1,e)}};Jy.create=(t,e)=>new Jy({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kn.ZodArray,...ei(e)});function E3(t){if(t instanceof Hd){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Pp.create(E3(n))}return new Hd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof Jy?new Jy({...t._def,type:E3(t.element)}):t instanceof Pp?Pp.create(E3(t.unwrap())):t instanceof LA?LA.create(E3(t.unwrap())):t instanceof NA?NA.create(t.items.map(e=>E3(e))):t}s(E3,"deepPartialify");var Hd=class t extends ti{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=no.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==fr.object){let u=this._getOrReturnCtx(e);return tr(u,{code:St.invalid_type,expected:fr.object,received:u.parsedType}),Fn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ch&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Dp(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ch){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tr(i,{code:St.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Dp(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>fu.mergeObjectSync(n,u)):fu.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Pr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Pr.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:kn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return no.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return no.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return E3(this)}partial(e){let r={};return no.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return no.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Pp;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Nze(no.objectKeys(this.shape))}};Hd.create=(t,e)=>new Hd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:Ch.create(),typeName:kn.ZodObject,...ei(e)});Hd.strictCreate=(t,e)=>new Hd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:Ch.create(),typeName:kn.ZodObject,...ei(e)});Hd.lazycreate=(t,e)=>new Hd({shape:t,unknownKeys:"strip",catchall:Ch.create(),typeName:kn.ZodObject,...ei(e)});var KT=class extends ti{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new X0(l.ctx.common.issues));return tr(r,{code:St.invalid_union,unionErrors:a}),Fn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new X0(c));return tr(r,{code:St.invalid_union,unionErrors:l}),Fn}}get options(){return this._def.options}};KT.create=(t,e)=>new KT({options:t,typeName:kn.ZodUnion,...ei(e)});var zy=s(t=>t instanceof XT?zy(t.schema):t instanceof Z0?zy(t.innerType()):t instanceof ZT?[t.value]:t instanceof ew?t.options:t instanceof tw?no.objectValues(t.enum):t instanceof rw?zy(t._def.innerType):t instanceof zT?[void 0]:t instanceof YT?[null]:t instanceof Pp?[void 0,...zy(t.unwrap())]:t instanceof LA?[null,...zy(t.unwrap())]:t instanceof W6||t instanceof iw?zy(t.unwrap()):t instanceof nw?zy(t._def.innerType):[],"getDiscriminator"),yY=class t extends ti{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.object)return tr(r,{code:St.invalid_type,expected:fr.object,received:r.parsedType}),Fn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(tr(r,{code:St.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Fn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=zy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:kn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ei(n)})}};function the(t,e){let r=Yy(t),n=Yy(e);if(t===e)return{valid:!0,data:t};if(r===fr.object&&n===fr.object){let i=no.objectKeys(e),o=no.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=the(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(r===fr.array&&n===fr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=the(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===fr.date&&n===fr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(the,"mergeValues");var JT=class extends ti{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(Zme(o)||Zme(a))return Fn;let l=the(o.value,a.value);return l.valid?((ehe(o)||ehe(a))&&r.dirty(),{status:r.value,value:l.data}):(tr(n,{code:St.invalid_intersection_types}),Fn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};JT.create=(t,e,r)=>new JT({left:t,right:e,typeName:kn.ZodIntersection,...ei(r)});var NA=class t extends ti{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.array)return tr(n,{code:St.invalid_type,expected:fr.array,received:n.parsedType}),Fn;if(n.data.length<this._def.items.length)return tr(n,{code:St.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fn;!this._def.rest&&n.data.length>this._def.items.length&&(tr(n,{code:St.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Dp(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>fu.mergeArray(r,a)):fu.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};NA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new NA({items:t,typeName:kn.ZodTuple,rest:null,...ei(e)})};var CY=class t extends ti{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.object)return tr(n,{code:St.invalid_type,expected:fr.object,received:n.parsedType}),Fn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new Dp(n,l,n.path,l)),value:a._parse(new Dp(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?fu.mergeObjectAsync(r,i):fu.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ti?new t({keyType:e,valueType:r,typeName:kn.ZodRecord,...ei(n)}):new t({keyType:jb.create(),valueType:e,typeName:kn.ZodRecord,...ei(r)})}},S3=class extends ti{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.map)return tr(n,{code:St.invalid_type,expected:fr.map,received:n.parsedType}),Fn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new Dp(n,l,n.path,[u,"key"])),value:o._parse(new Dp(n,c,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Fn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Fn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};S3.create=(t,e,r)=>new S3({valueType:e,keyType:t,typeName:kn.ZodMap,...ei(r)});var R3=class t extends ti{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.set)return tr(n,{code:St.invalid_type,expected:fr.set,received:n.parsedType}),Fn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(tr(n,{code:St.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(tr(n,{code:St.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Fn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let l=[...n.data.values()].map((c,u)=>o._parse(new Dp(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:Pr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Pr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};R3.create=(t,e)=>new R3({valueType:t,minSize:null,maxSize:null,typeName:kn.ZodSet,...ei(e)});var xY=class t extends ti{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.function)return tr(r,{code:St.invalid_type,expected:fr.function,received:r.parsedType}),Fn;function n(l,c){return gY({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,hY(),T3].filter(u=>!!u),issueData:{code:St.invalid_arguments,argumentsError:c}})}s(n,"makeArgsIssue");function i(l,c){return gY({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,hY(),T3].filter(u=>!!u),issueData:{code:St.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof $b){let l=this;return zu(async function(...c){let u=new X0([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(n(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return zu(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new X0([n(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new X0([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:NA.create(e).rest(Ky.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||NA.create([]).rest(Ky.create()),returns:r||Ky.create(),typeName:kn.ZodFunction,...ei(n)})}},XT=class extends ti{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};XT.create=(t,e)=>new XT({getter:t,typeName:kn.ZodLazy,...ei(e)});var ZT=class extends ti{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return tr(r,{received:r.data,code:St.invalid_literal,expected:this._def.value}),Fn}return{status:"valid",value:e.data}}get value(){return this._def.value}};ZT.create=(t,e)=>new ZT({value:t,typeName:kn.ZodLiteral,...ei(e)});function Nze(t,e){return new ew({values:t,typeName:kn.ZodEnum,...ei(e)})}s(Nze,"createZodEnum");var ew=class t extends ti{static{s(this,"ZodEnum")}constructor(){super(...arguments),O6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return tr(r,{expected:no.joinValues(n),received:r.parsedType,code:St.invalid_type}),Fn}if(AY(this,O6,"f")||kze(this,O6,new Set(this._def.values),"f"),!AY(this,O6,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return tr(r,{received:r.data,code:St.invalid_enum_value,options:n}),Fn}return zu(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};O6=new WeakMap;ew.create=Nze;var tw=class extends ti{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),U6.set(this,void 0)}_parse(e){let r=no.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==fr.string&&n.parsedType!==fr.number){let i=no.objectValues(r);return tr(n,{expected:no.joinValues(i),received:n.parsedType,code:St.invalid_type}),Fn}if(AY(this,U6,"f")||kze(this,U6,new Set(no.getValidEnumValues(this._def.values)),"f"),!AY(this,U6,"f").has(e.data)){let i=no.objectValues(r);return tr(n,{received:n.data,code:St.invalid_enum_value,options:i}),Fn}return zu(e.data)}get enum(){return this._def.values}};U6=new WeakMap;tw.create=(t,e)=>new tw({values:t,typeName:kn.ZodNativeEnum,...ei(e)});var $b=class extends ti{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.promise&&r.common.async===!1)return tr(r,{code:St.invalid_type,expected:fr.promise,received:r.parsedType}),Fn;let n=r.parsedType===fr.promise?r.data:Promise.resolve(r.data);return zu(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};$b.create=(t,e)=>new $b({type:t,typeName:kn.ZodPromise,...ei(e)});var Z0=class extends ti{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return Fn;let c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Fn:c.status==="dirty"||r.value==="dirty"?I3(c.value):c});{if(r.value==="aborted")return Fn;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?Fn:l.status==="dirty"||r.value==="dirty"?I3(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Fn:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Fn:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!GT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>GT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);no.assertNever(i)}};Z0.create=(t,e,r)=>new Z0({schema:t,typeName:kn.ZodEffects,effect:e,...ei(r)});Z0.createWithPreprocess=(t,e,r)=>new Z0({schema:e,effect:{type:"preprocess",transform:t},typeName:kn.ZodEffects,...ei(r)});var Pp=class extends ti{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===fr.undefined?zu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pp.create=(t,e)=>new Pp({innerType:t,typeName:kn.ZodOptional,...ei(e)});var LA=class extends ti{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===fr.null?zu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};LA.create=(t,e)=>new LA({innerType:t,typeName:kn.ZodNullable,...ei(e)});var rw=class extends ti{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===fr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};rw.create=(t,e)=>new rw({innerType:t,typeName:kn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ei(e)});var nw=class extends ti{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return q6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new X0(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new X0(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};nw.create=(t,e)=>new nw({innerType:t,typeName:kn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ei(e)});var k3=class extends ti{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==fr.nan){let n=this._getOrReturnCtx(e);return tr(n,{code:St.invalid_type,expected:fr.nan,received:n.parsedType}),Fn}return{status:"valid",value:e.data}}};k3.create=t=>new k3({typeName:kn.ZodNaN,...ei(t)});var lHt=Symbol("zod_brand"),W6=class extends ti{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},G6=class t extends ti{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Fn:o.status==="dirty"?(r.dirty(),I3(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Fn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:kn.ZodPipeline})}},iw=class extends ti{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(GT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return q6(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};iw.create=(t,e)=>new iw({innerType:t,typeName:kn.ZodReadonly,...ei(e)});function _ze(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(_ze,"cleanParams");function Lze(t,e={},r){return t?Vb.create().superRefine((n,i)=>{var o,a;let l=t(n);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=_ze(e,n),m=(d=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=_ze(e,n),u=(a=(o=c.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):Vb.create()}s(Lze,"custom");var cHt={object:Hd.lazycreate},kn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(kn||(kn={}));var uHt=s((t,e={message:`Input not instance of ${t.name}`})=>Lze(r=>r instanceof t,e),"instanceOfType"),Fze=jb.create,Mze=HT.create,dHt=k3.create,fHt=jT.create,Qze=VT.create,pHt=$T.create,mHt=w3.create,hHt=zT.create,gHt=YT.create,AHt=Vb.create,yHt=Ky.create,CHt=Ch.create,xHt=_3.create,vHt=Jy.create,bHt=Hd.create,EHt=Hd.strictCreate,IHt=KT.create,THt=yY.create,wHt=JT.create,_Ht=NA.create,SHt=CY.create,RHt=S3.create,kHt=R3.create,BHt=xY.create,PHt=XT.create,DHt=ZT.create,NHt=ew.create,LHt=tw.create,FHt=$b.create,Sze=Z0.create,MHt=Pp.create,QHt=LA.create,OHt=Z0.createWithPreprocess,UHt=G6.create,qHt=s(()=>Fze().optional(),"ostring"),WHt=s(()=>Mze().optional(),"onumber"),GHt=s(()=>Qze().optional(),"oboolean"),HHt={string:s(t=>jb.create({...t,coerce:!0}),"string"),number:s(t=>HT.create({...t,coerce:!0}),"number"),boolean:s(t=>VT.create({...t,coerce:!0}),"boolean"),bigint:s(t=>jT.create({...t,coerce:!0}),"bigint"),date:s(t=>$T.create({...t,coerce:!0}),"date")},jHt=Fn,K=Object.freeze({__proto__:null,defaultErrorMap:T3,setErrorMap:OGt,getErrorMap:hY,makeIssue:gY,EMPTY_PATH:UGt,addIssueToContext:tr,ParseStatus:fu,INVALID:Fn,DIRTY:I3,OK:zu,isAborted:Zme,isDirty:ehe,isValid:GT,isAsync:q6,get util(){return no},get objectUtil(){return Xme},ZodParsedType:fr,getParsedType:Yy,ZodType:ti,datetimeRegex:Dze,ZodString:jb,ZodNumber:HT,ZodBigInt:jT,ZodBoolean:VT,ZodDate:$T,ZodSymbol:w3,ZodUndefined:zT,ZodNull:YT,ZodAny:Vb,ZodUnknown:Ky,ZodNever:Ch,ZodVoid:_3,ZodArray:Jy,ZodObject:Hd,ZodUnion:KT,ZodDiscriminatedUnion:yY,ZodIntersection:JT,ZodTuple:NA,ZodRecord:CY,ZodMap:S3,ZodSet:R3,ZodFunction:xY,ZodLazy:XT,ZodLiteral:ZT,ZodEnum:ew,ZodNativeEnum:tw,ZodPromise:$b,ZodEffects:Z0,ZodTransformer:Z0,ZodOptional:Pp,ZodNullable:LA,ZodDefault:rw,ZodCatch:nw,ZodNaN:k3,BRAND:lHt,ZodBranded:W6,ZodPipeline:G6,ZodReadonly:iw,custom:Lze,Schema:ti,ZodSchema:ti,late:cHt,get ZodFirstPartyTypeKind(){return kn},coerce:HHt,any:AHt,array:vHt,bigint:fHt,boolean:Qze,date:pHt,discriminatedUnion:THt,effect:Sze,enum:NHt,function:BHt,instanceof:uHt,intersection:wHt,lazy:PHt,literal:DHt,map:RHt,nan:dHt,nativeEnum:LHt,never:CHt,null:gHt,nullable:QHt,number:Mze,object:bHt,oboolean:GHt,onumber:WHt,optional:MHt,ostring:qHt,pipeline:UHt,preprocess:OHt,promise:FHt,record:SHt,set:kHt,strictObject:EHt,string:Fze,symbol:mHt,transformer:Sze,tuple:_Ht,undefined:hHt,union:IHt,unknown:yHt,void:xHt,NEVER:jHt,ZodIssueCode:St,quotelessJson:QGt,ZodError:X0});var H6="2025-03-26",Oze=[H6,"2024-11-05","2024-10-07"],vY="2.0",Uze=K.union([K.string(),K.number().int()]),qze=K.string(),VHt=K.object({progressToken:K.optional(Uze)}).passthrough(),xh=K.object({_meta:K.optional(VHt)}).passthrough(),ef=K.object({method:K.string(),params:K.optional(xh)}),j6=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),FA=K.object({method:K.string(),params:K.optional(j6)}),vh=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),bY=K.union([K.string(),K.number().int()]),Wze=K.object({jsonrpc:K.literal(vY),id:bY}).merge(ef).strict(),EY=s(t=>Wze.safeParse(t).success,"isJSONRPCRequest"),Gze=K.object({jsonrpc:K.literal(vY)}).merge(FA).strict(),Hze=s(t=>Gze.safeParse(t).success,"isJSONRPCNotification"),jze=K.object({jsonrpc:K.literal(vY),id:bY,result:vh}).strict(),V6=s(t=>jze.safeParse(t).success,"isJSONRPCResponse"),zb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(zb||(zb={}));var Vze=K.object({jsonrpc:K.literal(vY),id:bY,error:K.object({code:K.number().int(),message:K.string(),data:K.optional(K.unknown())})}).strict(),$ze=s(t=>Vze.safeParse(t).success,"isJSONRPCError"),Yb=K.union([Wze,Gze,jze,Vze]),sw=vh.strict(),IY=FA.extend({method:K.literal("notifications/cancelled"),params:j6.extend({requestId:bY,reason:K.string().optional()})}),zze=K.object({name:K.string(),version:K.string()}).passthrough(),$Ht=K.object({experimental:K.optional(K.object({}).passthrough()),sampling:K.optional(K.object({}).passthrough()),roots:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),zHt=ef.extend({method:K.literal("initialize"),params:xh.extend({protocolVersion:K.string(),capabilities:$Ht,clientInfo:zze})});var YHt=K.object({experimental:K.optional(K.object({}).passthrough()),logging:K.optional(K.object({}).passthrough()),completions:K.optional(K.object({}).passthrough()),prompts:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough()),resources:K.optional(K.object({subscribe:K.optional(K.boolean()),listChanged:K.optional(K.boolean())}).passthrough()),tools:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),rhe=vh.extend({protocolVersion:K.string(),capabilities:YHt,serverInfo:zze,instructions:K.optional(K.string())}),Yze=FA.extend({method:K.literal("notifications/initialized")}),Kze=s(t=>Yze.safeParse(t).success,"isInitializedNotification"),TY=ef.extend({method:K.literal("ping")}),KHt=K.object({progress:K.number(),total:K.optional(K.number())}).passthrough(),wY=FA.extend({method:K.literal("notifications/progress"),params:j6.merge(KHt).extend({progressToken:Uze})}),_Y=ef.extend({params:xh.extend({cursor:K.optional(qze)}).optional()}),SY=vh.extend({nextCursor:K.optional(qze)}),Jze=K.object({uri:K.string(),mimeType:K.optional(K.string())}).passthrough(),Xze=Jze.extend({text:K.string()}),Zze=Jze.extend({blob:K.string().base64()}),JHt=K.object({uri:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),XHt=K.object({uriTemplate:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),ZHt=_Y.extend({method:K.literal("resources/list")}),nhe=SY.extend({resources:K.array(JHt)}),ejt=_Y.extend({method:K.literal("resources/templates/list")}),ihe=SY.extend({resourceTemplates:K.array(XHt)}),tjt=ef.extend({method:K.literal("resources/read"),params:xh.extend({uri:K.string()})}),ohe=vh.extend({contents:K.array(K.union([Xze,Zze]))}),rjt=FA.extend({method:K.literal("notifications/resources/list_changed")}),njt=ef.extend({method:K.literal("resources/subscribe"),params:xh.extend({uri:K.string()})}),ijt=ef.extend({method:K.literal("resources/unsubscribe"),params:xh.extend({uri:K.string()})}),ojt=FA.extend({method:K.literal("notifications/resources/updated"),params:j6.extend({uri:K.string()})}),sjt=K.object({name:K.string(),description:K.optional(K.string()),required:K.optional(K.boolean())}).passthrough(),ajt=K.object({name:K.string(),description:K.optional(K.string()),arguments:K.optional(K.array(sjt))}).passthrough(),ljt=_Y.extend({method:K.literal("prompts/list")}),she=SY.extend({prompts:K.array(ajt)}),cjt=ef.extend({method:K.literal("prompts/get"),params:xh.extend({name:K.string(),arguments:K.optional(K.record(K.string()))})}),RY=K.object({type:K.literal("text"),text:K.string()}).passthrough(),kY=K.object({type:K.literal("image"),data:K.string().base64(),mimeType:K.string()}).passthrough(),BY=K.object({type:K.literal("audio"),data:K.string().base64(),mimeType:K.string()}).passthrough(),eYe=K.object({type:K.literal("resource"),resource:K.union([Xze,Zze])}).passthrough(),ujt=K.object({role:K.enum(["user","assistant"]),content:K.union([RY,kY,BY,eYe])}).passthrough(),ahe=vh.extend({description:K.optional(K.string()),messages:K.array(ujt)}),$6=FA.extend({method:K.literal("notifications/prompts/list_changed")}),djt=K.object({title:K.optional(K.string()),readOnlyHint:K.optional(K.boolean()),destructiveHint:K.optional(K.boolean()),idempotentHint:K.optional(K.boolean()),openWorldHint:K.optional(K.boolean())}).passthrough(),fjt=K.object({name:K.string(),description:K.optional(K.string()),inputSchema:K.object({type:K.literal("object"),properties:K.optional(K.object({}).passthrough())}).passthrough(),annotations:K.optional(djt)}).passthrough(),pjt=_Y.extend({method:K.literal("tools/list")}),lhe=SY.extend({tools:K.array(fjt)}),PY=vh.extend({content:K.array(K.union([RY,kY,BY,eYe])),isError:K.boolean().default(!1).optional()}),Mai=PY.or(vh.extend({toolResult:K.unknown()})),mjt=ef.extend({method:K.literal("tools/call"),params:xh.extend({name:K.string(),arguments:K.optional(K.record(K.unknown()))})}),z6=FA.extend({method:K.literal("notifications/tools/list_changed")}),tYe=K.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),hjt=ef.extend({method:K.literal("logging/setLevel"),params:xh.extend({level:tYe})}),che=FA.extend({method:K.literal("notifications/message"),params:j6.extend({level:tYe,logger:K.optional(K.string()),data:K.unknown()})}),gjt=K.object({name:K.string().optional()}).passthrough(),Ajt=K.object({hints:K.optional(K.array(gjt)),costPriority:K.optional(K.number().min(0).max(1)),speedPriority:K.optional(K.number().min(0).max(1)),intelligencePriority:K.optional(K.number().min(0).max(1))}).passthrough(),yjt=K.object({role:K.enum(["user","assistant"]),content:K.union([RY,kY,BY])}).passthrough(),Cjt=ef.extend({method:K.literal("sampling/createMessage"),params:xh.extend({messages:K.array(yjt),systemPrompt:K.optional(K.string()),includeContext:K.optional(K.enum(["none","thisServer","allServers"])),temperature:K.optional(K.number()),maxTokens:K.number().int(),stopSequences:K.optional(K.array(K.string())),metadata:K.optional(K.object({}).passthrough()),modelPreferences:K.optional(Ajt)})}),xjt=vh.extend({model:K.string(),stopReason:K.optional(K.enum(["endTurn","stopSequence","maxTokens"]).or(K.string())),role:K.enum(["user","assistant"]),content:K.discriminatedUnion("type",[RY,kY,BY])}),vjt=K.object({type:K.literal("ref/resource"),uri:K.string()}).passthrough(),bjt=K.object({type:K.literal("ref/prompt"),name:K.string()}).passthrough(),Ejt=ef.extend({method:K.literal("completion/complete"),params:xh.extend({ref:K.union([bjt,vjt]),argument:K.object({name:K.string(),value:K.string()}).passthrough()})}),uhe=vh.extend({completion:K.object({values:K.array(K.string()).max(100),total:K.optional(K.number().int()),hasMore:K.optional(K.boolean())}).passthrough()}),Ijt=K.object({uri:K.string().startsWith("file://"),name:K.optional(K.string())}).passthrough(),Tjt=ef.extend({method:K.literal("roots/list")}),wjt=vh.extend({roots:K.array(Ijt)}),_jt=FA.extend({method:K.literal("notifications/roots/list_changed")}),Qai=K.union([TY,zHt,Ejt,hjt,cjt,ljt,ZHt,ejt,tjt,njt,ijt,mjt,pjt]),Oai=K.union([IY,wY,Yze,_jt]),Uai=K.union([sw,xjt,wjt]),qai=K.union([TY,Cjt,Tjt]),Wai=K.union([IY,wY,che,ojt,rjt,z6,$6]),Gai=K.union([sw,rhe,uhe,ahe,she,nhe,ihe,ohe,PY,lhe]),ow=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var Sjt=6e4,DY=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(IY,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(wY,r=>{this._onprogress(r)}),this.setRequestHandler(TY,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new ow(zb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=(r,n)=>{V6(r)||$ze(r)?this._onresponse(r):EY(r)?this._onrequest(r,n):Hze(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new ow(zb.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let l=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:zb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:zb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),V6(e))n(e);else{let i=new ow(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=n?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};n?.onprogress&&(this._progressHandlers.set(g,n.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let B=r.parse(_.result);l(B)}catch(B){c(B)}}}),(p=n?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=n?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=n?.timeout)!==null&&m!==void 0?m:Sjt,E=s(()=>v(new ow(zb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,n?.maxTotalTimeout,E,(h=n?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function rYe(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(rYe,"mergeCapabilities");var NY=class extends DY{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=rYe(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:H6,capabilities:this._capabilities,clientInfo:this._clientInfo}},rhe,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!Oze.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},sw,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},uhe,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},sw,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},ahe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},she,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},nhe,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},ihe,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},ohe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},sw,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},sw,r)}async callTool(e,r=PY,n){return this.request({method:"tools/call",params:e},r,n)}async listTools(e,r){return this.request({method:"tools/list",params:e},lhe,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var nYe=je(require("events"));var Kb=class{constructor(e,r,n){this.transport=null;this.emitter=new nYe.default;this.ctx=e,this.mcp=new NY({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw Qo.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw Qo.error(this.ctx,"Connection failed:",r),await DA(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await Tze(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;du(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new Hi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Qo.error(this.ctx,o),await DA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new yi(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Qo.error(this.ctx,o),await DA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new yi(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Qo.error(this.ctx,o),await DA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new yi(o))}return n}addListeners(){this.mcp.onclose=()=>{Qo.info(this.ctx,`MCP server ${this.name} connection closed.`),du(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Qo.error(this.ctx,`MCP server ${this.name} error:`,e),DA(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(che,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":Qo.info(this.ctx,`MCP server ${this.name} log:`,r),du(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":Qo.warn(this.ctx,`MCP server ${this.name} log:`,r),WT(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Qo.error(this.ctx,`MCP server ${this.name} log:`,r),DA(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:Qo.info(this.ctx,`MCP server ${this.name} log:`,r),du(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new Hi([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new yi(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new yT({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();f();f();var LY=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function dhe(t){}s(dhe,"noop");function FY(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=dhe,onError:r=dhe,onRetry:n=dhe,onComment:i}=t,o="",a=!0,l,c="",u="";function d(y){let v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[b,E]=Rjt(`${o}${v}`);for(let _ of b)p(_);o=E,a=!1}s(d,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),E=y[v+1]===" "?2:1,_=y.slice(v+E);m(b,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,v,b){switch(y){case"event":u=v;break;case"data":c=`${c}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?n(parseInt(v,10)):r(new LY(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:r(new LY(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}s(m,"processField");function h(){c.length>0&&e({id:l,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,l=void 0,c="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(FY,"createParser");function Rjt(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let l=t.slice(n,a);e.push(l),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(Rjt,"splitLines");var QY=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(iYe(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(iYe(this),r)}};function kjt(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(kjt,"syntaxError");function fhe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(fhe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${fhe(t.cause)}`:t.message:`${t}`}s(fhe,"flattenError");function iYe(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(iYe,"inspectableError");var sYe=s(t=>{throw TypeError(t)},"__typeError"),xhe=s((t,e,r)=>e.has(t)||sYe("Cannot "+r),"__accessCheck"),ki=s((t,e,r)=>(xhe(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),El=s((t,e,r)=>e.has(t)?sYe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),qs=s((t,e,r,n)=>(xhe(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),Xy=s((t,e,r)=>(xhe(t,e,"access private method"),r),"__privateMethod"),jd,aw,B3,MY,OY,J6,N3,X6,Jb,P3,L3,D3,Y6,bh,phe,mhe,hhe,oYe,ghe,Ahe,K6,yhe,Che,lw=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),El(this,bh),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,El(this,jd),El(this,aw),El(this,B3),El(this,MY),El(this,OY),El(this,J6),El(this,N3),El(this,X6,null),El(this,Jb),El(this,P3),El(this,L3,null),El(this,D3,null),El(this,Y6,null),El(this,mhe,async o=>{var a;ki(this,P3).reset();let{body:l,redirected:c,status:u,headers:d}=o;if(u===204){Xy(this,bh,K6).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?qs(this,B3,new URL(o.url)):qs(this,B3,void 0),u!==200){Xy(this,bh,K6).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){Xy(this,bh,K6).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(ki(this,jd)===this.CLOSED)return;qs(this,jd,this.OPEN);let p=new Event("open");if((a=ki(this,Y6))==null||a.call(this,p),this.dispatchEvent(p),typeof l!="object"||!l||!("getReader"in l)){Xy(this,bh,K6).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=l.getReader(),g=!0;do{let{done:y,value:v}=await h.read();v&&ki(this,P3).feed(m.decode(v,{stream:!y})),y&&(g=!1,ki(this,P3).reset(),Xy(this,bh,yhe).call(this))}while(g)}),El(this,hhe,o=>{qs(this,Jb,void 0),!(o.name==="AbortError"||o.type==="aborted")&&Xy(this,bh,yhe).call(this,fhe(o))}),El(this,ghe,o=>{typeof o.id=="string"&&qs(this,X6,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:ki(this,B3)?ki(this,B3).origin:ki(this,aw).origin,lastEventId:o.id||""});ki(this,D3)&&(!o.event||o.event==="message")&&ki(this,D3).call(this,a),this.dispatchEvent(a)}),El(this,Ahe,o=>{qs(this,J6,o)}),El(this,Che,()=>{qs(this,N3,void 0),ki(this,jd)===this.CONNECTING&&Xy(this,bh,phe).call(this)});try{if(e instanceof URL)qs(this,aw,e);else if(typeof e=="string")qs(this,aw,new URL(e,Bjt()));else throw new Error("Invalid URL")}catch{throw kjt("An invalid or illegal string was specified")}qs(this,P3,FY({onEvent:ki(this,ghe),onRetry:ki(this,Ahe)})),qs(this,jd,this.CONNECTING),qs(this,J6,3e3),qs(this,OY,(n=r?.fetch)!=null?n:globalThis.fetch),qs(this,MY,(i=r?.withCredentials)!=null?i:!1),Xy(this,bh,phe).call(this)}get readyState(){return ki(this,jd)}get url(){return ki(this,aw).href}get withCredentials(){return ki(this,MY)}get onerror(){return ki(this,L3)}set onerror(e){qs(this,L3,e)}get onmessage(){return ki(this,D3)}set onmessage(e){qs(this,D3,e)}get onopen(){return ki(this,Y6)}set onopen(e){qs(this,Y6,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){ki(this,N3)&&clearTimeout(ki(this,N3)),ki(this,jd)!==this.CLOSED&&(ki(this,Jb)&&ki(this,Jb).abort(),qs(this,jd,this.CLOSED),qs(this,Jb,void 0))}};jd=new WeakMap,aw=new WeakMap,B3=new WeakMap,MY=new WeakMap,OY=new WeakMap,J6=new WeakMap,N3=new WeakMap,X6=new WeakMap,Jb=new WeakMap,P3=new WeakMap,L3=new WeakMap,D3=new WeakMap,Y6=new WeakMap,bh=new WeakSet,phe=s(function(){qs(this,jd,this.CONNECTING),qs(this,Jb,new AbortController),ki(this,OY)(ki(this,aw),Xy(this,bh,oYe).call(this)).then(ki(this,mhe)).catch(ki(this,hhe))},"connect_fn"),mhe=new WeakMap,hhe=new WeakMap,oYe=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...ki(this,X6)?{"Last-Event-ID":ki(this,X6)}:void 0},cache:"no-store",signal:(t=ki(this,Jb))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),ghe=new WeakMap,Ahe=new WeakMap,K6=s(function(t,e){var r;ki(this,jd)!==this.CLOSED&&qs(this,jd,this.CLOSED);let n=new QY("error",{code:e,message:t});(r=ki(this,L3))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),yhe=s(function(t,e){var r;if(ki(this,jd)===this.CLOSED)return;qs(this,jd,this.CONNECTING);let n=new QY("error",{code:e,message:t});(r=ki(this,L3))==null||r.call(this,n),this.dispatchEvent(n),qs(this,N3,setTimeout(ki(this,Che),ki(this,J6)))},"scheduleReconnect_fn"),Che=new WeakMap,lw.CONNECTING=0,lw.OPEN=1,lw.CLOSED=2;function Bjt(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(Bjt,"getBaseURL");f();f();var vhe;vhe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function Pjt(t){return(await vhe).getRandomValues(new Uint8Array(t))}s(Pjt,"getRandomValues");async function Djt(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await Pjt(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(Djt,"random");async function Njt(t){return await Djt(t)}s(Njt,"generateVerifier");async function Ljt(t){let e=await(await vhe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(Ljt,"generateChallenge");async function bhe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await Njt(t),r=await Ljt(e);return{code_verifier:e,code_challenge:r}}s(bhe,"pkceChallenge");f();var aYe=K.object({issuer:K.string(),authorization_endpoint:K.string(),token_endpoint:K.string(),registration_endpoint:K.string().optional(),scopes_supported:K.array(K.string()).optional(),response_types_supported:K.array(K.string()),response_modes_supported:K.array(K.string()).optional(),grant_types_supported:K.array(K.string()).optional(),token_endpoint_auth_methods_supported:K.array(K.string()).optional(),token_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),service_documentation:K.string().optional(),revocation_endpoint:K.string().optional(),revocation_endpoint_auth_methods_supported:K.array(K.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),introspection_endpoint:K.string().optional(),introspection_endpoint_auth_methods_supported:K.array(K.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),code_challenge_methods_supported:K.array(K.string()).optional()}).passthrough(),Ehe=K.object({access_token:K.string(),token_type:K.string(),expires_in:K.number().optional(),scope:K.string().optional(),refresh_token:K.string().optional()}).strip(),Tli=K.object({error:K.string(),error_description:K.string().optional(),error_uri:K.string().optional()}),Fjt=K.object({redirect_uris:K.array(K.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:K.string().optional(),grant_types:K.array(K.string()).optional(),response_types:K.array(K.string()).optional(),client_name:K.string().optional(),client_uri:K.string().optional(),logo_uri:K.string().optional(),scope:K.string().optional(),contacts:K.array(K.string()).optional(),tos_uri:K.string().optional(),policy_uri:K.string().optional(),jwks_uri:K.string().optional(),jwks:K.any().optional(),software_id:K.string().optional(),software_version:K.string().optional()}).strip(),Mjt=K.object({client_id:K.string(),client_secret:K.string().optional(),client_id_issued_at:K.number().optional(),client_secret_expires_at:K.number().optional()}).strip(),lYe=Fjt.merge(Mjt),wli=K.object({error:K.string(),error_description:K.string().optional()}).strip(),_li=K.object({token:K.string(),token_type_hint:K.string().optional()}).strip();var Vd=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function Xb(t,{serverUrl:e,authorizationCode:r}){let n=await Qjt(e),i=await Promise.resolve(t.clientInformation());if(!i){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let c=await Wjt(e,{metadata:n,clientMetadata:t.clientMetadata});await t.saveClientInformation(c),i=c}if(r!==void 0){let c=await t.codeVerifier(),u=await Ujt(e,{metadata:n,clientInformation:i,authorizationCode:r,codeVerifier:c,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let c=await qjt(e,{metadata:n,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(c),"AUTHORIZED"}catch(c){console.error("Could not refresh OAuth tokens:",c)}let{authorizationUrl:a,codeVerifier:l}=await Ojt(e,{metadata:n,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(l),await t.redirectToAuthorization(a),"REDIRECT"}s(Xb,"auth");async function Qjt(t,e){var r;let n=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(n,{headers:{"MCP-Protocol-Version":(r=e?.protocolVersion)!==null&&r!==void 0?r:H6}})}catch(o){if(o instanceof TypeError)i=await fetch(n);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return aYe.parse(await i.json())}}s(Qjt,"discoverOAuthMetadata");async function Ojt(t,{metadata:e,clientInformation:r,redirectUrl:n}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let l=await bhe(),c=l.code_verifier,u=l.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(n)),{authorizationUrl:a,codeVerifier:c}}s(Ojt,"startAuthorization");async function Ujt(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o}){let a="authorization_code",l;if(e){if(l=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else l=new URL("/token",t);let c=new URLSearchParams({grant_type:a,client_id:r.client_id,code:n,code_verifier:i,redirect_uri:String(o)});r.client_secret&&c.set("client_secret",r.client_secret);let u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return Ehe.parse(await u.json())}s(Ujt,"exchangeAuthorization");async function qjt(t,{metadata:e,clientInformation:r,refreshToken:n}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:r.client_id,refresh_token:n});r.client_secret&&a.set("client_secret",r.client_secret);let l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return Ehe.parse(await l.json())}s(qjt,"refreshAuthorization");async function Wjt(t,{metadata:e,clientMetadata:r}){let n;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");n=new URL(e.registration_endpoint)}else n=new URL("/register",t);let i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return lYe.parse(await i.json())}s(Wjt,"registerClient");var Ihe=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},UY=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new Vd("No auth provider");let r;try{r=await Xb(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new Vd;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(e.Authorization=`Bearer ${r.access_token}`)}return e}_startOrAuth(){return new Promise((e,r)=>{var n;this._eventSource=new lw(this._url.href,(n=this._eventSourceInit)!==null&&n!==void 0?n:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,r);return}let a=new Ihe(i.code,i.message,i);r(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(l){r(l),(o=this.onerror)===null||o===void 0||o.call(this,l),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let l=i,c;try{c=Yb.parse(JSON.parse(l.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,c)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new Vd("No auth provider");if(await Xb(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new Vd("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(r=this._requestInit)===null||r===void 0?void 0:r.headers});a.set("content-type","application/json");let l={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},c=await fetch(this._endpoint,l);if(!c.ok){if(c.status===401&&this._authProvider){if(await Xb(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new Vd;return this.send(e)}let u=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var qY=class extends Kb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new UY(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(z6,r=>{Qo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(my)}),this.mcp.setNotificationHandler($6,r=>{Qo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(my)})}};f();f();var XYe=je(KYe(),1),Z6=je(require("node:process"),1),ZYe=require("node:stream");f();var GY=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),hVt(r)}clear(){this._buffer=void 0}};function hVt(t){return Yb.parse(JSON.parse(t))}s(hVt,"deserializeMessage");function JYe(t){return JSON.stringify(t)+`
`}s(JYe,"serializeMessage");var gVt=Z6.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function AVt(){let t={};for(let e of gVt){let r=Z6.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(AVt,"getDefaultEnvironment");var HY=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new GY,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new ZYe.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,l,c;this._process=(0,XYe.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:AVt(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:Z6.default.platform==="win32"&&yVt(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=JYe(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function yVt(){return"type"in Z6.default}s(yVt,"isElectron");var jY=class extends Kb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...Ize(),...r.env||{}},r.stderr="pipe",new HY(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{WT(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};f();f();f();var VY=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=FY({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var CVt={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},eN=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},$Y=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:CVt}async _authThenStart(){var e;if(!this._authProvider)throw new Vd("No auth provider");let r;try{r=await Xb(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new Vd;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._sessionId&&(r["mcp-session-id"]=this._sessionId),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var r,n;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new eN(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r){if(!e)return;let{onresumptiontoken:n,replayMessageId:i}=r,o;s(async()=>{var l,c,u,d;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new VY).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,n?.(m.id)),!m.event||m.event==="message")try{let g=Yb.parse(JSON.parse(m.data));i!==void 0&&V6(g)&&(g.id=i),(l=this.onmessage)===null||l===void 0||l.call(this,g)}catch(g){(c=this.onerror)===null||c===void 0||c.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:n,replayMessageId:i},0)}catch(m){(d=this.onerror)===null||d===void 0||d.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new Vd("No auth provider");if(await Xb(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new Vd("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o;try{let{resumptionToken:a,onresumptiontoken:l}=r||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:EY(e)?e.id:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let c=await this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:c,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},d=await fetch(this._url,u),p=d.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!d.ok){if(d.status===401&&this._authProvider){if(await Xb(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new Vd;return this.send(e)}let y=await d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${y}`)}if(d.status===202){Kze(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=d.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let y=await d.json(),v=Array.isArray(y)?y.map(b=>Yb.parse(b)):[Yb.parse(y)];for(let b of v)(i=this.onmessage)===null||i===void 0||i.call(this,b)}else throw new eN(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,r;if(this._sessionId)try{let n=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:n,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new eN(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(n){throw(r=this.onerror)===null||r===void 0||r.call(this,n),n}}};var zY=class extends Kb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new $Y(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(z6,r=>{Qo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(my)}),this.mcp.setNotificationHandler($6,r=>{Qo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(my)})}};f();var YY=class extends Sb{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Da;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(eA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var eKe=je(Xa());var KY=class t extends q0{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new mY;this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new eKe.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){Qo.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(su).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(n,l);c&&(a._status=c)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Qo.error(this.ctx,a),await DA(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await du(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new qY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new zY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new jY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(my,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await du(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(Qo.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let l=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;Qo.info(this.ctx,l),du(this.ctx,{message:l,server:r.name});let c={...r,type:"sse"};return await this.addServer(c)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await DA(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(Va).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(yr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:l,_status:c,_nameForModel:u,annotations:d}=i;Qo.debug(this.ctx,"register MCP Tool:",{...i}),c!=="disabled"&&this.ctx.get(su).registerTool(new YY({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:l,annotations:d},p=>(Qo.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(su).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await du(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(my),await i.cleanup())}this.MCPServersMap.clear()}};f();var tKe=je(Xa());var JY=class t extends Km{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new tKe.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(yr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var ZY=je(Xa());var xVt=new ZY.ProtocolRequestType("copilot/showPanelMessageRequest"),vVt=new ZY.ProtocolNotificationType("copilot/showPanelMessage"),XY=class extends rR{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(yr).connection.sendNotification(vVt,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(yr).connection,i;try{i=await n.sendRequest(xVt,r)}catch(l){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${o2(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var bVt=new Tt("fetcher"),EVt="https://default.exp-tas.com/",eK=class extends Tn{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Fc(i)||`${r}/`.startsWith(EVt))throw i;bVt.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}set proxySettings(r){this.defaultFetcher.proxySettings=r}get proxySettings(){return this.defaultFetcher.proxySettings}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}makeAbortController(){return this.defaultFetcher.makeAbortController()}};var rKe=new Tt("fetcher"),tK=class extends Tn{constructor(r,n=new v3(r),i=new C3(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new eK(r,n,i,()=>{rKe.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(Dy).once(()=>{this.updateFetcher()}),r.get(z0).onConfigChange(Pt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Gi(r,Pt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Go).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=Gi(this.ctx,Pt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(rKe.debug(this.ctx,n),this.currentFetcher=r)}get name(){return this.currentFetcher.name}set proxySettings(r){this.helixFetcher.proxySettings=r}get proxySettings(){return this.helixFetcher.proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.helixFetcher.rejectUnauthorized=r}get rejectUnauthorized(){return super.rejectUnauthorized}fetch(r,n){return this.currentFetcher.fetch(r,n)}disconnectAll(){return this.currentFetcher.disconnectAll()}makeAbortController(){return this.currentFetcher.makeAbortController()}};f();var rK=class extends Va{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(yr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};f();f();var nKe=je(require("crypto")),iKe=require("os");var IVt=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function TVt(t){let e=t.replace(/-/g,":").toLowerCase();return!IVt.has(e)}s(TVt,"validateMacAddress");function wVt(){let t=(0,iKe.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(TVt(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(wVt,"getMac");var Nhe;function _Vt(){try{let t=wVt();return nKe.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(_Vt,"getMacMachineId");function oKe(){return Nhe||(Nhe=_Vt()||sr()),Nhe}s(oKe,"getMachineId");var SVt=sr()+Date.now(),sKe=new Ps(SVt,oKe());f();f();var tN=je(require("node:process"),1),Vhe=require("node:buffer"),$he=je(require("node:path"),1),TKe=require("node:url"),wKe=je(require("node:util"),1),zhe=je(require("node:child_process"),1),uw=je(require("node:fs/promises"),1);f();var Ohe=je(require("node:process"),1),cKe=je(require("node:os"),1),uKe=je(require("node:fs"),1);f();var aKe=je(require("node:fs"),1);f();var Fhe=je(require("node:fs"),1);var Lhe;function RVt(){try{return Fhe.default.statSync("/.dockerenv"),!0}catch{return!1}}s(RVt,"hasDockerEnv");function kVt(){try{return Fhe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s(kVt,"hasDockerCGroup");function Mhe(){return Lhe===void 0&&(Lhe=RVt()||kVt()),Lhe}s(Mhe,"isDocker");var Qhe,BVt=s(()=>{try{return aKe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function Q3(){return Qhe===void 0&&(Qhe=BVt()||Mhe()),Qhe}s(Q3,"isInsideContainer");var lKe=s(()=>{if(Ohe.default.platform!=="linux")return!1;if(cKe.default.release().toLowerCase().includes("microsoft"))return!Q3();try{return uKe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Q3():!1}catch{return!1}},"isWsl"),O3=Ohe.default.env.__IS_WSL_TEST__?lKe:lKe();f();function cw(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}s(cw,"defineLazyProperty");f();var CKe=require("node:util"),iK=je(require("node:process"),1),xKe=require("node:child_process");f();var dKe=require("node:util"),fKe=je(require("node:process"),1),pKe=require("node:child_process");var PVt=(0,dKe.promisify)(pKe.execFile);async function Uhe(){if(fKe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await PVt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(Uhe,"defaultBrowserId");f();f();var mKe=je(require("node:process"),1),hKe=require("node:util"),qhe=require("node:child_process");var DVt=(0,hKe.promisify)(qhe.execFile);async function gKe(t,{humanReadableOutput:e=!0}={}){if(mKe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await DVt("osascript",["-e",t,r]);return n.trim()}s(gKe,"runAppleScript");async function Whe(t){return gKe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s(Whe,"bundleName");f();var AKe=require("node:util"),yKe=require("node:child_process");var NVt=(0,AKe.promisify)(yKe.execFile),LVt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},nK=class extends Error{static{s(this,"UnknownBrowserError")}};async function Ghe(t=NVt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new nK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=LVt[n];if(!i)throw new nK(`Unknown browser ID: ${n}`);return i}s(Ghe,"defaultBrowser");var FVt=(0,CKe.promisify)(xKe.execFile),MVt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Hhe(){if(iK.default.platform==="darwin"){let t=await Uhe();return{name:await Whe(t),id:t}}if(iK.default.platform==="linux"){let{stdout:t}=await FVt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:MVt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(iK.default.platform==="win32")return Ghe();throw new Error("Only macOS, Linux, and Windows are supported")}s(Hhe,"defaultBrowser");var QVt=wKe.default.promisify(zhe.default.execFile),jhe=$he.default.dirname((0,TKe.fileURLToPath)(importMetaUrlShim)),vKe=$he.default.join(jhe,"xdg-open"),{platform:U3,arch:bKe}=tN.default,OVt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await uw.default.access(r,uw.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await uw.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),_Ke=s(async()=>`${await OVt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function UVt(){let t=await _Ke(),r=Vhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await QVt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(UVt,"getWindowsDefaultBrowserFromWsl");var EKe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),oK=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return EKe(t.app,l=>oK({...t,app:l}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return EKe(e,l=>oK({...t,app:{name:l,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=O3?await UVt():await Hhe();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&r.push(c[d]),oK({...t,app:{name:q3[d],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(U3==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(U3==="win32"||O3&&!Q3()&&!e){n=O3?await _Ke():`${tN.default.env.SYSTEMROOT||tN.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),O3||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",r.join(","))),t.target=Vhe.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!jhe||jhe==="/",c=!1;try{await uw.default.access(vKe,uw.constants.X_OK),c=!0}catch{}n=tN.default.versions.electron??(U3==="android"||l||!c)?"xdg-open":vKe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}U3==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=zhe.default.spawn(n,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),qVt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return oK({...e,target:t})},"open");function IKe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[bKe]:e}=t;if(!e)throw new Error(`${bKe} is not supported`);return e}s(IKe,"detectArchBinary");function Yhe({[U3]:t},{wsl:e}){if(e&&O3)return IKe(e);if(!t)throw new Error(`${U3} is not supported`);return IKe(t)}s(Yhe,"detectPlatformBinary");var q3={};cw(q3,"chrome",()=>Yhe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));cw(q3,"firefox",()=>Yhe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));cw(q3,"edge",()=>Yhe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));cw(q3,"browser",()=>"browser");cw(q3,"browserPrivate",()=>"browserPrivate");var sK=qVt;var aK=class extends pc{constructor(r,n=new Khe){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(yr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},Khe=class extends pc{static{s(this,"SpawnUrlOpener")}async open(e){await sK(e)}};f();f();var lK=class extends eV{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(uh).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(uh).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(uh).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var cK=class extends iu{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new lK(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Go).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function SKe(t){let e=new z0(process.env),r=MFe(e);r.set(z0,e),r.set(Dy,new Dy),r.set(Tn,new tK(r)),r.set(ta,new ta(r)),$pe(r,{});let n=hTe();r.set(hc,n);let i=new F6(r);r.set(Gr,i),r.set(F6,i);let o=new II(r,n);r.set(II,o),r.set(Sn,new Sn(r,process.env)),r.set(XI,new XI),r.set(h0,new h0(r,"agent")),r.set(Ps,sKe),r.set(un,new RV),r.set(qT,tze()),r.set(is,new is),r.set(po,Eze),r.set(h2,new Xz(r)),r.set(iu,new cK(r)),r.set(uh,new uh(r)),r.set(Ol,new Ol),r.set(ka,vU(r,vje)),r.set(Zf,new Zf(r)),r.set(wg,new v5),HOe(r),tV(r),lUe(r),fRe(r),r.set(yr,new yr(r,t)),r.set(Va,new rK(r)),r.set(rR,new XY(r)),r.set(pc,new aK(r)),r.set(Ji,new pY(r)),r.set(Q6,new Q6(r));let a=new Hb(r);return r.set(Dr,a),r.set(Hb,a),r.set(pl,new tR(r,process.env)),r.set(Kc,new Kc(r)),gze(r),zFe(r),r.set($u,new $u),r.set(Ub,new Ub),r.set(hh,new hh),r.set(E0,new eY),r.set(kA,new kA),r.set(Lm,new Xj(r)),r.set(kg,new NR),r.set(lh,new lh(r)),r.set(py,new py(r)),r.set(nl,new nl(r)),r.set(Ec,new uY(r)),r.set(tb,new fY(r)),r.set(eA,new dY(r)),r.set(su,new su(r)),r.set(Ry,new Ry(r)),r.set(ch,new ch(r)),r.set(q0,new KY(r)),r.set(Km,new JY(r)),r.set(tA,new tA),r}s(SKe,"createLanguageServerContext");f();var Jhe=require("events"),rN=je(require("fs"));var dK=je(Xa());f();var kKe=je(require("fs")),BKe=je(require("http")),W3=je(require("path"));var uK=class{constructor(e,r){this.port=e;let n;this.server=BKe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",l=>{RKe(o,JSON.stringify(l))});return;case"/stdout":r.on("write",l=>{RKe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;W3.basename(__dirname)!=="debug"&&(a=W3.dirname(__dirname)),n??=kKe.readFileSync(W3.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function RKe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(RKe,"writeData");var Xhe=class extends dK.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},Zhe=class extends dK.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function PKe(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new Jhe.EventEmitter;let l=new uK(i,n).listen();i===0&&await sK(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=rN.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=rN.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&rN.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new Jhe.EventEmitter,n.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),n.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return n&&(e=new Zhe(e,n),r=new Xhe(r,n)),[e,r]}s(PKe,"wrapTransports");async function LKe(){let t=X_e(process.argv.slice(2)).version(new zi().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Np.IPCMessageReader(process),n=new Np.IPCMessageWriter(process)):e.stdio?(r=new Np.StreamMessageReader(process.stdin),n=new Np.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await Zy.mkdtemp(DKe.default.tmpdir()+"/github-copilot-"));try{let l=Jte(),c=JSON.parse(await Zy.readFile(nN.join(l,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await Zy.readFile(nN.join(l,"apps.json"),"utf8"))}catch{}let d=!1;for(let p of Object.keys(c)){let m=`${p}:${ym}`;u[m]||!c[p].user||!c[p].oauth_token||(u[m]={user:c[p].user,oauth_token:c[p].oauth_token,githubAppId:ym},d=!0)}d&&await Zy.writeFile(nN.join(l,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await Zy.rm(nN.join(l,"hosts.json"),{force:!0})}catch{}let i=(0,Np.createConnection)(Np.ProposedFeatures.all,...await PKe(process.env,r,n)),o=SKe(i);console=ewe(o);let a=o.get(yr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(LKe,"main");NKe.isMainThread?require.main===module&&LKe():XTe()&&ZTe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
