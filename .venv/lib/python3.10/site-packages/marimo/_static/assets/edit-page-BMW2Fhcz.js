const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./tracing-Z4QREdu3.js","./index-_lj65MZR.js","./index-CsdFJkJw.css","./compile-mbjlQ5nn.js","./time-BXb9z1yv.js","./timer-Bqd5yn_a.js","./linear-DtgEMbrz.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./step-BwsUM5iJ.js","./arc-ZB5pDULS.js","./index-BEQfoZiP.js","./storage-CTvz5ejZ.js","./index-CRY746sV.js","./index-ChVO1Vdj.js","./index-CE3mbf8H.js","./index-CfvA7bvb.js","./index-CylrdBnG.js","./index-Drq4Lpl3.js","./index-B0-K_sX8.js","./index-B9WlbtVk.js","./index-BWEPJWCF.js","./index-D_Dmmo5g.js","./index-NLK5-sPO.js","./index-1az6nvpO.js","./index-CaHkXpUp.js","./apl-CXdQSnD-.js","./asciiarmor-D5V0T9Cu.js","./asterisk-B46aRdXb.js","./brainfuck-CtZaYBKt.js","./clike-BgBwzOhw.js","./cmake-DXn5xaP-.js","./cobol-stawOqaz.js","./coffeescript-BTDxI-eT.js","./commonlisp-vq6DHwts.js","./crystal-CRzZ78HM.js","./cypher-gJDei3ni.js","./d-BShv7fp-.js","./diff-UJJ5BM9S.js","./dockerfile-knGOOxt4.js","./simple-mode-C3vEBAcb.js","./dtd-DI9Herc-.js","./dylan-DkEP81N9.js","./ebnf-B-Df8AvO.js","./ecl-DPFc0Uaf.js","./eiffel-DR5c0IrL.js","./elm-DompmV0j.js","./erlang-BuqgqA5h.js","./factor-CFXhaUWb.js","./fcl-CVaBTCzQ.js","./forth-POgR1ypr.js","./fortran-DL7KluxX.js","./gas-bV0CklSb.js","./gherkin-B6X1vGSW.js","./groovy-DnIzCrpZ.js","./haskell-CLQs6EAM.js","./haxe-D25e-2l-.js","./http-BKJkqRj4.js","./idl-pcmmZuaN.js","./jinja2-DhgKlfW7.js","./julia-DjdwvFuI.js","./livescript-HO6ttBFx.js","./lua-8DXOpKDz.js","./mathematica-IIbmv7SK.js","./mbox-z_N2Mo3d.js","./mirc-DkvFAiy5.js","./modelica-DSrSSXCg.js","./mscgen-B2igx18G.js","./mumps-zvxmGV4l.js","./nginx-B4hAVlXN.js","./nsis-BvKfQ9lQ.js","./ntriples-BSwWqoLa.js","./octave-C4hdQ5Hf.js","./oz-qQq7irPq.js","./pascal-CafrKXZF.js","./perl-tdMlh9QA.js","./pig-CwGJVRC4.js","./powershell-D1ly3AHC.js","./properties-_nPj978X.js","./protobuf-B4y9do6W.js","./puppet-Bc-yJKzi.js","./q-B0kTJ4cI.js","./r-BA4EbLKE.js","./ruby-CR-u2WLS.js","./sas-Bqaci40L.js","./scheme-qjP0V5Ag.js","./shell-BLav31RL.js","./sieve-r025o_jW.js","./smalltalk-C7J3IyEP.js","./solr-78MBEUkU.js","./sparql-BRLJFz69.js","./spreadsheet-CGlWr0eM.js","./stylus-Bdo_Aemu.js","./swift-B_XXVlXX.js","./tcl-B2fODqDH.js","./textile-BuVhTOzU.js","./tiddlywiki-BgR6AEZu.js","./tiki-CI-ztowC.js","./toml-wcPdHu67.js","./troff-Ce85hlLp.js","./ttcn-BxnYHtq8.js","./turtle-BkSuIpt-.js","./vb-BHgjm0DN.js","./vbscript-Dawdd5GZ.js","./velocity-BdD_26Jv.js","./verilog-B4LBqg_1.js","./vhdl-CWWH2SUo.js","./webidl-CGwyPRYs.js","./xquery-CVDBqZPY.js","./yacas-I8QjZlxf.js","./z80-D8p3gKXp.js","./trash-BWRVB_br.js","./storage-De8XnUVS.css","./links-Bjf-1I2i.js","./index-CH2sakSJ.js","./links-C1rhMrxo.css","./circle-play-CBftacWk.js","./_createAggregator-C_WhAECr.js","./_baseEach-BjDLzUwG.js","./transform-CDNfLgV5.js","./sortBy-Bob7dKSt.js","./_baseMap-CuZ-LBtv.js","./terminal-BkOhnp-S.js","./terminal-WqMRJt5Z.css"])))=>i.map(i=>d[i]);
var Zz=Object.defineProperty;var H3=Bt=>{throw TypeError(Bt)};var Qz=(Bt,It,fn)=>It in Bt?Zz(Bt,It,{enumerable:!0,configurable:!0,writable:!0,value:fn}):Bt[It]=fn;var te=(Bt,It,fn)=>Qz(Bt,typeof It!="symbol"?It+"":It,fn),eB=(Bt,It,fn)=>It.has(Bt)||H3("Cannot "+fn);var W3=(Bt,It,fn)=>(eB(Bt,It,"read from private field"),fn?fn.call(Bt):It.get(Bt)),q3=(Bt,It,fn)=>It.has(Bt)?H3("Cannot add the same private member more than once"):It instanceof WeakSet?It.add(Bt):It.set(Bt,fn);import{c as De,W as O,it as tB,iu as nB,iv as G3,iw as oB,ix as rB,iy as sB,b as X,iz as pm,iA as Pr,iB,iC as gm,iD as Y3,iE as aB,iF as lB,iG as J3,iH as rc,a as K,eD as cB,aq as nt,j as c,af as Zn,an as sr,am as Ts,ao as Ms,br as ir,ak as Ae,ap as _n,iI as Ki,al as ar,aR as Qn,ar as Xi,a1 as Te,X as Ot,dV as _m,eH as bm,iJ as dB,aM as qe,a7 as bt,iK as uB,eU as Nn,iL as K3,iM as X3,iN as xm,iO as Z3,iP as hB,L as vt,dC as sc,aY as lr,iQ as ic,a_ as ym,au as un,iR as fB,a4 as Zi,iS as mB,iT as Q3,eT as e4,U as zt,b4 as t4,iU as n4,cE as ac,iV as pB,dM as at,iW as lc,dT as cr,iX as o4,iY as Qi,T as Le,bc as $n,iZ as cc,i_ as dc,eK as Os,i$ as gB,j0 as ea,j1 as r4,eR as s4,j2 as wm,j3 as vm,em as km,j4 as fo,j5 as Lr,aW as uc,j6 as _B,j7 as hc,j8 as Sm,a2 as dr,ea as i4,a3 as ta,j9 as bB,ja as fc,jb as ur,bt as Fr,eL as zr,fr as a4,gb as Br,fG as xB,bf as Qt,jc as yB,jd as wB,g9 as mc,aO as pc,je as Cm,jf as vB,jg as l4,jh as Nm,ji as kB,jj as jm,jk as mo,jl as c4,gf as Em,jm as na,jn as gc,er as xt,et as Ds,jo as kt,jp as Ge,jq as ht,jr as Im,js as SB,jt as Am,ju as St,jv as d4,dw as _c,ds as bc,dt as xc,du as yc,dr as oa,jw as CB,fE as Tm,b3 as Hn,aI as Wn,fu as u4,fw as h4,fx as NB,fC as jB,fy as f4,jx as m4,$ as Ne,el as EB,aU as hr,b1 as fr,aV as mr,a$ as Vt,eS as bn,jy as p4,fA as g4,jz as IB,jA as AB,fs as _4,ft as b4,jB as Rs,dv as x4,jC as y4,jD as TB,jE as MB,aj as OB,ai as DB,jF as Mm,dz as RB,dB as Om,ff as wc,jG as vc,jH as kc,bw as jn,jI as PB,eO as ra,fc as hn,bk as w4,dW as $t,jJ as LB,eg as FB,ag as Dm,jK as sa,jL as Sc,jM as zB,jN as BB,jO as v4,jP as on,aX as UB,at as Rm,ge as k4,en as Cc,jQ as VB,gA as Pm,bj as Nc,jR as Lm,ah as $B,jS as HB,as as ia,eE as S4,bn as WB,jT as qB,jU as C4,gK as GB,gI as YB,gL as JB,gM as KB,jV as XB,dx as zo,jW as ZB,jX as jc,jY as Ps,q as Bo,o as et,fV as En,jZ as In,j_ as dt,j$ as Ls,k0 as Dt,ga as Jt,k1 as Fm,eq as eo,k2 as QB,k3 as eU,bh as N4,bi as j4,k4 as E4,k5 as tU,gC as Fs,k6 as Ec,be as Ic,gD as Ur,eV as zm,k7 as nU,k8 as oU,k9 as rU,ka as sU,kb as I4,kc as aa,kd as A4,ke as T4,kf as M4,kg as O4,kh as iU,ki as D4,kj as R4,eW as Ac,kk as aU,kl as P4,dy as lU,km as la,kn as ca,ko as Tc,kp as pr,kq as L4,kr as Uo,ks as zs,kt as Bm,ku as da,kv as Bs,kw as Um,kx as Vm,ky as F4,kz as Mc,kA as cU,a6 as ua,kB as ha,kC as dU,dS as Oc,kD as uU,kE as $m,kF as hU,kG as fU,kH as Dc,d$ as mU,kI as Hm,kJ as Us,kK as Rc,kL as Vs,fU as qn,g3 as Vo,fR as z4,cp as B4,kM as Wm,fD as U4,kN as qm,kO as V4,kP as fa,kQ as $4,kR as Pc,kS as Gm,kT as ma,kU as pa,kV as ga,kW as pU,fN as Lc,kX as Fc,kY as zc,ef as gU,fO as _U,kZ as bU,k_ as xU,k$ as yU,l0 as wU,u as vU,l1 as kU,l2 as SU,l3 as CU,fY as NU,l4 as gr,l5 as jU,l6 as H4,t as F,l7 as EU,l8 as IU,l9 as AU,la as TU,lb as MU,lc as OU,ld as DU,le as RU,lf as PU,lg as LU,lh as FU,li as zU,lj as BU,lk as UU,ll as VU,lm as $U,ln as HU,lo as WU,lp as qU,lq as GU,lr as YU,ls as JU,lt as KU,lu as XU,lv as ZU,lw as QU,lx as eV,ly as tV,lz as nV,lA as Ym,lB as Bc,lC as W4,lD as oV,lE as rV,lF as q4,lG as sV,lH as $s,lI as Gn,lJ as iV,lK as aV,lL as lV,lM as cV,lN as dV,lO as uV,lP as hV,lQ as fV,lR as mV,lS as pV,lT as _r,lU as gV,lV as _V,lW as bV,lX as xV,dY as yV,lY as wV,lZ as G4,e0 as vV,l_ as Uc,l$ as kV,m0 as SV,m1 as CV,m2 as NV,gN as br,m3 as Vc,m4 as jV,m5 as EV,m6 as Y4,m7 as Jm,gB as Hs,m8 as IV,m9 as AV,ma as TV,mb as MV,g1 as OV,bq as DV,_ as Km,mc as J4,md as RV,me as PV,mf as Xm,mg as Zm,mh as LV,mi as K4,mj as X4,mk as $c,fQ as FV,aa as Z4,dK as zV,ml as Q4,fp as Et,mm as _a,mn as Ws,mo as BV,mp as UV,mq as Qm,mr as VV,co as ep,ms as $V,V as xr,bg as eS,mt as HV,mu as WV,mv as qV,mw as Hc,mx as tS,dI as Wc,bs as nS,es as GV,my as YV,mz as oS,mA as JV,mB as KV,mC as rS,mD as sS,mE as qc,mF as XV,mG as iS,mH as ZV,mI as QV,mJ as aS,ab as Gc,mK as e$,bu as lS,mL as t$,eN as n$,mM as $o,mN as o$,ej as cS,mO as dS,eQ as uS,fH as Yc,mP as tp,mQ as hS,aT as np,ek as Jc,mR as fS,mS as r$,mT as s$,fo as i$,mU as a$,gs as l$,fv as c$,fz as op,gv as d$,bp as ba,mV as u$,mW as mS,mX as rp,mY as h$,mZ as f$,m_ as m$,ac as An,m$ as p$,n0 as g$,n1 as pS,fh as sp,dE as gS,n2 as _$,n3 as b$,n4 as x$,aN as y$,n5 as w$,n6 as v$,n7 as k$,n8 as S$,a8 as C$,n9 as Kc,a9 as N$,fd as j$,na as _S,fL as E$,nb as I$,gq as A$,nc as T$,nd as bS,ne as M$,nf as qs,ng as O$,nh as Xc,ni as D$,nj as R$,z as xS,nk as P$,dk as L$,nl as xa,nm as yS,nn as wS,no as vS,np as kS,nq as F$,C as SS,nr as z$,ns as B$,nt as U$,E as Vr,e$ as CS,bd as V$,bb as $$,nu as H$,nv as W$,Z as Zc,nw as q$,a0 as yr,dH as NS,nx as ip,ny as G$,dU as jS,nz as Y$,nA as ES,nB as J$,nC as IS,nD as K$,nE as X$,nF as AS,nG as TS,nH as MS,fb as OS,nI as Z$,nJ as Q$,nK as DS,nL as RS,nM as Qc,nN as PS,nO as LS,nP as eH,nQ as FS,nR as tH,nS as nH,nT as zS,nU as oH,nV as rH,nW as sH,nX as iH,nY as aH,nZ as lH,dR as cH,n_ as dH,n$ as uH,g2 as ap,o0 as hH,o1 as fH,o2 as mH,o3 as pH,o4 as gH,o5 as _H,o6 as bH,o7 as xH,o8 as yH,o9 as wH,oa as lp,ob as vH,fT as kH,oc as SH,od as CH,oe as NH,of as BS,og as jH,a5 as EH,oh as IH,Y as AH,eG as TH,gk as MH,oi as OH,oj as DH,gm as cp,gi as Gs,gn as $r,gj as Hr,go as dp,gp as up,ok as US,gl as RH,ol as VS,om as PH,on as $S,oo as wr,op as HS,gu as LH,oq as FH,or as zH,os as BH,ot as UH,ou as VH,ov as $H,ow as WS,ex as HH,ox as hp,av as ed,oy as qS,oz as GS,ax as YS,aw as WH,dQ as qH,__tla as GH}from"./index-_lj65MZR.js";import{b as Ys,A as YH,L as JS,g as JH,G as KH,o as KS,s as XH,k as ZH,B as XS,a as QH,M as eW,Y as tW,c as xn,u as ya,C as nW,S as oW,K as rW,d as sW,i as iW,e as ZS,f as aW,h as lW,j as wa,P as va,l as QS,m as cW,n as dW,p as uW,q as hW,r as eC,t as fp,T as fW}from"./links-Bjf-1I2i.js";import{V as tC,d as Wr,I as mp,N as nC,S as oC,e as rC,f as sC,L as iC,g as aC,F as lC,M as mW,l as cC,h as pW,j as po,k as td,E as pp,m as nd,i as gW,n as _W,o as gp,p as _p,q as bW,s as xW,t as yW,v as wW,w as vW,x as kW,y as SW,z as CW,a as NW,C as jW,R as dC,A as EW,b as IW,T as AW,B as TW,D as MW,G as OW,H as DW,O as RW,c as PW,P as LW,__tla as FW}from"./storage-CTvz5ejZ.js";import{c as zW}from"./_createAggregator-C_WhAECr.js";import{s as to,i as vr,T as bp,a as xp}from"./transform-CDNfLgV5.js";import{g as uC}from"./timer-Bqd5yn_a.js";import{i as BW}from"./zoom-COrs4lFh.js";import{s as ka}from"./sortBy-Bob7dKSt.js";let yp,od,yn,rd,hC,Sa,UW=Promise.all([(()=>{try{return GH}catch{}})(),(()=>{try{return FW}catch{}})()]).then(async()=>{var oc,U3;var Bt=zW(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});let It,fn,wp,sd,Js,qr,vp,kp,Sp,Cp,Ca,id,Np,Na,jp,ad,Ep,Ip,ld,Ap,Tp,Mp,ja,Op,cd,Dp,Rp,Pp,Lp,Fp,zp,dd,Bp,ud,hd,Up,Vp,$p,Hp,Wp,Ea,qp,Gp,fd,Yp,Jp,Kp,md,Xp,Zp,Qp,Ia,pd,gd,eg,tg,ng,og,rg,sg,ig,ag,lg,_d,bd,cg,dg,ug,Aa,wn,vn;It=De("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),fn=De("arrow-right-to-line",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]),wp=De("arrow-right-from-line",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),sd=De("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Js=De("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),qr=De("between-horizontal-start",[["rect",{width:"13",height:"7",x:"8",y:"3",rx:"1",key:"pkso9a"}],["path",{d:"m2 9 3 3-3 3",key:"1agib5"}],["rect",{width:"13",height:"7",x:"8",y:"14",rx:"1",key:"1q5fc1"}]]),vp=De("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),kp=De("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),rd=De("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Sp=De("circle-chevron-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 10-4 4-4-4",key:"894hmk"}]]),Cp=De("circle-chevron-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m10 8 4 4-4 4",key:"1wy4r4"}]]),Ca=De("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),id=De("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),Np=De("clipboard-paste",[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]]),Na=De("cloud-download",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),jp=De("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),ad=De("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Ep=De("copy-minus",[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ip=De("diamond-plus",[["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z",key:"1ey20j"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),ld=De("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ap=De("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),Tp=De("fast-forward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]),Mp=De("file-pen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),ja=De("file-plus-2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),Op=De("files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]),cd=De("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Dp=De("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),Rp=De("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Pp=De("hard-drive-download",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]),Lp=De("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Fp=De("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),zp=De("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),dd=De("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Bp=De("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),ud=De("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),hd=De("list-tree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]),Up=De("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Vp=De("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),$p=De("memory-stick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]),Hp=De("message-circle-question-mark",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Wp=De("microchip",[["path",{d:"M18 12h2",key:"quuxs7"}],["path",{d:"M18 16h2",key:"zsn3lv"}],["path",{d:"M18 20h2",key:"9x5y9y"}],["path",{d:"M18 4h2",key:"1luxfb"}],["path",{d:"M18 8h2",key:"nxqzg"}],["path",{d:"M4 12h2",key:"1ltxp0"}],["path",{d:"M4 16h2",key:"8a5zha"}],["path",{d:"M4 20h2",key:"27dk57"}],["path",{d:"M4 4h2",key:"10groj"}],["path",{d:"M4 8h2",key:"18vq6w"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z",key:"1681fp"}]]),Ea=De("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),qp=De("octagon-alert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),Gp=De("package-check",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),fd=De("package-x",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),Yp=De("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),Jp=De("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),Kp=De("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),md=De("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),Xp=De("regex",[["path",{d:"M17 3v10",key:"15fgeh"}],["path",{d:"m12.67 5.5 8.66 5",key:"1gpheq"}],["path",{d:"m12.67 10.5 8.66-5",key:"1dkfa6"}],["path",{d:"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z",key:"swwfx4"}]]),Zp=De("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Qp=De("rows-3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]),Ia=De("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),pd=De("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),gd=De("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),eg=De("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),tg=De("square-code",[["path",{d:"m10 9-3 3 3 3",key:"1oro0q"}],["path",{d:"m14 15 3-3-3-3",key:"bz13h7"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]),ng=De("square-dashed-bottom-code",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}]]),og=De("square-equal",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M7 14h10",key:"1mhdw3"}]]),rg=De("square-m",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 16V8l4 4 4-4v8",key:"141u4e"}]]),sg=De("square-play",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]),ig=De("square-power",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M7.998 9.003a5 5 0 1 0 8-.005",key:"1pek45"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]),ag=De("square-terminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),lg=De("text-cursor-input",[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]]),_d=De("text-search",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 18H3",key:"13769t"}],["circle",{cx:"17",cy:"15",r:"3",key:"1upz2a"}],["path",{d:"m21 19-1.9-1.9",key:"dwi7p8"}]]),bd=De("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),cg=De("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),dg=De("view",[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]]),ug=De("whole-word",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),Aa=De("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),wn=De("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),vn=De("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);const fC=O.createContext({}),mC=O.forwardRef(function(t,e){[t,e]=rB(t,e,fC);let{toolbarProps:n}=function(s,i){const{"aria-label":a,"aria-labelledby":l,orientation:d="horizontal"}=s;let[u,h]=O.useState(!1);tB(()=>{var p;h(!(!i.current||!(!((p=i.current.parentElement)===null||p===void 0)&&p.closest('[role="toolbar"]'))))});const{direction:f}=nB(),m=f==="rtl"&&d==="horizontal";let _=oB(i);const g=O.useRef(null);return{toolbarProps:{...G3(s,{labelable:!0}),role:u?"group":"toolbar","aria-orientation":d,"aria-label":a,"aria-labelledby":a==null?l:void 0,onKeyDownCapture:u?void 0:p=>{if(p.currentTarget.contains(p.target)){if(d==="horizontal"&&p.key==="ArrowRight"||d==="vertical"&&p.key==="ArrowDown")m?_.focusPrevious():_.focusNext();else{if(!(d==="horizontal"&&p.key==="ArrowLeft"||d==="vertical"&&p.key==="ArrowUp"))return p.key==="Tab"?(p.stopPropagation(),g.current=document.activeElement,void(p.shiftKey?_.focusFirst():_.focusLast())):void 0;m?_.focusNext():_.focusPrevious()}p.stopPropagation(),p.preventDefault()}},onFocusCapture:u?void 0:p=>{var b,x;g.current&&!p.currentTarget.contains(p.relatedTarget)&&(!((b=i.current)===null||b===void 0)&&b.contains(p.target))&&((x=g.current)===null||x===void 0||x.focus(),g.current=null)},onBlurCapture:u?void 0:p=>{p.currentTarget.contains(p.relatedTarget)||g.current||(g.current=p.target)}}}}(t,e),o=sB({...t,values:{orientation:t.orientation||"horizontal"},defaultClassName:"react-aria-Toolbar"}),r=G3(t);return delete r.id,X.createElement("div",{...pm(n,r),...o,ref:e,slot:t.slot||void 0,"data-orientation":t.orientation||"horizontal"},o.children)});function Ta(t,e){const n=+Pr(t)-+Pr(e);return n<0?-1:n>0?1:n}function pC(t,e){const n=Pr(t,e==null?void 0:e.in);return+function(o,r){const s=Pr(o,r==null?void 0:r.in);return s.setHours(23,59,59,999),s}(n,e)==+function(o,r){const s=Pr(o,r==null?void 0:r.in),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}(n,e)}function gC(t,e,n){const[o,r,s]=gm(n==null?void 0:n.in,t,t,e),i=Ta(r,s),a=Math.abs(function(u,h,f){const[m,_]=gm(f==null?void 0:f.in,u,h);return 12*(m.getFullYear()-_.getFullYear())+(m.getMonth()-_.getMonth())}(r,s));if(a<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let l=Ta(r,s)===-i;pC(o)&&a===1&&Ta(o,s)===1&&(l=!1);const d=i*(a-+l);return d===0?0:d}function _C(t,e,n){const o=function(r,s){return+Pr(r)-+Pr(s)}(t,e)/1e3;return(r=>{const s=(0,Math.trunc)(r);return s===0?0:s})(o)}function bC(t,e){return function(n,o,r){const s=aB(),i=(r==null?void 0:r.locale)??s.locale??lB,a=Ta(n,o);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a}),[d,u]=gm(r==null?void 0:r.in,...a>0?[o,n]:[n,o]),h=_C(u,d),f=(Y3(u)-Y3(d))/1e3,m=Math.round((h-f)/60);let _;if(m<2)return m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<J3){const g=Math.round(m/60);return i.formatDistance("aboutXHours",g,l)}if(m<2520)return i.formatDistance("xDays",1,l);if(m<rc){const g=Math.round(m/J3);return i.formatDistance("xDays",g,l)}if(m<2*rc)return _=Math.round(m/rc),i.formatDistance("aboutXMonths",_,l);if(_=gC(u,d),_<12){const g=Math.round(m/rc);return i.formatDistance("xMonths",g,l)}{const g=_%12,p=Math.trunc(_/12);return g<3?i.formatDistance("aboutXYears",p,l):g<9?i.formatDistance("overXYears",p,l):i.formatDistance("almostXYears",p+1,l)}}(t,function(n){return iB(n,Date.now())}(t),e)}const Ma="https://static.marimo.app",xC=t=>{const e=K.c(24),{onClose:n}=t,[o,r]=O.useState("");let s;s=Math.random().toString(36).slice(2,6);const i=`${o}-${s}`,a=`${Ma}/static/${i}`;let l,d,u,h,f,m,_,g,p,b,x;return e[0]!==n||e[1]!==i?(l=async y=>{y.preventDefault(),n();const v=await cB({download:!1,includeCode:!0,files:tC.INSTANCE.filenames()}),C=nt({title:"Uploading static notebook...",description:"Please wait."});await fetch(`${Ma}/api/static`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:v,path:i})}).catch(()=>{C.dismiss(),nt({title:"Error uploading static page",description:c.jsxs("div",{children:["Please try again later. If the problem persists, please file a bug report on"," ",c.jsx("a",{href:Zn.issuesPage,target:"_blank",className:"underline",children:"GitHub"}),"."]})})}),C.dismiss(),nt({title:"Static page uploaded!",description:c.jsxs("div",{children:["The URL has been copied to your clipboard.",c.jsx("br",{}),"You can share it with anyone."]})})},e[0]=n,e[1]=i,e[2]=l):l=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(sr,{children:"Share static notebook"}),e[3]=d):d=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsxs(Ts,{children:[d,c.jsxs(Ms,{children:["You can publish a static, non-interactive version of this notebook to the public web. We will create a link for you that lives on"," ",c.jsx("a",{href:Ma,target:"_blank",children:Ma}),"."]})]}),e[4]=u):u=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(h=y=>{const v=y.target.value.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/[^\da-z-]/g,"");r(v)},e[5]=h):h=e[5],e[6]!==o?(f=c.jsx(ir,{"data-testid":"slug-input",id:"slug",autoFocus:!0,value:o,placeholder:"Notebook slug",onChange:h,required:!0,autoComplete:"off"}),e[6]=o,e[7]=f):f=e[7],e[8]!==a?(m=c.jsxs("div",{className:"font-semibold text-sm text-muted-foreground gap-2 flex flex-col",children:["Anyone will be able to access your notebook at this URL:",c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(yC,{text:a}),c.jsx("span",{className:"text-primary",children:a})]})]}),e[8]=a,e[9]=m):m=e[9],e[10]!==f||e[11]!==m?(_=c.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[f,m]}),e[10]=f,e[11]=m,e[12]=_):_=e[12],e[13]!==n?(g=c.jsx(Ae,{"data-testid":"cancel-share-static-notebook-button",variant:"secondary",onClick:n,children:"Cancel"}),e[13]=n,e[14]=g):g=e[14],e[15]!==a?(p=c.jsx(Ae,{"data-testid":"share-static-notebook-button","aria-label":"Save",variant:"default",type:"submit",onClick:async()=>{await _n(a)},children:"Create"}),e[15]=a,e[16]=p):p=e[16],e[17]!==p||e[18]!==g?(b=c.jsxs(Ki,{children:[g,p]}),e[17]=p,e[18]=g,e[19]=b):b=e[19],e[20]!==b||e[21]!==l||e[22]!==_?(x=c.jsx(ar,{className:"w-fit",children:c.jsxs("form",{onSubmit:l,children:[u,_,b]})}),e[20]=b,e[21]=l,e[22]=_,e[23]=x):x=e[23],x},yC=t=>{const e=K.c(8),[n,o]=X.useState(!1);let r;e[0]!==t.text?(r=Qn.stopPropagation(async d=>{d.preventDefault(),await _n(t.text),o(!0),setTimeout(()=>o(!1),2e3)}),e[0]=t.text,e[1]=r):r=e[1];const s=r;let i,a,l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(Xi,{size:14,strokeWidth:1.5}),e[2]=i):i=e[2],e[3]!==s?(a=c.jsx(Ae,{"data-testid":"copy-static-notebook-url-button",onClick:s,size:"xs",variant:"secondary",children:i}),e[3]=s,e[4]=a):a=e[4],e[5]!==n||e[6]!==a?(l=c.jsx(Te,{content:"Copied!",open:n,children:a}),e[5]=n,e[6]=a,e[7]=l):l=e[7],l};function hg(){const t=K.c(2),e=Ot(_m);let n;return t[0]!==e?(n=()=>{const o=document.getElementsByClassName("output-area"),r=window.innerHeight||document.documentElement.clientHeight;let s=null;for(const i of Array.from(o)){const a=i.getBoundingClientRect();if(a.top>=0&&a.top<=r||a.bottom>=0&&a.bottom<=r){s=bm.parse(i.parentNode.id);break}}e(i=>({mode:dB(i.mode),cellAnchor:s})),requestAnimationFrame(()=>{var i;s!==null&&((i=document.getElementById(bm.create(s)))==null||i.scrollIntoView())})},t[0]=e,t[1]=n):n=t[1],n}function xd(t){const e=K.c(3),n=Ks();let o;return e[0]!==t||e[1]!==n?(o=()=>{t!==void 0&&n([t])},e[0]=t,e[1]=n,e[2]=o):o=e[2],qe(o)}function fg(){const t=K.c(2),e=Ks();let n;return t[0]!==e?(n=()=>e(K3(Nn())),t[0]=e,t[1]=n):n=t[1],qe(n)}function Ks(){const t=K.c(2),{prepareForRun:e}=bt();let n;return t[0]!==e?(n=async o=>{var a,l;if(o.length===0)return;const{cellHandles:r,cellData:s}=Nn(),i=[];for(const d of o){const u=r[d],h=(a=u==null?void 0:u.current)==null?void 0:a.editorView;let f;h?(X3(h)!=="markdown"&&xm(h),f=Z3(h)):f=((l=s[d])==null?void 0:l.code)||"",i.push(f),e({cellId:d})}await hB({cellIds:o,codes:i}).catch(wC)},t[0]=e,t[1]=n):n=t[1],qe(n)}function wC(t){vt.error(t)}const yd=[{type:"files",Icon:Dp,tooltip:"View files",position:"sidebar"},{type:"variables",Icon:sc,tooltip:"Explore variables",position:"sidebar"},{type:"datasources",Icon:lr,tooltip:"Explore data sources",position:"sidebar"},{type:"dependencies",Icon:Ea,tooltip:"Explore dependencies",position:"sidebar"},{type:"packages",Icon:Ys,tooltip:"Manage packages",position:"sidebar"},{type:"outline",Icon:gd,tooltip:"View outline",position:"sidebar"},{type:"chat",Icon:ic,tooltip:"Chat with AI",position:"sidebar"},{type:"documentation",Icon:_d,tooltip:"View live docs",position:"sidebar"},{type:"logs",Icon:ym,tooltip:"Notebook logs",position:"sidebar"},{type:"tracing",Icon:YH,tooltip:"Tracing",position:"sidebar"},{type:"snippets",Icon:ng,tooltip:"Snippets",position:"sidebar"},{type:"secrets",Icon:zp,tooltip:"Secrets",hidden:un(),position:"sidebar"},{type:"scratchpad",Icon:fB,tooltip:"Scratchpad",position:"sidebar"},{type:"errors",Icon:Zi,tooltip:"View errors",position:"footer"}];function vC(){const t=K.c(7);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];const[n,o]=function(i,a){const l=K.c(11);let d;l[0]!==a?(d=new mB(a),l[0]=a,l[1]=d):d=l[1];const u=d;let h;l[2]!==i||l[3]!==u?(h=()=>u.get(i),l[2]=i,l[3]=u,l[4]=h):h=l[4];const[f,m]=O.useState(h);let _;l[5]!==i||l[6]!==u?(_=b=>{m(b),u.set(i,b)},l[5]=i,l[6]=u,l[7]=_):_=l[7];const g=_;let p;return l[8]!==g||l[9]!==f?(p=[f,g],l[8]=g,l[9]=f,l[10]=p):p=l[10],p}("marimo:commands",e);let r,s;return t[1]!==n||t[2]!==o?(r=i=>{const a=(l=[i,...n],[...new Set(l)]);var l;o(a.slice(0,3))},t[1]=n,t[2]=o,t[3]=r):r=t[3],t[4]!==n||t[5]!==r?(s={recentCommands:n,addRecentCommand:r},t[4]=n,t[5]=r,t[6]=s):s=t[6],s}function mg(t){return t.dropdown!==void 0}function Oa(t,e=""){return t.flatMap(n=>n.label?mg(n)?Oa(n.dropdown,`${e+n.label} > `):{...n,label:e+n.label}:[])}const Xs=t=>{const e=K.c(8),{children:n,layerTop:o}=t,r=o!==void 0&&o;let s;e[0]!==n?(s=X.Children.toArray(n),e[0]=n,e[1]=s):s=e[1];const[i,a]=s,l=`second-icon absolute ${r?"top-[-2px] left-[-2px]":"bottom-[-2px] right-[-2px]"} rounded-full`;let d,u;return e[2]!==a||e[3]!==l?(d=c.jsx("div",{className:l,children:a}),e[2]=a,e[3]=l,e[4]=d):d=e[4],e[5]!==i||e[6]!==d?(u=c.jsxs("div",{className:"multi-icon relative w-fit",children:[i,d]}),e[5]=i,e[6]=d,e[7]=u):u=e[7],u},Zs=zt(null),kC=zt(!1),wd=t4("marimo:ai:chatState:v3",{chats:[],activeChatId:null}),SC=zt(t=>{const e=t(wd);return e.chats.find(n=>n.id===e.activeChatId)},(t,e,n)=>{e(wd,o=>({...o,activeChatId:n}))});function pg(t){return t!==n4&&!!(t&&t.trim().length>0)}const Da=t=>{const e=K.c(7);let n,o;e[0]!==t?(n=a=>{var l;(a.ctrlKey||a.metaKey)&&a.key==="z"&&(a.preventDefault(),a.stopPropagation(),(l=t.onClick)==null||l.call(t,a))},e[0]=t,e[1]=n):n=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(o={capture:!0},e[2]=o):o=e[2],ac(window,"keydown",n,o);const r=t.children??"Undo";let s,i;return e[3]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx(pB,{className:"ml-2",shortcut:"cmd-z"}),e[3]=s):s=e[3],e[4]!==r||e[5]!==t?(i=c.jsxs(Ae,{"data-testid":"undo-button",size:"sm",variant:"outline",...t,children:[r," ",s]}),e[4]=r,e[5]=t,e[6]=i):i=e[6],i};function vd(){const t=K.c(3),{deleteCell:e,undoDeleteCell:n}=bt();let o;return t[0]!==e||t[1]!==n?(o=r=>{var l;if(at.get(lc))return;const{cellId:s}=r,i=at.get(cr),a=(((l=i.cellData[s])==null?void 0:l.code)??"").trim()==="";if(e({cellId:s}),o4({cellId:s}).catch(()=>{n()}),!a){const{dismiss:d}=nt({title:"Cell deleted",description:"You can bring it back by clicking undo or through the command palette.",action:c.jsx(Da,{"data-testid":"undo-delete-button",onClick:()=>{n(),u()}})}),u=d}},t[0]=e,t[1]=n,t[2]=o):o=t[2],qe(o)}function gg(){const t=K.c(3),{splitCell:e,undoSplitCell:n}=bt();let o;return t[0]!==e||t[1]!==n?(o=r=>{const s=Qi(r.cellId);if(!s)return;const i=Z3(s);e(r);const{dismiss:a}=nt({title:"Cell split",action:c.jsx(Da,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{n({...r,snapshot:i}),l()},children:"Undo"})}),l=a},t[0]=e,t[1]=n,t[2]=o):o=t[2],qe(o)}function kd(t){const e=K.c(49),{cell:n}=t,{createNewCell:o,updateCellConfig:r,updateCellName:s,moveCell:i,sendToTop:a,sendToBottom:l,addColumnBreakpoint:d,clearCellOutput:u}=bt(),h=gg(),f=xd(n==null?void 0:n.cellId),m=!Le(lc),_=vd(),{openModal:g}=$n(),p=Ot(Zs),b=Le(cc),x=Le(dc),y=Le(Os),v=Le(gB);if(!n||y){let I;return e[0]===Symbol.for("react.memo_cache_sentinel")?(I=[],e[0]=I):I=e[0],I}const{cellId:C,config:S,getEditorView:E,name:N,hasOutput:j,hasConsoleOutput:T,status:A}=n;let M;e[1]!==C||e[2]!==S.disabled||e[3]!==r?(M=async()=>{const I={disabled:!S.disabled};await ur({configs:{[C]:I}}),r({cellId:C,config:I})},e[1]=C,e[2]=S.disabled,e[3]=r,e[4]=M):M=e[4];const P=M;let R;e[5]!==C||e[6]!==S.hide_code||e[7]!==E||e[8]!==r?(R=async()=>{const I={hide_code:!S.hide_code};await ur({configs:{[C]:I}}),r({cellId:C,config:I});const W=E();W&&(I.hide_code?W.contentDOM.blur():W.focus())},e[5]=C,e[6]=S.hide_code,e[7]=E,e[8]=r,e[9]=R):R=e[9];const L=R;let B,U,D,k,$;return e[10]===Symbol.for("react.memo_cache_sentinel")?(B=c.jsx(lg,{size:13,strokeWidth:1.5}),e[10]=B):B=e[10],e[11]!==C||e[12]!==N||e[13]!==g||e[14]!==s?(U=()=>{g(c.jsxs(ar,{children:[c.jsx(Ts,{children:c.jsx(sr,{children:"Rename cell"})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Fr,{htmlFor:"cell-name",children:"Cell name"}),c.jsx(nC,{placeholder:"cell name",value:N,onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),I.stopPropagation(),g(null))},onChange:I=>s({cellId:C,name:I})})]})]}))},e[11]=C,e[12]=N,e[13]=g,e[14]=s,e[15]=U):U=e[15],e[16]!==C||e[17]!==s?(D=I=>s({cellId:C,name:I}),e[16]=C,e[17]=s,e[18]=D):D=e[18],e[19]!==N||e[20]!==D?(k=c.jsx(nC,{placeholder:"cell name",value:N,onChange:D}),e[19]=N,e[20]=D,e[21]=k):k=e[21],e[22]!==d||e[23]!==b||e[24]!==v||e[25]!==x||e[26]!==m||e[27]!==C||e[28]!==u||e[29]!==S.disabled||e[30]!==S.hide_code||e[31]!==o||e[32]!==_||e[33]!==E||e[34]!==T||e[35]!==j||e[36]!==i||e[37]!==N||e[38]!==f||e[39]!==l||e[40]!==a||e[41]!==p||e[42]!==h||e[43]!==A||e[44]!==U||e[45]!==k||e[46]!==P||e[47]!==L?($=[[{icon:B,label:"Name",disableClick:!0,handle:EC,handleHeadless:U,rightElement:k},{icon:c.jsx(Wr,{size:13,strokeWidth:1.5}),label:"Run cell",hotkey:"cell.run",hidden:A==="running"||A==="queued"||A==="disabled-transitively"||S.disabled,handle:()=>f()},{icon:c.jsx(ea,{size:13,strokeWidth:1.5}),label:"AI completion",hidden:!b,handle:()=>{p(I=>(I==null?void 0:I.cellId)===C?null:{cellId:C})},hotkey:"cell.aiCompletion"},{icon:c.jsx(pd,{size:13,strokeWidth:1.5}),label:"Split cell",hotkey:"cell.splitCell",handle:()=>h({cellId:C})},{icon:c.jsx(mp,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!j,handle:()=>function(I){const W=document.getElementById(Q3.create(I));W&&(W.classList.add("printing-output"),e4(W,"result.png").finally(()=>{W.classList.remove("printing-output")}))}(C)},{icon:c.jsx(s4,{size:13,strokeWidth:1.5}),label:"Format cell",hotkey:"cell.format",handle:()=>{const I=E();I&&r4({[C]:I})}},{icon:S.hide_code?c.jsx(wm,{size:13,strokeWidth:1.5}):c.jsx(vm,{size:13,strokeWidth:1.5}),label:S.hide_code?"Show code":"Hide code",handle:L,hotkey:"cell.hideCode"},{icon:S.disabled?c.jsx(wn,{size:13,strokeWidth:1.5}):c.jsx(vn,{size:13,strokeWidth:1.5}),label:"Reactive execution",rightElement:c.jsx(km,{"data-testid":"cell-disable-switch",checked:!S.disabled,size:"sm",onCheckedChange:P}),handle:P},{icon:c.jsx(Zi,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(j||T),handle:()=>{u({cellId:C})}}],[{icon:c.jsx(uc,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:()=>{const I=E();I&&(fo({autoInstantiate:x,createNewCell:o}),Lr(I,{language:"markdown",keepCodeAsIs:!1}))}},{icon:c.jsx(lr,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{const I=E();I&&(fo({autoInstantiate:x,createNewCell:o}),Lr(I,{language:"markdown",keepCodeAsIs:!1}))}},{icon:c.jsx(hc,{}),label:"Toggle as Python",handle:()=>{const I=E();I&&(fo({autoInstantiate:x,createNewCell:o}),_B(I,"python",{force:!0}))}}],[{icon:c.jsxs(Xs,{children:[c.jsx(Ca,{size:13,strokeWidth:1.5}),c.jsx(Sm,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>o({cellId:C,before:!0})},{icon:c.jsxs(Xs,{children:[c.jsx(Ca,{size:13,strokeWidth:1.5}),c.jsx(dr,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>o({cellId:C,before:!1})},{icon:c.jsx(Sm,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>i({cellId:C,before:!0})},{icon:c.jsx(dr,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>i({cellId:C,before:!1})},{icon:c.jsx(i4,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>i({cellId:C,direction:"left"}),hidden:v!=="columns"},{icon:c.jsx(ta,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>i({cellId:C,direction:"right"}),hidden:v!=="columns"},{icon:c.jsx(kp,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>a({cellId:C,scroll:!1})},{icon:c.jsx(vp,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>l({cellId:C,scroll:!1})},{icon:c.jsx(bB,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",hidden:v!=="columns",handle:()=>d({cellId:C})}],[{icon:c.jsx(JS,{size:13,strokeWidth:1.5}),label:"Copy link to cell",disabled:!pg(N),tooltip:pg(N)?void 0:"Only named cells can be linked to",handle:async()=>{await _n(function(I){const W=new URL(window.location.href);return W.hash=`scrollTo=${encodeURIComponent(I)}`,W.toString()}(N)),nt({description:"Link copied to clipboard"})}}],[{label:"Delete",hidden:!m,variant:"danger",icon:c.jsx(fc,{size:13,strokeWidth:1.5}),handle:()=>{_({cellId:C})}}]].map(NC).filter(CC),e[22]=d,e[23]=b,e[24]=v,e[25]=x,e[26]=m,e[27]=C,e[28]=u,e[29]=S.disabled,e[30]=S.hide_code,e[31]=o,e[32]=_,e[33]=E,e[34]=T,e[35]=j,e[36]=i,e[37]=N,e[38]=f,e[39]=l,e[40]=a,e[41]=p,e[42]=h,e[43]=A,e[44]=U,e[45]=k,e[46]=P,e[47]=L,e[48]=$):$=e[48],$}function CC(t){return t.length>0}function NC(t){return t.filter(jC)}function jC(t){return!t.hidden}function EC(t){t==null||t.stopPropagation(),t==null||t.preventDefault()}function IC(t){return!t.hidden}const Sd=zt(!1),_g=()=>{const t=K.c(37),[e,n]=Qt(Sd),o=yB(),r=Le(wB),s=Le(mc);let i;t[0]!==r?(i={cell:r},t[0]=r,t[1]=i):i=t[1];let a=kd(i).flat();a=Oa(a);const l=function(){const D=K.c(73),[k,$]=zr(),[I,W]=a4();let G;D[0]!==$?(G=async Q=>{await Br({config:Q}).then(()=>{$(Q)})},D[0]=$,D[1]=G):G=D[1];const q=G;let Y;D[2]!==W?(Y=async Q=>{await xB({config:Q}).then(()=>{W(Q)})},D[2]=W,D[3]=Y):Y=D[3];const ee=Y;let oe;if(D[4]!==I||D[5]!==k||D[6]!==ee||D[7]!==q){let Q,me,fe,de,ue;D[9]!==I?(Q=Ve=>Ve!==I.width,D[9]=I,D[10]=Q):Q=D[10],D[11]!==I||D[12]!==ee?(me=Ve=>({label:`App config > Set width=${Ve}`,handle:()=>{ee({...I,width:Ve})}}),D[11]=I,D[12]=ee,D[13]=me):me=D[13],D[14]!==k||D[15]!==q?(fe={label:"Config > Set theme: dark",handle:()=>{q({...k,display:{...k.display,theme:"dark"}})}},D[14]=k,D[15]=q,D[16]=fe):fe=D[16],D[17]!==k||D[18]!==q?(de={label:"Config > Set theme: light",handle:()=>{q({...k,display:{...k.display,theme:"light"}})}},D[17]=k,D[18]=q,D[19]=de):de=D[19],D[20]!==k||D[21]!==q?(ue={label:"Config > Set theme: system",handle:()=>{q({...k,display:{...k.display,theme:"system"}})}},D[20]=k,D[21]=q,D[22]=ue):ue=D[22];const ce=k.keymap.preset==="vim";let ke,Se;D[23]!==k||D[24]!==q?(ke=()=>{q({...k,keymap:{...k.keymap,preset:"vim"}})},D[23]=k,D[24]=q,D[25]=ke):ke=D[25],D[26]!==ce||D[27]!==ke?(Se={label:"Config > Switch keymap to VIM",hidden:ce,handle:ke},D[26]=ce,D[27]=ke,D[28]=Se):Se=D[28];const ae=k.keymap.preset==="default";let Ce,_e,Ee;D[29]!==k||D[30]!==q?(Ce=()=>{q({...k,keymap:{...k.keymap,preset:"default"}})},D[29]=k,D[30]=q,D[31]=Ce):Ce=D[31],D[32]!==ae||D[33]!==Ce?(_e={label:"Config > Switch keymap to default (current: VIM)",hidden:ae,handle:Ce},D[32]=ae,D[33]=Ce,D[34]=_e):_e=D[34],D[35]!==k||D[36]!==q?(Ee=()=>{q({...k,completion:{...k.completion,copilot:!1}})},D[35]=k,D[36]=q,D[37]=Ee):Ee=D[37];const ze=k.completion.copilot!=="github";let Oe,He;D[38]!==Ee||D[39]!==ze?(Oe={label:"Config > Disable GitHub Copilot",handle:Ee,hidden:ze},D[38]=Ee,D[39]=ze,D[40]=Oe):Oe=D[40],D[41]!==k||D[42]!==q?(He=()=>{q({...k,completion:{...k.completion,copilot:"github"}})},D[41]=k,D[42]=q,D[43]=He):He=D[43];const Fe=k.completion.copilot==="github";let it;D[44]!==He||D[45]!==Fe?(it={label:"Config > Enable GitHub Copilot",handle:He,hidden:Fe},D[44]=He,D[45]=Fe,D[46]=it):it=D[46];const Qe=!k.display.reference_highlighting;let tt,ne,ve,je;D[47]!==k||D[48]!==q?(tt=()=>{q({...k,display:{...k.display,reference_highlighting:!1}})},D[47]=k,D[48]=q,D[49]=tt):tt=D[49],D[50]!==Qe||D[51]!==tt?(ne={label:"Config > Disable reference highlighting",hidden:Qe,handle:tt},D[50]=Qe,D[51]=tt,D[52]=ne):ne=D[52],D[53]!==k||D[54]!==q?(ve=()=>{q({...k,display:{...k.display,reference_highlighting:!0}})},D[53]=k,D[54]=q,D[55]=ve):ve=D[55],D[56]!==k.display.reference_highlighting||D[57]!==ve?(je={label:"Config > Enable reference highlighting",hidden:k.display.reference_highlighting,handle:ve},D[56]=k.display.reference_highlighting,D[57]=ve,D[58]=je):je=D[58];const Re=k.display.cell_output==="above";let J,se;D[59]!==k||D[60]!==q?(J=()=>{q({...k,display:{...k.display,cell_output:"above"}})},D[59]=k,D[60]=q,D[61]=J):J=D[61],D[62]!==Re||D[63]!==J?(se={label:"Config > Set cell output area: above",hidden:Re,handle:J},D[62]=Re,D[63]=J,D[64]=se):se=D[64];const ge=k.display.cell_output==="below";let pe,xe;D[65]!==k||D[66]!==q?(pe=()=>{q({...k,display:{...k.display,cell_output:"below"}})},D[65]=k,D[66]=q,D[67]=pe):pe=D[67],D[68]!==ge||D[69]!==pe?(xe={label:"Config > Set cell output area: below",hidden:ge,handle:pe},D[68]=ge,D[69]=pe,D[70]=xe):xe=D[70],oe=[...JH().filter(Q).map(me),fe,de,ue,Se,_e,Oe,it,ne,je,se,xe],D[4]=I,D[5]=k,D[6]=ee,D[7]=q,D[8]=oe}else oe=D[8];const ie=oe;let Z;return D[71]!==ie?(Z=ie.filter(IC),D[71]=ie,D[72]=Z):Z=D[72],Z}();let d=Gg();d=[...Oa(d),...Oa(l)];const u=d.filter(AC),h=pc.keyBy(u,TC),{recentCommands:f,addRecentCommand:m}=vC();let _;t[2]!==f?(_=new Set(f),t[2]=f,t[3]=_):_=t[3];const g=_;let p,b;t[4]!==s||t[5]!==n?(p=D=>{jm(s.getHotkey("global.commandPalette").key)(D)&&(D.preventDefault(),n(MC))},t[4]=s,t[5]=n,t[6]=p):p=t[6],ac(document,"keydown",p),t[7]!==m||t[8]!==s||t[9]!==o||t[10]!==n?(b=(D,k)=>{const $=o[D];if(!$)return null;const I=s.getHotkey(D);return c.jsxs(mo,{disabled:k.disabled,onSelect:()=>{m(D),n(!1),requestAnimationFrame(()=>{$()})},value:I.name,children:[c.jsxs("span",{children:[I.name,k.tooltip&&c.jsx("span",{className:"ml-2",children:k.tooltip})]}),c.jsx(c4,{children:c.jsx(Em,{shortcut:I.key})})]},D)},t[7]=m,t[8]=s,t[9]=o,t[10]=n,t[11]=b):b=t[11];const x=b;let y;t[12]!==m||t[13]!==s||t[14]!==n?(y=D=>{const{label:k,handle:$,props:I,hotkey:W}=D,G=I===void 0?{}:I;return c.jsxs(mo,{disabled:G.disabled,onSelect:()=>{m(k),n(!1),requestAnimationFrame(()=>{$()})},value:k,children:[c.jsxs("span",{children:[k,G.tooltip&&c.jsxs("span",{className:"ml-2",children:["(",G.tooltip,")"]})]}),W&&c.jsx(c4,{children:c.jsx(Em,{shortcut:s.getHotkey(W).key})})]},k)},t[12]=m,t[13]=s,t[14]=n,t[15]=y):y=t[15];const v=y,C=kB;let S;t[16]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx(na,{placeholder:"Type to search..."}),t[16]=S):S=t[16];const E=Nm;let N;t[17]===Symbol.for("react.memo_cache_sentinel")?(N=c.jsx(gc,{children:"No results found."}),t[17]=N):N=t[17];const j=f.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(Cm,{heading:"Recently Used",children:f.map(D=>{const k=h[D];return vB(D)?x(D,{disabled:k==null?void 0:k.disabled,tooltip:k==null?void 0:k.tooltip}):k&&!mg(k)?v({label:k.label,handle:k.handleHeadless||k.handle,props:{disabled:k.disabled,tooltip:k.tooltip}}):null})}),c.jsx(l4,{})]}),T=Cm,A=s.iterate().map(D=>{if(g.has(D))return null;const k=h[D];return x(D,{disabled:k==null?void 0:k.disabled,tooltip:k==null?void 0:k.tooltip})}),M=u.map(D=>g.has(D.label)?null:v({label:D.label,handle:D.handleHeadless||D.handle,props:{disabled:D.disabled,tooltip:D.tooltip}}));let P;t[18]!==g||t[19]!==v?(P=D=>g.has(D.label)?null:v({label:`Cell > ${D.label}`,handle:D.handleHeadless||D.handle,props:{disabled:D.disabled,tooltip:D.tooltip}}),t[18]=g,t[19]=v,t[20]=P):P=t[20];const R=a.map(P);let L,B,U;return t[21]!==T||t[22]!==M||t[23]!==R||t[24]!==A?(L=c.jsxs(T,{heading:"Commands",children:[A,M,R]}),t[21]=T,t[22]=M,t[23]=R,t[24]=A,t[25]=L):L=t[25],t[26]!==E||t[27]!==L||t[28]!==N||t[29]!==j?(B=c.jsxs(E,{children:[N,j,L]}),t[26]=E,t[27]=L,t[28]=N,t[29]=j,t[30]=B):B=t[30],t[31]!==C||t[32]!==e||t[33]!==n||t[34]!==B||t[35]!==S?(U=c.jsxs(C,{open:e,onOpenChange:n,children:[S,B]}),t[31]=C,t[32]=e,t[33]=n,t[34]=B,t[35]=S,t[36]=U):U=t[36],U};function AC(t){return!t.hotkey}function TC(t){return t.label}function MC(t){return!t}function kr(){return ht().optional().describe(Ge.of({label:"Password",inputType:"password",placeholder:"password",optionRegex:".*password.*"}))}function bg(){return ht().optional().describe(Ge.of({label:"Token",inputType:"password",placeholder:"token",optionRegex:".*token.*"}))}function Ra(){return ht().optional().describe(Ge.of({label:"Warehouse Name",placeholder:"warehouse",optionRegex:".*warehouse.*"}))}function xg(){return ht().optional().describe(Ge.of({label:"URI",optionRegex:".*uri.*"}))}function Sr(){return ht().nonempty().describe(Ge.of({label:"Host",placeholder:"localhost",optionRegex:".*host.*"}))}function go(){return ht().describe(Ge.of({label:"Database",placeholder:"db name",optionRegex:".*database.*"}))}function Cr(){return ht().nonempty().describe(Ge.of({label:"Username",placeholder:"username",optionRegex:".*username.*"}))}function Nr(t){const e=SB.string().describe(Ge.of({label:"Port",inputType:"number",placeholder:t==null?void 0:t.toString()})).transform(Number).refine(n=>n>=0&&n<=65535,{message:"Port must be between 0 and 65535"});return t!==void 0?e.default(t.toString()):e}function yg(){return Ds().default(!1).describe(Ge.of({label:"Read Only"}))}const wg=xt({type:kt("postgres"),host:Sr(),port:Nr(5432).optional(),database:go(),username:Cr(),password:kr(),ssl:Ds().default(!1).describe(Ge.of({label:"Use SSL"}))}).describe(Ge.of({direction:"two-columns"})),vg=xt({type:kt("mysql"),host:Sr(),port:Nr(3306),database:go(),username:Cr(),password:kr(),ssl:Ds().default(!1).describe(Ge.of({label:"Use SSL"}))}).describe(Ge.of({direction:"two-columns"})),kg=xt({type:kt("sqlite"),database:go().describe(Ge.of({label:"Database Path"}))}).describe(Ge.of({direction:"two-columns"})),Sg=xt({type:kt("duckdb"),database:go().describe(Ge.of({label:"Database Path"})),read_only:yg()}).describe(Ge.of({direction:"two-columns"})),Cg=xt({type:kt("motherduck"),database:go().default("my_db").describe(Ge.of({label:"Database Name"})),token:bg()}).describe(Ge.of({direction:"two-columns"})),Ng=xt({type:kt("snowflake"),account:ht().nonempty().describe(Ge.of({label:"Account",optionRegex:".*snowflake.*"})),warehouse:ht().optional().describe(Ge.of({label:"Warehouse",optionRegex:".*snowflake.*"})),database:go(),schema:ht().optional().describe(Ge.of({label:"Schema",optionRegex:".*snowflake.*"})),username:Cr(),password:kr(),role:ht().optional().describe(Ge.of({label:"Role"}))}).describe(Ge.of({direction:"two-columns"})),jg=xt({type:kt("bigquery"),project:ht().nonempty().describe(Ge.of({label:"Project ID",optionRegex:".*bigquery.*"})),dataset:ht().nonempty().describe(Ge.of({label:"Dataset",optionRegex:".*bigquery.*"})),credentials_json:ht().describe(Ge.of({label:"Credentials JSON",inputType:"textarea"}))}).describe(Ge.of({direction:"two-columns"})),Eg=xt({type:kt("clickhouse_connect"),host:Sr(),port:Nr(8123).optional(),username:Cr(),password:kr(),secure:Ds().default(!1).describe(Ge.of({label:"Use HTTPs"}))}).describe(Ge.of({direction:"two-columns"})),Ig=xt({type:kt("timeplus"),host:Sr().default("localhost"),port:Nr(8123).optional(),username:Cr().default("default"),password:kr().default("")}).describe(Ge.of({direction:"two-columns"})),Ag=xt({type:kt("chdb"),database:go().describe(Ge.of({label:"Database Path"})),read_only:yg()}).describe(Ge.of({direction:"two-columns"})),Tg=xt({type:kt("trino"),host:Sr(),port:Nr(8080),database:go(),schema:ht().describe(Ge.of({label:"Schema",placeholder:"schema name",optionRegex:".*schema.*"})).optional(),username:Cr(),password:kr(),async_support:Ds().default(!1).describe(Ge.of({label:"Async Support"}))}).describe(Ge.of({direction:"two-columns"})),Mg=xt({type:kt("iceberg"),name:ht().describe(Ge.of({label:"Catalog Name"})),catalog:Im("type",[xt({type:kt("REST"),warehouse:Ra(),uri:ht().optional().describe(Ge.of({label:"URI",placeholder:"https://",optionRegex:".*uri.*"})),token:bg()}),xt({type:kt("SQL"),warehouse:Ra(),uri:ht().optional().describe(Ge.of({label:"URI",placeholder:"jdbc:iceberg://host:port/database",optionRegex:".*uri.*"}))}),xt({type:kt("Hive"),warehouse:Ra(),uri:xg()}),xt({type:kt("Glue"),warehouse:Ra(),uri:xg()}),xt({type:kt("DynamoDB"),"dynamodb.profile-name":ht().optional().describe(Ge.of({label:"Profile Name"})),"dynamodb.region":ht().optional().describe(Ge.of({label:"Region"})),"dynamodb.access-key-id":ht().optional().describe(Ge.of({label:"Access Key ID"})),"dynamodb.secret-access-key":ht().optional().describe(Ge.of({label:"Secret Access Key",inputType:"password"})),"dynamodb.session-token":ht().optional().describe(Ge.of({label:"Session Token",inputType:"password"}))})]).default({type:"REST"}).describe(Ge.of({special:"tabs"}))}),Og=xt({type:kt("datafusion"),sessionContext:Ds().optional().describe(Ge.of({label:"Use Session Context"}))}),Dg=xt({type:kt("pyspark"),host:Sr().optional(),port:Nr().optional()}),Rg=xt({type:kt("redshift"),host:Sr(),port:Nr(5439),connectionType:Im("type",[xt({type:kt("IAM credentials"),region:ht().describe(Ge.of({label:"Region"})),aws_access_key_id:ht().nonempty().describe(Ge.of({label:"AWS Access Key ID",inputType:"password",optionRegex:".*aws_access_key_id.*"})),aws_secret_access_key:ht().nonempty().describe(Ge.of({label:"AWS Secret Access Key",inputType:"password",optionRegex:".*aws_secret_access_key.*"})),aws_session_token:ht().optional().describe(Ge.of({label:"AWS Session Token",inputType:"password",optionRegex:".*aws_session_token.*"}))}),xt({type:kt("DB credentials"),user:Cr(),password:kr()})]).default({type:"IAM credentials",aws_access_key_id:"",aws_secret_access_key:"",region:""}),database:go()}).describe(Ge.of({direction:"two-columns"})),OC=Im("type",[wg,vg,kg,Sg,Cg,Ng,jg,Eg,Ig,Ag,Tg,Mg,Og,Dg,Rg]),Cd="env:";function Pa(t){return typeof t=="string"&&t.startsWith(Cd)}function Nd(t){return`${Cd}${t}`}const Pg={sqlmodel:"SQLModel",sqlalchemy:"SQLAlchemy",duckdb:"DuckDB",clickhouse_connect:"ClickHouse Connect",chdb:"chDB",pyiceberg:"PyIceberg",ibis:"Ibis",motherduck:"MotherDuck",redshift:"Redshift"};class rn{constructor(e,n,o){this.connection=void 0,this.orm=void 0,this.secrets=void 0,this.connection=e,this.orm=n,this.secrets=o}get imports(){const e=new Set(this.generateImports());switch(this.orm){case"sqlalchemy":e.add("import sqlalchemy");break;case"sqlmodel":e.add("import sqlmodel");break;case"duckdb":e.add("import duckdb")}return e}}class DC{constructor(){this.secrets={}}get imports(){return Object.keys(this.secrets).length===0?new Set:new Set(["import os"])}print(e,n,o){if(e=(r=>`_${r}`)(e),Pa(n)){const r=n.replace(Cd,""),s=o?`os.environ.get("${r}", "${o}")`:`os.environ.get("${r}")`;return this.secrets[e]=s,e}if(o!=null){const r=`os.environ.get("${n}", "${o}")`;return this.secrets[e]=r,e}return typeof n=="number"||typeof n=="number"?`${n}`:typeof n=="boolean"?Gr(n):n?`"${n}"`:""}printInFString(e,n,o){if(n===void 0)return"";if(typeof n=="number")return`${n}`;if(typeof n=="boolean")return Gr(n);const r=this.print(e,n,o);return r.startsWith('"')&&r.endsWith('"')?r.slice(1,-1):`{${r}}`}printPassword(e,n,o){const r=o?this.printInFString.bind(this):this.print.bind(this);return Pa(e)?r("password",e):r("password",n,e)}getSecrets(){return this.secrets}formatSecrets(){return Object.keys(this.secrets).length===0?"":Object.entries(this.secrets).map(([e,n])=>`${e} = ${n}`).join(`
`)}}class RC extends rn{generateImports(){return[]}generateConnectionCode(){const e=this.connection.ssl?", connect_args={'sslmode': 'require'}":"",n=this.secrets.printPassword(this.connection.password,"POSTGRES_PASSWORD",!0),o=this.secrets.printInFString("username",this.connection.username),r=this.secrets.printInFString("host",this.connection.host),s=this.secrets.printInFString("port",this.connection.port),i=this.secrets.printInFString("database",this.connection.database);return St(`
      DATABASE_URL = f"postgresql://${o}:${n}@${r}:${s}/${i}"
      engine = ${this.orm}.create_engine(DATABASE_URL${e})
    `)}}class PC extends rn{generateImports(){return[]}generateConnectionCode(){const e=this.connection.ssl?", connect_args={'ssl': {'ssl-mode': 'preferred'}}":"",n=this.secrets.printPassword(this.connection.password,"MYSQL_PASSWORD",!0),o=this.secrets.printInFString("database",this.connection.database),r=this.secrets.printInFString("username",this.connection.username),s=this.secrets.printInFString("host",this.connection.host),i=this.secrets.printInFString("port",this.connection.port);return St(`
      DATABASE_URL = f"mysql+pymysql://${r}:${n}@${s}:${i}/${o}"
      engine = ${this.orm}.create_engine(DATABASE_URL${e})
    `)}}class LC extends rn{generateImports(){return[]}generateConnectionCode(){const e=this.connection.database?this.secrets.printInFString("database",this.connection.database):"",n=e.startsWith("{")&&e.endsWith("}")?`DATABASE_URL = f"sqlite:///${e}"`:`DATABASE_URL = "sqlite:///${e}"`;return St(`
      ${n}
      engine = ${this.orm}.create_engine(DATABASE_URL)
    `)}}class FC extends rn{generateImports(){return["from snowflake.sqlalchemy import URL"]}generateConnectionCode(){const e=this.secrets.printPassword(this.connection.password,"SNOWFLAKE_PASSWORD",!1),n={account:this.secrets.print("account",this.connection.account),user:this.secrets.print("user",this.connection.username),database:this.secrets.print("database",this.connection.database),warehouse:this.connection.warehouse?this.secrets.print("warehouse",this.connection.warehouse):void 0,schema:this.connection.schema?this.secrets.print("schema",this.connection.schema):void 0,role:this.connection.role?this.secrets.print("role",this.connection.role):void 0,password:e};return St(`
      engine = ${this.orm}.create_engine(
        URL(
${La(n,o=>`          ${o}`)},
        )
      )
    `)}}class zC extends rn{generateImports(){return["import json"]}generateConnectionCode(){const e=this.secrets.printInFString("project",this.connection.project),n=this.secrets.printInFString("dataset",this.connection.dataset);return St(`
      credentials = json.loads("""${this.connection.credentials_json}""")
      engine = ${this.orm}.create_engine(f"bigquery://${e}/${n}", credentials_info=credentials)
    `)}}class BC extends rn{generateImports(){return[]}generateConnectionCode(){const e=this.secrets.printInFString("database",this.connection.database||":memory:");return St(`
      DATABASE_URL = "${e}"
      engine = ${this.orm}.connect(DATABASE_URL, read_only=${Gr(this.connection.read_only)})
    `)}}class UC extends rn{generateImports(){return[]}generateConnectionCode(){const e=this.secrets.printInFString("database",this.connection.database);if(!this.connection.token)return St(`
        conn = duckdb.connect("md:${e}")
        `);const n=this.secrets.printPassword(this.connection.token,"MOTHERDUCK_TOKEN",!1);return St(`
      conn = duckdb.connect("md:${e}", config={"motherduck_token": ${n}})
    `)}}class VC extends rn{generateImports(){return["import clickhouse_connect"]}generateConnectionCode(){const e=this.secrets.printPassword(this.connection.password,"CLICKHOUSE_PASSWORD",!1),n={host:this.secrets.print("host",this.connection.host),user:this.secrets.print("user",this.connection.username),secure:this.secrets.print("secure",this.connection.secure),port:this.connection.port?this.secrets.print("port",this.connection.port):void 0,password:this.connection.password?e:void 0};return St(`
      engine = ${this.orm}.get_client(
${La(n,o=>`        ${o}`)},
      )
    `)}}class $C extends rn{generateImports(){return[]}generateConnectionCode(){const e=this.secrets.printPassword(this.connection.password,"TIMEPLUS_PASSWORD",!0),n=this.secrets.printInFString("username",this.connection.username),o=this.secrets.printInFString("host",this.connection.host),r=this.secrets.printInFString("port",this.connection.port);return St(`
      DATABASE_URL = f"timeplus://${n}:${e}@${o}:${r}"
      engine = ${this.orm}.create_engine(DATABASE_URL)
    `)}}class HC extends rn{generateImports(){return["import chdb"]}generateConnectionCode(){const e=this.secrets.print("database",this.connection.database)||'""';return St(`
      engine = ${this.orm}.connect(${e}, read_only=${Gr(this.connection.read_only)})
    `)}}class WC extends rn{generateImports(){return this.connection.async_support?["import aiotrino"]:["import trino.sqlalchemy"]}generateConnectionCode(){const e=this.connection.async_support?"aiotrino":"trino",n=this.connection.schema?`/${this.connection.schema}`:"",o=this.secrets.printInFString("username",this.connection.username),r=this.secrets.printInFString("host",this.connection.host),s=this.secrets.printInFString("port",this.connection.port),i=this.secrets.printInFString("database",this.connection.database),a=this.secrets.printPassword(this.connection.password,"TRINO_PASSWORD",!0);return St(`
      engine = ${this.orm}.create_engine(f"${e}://${o}:${a}@${r}:${s}/${i}${n}")
    `)}}class qC extends rn{generateImports(){switch(this.connection.catalog.type){case"REST":return["from pyiceberg.catalog.rest import RestCatalog"];case"SQL":return["from pyiceberg.catalog.sql import SqlCatalog"];case"Hive":return["from pyiceberg.catalog.hive import HiveCatalog"];case"Glue":return["from pyiceberg.catalog.glue import GlueCatalog"];case"DynamoDB":return["from pyiceberg.catalog.dynamodb import DynamoDBCatalog"];default:Am(this.connection.catalog)}}generateConnectionCode(){let e={...this.connection.catalog};e=Object.fromEntries(Object.entries(e).filter(([i,a])=>a!=null&&a!==""&&i!=="type"));for(const[i,a]of Object.entries(e))Pa(a)?e[i]=this.secrets.print(i,a):typeof a=="string"&&(e[i]=`"${a}"`);const n=(o=e,r=i=>`              ${i}`,Object.entries(o).filter(([,i])=>i!=null&&i!=="").map(([i,a])=>{const l=`"${i}"`;return r(typeof a=="boolean"?`${l}: ${Gr(a)}`:`${l}: ${a}`)}).join(`,
`));var o,r;const s=`"${this.connection.name}"`;switch(this.connection.catalog.type){case"REST":return St(`
          catalog = RestCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"SQL":return St(`
          catalog = SqlCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"Hive":return St(`
          catalog = HiveCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"Glue":return St(`
          catalog = GlueCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"DynamoDB":return St(`
          catalog = DynamoDBCatalog(
            ${s},
            **{
${n}
            },
          )
        `);default:Am(this.connection.catalog)}}}class GC extends rn{generateImports(){return["import ibis","from datafusion import SessionContext"]}generateConnectionCode(){return this.connection.sessionContext?St(`
        ctx = SessionContext()
        # Sample table
        _ = ctx.from_pydict({"a": [1, 2, 3]}, "my_table")

        con = ibis.datafusion.connect(ctx)
      `):St(`
      con = ibis.datafusion.connect()
    `)}}class YC extends rn{generateImports(){return["import ibis","from pyspark.sql import SparkSession"]}generateConnectionCode(){if(this.connection.host||this.connection.port){const e=this.secrets.printInFString("host",this.connection.host),n=this.secrets.printInFString("port",this.connection.port);return St(`
        session = SparkSession.builder.remote(f"sc://${e}:${n}").getOrCreate()
        con = ibis.pyspark.connect(session)
      `)}return St(`
      con = ibis.pyspark.connect()
    `)}}class JC extends rn{generateImports(){return["import redshift_connector"]}generateConnectionCode(){const e=this.secrets.print("host",this.connection.host),n=this.secrets.print("port",this.connection.port),o=this.secrets.print("database",this.connection.database);if(this.connection.connectionType.type==="IAM credentials"){const a=this.secrets.print("aws_access_key_id",this.connection.connectionType.aws_access_key_id),l=this.secrets.print("aws_secret_access_key",this.connection.connectionType.aws_secret_access_key),d=this.connection.connectionType.aws_session_token?this.secrets.print("aws_session_token",this.connection.connectionType.aws_session_token):void 0,u={iam:!0,host:e,port:n,region:`"${this.connection.connectionType.region}"`,database:o,access_key_id:a,secret_access_key:l,...d&&{session_token:d}};return St(`
        con = redshift_connector.connect(
${La(u,h=>`          ${h}`)},
        )
      `)}const r=this.connection.connectionType.user?this.secrets.print("user",this.connection.connectionType.user):void 0,s=this.connection.connectionType.password?this.secrets.printPassword(this.connection.connectionType.password,"REDSHIFT_PASSWORD",!1):void 0,i={host:e,port:n,database:o,...r&&{user:r},...s&&{password:s}};return St(`
      con = redshift_connector.connect(
${La(i,a=>`          ${a}`)},
      )
    `)}}class KC{constructor(){this.secrets=new DC}createGenerator(e,n){switch(e.type){case"postgres":return new RC(e,n,this.secrets);case"mysql":return new PC(e,n,this.secrets);case"sqlite":return new LC(e,n,this.secrets);case"snowflake":return new FC(e,n,this.secrets);case"bigquery":return new zC(e,n,this.secrets);case"duckdb":return new BC(e,n,this.secrets);case"motherduck":return new UC(e,n,this.secrets);case"clickhouse_connect":return new VC(e,n,this.secrets);case"timeplus":return new $C(e,n,this.secrets);case"chdb":return new HC(e,n,this.secrets);case"trino":return new WC(e,n,this.secrets);case"iceberg":return new qC(e,n,this.secrets);case"datafusion":return new GC(e,n,this.secrets);case"pyspark":return new YC(e,n,this.secrets);case"redshift":return new JC(e,n,this.secrets);default:Am(e)}}}function Gr(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function La(t,e){return Object.entries(t).filter(([,n])=>n!=null&&n!=="").map(([n,o])=>e(typeof o=="boolean"?`${n}=${Gr(o)}`:`${n}=${o}`)).join(`,
`)}function Lg(t){return t.sort((e,n)=>e.provider==="env"?1:n.provider==="env"?-1:0)}const Fg=t=>{const e=K.c(42),{providerNames:n,onClose:o,onSuccess:r}=t,[s,i]=X.useState(""),[a,l]=X.useState(""),[d,u]=X.useState(n[0]);let h;e[0]!==s||e[1]!==d||e[2]!==r||e[3]!==a?(h=async U=>{if(U.preventDefault(),d)if(s&&a&&d)try{await CB({key:s,value:a,provider:"dotenv",name:d}),nt({title:"Secret created",description:"The secret has been created successfully."}),r(s)}catch{nt({title:"Error",description:"Failed to create secret. Please try again.",variant:"danger"})}else nt({title:"Error",description:"Please fill in all fields.",variant:"danger"});else nt({title:"Error",description:"No location selected for the secret.",variant:"danger"})},e[0]=s,e[1]=d,e[2]=r,e[3]=a,e[4]=h):h=e[4];const f=h;let m,_,g,p,b,x,y,v,C,S,E,N,j,T,A,M;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsxs(Ts,{children:[c.jsx(sr,{children:"Add Secret"}),c.jsx(Ms,{children:"Add a new secret to your environment variables."})]}),e[5]=m):m=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(Fr,{htmlFor:"key",children:"Key"}),e[6]=_):_=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(g=U=>{i(U.target.value.replaceAll(/\W/g,"_"))},e[7]=g):g=e[7],e[8]!==s?(p=c.jsxs("div",{className:"grid gap-2",children:[_,c.jsx(ir,{id:"key",value:s,onChange:g,placeholder:"MY_SECRET_KEY",required:!0})]}),e[8]=s,e[9]=p):p=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(Fr,{htmlFor:"value",children:"Value"}),e[10]=b):b=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(x=U=>l(U.target.value),e[11]=x):x=e[11],e[12]!==a?(y=c.jsx(ir,{id:"value",type:"text",value:a,onChange:x,required:!0,autoComplete:"off"}),e[12]=a,e[13]=y):y=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(v=window.location.href.startsWith("http://")&&c.jsx(d4,{children:"Note: You are sending this key over http."}),e[14]=v):v=e[14],e[15]!==y?(C=c.jsxs("div",{className:"grid gap-2",children:[b,y,v]}),e[15]=y,e[16]=C):C=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx(Fr,{htmlFor:"location",children:"Location"}),e[17]=S):S=e[17],e[18]!==n.length?(E=n.length===0&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"No dotenv locations configured."}),e[18]=n.length,e[19]=E):E=e[19],e[20]!==d||e[21]!==n?(N=n.length>0&&c.jsxs(_c,{value:d,onValueChange:U=>u(U),children:[c.jsx(bc,{children:c.jsx(xc,{placeholder:"Select a provider"})}),c.jsx(yc,{children:n.map(XC)})]}),e[20]=d,e[21]=n,e[22]=N):N=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(j=c.jsxs(d4,{children:["You can configure the location by setting the"," ",c.jsx(Tm,{href:"https://links.marimo.app/dotenv",children:"dotenv configuration"}),"."]}),e[23]=j):j=e[23],e[24]!==E||e[25]!==N?(T=c.jsxs("div",{className:"grid gap-2",children:[S,E,N,j]}),e[24]=E,e[25]=N,e[26]=T):T=e[26],e[27]!==C||e[28]!==T||e[29]!==p?(A=c.jsxs("div",{className:"grid gap-4 py-4",children:[p,C,T]}),e[27]=C,e[28]=T,e[29]=p,e[30]=A):A=e[30],e[31]!==o?(M=c.jsx(Ae,{type:"button",variant:"outline",onClick:o,children:"Cancel"}),e[31]=o,e[32]=M):M=e[32];const P=!s||!a||!d;let R,L,B;return e[33]!==P?(R=c.jsx(Ae,{type:"submit",disabled:P,children:"Add Secret"}),e[33]=P,e[34]=R):R=e[34],e[35]!==M||e[36]!==R?(L=c.jsxs(Ki,{children:[M,R]}),e[35]=M,e[36]=R,e[37]=L):L=e[37],e[38]!==f||e[39]!==A||e[40]!==L?(B=c.jsx(ar,{children:c.jsxs("form",{onSubmit:f,children:[m,A,L]})}),e[38]=f,e[39]=A,e[40]=L,e[41]=B):B=e[41],B};function XC(t){return c.jsx(oa,{value:t,children:t},t)}const zg=O.createContext({providerNames:[],secretKeys:[],loading:!1,error:void 0,refreshSecrets:Hn.NOOP}),ZC=t=>{const e=K.c(14),{children:n}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const{data:r,isPending:s,error:i,refetch:a}=Wn(nN,o);let l,d,u,h;return e[1]!==(r==null?void 0:r.secretKeys)?(l=(r==null?void 0:r.secretKeys)||[],e[1]=r==null?void 0:r.secretKeys,e[2]=l):l=e[2],e[3]!==(r==null?void 0:r.providerNames)?(d=(r==null?void 0:r.providerNames)||[],e[3]=r==null?void 0:r.providerNames,e[4]=d):d=e[4],e[5]!==i||e[6]!==s||e[7]!==a||e[8]!==l||e[9]!==d?(u={secretKeys:l,providerNames:d,loading:s,error:i,refreshSecrets:a},e[5]=i,e[6]=s,e[7]=a,e[8]=l,e[9]=d,e[10]=u):u=e[10],e[11]!==n||e[12]!==u?(h=c.jsx(zg,{value:u,children:n}),e[11]=n,e[12]=u,e[13]=h):h=e[13],h};function QC(t){return t.provider!=="env"}function eN(t){return t.name}function tN(t){return t.keys}async function nN(){const t=await oC.request({}),e=Lg(t.secrets).filter(QC).map(eN);return{secretKeys:t.secrets.flatMap(tN).sort(),providerNames:e}}const Bg=[{name:"PostgreSQL",schema:wg,color:"#336791",logo:"postgres",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"MySQL",schema:vg,color:"#00758F",logo:"mysql",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"SQLite",schema:kg,color:"#003B57",logo:"sqlite",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"DuckDB",schema:Sg,color:"#FFD700",logo:"duckdb",connectionLibraries:{libraries:["duckdb"],preferred:"duckdb"}},{name:"MotherDuck",schema:Cg,color:"#ff9538",logo:"motherduck",connectionLibraries:{libraries:["duckdb"],preferred:"duckdb"}},{name:"Snowflake",schema:Ng,color:"#29B5E8",logo:"snowflake",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"ClickHouse",schema:Eg,color:"#2C2C1D",logo:"clickhouse",connectionLibraries:{libraries:["clickhouse_connect"],preferred:"clickhouse_connect"}},{name:"Timeplus",schema:Ig,color:"#B83280",logo:"timeplus",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"BigQuery",schema:jg,color:"#4285F4",logo:"bigquery",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"ClickHouse Embedded",schema:Ag,color:"#f2b611",logo:"clickhouse",connectionLibraries:{libraries:["chdb"],preferred:"chdb"}},{name:"Trino",schema:Tg,color:"#d466b6",logo:"trino",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"DataFusion",schema:Og,color:"#202A37",logo:"datafusion",connectionLibraries:{libraries:["ibis"],preferred:"ibis"}},{name:"PySpark",schema:Dg,color:"#1C5162",logo:"pyspark",connectionLibraries:{libraries:["ibis"],preferred:"ibis"}},{name:"Redshift",schema:Rg,color:"#522BAE",logo:"redshift",connectionLibraries:{libraries:["redshift"],preferred:"redshift"}}],Ug=[{name:"Iceberg",schema:Mg,color:"#000000",logo:"iceberg",connectionLibraries:{libraries:["pyiceberg"],preferred:"pyiceberg"}}],oN=t=>{const e=K.c(14),{onSelect:n}=t;let o;e[0]!==n?(o=h=>{const{name:f,schema:m,color:_,logo:g}=h;return c.jsxs("button",{type:"button",className:"py-3 flex flex-col items-center justify-center gap-1 transition-all hover:scale-105 hover:brightness-110 rounded shadow-smSolid hover:shadow-mdSolid",style:{backgroundColor:_},onClick:()=>n(m),children:[c.jsx(y4,{name:g,className:"w-8 h-8 text-white brightness-0 invert dark:invert"}),c.jsx("span",{className:"text-white font-medium text-lg",children:f})]},f)},e[0]=n,e[1]=o):o=e[1];const r=o;let s,i,a,l,d,u;return e[2]!==r?(s=Bg.map(r),e[2]=r,e[3]=s):s=e[3],e[4]!==s?(i=c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s}),e[4]=s,e[5]=i):i=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsxs("h4",{className:"font-semibold text-muted-foreground text-lg flex items-center gap-4",children:["Data Catalogs",c.jsx("hr",{className:"flex-1"})]}),e[6]=a):a=e[6],e[7]!==r?(l=Ug.map(r),e[7]=r,e[8]=l):l=e[8],e[9]!==l?(d=c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l}),e[9]=l,e[10]=d):d=e[10],e[11]!==i||e[12]!==d?(u=c.jsxs(c.Fragment,{children:[i,a,d]}),e[11]=i,e[12]=d,e[13]=u):u=e[13],u},rN=[{isMatch:t=>{if(t instanceof m4||t instanceof IB){const{optionRegex:e}=Ge.parse(t._def.description||"");return!!e}return!1},Component:({schema:t,form:e,path:n})=>{const{secretKeys:o,providerNames:r,refreshSecrets:s}=O.use(zg),{openModal:i,closeModal:a}=$n(),{label:l,description:d,optionRegex:u=""}=Ge.parse(t._def.description||""),[h,f]=Bt(o,m=>new RegExp(u,"i").test(m));return c.jsx(u4,{control:e.control,name:n,render:({field:m})=>c.jsxs(h4,{children:[c.jsx(NB,{children:l}),c.jsx(jB,{children:d}),c.jsx(f4,{children:c.jsxs("div",{className:"flex gap-2",children:[t instanceof m4?c.jsx(ir,{...m,value:m.value,onChange:m.onChange,className:Ne("flex-1")}):c.jsx(EB,{...m,value:m.value,onChange:m.onChange,className:"flex-1"}),c.jsxs(hr,{children:[c.jsx(fr,{asChild:!0,children:c.jsx(Ae,{variant:"outline",size:"icon",className:Ne(Pa(m.value)&&"bg-accent"),children:c.jsx(dd,{className:"h-3 w-3"})})}),c.jsxs(mr,{align:"end",className:"max-h-60 overflow-y-auto",children:[c.jsxs(Vt,{onSelect:()=>{i(c.jsx(Fg,{providerNames:r,onSuccess:_=>{s(),m.onChange(Nd(_)),a()},onClose:a}))},children:[c.jsx(Ca,{className:"mr-2 h-3.5 w-3.5"}),"Create a new secret"]}),h.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(bn,{}),c.jsx(p4,{children:"Recommended"})]}),h.map(_=>c.jsx(Vt,{onSelect:()=>m.onChange(Nd(_)),children:_},_)),f.length>0&&c.jsx(bn,{}),f.map(_=>c.jsx(Vt,{onSelect:()=>m.onChange(Nd(_)),children:_},_))]})]})]})}),c.jsx(g4,{})]})})}}],sN=t=>{var $;const e=K.c(49),{schema:n,onSubmit:o,onBack:r}=t;let s,i,a;e[0]!==n?(s=AB(n),e[0]=n,e[1]=s):s=e[1],e[2]!==n?(i=_4(n),e[2]=n,e[3]=i):i=e[3],e[4]!==s||e[5]!==i?(a={defaultValues:s,resolver:i,reValidateMode:"onChange"},e[4]=s,e[5]=i,e[6]=a):a=e[6];const l=b4(a),d=($=[...Bg,...Ug].find(I=>I.schema===n))==null?void 0:$.connectionLibraries,[u,h]=O.useState((d==null?void 0:d.preferred)??"sqlalchemy"),{createNewCell:f}=bt(),m=Rs();let _;e[7]!==f||e[8]!==m?(_=I=>{f({code:I,before:!1,cellId:m??"__end__",skipIfCodeExists:!0})},e[7]=f,e[8]=m,e[9]=_):_=e[9];const g=_;let p;e[10]!==g||e[11]!==o||e[12]!==u?(p=I=>{g(function(W,G){if(!(G in Pg))throw new Error(`Unsupported library: ${G}`);OC.parse(W);const q=new KC,Y=q.createGenerator(W,G),ee=Y.generateConnectionCode(),oe=q.secrets,ie=[...new Set([...oe.imports,...Y.imports])].sort();ie.push("");const Z=oe.formatSecrets();return Z&&ie.push(Z),ie.push(ee.trim()),ie.join(`
`)}(I,u)),o()},e[10]=g,e[11]=o,e[12]=u,e[13]=p):p=e[13];const b=p;let x;e[14]!==l||e[15]!==b?(x=l.handleSubmit(b),e[14]=l,e[15]=b,e[16]=x):x=e[16];let y,v;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(TB,{}),e[17]=y):y=e[17],e[18]!==l||e[19]!==n?(v=c.jsx(ZC,{children:c.jsx(MB,{schema:n,form:l,renderers:rN,children:y})}),e[18]=l,e[19]=n,e[20]=v):v=e[20];let C;e[21]!==r?(C=c.jsx(Ae,{type:"button",variant:"outline",onClick:r,children:"Back"}),e[21]=r,e[22]=C):C=e[22];const S=!l.formState.isValid;let E,N;e[23]!==S?(E=c.jsx(Ae,{type:"submit",disabled:S,children:"Add"}),e[23]=S,e[24]=E):E=e[24],e[25]!==C||e[26]!==E?(N=c.jsxs("div",{className:"flex gap-2",children:[C,E]}),e[25]=C,e[26]=E,e[27]=N):N=e[27];const j=_c;let T,A;e[28]===Symbol.for("react.memo_cache_sentinel")?(T=I=>h(I),e[28]=T):T=e[28],e[29]===Symbol.for("react.memo_cache_sentinel")?(A=c.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[c.jsx(bc,{children:c.jsx(xc,{placeholder:"Select a library"})}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Preferred connection library"})]}),e[29]=A):A=e[29];const M=yc,P=x4,R=d==null?void 0:d.libraries.map(aN);let L,B,U,D,k;return e[30]!==P||e[31]!==R?(L=c.jsx(P,{children:R}),e[30]=P,e[31]=R,e[32]=L):L=e[32],e[33]!==M||e[34]!==L?(B=c.jsx(M,{children:L}),e[33]=M,e[34]=L,e[35]=B):B=e[35],e[36]!==j||e[37]!==u||e[38]!==T||e[39]!==A||e[40]!==B?(U=c.jsx("div",{children:c.jsxs(j,{value:u,onValueChange:T,children:[A,B]})}),e[36]=j,e[37]=u,e[38]=T,e[39]=A,e[40]=B,e[41]=U):U=e[41],e[42]!==N||e[43]!==U?(D=c.jsxs("div",{className:"flex gap-2 justify-between",children:[N,U]}),e[42]=N,e[43]=U,e[44]=D):D=e[44],e[45]!==D||e[46]!==x||e[47]!==v?(k=c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[v,D]}),e[45]=D,e[46]=x,e[47]=v,e[48]=k):k=e[48],k},iN=t=>{const e=K.c(5),{onSubmit:n}=t,[o,r]=O.useState(null);if(!o){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(oN,{onSelect:r}),e[0]=a):a=e[0],a}let s,i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>r(null),e[1]=s):s=e[1],e[2]!==n||e[3]!==o?(i=c.jsx(sN,{schema:o,onSubmit:n,onBack:s}),e[2]=n,e[3]=o,e[4]=i):i=e[4],i},Vg=t=>{const e=K.c(6),{children:n}=t,[o,r]=O.useState(!1);let s,i,a;return e[0]!==n?(s=c.jsx(OB,{asChild:!0,children:n}),e[0]=n,e[1]=s):s=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx($g,{onClose:()=>r(!1)}),e[2]=i):i=e[2],e[3]!==o||e[4]!==s?(a=c.jsxs(DB,{open:o,onOpenChange:r,children:[s,i]}),e[3]=o,e[4]=s,e[5]=a):a=e[5],a},$g=t=>{const e=K.c(4),{onClose:n}=t;let o,r,s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(sr,{children:"Add Connection"}),e[0]=o):o=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsxs(Ts,{className:"mb-4",children:[o,c.jsxs(Ms,{children:["Connect to your database or data catalog to query data directly from your notebook. Learn more about how to connect to your database in our"," ",c.jsx(Tm,{href:"https://docs.marimo.io/guides/working_with_data/sql/#connecting-to-a-custom-database",children:"docs."})]})]}),e[1]=r):r=e[1],e[2]!==n?(s=c.jsxs(ar,{className:"max-h-[75vh] overflow-y-auto",children:[r,c.jsx(iN,{onSubmit:()=>n()})]}),e[2]=n,e[3]=s):s=e[3],s};function aN(t){return c.jsx(oa,{value:t,children:Pg[t]},t)}const lN=()=>{const t=K.c(7),{selectedLayout:e}=rC(),{setLayoutView:n}=sC();if(un()&&!Mm("wasm_layouts"))return null;let o,r,s,i;return t[0]!==n?(o=a=>n(a),t[0]=n,t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(bc,{className:"min-w-[110px] border-border bg-background","data-testid":"layout-select",children:c.jsx(xc,{placeholder:"Select a view"})}),t[2]=r):r=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx(yc,{children:c.jsxs(x4,{children:[c.jsx(RB,{children:"View as"}),iC.map(dN)]})}),t[3]=s):s=t[3],t[4]!==e||t[5]!==o?(i=c.jsxs(_c,{"data-testid":"layout-select",value:e,onValueChange:o,children:[r,s]}),t[4]=e,t[5]=o,t[6]=i):i=t[6],i};function cN(t){const e=Hg(t);return c.jsx(e,{className:"h-4 w-4"})}function Hg(t){switch(t){case"vertical":return Up;case"grid":return KH;case"slides":return md;default:return wc(t),vc}}function Wg(t){return Om(t)}function dN(t){return c.jsx(oa,{value:t,children:c.jsxs("div",{className:"flex items-center gap-1.5 leading-5",children:[cN(t),c.jsx("span",{children:Wg(t)})]})},t)}const uN=()=>{const t=K.c(2),{updateCellConfig:e}=bt();let n;return t[0]!==e?(n=async()=>{const o=new ra,r=Nn(),s=r.cellIds.inOrderIds,i={};for(const l of s){if(r.cellData[l]===void 0)continue;const{code:d,config:u}=r.cellData[l];u.hide_code||o.isSupported(d)&&(i[l]={hide_code:!0})}const a=pc.entries(i);if(a.length!==0){await ur({configs:i});for(const[l,d]of a)e({cellId:l,config:d})}},t[0]=e,t[1]=n):n=t[1],n};function qg(){const t=K.c(3),{openConfirm:e}=$n(),n=Ot(hn);let o;return t[0]!==e||t[1]!==n?(o=()=>{e({title:"Restart Kernel",description:"This will restart the Python kernel. You'll lose all data that's in memory. You will also lose any unsaved changes, so make sure to save your work before restarting.",variant:"destructive",confirmAction:c.jsx(w4,{onClick:async()=>{n({state:$t.CLOSING}),await LB(),FB()},"aria-label":"Confirm Restart",children:"Restart"})})},t[0]=e,t[1]=n,t[2]=o):o=t[2],o}const Qs=t=>{t==null||t.preventDefault(),t==null||t.stopPropagation()};function Gg(){var I,W;const t=K.c(36),e=Dm(),{openModal:n,closeModal:o}=$n(),{toggleApplication:r}=sa(),{selectedPanel:s}=Sc(),[i]=Qt(_m),a=Le(Os),l=uN(),[d]=zr(),{updateCellConfig:u,undoDeleteCell:h,clearAllCellOutputs:f,upsertSetupCell:m,collapseAllCells:_,expandAllCells:g}=bt(),p=qg(),b=fg(),x=function(G){const q=K.c(4),{openPrompt:Y,closeModal:ee}=$n();let oe;return q[0]!==ee||q[1]!==Y||q[2]!==G?(oe=()=>{if(!G)return null;const ie=kc.guessDeliminator(G),Z=jn.basename(G);Y({title:"Copy notebook",description:"Enter a new filename for the notebook copy.",defaultValue:`_${Z}`,confirmText:"Copy notebook",spellCheck:!1,onConfirm:Q=>{const me=ie.join(jn.dirname(G),Q);PB({source:G,destination:me}).then(()=>{ee(),nt({title:"Notebook copied",description:"A copy of the notebook has been created."}),KS(me)})}})},q[0]=ee,q[1]=Y,q[2]=G,q[3]=oe):oe=q[3],oe}(e),y=Ot(Sd),v=Ot(XH),C=Ot(ZH),S=Le(zB),E=Le(BB),N=Le(v4),{selectedLayout:j}=rC(),{setLayoutView:T}=sC(),A=hg(),M=((I=d.sharing)==null?void 0:I.html)??!0,P=((W=d.sharing)==null?void 0:W.wasm)??!0,R=RN;let L;t[0]===Symbol.for("react.memo_cache_sentinel")?(L=c.jsx(eg,{size:14,strokeWidth:1.5}),t[0]=L):L=t[0];const B=!M&&!P;let U;t[1]===Symbol.for("react.memo_cache_sentinel")?(U=c.jsx(qB,{size:14,strokeWidth:1.5}),t[1]=U):U=t[1];const D=!M;let k,$;return t[2]!==o||t[3]!==n?(k=async()=>{n(c.jsx(xC,{onClose:o}))},t[2]=o,t[3]=n,t[4]=k):k=t[4],t[5]!==N||t[6]!==f||t[7]!==o||t[8]!==_||t[9]!==x||t[10]!==g||t[11]!==e||t[12]!==S||t[13]!==E||t[14]!==l||t[15]!==a||t[16]!==n||t[17]!==p||t[18]!==b||t[19]!==j||t[20]!==s||t[21]!==y||t[22]!==C||t[23]!==T||t[24]!==v||t[25]!==P||t[26]!==B||t[27]!==D||t[28]!==k||t[29]!==r||t[30]!==A||t[31]!==h||t[32]!==u||t[33]!==m||t[34]!==i.mode?($=[{icon:L,label:"Share",handle:Qs,hidden:B,dropdown:[{icon:U,label:"Publish HTML to web",hidden:D,handle:k},{icon:c.jsx(JS,{size:14,strokeWidth:1.5}),label:"Create WebAssembly link",hidden:!P,handle:DN}]},{icon:c.jsx(Rm,{size:14,strokeWidth:1.5}),label:"Download",handle:Qs,dropdown:[{icon:c.jsx(lC,{size:14,strokeWidth:1.5}),label:"Download as HTML",handle:async()=>{e?await aC({filename:e,includeCode:!0}):nt({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},{icon:c.jsx(lC,{size:14,strokeWidth:1.5}),label:"Download as HTML (exclude code)",handle:async()=>{e?await aC({filename:e,includeCode:!1}):nt({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},{icon:c.jsx(uc,{strokeWidth:1.5,style:{width:14,height:14}}),label:"Download as Markdown",handle:ON},{icon:c.jsx(jp,{size:14,strokeWidth:1.5}),label:"Download Python code",handle:MN},{divider:!0,icon:c.jsx(mp,{size:14,strokeWidth:1.5}),label:"Download as PNG",disabled:i.mode!=="present",tooltip:i.mode==="present"?void 0:c.jsxs("span",{children:["Only available in app view. ",c.jsx("br",{}),"Toggle with: ",on("global.hideCode",!1)]}),handle:TN},{icon:c.jsx(UB,{size:14,strokeWidth:1.5}),label:"Download as PDF",disabled:i.mode!=="present",tooltip:i.mode==="present"?void 0:c.jsxs("span",{children:["Only available in app view. ",c.jsx("br",{}),"Toggle with: ",on("global.hideCode",!1)]}),handle:IN}]},{divider:!0,icon:c.jsx(Yp,{size:14,strokeWidth:1.5}),label:"Helper panel",handle:Qs,dropdown:yd.flatMap(G=>{const{type:q,Icon:Y,hidden:ee}=G;return ee?[]:{label:Om(q),rightElement:R(s===q),icon:c.jsx(Y,{size:14,strokeWidth:1.5}),handle:()=>r(q)}})},{icon:c.jsx(md,{size:14,strokeWidth:1.5}),label:"Present as",handle:Qs,dropdown:[{icon:i.mode==="present"?c.jsx(k4,{size:14,strokeWidth:1.5}):c.jsx(ud,{size:14,strokeWidth:1.5}),label:"Toggle app view",hotkey:"global.hideCode",handle:()=>{A()}},...iC.map((G,q)=>{const Y=Hg(G);return{divider:q===0,label:Wg(G),icon:c.jsx(Y,{size:14,strokeWidth:1.5}),rightElement:c.jsx("div",{className:"w-8 flex justify-end",children:j===G&&c.jsx(Cc,{size:14})}),handle:()=>{T(G),i.mode==="edit"&&A()}}})]},{icon:c.jsx(Op,{size:14,strokeWidth:1.5}),label:"Create notebook copy",hidden:!e||un(),handle:x},{icon:c.jsx(id,{size:14,strokeWidth:1.5}),label:"Copy code to clipboard",hidden:!e,handle:EN},{icon:c.jsx(vn,{size:14,strokeWidth:1.5}),label:"Enable all cells",hidden:!S||a,handle:async()=>{const G=Nn(),q=VB(G),Y=pc.fromEntries(q.map(jN));await ur({configs:Y});for(const ee of q)u({cellId:ee,config:{disabled:!1}})}},{icon:c.jsx(wn,{size:14,strokeWidth:1.5}),label:"Disable all cells",hidden:!E||a,handle:async()=>{const G=Nn(),q=K3(G),Y=pc.fromEntries(q.map(NN));await ur({configs:Y});for(const ee of q)u({cellId:ee,config:{disabled:!0}})}},{icon:c.jsx(vm,{size:14,strokeWidth:1.5}),label:"Hide all markdown code",handle:l},{icon:c.jsx(Cp,{size:14,strokeWidth:1.5}),label:"Collapse all sections",hotkey:"global.collapseAllSections",handle:_},{icon:c.jsx(Sp,{size:14,strokeWidth:1.5}),label:"Expand all sections",hotkey:"global.expandAllSections",handle:g},{icon:c.jsx(Ip,{size:14,strokeWidth:1.5}),label:"Add setup cell",handle:()=>{m({code:"# Initialization code that runs before all other cells"})}},{icon:c.jsx(Zi,{size:14,strokeWidth:1.5}),label:"Clear all outputs",handle:()=>{f()}},{icon:c.jsx(Tp,{size:14,strokeWidth:1.5}),label:"Re-run all cells",hotkey:"global.runAll",handle:async()=>{b()}},{icon:c.jsx(bd,{size:14,strokeWidth:1.5}),label:"Undo cell deletion",hidden:!N||a,handle:()=>{h()}},{icon:c.jsx(lr,{size:14,strokeWidth:1.5}),label:"Add database connection",handle:()=>{n(c.jsx($g,{onClose:o}))}},{divider:!0,icon:c.jsx(ad,{size:14,strokeWidth:1.5}),label:"Command palette",hotkey:"global.commandPalette",handle:()=>y(CN)},{icon:c.jsx(Pm,{size:14,strokeWidth:1.5}),label:"User settings",handle:()=>v(SN)},{icon:c.jsx(Bp,{size:14,strokeWidth:1.5}),label:"Keyboard shortcuts",hotkey:"global.showHelp",handle:()=>C(kN)},{icon:c.jsx(XS,{size:14,strokeWidth:1.5}),label:"Open documentation",handle:vN},{icon:c.jsx(Nc,{size:14,strokeWidth:1.5}),label:"Resources",handle:Qs,dropdown:[{icon:c.jsx(XS,{size:14,strokeWidth:1.5}),label:"Documentation",handle:wN},{icon:c.jsx(QH,{size:14,strokeWidth:1.5}),label:"GitHub",handle:yN},{icon:c.jsx(eW,{size:14,strokeWidth:1.5}),label:"Discord Community",handle:xN},{icon:c.jsx(tW,{size:14,strokeWidth:1.5}),label:"YouTube",handle:bN},{icon:c.jsx(ym,{size:14,strokeWidth:1.5}),label:"Changelog",handle:_N}]},{divider:!0,icon:c.jsx(Fp,{size:14,strokeWidth:1.5}),label:"Return home",hidden:!location.search.includes("file"),handle:gN},{icon:c.jsx(ja,{size:14,strokeWidth:1.5}),label:"New notebook",hidden:!location.search.includes("file"),handle:pN},{icon:c.jsx(ig,{size:14,strokeWidth:1.5}),label:"Restart kernel",variant:"danger",handle:p}].filter(mN).map(hN),t[5]=N,t[6]=f,t[7]=o,t[8]=_,t[9]=x,t[10]=g,t[11]=e,t[12]=S,t[13]=E,t[14]=l,t[15]=a,t[16]=n,t[17]=p,t[18]=b,t[19]=j,t[20]=s,t[21]=y,t[22]=C,t[23]=T,t[24]=v,t[25]=P,t[26]=B,t[27]=D,t[28]=k,t[29]=r,t[30]=A,t[31]=h,t[32]=u,t[33]=m,t[34]=i.mode,t[35]=$):$=t[35],$}function hN(t){return t.dropdown?{...t,dropdown:t.dropdown.filter(fN)}:t}function fN(t){return!t.hidden}function mN(t){return!t.hidden}function pN(){const t=WB();window.open(t,"_blank")}function gN(){const t=document.baseURI.split("?")[0];window.open(t,"_self")}function _N(){window.open(Zn.releasesPage,"_blank")}function bN(){window.open(Zn.youtube,"_blank")}function xN(){window.open(Zn.discordLink,"_blank")}function yN(){window.open(Zn.githubPage,"_blank")}function wN(){window.open(Zn.docsPage,"_blank")}function vN(){window.open(Zn.docsPage,"_blank")}function kN(t){return!t}function SN(t){return!t}function CN(t){return!t}function NN(t){return[t,{disabled:!0}]}function jN(t){return[t,{disabled:!1}]}async function EN(){const t=await Lm();await _n(t.contents),nt({title:"Copied",description:"Code copied to clipboard."})}async function IN(){const t=new Event("export-beforeprint"),e=new Event("export-afterprint");window.dispatchEvent(t),setTimeout(AN,0),setTimeout(()=>window.dispatchEvent(e),0)}function AN(){return window.print()}async function TN(){const t=document.getElementById("App");t&&await e4(t,document.title)}async function MN(){const t=await Lm();ia(new Blob([t.contents],{type:"text/plain"}),S4.toPY(document.title))}async function ON(){const t=await HB({download:!1});ia(new Blob([t],{type:"text/plain"}),S4.toMarkdown(document.title))}async function DN(){const t=await Lm(),e=$B({code:t.contents});await _n(e),nt({title:"Copied",description:"Link copied to clipboard."})}function RN(t){return c.jsx("div",{className:"w-8 flex justify-end",children:t&&c.jsx(Cc,{size:14})})}const PN=t=>{const e=K.c(28),{disabled:n,tooltip:o}=t,r=n!==void 0&&n,s=o===void 0?"Actions":o,i=Gg();let a,l,d;e[0]!==s?(a=c.jsx("div",{children:s}),e[0]=s,e[1]=a):a=e[1],e[2]!==r?(l=!r&&c.jsxs("div",{className:"text-xs text-muted-foreground font-medium pt-1 -mt-2 border-t border-border flex items-center gap-2",children:[c.jsx("span",{children:"Open command palette"}),on("global.commandPalette",!1)]}),e[2]=r,e[3]=l):l=e[3],e[4]!==a||e[5]!==l?(d=c.jsxs("div",{className:"flex flex-col gap-2",children:[a,l]}),e[4]=a,e[5]=l,e[6]=d):d=e[6];const u=d,h=r?"disabled":"hint-green";let f,m,_;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(mW,{strokeWidth:1.8}),e[7]=f):f=e[7],e[8]!==u?(m=c.jsx(Te,{content:u,children:f}),e[8]=u,e[9]=m):m=e[9],e[10]!==r||e[11]!==h||e[12]!==m?(_=c.jsx(xn,{"aria-label":"Config",shape:"circle",size:"small",className:"h-[27px] w-[27px]","data-testid":"notebook-menu-dropdown",disabled:r,color:h,children:m}),e[10]=r,e[11]=h,e[12]=m,e[13]=_):_=e[13];const g=_,p=LN;let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b=j=>{const T=c.jsx(Vt,{variant:j.variant,disabled:j.disabled,onSelect:A=>j.handle(A),"data-testid":`notebook-menu-dropdown-${j.label}`,children:p(j)},j.label);return j.tooltip?c.jsx(Te,{content:j.tooltip,side:"left",delayDuration:100,children:c.jsx("span",{children:T})},j.label):T},e[14]=b):b=e[14];const x=b;let y,v,C,S,E,N;if(e[15]!==g||e[16]!==r?(y=c.jsx(fr,{asChild:!0,disabled:r,children:g}),e[15]=g,e[16]=r,e[17]=y):y=e[17],e[18]!==i){let j;e[20]===Symbol.for("react.memo_cache_sentinel")?(j=T=>T.hidden?null:T.dropdown?c.jsxs(GB,{children:[c.jsx(YB,{"data-testid":`notebook-menu-dropdown-${T.label}`,children:p(T)}),c.jsx(JB,{children:c.jsx(KB,{children:T.dropdown.map(A=>c.jsxs(X.Fragment,{children:[A.divider&&c.jsx(bn,{}),x(A)]},A.label))})})]},T.label):c.jsxs(X.Fragment,{children:[T.divider&&c.jsx(bn,{}),x(T)]},T.label),e[20]=j):j=e[20],v=i.map(j),e[18]=i,e[19]=v}else v=e[19];return e[21]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx(bn,{}),e[21]=C):C=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx("div",{className:"flex-1 px-2 text-xs text-muted-foreground",children:c.jsxs("span",{children:["Version: ",C4()]})}),e[22]=S):S=e[22],e[23]!==v?(E=c.jsxs(mr,{align:"end",className:"no-print w-[240px]",children:[v,C,S]}),e[23]=v,e[24]=E):E=e[24],e[25]!==y||e[26]!==E?(N=c.jsxs(hr,{modal:!1,children:[y,E]}),e[25]=y,e[26]=E,e[27]=N):N=e[27],N};function LN(t){return c.jsxs(c.Fragment,{children:[t.icon&&c.jsx("span",{className:"flex-0 mr-2",children:t.icon}),c.jsx("span",{className:"flex-1",children:t.labelElement||t.label}),t.hotkey&&c.jsx(XB,{shortcut:t.hotkey,className:"ml-4"}),t.rightElement]})}function jd(t){return zo("create"in t,'Expected query to have a "create" method'),t}const en=ZB({findText:"",replaceText:"",caseSensitive:!1,wholeWord:!1,regexp:!1,isOpen:!1,currentView:void 0},(t,e)=>{if(e===void 0)return t;switch(e.type){case"setFind":return{...t,findText:e.find};case"setReplace":return{...t,replaceText:e.replace};case"setCaseSensitive":return{...t,caseSensitive:e.caseSensitive};case"setWholeWord":return{...t,wholeWord:e.wholeWord};case"setRegex":return{...t,regexp:e.regexp};case"setIsOpen":return{...t,isOpen:e.isOpen};case"setCurrentView":return{...t,currentView:{view:e.view,range:e.range}};case"clearCurrentView":return{...t,currentView:void 0}}});function Yg(t){if([...document.querySelectorAll('[role="dialog"][data-state="open"]')].some(e=>e instanceof HTMLElement&&e.childNodes.length>0))return!1;if(t){const e=t.state.selection.main,n=t.state.sliceDoc(e.from,e.to);n?(at.set(en,{type:"setFind",find:n}),at.set(en,{type:"setCurrentView",view:t,range:{from:e.from,to:e.to}})):at.set(en,{type:"setCurrentView",view:t,range:{from:0,to:0}})}return at.get(en).isOpen?(at.set(en,{type:"setIsOpen",isOpen:!1}),requestAnimationFrame(()=>{at.set(en,{type:"setIsOpen",isOpen:!0})}),!0):(at.set(en,{type:"setIsOpen",isOpen:!0}),!0)}function FN(){return!!at.get(en).isOpen&&(at.set(en,{type:"setIsOpen",isOpen:!1}),!0)}function Fa(t){return()=>{const e=at.get(en),n=new jc({search:e.findText,caseSensitive:e.caseSensitive,regexp:e.regexp,replace:e.replaceText,wholeWord:e.wholeWord});return!!n.valid&&t({query:jd(n).create(),search:n})}}const Jg=t=>Fa(({query:e})=>{const n=Ps(),o=at.get(en).currentView||{view:n[0],range:{from:0,to:0}};let r=o.range.to;t==="prev"&&(n.reverse(),r=o.range.from);let s=n.indexOf(o.view);s<0&&(s=0);const i=[...n,...n].slice(s);for(const a of i){const l=t==="next"?e.nextMatch(a.state,0,r??0):e.prevMatch(a.state,r??a.state.doc.length,a.state.doc.length);if(!l){r=null,a.dispatch({selection:Bo.single(0)});continue}const d=Bo.single(l.from,l.to);return a.dispatch({selection:d,effects:[et.scrollIntoView(d.main,{y:"center"})],userEvent:"select.search"}),at.set(en,{type:"setCurrentView",view:a,range:{from:l.from,to:l.to}}),l}return!1}),Ed=Jg("next"),Kg=Jg("prev"),zN=Fa(({query:t})=>{var o;const e=Ps(),n=[];for(const r of e){if(r.state.readOnly)continue;const s=(o=t.matchAll(r.state,1e9))==null?void 0:o.map(a=>{const{from:l,to:d}=a;return{from:l,to:d,insert:t.getReplacement(a)}});if(!s||s.length===0)continue;const i=r.state.doc.toString();n.push(()=>{r.dispatch({changes:[{from:0,to:r.state.doc.length,insert:i}],userEvent:"input.replace.all"})}),r.dispatch({changes:s,userEvent:"input.replace.all"})}return()=>{for(const r of n)r()}}),BN=Fa(({query:t})=>{const e=Ps(),n=at.get(en).currentView||{view:e[0],range:{from:0}};let o=n.range.from,r=e.indexOf(n.view);r<0&&(r=0);const s=[...e,...e].slice(r);for(const i of s){const a=t.nextMatch(i.state,0,o??0);if(!a){o=null,i.dispatch({selection:Bo.single(0)});continue}const l=i.state.toText(t.getReplacement(a));return i.dispatch({changes:[{from:a.from,to:a.to,insert:l}],userEvent:"input.replace"}),Ed()}return!1}),UN=Fa(({query:t})=>{const e=Ps();let n=0;const o=new Map;for(const r of e){const s=t.matchAll(r.state,1e9)||[];for(const i of s){const{from:a,to:l}=i,d=o.get(r)||new Map;d.set(`${a}:${l}`,n++),o.set(r,d)}}return{count:n,position:o}}),Id=Dt.define();function Xg(){const t=Ps();for(const e of t)e.state.readOnly||e.dispatch({effects:Id.of(new jc({search:""}))})}const za=In.define({create(){const t=at.get(en);return jd(new jc({search:t.findText,caseSensitive:t.caseSensitive,regexp:t.regexp,replace:t.replaceText,wholeWord:t.wholeWord})).create()},update(t,e){for(const n of e.effects)n.is(Id)&&(t=jd(n.value).create());return t}}),VN=dt.mark({class:"cm-searchMatch"}),$N=dt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),HN=En.fromClass(class{constructor(t){this.view=t,this.decorations=void 0,this.decorations=this.highlight(t.state.field(za))}update(t){const e=t.state.field(za);(e!==t.startState.field(za)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight(t){if(!t.spec.valid)return dt.none;const{view:e}=this,n=new Ls,o=e.visibleRanges,r=o.length;for(let s=0;s<r;s++){let{to:i}=o[s];const{from:a}=o[s];for(;s<r-1&&i>o[s+1].from-500;)i=o[++s].to;t.highlight(e.state,a,i,(l,d)=>{const u=e.state.selection.ranges.some(h=>h.from===l&&h.to===d);n.add(l,d,u?$N:VN)})}return n.finish()}},{decorations:t=>t.decorations}),WN=et.baseTheme({"&light .cm-searchMatch":{backgroundColor:"#99ff7780"},"&dark .cm-searchMatch":{backgroundColor:"#22bb0070"},"&light .cm-searchMatch-selected":{backgroundColor:"transparent"},"&dark .cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff88 !important"}}),qN=()=>{var He;const t=K.c(102),[e,n]=O.useState(!1),[o,r]=Qt(en),[s,i]=O.useState(),a=O.useRef(null),l=Le(mc);let d,u;t[0]!==e||t[1]!==o.isOpen?(d=()=>(!e||!o.isOpen)&&Yg(),t[0]=e,t[1]=o.isOpen,t[2]=d):d=t[2],Jt("cell.findAndReplace",d),t[3]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const Fe=UN();i(Fe===!1?void 0:Fe)},t[3]=u):u=t[3];const h=u;let f,m,_,g;if(t[4]!==o.isOpen?(f=()=>{o.isOpen&&a.current&&(a.current.focus(),a.current.select())},m=[o.isOpen],t[4]=o.isOpen,t[5]=f,t[6]=m):(f=t[5],m=t[6]),O.useEffect(f,m),t[7]!==o.findText||t[8]!==o.isOpen?(_=()=>{if(o.isOpen){if(o.findText==="")return i(void 0),void Xg();h(),function(){const Fe=at.get(en),it=Ps();for(const Qe of it)Qe.state.readOnly||Qe.dispatch({effects:Id.of(new jc({search:Fe.findText,caseSensitive:Fe.caseSensitive,regexp:Fe.regexp,replace:Fe.replaceText,wholeWord:Fe.wholeWord}))})}()}else Xg()},t[7]=o.findText,t[8]=o.isOpen,t[9]=_):_=t[9],t[10]!==o.caseSensitive||t[11]!==o.findText||t[12]!==o.isOpen||t[13]!==o.regexp||t[14]!==o.wholeWord?(g=[o.findText,o.isOpen,o.caseSensitive,o.regexp,o.wholeWord],t[10]=o.caseSensitive,t[11]=o.findText,t[12]=o.isOpen,t[13]=o.regexp,t[14]=o.wholeWord,t[15]=g):g=t[15],O.useEffect(_,g),!o.isOpen)return null;const p=o.currentView;let b;t[16]!==s||t[17]!==p?(b=p&&s?(He=s.position.get(p.view))==null?void 0:He.get(`${p.range.from}:${p.range.to}`):void 0,t[16]=s,t[17]=p,t[18]=b):b=t[18];const x=b;let y,v,C,S,E,N,j,T,A,M,P;t[19]===Symbol.for("react.memo_cache_sentinel")?(y=()=>n(!0),t[19]=y):y=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(v=()=>n(!1),t[20]=v):v=t[20],t[21]!==r?(C=Fe=>{Fe.key==="Escape"&&r({type:"setIsOpen",isOpen:!1})},t[21]=r,t[22]=C):C=t[22],t[23]!==r?(S=()=>r({type:"setIsOpen",isOpen:!1}),t[23]=r,t[24]=S):S=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(E=c.jsx(eo,{className:"w-4 h-4"}),t[25]=E):E=t[25],t[26]!==S?(N=c.jsx("div",{className:"absolute top-0 right-0",children:c.jsx(Ae,{"data-testid":"close-find-replace-button",onClick:S,size:"xs",variant:"text",children:E})}),t[26]=S,t[27]=N):N=t[27],t[28]!==r?(j=Fe=>{r({type:"setFind",find:Fe.target.value})},t[28]=r,t[29]=j):j=t[29],t[30]!==o.findText||t[31]!==j?(T=c.jsx(ir,{ref:a,"data-testid":"find-input",value:o.findText,autoFocus:!0,className:"mr-2 mb-0",placeholder:"Find",onKeyDown:YN,onChange:j}),t[30]=o.findText,t[31]=j,t[32]=T):T=t[32],t[33]!==r?(A=Fe=>{r({type:"setReplace",replace:Fe.target.value})},t[33]=r,t[34]=A):A=t[34],t[35]!==o.replaceText||t[36]!==A?(M=c.jsx(ir,{"data-testid":"replace-input",value:o.replaceText,placeholder:"Replace",onChange:A}),t[35]=o.replaceText,t[36]=A,t[37]=M):M=t[37],t[38]!==T||t[39]!==M?(P=c.jsxs("div",{className:"flex flex-col flex-2 gap-2 w-[55%]",children:[T,M]}),t[38]=T,t[39]=M,t[40]=P):P=t[40];const R=o.caseSensitive?"on":"off";let L,B,U;t[41]!==r?(L=Fe=>r({type:"setCaseSensitive",caseSensitive:Fe}),t[41]=r,t[42]=L):L=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(B=c.jsx(QB,{className:"w-4 h-4"}),t[43]=B):B=t[43],t[44]!==o.caseSensitive||t[45]!==R||t[46]!==L?(U=c.jsx(Te,{content:"Case Sensitive",children:c.jsx(Fm,{size:"sm",pressed:o.caseSensitive,"data-state":R,onPressedChange:L,children:B})}),t[44]=o.caseSensitive,t[45]=R,t[46]=L,t[47]=U):U=t[47];const D=o.wholeWord?"on":"off";let k,$,I;t[48]!==r?(k=Fe=>r({type:"setWholeWord",wholeWord:Fe}),t[48]=r,t[49]=k):k=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?($=c.jsx(ug,{className:"w-4 h-4"}),t[50]=$):$=t[50],t[51]!==o.wholeWord||t[52]!==D||t[53]!==k?(I=c.jsx(Te,{content:"Match Whole Word",children:c.jsx(Fm,{size:"sm",pressed:o.wholeWord,"data-state":D,onPressedChange:k,children:$})}),t[51]=o.wholeWord,t[52]=D,t[53]=k,t[54]=I):I=t[54];const W=o.regexp?"on":"off";let G,q,Y,ee,oe;t[55]!==r?(G=Fe=>r({type:"setRegex",regexp:Fe}),t[55]=r,t[56]=G):G=t[56],t[57]===Symbol.for("react.memo_cache_sentinel")?(q=c.jsx(Xp,{className:"w-4 h-4"}),t[57]=q):q=t[57],t[58]!==o.regexp||t[59]!==W||t[60]!==G?(Y=c.jsx(Te,{content:"Use Regular Expression",children:c.jsx(Fm,{size:"sm",pressed:o.regexp,"data-state":W,onPressedChange:G,children:q})}),t[58]=o.regexp,t[59]=W,t[60]=G,t[61]=Y):Y=t[61],t[62]!==U||t[63]!==I||t[64]!==Y?(ee=c.jsxs("div",{className:"flex items-center gap-[2px]",children:[U,I,Y]}),t[62]=U,t[63]=I,t[64]=Y,t[65]=ee):ee=t[65],t[66]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>{BN()&&h()},t[66]=oe):oe=t[66];const ie=o.findText==="";let Z,Q;t[67]!==ie?(Z=c.jsx(Ae,{"data-testid":"replace-next-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:oe,disabled:ie,children:"Replace Next"}),t[67]=ie,t[68]=Z):Z=t[68],t[69]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>{const Fe=zN();if(!Fe)return;h();const{dismiss:it}=nt({title:"Replaced all occurrences",action:c.jsx(Da,{"data-testid":"undo-replace-all-button",onClick:()=>{Fe(),Qe()}})}),Qe=it},t[69]=Q):Q=t[69];const me=o.findText==="";let fe,de,ue,ce,ke,Se,ae,Ce,_e,Ee,ze,Oe;return t[70]!==me?(fe=c.jsx(Ae,{"data-testid":"replace-all-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:Q,disabled:me,children:"Replace All"}),t[70]=me,t[71]=fe):fe=t[71],t[72]!==Z||t[73]!==fe?(de=c.jsxs("div",{className:"flex items-center gap-[2px]",children:[Z,fe]}),t[72]=Z,t[73]=fe,t[74]=de):de=t[74],t[75]!==ee||t[76]!==de?(ue=c.jsxs("div",{className:"flex flex-col gap-2",children:[ee,de]}),t[75]=ee,t[76]=de,t[77]=ue):ue=t[77],t[78]!==P||t[79]!==ue?(ce=c.jsxs("div",{className:"flex items-center gap-3",children:[P,ue]}),t[78]=P,t[79]=ue,t[80]=ce):ce=t[80],t[81]===Symbol.for("react.memo_cache_sentinel")?(ke=c.jsx(Te,{content:"Find Previous",children:c.jsx(Ae,{"data-testid":"find-prev-button",size:"xs",variant:"secondary",onClick:JN,children:c.jsx(It,{className:"w-4 h-4"})})}),t[81]=ke):ke=t[81],t[82]===Symbol.for("react.memo_cache_sentinel")?(Se=c.jsx(Te,{content:"Find Next",children:c.jsx(Ae,{"data-testid":"find-next-button",size:"xs",variant:"secondary",onClick:KN,children:c.jsx(sd,{className:"w-4 h-4"})})}),t[82]=Se):Se=t[82],t[83]!==x||t[84]!==s?(ae=s!=null&&x==null&&c.jsxs("span",{className:"text-sm",children:[s.count," matches"]}),t[83]=x,t[84]=s,t[85]=ae):ae=t[85],t[86]!==x||t[87]!==s?(Ce=s!=null&&x!=null&&c.jsxs("span",{className:"text-sm",children:[x+1," of ",s.count]}),t[86]=x,t[87]=s,t[88]=Ce):Ce=t[88],t[89]!==ae||t[90]!==Ce?(_e=c.jsxs("div",{className:"flex items-center gap-2",children:[ke,Se,ae,Ce]}),t[89]=ae,t[90]=Ce,t[91]=_e):_e=t[91],t[92]!==l?(Ee=l.getHotkey("cell.findAndReplace"),t[92]=l,t[93]=Ee):Ee=t[93],t[94]!==Ee.key?(ze=c.jsxs("div",{className:"text-xs text-muted-foreground flex gap-1 mt-2",children:["Press"," ",c.jsx(Em,{shortcut:Ee.key})," ","again to open the native browser search."]}),t[94]=Ee.key,t[95]=ze):ze=t[95],t[96]!==N||t[97]!==ce||t[98]!==_e||t[99]!==ze||t[100]!==C?(Oe=c.jsx(eU,{restoreFocus:!0,autoFocus:!0,children:c.jsxs("div",{onFocus:y,onClick:GN,onBlur:v,className:"fixed top-0 right-0 w-[500px] flex flex-col bg-[var(--sage-1)] p-4 z-50 mt-2 mr-3 rounded-md shadow-lg border gap-2 print:hidden",onKeyDown:C,children:[N,ce,_e,ze]})}),t[96]=N,t[97]=ce,t[98]=_e,t[99]=ze,t[100]=C,t[101]=Oe):Oe=t[101],Oe};function GN(t){t.stopPropagation(),t.preventDefault()}function YN(t){t.key==="Enter"&&(t.shiftKey?Kg():Ed())}function JN(){return Kg()}function KN(){return Ed()}const Zg=t=>{const e=K.c(38),{resetOnBlur:n,placeholderText:o,initialValue:r,flexibleWidth:s,onNameChange:i,className:a}=t,l=n!==void 0&&n,d=r===void 0?null:r,u=s!==void 0&&s,[h,f]=O.useState(d);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[0]=m):m=e[0];const[_,g]=O.useState(m),[p,b]=O.useState(!1),x=O.useRef(null),y=O.useRef(!1);let v,C,S;e[1]!==d?(v=()=>{f(d)},C=[d],e[1]=d,e[2]=v,e[3]=C):(v=e[2],C=e[3]),O.useEffect(v,C),e[4]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{b(!0)},e[4]=S):S=e[4];const E=S;let N;e[5]!==d||e[6]!==l?(N=Q=>{var me;(me=Q.relatedTarget)!=null&&me.closest(".filename-input")||(b(!1),l&&f(d))},e[5]=d,e[6]=l,e[7]=N):N=e[7];const j=N;let T;e[8]!==h?(T=jn.dirname(h||""),e[8]=h,e[9]=T):T=e[9];const A=T,M=jn.basename(h||""),P=_.filter(Q=>jn.basename(Q.path).startsWith(M));let R,L;e[10]!==A||e[11]!==p?(R=async()=>{if(!p)return void g([]);const Q=await E4({path:A});g(Q.files)},L=[A,p],e[10]=A,e[11]=p,e[12]=R,e[13]=L):(R=e[12],L=e[13]);const{isPending:B}=Wn(R,L),U=function(Q,me,fe){if(Q&&!Q.endsWith("/")&&((Mm("markdown")?new Set(["py","md","markdown","qmd"]):new Set(["py"])).has(jn.extension(Q))||(Q=Q.endsWith(".")?`${Q}py`:Q.endsWith(".p")?`${Q}y`:`${Q}.py`),!me.some(de=>de.path===Q||jn.basename(de.path)===Q)&&!(fe&&(fe===Q||jn.basename(fe)===Q))))return Q}(h,_,d),D=(U||P.length>0)&&c.jsxs(Nm,{className:"font-mono",children:[!B&&c.jsx(gc,{children:"No files"}),U&&c.jsxs(mo,{variant:"success",className:"py-2 px-3",onSelect:()=>{var Q;U&&(y.current=!0,i(U),(Q=x.current)==null||Q.blur())},children:[c.jsx(Mp,{className:"w-4 h-4 mr-2"})," ",c.jsxs("span",{className:"text-sm",children:[d?"Rename to: ":"Save as: ",c.jsx("span",{className:"font-medium text-sm",children:jn.basename(U)})]})]},"_rename_"),P.map(Q=>{const me=Q.isDirectory?"directory":N4(Q.path),fe=j4[me];return c.jsxs(mo,{variant:Q.isDirectory?"default":"muted",className:"py-2 px-3",onSelect:()=>{Q.isDirectory?f(`${Q.path}/`):f(Q.path)},children:[c.jsx(fe,{className:"w-4 h-4 mr-2"})," ",jn.basename(Q.path)]},Q.path)})]}),k=10*Math.max(20,(h==null?void 0:h.length)||(o==null?void 0:o.length)||0),$=p?h||"":d||"";let I,W,G;e[14]!==u||e[15]!==k?(I=u?{maxWidth:k}:void 0,e[14]=u,e[15]=k,e[16]=I):I=e[16],e[17]!==a?(W=Ne(a,"w-full px-4 py-1 my-1 h-9 font-mono text-foreground/60"),e[17]=a,e[18]=W):W=e[18],e[19]!==o||e[20]!==$||e[21]!==I||e[22]!==W?(G=c.jsx(tU,{children:c.jsx(na,{"data-testid":"dir-completion-input",tabIndex:-1,rootClassName:"border-none justify-center px-1",spellCheck:"false",value:$,onKeyDown:XN,icon:null,ref:x,onValueChange:f,placeholder:o,autoComplete:"off",style:I,className:W})}),e[19]=o,e[20]=$,e[21]=I,e[22]=W,e[23]=G):G=e[23];const q=D&&"group-focus-within:block";let Y,ee,oe,ie,Z;return e[24]!==q?(Y=Ne("p-0 w-full min-w-80 max-w-80vw hidden",q),e[24]=q,e[25]=Y):Y=e[25],e[26]!==D||e[27]!==Y?(ee=c.jsx(Fs,{side:"bottom",className:Y,portal:!1,children:D}),e[26]=D,e[27]=Y,e[28]=ee):ee=e[28],e[29]!==G||e[30]!==ee?(oe=c.jsxs(Nm,{children:[G,ee]}),e[29]=G,e[30]=ee,e[31]=oe):oe=e[31],e[32]!==j||e[33]!==oe?(ie=c.jsx(Ec,{onFocus:E,onBlur:j,shouldFilter:!1,id:"filename-input",className:"bg-transparent group filename-input",children:oe}),e[32]=j,e[33]=oe,e[34]=ie):ie=e[34],e[35]!==p||e[36]!==ie?(Z=c.jsx(Ic,{children:c.jsx(Ur,{open:p,modal:!1,children:ie})}),e[35]=p,e[36]=ie,e[37]=Z):Z=e[37],Z};function XN(t){t.key==="Escape"&&t.currentTarget.blur()}const ZN=t=>{const e=K.c(33),n=()=>{ia(new Blob([o()],{type:"text/plain"}),`${t.proposedName}.json`)},o=qe(tj);let r,s,i,a,l,d,u,h,f,m,_,g,p,b,x,y,v;return e[0]!==n||e[1]!==t?(r=C=>{C.preventDefault(),n(),t.closeModal()},e[0]=n,e[1]=t,e[2]=r):r=e[2],e[3]!==t?(s=C=>{C.key==="Escape"&&t.closeModal()},e[3]=t,e[4]=s):s=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(sr,{className:"text-accent-foreground mb-6",children:"Download unsaved changes?"}),e[5]=i):i=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(a={wordBreak:"break-word"},e[6]=a):a=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("p",{children:"This app has unsaved changes. To recover:"}),d={paddingBottom:"10px"},e[7]=l,e[8]=d):(l=e[7],d=e[8]),e[9]!==t.proposedName?(u=c.jsxs("li",{style:d,children:['Click the "Download" button. This will download a file called\xA0',c.jsxs("code",{children:[t.proposedName,".json"]}),". This file contains your code."]}),e[9]=t.proposedName,e[10]=u):u=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(h={paddingBottom:"10px"},e[11]=h):h=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(f={display:"block",padding:"10px"},e[12]=f):f=e[12],e[13]!==t.proposedName?(m=c.jsxs("code",{style:f,children:["marimo recover ",t.proposedName,".json ",">"," ",t.proposedName,".py"]}),e[13]=t.proposedName,e[14]=m):m=e[14],e[15]!==t.proposedName?(_=c.jsxs("code",{children:[t.proposedName,".py"]}),e[15]=t.proposedName,e[16]=_):_=e[16],e[17]!==_||e[18]!==m?(g=c.jsxs("li",{style:h,children:["In your terminal, type",m,"to overwrite ",_," with the recovered changes."]}),e[17]=_,e[18]=m,e[19]=g):g=e[19],e[20]!==g||e[21]!==u?(p=c.jsx(Ms,{className:"markdown break-words",style:a,children:c.jsxs("div",{className:"prose dark:prose-invert",children:[l,c.jsxs("ol",{children:[u,g]})]})}),e[20]=g,e[21]=u,e[22]=p):p=e[22],e[23]!==t.closeModal?(b=c.jsx(Ae,{"aria-label":"Cancel",variant:"secondary","data-testid":"cancel-recovery-button",onClick:t.closeModal,children:"Cancel"}),e[23]=t.closeModal,e[24]=b):b=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(x=c.jsx(Ae,{"data-testid":"download-recovery-button","aria-label":"Download",variant:"default",type:"submit",children:"Download"}),e[25]=x):x=e[25],e[26]!==b?(y=c.jsxs(Ki,{children:[b,x]}),e[26]=b,e[27]=y):y=e[27],e[28]!==r||e[29]!==s||e[30]!==p||e[31]!==y?(v=c.jsx(ar,{className:"w-fit",children:c.jsxs("form",{onSubmit:r,onKeyDown:s,children:[i,p,y]})}),e[28]=r,e[29]=s,e[30]=p,e[31]=y,e[32]=v):v=e[32],v},QN=t=>{const e=K.c(12),{filename:n,needsSave:o}=t,{openModal:r,closeModal:s}=$n();let i;e[0]!==n?(i=n===null?"app":jn.basename(n).split(".")[0],e[0]=n,e[1]=i):i=e[1];const a=i;let l;e[2]!==s||e[3]!==o||e[4]!==r||e[5]!==a?(l=()=>{o&&r(c.jsx(ZN,{proposedName:a,closeModal:s}))},e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l):l=e[6];const d=l;let u;Jt("global.save",d),e[7]===Symbol.for("react.memo_cache_sentinel")?(u=on("global.save"),e[7]=u):u=e[7];const h=o?"yellow":"gray";let f,m;return e[8]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(Ia,{strokeWidth:1.5,size:18}),e[8]=f):f=e[8],e[9]!==d||e[10]!==h?(m=c.jsx(Te,{content:u,children:c.jsx(xn,{onClick:d,id:"save-button","aria-label":"Save",className:"rectangle",color:h,children:f})}),e[9]=d,e[10]=h,e[11]=m):m=e[11],m};function ej(t){return{id:t.id,name:t.name,code:t.code,code_hash:null,config:{column:0,...t.config}}}function tj(){const t=Nn(),e=zm(t),n={version:"1",metadata:{marimo_version:C4()},cells:e.map(ej)};return JSON.stringify(n,null,2)}const Ad=5e3;async function nj(){await sU({download:!1})}async function oj(){await rU({download:!1,includeCode:!0,files:tC.INSTANCE.filenames()})}async function rj(){await oU({download:!1})}const Td=zt(void 0),Qg=zt(t=>{const e=t(Td);return function({state:n,layout:o,lastSavedNotebook:r}){if(!r)return!1;const{cellIds:s,cellData:i}=n,a=s.inOrderIds.map(h=>i[h]),l=a.map(h=>h.code),d=a.map(h=>h.config),u=a.map(h=>h.name);return!(I4(l,r.codes)&&I4(u,r.names)&&aa(d,r.configs)&&aa(o.selectedLayout,r.layout.selectedLayout)&&aa(o.layoutData,r.layout.layoutData))}({state:t(cr),layout:t(cC),lastSavedNotebook:e})});function sj(t){return JSON.stringify(t)}const ij=t=>{const e=K.c(15),{kioskMode:n}=t,o=Dm(),r=Le(Qg),s=Le(hn).state===$t.CLOSED,{saveOrNameNotebook:i,saveIfNotebookIsPersistent:a}=Md();let l,d,u;e[0]!==n||e[1]!==a?(l={onSave:a,kioskMode:n},e[0]=n,e[1]=a,e[2]=l):l=e[2],function(p){const b=K.c(14),x=Le(O4),y=Ac(),[v]=Qt(hn),C=Le(Qg);let S,E;if(b[0]!==y){const M=zm(y);S=M.map(uj),E=M.map(dj),b[0]=y,b[1]=S,b[2]=E}else S=b[1],E=b[2];const N=E;let j;b[3]!==y?(j=M4(y),b[3]=y,b[4]=j):j=b[4];const T=j;let A;b[5]!==x||b[6]!==N||b[7]!==S||b[8]!==T||b[9]!==v||b[10]!==C||b[11]!==p.kioskMode||b[12]!==p.onSave?(A={onSave:p.onSave,needsSave:C,codes:S,cellConfigs:T,cellNames:N,connStatus:v,config:x,kioskMode:p.kioskMode},b[5]=x,b[6]=N,b[7]=S,b[8]=T,b[9]=v,b[10]=C,b[11]=p.kioskMode,b[12]=p.onSave,b[13]=A):A=b[13],function(M){const P=K.c(21),{codes:R,cellConfigs:L,config:B,connStatus:U,cellNames:D,needsSave:k,kioskMode:$,onSave:I}=M,W=O.useRef(null);let G;P[0]!==R?(G=R.join(":"),P[0]=R,P[1]=G):G=P[1];const q=G;let Y;P[2]!==L?(Y=L.map(sj).join(":"),P[2]=L,P[3]=Y):Y=P[3];const ee=Y;let oe;P[4]!==D?(oe=D.join(":"),P[4]=D,P[5]=oe):oe=P[5];const ie=oe;let Z,Q;P[6]!==B||P[7]!==U.state||P[8]!==$||P[9]!==k||P[10]!==I?(Z=()=>{if(!$)return B.autosave==="after_delay"&&(W.current!==null&&clearTimeout(W.current),k&&U.state===$t.OPEN&&(W.current=setTimeout(I,B.autosave_delay))),()=>{W.current!==null&&clearTimeout(W.current)}},P[6]=B,P[7]=U.state,P[8]=$,P[9]=k,P[10]=I,P[11]=Z):Z=P[11],P[12]!==ee||P[13]!==ie||P[14]!==q||P[15]!==B||P[16]!==U.state||P[17]!==$||P[18]!==k||P[19]!==I?(Q=[q,ee,ie,B,U.state,I,$,k],P[12]=ee,P[13]=ie,P[14]=q,P[15]=B,P[16]=U.state,P[17]=$,P[18]=k,P[19]=I,P[20]=Q):Q=P[20],O.useEffect(Z,Q)}(A)}(l),function(){const p=K.c(6),b=Le(nU),{state:x}=Le(hn),y=b.auto_download.includes("markdown"),v=b.auto_download.includes("html"),C=b.auto_download.includes("ipynb"),S=!y||x!==$t.OPEN,E=!v||x!==$t.OPEN,N=!C||x!==$t.OPEN;let j,T,A;p[0]!==S?(j={delayMs:Ad,whenVisible:!0,disabled:S},p[0]=S,p[1]=j):j=p[1],ya(rj,j),p[2]!==E?(T={delayMs:Ad,whenVisible:!0,disabled:E},p[2]=E,p[3]=T):T=p[3],ya(oj,T),p[4]!==N?(A={delayMs:Ad,whenVisible:!0,disabled:N},p[4]=N,p[5]=A):A=p[5],ya(nj,A)}(),e[3]!==r?(d=p=>{if(r)return p.preventDefault(),p.returnValue="You have unsaved changes. Are you sure you want to leave?",p.returnValue},e[3]=r,e[4]=d):d=e[4],ac(window,"beforeunload",d),e[5]!==i?(u=p=>{p.preventDefault(),p.stopPropagation(),i()},e[5]=i,e[6]=u):u=e[6];const h=u;if(Jt("global.save",i),s){let p;return e[7]!==o||e[8]!==r?(p=c.jsx(QN,{filename:o,needsSave:r}),e[7]=o,e[8]=r,e[9]=p):p=e[9],p}let f;e[10]===Symbol.for("react.memo_cache_sentinel")?(f=on("global.save"),e[10]=f):f=e[10];const m=r?"yellow":"hint-green";let _,g;return e[11]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(Ia,{strokeWidth:1.5,size:18}),e[11]=_):_=e[11],e[12]!==h||e[13]!==m?(g=c.jsx(Te,{content:f,children:c.jsx(xn,{"data-testid":"save-button",id:"save-button",shape:"rectangle",color:m,onClick:h,children:_})}),e[12]=h,e[13]=m,e[14]=g):g=e[14],g};function Md(){const t=K.c(19),{openModal:e,closeModal:n,openAlert:o}=$n(),r=Ot(Td),s=A4(),i=T4();let a;t[0]!==o||t[1]!==r||t[2]!==i?(a=(p,b)=>{const x=Nn(),y=zm(x),v=y.map(cj),C=y.map(lj),S=y.map(aj),E=M4(x),N=i.get(hn),j=i.get(O4),T=i.get(cC);i.get(Os)||C.length!==0&&(N.state===$t.OPEN?(vt.log("saving to ",p),iU({cellIds:v,codes:C,names:S,filename:p,configs:E,layout:pW(),persist:!0}).then(()=>{b&&j.format_on_save&&D4(),r({names:S,codes:C,configs:E,layout:T})})):o("Failed to save notebook: not connected to a kernel."))},t[0]=o,t[1]=r,t[2]=i,t[3]=a):a=t[3];const l=qe(a);let d;t[4]!==l||t[5]!==i?(d=p=>{const b=p!==void 0&&p,x=i.get(R4),y=i.get(hn);e1(x)&&y.state===$t.OPEN&&l(x,b)},t[4]=l,t[5]=i,t[6]=d):d=t[6];const u=qe(d);let h;t[7]!==l||t[8]!==s?(h=p=>{s(p).then(b=>{b!==null&&l(b,!0)})},t[7]=l,t[8]=s,t[9]=h):h=t[9];const f=h;let m;t[10]!==n||t[11]!==f||t[12]!==e||t[13]!==u||t[14]!==i?(m=()=>{const p=i.get(R4),b=i.get(hn);u(!0),e1(p)||b.state===$t.CLOSED||e(c.jsx(hj,{onClose:n,onSave:f}))},t[10]=n,t[11]=f,t[12]=e,t[13]=u,t[14]=i,t[15]=m):m=t[15];const _=qe(m);let g;return t[16]!==u||t[17]!==_?(g={saveOrNameNotebook:_,saveIfNotebookIsPersistent:u},t[16]=u,t[17]=_,t[18]=g):g=t[18],g}function aj(t){return t.name}function lj(t){return t.code}function cj(t){return t.id}function e1(t){return t!==null&&!t.startsWith("/tmp")&&!t.startsWith("/var/folders")&&!t.includes("AppData\\Local\\Temp")}function dj(t){return t.name}function uj(t){return t.code}const hj=t=>{const e=K.c(17),{onClose:n,onSave:o}=t,[r,s]=O.useState();let i;e[0]!==n||e[1]!==o?(i=p=>{s(p),p.trim()&&(o(p),n())},e[0]=n,e[1]=o,e[2]=i):i=e[2];const a=i;let l,d,u,h;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(sr,{children:"Save notebook"}),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(Fr,{className:"text-md pt-6 px-1",children:"Save as"}),e[4]=d):d=e[4],e[5]!==a?(u=c.jsxs("div",{className:"flex flex-col",children:[d,c.jsx(Zg,{onNameChange:a,placeholderText:"filename",className:"missing-filename"})]}),e[5]=a,e[6]=u):u=e[6],e[7]!==n?(h=c.jsx(Ae,{"data-testid":"cancel-save-dialog-button","aria-label":"Cancel",variant:"secondary",onClick:n,children:"Cancel"}),e[7]=n,e[8]=h):h=e[8];const f=!r;let m,_,g;return e[9]!==f?(m=c.jsx(Ae,{"data-testid":"submit-save-dialog-button","aria-label":"Save",variant:"default",disabled:f,type:"submit",children:"Save"}),e[9]=f,e[10]=m):m=e[10],e[11]!==h||e[12]!==m?(_=c.jsxs(Ki,{children:[h,m]}),e[11]=h,e[12]=m,e[13]=_):_=e[13],e[14]!==u||e[15]!==_?(g=c.jsxs(ar,{children:[l,u,_]}),e[14]=u,e[15]=_,e[16]=g):g=e[16],g};function t1(t){const e=K.c(3),[n,o]=O.useState(!1);let r,s;return e[0]!==t?(r=()=>{if(!t)return;o(!1);const i=setTimeout(()=>{o(!0)},200);return()=>clearTimeout(i)},s=[t],e[0]=t,e[1]=r,e[2]=s):(r=e[1],s=e[2]),O.useEffect(r,s),t&&n}const ei=t=>{const{children:e}=t;return Le(Os)?null:e},fj=t=>{const{children:e}=t;return Le(Os)?e:null},mj=()=>{const t=K.c(6),e=Ot(Sd);let n;t[0]!==e?(n=()=>e(pj),t[0]=e,t[1]=n):n=t[1];const o=n;let r,s,i;return t[2]===Symbol.for("react.memo_cache_sentinel")?(r=on("global.commandPalette"),t[2]=r):r=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx(ad,{strokeWidth:1.5,size:18}),t[3]=s):s=t[3],t[4]!==o?(i=c.jsx(Te,{content:r,children:c.jsx(xn,{"data-testid":"command-palette-button",onClick:o,shape:"rectangle",color:"hint-green",children:s})}),t[4]=o,t[5]=i):i=t[5],i};function pj(t){return!t}const gj=t=>{const e=K.c(47),{presenting:n,onTogglePresenting:o,onInterrupt:r,onRun:s,connectionState:i,running:a,appConfig:l}=t,d=l.width,u=Le(v4),h=Le(aU),{undoDeleteCell:f}=bt(),m=i===$t.CLOSED;let _,g=null;if(!m&&u){let k,$;e[0]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsx(bd,{size:16,strokeWidth:1.5}),e[0]=k):k=e[0],e[1]!==f?($=c.jsx(Te,{content:"Undo cell deletion",children:c.jsx(xn,{"data-testid":"undo-delete-cell",size:"medium",color:"hint-green",shape:"circle",onClick:f,children:k})}),e[1]=f,e[2]=$):$=e[2],g=$}e[3]!==i?(_=po(i),e[3]=i,e[4]=_):_=e[4];const p=_;let b;e[5]!==i||e[6]!==p?(b=p?td(i):void 0,e[5]=i,e[6]=p,e[7]=b):b=e[7];const x=b;let y,v;e[8]!==n?(y=!n&&c.jsx(qN,{}),e[8]=n,e[9]=y):y=e[9],e[10]!==m||e[11]!==x||e[12]!==p||e[13]!==n?(v=!m&&c.jsxs("div",{className:xj,children:[n&&c.jsx(lN,{}),c.jsx(PN,{disabled:p,tooltip:x}),c.jsx(nW,{disabled:p,tooltip:x}),c.jsx(oW,{description:"This will terminate the Python kernel. You'll lose all data that's in memory.",disabled:p,tooltip:x})]}),e[10]=m,e[11]=x,e[12]=p,e[13]=n,e[14]=v):v=e[14];const C=d==="compact"&&"xl:flex-row items-end";let S,E,N,j,T,A,M,P,R,L,B,U,D;return e[15]!==C?(S=Ne(yj,C),e[15]=C,e[16]=S):S=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(E=c.jsx(ei,{children:c.jsx(ij,{kioskMode:!1})}),e[17]=E):E=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(N=on("global.hideCode"),e[18]=N):N=e[18],e[19]!==n?(j=n?c.jsx(k4,{strokeWidth:1.5,size:18}):c.jsx(ud,{strokeWidth:1.5,size:18}),e[19]=n,e[20]=j):j=e[20],e[21]!==o||e[22]!==j?(T=c.jsx(Te,{content:N,children:c.jsx(xn,{"data-testid":"hide-code-button",id:"preview-button",shape:"rectangle",color:"hint-green",onClick:o,children:j})}),e[21]=o,e[22]=j,e[23]=T):T=e[23],e[24]===Symbol.for("react.memo_cache_sentinel")?(A=c.jsx(mj,{}),M=c.jsx(rW,{}),P=c.jsx("div",{}),e[24]=A,e[25]=M,e[26]=P):(A=e[24],M=e[25],P=e[26]),e[27]!==m||e[28]!==r||e[29]!==a?(R=!m&&c.jsx(bj,{running:a,onInterrupt:r}),e[27]=m,e[28]=r,e[29]=a,e[30]=R):R=e[30],e[31]!==m||e[32]!==h||e[33]!==s?(L=!m&&c.jsx(_j,{needsRun:h,onRun:s}),e[31]=m,e[32]=h,e[33]=s,e[34]=L):L=e[34],e[35]!==R||e[36]!==L||e[37]!==g?(B=c.jsx(ei,{children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[g,R,L]})}),e[35]=R,e[36]=L,e[37]=g,e[38]=B):B=e[38],e[39]!==T||e[40]!==B||e[41]!==S?(U=c.jsxs("div",{className:S,children:[E,T,A,M,P,B]}),e[39]=T,e[40]=B,e[41]=S,e[42]=U):U=e[42],e[43]!==U||e[44]!==y||e[45]!==v?(D=c.jsxs(c.Fragment,{children:[y,v,U]}),e[43]=U,e[44]=y,e[45]=v,e[46]=D):D=e[46],D},_j=t=>{const e=K.c(8),{needsRun:n,onRun:o}=t,r=Le(P4);if(n){let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=on("global.runStale"),e[0]=l):l=e[0];const d=r?o:void 0,u=!r;let h,f;return e[1]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(Wr,{strokeWidth:1.5,size:16}),e[1]=h):h=e[1],e[2]!==d||e[3]!==u?(f=c.jsx(Te,{content:l,children:c.jsx(xn,{"data-testid":"run-button",size:"medium",color:"yellow",shape:"circle",onClick:d,disabled:u,children:h})}),e[2]=d,e[3]=u,e[4]=f):f=e[4],f}const s=!r;let i,a;return e[5]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(Wr,{strokeWidth:1.5,size:16}),e[5]=i):i=e[5],e[6]!==s?(a=c.jsx(Te,{content:"Nothing to run",children:c.jsx(xn,{"data-testid":"run-button",className:"inactive-button",color:"disabled",size:"medium",shape:"circle",disabled:s,children:i})}),e[6]=s,e[7]=a):a=e[7],a},bj=t=>{const e=K.c(8),{running:n,onInterrupt:o}=t,r=t1(n);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=on("global.interrupt"),e[0]=s):s=e[0];const i=!r&&"inactive-button active:shadow-xsSolid";let a;e[1]!==i?(a=Ne(i),e[1]=i,e[2]=a):a=e[2];const l=r?"yellow":"disabled",d=r?o:Hn.NOOP;let u,h;return e[3]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(vc,{strokeWidth:1.5,size:16}),e[3]=u):u=e[3],e[4]!==a||e[5]!==l||e[6]!==d?(h=c.jsx(Te,{content:s,children:c.jsx(xn,{className:a,"data-testid":"interrupt-button",size:"medium",color:l,shape:"circle",onClick:d,children:u})}),e[4]=a,e[5]=l,e[6]=d,e[7]=h):h=e[7],h},xj="absolute top-3 right-5 m-0 flex items-center space-x-3 min-h-[28px] no-print pointer-events-auto z-30 print:hidden",yj="absolute bottom-5 right-5 flex flex-col gap-2 items-center no-print pointer-events-auto z-30 print:hidden",wj=t=>{const e=K.c(7),{filename:n}=t,o=A4();let r;e[0]!==n?(r=n?jn.basename(n):"untitled marimo notebook",e[0]=n,e[1]=r):r=e[1];const s=n===null?"missing-filename":"filename";let i;return e[2]!==n||e[3]!==o||e[4]!==r||e[5]!==s?(i=c.jsx(Zg,{placeholderText:r,initialValue:n,onNameChange:o,flexibleWidth:!0,resetOnBlur:!0,"data-testid":"filename-input",className:s}),e[2]=n,e[3]=o,e[4]=r,e[5]=s,e[6]=i):i=e[6],i};function n1(){return{selectionStart:null,selectionEnd:null,selected:new Set}}const{valueAtom:Od,useActions:vj}=lU(n1,{select:(t,e)=>({selectionStart:e.cellId,selectionEnd:e.cellId,selected:new Set([e.cellId])}),extend:(t,e)=>{if(!t.selectionStart)return{selectionStart:e.cellId,selectionEnd:e.cellId,selected:new Set([e.cellId])};const{cellId:n,allCellIds:o}=e;try{const r=o.findWithId(t.selectionStart),s=r.indexOfOrThrow(t.selectionStart),i=r.indexOfOrThrow(n),[a,l]=s<i?[s,i]:[i,s],d=r.slice(a,l+1);return{selectionStart:t.selectionStart,selectionEnd:n,selected:new Set(d)}}catch{return{selectionStart:n,selectionEnd:n,selected:new Set([n])}}},clear:t=>t.selected.size===0?t:n1()});function Dd(){return vj()}const kj=t=>{const e=K.c(9),{actions:n,cellIds:o}=t;let r,s,i;if(e[0]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(fr,{asChild:!0,children:c.jsx(Ae,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1",title:"More actions",children:c.jsx(pp,{size:13,strokeWidth:1.5})})}),e[0]=r):r=e[0],e[1]!==n||e[2]!==o){let a;e[4]!==n.length||e[5]!==o?(a=(l,d)=>{const u=l.map(h=>c.jsx(Vt,{onSelect:()=>h.handle(o),className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex items-center gap-2",children:[h.icon,c.jsx("span",{className:"text-xs",children:h.label})]})},h.label));return c.jsxs(X.Fragment,{children:[u,d<n.length-1&&c.jsx(bn,{})]},d)},e[4]=n.length,e[5]=o,e[6]=a):a=e[6],s=n.flatMap(a),e[1]=n,e[2]=o,e[3]=s}else s=e[3];return e[7]!==s?(i=c.jsxs(hr,{children:[r,c.jsx(mr,{align:"start","data-keep-cell-selection":!0,children:s})]}),e[7]=s,e[8]=i):i=e[8],i};function Sj(t){const e=K.c(22),{updateCellConfig:n,moveCell:o,clearCellOutput:r}=bt(),s=function(){const E=K.c(3),{deleteCell:N,undoDeleteCell:j}=bt();let T;return E[0]!==N||E[1]!==j?(T=async A=>{if(at.get(lc))return;const{cellIds:M}=A;for(const L of M)await o4({cellId:L}).then(()=>{N({cellId:L})});const{dismiss:P}=nt({title:"Cells deleted",action:c.jsx(Da,{"data-testid":"undo-delete-button",onClick:()=>{for(const L of M)j();R()}})}),R=P},E[0]=N,E[1]=j,E[2]=T):T=E[2],qe(T)}(),i=Le(lc),a=Dd(),l=Ks(),d=t.length,u=!i||d<t.length;let h;e[0]!==s||e[1]!==a?(h=E=>{s({cellIds:E}),a.clear()},e[0]=s,e[1]=a,e[2]=h):h=e[2];const f=qe(h);let m;e[3]!==o?(m=(E,N)=>{if(N==="down"){const j=E[E.length-1];if(at.get(cr).cellIds.findWithId(j).last()===j)return}if(N==="up"){const j=E[0];if(at.get(cr).cellIds.findWithId(j).first()===j)return}(N==="up"?E:[...E].reverse()).forEach(j=>{o({cellId:j,before:N==="up"})})},e[3]=o,e[4]=m):m=e[4];const _=qe(m),g=qe(Tj);let p;e[5]!==r?(p=E=>{E.forEach(N=>{r({cellId:N})})},e[5]=r,e[6]=p):p=e[6];const b=qe(p);let x;e[7]!==n?(x=async(E,N,j)=>{const T={};E.forEach(A=>{T[A]={[N]:j}}),await ur({configs:T}),E.forEach(A=>{n({cellId:A,config:T[A]})})},e[7]=n,e[8]=x):x=e[8];const y=qe(x);let v,C,S;if(e[9]===Symbol.for("react.memo_cache_sentinel")?(v=c.jsx(Wr,{size:13,strokeWidth:1.5}),e[9]=v):v=e[9],e[10]!==l?(C=E=>l(E),e[10]=l,e[11]=C):C=e[11],e[12]!==u||e[13]!==b||e[14]!==f||e[15]!==g||e[16]!==_||e[17]!==C||e[18]!==y){const E=[[{icon:v,label:"Run cells",handle:C}],[{icon:c.jsx(Sm,{size:13,strokeWidth:1.5}),label:"Move up",handle:A=>_(A,"up")},{icon:c.jsx(dr,{size:13,strokeWidth:1.5}),label:"Move down",handle:A=>_(A,"down")}],[{icon:c.jsx(fc,{size:13,strokeWidth:1.5}),label:"Delete cells",variant:"danger",hidden:!u,handle:f}]],N=[[{icon:c.jsx(s4,{size:13,strokeWidth:1.5}),label:"Format cells",handle:g},{icon:c.jsx(Zi,{size:13,strokeWidth:1.5}),label:"Clear outputs",handle:b}],[{icon:c.jsx(vm,{size:13,strokeWidth:1.5}),label:"Hide cells",handle:A=>y(A,"hide_code",!0)},{icon:c.jsx(wm,{size:13,strokeWidth:1.5}),label:"Show cells",handle:A=>y(A,"hide_code",!1)}],[{icon:c.jsx(wn,{size:13,strokeWidth:1.5}),label:"Disable cells",handle:A=>y(A,"disabled",!0)},{icon:c.jsx(vn,{size:13,strokeWidth:1.5}),label:"Enable cells",handle:A=>y(A,"disabled",!1)}]],j=E.map(Ij);let T;e[20]!==j?(T=j.filter(Ej),e[20]=j,e[21]=T):T=e[21],S={actions:T,moreActions:N.map(Nj).filter(Cj)},e[12]=u,e[13]=b,e[14]=f,e[15]=g,e[16]=_,e[17]=C,e[18]=y,e[19]=S}else S=e[19];return S}function Cj(t){return t.length>0}function Nj(t){return t.filter(jj)}function jj(t){return!t.hidden}function Ej(t){return t.length>0}function Ij(t){return t.filter(Aj)}function Aj(t){return!t.hidden}function Tj(t){const e={};t.forEach(n=>{const o=Qi(n);o&&(e[n]=o)}),r4(e)}const Mj=()=>{const t=K.c(4),e=Le(Od);let n;t[0]!==e.selected?(n=[...e.selected],t[0]=e.selected,t[1]=n):n=t[1];const o=n;if(o.length<2)return null;let r;return t[2]!==o?(r=c.jsx(Oj,{cellIds:o}),t[2]=o,t[3]=r):r=t[3],r},Rd=()=>{const t=K.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=c.jsx("div",{className:"h-4 w-px bg-border mx-1"}),t[0]=e):e=t[0],e},Oj=t=>{const e=K.c(19),{cellIds:n}=t,o=Dd(),{actions:r,moreActions:s}=Sj(n),i=n.length;let a,l,d,u,h,f,m;if(e[0]!==o?(a=_=>{(_.target instanceof HTMLElement||_.target instanceof SVGElement)&&_.target.closest("[data-keep-cell-selection]")!==null||_.target instanceof HTMLHtmlElement||o.clear()},e[0]=o,e[1]=a):a=e[1],ac(window,"mousedown",a),e[2]!==i?(l=c.jsxs("span",{className:"text-sm font-medium text-muted-foreground px-2 flex-shrink-0",children:[i," cells selected"]}),e[2]=i,e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(Rd,{}),e[4]=d):d=e[4],e[5]!==r||e[6]!==n){let _;e[8]!==r.length||e[9]!==n?(_=(g,p)=>c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g.map(b=>c.jsxs(Ae,{variant:b.variant==="danger"?"linkDestructive":"ghost",size:"sm",onClick:()=>b.handle(n),className:"h-8 px-2 gap-1 flex-shrink-0",title:b.label,children:[b.icon,c.jsx("span",{className:"text-xs",children:b.label})]},b.label)),p<r.length-1&&c.jsx(Rd,{})]},p),e[8]=r.length,e[9]=n,e[10]=_):_=e[10],u=r.map(_),e[5]=r,e[6]=n,e[7]=u}else u=e[7];return e[11]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(Rd,{}),e[11]=h):h=e[11],e[12]!==n||e[13]!==s?(f=c.jsx(kj,{actions:s,cellIds:n}),e[12]=n,e[13]=s,e[14]=f):f=e[14],e[15]!==l||e[16]!==u||e[17]!==f?(m=c.jsx("div",{className:"absolute top-12 justify-center flex w-full left-0 right-0 z-50","data-keep-cell-selection":!0,children:c.jsx("div",{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border border-[var(--slate-7)] rounded-lg shadow-lg p-2 overflow-x-auto overflow-y-hidden mx-20 scrollbar-thin",children:c.jsxs("div",{className:"flex items-center gap-1",children:[l,d,u,h,f]})})}),e[15]=l,e[16]=u,e[17]=f,e[18]=m):m=e[18],m},Dj={display:"none"};function Rj(t){let{id:e,value:n}=t;return X.createElement("div",{id:e,style:Dj},n)}function Pj(t){let{id:e,announcement:n,ariaLiveType:o="assertive"}=t;return X.createElement("div",{id:e,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},n)}const o1=O.createContext(null),Lj={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fj={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function zj(t){let{announcements:e=Fj,container:n,hiddenTextDescribedById:o,screenReaderInstructions:r=Lj}=t;const{announce:s,announcement:i}=function(){const[h,f]=O.useState("");return{announce:O.useCallback(m=>{m!=null&&f(m)},[]),announcement:h}}(),a=la("DndLiveRegion"),[l,d]=O.useState(!1);if(O.useEffect(()=>{d(!0)},[]),function(h){const f=O.useContext(o1);O.useEffect(()=>{if(!f)throw new Error("useDndMonitor must be used within a children of <DndContext>");return f(h)},[h,f])}(O.useMemo(()=>({onDragStart(h){let{active:f}=h;s(e.onDragStart({active:f}))},onDragMove(h){let{active:f,over:m}=h;e.onDragMove&&s(e.onDragMove({active:f,over:m}))},onDragOver(h){let{active:f,over:m}=h;s(e.onDragOver({active:f,over:m}))},onDragEnd(h){let{active:f,over:m}=h;s(e.onDragEnd({active:f,over:m}))},onDragCancel(h){let{active:f,over:m}=h;s(e.onDragCancel({active:f,over:m}))}}),[s,e])),!l)return null;const u=X.createElement(X.Fragment,null,X.createElement(Rj,{id:o,value:r.draggable}),X.createElement(Pj,{id:a,announcement:i}));return n?ua.createPortal(u,n):u}var Ut;function Ba(){}function r1(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ut||(Ut={}));const Yn=Object.freeze({x:0,y:0});function Pd(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ld(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return n-o}function Bj(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return o-n}function Fd(t){let{left:e,top:n,height:o,width:r}=t;return[{x:e,y:n},{x:e+r,y:n},{x:e,y:n+o},{x:e+r,y:n+o}]}function zd(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function s1(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+.5*t.width,y:n+.5*t.height}}const Bd=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const r=s1(e,e.left,e.top),s=[];for(const i of o){const{id:a}=i,l=n.get(a);if(l){const d=Pd(s1(l),r);s.push({id:a,data:{droppableContainer:i,value:d}})}}return s.sort(Ld)};function Uj(t,e){const n=Math.max(e.top,t.top),o=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),i=r-o,a=s-n;if(o<r&&n<s){const l=e.width*e.height,d=t.width*t.height,u=i*a;return Number((u/(l+d-u)).toFixed(4))}return 0}const i1=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const r=[];for(const s of o){const{id:i}=s,a=n.get(i);if(a){const l=Uj(a,e);l>0&&r.push({id:i,data:{droppableContainer:s,value:l}})}}return r.sort(Bj)};function Vj(t,e){const{top:n,left:o,bottom:r,right:s}=e;return n<=t.y&&t.y<=r&&o<=t.x&&t.x<=s}function a1(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Yn}function $j(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.reduce((s,i)=>({...s,top:s.top+t*i.y,bottom:s.bottom+t*i.y,left:s.left+t*i.x,right:s.right+t*i.x}),{...e})}}const Hj=$j(1),Wj={ignoreTransform:!1};function Yr(t,e){e===void 0&&(e=Wj);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:u}=Uo(t).getComputedStyle(t);d&&(n=function(h,f,m){const _=function(E){if(E.startsWith("matrix3d(")){const N=E.slice(9,-1).split(/, /);return{x:+N[12],y:+N[13],scaleX:+N[0],scaleY:+N[5]}}if(E.startsWith("matrix(")){const N=E.slice(7,-1).split(/, /);return{x:+N[4],y:+N[5],scaleX:+N[0],scaleY:+N[3]}}return null}(f);if(!_)return h;const{scaleX:g,scaleY:p,x:b,y:x}=_,y=h.left-b-(1-g)*parseFloat(m),v=h.top-x-(1-p)*parseFloat(m.slice(m.indexOf(" ")+1)),C=g?h.width/g:h.width,S=p?h.height/p:h.height;return{width:C,height:S,top:v,right:y+C,bottom:v+S,left:y}}(n,d,u))}const{top:o,left:r,width:s,height:i,bottom:a,right:l}=n;return{top:o,left:r,width:s,height:i,bottom:a,right:l}}function l1(t){return Yr(t,{ignoreTransform:!0})}function Ua(t,e){const n=[];return t?function o(r){if(e!=null&&n.length>=e||!r)return n;if(F4(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Mc(r)||cU(r)||n.includes(r))return n;const s=Uo(t).getComputedStyle(r);return r!==t&&function(i,a){a===void 0&&(a=Uo(i).getComputedStyle(i));const l=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(d=>{const u=a[d];return typeof u=="string"&&l.test(u)})}(r,s)&&n.push(r),function(i,a){return a===void 0&&(a=Uo(i).getComputedStyle(i)),a.position==="fixed"}(r,s)?n:o(r.parentNode)}(t):n}function c1(t){const[e]=Ua(t,1);return e??null}function Ud(t){return Vm&&t?$m(t)?t:hU(t)?F4(t)||t===zs(t).scrollingElement?window:Mc(t)?t:null:null:null}function d1(t){return $m(t)?t.scrollX:t.scrollLeft}function u1(t){return $m(t)?t.scrollY:t.scrollTop}function Vd(t){return{x:d1(t),y:u1(t)}}var Ht;function h1(t){return!(!Vm||!t)&&t===document.scrollingElement}function f1(t){const e={x:0,y:0},n=h1(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},o={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height};return{isTop:t.scrollTop<=e.y,isLeft:t.scrollLeft<=e.x,isBottom:t.scrollTop>=o.y,isRight:t.scrollLeft>=o.x,maxScroll:o,minScroll:e}}(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ht||(Ht={}));const qj={x:.2,y:.2};function Gj(t,e,n,o,r){let{top:s,left:i,right:a,bottom:l}=n;o===void 0&&(o=10),r===void 0&&(r=qj);const{isTop:d,isBottom:u,isLeft:h,isRight:f}=f1(t),m={x:0,y:0},_={x:0,y:0},g=e.height*r.y,p=e.width*r.x;return!d&&s<=e.top+g?(m.y=Ht.Backward,_.y=o*Math.abs((e.top+g-s)/g)):!u&&l>=e.bottom-g&&(m.y=Ht.Forward,_.y=o*Math.abs((e.bottom-g-l)/g)),!f&&a>=e.right-p?(m.x=Ht.Forward,_.x=o*Math.abs((e.right-p-a)/p)):!h&&i<=e.left+p&&(m.x=Ht.Backward,_.x=o*Math.abs((e.left+p-i)/p)),{direction:m,speed:_}}function Yj(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:e,left:n,right:o,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:o,bottom:r,width:t.clientWidth,height:t.clientHeight}}function m1(t){return t.reduce((e,n)=>Bs(e,Vd(n)),Yn)}const Jj=[["x",["left","right"],function(t){return t.reduce((e,n)=>e+d1(n),0)}],["y",["top","bottom"],function(t){return t.reduce((e,n)=>e+u1(n),0)}]];class $d{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=Ua(n),r=m1(o);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,i,a]of Jj)for(const l of i)Object.defineProperty(this,l,{get:()=>{const d=a(o),u=r[s]-d;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ti{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=e}add(e,n,o){var r;(r=this.target)==null||r.addEventListener(e,n,o),this.listeners.push([e,n,o])}}function Hd(t,e){const n=Math.abs(t.x),o=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+o**2)>e:"x"in e&&"y"in e?n>e.x&&o>e.y:"x"in e?n>e.x:"y"in e&&o>e.y}var Tn,lt;function p1(t){t.preventDefault()}function Kj(t){t.stopPropagation()}(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Tn||(Tn={})),function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"}(lt||(lt={}));const g1={start:[lt.Space,lt.Enter],cancel:[lt.Esc],end:[lt.Space,lt.Enter,lt.Tab]},Xj=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case lt.Right:return{...n,x:n.x+25};case lt.Left:return{...n,x:n.x-25};case lt.Down:return{...n,y:n.y+25};case lt.Up:return{...n,y:n.y-25}}};class Wd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ti(zs(n)),this.windowListeners=new ti(Uo(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Tn.Resize,this.handleCancel),this.windowListeners.add(Tn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Tn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,o=e.node.current;o&&function(r,s){if(s===void 0&&(s=Yr),!r)return;const{top:i,left:a,bottom:l,right:d}=s(r);c1(r)&&(l<=0||d<=0||i>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}(o),n(Yn)}handleKeyDown(e){if(Bm(e)){const{active:n,context:o,options:r}=this.props,{keyboardCodes:s=g1,coordinateGetter:i=Xj,scrollBehavior:a="smooth"}=r,{code:l}=e;if(s.end.includes(l))return void this.handleEnd(e);if(s.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:d}=o.current,u=d?{x:d.left,y:d.top}:Yn;this.referenceCoordinates||(this.referenceCoordinates=u);const h=i(e,{active:n,context:o.current,currentCoordinates:u});if(h){const f=da(h,u),m={x:0,y:0},{scrollableAncestors:_}=o.current;for(const g of _){const p=e.code,{isTop:b,isRight:x,isLeft:y,isBottom:v,maxScroll:C,minScroll:S}=f1(g),E=Yj(g),N={x:Math.min(p===lt.Right?E.right-E.width/2:E.right,Math.max(p===lt.Right?E.left:E.left+E.width/2,h.x)),y:Math.min(p===lt.Down?E.bottom-E.height/2:E.bottom,Math.max(p===lt.Down?E.top:E.top+E.height/2,h.y))},j=p===lt.Right&&!x||p===lt.Left&&!y,T=p===lt.Down&&!v||p===lt.Up&&!b;if(j&&N.x!==h.x){const A=g.scrollLeft+f.x,M=p===lt.Right&&A<=C.x||p===lt.Left&&A>=S.x;if(M&&!f.y)return void g.scrollTo({left:A,behavior:a});m.x=M?g.scrollLeft-A:p===lt.Right?g.scrollLeft-C.x:g.scrollLeft-S.x,m.x&&g.scrollBy({left:-m.x,behavior:a});break}if(T&&N.y!==h.y){const A=g.scrollTop+f.y,M=p===lt.Down&&A<=C.y||p===lt.Up&&A>=S.y;if(M&&!f.x)return void g.scrollTo({top:A,behavior:a});m.y=M?g.scrollTop-A:p===lt.Down?g.scrollTop-C.y:g.scrollTop-S.y,m.y&&g.scrollBy({top:-m.y,behavior:a});break}}this.handleMove(e,Bs(da(h,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:o}=this.props;e.preventDefault(),o(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function _1(t){return!!(t&&"distance"in t)}function b1(t){return!!(t&&"delay"in t)}Wd.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:o=g1,onActivation:r}=e,{active:s}=n;const{code:i}=t.nativeEvent;if(o.start.includes(i)){const a=s.activatorNode.current;return(!a||t.target===a)&&(t.preventDefault(),r==null||r({event:t.nativeEvent}),!0)}return!1}}];class qd{constructor(e,n,o){var r;o===void 0&&(o=function(a){const{EventTarget:l}=Uo(a);return a instanceof l?a:zs(a)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:i}=s;this.props=e,this.events=n,this.document=zs(i),this.documentListeners=new ti(this.document),this.listeners=new ti(o),this.windowListeners=new ti(Uo(i)),this.initialCoordinates=(r=Um(s))!=null?r:Yn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Tn.Resize,this.handleCancel),this.windowListeners.add(Tn.DragStart,p1),this.windowListeners.add(Tn.VisibilityChange,this.handleCancel),this.windowListeners.add(Tn.ContextMenu,p1),this.documentListeners.add(Tn.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(b1(n))return this.timeoutId=setTimeout(this.handleStart,n.delay),void this.handlePending(n);if(_1(n))return void this.handlePending(n)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:o,onPending:r}=this.props;r(o,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Tn.Click,Kj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Tn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:o,initialCoordinates:r,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!r)return;const l=(n=Um(e))!=null?n:Yn,d=da(r,l);if(!o&&a){if(_1(a)){if(a.tolerance!=null&&Hd(d,a.tolerance))return this.handleCancel();if(Hd(d,a.distance))return this.handleStart()}return b1(a)&&Hd(d,a.tolerance)?this.handleCancel():void this.handlePending(a,d)}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===lt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Zj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gd extends qd{constructor(e){const{event:n}=e,o=zs(n.target);super(e,Zj,o)}}Gd.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return!(!n.isPrimary||n.button!==0)&&(o==null||o({event:n}),!0)}}];const Qj={move:{name:"mousemove"},end:{name:"mouseup"}};var Yd;(function(t){t[t.RightClick=2]="RightClick"})(Yd||(Yd={})),(class extends qd{constructor(t){super(t,Qj,zs(t.event.target))}}).activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return n.button!==Yd.RightClick&&(o==null||o({event:n}),!0)}}];const Jd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var ni,Va;function eE(t){let{acceleration:e,activator:n=ni.Pointer,canScroll:o,draggingRect:r,enabled:s,interval:i=5,order:a=Va.TreeOrder,pointerCoordinates:l,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:f}=t;const m=function(S){let{delta:E,disabled:N}=S;const j=Oc(E);return ha(T=>{if(N||!j||!T)return tE;const A={x:Math.sign(E.x-j.x),y:Math.sign(E.y-j.y)};return{x:{[Ht.Backward]:T.x[Ht.Backward]||A.x===-1,[Ht.Forward]:T.x[Ht.Forward]||A.x===1},y:{[Ht.Backward]:T.y[Ht.Backward]||A.y===-1,[Ht.Forward]:T.y[Ht.Forward]||A.y===1}}},[N,E,j])}({delta:h,disabled:!s}),[_,g]=dU(),p=O.useRef({x:0,y:0}),b=O.useRef({x:0,y:0}),x=O.useMemo(()=>{switch(n){case ni.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ni.DraggableRect:return r}},[n,r,l]),y=O.useRef(null),v=O.useCallback(()=>{const S=y.current;if(!S)return;const E=p.current.x*b.current.x,N=p.current.y*b.current.y;S.scrollBy(E,N)},[]),C=O.useMemo(()=>a===Va.TreeOrder?[...d].reverse():d,[a,d]);O.useEffect(()=>{if(s&&d.length&&x){for(const S of C){if((o==null?void 0:o(S))===!1)continue;const E=d.indexOf(S),N=u[E];if(!N)continue;const{direction:j,speed:T}=Gj(S,N,x,e,f);for(const A of["x","y"])m[A][j[A]]||(T[A]=0,j[A]=0);if(T.x>0||T.y>0)return g(),y.current=S,_(v,i),p.current=T,void(b.current=j)}p.current={x:0,y:0},b.current={x:0,y:0},g()}else g()},[e,v,o,g,s,i,JSON.stringify(x),JSON.stringify(m),_,d,C,u,JSON.stringify(f)])}(class extends qd{constructor(t){super(t,Jd)}static setup(){return window.addEventListener(Jd.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Jd.move.name,t)};function t(){}}}).activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;const{touches:r}=n;return!(r.length>1)&&(o==null||o({event:n}),!0)}}],function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"}(ni||(ni={})),function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"}(Va||(Va={}));const tE={x:{[Ht.Backward]:!1,[Ht.Forward]:!1},y:{[Ht.Backward]:!1,[Ht.Forward]:!1}};var oi,Kd;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(oi||(oi={})),function(t){t.Optimized="optimized"}(Kd||(Kd={}));const x1=new Map;function y1(t,e){return ha(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function $a(t){let{callback:e,disabled:n}=t;const o=L4(e),r=O.useMemo(()=>{if(n||typeof window>"u"||window.ResizeObserver===void 0)return;const{ResizeObserver:s}=window;return new s(o)},[n]);return O.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function nE(t){return new $d(Yr(t),t)}function w1(t,e,n){e===void 0&&(e=nE);const[o,r]=O.useState(null);function s(){r(l=>{if(!t)return null;var d;if(t.isConnected===!1)return(d=l??n)!=null?d:null;const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const i=function(l){let{callback:d,disabled:u}=l;const h=L4(d),f=O.useMemo(()=>{if(u||typeof window>"u"||window.MutationObserver===void 0)return;const{MutationObserver:m}=window;return new m(h)},[h,u]);return O.useEffect(()=>()=>f==null?void 0:f.disconnect(),[f]),f}({callback(l){if(t)for(const d of l){const{type:u,target:h}=d;if(u==="childList"&&h instanceof HTMLElement&&h.contains(t)){s();break}}}}),a=$a({callback:s});return pr(()=>{s(),t?(a==null||a.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[t]),o}const v1=[];function k1(t,e){e===void 0&&(e=[]);const n=O.useRef(null);return O.useEffect(()=>{n.current=null},e),O.useEffect(()=>{const o=t!==Yn;o&&!n.current&&(n.current=t),!o&&n.current&&(n.current=null)},[t]),n.current?da(t,n.current):Yn}function S1(t){return O.useMemo(()=>t?function(e){const n=e.innerWidth,o=e.innerHeight;return{top:0,left:0,right:n,bottom:o,width:n,height:o}}(t):null,[t])}const C1=[];function oE(t){let{measure:e}=t;const[n,o]=O.useState(null),r=O.useCallback(d=>{for(const{target:u}of d)if(Mc(u)){o(h=>{const f=e(u);return h?{...h,width:f.width,height:f.height}:f});break}},[e]),s=$a({callback:r}),i=O.useCallback(d=>{const u=function(h){if(!h)return null;if(h.children.length>1)return h;const f=h.children[0];return Mc(f)?f:h}(d);s==null||s.disconnect(),u&&(s==null||s.observe(u)),o(u?e(u):null)},[e,s]),[a,l]=Tc(i);return O.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const rE=[{sensor:Gd,options:{}},{sensor:Wd,options:{}}],sE={current:{}},Ha={draggable:{measure:l1},droppable:{measure:l1,strategy:oi.WhileDragging,frequency:Kd.Optimized},dragOverlay:{measure:Yr}};class ri extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,o;return(n=(o=this.get(e))==null?void 0:o.node.current)!=null?n:void 0}}const iE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ri,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ba},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ha,measureDroppableContainers:Ba,windowRect:null,measuringScheduled:!1},aE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ba,draggableNodes:new Map,over:null,measureDroppableContainers:Ba},Wa=O.createContext(aE),N1=O.createContext(iE);function lE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ri}}}function cE(t,e){switch(e.type){case Ut.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ut.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ut.DragEnd:case Ut.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ut.RegisterDroppable:{const{element:n}=e,{id:o}=n,r=new ri(t.droppable.containers);return r.set(o,n),{...t,droppable:{...t.droppable,containers:r}}}case Ut.SetDroppableDisabled:{const{id:n,key:o,disabled:r}=e,s=t.droppable.containers.get(n);if(!s||o!==s.key)return t;const i=new ri(t.droppable.containers);return i.set(n,{...s,disabled:r}),{...t,droppable:{...t.droppable,containers:i}}}case Ut.UnregisterDroppable:{const{id:n,key:o}=e,r=t.droppable.containers.get(n);if(!r||o!==r.key)return t;const s=new ri(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function dE(t){let{disabled:e}=t;const{active:n,activatorEvent:o,draggableNodes:r}=O.useContext(Wa),s=Oc(o),i=Oc(n==null?void 0:n.id);return O.useEffect(()=>{if(!e&&!o&&s&&i!=null){if(!Bm(s)||document.activeElement===s.target)return;const a=r.get(i);if(!a)return;const{activatorNode:l,node:d}=a;if(!l.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[l.current,d.current]){if(!u)continue;const h=uU(u);if(h){h.focus();break}}})}},[o,e,r,i,s]),null}const j1=O.createContext({...Yn,scaleX:1,scaleY:1});var Ho;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ho||(Ho={}));const uE=O.memo(function(t){var e,n,o,r;let{id:s,accessibility:i,autoScroll:a=!0,children:l,sensors:d=rE,collisionDetection:u=i1,measuring:h,modifiers:f,...m}=t;const _=O.useReducer(cE,void 0,lE),[g,p]=_,[b,x]=function(){const[le]=O.useState(()=>new Set),Ie=O.useCallback(Me=>(le.add(Me),()=>le.delete(Me)),[le]);return[O.useCallback(Me=>{let{type:$e,event:Ke}=Me;le.forEach(Pe=>{var Ye;return(Ye=Pe[$e])==null?void 0:Ye.call(Pe,Ke)})},[le]),Ie]}(),[y,v]=O.useState(Ho.Uninitialized),C=y===Ho.Initialized,{draggable:{active:S,nodes:E,translate:N},droppable:{containers:j}}=g,T=S!=null?E.get(S):null,A=O.useRef({initial:null,translated:null}),M=O.useMemo(()=>{var le;return S!=null?{id:S,data:(le=T==null?void 0:T.data)!=null?le:sE,rect:A}:null},[S,T]),P=O.useRef(null),[R,L]=O.useState(null),[B,U]=O.useState(null),D=ca(m,Object.values(m)),k=la("DndDescribedBy",s),$=O.useMemo(()=>j.getEnabled(),[j]),I=(W=h,O.useMemo(()=>({draggable:{...Ha.draggable,...W==null?void 0:W.draggable},droppable:{...Ha.droppable,...W==null?void 0:W.droppable},dragOverlay:{...Ha.dragOverlay,...W==null?void 0:W.dragOverlay}}),[W==null?void 0:W.draggable,W==null?void 0:W.droppable,W==null?void 0:W.dragOverlay]));var W;const{droppableRects:G,measureDroppableContainers:q,measuringScheduled:Y}=function(le,Ie){let{dragging:Me,dependencies:$e,config:Ke}=Ie;const[Pe,Ye]=O.useState(null),{frequency:ot,measure:Xe,strategy:ct}=Ke,jt=O.useRef(le),Ft=function(){switch(ct){case oi.Always:return!1;case oi.BeforeDragging:return Me;default:return!Me}}(),dn=ca(Ft),Yt=O.useCallback(function(ho){ho===void 0&&(ho=[]),dn.current||Ye(Fo=>Fo===null?ho:Fo.concat(ho.filter(Vn=>!Fo.includes(Vn))))},[dn]),Xn=O.useRef(null),Is=ha(ho=>{if(Ft&&!Me)return x1;if(!ho||ho===x1||jt.current!==le||Pe!=null){const Fo=new Map;for(let Vn of le){if(!Vn)continue;if(Pe&&Pe.length>0&&!Pe.includes(Vn.id)&&Vn.rect.current){Fo.set(Vn.id,Vn.rect.current);continue}const As=Vn.node.current,Ji=As?new $d(Xe(As),As):null;Vn.rect.current=Ji,Ji&&Fo.set(Vn.id,Ji)}return Fo}return ho},[le,Pe,Me,Ft,Xe]);return O.useEffect(()=>{jt.current=le},[le]),O.useEffect(()=>{Ft||Yt()},[Me,Ft]),O.useEffect(()=>{Pe&&Pe.length>0&&Ye(null)},[JSON.stringify(Pe)]),O.useEffect(()=>{Ft||typeof ot!="number"||Xn.current!==null||(Xn.current=setTimeout(()=>{Yt(),Xn.current=null},ot))},[ot,Ft,Yt,...$e]),{droppableRects:Is,measureDroppableContainers:Yt,measuringScheduled:Pe!=null}}($,{dragging:C,dependencies:[N.x,N.y],config:I.droppable}),ee=function(le,Ie){const Me=Ie!=null?le.get(Ie):void 0,$e=Me?Me.node.current:null;return ha(Ke=>{var Pe;return Ie==null?null:(Pe=$e??Ke)!=null?Pe:null},[$e,Ie])}(E,S),oe=O.useMemo(()=>B?Um(B):null,[B]),ie=function(){const le=(R==null?void 0:R.autoScrollEnabled)===!1,Ie=typeof a=="object"?a.enabled===!1:a===!1,Me=C&&!le&&!Ie;return typeof a=="object"?{...a,enabled:Me}:{enabled:Me}}(),Z=function(le,Ie){return y1(le,Ie)}(ee,I.draggable.measure);(function(le){let{activeNode:Ie,measure:Me,initialRect:$e,config:Ke=!0}=le;const Pe=O.useRef(!1),{x:Ye,y:ot}=typeof Ke=="boolean"?{x:Ke,y:Ke}:Ke;pr(()=>{if(!Ye&&!ot||!Ie)return void(Pe.current=!1);if(Pe.current||!$e)return;const Xe=Ie==null?void 0:Ie.node.current;if(!Xe||Xe.isConnected===!1)return;const ct=a1(Me(Xe),$e);if(Ye||(ct.x=0),ot||(ct.y=0),Pe.current=!0,Math.abs(ct.x)>0||Math.abs(ct.y)>0){const jt=c1(Xe);jt&&jt.scrollBy({top:ct.y,left:ct.x})}},[Ie,Ye,ot,$e,Me])})({activeNode:S!=null?E.get(S):null,config:ie.layoutShiftCompensation,initialRect:Z,measure:I.draggable.measure});const Q=w1(ee,I.draggable.measure,Z),me=w1(ee?ee.parentElement:null),fe=O.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),de=j.getNodeFor((e=fe.current.over)==null?void 0:e.id),ue=oE({measure:I.dragOverlay.measure}),ce=(n=ue.nodeRef.current)!=null?n:ee,ke=C?(o=ue.rect)!=null?o:Q:null,Se=!!(ue.nodeRef.current&&ue.rect),ae=a1(Ce=Se?null:Q,y1(Ce));var Ce;const _e=S1(ce?Uo(ce):null),Ee=function(le){const Ie=O.useRef(le),Me=ha($e=>le?$e&&$e!==v1&&le&&Ie.current&&le.parentNode===Ie.current.parentNode?$e:Ua(le):v1,[le]);return O.useEffect(()=>{Ie.current=le},[le]),Me}(C?de??ee:null),ze=function(le,Ie){Ie===void 0&&(Ie=Yr);const[Me]=le,$e=S1(Me?Uo(Me):null),[Ke,Pe]=O.useState(C1);function Ye(){Pe(()=>le.length?le.map(Xe=>h1(Xe)?$e:new $d(Ie(Xe),Xe)):C1)}const ot=$a({callback:Ye});return pr(()=>{ot==null||ot.disconnect(),Ye(),le.forEach(Xe=>ot==null?void 0:ot.observe(Xe))},[le]),Ke}(Ee),Oe=function(le,Ie){let{transform:Me,...$e}=Ie;return le!=null&&le.length?le.reduce((Ke,Pe)=>Pe({transform:Ke,...$e}),Me):Me}(f,{transform:{x:N.x-ae.x,y:N.y-ae.y,scaleX:1,scaleY:1},activatorEvent:B,active:M,activeNodeRect:Q,containerNodeRect:me,draggingNodeRect:ke,over:fe.current.over,overlayNodeRect:ue.rect,scrollableAncestors:Ee,scrollableAncestorRects:ze,windowRect:_e}),He=oe?Bs(oe,N):null,Fe=function(le){const[Ie,Me]=O.useState(null),$e=O.useRef(le),Ke=O.useCallback(Pe=>{const Ye=Ud(Pe.target);Ye&&Me(ot=>ot?(ot.set(Ye,Vd(Ye)),new Map(ot)):null)},[]);return O.useEffect(()=>{const Pe=$e.current;if(le!==Pe){Ye(Pe);const ot=le.map(Xe=>{const ct=Ud(Xe);return ct?(ct.addEventListener("scroll",Ke,{passive:!0}),[ct,Vd(ct)]):null}).filter(Xe=>Xe!=null);Me(ot.length?new Map(ot):null),$e.current=le}return()=>{Ye(le),Ye(Pe)};function Ye(ot){ot.forEach(Xe=>{const ct=Ud(Xe);ct==null||ct.removeEventListener("scroll",Ke)})}},[Ke,le]),O.useMemo(()=>le.length?Ie?Array.from(Ie.values()).reduce((Pe,Ye)=>Bs(Pe,Ye),Yn):m1(le):Yn,[le,Ie])}(Ee),it=k1(Fe),Qe=k1(Fe,[Q]),tt=Bs(Oe,it),ne=ke?Hj(ke,Oe):null,ve=M&&ne?u({active:M,collisionRect:ne,droppableRects:G,droppableContainers:$,pointerCoordinates:He}):null,je=zd(ve,"id"),[Re,J]=O.useState(null),se=function(le,Ie,Me){return{...le,scaleX:Ie&&Me?Ie.width/Me.width:1,scaleY:Ie&&Me?Ie.height/Me.height:1}}(Se?Oe:Bs(Oe,Qe),(r=Re==null?void 0:Re.rect)!=null?r:null,Q),ge=O.useRef(null),pe=O.useCallback((le,Ie)=>{let{sensor:Me,options:$e}=Ie;if(P.current==null)return;const Ke=E.get(P.current);if(!Ke)return;const Pe=le.nativeEvent,Ye=new Me({active:P.current,activeNode:Ke,event:Pe,options:$e,context:fe,onAbort(Xe){if(!E.get(Xe))return;const{onDragAbort:ct}=D.current,jt={id:Xe};ct==null||ct(jt),b({type:"onDragAbort",event:jt})},onPending(Xe,ct,jt,Ft){if(!E.get(Xe))return;const{onDragPending:dn}=D.current,Yt={id:Xe,constraint:ct,initialCoordinates:jt,offset:Ft};dn==null||dn(Yt),b({type:"onDragPending",event:Yt})},onStart(Xe){const ct=P.current;if(ct==null)return;const jt=E.get(ct);if(!jt)return;const{onDragStart:Ft}=D.current,dn={activatorEvent:Pe,active:{id:ct,data:jt.data,rect:A}};ua.unstable_batchedUpdates(()=>{Ft==null||Ft(dn),v(Ho.Initializing),p({type:Ut.DragStart,initialCoordinates:Xe,active:ct}),b({type:"onDragStart",event:dn}),L(ge.current),U(Pe)})},onMove(Xe){p({type:Ut.DragMove,coordinates:Xe})},onEnd:ot(Ut.DragEnd),onCancel:ot(Ut.DragCancel)});function ot(Xe){return async function(){const{active:ct,collisions:jt,over:Ft,scrollAdjustedTranslate:dn}=fe.current;let Yt=null;if(ct&&dn){const{cancelDrop:Xn}=D.current;Yt={activatorEvent:Pe,active:ct,collisions:jt,delta:dn,over:Ft},Xe===Ut.DragEnd&&typeof Xn=="function"&&await Promise.resolve(Xn(Yt))&&(Xe=Ut.DragCancel)}P.current=null,ua.unstable_batchedUpdates(()=>{p({type:Xe}),v(Ho.Uninitialized),J(null),L(null),U(null),ge.current=null;const Xn=Xe===Ut.DragEnd?"onDragEnd":"onDragCancel";if(Yt){const Is=D.current[Xn];Is==null||Is(Yt),b({type:Xn,event:Yt})}})}}ge.current=Ye},[E]),xe=O.useCallback((le,Ie)=>(Me,$e)=>{const Ke=Me.nativeEvent,Pe=E.get($e);if(P.current!==null||!Pe||Ke.dndKit||Ke.defaultPrevented)return;const Ye={active:Pe};le(Me,Ie.options,Ye)===!0&&(Ke.dndKit={capturedBy:Ie.sensor},P.current=$e,pe(Me,Ie))},[E,pe]),Ve=function(le,Ie){return O.useMemo(()=>le.reduce((Me,$e)=>{const{sensor:Ke}=$e;return[...Me,...Ke.activators.map(Pe=>({eventName:Pe.eventName,handler:Ie(Pe.handler,$e)}))]},[]),[le,Ie])}(d,xe);(function(le){O.useEffect(()=>{if(!Vm)return;const Ie=le.map(Me=>{let{sensor:$e}=Me;return $e.setup==null?void 0:$e.setup()});return()=>{for(const Me of Ie)Me==null||Me()}},le.map(Ie=>{let{sensor:Me}=Ie;return Me}))})(d),pr(()=>{Q&&y===Ho.Initializing&&v(Ho.Initialized)},[Q,y]),O.useEffect(()=>{const{onDragMove:le}=D.current,{active:Ie,activatorEvent:Me,collisions:$e,over:Ke}=fe.current;if(!Ie||!Me)return;const Pe={active:Ie,activatorEvent:Me,collisions:$e,delta:{x:tt.x,y:tt.y},over:Ke};ua.unstable_batchedUpdates(()=>{le==null||le(Pe),b({type:"onDragMove",event:Pe})})},[tt.x,tt.y]),O.useEffect(()=>{const{active:le,activatorEvent:Ie,collisions:Me,droppableContainers:$e,scrollAdjustedTranslate:Ke}=fe.current;if(!le||P.current==null||!Ie||!Ke)return;const{onDragOver:Pe}=D.current,Ye=$e.get(je),ot=Ye&&Ye.rect.current?{id:Ye.id,rect:Ye.rect.current,data:Ye.data,disabled:Ye.disabled}:null,Xe={active:le,activatorEvent:Ie,collisions:Me,delta:{x:Ke.x,y:Ke.y},over:ot};ua.unstable_batchedUpdates(()=>{J(ot),Pe==null||Pe(Xe),b({type:"onDragOver",event:Xe})})},[je]),pr(()=>{fe.current={activatorEvent:B,active:M,activeNode:ee,collisionRect:ne,collisions:ve,droppableRects:G,draggableNodes:E,draggingNode:ce,draggingNodeRect:ke,droppableContainers:j,over:Re,scrollableAncestors:Ee,scrollAdjustedTranslate:tt},A.current={initial:ke,translated:ne}},[M,ee,ve,ne,E,ce,ke,G,j,Re,Ee,tt]),eE({...ie,delta:N,draggingRect:ne,pointerCoordinates:He,scrollableAncestors:Ee,scrollableAncestorRects:ze});const Be=O.useMemo(()=>({active:M,activeNode:ee,activeNodeRect:Q,activatorEvent:B,collisions:ve,containerNodeRect:me,dragOverlay:ue,draggableNodes:E,droppableContainers:j,droppableRects:G,over:Re,measureDroppableContainers:q,scrollableAncestors:Ee,scrollableAncestorRects:ze,measuringConfiguration:I,measuringScheduled:Y,windowRect:_e}),[M,ee,Q,B,ve,me,ue,E,j,G,Re,q,Ee,ze,I,Y,_e]),rt=O.useMemo(()=>({activatorEvent:B,activators:Ve,active:M,activeNodeRect:Q,ariaDescribedById:{draggable:k},dispatch:p,draggableNodes:E,over:Re,measureDroppableContainers:q}),[B,Ve,M,Q,p,k,E,Re,q]);return X.createElement(o1.Provider,{value:x},X.createElement(Wa.Provider,{value:rt},X.createElement(N1.Provider,{value:Be},X.createElement(j1.Provider,{value:se},l)),X.createElement(dE,{disabled:(i==null?void 0:i.restoreFocus)===!1})),X.createElement(zj,{...i,hiddenTextDescribedById:k}))}),hE=O.createContext(null),E1="button";function fE(t){let{id:e,data:n,disabled:o=!1,attributes:r}=t;const s=la("Draggable"),{activators:i,activatorEvent:a,active:l,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:f}=O.useContext(Wa),{role:m=E1,roleDescription:_="draggable",tabIndex:g=0}=r??{},p=(l==null?void 0:l.id)===e,b=O.useContext(p?j1:hE),[x,y]=Tc(),[v,C]=Tc(),S=function(N,j){return O.useMemo(()=>N.reduce((T,A)=>{let{eventName:M,handler:P}=A;return T[M]=R=>{P(R,j)},T},{}),[N,j])}(i,e),E=ca(n);return pr(()=>(h.set(e,{id:e,key:s,node:x,activatorNode:v,data:E}),()=>{const N=h.get(e);N&&N.key===s&&h.delete(e)}),[h,e]),{active:l,activatorEvent:a,activeNodeRect:d,attributes:O.useMemo(()=>({role:m,tabIndex:g,"aria-disabled":o,"aria-pressed":!(!p||m!==E1)||void 0,"aria-roledescription":_,"aria-describedby":u.draggable}),[o,m,g,p,_,u.draggable]),isDragging:p,listeners:o?void 0:S,node:x,over:f,setNodeRef:y,setActivatorNodeRef:C,transform:b}}const mE={timeout:25};function I1(t,e,n){const o=t.slice();return o.splice(n<0?o.length+n:n,0,o.splice(e,1)[0]),o}function pE(t,e){return t.reduce((n,o,r)=>{const s=e.get(o);return s&&(n[r]=s),n},Array(t.length))}function qa(t){return t!==null&&t>=0}const Ga={scaleX:1,scaleY:1},gE=t=>{var e;let{rects:n,activeNodeRect:o,activeIndex:r,overIndex:s,index:i}=t;const a=(e=n[r])!=null?e:o;if(!a)return null;const l=function(d,u,h){const f=d[u],m=d[u-1],_=d[u+1];return!f||!m&&!_?0:h<u?m?f.left-(m.left+m.width):_.left-(f.left+f.width):_?_.left-(f.left+f.width):f.left-(m.left+m.width)}(n,i,r);if(i===r){const d=n[s];return d?{x:r<s?d.left+d.width-(a.left+a.width):d.left-a.left,y:0,...Ga}:null}return i>r&&i<=s?{x:-a.width-l,y:0,...Ga}:i<r&&i>=s?{x:a.width+l,y:0,...Ga}:{x:0,y:0,...Ga}},A1=t=>{let{rects:e,activeIndex:n,overIndex:o,index:r}=t;const s=I1(e,o,n),i=e[r],a=s[r];return a&&i?{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}:null},Ya={scaleX:1,scaleY:1},_E=t=>{var e;let{activeIndex:n,activeNodeRect:o,index:r,rects:s,overIndex:i}=t;const a=(e=s[n])!=null?e:o;if(!a)return null;if(r===n){const d=s[i];return d?{x:0,y:n<i?d.top+d.height-(a.top+a.height):d.top-a.top,...Ya}:null}const l=function(d,u,h){const f=d[u],m=d[u-1],_=d[u+1];return f?h<u?m?f.top-(m.top+m.height):_?_.top-(f.top+f.height):0:_?_.top-(f.top+f.height):m?f.top-(m.top+m.height):0:0}(s,r,n);return r>n&&r<=i?{x:0,y:-a.height-l,...Ya}:r<n&&r>=i?{x:0,y:a.height+l,...Ya}:{x:0,y:0,...Ya}},T1="Sortable",M1=X.createContext({activeIndex:-1,containerId:T1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:A1,disabled:{draggable:!1,droppable:!1}});function O1(t){let{children:e,id:n,items:o,strategy:r=A1,disabled:s=!1}=t;const{active:i,dragOverlay:a,droppableRects:l,over:d,measureDroppableContainers:u}=O.useContext(N1),h=la(T1,n),f=a.rect!==null,m=O.useMemo(()=>o.map(S=>typeof S=="object"&&"id"in S?S.id:S),[o]),_=i!=null,g=i?m.indexOf(i.id):-1,p=d?m.indexOf(d.id):-1,b=O.useRef(m),x=!function(S,E){if(S===E)return!0;if(S.length!==E.length)return!1;for(let N=0;N<S.length;N++)if(S[N]!==E[N])return!1;return!0}(m,b.current),y=p!==-1&&g===-1||x,v=function(S){return typeof S=="boolean"?{draggable:S,droppable:S}:S}(s);pr(()=>{x&&_&&u(m)},[x,m,_,u]),O.useEffect(()=>{b.current=m},[m]);const C=O.useMemo(()=>({activeIndex:g,containerId:h,disabled:v,disableTransforms:y,items:m,overIndex:p,useDragOverlay:f,sortedRects:pE(m,l),strategy:r}),[g,h,v.draggable,v.droppable,y,m,p,l,f,r]);return X.createElement(M1.Provider,{value:C},e)}const bE=t=>{let{id:e,items:n,activeIndex:o,overIndex:r}=t;return I1(n,o,r).indexOf(e)},xE=t=>{let{containerId:e,isSorting:n,wasDragging:o,index:r,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:d}=t;return!(!d||!o)&&(a===s||r!==i)&&(!!n||i!==r&&e===l)},yE={duration:200,easing:"ease"},D1="transform",wE=Dc.Transition.toString({property:D1,duration:0,easing:"linear"}),vE={roleDescription:"sortable"};function R1(t){let{animateLayoutChanges:e=xE,attributes:n,disabled:o,data:r,getNewIndex:s=bE,id:i,strategy:a,resizeObserverConfig:l,transition:d=yE}=t;const{items:u,containerId:h,activeIndex:f,disabled:m,disableTransforms:_,sortedRects:g,overIndex:p,useDragOverlay:b,strategy:x}=O.useContext(M1),y=function(de,ue){var ce,ke;return typeof de=="boolean"?{draggable:de,droppable:!1}:{draggable:(ce=de==null?void 0:de.draggable)!=null?ce:ue.draggable,droppable:(ke=de==null?void 0:de.droppable)!=null?ke:ue.droppable}}(o,m),v=u.indexOf(i),C=O.useMemo(()=>({sortable:{containerId:h,index:v,items:u},...r}),[h,r,v,u]),S=O.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:E,node:N,isOver:j,setNodeRef:T}=function(de){let{data:ue,disabled:ce=!1,id:ke,resizeObserverConfig:Se}=de;const ae=la("Droppable"),{active:Ce,dispatch:_e,over:Ee,measureDroppableContainers:ze}=O.useContext(Wa),Oe=O.useRef({disabled:ce}),He=O.useRef(!1),Fe=O.useRef(null),it=O.useRef(null),{disabled:Qe,updateMeasurementsFor:tt,timeout:ne}={...mE,...Se},ve=ca(tt??ke),je=$a({callback:O.useCallback(()=>{He.current?(it.current!=null&&clearTimeout(it.current),it.current=setTimeout(()=>{ze(Array.isArray(ve.current)?ve.current:[ve.current]),it.current=null},ne)):He.current=!0},[ne]),disabled:Qe||!Ce}),Re=O.useCallback((pe,xe)=>{je&&(xe&&(je.unobserve(xe),He.current=!1),pe&&je.observe(pe))},[je]),[J,se]=Tc(Re),ge=ca(ue);return O.useEffect(()=>{je&&J.current&&(je.disconnect(),He.current=!1,je.observe(J.current))},[J,je]),O.useEffect(()=>(_e({type:Ut.RegisterDroppable,element:{id:ke,key:ae,disabled:ce,node:J,rect:Fe,data:ge}}),()=>_e({type:Ut.UnregisterDroppable,key:ae,id:ke})),[ke]),O.useEffect(()=>{ce!==Oe.current.disabled&&(_e({type:Ut.SetDroppableDisabled,id:ke,key:ae,disabled:ce}),Oe.current.disabled=ce)},[ke,ae,ce,_e]),{active:Ce,rect:Fe,isOver:(Ee==null?void 0:Ee.id)===ke,node:J,over:Ee,setNodeRef:se}}({id:i,data:C,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:A,activatorEvent:M,activeNodeRect:P,attributes:R,setNodeRef:L,listeners:B,isDragging:U,over:D,setActivatorNodeRef:k,transform:$}=fE({id:i,data:C,attributes:{...vE,...n},disabled:y.draggable}),I=fU(T,L),W=!!A,G=W&&!_&&qa(f)&&qa(p),q=!b&&U,Y=q&&G?$:null,ee=G?Y??(a??x)({rects:g,activeNodeRect:P,activeIndex:f,overIndex:p,index:v}):null,oe=qa(f)&&qa(p)?s({id:i,items:u,activeIndex:f,overIndex:p}):v,ie=A==null?void 0:A.id,Z=O.useRef({activeId:ie,items:u,newIndex:oe,containerId:h}),Q=u!==Z.current.items,me=e({active:A,containerId:h,isDragging:U,isSorting:W,id:i,index:v,items:u,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:d,wasDragging:Z.current.activeId!=null}),fe=function(de){let{disabled:ue,index:ce,node:ke,rect:Se}=de;const[ae,Ce]=O.useState(null),_e=O.useRef(ce);return pr(()=>{if(!ue&&ce!==_e.current&&ke.current){const Ee=Se.current;if(Ee){const ze=Yr(ke.current,{ignoreTransform:!0}),Oe={x:Ee.left-ze.left,y:Ee.top-ze.top,scaleX:Ee.width/ze.width,scaleY:Ee.height/ze.height};(Oe.x||Oe.y)&&Ce(Oe)}}ce!==_e.current&&(_e.current=ce)},[ue,ce,ke,Se]),O.useEffect(()=>{ae&&Ce(null)},[ae]),ae}({disabled:!me,index:v,node:N,rect:E});return O.useEffect(()=>{W&&Z.current.newIndex!==oe&&(Z.current.newIndex=oe),h!==Z.current.containerId&&(Z.current.containerId=h),u!==Z.current.items&&(Z.current.items=u)},[W,oe,h,u]),O.useEffect(()=>{if(ie===Z.current.activeId)return;if(ie!=null&&Z.current.activeId==null)return void(Z.current.activeId=ie);const de=setTimeout(()=>{Z.current.activeId=ie},50);return()=>clearTimeout(de)},[ie]),{active:A,activeIndex:f,attributes:R,data:C,rect:E,index:v,newIndex:oe,items:u,isOver:j,isSorting:W,isDragging:U,listeners:B,node:N,overIndex:p,over:D,setNodeRef:I,setActivatorNodeRef:k,setDroppableNodeRef:T,setDraggableNodeRef:L,transform:fe??ee,transition:function(){if(fe||Q&&Z.current.newIndex===v)return wE;if(!(q&&!Bm(M)||!d)&&(W||me))return Dc.Transition.toString({...d,property:D1})}()}}function Ja(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const kE=[lt.Down,lt.Right,lt.Up,lt.Left],SE=(t,e)=>{let{context:{active:n,collisionRect:o,droppableRects:r,droppableContainers:s,over:i,scrollableAncestors:a}}=e;if(kE.includes(t.code)){if(t.preventDefault(),!n||!o)return;const l=[];s.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=r.get(h.id);if(f)switch(t.code){case lt.Down:o.top<f.top&&l.push(h);break;case lt.Up:o.top>f.top&&l.push(h);break;case lt.Left:o.left>f.left&&l.push(h);break;case lt.Right:o.left<f.left&&l.push(h)}});const d=(h=>{let{collisionRect:f,droppableRects:m,droppableContainers:_}=h;const g=Fd(f),p=[];for(const b of _){const{id:x}=b,y=m.get(x);if(y){const v=Fd(y),C=g.reduce((E,N,j)=>E+Pd(v[j],N),0),S=Number((C/4).toFixed(4));p.push({id:x,data:{droppableContainer:b,value:S}})}}return p.sort(Ld)})({collisionRect:o,droppableRects:r,droppableContainers:l});let u=zd(d,"id");if(u===(i==null?void 0:i.id)&&d.length>1&&(u=d[1].id),u!=null){const h=s.get(n.id),f=s.get(u),m=f?r.get(f.id):null,_=f==null?void 0:f.node.current;if(_&&m&&h&&f){const g=Ua(_).some((v,C)=>a[C]!==v),p=P1(h,f),b=function(v,C){return!Ja(v)||!Ja(C)||!P1(v,C)?!1:v.data.current.sortable.index<C.data.current.sortable.index}(h,f),x=g||!p?{x:0,y:0}:{x:b?o.width-m.width:0,y:b?o.height-m.height:0},y={x:m.left,y:m.top};return x.x&&x.y?y:da(y,x)}}}};function P1(t,e){return!(!Ja(t)||!Ja(e))&&t.data.current.sortable.containerId===e.data.current.sortable.containerId}const CE=mU("rounded-full shadow-xsSolid border p-[5px] transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 [&>svg]:size-3 active:shadow-none bg-background",{variants:{variant:{default:"hover:bg-accent hover:text-accent-foreground",stale:"bg-[var(--yellow-3)] hover:bg-[var(--yellow-4)] text-[var(--yellow-11)]",green:"hover:bg-[var(--grass-2)] hover:text-[var(--grass-11)] hover:border-[var(--grass-7)],",disabled:"opacity-50 cursor-not-allowed",danger:"hover:bg-[var(--red-3)] hover:text-[var(--red-11)]"}},defaultVariants:{variant:"default"}}),si=t=>{const e=K.c(21);let n,o,r,s,i;e[0]!==t?({children:n,tooltip:s,disabled:r,variant:i,...o}=t,e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=s,e[5]=i):(n=e[1],o=e[2],r=e[3],s=e[4],i=e[5]);const a=r!==void 0&&r;let l,d,u;e[6]!==a||e[7]!==o?(l=f=>{var m;a||((m=o.onClick)==null||m.call(o,f))},e[6]=a,e[7]=o,e[8]=l):l=e[8],e[9]!==o.className||e[10]!==i?(d=Ne(CE({variant:i}),o.className),e[9]=o.className,e[10]=i,e[11]=d):d=e[11],e[12]!==n||e[13]!==a||e[14]!==o||e[15]!==l||e[16]!==d?(u=c.jsx("button",{disabled:a,...o,onClick:l,onMouseDown:Qn.preventFocus,className:d,children:n}),e[12]=n,e[13]=a,e[14]=o,e[15]=l,e[16]=d,e[17]=u):u=e[17];const h=u;if(s){let f;return e[18]!==h||e[19]!==s?(f=c.jsx(Te,{content:s,side:"top",delayDuration:200,usePortal:!1,children:h}),e[18]=h,e[19]=s,e[20]=f):f=e[20],f}return h},NE=t=>{const e=K.c(5),{children:n,className:o}=t;let r,s;return e[0]!==o?(r=Ne("flex items-center gap-1 bg-background m-[2px] rounded-full",o),e[0]=o,e[1]=r):r=e[1],e[2]!==n||e[3]!==r?(s=c.jsx(mC,{className:r,children:n}),e[2]=n,e[3]=r,e[4]=s):s=e[4],s},jE=t=>{const e=K.c(9),{connectionState:n,status:o}=t,r=t1(o==="running");let s,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=on("global.interrupt"),e[0]=s):s=e[0],e[1]!==n||e[2]!==r?(i=po(n)||!r,e[1]=n,e[2]=r,e[3]=i):i=e[3];const a=r?Hm:Hn.NOOP,l=r?"stale":"disabled";let d,u;return e[4]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(vc,{strokeWidth:1.5}),e[4]=d):d=e[4],e[5]!==i||e[6]!==a||e[7]!==l?(u=c.jsx(si,{tooltip:s,disabled:i,onClick:a,variant:l,"data-testid":"run-button",children:d}),e[5]=i,e[6]=a,e[7]=l,e[8]=u):u=e[8],u},Jr={showInput:"Mod-l",acceptEdit:"Mod-y",rejectEdit:"Mod-u"},ii=Us.define({combine:t=>Rc(t,{onError:console.error,inputDebounceTime:300,keymaps:Jr},{onError:(e,n)=>e&&n,inputDebounceTime:(e,n)=>e&&n,keymaps:(e,n)=>e&&n})}),jr=Dt.define(),Er=In.define({create:()=>({show:!1,lineFrom:0,lineTo:0}),update(t,e){for(const n of e.effects)if(n.is(jr))return n.value;return t}}),ai=Dt.define(),li=Dt.define(),L1=In.define({create:()=>({shouldFocus:!1,inputValue:""}),update(t,e){let n=t;for(const o of e.effects)o.is(ai)&&(n={...n,inputValue:o.value}),o.is(li)&&(n={...n,shouldFocus:o.value});return n}}),Ka=Dt.define(),ci=In.define({create:()=>null,update(t,e){for(const n of e.effects)if(n.is(Ka))return n.value;return t}}),Kr=Dt.define(),F1=In.define({create:()=>!1,update(t,e){for(const n of e.effects)if(n.is(Kr))return n.value;return t}}),z1=t=>{const{state:e}=t,n=e.selection.main;if(n.empty)return!1;const o=e.doc,r=o.lineAt(n.from),s=o.lineAt(n.to);if(e.sliceDoc(r.from,s.to).trim().length<1)return!1;const i=Math.max(1,Math.min(r.number,o.lines)),a=Math.max(1,Math.min(s.number,o.lines));return t.dispatch({effects:[jr.of({show:!0,lineFrom:i,lineTo:a}),li.of(!0),ai.of("")],selection:Bo.cursor(r.from)}),!0},B1=t=>!!t.state.field(ci)&&(t.dispatch({effects:[Ka.of(null),jr.of({show:!1,lineFrom:0,lineTo:0}),li.of(!1),ai.of(""),Kr.of(!1)]}),!0),U1=t=>{const e=t.state.field(ci);return!!e&&(t.dispatch({changes:{from:e.from,to:e.to,insert:e.oldCode},effects:[Ka.of(null),jr.of({show:!1,lineFrom:0,lineTo:0}),li.of(!1),ai.of(""),Kr.of(!1)]}),!0)},EE=et.baseTheme({".cm-ai-input-container":{display:"flex",flexDirection:"column",gap:"4px",width:"min(calc(100% + 7px), 500px)",padding:"5px 5px",margin:"0 -6px",backgroundColor:"light-dark(rgb(241, 243, 245), rgb(40, 40, 40))"},".cm-ai-input":{display:"block",width:"100%",padding:"3px 8px",border:"2px solid rgb(51, 154, 240)",borderRadius:"5px",fontSize:"12px"},".cm-ai-help-info-button":{fontSize:"10px",paddingLeft:"10px",height:"18px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",display:"block",marginRight:"auto"},".cm-ai-help-info-button:hover":{color:"light-dark(rgb(89, 97, 105), rgb(190, 190, 190))"},".cm-ai-generate-button":{background:"#0E639C",border:"none",padding:"2px 6px",color:"#ffffff",cursor:"pointer",font:"inherit",borderRadius:"4px","&:hover":{backgroundColor:"#1177bb"}},".cm-line.cm-ai-selection, .cm-line.cm-ai-selection.cm-active-line":{backgroundColor:"light-dark(color-mix(in srgb, rgb(223, 227, 232) 50%, transparent), color-mix(in srgb, rgb(50, 50, 50) 50%, transparent)) !important"},".cm-line:has(.cm-new-code-line)":{backgroundColor:"light-dark(color-mix(in srgb, rgb(183, 235, 143) 50%, transparent), color-mix(in srgb, rgb(40, 100, 40) 50%, transparent)) !important"},".cm-old-code-container":{backgroundColor:"light-dark(rgb(255, 205, 205), rgb(100, 40, 40))",position:"relative",display:"flex",paddingTop:"0",width:"100%",alignItems:"center"},".cm-code-button":{position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"16px"},".cm-floating-buttons":{fontFamily:"sans-serif",position:"absolute",top:"-20px",left:"5px",display:"flex"},".cm-floating-button":{fontFamily:"sans-serif",padding:"2px 5px",fontSize:"10px",cursor:"pointer",fontWeight:"700"},".cm-floating-accept":{backgroundColor:"light-dark(rgb(55, 125, 34), rgb(40, 80, 25))",borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px",color:"white",filter:"brightness(90%)","&:hover":{filter:"brightness(100%)"}},".cm-floating-reject":{backgroundColor:"light-dark(rgb(220, 53, 69), rgb(180, 40, 50))",color:"white",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",filter:"brightness(90%)","&:hover":{filter:"brightness(100%)"}},".hotkey":{display:"inline-block",padding:"0 4px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",fontSize:"90%"},".cm-ai-loading-indicator":{fontStyle:"italic",fontSize:"10px",paddingLeft:"12px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",opacity:"0",transition:"opacity 0.3s ease-in-out","&::after":{content:'""',display:"inline-block",animation:"ellipsis-pulse 1.5s steps(4, end) infinite"},"&:not(:empty)":{opacity:"1"}},".cm-ai-input:disabled":{opacity:"0.5"},"@keyframes ellipsis-pulse":{"0%":{content:"'.'"},"25%":{content:"'..'"},"50%":{content:"'...'"},"75%":{content:"''"}},".cm-ai-loading-container":{display:"flex",alignItems:"center",padding:"0 8px"},".cm-ai-cancel-button":{padding:"2px 8px",fontSize:"10px",borderRadius:"4px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",cursor:"pointer","&:hover":{background:"light-dark(rgb(223, 227, 232), rgb(50, 50, 50))"}},".hidden":{display:"none"}}),IE="\u2318",AE="\u229E Win",TE="Ctrl";function Xd(t){return t.replace("Mod",navigator.platform.startsWith("Mac")?IE:navigator.platform.startsWith("Win")?AE:TE).replace("-"," ").toUpperCase()}function sn(t,e){const n=document.createElement(t);return n.className=e,n}function ME(t){var r,s;const e=t.state.facet(ii),n={...Jr,...e.keymaps},o=sn("div","cm-ai-tooltip").appendChild(sn("div","cm-ai-tooltip-button"));return o.innerHTML=`<span>Edit <span class="hotkey">${Xd(n.showInput)}</span></span>`,(r=o.querySelector("span"))==null||r.addEventListener("mousedown",i=>{i.stopPropagation()}),(s=o.querySelector("span"))==null||s.addEventListener("click",i=>{i.preventDefault(),z1(t)}),o}const OE=Us.define({combine:t=>Rc(t,{render:ME})}),DE=En.fromClass((U3=class{constructor(t){te(this,"view");te(this,"suppress");te(this,"dom");te(this,"mousedown",()=>{this.suppress=!0});te(this,"mouseup",()=>{this.suppress=!1,this.display(this.view)});q3(this,oc,t=>{var n;const e=t.state.selection.ranges.find(o=>!o.empty);if(e&&!this.suppress){const o=t.coordsAtPos(e.from);if(!o)return;this.dom.style.display="flex";const r=this.dom.getBoundingClientRect(),s=t.dom.getBoundingClientRect(),i=(n=t.dom.parentElement)==null?void 0:n.getBoundingClientRect(),a=s.width-r.width,l=Math.min(o.left,a);let d=o.top-r.height;d=i?Math.max(i.y,d):d,this.dom.style.left=`${l}px`,this.dom.style.top=`${d}px`,requestAnimationFrame(()=>{this.dom&&(this.dom.ariaHidden="false")})}else this.dom.style.display="none",this.dom.ariaHidden="true"});this.view=t;const e=t.state.facet(OE);this.suppress=!1,document.addEventListener("mousedown",this.mousedown),document.addEventListener("mouseup",this.mouseup);const n=e.render(t);t.dom.appendChild(n),this.dom=n}update(t){this.display(t.view)}docViewUpdate(t){this.display(t)}display(t){t.state.field(Er).show?this.dom.style.display="none":t.requestMeasure({read:W3(this,oc)})}destroy(){document.removeEventListener("mousedown",this.mousedown),document.removeEventListener("mouseup",this.mouseup),this.dom.remove()}},oc=new WeakMap,U3)),RE=et.baseTheme({".cm-ai-tooltip-button":{userSelect:"none",fontFamily:"system-ui, -apple-system, sans-serif",position:"fixed",display:"flex",boxSizing:"border-box",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",backgroundColor:"#0E639C",color:"#ffffff",border:"1px solid transparent",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:"999",transition:"opacity 0.5s","&[aria-hidden='true']":{opacity:"0"},"&[aria-hidden='false']":{opacity:"1"},"& > span":{pointerEvents:"auto",cursor:"pointer",display:"inline-block",padding:"2px"},"&:hover":{backgroundColor:"#1177bb"}}});class PE extends Vs{constructor(n){super();te(this,"oldCode");this.oldCode=n}toDOM(n){const o=sn("div","cm-old-code-container");o.setAttribute("role","region"),o.setAttribute("aria-label","Previous code version");const r=sn("div","cm-old-code cm-line");r.textContent=this.oldCode;const s=sn("div","cm-floating-buttons"),i=n.state.facet(ii),a={...Jr,...i.keymaps},l=sn("button","cm-floating-button cm-floating-accept");l.innerHTML=`<span class="hotkey">${Xd(a.acceptEdit)}</span> Accept`,l.setAttribute("aria-label","Accept changes"),l.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),n.focus(),B1(n)});const d=sn("button","cm-floating-button cm-floating-reject");return d.innerHTML=`<span class="hotkey">${Xd(a.rejectEdit)}</span> Reject`,d.setAttribute("aria-label","Reject changes"),d.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),n.focus(),U1(n)}),s.append(l,d),o.append(r,s),o}updateDOM(n,o){return!0}}class LE extends Vs{constructor(n){super();te(this,"complete");te(this,"abortController",null);te(this,"dom",null);te(this,"input",null);te(this,"loadingContainer",null);te(this,"helpInfo",null);te(this,"inputContainer",null);te(this,"form",null);te(this,"view",null);te(this,"onKeyDown",async n=>{n.key!=="Enter"||n.shiftKey?n.key==="Escape"&&this.onCancel():(n.preventDefault(),await this.handleSubmit())});te(this,"onCancel",()=>{this.cleanup();const n=this.view;n&&(n.dispatch({effects:[jr.of({show:!1,lineFrom:0,lineTo:0}),Kr.of(!1)]}),n.focus())});te(this,"handleSubmit",async n=>{var g;const o=this.view;if(!o)return;const r=o.state.facet(ii);n==null||n.stopPropagation();const s=o.state.field(Er),{input:i}=this;if(!i)return;const a=i.value.trim();if(!s.show||!a)return;const l=o.state.doc.line(s.lineFrom),d=o.state.doc.line(s.lineTo),u=l.from,h=d.to,f=o.state.sliceDoc(u,h),m=o.state.sliceDoc(0,u),_=o.state.sliceDoc(h);this.abortController=new AbortController,o.dispatch({effects:Kr.of(!0)}),this.toggleLoading(!0);try{const p=await this.complete({prompt:a,selection:f,codeBefore:m,codeAfter:_,editorView:o,signal:this.abortController.signal});if(!o.state.field(Er).show)return;if(!p||typeof p!="string")throw new Error("Invalid completion result");o.dispatch({changes:{from:u,to:h,insert:p},effects:[jr.of({show:!1,lineFrom:0,lineTo:0}),Ka.of({from:u,to:u+p.length,oldCode:f,newCode:p}),Kr.of(!1)]})}catch(p){if(p instanceof DOMException&&p.name==="AbortError")return;(g=r.onError)==null||g.call(r,p)}finally{this.cleanup(),this.toggleLoading(!1),o.focus()}});this.complete=n}toDOM(n){if(this.dom)return this.dom;this.view=n;const o=n.state.field(L1),r=n.state.field(F1),s=sn("div","cm-ai-input-container");this.inputContainer=s,this.dom=s;const i=sn("form","cm-ai-input-form");this.form=i,i.setAttribute("role","search"),i.setAttribute("aria-label","AI editing instructions"),i.addEventListener("submit",p=>p.preventDefault());const a=sn("input","cm-ai-input");this.input=a,i.append(a),a.placeholder="Editing instructions...",a.setAttribute("aria-label","AI editing instructions"),a.setAttribute("autocomplete","off"),a.setAttribute("spellcheck","true"),a.value=o.inputValue;const l=sn("div","cm-ai-loading-container");this.loadingContainer=l;const d=sn("div","cm-ai-loading-indicator");d.setAttribute("role","status"),d.setAttribute("aria-live","polite"),d.textContent="Generating";const u=sn("button","cm-ai-cancel-button");u.textContent="Cancel",u.setAttribute("aria-label","Cancel code generation"),u.addEventListener("click",this.onCancel),l.append(u,d);const h=sn("div","cm-ai-help-info");this.helpInfo=h;const f=h.appendChild(document.createElement("button"));f.className="cm-ai-help-info-button",f.textContent="Esc to close",f.addEventListener("click",this.onCancel);const m=sn("button","cm-ai-generate-button");function _(p){h.replaceChildren(p?m:f)}m.textContent="\u23CE Generate",m.setAttribute("aria-label","Generate code"),m.addEventListener("click",this.handleSubmit),this.toggleLoading(r),o.shouldFocus&&requestAnimationFrame(()=>{a.value=o.inputValue,a.focus(),n.dispatch({effects:li.of(!1)})}),_(a.value),a.addEventListener("input",function(){n.dispatch({effects:ai.of(a.value)});const p=a.value.trim();p!==g&&(g=p,_(p))}),a.addEventListener("keydown",this.onKeyDown);let g="";return s}toggleLoading(n){var o;this.inputContainer&&this.form&&this.loadingContainer&&this.helpInfo&&((o=this.inputContainer)==null||o.replaceChildren(this.form,n?this.loadingContainer:this.helpInfo))}updateDOM(n,o){return this.dom=n,this.input=n.querySelector(".cm-ai-input"),!0}cleanup(){var n,o,r;(n=this.abortController)==null||n.abort(),this.abortController=null,(o=this.dom)==null||o.remove(),(r=this.input)==null||r.remove(),this.dom=null,this.input=null}destroy(){this.cleanup()}}function FE(t){if(!t.prompt)throw new Error("prompt function is required");return[ii.of(t),Er,L1,ci,F1,[DE,RE],EE,qn.of([{key:Jr.showInput,run:z1}]),Vo.highest([qn.of([{key:Jr.acceptEdit,run:B1},{key:Jr.rejectEdit,run:U1}])]),zE,BE,UE,VE]}const zE=et.updateListener.of(t=>{const e=t.state.field(Er);if(!e.show||!t.docChanged)return;let{lineFrom:n,lineTo:o}=e,r=!1;t.changes.iterChanges((s,i,a,l)=>{const d=t.state.doc.lineAt(s).number;if(d<n){const u=t.state.doc.lineAt(l).number-t.state.doc.lineAt(a).number;n+=u,o+=u,r=!0}else if(d<=o){const u=t.state.doc.lineAt(l).number-t.state.doc.lineAt(a).number;o+=u,r=!0}}),r&&t.view.dispatch({effects:[jr.of({show:!0,lineFrom:n,lineTo:o})]})}),BE=et.decorations.of(t=>{const e=t.state.field(ci);return e?dt.set([dt.mark({class:"cm-new-code-line"}).range(e.from,e.to)]):dt.none}),UE=et.decorations.compute([Er],t=>{const e=t.field(Er),n=t.facet(ii),o=[];if(e.show){const r=e.lineFrom,s=e.lineTo;for(let i=r;i<=s;i++){const a=t.doc.line(i).from;o.push(dt.line({class:"cm-ai-selection"}).range(a)),i===r&&o.push(dt.widget({widget:new LE(n.prompt),side:-1}).range(a))}}return dt.set(o)}),VE=In.define({create:t=>dt.none,update(t,e){const n=e.state.field(ci);return n?dt.set([dt.widget({widget:new PE(n.oldCode),block:!0}).range(n.from)]):dt.none},provide:t=>et.decorations.from(t)}),Xa=In.define({create:()=>({suggestion:null}),update(t,e){const n=e.effects.find(o=>o.is(Za));return e.docChanged||n||e.selection?n&&e.state.doc===n.value.doc?{suggestion:n.value.text}:{suggestion:null}:t}}),Za=Dt.define();class $E extends Vs{constructor(n){super();te(this,"suggestion");this.suggestion=n}toDOM(){const n=document.createElement("span");return n.style.opacity="0.4",n.className="cm-inline-suggestion",n.textContent=this.suggestion,n.setAttribute("role","suggestion"),n.setAttribute("aria-label",`Suggestion: ${this.suggestion}`),n}get lineBreaks(){return this.suggestion.split(`
`).length-1}}class HE{constructor(e){te(this,"cache",new Map);te(this,"timeout");this.timeout=e}get(e){const n=this.cache.get(e);return n?Date.now()-n.timestamp>this.timeout?(this.cache.delete(e),null):n.result:null}set(e,n){this.cache.set(e,{result:n,timestamp:Date.now()})}}const WE=(t,e)=>En.fromClass(class{constructor(){te(this,"abortController",null);te(this,"cache");this.cache=new HE(e.cacheTimeout??1e3)}async update(n){var i,a,l,d,u;if(!n.docChanged||((a=(i=e.events)==null?void 0:i.beforeSuggestionFetch)==null?void 0:a.call(i,n.view))===!1)return;(l=this.abortController)==null||l.abort(),this.abortController=new AbortController;const o=n.state.doc,r=o.toString(),s=this.cache.get(r);if(s)n.view.dispatch({effects:Za.of({text:s,doc:o})});else try{const h=await t(n.state,this.abortController.signal);if(this.abortController.signal.aborted||((u=(d=e.events)==null?void 0:d.shouldShowSuggestion)==null?void 0:u.call(d,n.view,h))===!1)return;this.cache.set(r,h),n.view.dispatch({effects:Za.of({text:h,doc:o})})}catch(h){h instanceof Error&&h.name!=="AbortError"&&console.error("Suggestion fetch error:",h)}}destroy(){var n;(n=this.abortController)==null||n.abort()}}),qE=En.fromClass(class{constructor(){te(this,"decorations");this.decorations=dt.none}update(t){var n;const e=(n=t.state.field(Xa))==null?void 0:n.suggestion;this.decorations=e?function(o,r){const s=o.state.selection.main.head,i=[],a=dt.widget({widget:new $E(r),side:1});return i.push(a.range(s)),dt.set(i)}(t.view,e):dt.none}},{decorations:t=>t.decorations});function GE(t,e,n,o){return{...t.changeByRange(r=>{if(r===t.selection.main)return{changes:{from:n,to:o,insert:e},range:Bo.cursor(n+e.length)};const s=o-n;return!r.empty||s&&t.sliceDoc(r.from-s,r.from)!==t.sliceDoc(n,o)?{range:r}:{changes:{from:r.from-s,to:r.from,insert:e},range:Bo.cursor(r.from-s+e.length)}}),userEvent:"input.complete"}}const V1=t=>{var o,r,s;const e=(o=t.state.field(Xa))==null?void 0:o.suggestion;if(!e)return!1;const n=t.state.facet(Zd);return t.dispatch({effects:Za.of({text:null,doc:t.state.doc})}),(s=(r=n.events)==null?void 0:r.onSuggestionRejected)==null||s.call(r,t,e),!0},YE=qn.of([{key:"Tab",run:t=>{var o,r,s;const e=(o=t.state.field(Xa))==null?void 0:o.suggestion;if(!e)return!1;const n=t.state.facet(Zd);return t.dispatch({...GE(t.state,e,t.state.selection.main.head,t.state.selection.main.head)}),(s=(r=n.events)==null?void 0:r.onSuggestionAccepted)==null||s.call(r,t,e),!0}},{key:"Escape",run:V1}]),Zd=Us.define({combine:t=>t.at(-1)});function $1(t){const{delay:e=500,includeKeymap:n=!0}=t,o=function(r,s,i){let a=()=>{};return(...l)=>(a(),new Promise((d,u)=>{const h=setTimeout(()=>d(r(...l)),s);a=()=>{clearTimeout(h),i!==void 0&&u(i)}}))}(t.fetchFn,e);return[Xa,Zd.of(t),WE(o,t),qE,n?YE:[]]}const H1="packages-install-input",JE=["%alias","%cd","%clear","%debug","%env","%load","%load_ext","%lsmagic","%matplotlib","%pwd","%who_ls","%system","%%time","%%timeit","%%writefile","%%capture","%%html","%%latex"];let Qd;function KE(){const t=async r=>{const s=at.get(qm),i={...s,runtime:{...s.runtime,auto_reload:r}};await Br({config:i}).then(()=>at.set(qm,i))},e=()=>{requestAnimationFrame(()=>{const r=document.getElementById(H1);r&&r.focus()})},n=[{match:"!pip install",onMatch:()=>{at.set(Wm,r=>({...r,isSidebarOpen:!0,selectedPanel:"packages"})),e()},title:"Package Installation",description:c.jsxs(c.Fragment,{children:["The package manager sidebar has been opened.",c.jsx("br",{}),"Install packages directly from there instead."]})},{match:"!uv pip install",onMatch:()=>{at.set(Wm,r=>({...r,isSidebarOpen:!0,selectedPanel:"packages"})),e()},title:"Package Installation",description:c.jsxs(c.Fragment,{children:["The package manager sidebar has been opened.",c.jsx("br",{}),"Install packages directly from there instead."]})},{match:"!uv add",onMatch:()=>{at.set(Wm,r=>({...r,isSidebarOpen:!0,selectedPanel:"packages"})),e()},title:"Package Installation",description:c.jsxs(c.Fragment,{children:["The package manager sidebar has been opened.",c.jsx("br",{}),"Install packages directly from there instead."]})},{match:"%autoreload 2",onMatch:async()=>{await t("autorun")},title:"Module reload",description:c.jsxs(c.Fragment,{children:["Module reload mode set to ",c.jsx("b",{children:"autorun"})," - module changes will re-run the cells that import them."]})},{match:"%autoreload 1",onMatch:async()=>{await t("lazy")},title:"Module reload",description:c.jsxs(c.Fragment,{children:["Module reload mode set to ",c.jsx("b",{children:"lazy"})," - module changes will mark the cells that import them as stale."]})},{match:"%autoreload 0",onMatch:async()=>{await t("off")},title:"Module reload",description:c.jsx(c.Fragment,{children:"Module reload disabled - module changes will not be detected."})},{match:"!ls",onMatch:()=>{},title:"Listing files",description:c.jsxs(c.Fragment,{children:["Shell commands are not directly supported.",c.jsx("br",{}),"Use ",c.jsx("code",{children:"import subprocess; subprocess.run(['ls'])"})," instead."]})},...JE.map(r=>({match:r,onMatch:()=>{},title:c.jsx(U4,{className:"inline",children:r}),description:c.jsxs(c.Fragment,{children:["Magic commands are not supported in marimo. Read more about replacements in the"," ",c.jsx("a",{href:"https://docs.marimo.io/guides/coming_from/jupyter/#adapting-to-the-absence-of-magic-commands",target:"_blank",className:"text-link underline cursor-pointer",rel:"noopener noreferrer",children:"documentation"}),"."]})}))],o=new Map(n.map(r=>[r.match,r]));return et.updateListener.of(r=>{if(r.docChanged){const s=r.state.selection.main,i=r.state.doc,a=i.lineAt(s.head),l=i.sliceString(a.from,s.anchor).trim(),d=o.get(l);d&&(d.onMatch(),Qd?Qd.upsert({title:d.title,description:d.description}):Qd=nt({title:d.title,description:d.description}))}})}const XE=new Set(["Escape","Alt-`"]);function ZE(){const t=V4.filter(e=>!XE.has(e.key));return Vo.highest(qn.of([...t,{key:"Escape",run:e=>{const n=xm(e);return!fa(e)&&n}},{key:"Ctrl-y",run:e=>!!fa(e)&&$4(e)},{key:"Ctrl-n",run:e=>!!fa(e)&&Pc(!0)(e)},{key:"Ctrl-p",run:e=>!!fa(e)&&Pc(!1)(e)}]))}const eu=Dt.define(),tu=Dt.define(),nu=Dt.define();function Ct(t,e){if(!t)throw new Error(e)}function Qa(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>2147483647||t<-2147483648)throw new Error("invalid int 32: "+t)}function ou(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>4294967295||t<0)throw new Error("invalid uint 32: "+t)}function W1(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>3402823466385289e23||t<-3402823466385289e23))throw new Error("invalid float 32: "+t)}const q1=Symbol("@bufbuild/protobuf/enum-type");function QE(t){const e=t[q1];return Ct(e,"missing enum type on enum object"),e}function G1(t,e,n,o){t[q1]=Y1(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function Y1(t,e,n){const o=Object.create(null),r=Object.create(null),s=[];for(const i of e){const a=J1(i);s.push(a),o[i.name]=a,r[i.no]=a}return{typeName:t,values:s,findName:i=>o[i],findNumber:i=>r[i]}}function e5(t,e,n){const o={};for(const r of e){const s=J1(r);o[s.localName]=s.no,o[s.no]=s.localName}return G1(o,t,e),o}function J1(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Rt{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const o=this.getType().runtime.bin,r=o.makeReadOptions(n);return o.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,n){const o=this.getType(),r=o.runtime.json,s=r.makeReadOptions(n);return r.readMessage(o,e,s,this),this}fromJsonString(e,n){let o;try{o=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(o,n)}toBinary(e){const n=this.getType().runtime.bin,o=n.makeWriteOptions(e),r=o.writerFactory();return n.writeMessage(this,r,o),r.finish()}toJson(e){const n=this.getType().runtime.json,o=n.makeWriteOptions(e);return n.writeMessage(this,o)}toJsonString(e){var n;const o=this.toJson(e);return JSON.stringify(o,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function t5(){let t=0,e=0;for(let o=0;o<28;o+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<o,!(128&r))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(15&n)<<28,e=(112&n)>>4,!(128&n))return this.assertBounds(),[t,e];for(let o=3;o<=31;o+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<o,!(128&r))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ru(t,e,n){for(let s=0;s<28;s+=7){const i=t>>>s,a=!(!(i>>>7)&&e==0),l=255&(a?128|i:i);if(n.push(l),!a)return}const o=t>>>28&15|(7&e)<<4,r=!!(e>>3);if(n.push(255&(r?128|o:o)),r){for(let s=3;s<31;s+=7){const i=e>>>s,a=!!(i>>>7),l=255&(a?128|i:i);if(n.push(l),!a)return}n.push(e>>>31&1)}}const el=4294967296;function K1(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let o=0,r=0;function s(i,a){const l=Number(t.slice(i,a));r*=n,o=o*n+l,o>=el&&(r+=o/el|0,o%=el)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Z1(o,r):su(o,r)}function X1(t,e){if({lo:t,hi:e}=function(l,d){return{lo:l>>>0,hi:d>>>0}}(t,e),e<=2097151)return String(el*e+t);const n=16777215&(t>>>24|e<<8),o=e>>16&65535;let r=(16777215&t)+6777216*n+6710656*o,s=n+8147497*o,i=2*o;const a=1e7;return r>=a&&(s+=Math.floor(r/a),r%=a),s>=a&&(i+=Math.floor(s/a),s%=a),i.toString()+Q1(s)+Q1(r)}function su(t,e){return{lo:0|t,hi:0|e}}function Z1(t,e){return e=~e,t?t=1+~t:e+=1,su(t,e)}const Q1=t=>{const e=String(t);return"0000000".slice(e.length)+e};function e_(t,e){if(t>=0){for(;t>127;)e.push(127&t|128),t>>>=7;e.push(t)}else{for(let n=0;n<9;n++)e.push(127&t|128),t>>=7;e.push(1)}}function n5(){let t=this.buf[this.pos++],e=127&t;if(!(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<7,!(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<14,!(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<21,!(128&t))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(15&t)<<28;for(let n=5;128&t&&n<10;n++)t=this.buf[this.pos++];if(128&t)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var o5={};const yt=function(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||o5.BUF_BIGINT_DISABLE!=="1")){const o=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),s=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(a){const l=typeof a=="bigint"?a:BigInt(a);if(l>r||l<o)throw new Error(`int64 invalid: ${a}`);return l},uParse(a){const l=typeof a=="bigint"?a:BigInt(a);if(l>i||l<s)throw new Error(`uint64 invalid: ${a}`);return l},enc(a){return t.setBigInt64(0,this.parse(a),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(a){return t.setBigInt64(0,this.uParse(a),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec:(a,l)=>(t.setInt32(0,a,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)),uDec:(a,l)=>(t.setInt32(0,a,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0))}}const e=o=>Ct(/^-?[0-9]+$/.test(o),`int64 invalid: ${o}`),n=o=>Ct(/^[0-9]+$/.test(o),`uint64 invalid: ${o}`);return{zero:"0",supported:!1,parse:o=>(typeof o!="string"&&(o=o.toString()),e(o),o),uParse:o=>(typeof o!="string"&&(o=o.toString()),n(o),o),enc:o=>(typeof o!="string"&&(o=o.toString()),e(o),K1(o)),uEnc:o=>(typeof o!="string"&&(o=o.toString()),n(o),K1(o)),dec:(o,r)=>function(s,i){let a=su(s,i);const l=2147483648&a.hi;l&&(a=Z1(a.lo,a.hi));const d=X1(a.lo,a.hi);return l?"-"+d:d}(o,r),uDec:(o,r)=>X1(o,r)}}();var he,Wo,At;function qo(t,e,n){if(e===n)return!0;if(t==he.BYTES){if(!(e instanceof Uint8Array&&n instanceof Uint8Array)||e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==n[o])return!1;return!0}switch(t){case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return e==n}return!1}function Xr(t,e){switch(t){case he.BOOL:return!1;case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return e==0?yt.zero:"0";case he.DOUBLE:case he.FLOAT:return 0;case he.BYTES:return new Uint8Array(0);case he.STRING:return"";default:return 0}}function t_(t,e){switch(t){case he.BOOL:return e===!1;case he.STRING:return e==="";case he.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(he||(he={})),function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"}(Wo||(Wo={})),function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"}(At||(At={}));class r5{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),o=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],o),o+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(ou(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Qa(e),e_(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){W1(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){ou(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Qa(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Qa(e),e_(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let n=new Uint8Array(8),o=new DataView(n.buffer),r=yt.enc(e);return o.setInt32(0,r.lo,!0),o.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),o=new DataView(n.buffer),r=yt.uEnc(e);return o.setInt32(0,r.lo,!0),o.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=yt.enc(e);return ru(n.lo,n.hi,this.buf),this}sint64(e){let n=yt.enc(e),o=n.hi>>31;return ru(n.lo<<1^o,(n.hi<<1|n.lo>>>31)^o,this.buf),this}uint64(e){let n=yt.uEnc(e);return ru(n.lo,n.hi,this.buf),this}}class s5{constructor(e,n){this.varint64=t5,this.uint32=n5,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,o=7&e;if(n<=0||o<0||o>5)throw new Error("illegal tag: field no "+n+" wire type "+o);return[n,o]}skip(e,n){let o=this.pos;switch(e){case At.Varint:for(;128&this.buf[this.pos++];);break;case At.Bit64:this.pos+=4;case At.Bit32:this.pos+=4;break;case At.LengthDelimited:let r=this.uint32();this.pos+=r;break;case At.StartGroup:for(;;){const[s,i]=this.tag();if(i===At.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(i,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(o,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return yt.dec(...this.varint64())}uint64(){return yt.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),o=-(1&e);return e=(e>>>1|(1&n)<<31)^o,n=n>>>1^o,yt.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return yt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return yt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function n_(t){const e=t.field.localName,n=Object.create(null);return n[e]=function(o){const r=o.field;if(r.repeated)return[];if(r.default!==void 0)return r.default;switch(r.kind){case"enum":return r.T.values[0].no;case"scalar":return Xr(r.T,r.L);case"message":const s=r.T,i=new s;return s.fieldWrapper?s.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}(t),[n,()=>n[e]]}let _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),tl=[];for(let t=0;t<_o.length;t++)tl[_o[t].charCodeAt(0)]=t;tl[45]=_o.indexOf("+"),tl[95]=_o.indexOf("/");const nl={dec(t){let e=3*t.length/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n,o=new Uint8Array(e),r=0,s=0,i=0;for(let a=0;a<t.length;a++){if(n=tl[t.charCodeAt(a)],n===void 0)switch(t[a]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:i=n,s=1;break;case 1:o[r++]=i<<2|(48&n)>>4,i=n,s=2;break;case 2:o[r++]=(15&i)<<4|(60&n)>>2,i=n,s=3;break;case 3:o[r++]=(3&i)<<6|n,s=0}}if(s==1)throw Error("invalid base64 string.");return o.subarray(0,r)},enc(t){let e,n="",o=0,r=0;for(let s=0;s<t.length;s++)switch(e=t[s],o){case 0:n+=_o[e>>2],r=(3&e)<<4,o=1;break;case 1:n+=_o[r|e>>4],r=(15&e)<<2,o=2;break;case 2:n+=_o[r|e>>6],n+=_o[63&e],o=0}return o&&(n+=_o[r],n+="=",o==1&&(n+="=")),n}};function i5(t,e,n){r_(e,t);const o=e.runtime.bin.makeReadOptions(n),r=function(a,l){if(!l.repeated&&(l.kind=="enum"||l.kind=="scalar")){for(let d=a.length-1;d>=0;--d)if(a[d].no==l.no)return[a[d]];return[]}return a.filter(d=>d.no===l.no)}(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,i]=n_(e);for(const a of r)e.runtime.bin.readField(s,o.readerFactory(a.data),e.field,a.wireType,o);return i()}function a5(t,e,n,o){r_(e,t);const r=e.runtime.bin.makeReadOptions(o),s=e.runtime.bin.makeWriteOptions(o);if(o_(t,e)){const d=t.getType().runtime.bin.listUnknownFields(t).filter(u=>u.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const u of d)t.getType().runtime.bin.onUnknownField(t,u.no,u.wireType,u.data)}const i=s.writerFactory();let a=e.field;a.opt||a.repeated||a.kind!="enum"&&a.kind!="scalar"||(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,i,s);const l=r.readerFactory(i.finish());for(;l.pos<l.len;){const[d,u]=l.tag(),h=l.skip(u,d);t.getType().runtime.bin.onUnknownField(t,d,u,h)}}function o_(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(o=>o.no==e.field.no)}function r_(t,e){Ct(t.extendee.typeName==e.getType().typeName,`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}function s_(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!t_(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function i_(t,e){const n=t.localName,o=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=o?t.T.values[0].no:void 0;break;case"scalar":e[n]=o?Xr(t.T,t.L):void 0;break;case"message":e[n]=void 0}}function Ir(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(Rt.prototype).every(o=>o in t&&typeof t[o]=="function"))return!1;const n=t.getType();return n!==null&&typeof n=="function"&&"typeName"in n&&typeof n.typeName=="string"&&(e===void 0||n.typeName==e.typeName)}function a_(t,e){return Ir(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}he.DOUBLE,he.FLOAT,he.INT64,he.UINT64,he.INT32,he.UINT32,he.BOOL,he.STRING,he.BYTES;const l_={ignoreUnknownFields:!1},c_={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function l5(t){return t?Object.assign(Object.assign({},l_),t):l_}function c5(t){return t?Object.assign(Object.assign({},c_),t):c_}const ol=Symbol(),rl=Symbol();function no(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function d_(t,e,n,o,r){let s=n.localName;if(n.repeated){if(Ct(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${no(e)}`);const i=t[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${no(a)}`);switch(n.kind){case"message":i.push(n.T.fromJson(a,o));break;case"enum":const l=iu(n.T,a,o.ignoreUnknownFields,!0);l!==rl&&i.push(l);break;case"scalar":try{i.push(di(n.T,a,n.L,!0))}catch(d){let u=`cannot decode field ${r.typeName}.${n.name} from JSON: ${no(a)}`;throw d instanceof Error&&d.message.length>0&&(u+=`: ${d.message}`),new Error(u)}}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${no(e)}`);const i=t[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: map value null`);let d;try{d=d5(n.K,a)}catch(u){let h=`cannot decode map key for field ${r.typeName}.${n.name} from JSON: ${no(e)}`;throw u instanceof Error&&u.message.length>0&&(h+=`: ${u.message}`),new Error(h)}switch(n.V.kind){case"message":i[d]=n.V.T.fromJson(l,o);break;case"enum":const u=iu(n.V.T,l,o.ignoreUnknownFields,!0);u!==rl&&(i[d]=u);break;case"scalar":try{i[d]=di(n.V.T,l,Wo.BIGINT,!0)}catch(h){let f=`cannot decode map value for field ${r.typeName}.${n.name} from JSON: ${no(e)}`;throw h instanceof Error&&h.message.length>0&&(f+=`: ${h.message}`),new Error(f)}}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const i=n.T;if(e===null&&i.typeName!="google.protobuf.Value")return;let a=t[s];Ir(a)?a.fromJson(e,o):(t[s]=a=i.fromJson(e,o),i.fieldWrapper&&!n.oneof&&(t[s]=i.fieldWrapper.unwrapField(a)));break;case"enum":const l=iu(n.T,e,o.ignoreUnknownFields,!1);switch(l){case ol:i_(n,t);break;case rl:break;default:t[s]=l}break;case"scalar":try{const d=di(n.T,e,n.L,!1);d===ol?i_(n,t):t[s]=d}catch(d){let u=`cannot decode field ${r.typeName}.${n.name} from JSON: ${no(e)}`;throw d instanceof Error&&d.message.length>0&&(u+=`: ${d.message}`),new Error(u)}}}function d5(t,e){if(t===he.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1}return di(t,e,Wo.BIGINT,!0).toString()}function di(t,e,n,o){if(e===null)return o?Xr(t,n):ol;switch(t){case he.DOUBLE:case he.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==he.FLOAT&&W1(r),r;case he.INT32:case he.FIXED32:case he.SFIXED32:case he.SINT32:case he.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==he.UINT32||t==he.FIXED32?ou(s):Qa(s),s;case he.INT64:case he.SFIXED64:case he.SINT64:if(typeof e!="number"&&typeof e!="string")break;const i=yt.parse(e);return n?i.toString():i;case he.FIXED64:case he.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=yt.uParse(e);return n?a.toString():a;case he.BOOL:if(typeof e!="boolean")break;return e;case he.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case he.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return nl.dec(e)}throw new Error}function iu(t,e,n,o){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:o?t.values[0].no:ol;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return rl}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${no(e)}`)}function u5(t){return!(!t.repeated&&t.kind!="map")||!t.oneof&&t.kind!="message"&&!t.opt&&!t.req}function u_(t,e,n){if(t.kind=="map"){Ct(typeof e=="object"&&e!=null);const o={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[i,a]of r)o[i.toString()]=sl(t.V.T,a);break;case"message":for(const[i,a]of r)o[i.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[i,a]of r)o[i.toString()]=au(s,a,n.enumAsInteger)}return n.emitDefaultValues||r.length>0?o:void 0}if(t.repeated){Ct(Array.isArray(e));const o=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)o.push(sl(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)o.push(au(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)o.push(e[r].toJson(n))}return n.emitDefaultValues||o.length>0?o:void 0}switch(t.kind){case"scalar":return sl(t.T,e);case"enum":return au(t.T,e,n.enumAsInteger);case"message":return a_(t.T,e).toJson(n)}}function au(t,e,n){var o;if(Ct(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(o=r==null?void 0:r.name)!==null&&o!==void 0?o:e}function sl(t,e){switch(t){case he.INT32:case he.SFIXED32:case he.SINT32:case he.FIXED32:case he.UINT32:return Ct(typeof e=="number"),e;case he.FLOAT:case he.DOUBLE:return Ct(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case he.STRING:return Ct(typeof e=="string"),e;case he.BOOL:return Ct(typeof e=="boolean"),e;case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return Ct(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case he.BYTES:return Ct(e instanceof Uint8Array),nl.enc(e)}}const Zr=Symbol("@bufbuild/protobuf/unknown-fields"),h_={readUnknownFields:!0,readerFactory:t=>new s5(t)},f_={writeUnknownFields:!0,writerFactory:()=>new r5};function h5(t){return t?Object.assign(Object.assign({},h_),t):h_}function f5(t){return t?Object.assign(Object.assign({},f_),t):f_}function m_(t,e,n,o,r){let{repeated:s,localName:i}=n;switch(n.oneof&&((t=t[n.oneof.localName]).case!=i&&delete t.value,t.case=i,i="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?he.INT32:n.T;let l=al;if(n.kind=="scalar"&&n.L>0&&(l=m5),s){let f=t[i];if(o==At.LengthDelimited&&a!=he.STRING&&a!=he.BYTES){let m=e.uint32()+e.pos;for(;e.pos<m;)f.push(l(e,a))}else f.push(l(e,a))}else t[i]=l(e,a);break;case"message":const d=n.T;s?t[i].push(il(e,new d,r,n)):Ir(t[i])?il(e,t[i],r,n):(t[i]=il(e,new d,r,n),!d.fieldWrapper||n.oneof||n.repeated||(t[i]=d.fieldWrapper.unwrapField(t[i])));break;case"map":let[u,h]=function(f,m,_){const g=m.uint32(),p=m.pos+g;let b,x;for(;m.pos<p;){const[y]=m.tag();switch(y){case 1:b=al(m,f.K);break;case 2:switch(f.V.kind){case"scalar":x=al(m,f.V.T);break;case"enum":x=m.int32();break;case"message":x=il(m,new f.V.T,_,void 0)}}}if(b===void 0&&(b=Xr(f.K,Wo.BIGINT)),typeof b!="string"&&typeof b!="number"&&(b=b.toString()),x===void 0)switch(f.V.kind){case"scalar":x=Xr(f.V.T,Wo.BIGINT);break;case"enum":x=f.V.T.values[0].no;break;case"message":x=new f.V.T}return[b,x]}(n,e,r);t[i][u]=h}}function il(t,e,n,o){const r=e.getType().runtime.bin,s=o==null?void 0:o.delimited;return r.readMessage(e,t,s?o.no:t.uint32(),n,s),e}function m5(t,e){const n=al(t,e);return typeof n=="bigint"?n.toString():n}function al(t,e){switch(e){case he.STRING:return t.string();case he.BOOL:return t.bool();case he.DOUBLE:return t.double();case he.FLOAT:return t.float();case he.INT32:return t.int32();case he.INT64:return t.int64();case he.UINT64:return t.uint64();case he.FIXED64:return t.fixed64();case he.BYTES:return t.bytes();case he.FIXED32:return t.fixed32();case he.SFIXED32:return t.sfixed32();case he.SFIXED64:return t.sfixed64();case he.SINT64:return t.sint64();case he.UINT32:return t.uint32();case he.SINT32:return t.sint32()}}function p_(t,e,n,o){Ct(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?he.INT32:t.T;if(r)if(Ct(Array.isArray(e)),t.packed)(function(i,a,l,d){if(!d.length)return;i.tag(l,At.LengthDelimited).fork();let[,u]=__(a);for(let h=0;h<d.length;h++)i[u](d[h]);i.join()})(n,s,t.no,e);else for(const i of e)ui(n,s,t.no,i);else ui(n,s,t.no,e);break;case"message":if(r){Ct(Array.isArray(e));for(const i of e)g_(n,o,t,i)}else g_(n,o,t,e);break;case"map":Ct(typeof e=="object"&&e!=null);for(const[i,a]of Object.entries(e))p5(n,o,t,i,a)}}function p5(t,e,n,o,r){t.tag(n.no,At.LengthDelimited),t.fork();let s=o;switch(n.K){case he.INT32:case he.FIXED32:case he.UINT32:case he.SFIXED32:case he.SINT32:s=Number.parseInt(o);break;case he.BOOL:Ct(o=="true"||o=="false"),s=o=="true"}switch(ui(t,n.K,1,s),n.V.kind){case"scalar":ui(t,n.V.T,2,r);break;case"enum":ui(t,he.INT32,2,r);break;case"message":Ct(r!==void 0),t.tag(2,At.LengthDelimited).bytes(r.toBinary(e))}t.join()}function g_(t,e,n,o){const r=a_(n.T,o);n.delimited?t.tag(n.no,At.StartGroup).raw(r.toBinary(e)).tag(n.no,At.EndGroup):t.tag(n.no,At.LengthDelimited).bytes(r.toBinary(e))}function ui(t,e,n,o){Ct(o!==void 0);let[r,s]=__(e);t.tag(n,r)[s](o)}function __(t){let e=At.Varint;switch(t){case he.BYTES:case he.STRING:e=At.LengthDelimited;break;case he.DOUBLE:case he.FIXED64:case he.SFIXED64:e=At.Bit64;break;case he.FIXED32:case he.SFIXED32:case he.FLOAT:e=At.Bit32}return[e,he[t].toLowerCase()]}function ll(t){if(t===void 0)return t;if(Ir(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function hi(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class g5{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const o of this.list())n[o.jsonName]=n[o.name]=o;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const o of this.list())n[o.no]=o;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const o of this.list())o.oneof?o.oneof!==n&&(n=o.oneof,e.push(n)):e.push(o)}return this.members}}function b_(t,e){const n=x_(t);return e?n:w5(y5(n))}const _5=x_;function x_(t){let e=!1;const n=[];for(let o=0;o<t.length;o++){let r=t.charAt(o);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const b5=new Set(["constructor","toString","toJSON","valueOf"]),x5=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),y_=t=>`${t}$`,y5=t=>x5.has(t)?y_(t):t,w5=t=>b5.has(t)?y_(t):t;class v5{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=b_(e,!1)}addField(e){Ct(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const we=(w_=t=>new g5(t,e=>function(n){var o,r,s,i,a,l;const d=[];let u;for(const h of typeof n=="function"?n():n){const f=h;if(f.localName=b_(h.name,h.oneof!==void 0),f.jsonName=(o=h.jsonName)!==null&&o!==void 0?o:_5(h.name),f.repeated=(r=h.repeated)!==null&&r!==void 0&&r,h.kind=="scalar"&&(f.L=(s=h.L)!==null&&s!==void 0?s:Wo.BIGINT),f.delimited=(i=h.delimited)!==null&&i!==void 0&&i,f.req=(a=h.req)!==null&&a!==void 0&&a,f.opt=(l=h.opt)!==null&&l!==void 0&&l,h.packed===void 0&&(f.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=he.BYTES&&h.T!=he.STRING),h.oneof!==void 0){const m=typeof h.oneof=="string"?h.oneof:h.oneof.name;u&&u.name==m||(u=new v5(m)),f.oneof=u,u.addField(f)}d.push(f)}return d}(e)),v_=t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,o=t;if(e.repeated)o[n]=[];else switch(e.kind){case"oneof":o[n]={case:void 0};break;case"enum":o[n]=0;break;case"map":o[n]={};break;case"scalar":o[n]=Xr(e.T,e.L)}}},{syntax:"proto3",json:{makeReadOptions:l5,makeWriteOptions:c5,readMessage(t,e,n,o){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${no(e)}`);o=o??new t;const r=new Map,s=n.typeRegistry;for(const[i,a]of Object.entries(e)){const l=t.fields.findJsonName(i);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const d=r.get(l.oneof);if(d!==void 0)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${d}", "${i}"`);r.set(l.oneof,i)}d_(o,a,l,n,t)}else{let d=!1;if(s!=null&&s.findExtension&&i.startsWith("[")&&i.endsWith("]")){const u=s.findExtension(i.substring(1,i.length-1));if(u&&u.extendee.typeName==t.typeName){d=!0;const[h,f]=n_(u);d_(h,a,u.field,n,u),a5(o,u,f(),n)}}if(!d&&!n.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${i}" is unknown`)}}return o},writeMessage(t,e){const n=t.getType(),o={};let r;try{for(r of n.fields.byNumber()){if(!s_(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!u5(r))continue}const i=u_(r,r.oneof?t[r.oneof.localName].value:t[r.localName],e);i!==void 0&&(o[e.useProtoFieldName?r.name:r.jsonName]=i)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const i of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,i.no);if(a&&o_(t,a)){const l=i5(t,a,e),d=u_(a.field,l,e);d!==void 0&&(o[a.field.jsonName]=d)}}}catch(s){const i=r?`cannot encode field ${n.typeName}.${r.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(i+(a.length>0?`: ${a}`:""))}return o},readScalar:(t,e,n)=>di(t,e,n??Wo.BIGINT,!0),writeScalar(t,e,n){if(e!==void 0)return n||t_(t,e)?sl(t,e):void 0},debug:no},bin:{makeReadOptions:h5,makeWriteOptions:f5,listUnknownFields(t){var e;return(e=t[Zr])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Zr]},writeUnknownFields(t,e){const n=t[Zr];if(n)for(const o of n)e.tag(o.no,o.wireType).raw(o.data)},onUnknownField(t,e,n,o){const r=t;Array.isArray(r[Zr])||(r[Zr]=[]),r[Zr].push({no:e,wireType:n,data:o})},readMessage(t,e,n,o,r){const s=t.getType(),i=r?e.len:e.pos+n;let a,l;for(;e.pos<i&&([a,l]=e.tag(),r!==!0||l!=At.EndGroup);){const d=s.fields.find(a);if(!d){const u=e.skip(l,a);o.readUnknownFields&&this.onUnknownField(t,a,l,u);continue}m_(t,e,d,l,o)}if(r&&(l!=At.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:m_,writeMessage(t,e,n){const o=t.getType();for(const r of o.fields.byNumber())if(s_(r,t))p_(r,r.oneof?t[r.oneof.localName].value:t[r.localName],e,n);else if(r.req)throw new Error(`cannot encode field ${o.typeName}.${r.name} to binary: required field not set`);return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,o){e!==void 0&&p_(t,e,n,o)}},util:Object.assign(Object.assign({},{setEnumType:G1,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const o of n.fields.byMember()){const r=o.localName,s=e,i=t;if(i[r]!=null)switch(o.kind){case"oneof":const a=i[r].case;if(a===void 0)continue;const l=o.findField(a);let d=i[r].value;l&&l.kind=="message"&&!Ir(d,l.T)?d=new l.T(d):l&&l.kind==="scalar"&&l.T===he.BYTES&&(d=hi(d)),s[r]={case:a,value:d};break;case"scalar":case"enum":let u=i[r];o.T===he.BYTES&&(u=o.repeated?u.map(hi):hi(u)),s[r]=u;break;case"map":switch(o.V.kind){case"scalar":case"enum":if(o.V.T===he.BYTES)for(const[m,_]of Object.entries(i[r]))s[r][m]=hi(_);else Object.assign(s[r],i[r]);break;case"message":const f=o.V.T;for(const m of Object.keys(i[r])){let _=i[r][m];f.fieldWrapper||(_=new f(_)),s[r][m]=_}}break;case"message":const h=o.T;if(o.repeated)s[r]=i[r].map(f=>Ir(f,h)?f:new h(f));else{const f=i[r];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[r]=hi(f):s[r]=f:s[r]=Ir(f,h)?f:new h(f)}}}},equals:(t,e,n)=>e===n||!(!e||!n)&&t.fields.byMember().every(o=>{const r=e[o.localName],s=n[o.localName];if(o.repeated){if(r.length!==s.length)return!1;switch(o.kind){case"message":return r.every((i,a)=>o.T.equals(i,s[a]));case"scalar":return r.every((i,a)=>qo(o.T,i,s[a]));case"enum":return r.every((i,a)=>qo(he.INT32,i,s[a]))}throw new Error(`repeated cannot contain ${o.kind}`)}switch(o.kind){case"message":return o.T.equals(r,s);case"enum":return qo(he.INT32,r,s);case"scalar":return qo(o.T,r,s);case"oneof":if(r.case!==s.case)return!1;const i=o.findField(r.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.T.equals(r.value,s.value);case"enum":return qo(he.INT32,r.value,s.value);case"scalar":return qo(i.T,r.value,s.value)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":const a=Object.keys(r).concat(Object.keys(s));switch(o.V.kind){case"message":const l=o.V.T;return a.every(u=>l.equals(r[u],s[u]));case"enum":return a.every(u=>qo(he.INT32,r[u],s[u]));case"scalar":const d=o.V.T;return a.every(u=>qo(d,r[u],s[u]))}}}),clone(t){const e=t.getType(),n=new e,o=n;for(const r of e.fields.byMember()){const s=t[r.localName];let i;if(r.repeated)i=s.map(ll);else if(r.kind=="map"){i=o[r.localName];for(const[a,l]of Object.entries(s))i[a]=ll(l)}else i=r.kind=="oneof"?r.findField(s.case)?{case:s.case,value:ll(s.value)}:{case:void 0}:ll(s);o[r.localName]=i}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(o,r.no,r.wireType,r.data);return n}}),{newFieldList:w_,initFields:v_}),makeMessageType(t,e,n){return function(o,r,s,i){var a;const l=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:r.substring(r.lastIndexOf(".")+1),d={[l]:function(u){o.util.initFields(this),o.util.initPartial(u,this)}}[l];return Object.setPrototypeOf(d.prototype,new Rt),Object.assign(d,{runtime:o,typeName:r,fields:o.util.newFieldList(s),fromBinary:(u,h)=>new d().fromBinary(u,h),fromJson:(u,h)=>new d().fromJson(u,h),fromJsonString:(u,h)=>new d().fromJsonString(u,h),equals:(u,h)=>o.util.equals(d,u,h)}),d}(this,t,e,n)},makeEnum:e5,makeEnumType:Y1,getEnumType:QE,makeExtension(t,e,n){return function(o,r,s,i){let a;return{typeName:r,extendee:s,get field(){if(!a){const l=typeof i=="function"?i():i;l.name=r.split(".").pop(),l.jsonName=`[${r}]`,a=o.util.newFieldList([l]).list()[0]}return a},runtime:o}}(this,t,e,n)}});var w_,v_,Mn,lu,cl,fi,dl,mi,Go;(function(t){t[t.Unary=0]="Unary",t[t.ServerStreaming=1]="ServerStreaming",t[t.ClientStreaming=2]="ClientStreaming",t[t.BiDiStreaming=3]="BiDiStreaming"})(Mn||(Mn={})),function(t){t[t.NoSideEffects=1]="NoSideEffects",t[t.Idempotent=2]="Idempotent"}(lu||(lu={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.JUPYTER_FORMAT=77]="JUPYTER_FORMAT"}(cl||(cl={})),we.util.setEnumType(cl,"exa.codeium_common_pb.ExperimentKey",[{no:0,name:"UNSPECIFIED"},{no:77,name:"JUPYTER_FORMAT"}]),function(t){t[t.CODEIUM=0]="CODEIUM"}(fi||(fi={})),we.util.setEnumType(fi,"exa.codeium_common_pb.AuthSource",[{no:0,name:"AUTH_SOURCE_CODEIUM"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ENABLE_CODEIUM=1]="ENABLE_CODEIUM",t[t.DISABLE_CODEIUM=2]="DISABLE_CODEIUM",t[t.SHOW_PREVIOUS_COMPLETION=3]="SHOW_PREVIOUS_COMPLETION",t[t.SHOW_NEXT_COMPLETION=4]="SHOW_NEXT_COMPLETION"}(dl||(dl={})),we.util.setEnumType(dl,"exa.codeium_common_pb.EventType",[{no:0,name:"EVENT_TYPE_UNSPECIFIED"},{no:1,name:"EVENT_TYPE_ENABLE_CODEIUM"},{no:2,name:"EVENT_TYPE_DISABLE_CODEIUM"},{no:3,name:"EVENT_TYPE_SHOW_PREVIOUS_COMPLETION"},{no:4,name:"EVENT_TYPE_SHOW_NEXT_COMPLETION"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.TYPING_AS_SUGGESTED=1]="TYPING_AS_SUGGESTED",t[t.CACHE=2]="CACHE",t[t.NETWORK=3]="NETWORK"}(mi||(mi={})),we.util.setEnumType(mi,"exa.codeium_common_pb.CompletionSource",[{no:0,name:"COMPLETION_SOURCE_UNSPECIFIED"},{no:1,name:"COMPLETION_SOURCE_TYPING_AS_SUGGESTED"},{no:2,name:"COMPLETION_SOURCE_CACHE"},{no:3,name:"COMPLETION_SOURCE_NETWORK"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.C=1]="C",t[t.CLOJURE=2]="CLOJURE",t[t.COFFEESCRIPT=3]="COFFEESCRIPT",t[t.CPP=4]="CPP",t[t.CSHARP=5]="CSHARP",t[t.CSS=6]="CSS",t[t.CUDACPP=7]="CUDACPP",t[t.DOCKERFILE=8]="DOCKERFILE",t[t.GO=9]="GO",t[t.GROOVY=10]="GROOVY",t[t.HANDLEBARS=11]="HANDLEBARS",t[t.HASKELL=12]="HASKELL",t[t.HCL=13]="HCL",t[t.HTML=14]="HTML",t[t.INI=15]="INI",t[t.JAVA=16]="JAVA",t[t.JAVASCRIPT=17]="JAVASCRIPT",t[t.JSON=18]="JSON",t[t.JULIA=19]="JULIA",t[t.KOTLIN=20]="KOTLIN",t[t.LATEX=21]="LATEX",t[t.LESS=22]="LESS",t[t.LUA=23]="LUA",t[t.MAKEFILE=24]="MAKEFILE",t[t.MARKDOWN=25]="MARKDOWN",t[t.OBJECTIVEC=26]="OBJECTIVEC",t[t.OBJECTIVECPP=27]="OBJECTIVECPP",t[t.PERL=28]="PERL",t[t.PHP=29]="PHP",t[t.PLAINTEXT=30]="PLAINTEXT",t[t.PROTOBUF=31]="PROTOBUF",t[t.PBTXT=32]="PBTXT",t[t.PYTHON=33]="PYTHON",t[t.R=34]="R",t[t.RUBY=35]="RUBY",t[t.RUST=36]="RUST",t[t.SASS=37]="SASS",t[t.SCALA=38]="SCALA",t[t.SCSS=39]="SCSS",t[t.SHELL=40]="SHELL",t[t.SQL=41]="SQL",t[t.STARLARK=42]="STARLARK",t[t.SWIFT=43]="SWIFT",t[t.TSX=44]="TSX",t[t.TYPESCRIPT=45]="TYPESCRIPT",t[t.VISUALBASIC=46]="VISUALBASIC",t[t.VUE=47]="VUE",t[t.XML=48]="XML",t[t.XSL=49]="XSL",t[t.YAML=50]="YAML",t[t.SVELTE=51]="SVELTE",t[t.TOML=52]="TOML",t[t.DART=53]="DART",t[t.RST=54]="RST",t[t.OCAML=55]="OCAML",t[t.CMAKE=56]="CMAKE",t[t.PASCAL=57]="PASCAL",t[t.ELIXIR=58]="ELIXIR",t[t.FSHARP=59]="FSHARP",t[t.LISP=60]="LISP",t[t.MATLAB=61]="MATLAB",t[t.POWERSHELL=62]="POWERSHELL",t[t.SOLIDITY=63]="SOLIDITY",t[t.ADA=64]="ADA",t[t.OCAML_INTERFACE=65]="OCAML_INTERFACE"}(Go||(Go={})),we.util.setEnumType(Go,"exa.codeium_common_pb.Language",[{no:0,name:"LANGUAGE_UNSPECIFIED"},{no:1,name:"LANGUAGE_C"},{no:2,name:"LANGUAGE_CLOJURE"},{no:3,name:"LANGUAGE_COFFEESCRIPT"},{no:4,name:"LANGUAGE_CPP"},{no:5,name:"LANGUAGE_CSHARP"},{no:6,name:"LANGUAGE_CSS"},{no:7,name:"LANGUAGE_CUDACPP"},{no:8,name:"LANGUAGE_DOCKERFILE"},{no:9,name:"LANGUAGE_GO"},{no:10,name:"LANGUAGE_GROOVY"},{no:11,name:"LANGUAGE_HANDLEBARS"},{no:12,name:"LANGUAGE_HASKELL"},{no:13,name:"LANGUAGE_HCL"},{no:14,name:"LANGUAGE_HTML"},{no:15,name:"LANGUAGE_INI"},{no:16,name:"LANGUAGE_JAVA"},{no:17,name:"LANGUAGE_JAVASCRIPT"},{no:18,name:"LANGUAGE_JSON"},{no:19,name:"LANGUAGE_JULIA"},{no:20,name:"LANGUAGE_KOTLIN"},{no:21,name:"LANGUAGE_LATEX"},{no:22,name:"LANGUAGE_LESS"},{no:23,name:"LANGUAGE_LUA"},{no:24,name:"LANGUAGE_MAKEFILE"},{no:25,name:"LANGUAGE_MARKDOWN"},{no:26,name:"LANGUAGE_OBJECTIVEC"},{no:27,name:"LANGUAGE_OBJECTIVECPP"},{no:28,name:"LANGUAGE_PERL"},{no:29,name:"LANGUAGE_PHP"},{no:30,name:"LANGUAGE_PLAINTEXT"},{no:31,name:"LANGUAGE_PROTOBUF"},{no:32,name:"LANGUAGE_PBTXT"},{no:33,name:"LANGUAGE_PYTHON"},{no:34,name:"LANGUAGE_R"},{no:35,name:"LANGUAGE_RUBY"},{no:36,name:"LANGUAGE_RUST"},{no:37,name:"LANGUAGE_SASS"},{no:38,name:"LANGUAGE_SCALA"},{no:39,name:"LANGUAGE_SCSS"},{no:40,name:"LANGUAGE_SHELL"},{no:41,name:"LANGUAGE_SQL"},{no:42,name:"LANGUAGE_STARLARK"},{no:43,name:"LANGUAGE_SWIFT"},{no:44,name:"LANGUAGE_TSX"},{no:45,name:"LANGUAGE_TYPESCRIPT"},{no:46,name:"LANGUAGE_VISUALBASIC"},{no:47,name:"LANGUAGE_VUE"},{no:48,name:"LANGUAGE_XML"},{no:49,name:"LANGUAGE_XSL"},{no:50,name:"LANGUAGE_YAML"},{no:51,name:"LANGUAGE_SVELTE"},{no:52,name:"LANGUAGE_TOML"},{no:53,name:"LANGUAGE_DART"},{no:54,name:"LANGUAGE_RST"},{no:55,name:"LANGUAGE_OCAML"},{no:56,name:"LANGUAGE_CMAKE"},{no:57,name:"LANGUAGE_PASCAL"},{no:58,name:"LANGUAGE_ELIXIR"},{no:59,name:"LANGUAGE_FSHARP"},{no:60,name:"LANGUAGE_LISP"},{no:61,name:"LANGUAGE_MATLAB"},{no:62,name:"LANGUAGE_POWERSHELL"},{no:63,name:"LANGUAGE_SOLIDITY"},{no:64,name:"LANGUAGE_ADA"},{no:65,name:"LANGUAGE_OCAML_INTERFACE"}]);const yo=class yo extends Rt{constructor(n){super();te(this,"completionId","");te(this,"text","");te(this,"prefix","");te(this,"stop","");te(this,"score",0);te(this,"tokens",[]);te(this,"decodedTokens",[]);te(this,"probabilities",[]);te(this,"adjustedProbabilities",[]);te(this,"generatedLength",yt.zero);we.util.initPartial(n,this)}static fromBinary(n,o){return new yo().fromBinary(n,o)}static fromJson(n,o){return new yo().fromJson(n,o)}static fromJsonString(n,o){return new yo().fromJsonString(n,o)}static equals(n,o){return we.util.equals(yo,n,o)}};te(yo,"runtime",we),te(yo,"typeName","exa.codeium_common_pb.Completion"),te(yo,"fields",we.util.newFieldList(()=>[{no:1,name:"completion_id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"prefix",kind:"scalar",T:9},{no:4,name:"stop",kind:"scalar",T:9},{no:5,name:"score",kind:"scalar",T:1},{no:6,name:"tokens",kind:"scalar",T:4,repeated:!0},{no:7,name:"decoded_tokens",kind:"scalar",T:9,repeated:!0},{no:8,name:"probabilities",kind:"scalar",T:1,repeated:!0},{no:9,name:"adjusted_probabilities",kind:"scalar",T:1,repeated:!0},{no:10,name:"generated_length",kind:"scalar",T:4}]));let cu=yo;const wo=class wo extends Rt{constructor(n){super();te(this,"ideName","");te(this,"ideVersion","");te(this,"extensionName","");te(this,"extensionVersion","");te(this,"apiKey","");te(this,"locale","");te(this,"sessionId","");te(this,"requestId",yt.zero);te(this,"userAgent","");te(this,"url","");te(this,"authSource",fi.CODEIUM);we.util.initPartial(n,this)}static fromBinary(n,o){return new wo().fromBinary(n,o)}static fromJson(n,o){return new wo().fromJson(n,o)}static fromJsonString(n,o){return new wo().fromJsonString(n,o)}static equals(n,o){return we.util.equals(wo,n,o)}};te(wo,"runtime",we),te(wo,"typeName","exa.codeium_common_pb.Metadata"),te(wo,"fields",we.util.newFieldList(()=>[{no:1,name:"ide_name",kind:"scalar",T:9},{no:7,name:"ide_version",kind:"scalar",T:9},{no:12,name:"extension_name",kind:"scalar",T:9},{no:2,name:"extension_version",kind:"scalar",T:9},{no:3,name:"api_key",kind:"scalar",T:9},{no:4,name:"locale",kind:"scalar",T:9},{no:10,name:"session_id",kind:"scalar",T:9},{no:9,name:"request_id",kind:"scalar",T:4},{no:13,name:"user_agent",kind:"scalar",T:9},{no:14,name:"url",kind:"scalar",T:9},{no:15,name:"auth_source",kind:"enum",T:we.getEnumType(fi)}]));let ul=wo;const vo=class vo extends Rt{constructor(n){super();te(this,"tabSize",yt.zero);te(this,"insertSpaces",!1);we.util.initPartial(n,this)}static fromBinary(n,o){return new vo().fromBinary(n,o)}static fromJson(n,o){return new vo().fromJson(n,o)}static fromJsonString(n,o){return new vo().fromJsonString(n,o)}static equals(n,o){return we.util.equals(vo,n,o)}};te(vo,"runtime",we),te(vo,"typeName","exa.codeium_common_pb.EditorOptions"),te(vo,"fields",we.util.newFieldList(()=>[{no:1,name:"tab_size",kind:"scalar",T:4},{no:2,name:"insert_spaces",kind:"scalar",T:8}]));let du=vo;we.util.newFieldList(()=>[{no:1,name:"event_type",kind:"enum",T:we.getEnumType(dl)},{no:2,name:"event_json",kind:"scalar",T:9},{no:3,name:"timestamp_unix_ms",kind:"scalar",T:3}]);class k5 extends Vs{constructor(n,o){super();te(this,"index");te(this,"total");this.index=n,this.total=o}toDOM(){const n=document.createElement("span");n.setAttribute("aria-hidden","true"),n.className="cm-codeium-cycle";const o=n.appendChild(document.createElement("span"));o.className="cm-codeium-cycle-explanation",o.innerText=`${this.index+1}/${this.total}`;const r=n.appendChild(document.createElement("button"));return r.className="cm-codeium-cycle-key",r.innerText="\u2192 (Ctrl ])",r.dataset.action="codeium-cycle",n}ignoreEvent(){return!1}}const hl=Us.define({combine:t=>Rc(t,{language:Go.TYPESCRIPT,timeout:150,widgetClass:k5,alwaysOn:!0},{})}),k_=Us.define({combine:t=>Rc(t,{override:()=>[]},{})}),S5=dt.mark({class:"cm-ghostText"}),Ar=In.define({create:t=>null,update(t,e){var o;const n=e.state.facet(hl);for(const r of e.effects){if(r.is(eu)){const{changeSpecs:s,index:i}=r.value,a=s[i].map(d=>S5.range(d.absoluteStartPos,d.absoluteEndPos)),l=(o=a.at(-1))==null?void 0:o.to;return{index:i,decorations:dt.set([...a,...l!==void 0&&s.length>1&&n.widgetClass?[dt.widget({widget:new n.widgetClass(i,s.length),side:1}).range(l)]:[]]),changeSpecs:s,reverseChangeSet:r.value.reverseChangeSet}}if(r.is(tu)||r.is(nu))return null}return t&&{...t,decorations:t.decorations.map(e.changes),reverseChangeSet:t.reverseChangeSet.map(e.changes)}},provide:t=>et.decorations.from(t,e=>(e==null?void 0:e.decorations)||dt.none)}),Qr=Gm.define(),fl=Gm.define();var pt;function uu(t){const e=pt[t];return typeof e!="string"?t.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}let ml;(function(t){t[t.Canceled=1]="Canceled",t[t.Unknown=2]="Unknown",t[t.InvalidArgument=3]="InvalidArgument",t[t.DeadlineExceeded=4]="DeadlineExceeded",t[t.NotFound=5]="NotFound",t[t.AlreadyExists=6]="AlreadyExists",t[t.PermissionDenied=7]="PermissionDenied",t[t.ResourceExhausted=8]="ResourceExhausted",t[t.FailedPrecondition=9]="FailedPrecondition",t[t.Aborted=10]="Aborted",t[t.OutOfRange=11]="OutOfRange",t[t.Unimplemented=12]="Unimplemented",t[t.Internal=13]="Internal",t[t.Unavailable=14]="Unavailable",t[t.DataLoss=15]="DataLoss",t[t.Unauthenticated=16]="Unauthenticated"})(pt||(pt={}));class Kt extends Error{constructor(e,n=pt.Unknown,o,r,s){super(function(i,a){return i.length?`[${uu(a)}] ${i}`:`[${uu(a)}]`}(e,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=n,this.metadata=new Headers(o??{}),this.details=r??[],this.cause=s}static from(e,n=pt.Unknown){return e instanceof Kt?e:e instanceof Error?e.name=="AbortError"?new Kt(e.message,pt.Canceled):new Kt(e.message,n,void 0,void 0,e):new Kt(String(e),n,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===Kt.prototype||e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e)}findDetails(e){const n="typeName"in e?{findMessage:r=>r===e.typeName?e:void 0}:e,o=[];for(const r of this.details){if("getType"in r){n.findMessage(r.getType().typeName)&&o.push(r);continue}const s=n.findMessage(r.type);if(s)try{o.push(s.fromBinary(r.value))}catch{}}return o}}var C5=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(s){return new Promise(function(i,a){(function(l,d,u,h){Promise.resolve(h).then(function(f){l({value:f,done:u})},d)})(i,a,(s=t[r](s)).done,s.value)})}}},pi=function(t){return this instanceof pi?(this.v=t,this):new pi(t)},N5=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),s=[];return o={},i("next"),i("throw"),i("return",function(h){return function(f){return Promise.resolve(f).then(h,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function i(h,f){r[h]&&(o[h]=function(m){return new Promise(function(_,g){s.push([h,m,_,g])>1||a(h,m)})},f&&(o[h]=f(o[h])))}function a(h,f){try{(m=r[h](f)).value instanceof pi?Promise.resolve(m.value.v).then(l,d):u(s[0][2],m)}catch(_){u(s[0][3],_)}var m}function l(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}},j5=function(t){var e,n;return e={},o("next"),o("throw",function(r){throw r}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(r,s){e[r]=t[r]?function(i){return(n=!n)?{value:pi(t[r](i)),done:!1}:s?s(i):i}:s}},S_=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(s){return new Promise(function(i,a){(function(l,d,u,h){Promise.resolve(h).then(function(f){l({value:f,done:u})},d)})(i,a,(s=t[r](s)).done,s.value)})}}},es=function(t){return this instanceof es?(this.v=t,this):new es(t)},E5=function(t){var e,n;return e={},o("next"),o("throw",function(r){throw r}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(r,s){e[r]=t[r]?function(i){return(n=!n)?{value:es(t[r](i)),done:!1}:s?s(i):i}:s}},I5=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),s=[];return o={},i("next"),i("throw"),i("return",function(h){return function(f){return Promise.resolve(f).then(h,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function i(h,f){r[h]&&(o[h]=function(m){return new Promise(function(_,g){s.push([h,m,_,g])>1||a(h,m)})},f&&(o[h]=f(o[h])))}function a(h,f){try{(m=r[h](f)).value instanceof es?Promise.resolve(m.value.v).then(l,d):u(s[0][2],m)}catch(_){u(s[0][3],_)}var m}function l(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}};function C_(t,e){const n=function(){var o,r;return I5(this,arguments,function*(){const s=yield es(t);(o=e==null?void 0:e.onHeader)===null||o===void 0||o.call(e,s.header),yield es(yield*E5(S_(s.message))),(r=e==null?void 0:e.onTrailer)===null||r===void 0||r.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function N_(t){if(!t.aborted)return;if(t.reason!==void 0)return t.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function j_(){return{get(t){return t.id in this?this[t.id]:t.defaultValue},set(t,e){return this[t.id]=e,this},delete(t){return delete this[t.id],this}}}function E_(t,e,n){const o=typeof e=="string"?e:e.typeName,r=typeof n=="string"?n:n.name;return t.toString().replace(/\/?$/,`/${o}/${r}`)}function I_(t,e){return e instanceof t?e:new t(e)}function A5(t,e){function n(o){return o.done===!0?o:{done:o.done,value:I_(t,o.value)}}return{[Symbol.asyncIterator](){const o=e[Symbol.asyncIterator](),r={next:()=>o.next().then(n)};return o.throw!==void 0&&(r.throw=s=>o.throw(s).then(n)),o.return!==void 0&&(r.return=s=>o.return(s).then(n)),r}}}function A_(t,e){var n;return(n=e==null?void 0:e.concat().reverse().reduce((o,r)=>r(o),t))!==null&&n!==void 0?n:t}function T_(t){var e;const n=Object.assign({},t);return(e=n.ignoreUnknownFields)!==null&&e!==void 0||(n.ignoreUnknownFields=!0),n}function M_(t,e,n,o){const r=e?O_(t.I,o):D_(t.I,n);return{parse:(e?O_(t.O,o):D_(t.O,n)).parse,serialize:r.serialize}}function O_(t,e){return{parse(n){try{return t.fromBinary(n,e)}catch(o){const r=o instanceof Error?o.message:String(o);throw new Kt(`parse binary: ${r}`,pt.InvalidArgument)}},serialize(n){try{return n.toBinary(e)}catch(o){const r=o instanceof Error?o.message:String(o);throw new Kt(`serialize binary: ${r}`,pt.Internal)}}}}function D_(t,e){var n,o;const r=(n=e==null?void 0:e.textEncoder)!==null&&n!==void 0?n:new TextEncoder,s=(o=e==null?void 0:e.textDecoder)!==null&&o!==void 0?o:new TextDecoder,i=T_(e);return{parse(a){try{const l=s.decode(a);return t.fromJsonString(l,i)}catch(l){throw Kt.from(l,pt.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(i);return r.encode(l)}catch(l){throw Kt.from(l,pt.Internal)}}}}const T5=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function R_(t,e,n){if(e&&new Headers(e).forEach((i,a)=>n.metadata.append(a,i)),typeof t!="object"||t==null||Array.isArray(t)||!("code"in t)||typeof t.code!="string")throw n;const o=function(i){if(!ml){ml={};for(const a of Object.values(pt))typeof a!="string"&&(ml[uu(a)]=a)}return ml[i]}(t.code);if(o===void 0)throw n;const r=t.message;if(r!=null&&typeof r!="string")throw n;const s=new Kt(r??"",o,e);if("details"in t&&Array.isArray(t.details))for(const i of t.details){if(i===null||typeof i!="object"||Array.isArray(i)||typeof i.type!="string"||typeof i.value!="string"||"debug"in i&&typeof i.debug!="object")throw n;try{s.details.push({type:i.type,value:nl.dec(i.value),debug:i.debug})}catch{throw n}}return s}function M5(t){const e=new Kt("invalid end stream",pt.InvalidArgument);let n;try{n=JSON.parse(typeof t=="string"?t:new TextDecoder().decode(t))}catch{throw e}if(typeof n!="object"||n==null||Array.isArray(n))throw e;const o=new Headers;if("metadata"in n){if(typeof n.metadata!="object"||n.metadata==null||Array.isArray(n.metadata))throw e;for(const[r,s]of Object.entries(n.metadata)){if(!Array.isArray(s)||s.some(i=>typeof i!="string"))throw e;for(const i of s)o.append(r,i)}}return{metadata:o,error:"error"in n?R_(n.error,o,e):void 0}}const hu="Content-Type",O5="Content-Length",P_="Content-Encoding",D5="Accept-Encoding",L_="Connect-Protocol-Version";function F_(t){const e=new Headers,n=new Headers;return t.forEach((o,r)=>{r.toLowerCase().startsWith("trailer-")?n.set(r.substring(8),o):e.set(r,o)}),[e,n]}function z_(t,e,n,o,r){const s=new Headers(o??{});return n!==void 0&&s.set("Connect-Timeout-Ms",`${n}`),s.set(hu,t==Mn.Unary?e?"application/proto":"application/json":e?"application/connect+proto":"application/connect+json"),s.set(L_,"1"),s}function B_(t,e,n){const o=function(r){const s=r==null?void 0:r.match(T5);if(s)return{stream:!!s[1],binary:!!s[3]}}(n.get("Content-Type"));if(e!==200){const r=new Kt(`HTTP ${e}`,function(s){switch(s){case 400:return pt.InvalidArgument;case 401:return pt.Unauthenticated;case 403:return pt.PermissionDenied;case 404:return pt.Unimplemented;case 408:return pt.DeadlineExceeded;case 409:return pt.Aborted;case 412:return pt.FailedPrecondition;case 413:case 431:return pt.ResourceExhausted;case 415:return pt.Internal;case 429:case 502:case 503:case 504:return pt.Unavailable;default:return pt.Unknown}}(e),n);if(t==Mn.Unary&&o&&!o.binary)return{isUnaryError:!0,unaryError:r};throw r}return{isUnaryError:!1}}const R5="application/";function P5(t,e,n){let o="?connect=v1";const r=t.header.get(hu);(r==null?void 0:r.indexOf(R5))===0&&(o+="&encoding="+encodeURIComponent(r.slice(12)));const s=t.header.get(P_);s!==null&&s!=="identity"&&(o+="&compression="+encodeURIComponent(s),n=!0),n&&(o+="&base64=1"),o+="&message="+function(l,d){return d?nl.enc(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):encodeURIComponent(new TextDecoder().decode(l))}(e,n);const i=t.url+o,a=new Headers(t.header);return[L_,hu,O5,P_,D5].forEach(l=>a.delete(l)),Object.assign(Object.assign({},t),{init:Object.assign(Object.assign({},t.init),{method:"GET"}),url:i,header:a})}function U_(t){const{signal:e,cleanup:n}=function(r){const s=new AbortController,i=()=>{s.abort(new Kt("the operation timed out",pt.DeadlineExceeded))};let a;return r!==void 0&&(r<=0?i():a=setTimeout(i,r)),{signal:s.signal,cleanup:()=>clearTimeout(a)}}(t.timeoutMs),o=function(...r){const s=new AbortController,i=r.filter(l=>l!==void 0).concat(s.signal);for(const l of i){if(l.aborted){a.apply(l);break}l.addEventListener("abort",a)}function a(){s.signal.aborted||s.abort(N_(this));for(const l of i)l.removeEventListener("abort",a)}return s}(t.signal,e);return[o.signal,function(r){const s=Kt.from(e.aborted?N_(e):r);return o.abort(s),n(),Promise.reject(s)},function(){n(),o.abort()}]}var gi,fu,_i;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.INACTIVE=1]="INACTIVE",t[t.PROCESSING=2]="PROCESSING",t[t.SUCCESS=3]="SUCCESS",t[t.WARNING=4]="WARNING",t[t.ERROR=5]="ERROR"})(gi||(gi={})),we.util.setEnumType(gi,"exa.language_server_pb.CodeiumState",[{no:0,name:"CODEIUM_STATE_UNSPECIFIED"},{no:1,name:"CODEIUM_STATE_INACTIVE"},{no:2,name:"CODEIUM_STATE_PROCESSING"},{no:3,name:"CODEIUM_STATE_SUCCESS"},{no:4,name:"CODEIUM_STATE_WARNING"},{no:5,name:"CODEIUM_STATE_ERROR"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SINGLE=1]="SINGLE",t[t.MULTI=2]="MULTI"}(fu||(fu={})),we.util.setEnumType(fu,"exa.language_server_pb.LineType",[{no:0,name:"LINE_TYPE_UNSPECIFIED"},{no:1,name:"LINE_TYPE_SINGLE"},{no:2,name:"LINE_TYPE_MULTI"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.INLINE=1]="INLINE",t[t.BLOCK=2]="BLOCK",t[t.INLINE_MASK=3]="INLINE_MASK"}(_i||(_i={})),we.util.setEnumType(_i,"exa.language_server_pb.CompletionPartType",[{no:0,name:"COMPLETION_PART_TYPE_UNSPECIFIED"},{no:1,name:"COMPLETION_PART_TYPE_INLINE"},{no:2,name:"COMPLETION_PART_TYPE_BLOCK"},{no:3,name:"COMPLETION_PART_TYPE_INLINE_MASK"}]);const ko=class ko extends Rt{constructor(n){super();te(this,"threshold",0);we.util.initPartial(n,this)}static fromBinary(n,o){return new ko().fromBinary(n,o)}static fromJson(n,o){return new ko().fromJson(n,o)}static fromJsonString(n,o){return new ko().fromJsonString(n,o)}static equals(n,o){return we.util.equals(ko,n,o)}};te(ko,"runtime",we),te(ko,"typeName","exa.language_server_pb.MultilineConfig"),te(ko,"fields",we.util.newFieldList(()=>[{no:1,name:"threshold",kind:"scalar",T:2}]));let mu=ko;const So=class So extends Rt{constructor(n){super();te(this,"metadata");te(this,"document");te(this,"editorOptions");te(this,"otherDocuments",[]);te(this,"experimentConfig");te(this,"modelName","");te(this,"multilineConfig");we.util.initPartial(n,this)}static fromBinary(n,o){return new So().fromBinary(n,o)}static fromJson(n,o){return new So().fromJson(n,o)}static fromJsonString(n,o){return new So().fromJsonString(n,o)}static equals(n,o){return we.util.equals(So,n,o)}};te(So,"runtime",we),te(So,"typeName","exa.language_server_pb.GetCompletionsRequest"),te(So,"fields",we.util.newFieldList(()=>[{no:1,name:"metadata",kind:"message",T:ul},{no:2,name:"document",kind:"message",T:pl},{no:3,name:"editor_options",kind:"message",T:du},{no:5,name:"other_documents",kind:"message",T:pl,repeated:!0},{no:7,name:"experiment_config",kind:"message",T:wu},{no:10,name:"model_name",kind:"scalar",T:9},{no:13,name:"multiline_config",kind:"message",T:mu}]));let pu=So;const Co=class Co extends Rt{constructor(n){super();te(this,"state");te(this,"completionItems",[]);we.util.initPartial(n,this)}static fromBinary(n,o){return new Co().fromBinary(n,o)}static fromJson(n,o){return new Co().fromJson(n,o)}static fromJsonString(n,o){return new Co().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Co,n,o)}};te(Co,"runtime",we),te(Co,"typeName","exa.language_server_pb.GetCompletionsResponse"),te(Co,"fields",we.util.newFieldList(()=>[{no:1,name:"state",kind:"message",T:vu},{no:2,name:"completion_items",kind:"message",T:Nu,repeated:!0}]));let gu=Co;const No=class No extends Rt{constructor(n){super();te(this,"metadata");te(this,"completionId","");we.util.initPartial(n,this)}static fromBinary(n,o){return new No().fromBinary(n,o)}static fromJson(n,o){return new No().fromJson(n,o)}static fromJsonString(n,o){return new No().fromJsonString(n,o)}static equals(n,o){return we.util.equals(No,n,o)}};te(No,"runtime",we),te(No,"typeName","exa.language_server_pb.AcceptCompletionRequest"),te(No,"fields",we.util.newFieldList(()=>[{no:1,name:"metadata",kind:"message",T:ul},{no:2,name:"completion_id",kind:"scalar",T:9}]));let _u=No;const jo=class jo extends Rt{constructor(e){super(),we.util.initPartial(e,this)}static fromBinary(e,n){return new jo().fromBinary(e,n)}static fromJson(e,n){return new jo().fromJson(e,n)}static fromJsonString(e,n){return new jo().fromJsonString(e,n)}static equals(e,n){return we.util.equals(jo,e,n)}};te(jo,"runtime",we),te(jo,"typeName","exa.language_server_pb.AcceptCompletionResponse"),te(jo,"fields",we.util.newFieldList(()=>[]));let bu=jo;const Eo=class Eo extends Rt{constructor(e){super(),we.util.initPartial(e,this)}static fromBinary(e,n){return new Eo().fromBinary(e,n)}static fromJson(e,n){return new Eo().fromJson(e,n)}static fromJsonString(e,n){return new Eo().fromJsonString(e,n)}static equals(e,n){return we.util.equals(Eo,e,n)}};te(Eo,"runtime",we),te(Eo,"typeName","exa.language_server_pb.GetAuthTokenRequest"),te(Eo,"fields",we.util.newFieldList(()=>[]));let xu=Eo;const Io=class Io extends Rt{constructor(n){super();te(this,"authToken","");te(this,"uuid","");we.util.initPartial(n,this)}static fromBinary(n,o){return new Io().fromBinary(n,o)}static fromJson(n,o){return new Io().fromJson(n,o)}static fromJsonString(n,o){return new Io().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Io,n,o)}};te(Io,"runtime",we),te(Io,"typeName","exa.language_server_pb.GetAuthTokenResponse"),te(Io,"fields",we.util.newFieldList(()=>[{no:1,name:"auth_token",kind:"scalar",T:9},{no:2,name:"uuid",kind:"scalar",T:9}]));let yu=Io;const Ao=class Ao extends Rt{constructor(n){super();te(this,"row",yt.zero);te(this,"col",yt.zero);we.util.initPartial(n,this)}static fromBinary(n,o){return new Ao().fromBinary(n,o)}static fromJson(n,o){return new Ao().fromJson(n,o)}static fromJsonString(n,o){return new Ao().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Ao,n,o)}};te(Ao,"runtime",we),te(Ao,"typeName","exa.language_server_pb.DocumentPosition"),te(Ao,"fields",we.util.newFieldList(()=>[{no:1,name:"row",kind:"scalar",T:4},{no:2,name:"col",kind:"scalar",T:4}]));let bi=Ao;const To=class To extends Rt{constructor(n){super();te(this,"absolutePath","");te(this,"relativePath","");te(this,"text","");te(this,"editorLanguage","");te(this,"language",Go.UNSPECIFIED);te(this,"cursorOffset",yt.zero);te(this,"cursorPosition");te(this,"lineEnding","");we.util.initPartial(n,this)}static fromBinary(n,o){return new To().fromBinary(n,o)}static fromJson(n,o){return new To().fromJson(n,o)}static fromJsonString(n,o){return new To().fromJsonString(n,o)}static equals(n,o){return we.util.equals(To,n,o)}};te(To,"runtime",we),te(To,"typeName","exa.language_server_pb.Document"),te(To,"fields",we.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"relative_path",kind:"scalar",T:9},{no:3,name:"text",kind:"scalar",T:9},{no:4,name:"editor_language",kind:"scalar",T:9},{no:5,name:"language",kind:"enum",T:we.getEnumType(Go)},{no:6,name:"cursor_offset",kind:"scalar",T:4},{no:8,name:"cursor_position",kind:"message",T:bi},{no:7,name:"line_ending",kind:"scalar",T:9}]));let pl=To;const Mo=class Mo extends Rt{constructor(n){super();te(this,"forceEnableExperiments",[]);we.util.initPartial(n,this)}static fromBinary(n,o){return new Mo().fromBinary(n,o)}static fromJson(n,o){return new Mo().fromJson(n,o)}static fromJsonString(n,o){return new Mo().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Mo,n,o)}};te(Mo,"runtime",we),te(Mo,"typeName","exa.language_server_pb.ExperimentConfig"),te(Mo,"fields",we.util.newFieldList(()=>[{no:1,name:"force_enable_experiments",kind:"enum",T:we.getEnumType(cl),repeated:!0}]));let wu=Mo;const Oo=class Oo extends Rt{constructor(n){super();te(this,"state",gi.UNSPECIFIED);te(this,"message","");we.util.initPartial(n,this)}static fromBinary(n,o){return new Oo().fromBinary(n,o)}static fromJson(n,o){return new Oo().fromJson(n,o)}static fromJsonString(n,o){return new Oo().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Oo,n,o)}};te(Oo,"runtime",we),te(Oo,"typeName","exa.language_server_pb.State"),te(Oo,"fields",we.util.newFieldList(()=>[{no:1,name:"state",kind:"enum",T:we.getEnumType(gi)},{no:2,name:"message",kind:"scalar",T:9}]));let vu=Oo;const Do=class Do extends Rt{constructor(n){super();te(this,"startOffset",yt.zero);te(this,"endOffset",yt.zero);te(this,"startPosition");te(this,"endPosition");we.util.initPartial(n,this)}static fromBinary(n,o){return new Do().fromBinary(n,o)}static fromJson(n,o){return new Do().fromJson(n,o)}static fromJsonString(n,o){return new Do().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Do,n,o)}};te(Do,"runtime",we),te(Do,"typeName","exa.language_server_pb.Range"),te(Do,"fields",we.util.newFieldList(()=>[{no:1,name:"start_offset",kind:"scalar",T:4},{no:2,name:"end_offset",kind:"scalar",T:4},{no:3,name:"start_position",kind:"message",T:bi},{no:4,name:"end_position",kind:"message",T:bi}]));let ku=Do;const Ro=class Ro extends Rt{constructor(n){super();te(this,"text","");te(this,"deltaCursorOffset",yt.zero);we.util.initPartial(n,this)}static fromBinary(n,o){return new Ro().fromBinary(n,o)}static fromJson(n,o){return new Ro().fromJson(n,o)}static fromJsonString(n,o){return new Ro().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Ro,n,o)}};te(Ro,"runtime",we),te(Ro,"typeName","exa.language_server_pb.Suffix"),te(Ro,"fields",we.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"delta_cursor_offset",kind:"scalar",T:3}]));let Su=Ro;const Po=class Po extends Rt{constructor(n){super();te(this,"text","");te(this,"offset",yt.zero);te(this,"type",_i.UNSPECIFIED);te(this,"prefix","");te(this,"line",yt.zero);we.util.initPartial(n,this)}static fromBinary(n,o){return new Po().fromBinary(n,o)}static fromJson(n,o){return new Po().fromJson(n,o)}static fromJsonString(n,o){return new Po().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Po,n,o)}};te(Po,"runtime",we),te(Po,"typeName","exa.language_server_pb.CompletionPart"),te(Po,"fields",we.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"offset",kind:"scalar",T:4},{no:3,name:"type",kind:"enum",T:we.getEnumType(_i)},{no:4,name:"prefix",kind:"scalar",T:9},{no:5,name:"line",kind:"scalar",T:4}]));let Cu=Po;const Lo=class Lo extends Rt{constructor(n){super();te(this,"completion");te(this,"suffix");te(this,"range");te(this,"source",mi.UNSPECIFIED);te(this,"completionParts",[]);we.util.initPartial(n,this)}static fromBinary(n,o){return new Lo().fromBinary(n,o)}static fromJson(n,o){return new Lo().fromJson(n,o)}static fromJsonString(n,o){return new Lo().fromJsonString(n,o)}static equals(n,o){return we.util.equals(Lo,n,o)}};te(Lo,"runtime",we),te(Lo,"typeName","exa.language_server_pb.CompletionItem"),te(Lo,"fields",we.util.newFieldList(()=>[{no:1,name:"completion",kind:"message",T:cu},{no:5,name:"suffix",kind:"message",T:Su},{no:2,name:"range",kind:"message",T:ku},{no:3,name:"source",kind:"enum",T:we.getEnumType(mi)},{no:8,name:"completion_parts",kind:"message",T:Cu,repeated:!0}]));let Nu=Lo;const L5={typeName:"exa.language_server_pb.LanguageServerService",methods:{getCompletions:{name:"GetCompletions",I:pu,O:gu,kind:Mn.Unary},acceptCompletion:{name:"AcceptCompletion",I:_u,O:bu,kind:Mn.Unary},getAuthToken:{name:"GetAuthToken",I:xu,O:yu,kind:Mn.Unary}}};var xi=function(t){return this instanceof xi?(this.v=t,this):new xi(t)},F5=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),s=[];return o={},i("next"),i("throw"),i("return",function(h){return function(f){return Promise.resolve(f).then(h,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function i(h,f){r[h]&&(o[h]=function(m){return new Promise(function(_,g){s.push([h,m,_,g])>1||a(h,m)})},f&&(o[h]=f(o[h])))}function a(h,f){try{(m=r[h](f)).value instanceof xi?Promise.resolve(m.value.v).then(l,d):u(s[0][2],m)}catch(_){u(s[0][3],_)}var m}function l(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}};const z5=function(t){var e;(function(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}})();const n=(e=t.useBinaryFormat)!==null&&e!==void 0&&e;return{async unary(o,r,s,i,a,l,d){var u;const{serialize:h,parse:f}=M_(r,n,t.jsonOptions,t.binaryOptions);return i=i===void 0?t.defaultTimeoutMs:i<=0?void 0:i,await function(m){const _=A_(m.next,m.interceptors),[g,p,b]=U_(m);return _(Object.assign(Object.assign({},m.req),{message:I_(m.req.method.I,m.req.message),signal:g})).then(x=>(b(),x),p)}({interceptors:t.interceptors,signal:s,timeoutMs:i,req:{stream:!1,service:o,method:r,url:E_(t.baseUrl,o,r),init:{method:"POST",credentials:(u=t.credentials)!==null&&u!==void 0?u:"same-origin",redirect:"error",mode:"cors"},header:z_(r.kind,n,i,a),contextValues:d??j_(),message:l},next:async m=>{var _;let g=null;t.useHttpGet===!0&&r.idempotency===lu.NoSideEffects?m=P5(m,h(m.message),n):g=h(m.message);const p=(_=t.fetch)!==null&&_!==void 0?_:globalThis.fetch,b=await p(m.url,Object.assign(Object.assign({},m.init),{headers:m.header,signal:m.signal,body:g})),{isUnaryError:x,unaryError:y}=B_(r.kind,b.status,b.headers);if(x)throw R_(await b.json(),function(...S){const E=new Headers;for(const N of S)N.forEach((j,T)=>{E.append(T,j)});return E}(...F_(b.headers)),y);const[v,C]=F_(b.headers);return{stream:!1,service:o,method:r,header:v,message:n?f(new Uint8Array(await b.arrayBuffer())):r.O.fromJson(await b.json(),T_(t.jsonOptions)),trailer:C}}})},async stream(o,r,s,i,a,l,d){var u;const{serialize:h,parse:f}=M_(r,n,t.jsonOptions,t.binaryOptions);function m(g,p,b){return F5(this,arguments,function*(){const x=function(v){let C,S=new Uint8Array(0);function E(N){const j=new Uint8Array(S.length+N.length);j.set(S),j.set(N,S.length),S=j}return new ReadableStream({start(){C=v.getReader()},async pull(N){let j;for(;;){if(j===void 0&&S.byteLength>=5){let M=0;for(let P=1;P<5;P++)M=(M<<8)+S[P];j={flags:S[0],length:M}}if(j!==void 0&&S.byteLength>=j.length+5)break;const A=await C.read();if(A.done)break;E(A.value)}if(j===void 0)return S.byteLength==0?void N.close():void N.error(new Kt("premature end of stream",pt.DataLoss));const T=S.subarray(5,5+j.length);S=S.subarray(5+j.length),N.enqueue({flags:j.flags,data:T})}})}(g).getReader();let y=!1;for(;;){const v=yield xi(x.read());if(v.done)break;const{flags:C,data:S}=v.value;if(!(2&~C)){y=!0;const E=M5(S);if(E.error){const N=E.error;throw b.forEach((j,T)=>{N.metadata.append(T,j)}),N}E.metadata.forEach((N,j)=>p.set(j,N));continue}yield yield xi(f(S))}if(!y)throw"missing EndStreamResponse"})}async function _(g){if(r.kind!=Mn.ServerStreaming)throw"The fetch API does not support streaming request bodies";const p=await g[Symbol.asyncIterator]().next();if(p.done==1)throw"missing request message";return function(b,x){const y=new Uint8Array(x.length+5);y.set(x,5);const v=new DataView(y.buffer,y.byteOffset,y.byteLength);return v.setUint8(0,b),v.setUint32(1,x.length),y}(0,h(p.value))}return i=i===void 0?t.defaultTimeoutMs:i<=0?void 0:i,await function(g){const p=A_(g.next,g.interceptors),[b,x,y]=U_(g),v=Object.assign(Object.assign({},g.req),{message:A5(g.req.method.I,g.req.message),signal:b});let C=!1;return b.addEventListener("abort",function(){var S,E;const N=g.req.message[Symbol.asyncIterator]();C||(S=N.throw)===null||S===void 0||S.call(N,this.reason).catch(()=>{}),(E=N.return)===null||E===void 0||E.call(N).catch(()=>{})}),p(v).then(S=>Object.assign(Object.assign({},S),{message:{[Symbol.asyncIterator](){const E=S.message[Symbol.asyncIterator]();return{next:()=>E.next().then(N=>(N.done==1&&(C=!0,y()),N),x)}}}}),x)}({interceptors:t.interceptors,timeoutMs:i,signal:s,req:{stream:!0,service:o,method:r,url:E_(t.baseUrl,o,r),init:{method:"POST",credentials:(u=t.credentials)!==null&&u!==void 0?u:"same-origin",redirect:"error",mode:"cors"},header:z_(r.kind,n,i,a),contextValues:d??j_(),message:l},next:async g=>{var p;const b=(p=t.fetch)!==null&&p!==void 0?p:globalThis.fetch,x=await b(g.url,Object.assign(Object.assign({},g.init),{headers:g.header,signal:g.signal,body:await _(g.message)}));if(B_(r.kind,x.status,x.headers),x.body===null)throw"missing response body";const y=new Headers;return Object.assign(Object.assign({},g),{header:x.headers,trailer:y,message:m(x.body,y,x.headers)})}})}}}({baseUrl:"https://web-backend.codeium.com",useBinaryFormat:!0}),B5=function(t,e){return function(n,o){const r={};for(const[s,i]of Object.entries(n.methods)){const a=o(Object.assign(Object.assign({},i),{localName:s,service:n}));a!=null&&(r[s]=a)}return r}(t,n=>{switch(n.kind){case Mn.Unary:return function(o,r,s){return async function(i,a){var l,d;const u=await o.unary(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,u.header),(d=a==null?void 0:a.onTrailer)===null||d===void 0||d.call(a,u.trailer),u.message}}(e,t,n);case Mn.ServerStreaming:return function(o,r,s){return function(i,a){return C_(o.stream(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,function(l){return N5(this,arguments,function*(){yield pi(yield*j5(C5(l)))})}([i]),a==null?void 0:a.contextValues),a)}}(e,t,n);case Mn.ClientStreaming:return function(o,r,s){return async function(i,a){var l,d,u,h,f,m;const _=await o.stream(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);let g;(f=a==null?void 0:a.onHeader)===null||f===void 0||f.call(a,_.header);try{for(var p,b=!0,x=S_(_.message);!(l=(p=await x.next()).done);b=!0)h=p.value,b=!1,g=h}catch(y){d={error:y}}finally{try{b||l||!(u=x.return)||await u.call(x)}finally{if(d)throw d.error}}if(!g)throw new Kt("protocol error: missing response message",pt.Internal);return(m=a==null?void 0:a.onTrailer)===null||m===void 0||m.call(a,_.trailer),g}}(e,t,n);case Mn.BiDiStreaming:return function(o,r,s){return function(i,a){return C_(o.stream(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}(e,t,n);default:return null}})}(L5,z5);let gl;try{gl=crypto.randomUUID()}catch{gl="10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^(crypto.getRandomValues(new Uint8Array(1))[0]??0)&15>>+t/4).toString(16))}async function U5(t,e){const n=t.state.facet(hl),{override:o}=t.state.facet(k_),r=await o(),s=t.state,i=s.selection.main.head,a=s.doc.toString();try{const l=await async function({text:_,cursorOffset:g,config:p,otherDocuments:b}){return await B5.getCompletions({metadata:{ideName:"web",ideVersion:"0.0.5",extensionName:"@valtown/codemirror-codeium",extensionVersion:"1.0.0",apiKey:p.apiKey,sessionId:gl,authSource:p.authSource},document:{text:_,cursorOffset:BigInt(g),language:p.language,editorLanguage:"typescript",lineEnding:`
`},editorOptions:{tabSize:2n,insertSpaces:!0},otherDocuments:b,multilineConfig:void 0},{headers:{Authorization:`Basic ${p.apiKey}-${gl}`}})}({text:a,cursorOffset:i,config:n,otherDocuments:r});if(!l||l.completionItems.length===0||e!==void 0&&i!==e||ma(t.state)==="active"||!t.hasFocus)return;const d=l.completionItems.map(_=>{let g=0;return _.completionParts.filter(p=>p.type!==3).map(p=>{const b=Number(p.offset),x=p.type===2?`
${p.text}`:p.text,y={absoluteStartPos:g+b,absoluteEndPos:g+b+x.length,from:b,to:b,insert:x};return g+=x.length,y})}),u=0,h=d.at(u);if(!h)return;const f=pa.of(h,s.doc.length),m=f.invert(s.doc);t.dispatch({changes:f,effects:eu.of({index:u,reverseChangeSet:m,changeSpecs:d}),annotations:[fl.of(null),Qr.of(null),ga.addToHistory.of(!1)]})}catch(l){console.warn("copilot completion failed",l),await new Promise(d=>setTimeout(d,300))}}function V5(){let t=null,e=0;return et.updateListener.of(n=>{const o=n.view.state.facet(hl);if(!o.alwaysOn||!function(s){return s.docChanged&&!s.transactions.some(i=>i.effects.some(a=>a.is(tu)||a.is(nu)))}(n)||(t&&clearTimeout(t),function(s){if(!s.view.hasFocus||s.state.field(Ar)||ma(s.state)==="active")return!0;for(const i of s.transactions)if(i.annotation(Qr)!==void 0)return!0}(n)))return;const r=n.state.selection.main.head;o.shouldComplete&&!o.shouldComplete(new pU(n.view.state,r,!1))||(t=setTimeout(async()=>{r===e&&await U5(n.view,e)},o.timeout),e=r)})}function V_(t){var r;const e=t.state.field(Ar);if(!e)return!1;const n=(r=e.reverseChangeSet)==null?void 0:r.invert(t.state.doc);t.dispatch({changes:e.reverseChangeSet,effects:tu.of(null),annotations:[fl.of(null),Qr.of(null),ga.addToHistory.of(!1)]});let o=0;return n==null||n.iterChangedRanges((s,i,a,l)=>{o=l}),t.dispatch({changes:n,selection:Bo.cursor(o),annotations:[Qr.of(null),ga.addToHistory.of(!0)]}),!0}const $_=t=>{const{state:e}=t,n=e.field(Ar);if(!n)return!1;const{changeSpecs:o}=n;if(o.length<2)return!1;const r=(n.index+1)%o.length,s=o.at(r);if(!s)return!1;const i=n.reverseChangeSet.apply(e.doc),a=pa.of(n.reverseChangeSet,e.doc.length).compose(pa.of(s,i.length)),l=pa.of(s,i.length).invert(i);return t.dispatch({changes:a,effects:eu.of({index:r,reverseChangeSet:l,changeSpecs:o}),annotations:[fl.of(null),Qr.of(null),ga.addToHistory.of(!1)]}),!0};function ju(t){const e=t.state.field(Ar);return!!e&&(t.dispatch({changes:e.reverseChangeSet,effects:nu.of(null),annotations:[fl.of(null),Qr.of(null),ga.addToHistory.of(!1)]}),!1)}function $5(){return et.domEventHandlers({keydown:(t,e)=>(t.key!=="]"||!t.ctrlKey)&&t.key!=="Shift"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Meta"&&function(n,o){return!!n.state.field(Ar)&&(o==="Tab"?V_(n):ju(n))}(e,t.key),mouseup(t,e){const n=t.target;return n.nodeName==="BUTTON"&&n.dataset.action==="codeium-cycle"?($_(e),t.stopPropagation(),t.preventDefault(),!0):function(o){var a,l;let r=!1;const s=(a=o.state.selection.asSingle().ranges.at(0))==null?void 0:a.head,i=o.state.field(Ar);return!(s===void 0||!i)&&((l=i.decorations)==null||l.between(s,s,()=>{r=!0}),r)}(e)?V_(e):ju(e)}})}const H5=new Fc,Eu=vt.get("@github/copilot-language-server"),H_={delay:500,includeKeymap:!0,events:{shouldShowSuggestion:t=>t.hasFocus,beforeSuggestionFetch:t=>t.hasFocus}},W5=t=>{const e=[];return t.copilot==="codeium"&&t.codeium_api_key&&e.push(function(n){return[hl.of(n),Ar,Vo.highest(qn.of([{key:"Ctrl-]",run:$_}])),Vo.highest(et.updateListener.of(o=>{o.focusChanged&&ju(o.view)})),Vo.high($5()),V5()]}({apiKey:t.codeium_api_key,language:Go.PYTHON}),k_.of({override:async()=>[{text:Lc(""),language:Go.PYTHON,editorLanguage:"python"}]})),t.copilot==="github"&&e.push($1({...H_,fetchFn:async n=>{if(!iW()||n.doc.length===0)return"";await new Promise(i=>setTimeout(i,20));const o=n.doc.toString(),r=function(i,a){const l=i.doc.toString(),d=a.split(`
`).length-l.split(`
`).length,u=function(h,f){const m=h.lineAt(f);return{line:m.number-1,character:f-m.from}}(i.doc,i.selection.main.head);return u.line+=d,{textDocument:{uri:`file://${aW}`,version:"replace_me"},position:u,context:{triggerKind:_U.InlineCompletionTriggerKind.Automatic},formattingOptions:{tabSize:i.tabSize,insertSpaces:!0}}}(n,Lc(o));return function(i,a,l){if(!i)return Eu.debug("No response from copilot"),"";const d=Array.isArray(i)?i[0]:i.items[0];if(!d)return Eu.debug("No response from copilot"),"";const{insertText:u,range:h}=d,f=String(u);if(!h)return Eu.error("No range from copilot"),f;const m=h.start.character-a.character,_=m<0?f.slice(-m):f,g=l.doc.sliceString(l.selection.main.head,l.doc.length);for(let p=0;p<_.length;p++){const b=_.slice(p);if(g.startsWith(b))return _.slice(0,p)}return _}(await ZS().getCompletion(r),r.position,n)}})),t.copilot==="custom"&&e.push($1({...H_,fetchFn:async n=>{if(n.doc.length===0)return"";const o=n.doc.sliceString(0,n.selection.main.head),r=n.doc.sliceString(n.selection.main.head,n.doc.length);if(o.length===0)return"";const s=n.field(zc).type;let i=await gU.post("/ai/inline_completion",{prefix:o,suffix:r,language:s});return o&&i.startsWith(o)&&(i=i.slice(o.length)),r&&i.endsWith(r)&&(i=i.slice(0,-r.length)),i}})),[...e,Vo.highest(qn.of([{key:"Escape",run:n=>{const o=V1(n);return!fa(n)&&o}}])),H5.of(sW())]};function q5(t){return[qn.of([{key:"Escape",preventDefault:!1,run:FN},{key:t.getHotkey("cell.selectNextOccurrence").key,preventDefault:!0,run:xU},{key:t.getHotkey("cell.findAndReplace").key,preventDefault:!0,run:Yg}]),bU(),HN,za,WN]}const G5=dt.mark({class:"underline"}),W_=Dt.define(),q_=Dt.define(),G_=Dt.define(),Y5=In.define({create:()=>dt.none,update(t,e){let n=t.map(e.changes);for(const o of e.effects)o.is(W_)?n=t.update({add:[G5.range(o.value.from,o.value.to)]}):o.is(q_)?n=t.update({add:[yU.range(o.value.from,o.value.to)]}):o.is(G_)&&(n=dt.none);return n},provide:t=>et.decorations.from(t)});class J5{constructor(e,n){this.view=void 0,this.commandClickMode=void 0,this.hoveredRange=void 0,this.onClick=void 0,this.keydown=o=>{o.key!=="Meta"&&o.key!=="Control"||(this.commandClickMode=!0,this.view.dom.addEventListener("mousemove",this.mousemove),this.view.dom.addEventListener("click",this.click))},this.keyup=o=>{o.key!=="Meta"&&o.key!=="Control"||this.exitCommandClickMode()},this.windowBlur=()=>{this.commandClickMode&&this.exitCommandClickMode()},this.mousemove=o=>{if(!o.metaKey&&!o.ctrlKey)return void this.exitCommandClickMode();if(!this.commandClickMode)return void this.clearUnderline();const r=this.view.posAtCoords({x:o.clientX,y:o.clientY});if(r==null)return void this.clearUnderline();const s=this.view.state.field(wU,!1),i=s==null?void 0:s.ranges.find(l=>r>=l.from&&r<=l.to);if(i){const{from:l,to:d}=i;return this.hoveredRange&&this.hoveredRange.from===l&&this.hoveredRange.to===d?void 0:(this.clearUnderline(),this.hoveredRange={from:l,to:d,position:r},void this.view.dispatch({effects:q_.of(this.hoveredRange)}))}const a=vU(this.view.state).cursorAt(r);if(a.name==="VariableName"){const{from:l,to:d}=a;if(this.hoveredRange&&this.hoveredRange.from===l&&this.hoveredRange.to===d)return;this.clearUnderline(),this.hoveredRange={from:l,to:d,position:r},this.view.dispatch({effects:W_.of(this.hoveredRange)})}else this.clearUnderline()},this.click=o=>{if(this.hoveredRange){const r=this.view.state.doc.sliceString(this.hoveredRange.from,this.hoveredRange.to);o.preventDefault(),o.stopPropagation(),this.onClick(this.view,r),this.view.dispatch({selection:{head:this.hoveredRange.position,anchor:this.hoveredRange.position}})}},this.view=e,this.commandClickMode=!1,this.hoveredRange=null,this.onClick=n,window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("blur",this.windowBlur),window.addEventListener("mouseleave",this.windowBlur)}update(e){}destroy(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("blur",this.windowBlur),window.removeEventListener("mouseleave",this.windowBlur),this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click)}exitCommandClickMode(){this.commandClickMode=!1,this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click),this.clearUnderline()}clearUnderline(){this.hoveredRange&&(this.view.dispatch({effects:G_.of(null)}),this.hoveredRange=null)}}function K5(){return[et.domEventHandlers({paste:(t,e)=>{var r;const n=(r=t.clipboardData)==null?void 0:r.getData("text/plain");if(!(n!=null&&n.includes("@app.cell")))return!1;const o=function(s){if(!s.includes("@app.cell"))return[];const i=[],a=s.split(`
`);let l=[],d=!1,u=0,h=!1,f=!1,m=0;const _=/\(/g,g=/\)/g,p=new Set(["@"]);function b(y){return(y.match(_)||[]).length-(y.match(g)||[]).length}function x(){if(l.length!==0){for(;l.length>0&&l[l.length-1].trim().startsWith("return");)l.pop();l.some(y=>y.trim()!=="")&&i.push(function(y){const v=y.split(`
`);if(v.length===0)return"";const C=v.filter(N=>N.trim().length>0);if(C.length===0)return"";const S=/^\s*/,E=Math.min(...C.map(N=>{var j;return((j=N.match(S))==null?void 0:j[0].length)??Number.POSITIVE_INFINITY}));return E===0?y.trim():v.map(N=>N.slice(E)).join(`
`).trim()}(l.join(`
`))),l=[]}}for(const y of a){const v=y.trim();(v||d)&&(v.startsWith("@app.cell")?(x(),d=!0,u=1):u>0?(v.startsWith("def")&&v.includes("(")&&!v.includes("):")&&(h=!0,m=b(v)),u--):h?(m+=b(v),m===0&&(h=!1)):d&&(p.has(v[0])||v.startsWith("if __name__")?(x(),d=v.startsWith("@")):v.startsWith("return")?v.includes("(")&&!v.endsWith(")")&&(f=!0,m=b(v)):f?(m+=b(v),m===0&&(f=!1)):l.push(y)))}return x(),i}(n);return o.length===0?!1:(e.state.facet(NU).createManyBelow(o),!0)}})]}const Y_=Dt.define(),J_=new Fc,Iu="marimo-connecting-indicator";function K_(t,e){const n=function(){let o=document.getElementById(Iu);return o||(o=document.createElement("div"),o.id=Iu,o.textContent="Connecting\u2026",o.style.position="fixed",o.style.zIndex="9999",o.style.background="#222",o.style.color="#fff",o.style.padding="2px 8px",o.style.borderRadius="6px",o.style.fontSize="0.9em",o.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",o.style.pointerEvents="none",o.style.display="none",document.body.append(o)),o}();n.style.left=`${t}px`,n.style.top=`${e}px`,n.style.display="block",n.textContent="Connecting\u2026"}function Au(){const t=document.getElementById(Iu);t&&(t.style.display="none")}let Tu=null;function X5(t){const e=()=>t.get(hn).state;let n=!nd(e());const o=En.define(r=>{let s=!1;const i=r.dom;function a(){(function(){const h=r.state.selection.main,f=r.coordsAtPos(h.head);f?K_(f.left+2,f.bottom+2):K_(window.innerWidth/2,.1*window.innerHeight),Tu&&window.clearTimeout(Tu),Tu=window.setTimeout(Au,1500)})()}function l(){s||(i.addEventListener("keydown",a,{capture:!0}),i.addEventListener("paste",a,{capture:!0}),s=!0)}function d(){s&&(i.removeEventListener("keydown",a,{capture:!0}),i.removeEventListener("paste",a,{capture:!0}),s=!1)}const u=t.sub(hn,()=>{t.get(hn).state===$t.CONNECTING?l():(d(),Au())});return gW(e())&&l(),{destroy(){d(),u(),Au()}}});return[J_.of(gr.readOnly.of(n)),gr.transactionExtender.of(r=>{for(const s of r.effects)if(s.is(Y_)){const i=s.value;if(i!==n)return n=i,{effects:J_.reconfigure(gr.readOnly.of(i))}}return null}),En.define(r=>{const s=t.sub(hn,()=>{const i=t.get(hn),a=!nd(i.state);r.dispatch({effects:Y_.of(a)})});return{destroy(){s()}}}),o]}const Wt=({variant:t,settings:e,styles:n})=>{const o=et.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:t==="dark"}),r=jU.define(n);return[o,H4(r)]};Wt({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:F.comment,color:"#404080"},{tag:[F.string,F.regexp],color:"#999999"},{tag:F.number,color:"#7090B0"},{tag:[F.bool,F.null],color:"#8080A0"},{tag:[F.punctuation,F.derefOperator],color:"#805080"},{tag:F.keyword,color:"#60B0FF"},{tag:F.definitionKeyword,color:"#B0FFF0"},{tag:F.moduleKeyword,color:"#60B0FF"},{tag:F.operator,color:"#A0A0FF"},{tag:[F.variableName,F.self],color:"#008080"},{tag:F.operatorKeyword,color:"#A0A0FF"},{tag:F.controlKeyword,color:"#80A0FF"},{tag:F.className,color:"#70E080"},{tag:[F.function(F.propertyName),F.propertyName],color:"#50A0A0"},{tag:F.tagName,color:"#009090"},{tag:F.modifier,color:"#B0FFF0"},{tag:[F.squareBracket,F.attributeName],color:"#D0D0FF"}]}),Wt({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:F.comment,color:"#787b8099"},{tag:F.string,color:"#86b300"},{tag:F.regexp,color:"#4cbf99"},{tag:[F.number,F.bool,F.null],color:"#ffaa33"},{tag:F.variableName,color:"#5c6166"},{tag:[F.definitionKeyword,F.modifier],color:"#fa8d3e"},{tag:[F.keyword,F.special(F.brace)],color:"#fa8d3e"},{tag:F.operator,color:"#ed9366"},{tag:F.separator,color:"#5c6166b3"},{tag:F.punctuation,color:"#5c6166"},{tag:[F.definition(F.propertyName),F.function(F.variableName)],color:"#f2ae49"},{tag:[F.className,F.definition(F.typeName)],color:"#22a4e6"},{tag:[F.tagName,F.typeName,F.self,F.labelName],color:"#55b4d4"},{tag:F.angleBracket,color:"#55b4d480"},{tag:F.attributeName,color:"#f2ae49"}]}),Wt({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:F.comment,color:"#6E6E6E"},{tag:[F.string,F.regexp,F.special(F.brace)],color:"#5C81B3"},{tag:F.number,color:"#C1E1B8"},{tag:F.bool,color:"#53667D"},{tag:[F.definitionKeyword,F.modifier,F.function(F.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[F.keyword,F.moduleKeyword,F.operatorKeyword,F.operator],color:"#697A8E",fontWeight:"bold"},{tag:[F.variableName,F.attributeName],color:"#708E67"},{tag:[F.function(F.variableName),F.definition(F.propertyName),F.derefOperator],color:"#fff"},{tag:F.tagName,color:"#A3D295"}]}),Wt({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:F.comment,color:"#666666"},{tag:[F.string,F.special(F.brace)],color:"#54BE0D"},{tag:F.regexp,color:"#E9C062"},{tag:F.number,color:"#CF6A4C"},{tag:[F.keyword,F.operator],color:"#5EA6EA"},{tag:F.variableName,color:"#7587A6"},{tag:[F.definitionKeyword,F.modifier],color:"#F9EE98"},{tag:[F.propertyName,F.function(F.variableName)],color:"#937121"},{tag:[F.typeName,F.angleBracket,F.tagName],color:"#9B859D"}]}),Wt({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:F.comment,color:"#6B4E32"},{tag:[F.keyword,F.operator,F.derefOperator],color:"#EF5D32"},{tag:F.className,color:"#EFAC32",fontWeight:"bold"},{tag:[F.typeName,F.propertyName,F.function(F.variableName),F.definition(F.variableName)],color:"#EFAC32"},{tag:F.definition(F.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:F.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[F.number,F.bool],color:"#6C99BB"},{tag:[F.variableName,F.self],color:"#7DAF9C"},{tag:[F.string,F.special(F.brace),F.regexp],color:"#D9D762"},{tag:[F.angleBracket,F.tagName,F.attributeName],color:"#EFCB43"}]}),Wt({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:F.comment,color:"#404040"},{tag:[F.string,F.special(F.brace),F.regexp],color:"#00D8FF"},{tag:F.number,color:"#E62286"},{tag:[F.variableName,F.attributeName,F.self],color:"#E62286",fontWeight:"bold"},{tag:F.function(F.variableName),color:"#fff",fontWeight:"bold"}]}),Wt({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:F.comment,color:"#BCC8BA"},{tag:[F.string,F.special(F.brace),F.regexp],color:"#5D90CD"},{tag:[F.number,F.bool,F.null],color:"#46A609"},{tag:F.keyword,color:"#AF956F"},{tag:[F.definitionKeyword,F.modifier],color:"#C52727"},{tag:[F.angleBracket,F.tagName,F.attributeName],color:"#606060"},{tag:F.self,color:"#000"}]}),Wt({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:F.comment,color:"#0088FF"},{tag:F.string,color:"#3AD900"},{tag:F.regexp,color:"#80FFC2"},{tag:[F.number,F.bool,F.null],color:"#FF628C"},{tag:[F.definitionKeyword,F.modifier],color:"#FFEE80"},{tag:F.variableName,color:"#CCCCCC"},{tag:F.self,color:"#FF80E1"},{tag:[F.className,F.definition(F.propertyName),F.function(F.variableName),F.definition(F.typeName),F.labelName],color:"#FFDD00"},{tag:[F.keyword,F.operator],color:"#FF9D00"},{tag:[F.propertyName,F.typeName],color:"#80FFBB"},{tag:F.special(F.brace),color:"#EDEF7D"},{tag:F.attributeName,color:"#9EFFFF"},{tag:F.derefOperator,color:"#fff"}]}),Wt({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:F.comment,color:"#AEAEAE"},{tag:[F.string,F.special(F.brace),F.regexp],color:"#8DFF8E"},{tag:[F.className,F.definition(F.propertyName),F.function(F.variableName),F.function(F.definition(F.variableName)),F.definition(F.typeName)],color:"#A3EBFF"},{tag:[F.number,F.bool,F.null],color:"#62E9BD"},{tag:[F.keyword,F.operator],color:"#2BF1DC"},{tag:[F.definitionKeyword,F.modifier],color:"#F8FBB1"},{tag:[F.variableName,F.self],color:"#B683CA"},{tag:[F.angleBracket,F.tagName,F.typeName,F.propertyName],color:"#60A4F1"},{tag:F.derefOperator,color:"#E0E0E0"},{tag:F.attributeName,color:"#7BACCA"}]}),Wt({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:F.comment,color:"#6272a4"},{tag:[F.string,F.special(F.brace)],color:"#f1fa8c"},{tag:[F.number,F.self,F.bool,F.null],color:"#bd93f9"},{tag:[F.keyword,F.operator],color:"#ff79c6"},{tag:[F.definitionKeyword,F.typeName],color:"#8be9fd"},{tag:F.definition(F.typeName),color:"#f8f8f2"},{tag:[F.className,F.definition(F.propertyName),F.function(F.variableName),F.attributeName],color:"#50fa7b"}]}),Wt({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:F.comment,color:"#AAAAAA"},{tag:[F.keyword,F.operator,F.typeName,F.tagName,F.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[F.attributeName,F.definition(F.propertyName)],color:"#4F9FD0"},{tag:[F.className,F.string,F.special(F.brace)],color:"#CF4F5F"},{tag:F.number,color:"#CF4F5F",fontWeight:"bold"},{tag:F.variableName,fontWeight:"bold"}]}),Wt({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:F.comment,color:"#9995b7"},{tag:F.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[F.definitionKeyword,F.modifier],color:"#ff5792"},{tag:[F.className,F.tagName,F.definition(F.typeName)],color:"#0094f0"},{tag:[F.number,F.bool,F.null,F.special(F.brace)],color:"#5842ff"},{tag:[F.definition(F.propertyName),F.function(F.variableName)],color:"#0095a8"},{tag:F.typeName,color:"#b3694d"},{tag:[F.propertyName,F.variableName],color:"#fa8900"},{tag:F.operator,color:"#ff5792"},{tag:F.self,color:"#e64100"},{tag:[F.string,F.regexp],color:"#00b368"},{tag:[F.paren,F.bracket],color:"#0431fa"},{tag:F.labelName,color:"#00bdd6"},{tag:F.attributeName,color:"#e64100"},{tag:F.angleBracket,color:"#9995b7"}]}),Wt({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:F.comment,color:"#9893a5"},{tag:[F.bool,F.null],color:"#286983"},{tag:F.number,color:"#d7827e"},{tag:F.className,color:"#d7827e"},{tag:[F.angleBracket,F.tagName,F.typeName],color:"#56949f"},{tag:F.attributeName,color:"#907aa9"},{tag:F.punctuation,color:"#797593"},{tag:[F.keyword,F.modifier],color:"#286983"},{tag:[F.string,F.regexp],color:"#ea9d34"},{tag:F.variableName,color:"#d7827e"}]}),Wt({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:F.comment,color:"#CFCFCF"},{tag:[F.number,F.bool,F.null],color:"#E66C29"},{tag:[F.className,F.definition(F.propertyName),F.function(F.variableName),F.labelName,F.definition(F.typeName)],color:"#2EB43B"},{tag:F.keyword,color:"#D8B229"},{tag:F.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[F.definitionKeyword,F.modifier],color:"#925A47"},{tag:F.string,color:"#704D3D"},{tag:F.typeName,color:"#2F8996"},{tag:[F.variableName,F.propertyName],color:"#77ACB0"},{tag:F.self,color:"#77ACB0",fontWeight:"bold"},{tag:F.regexp,color:"#E3965E"},{tag:[F.tagName,F.angleBracket],color:"#BAA827"},{tag:F.attributeName,color:"#B06520"},{tag:F.derefOperator,color:"#000"}]}),Wt({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:F.comment,color:"#93A1A1"},{tag:F.string,color:"#2AA198"},{tag:F.regexp,color:"#D30102"},{tag:F.number,color:"#D33682"},{tag:F.variableName,color:"#268BD2"},{tag:[F.keyword,F.operator,F.punctuation],color:"#859900"},{tag:[F.definitionKeyword,F.modifier],color:"#073642",fontWeight:"bold"},{tag:[F.className,F.self,F.definition(F.propertyName)],color:"#268BD2"},{tag:F.function(F.variableName),color:"#268BD2"},{tag:[F.bool,F.null],color:"#B58900"},{tag:F.tagName,color:"#268BD2",fontWeight:"bold"},{tag:F.angleBracket,color:"#93A1A1"},{tag:F.attributeName,color:"#93A1A1"},{tag:F.typeName,color:"#859900"}]}),Wt({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:F.comment,color:"#8E908C"},{tag:[F.variableName,F.self,F.propertyName,F.attributeName,F.regexp],color:"#C82829"},{tag:[F.number,F.bool,F.null],color:"#F5871F"},{tag:[F.className,F.typeName,F.definition(F.typeName)],color:"#C99E00"},{tag:[F.string,F.special(F.brace)],color:"#718C00"},{tag:F.operator,color:"#3E999F"},{tag:[F.definition(F.propertyName),F.function(F.variableName)],color:"#4271AE"},{tag:F.keyword,color:"#8959A8"},{tag:F.derefOperator,color:"#4D4D4C"}]});const Z5=[Wt({variant:"dark",settings:{background:"#282c34",foreground:"#abb2bf",caret:"#528bff",selection:"#3E4451",lineHighlight:"#2c313c",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:F.comment,color:"#5c6370"},{tag:F.variableName,color:"#abb2bf"},{tag:[F.string,F.special(F.brace)],color:"#98c379"},{tag:F.number,color:"#d19a66"},{tag:F.bool,color:"#d19a66"},{tag:F.null,color:"#d19a66"},{tag:F.keyword,color:"#c678dd",fontWeight:500},{tag:F.className,color:"#61afef"},{tag:F.definition(F.typeName),color:"#61afef"},{tag:F.typeName,color:"#56b6c2"},{tag:F.angleBracket,color:"#abb2bf"},{tag:F.tagName,color:"#e06c75"},{tag:F.attributeName,color:"#d19a66"},{tag:F.operator,color:"#56b6c2",fontWeight:500},{tag:[F.function(F.variableName)],color:"#61afef"},{tag:[F.propertyName],color:"#e5c07b"}]}),et.theme({".mo-cm-reactive-reference":{fontWeight:"400",color:"#2a7aa5",borderBottom:"2px solid #bad3de"},".mo-cm-reactive-reference-hover":{cursor:"pointer",borderBottomWidth:"3px",borderBottomColor:"#4a90a5"}})],Q5=[Wt({variant:"light",settings:{background:"#ffffff",foreground:"#000000",caret:"#000000",selection:"#d7d4f0",lineHighlight:"#cceeff44",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:F.comment,color:"#708090"},{tag:F.variableName,color:"#000000"},{tag:[F.string,F.special(F.brace)],color:"#a11"},{tag:F.number,color:"#164"},{tag:F.bool,color:"#219"},{tag:F.null,color:"#219"},{tag:F.keyword,color:"#708",fontWeight:500},{tag:F.className,color:"#00f"},{tag:F.definition(F.typeName),color:"#00f"},{tag:F.typeName,color:"#085"},{tag:F.angleBracket,color:"#000000"},{tag:F.tagName,color:"#170"},{tag:F.attributeName,color:"#00c"},{tag:F.operator,color:"#a2f",fontWeight:500},{tag:[F.function(F.variableName)],color:"#00c"},{tag:[F.propertyName],color:"#05a"}]}),et.theme({".mo-cm-reactive-reference":{fontWeight:"400",color:"#005f87",borderBottom:"2px solid #bad3de"},".mo-cm-reactive-reference-hover":{cursor:"pointer",borderBottomWidth:"3px"}})];function X_(t){const{showPlaceholder:e,enableAI:n}=t;return e?"marimo-import":n?"ai":"none"}const e6=t=>{const{cellId:e,keymapConfig:n,hotkeys:o,enableAI:r,cellActions:s,completionConfig:i,lspConfig:a,diagnosticsConfig:l,displayConfig:d}=t,u=X_(t);return[lW(n,o),[et.domEventHandlers({drop:(f,m)=>{var p,b;const _=(p=f.dataTransfer)==null?void 0:p.files[0];if(_!=null&&_.type.startsWith("text/"))return f.preventDefault(),SU(m,_),!0;if(_!=null&&_.type.startsWith("image/"))return f.preventDefault(),CU(m,_),!0;const g=(b=f.dataTransfer)==null?void 0:b.getData("text/plain");if(g){f.preventDefault();const x=m.posAtCoords({x:f.clientX,y:f.clientY});return x!==null&&m.dispatch({changes:{from:x,to:x,insert:g},scrollIntoView:!0}),!0}return!1},dragover:f=>{f.preventDefault()}})],K5(),KE(),EU({completionConfig:i,hotkeys:o,placeholderType:u,lspConfig:a,diagnosticsConfig:l}),IU(e,o,s),t6(t),[Y5,(h=(f,m)=>{kU(f,m)},En.define(f=>new J5(f,h))),et.baseTheme({".underline":{textDecoration:"underline",cursor:"pointer",color:"var(--link)"}})],l!=null&&l.enabled?AU():[],r&&Mm("inline_ai_tooltip")?FE({prompt:f=>async function(m){var v,C;const _=`
${m.codeBefore}
<rewrite_this>
${m.selection}
</rewrite_this>
${m.codeAfter}
`.trim(),g=z4();await B4();const p=await fetch(g.getAiURL("completion").toString(),{method:"POST",headers:g.headers(),body:JSON.stringify({prompt:m.prompt,code:_,selectedText:m.selection,includeOtherCode:"",language:m.language})}),b=((v=m.selection.match(/^\s*/))==null?void 0:v[0])||"",x=(C=p.body)==null?void 0:C.getReader();if(!x)throw new Error("Failed to get response reader");let y="";for(;;){const{done:S,value:E}=await x.read();if(S)break;y+=new TextDecoder().decode(E)}return y.startsWith(b)||(y=b+y),y}({prompt:f.prompt,selection:f.selection,codeBefore:f.codeBefore,codeAfter:f.codeAfter,language:X3(f.editorView)})}):[],X5(at),TU(e,d.reference_highlighting??!1)];var h},t6=t=>{const{theme:e,hotkeys:n,completionConfig:o,cellId:r,lspConfig:s,diagnosticsConfig:i}=t,a=X_(t);return[et.lineWrapping,MU(),OU(),DU(),RU(),PU(),LU(),FU(),zU({position:"fixed",parent:document.querySelector("#App")??void 0}),BU(),e==="dark"?Z5:Q5,UU(s),W5(o),VU(),$U(),ZE(),Vo.high(qn.of(JU)),HU(),WU(),qU.of("    "),H4(KU,{fallback:!0}),qn.of(XU),GU({placeholderType:a,completionConfig:o,hotkeys:n,cellId:r,lspConfig:{...s,diagnostics:i}}),YU.of(ZU()),gr.allowMultipleSelections.of(!0),q5(n),qn.of([{key:"Tab",run:l=>$4(l)||(d=>{const{from:u,to:h}=d.state.selection.main;if(u!==h)return!1;const f=d.state.doc.lineAt(h);return f.text.slice(0,h-f.from).trim()!==""&&nV(d)})(l)||QU(l),preventDefault:!0},{key:n.getHotkey("completion.moveDown").key,run:l=>ma(l.state)!==null&&(Pc(!0)(l),!0),preventDefault:!0},{key:n.getHotkey("completion.moveUp").key,run:l=>ma(l.state)!==null&&(Pc(!1)(l),!0),preventDefault:!0}]),qn.of([...eV,tV])]},n6={width:void 0,height:void 0};function Z_(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}let Q_,e0,t0,n0;Q_=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0}),e0=new Intl.DateTimeFormat("en-US",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0}),t0=t=>{const e=K.c(79),{editing:n,status:o,disabled:r,staleInputs:s,edited:i,interrupted:a,elapsedTime:l,runStartTimestamp:d,lastRunStartTimestamp:u,uninstantiated:h}=t;if(!n)return null;const f=d??u;let m;e[0]!==f?(m=f?c.jsx(n0,{lastRanTime:f}):null,e[0]=f,e[1]=m):m=e[1];const _=m;if(r&&o==="running")return vt.error("CellStatusComponent: disabled and running"),null;if(r&&s){let g,p,b,x;return e[2]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",{children:"This cell is stale, but it's disabled and can't be run"}),e[2]=g):g=e[2],e[3]!==_?(p=c.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[3]=_,e[4]=p):p=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:c.jsxs(Xs,{children:[c.jsx(Js,{className:"h-5 w-5",strokeWidth:1.5}),c.jsx(Bc,{className:"h-3 w-3",strokeWidth:2.5})]})}),e[5]=b):b=e[5],e[6]!==p?(x=c.jsx(Te,{content:p,usePortal:!0,children:b}),e[6]=p,e[7]=x):x=e[7],x}if(r){let g,p,b,x;return e[8]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",{children:"This cell is disabled"}),e[8]=g):g=e[8],e[9]!==_?(p=c.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[9]=_,e[10]=p):p=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx("div",{className:"cell-status-icon cell-status-disabled","data-testid":"cell-status","data-status":"disabled",children:c.jsx(Js,{className:"h-5 w-5",strokeWidth:1.5})}),e[11]=b):b=e[11],e[12]!==p?(x=c.jsx(Te,{content:p,usePortal:!0,children:b}),e[12]=p,e[13]=x):x=e[13],x}if(!s&&o==="disabled-transitively"){let g,p,b,x;return e[14]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",{children:"An ancestor of this cell is disabled, so it can't be run"}),e[14]=g):g=e[14],e[15]!==_?(p=c.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[15]=_,e[16]=p):p=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"disabled-transitively",children:c.jsxs(Xs,{layerTop:!0,children:[c.jsx(Aa,{className:"h-5 w-5",strokeWidth:1.5}),c.jsx(Js,{className:"h-3 w-3",strokeWidth:2.5})]})}),e[17]=b):b=e[17],e[18]!==p?(x=c.jsx(Te,{content:p,usePortal:!0,children:b}),e[18]=p,e[19]=x):x=e[19],x}if(s&&o==="disabled-transitively"){let g,p,b,x;return e[20]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",{children:"This cell is stale, but an ancestor is disabled so it can't be run"}),e[20]=g):g=e[20],e[21]!==_?(p=c.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[21]=_,e[22]=p):p=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:c.jsxs(Xs,{children:[c.jsx(Bc,{className:"h-5 w-5",strokeWidth:1}),c.jsx(Js,{className:"h-3 w-3",strokeWidth:2.5})]})}),e[23]=b):b=e[23],e[24]!==p?(x=c.jsx(Te,{content:p,usePortal:!0,children:b}),e[24]=p,e[25]=x):x=e[25],x}if(o==="running"){let g,p,b,x,y;return e[26]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",{children:"This cell is running"}),e[26]=g):g=e[26],e[27]!==_?(p=c.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[27]=_,e[28]=p):p=e[28],e[29]!==d?(b=Ym.fromSeconds(d)||Ym.now(),e[29]=d,e[30]=b):b=e[30],e[31]!==b?(x=c.jsx("div",{className:"cell-status-icon elapsed-time running","data-testid":"cell-status","data-status":"running",children:c.jsx(o6,{startTime:b})}),e[31]=b,e[32]=x):x=e[32],e[33]!==p||e[34]!==x?(y=c.jsx(Te,{content:p,usePortal:!0,children:x}),e[33]=p,e[34]=x,e[35]=y):y=e[35],y}if(o==="queued"){let g,p,b,x;return e[36]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",{children:"This cell is queued to run"}),e[36]=g):g=e[36],e[37]!==_?(p=c.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[37]=_,e[38]=p):p=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx("div",{className:"cell-status-icon cell-status-queued","data-testid":"cell-status","data-status":"queued",children:c.jsx(pp,{className:"h-5 w-5",strokeWidth:1.5})}),e[39]=b):b=e[39],e[40]!==p?(x=c.jsx(Te,{content:p,usePortal:!0,children:b}),e[40]=p,e[41]=x):x=e[41],x}if(i||a||s||h){let g;e[42]!==l?(g=Sa(l),e[42]=l,e[43]=g):g=e[43];const p=g;let b;e[44]!==l||e[45]!==p?(b=l?c.jsx(od,{elapsedTime:p}):null,e[44]=l,e[45]=p,e[46]=b):b=e[46];const x=b;let y,v,C,S,E,N="";if(h)y="This cell has not yet been run";else if(a){let j;y="This cell was interrupted when it was last run",e[47]!==x?(j=c.jsxs("span",{children:["This cell ran for ",x," before being interrupted"]}),e[47]=x,e[48]=j):j=e[48],N=j}else if(i){let j;y="This cell has been modified since it was last run",e[49]!==x?(j=c.jsxs("span",{children:["This cell took ",x," to run"]}),e[49]=x,e[50]=j):j=e[50],N=j}else{let j;y="This cell has not been run with the latest inputs",e[51]!==x?(j=c.jsxs("span",{children:["This cell took ",x," to run"]}),e[51]=x,e[52]=j):j=e[52],N=j}return e[53]===Symbol.for("react.memo_cache_sentinel")?(v=c.jsx("div",{className:"cell-status-stale","data-testid":"cell-status","data-status":"outdated",children:c.jsx(Bc,{className:"h-5 w-5",strokeWidth:1.5})}),e[53]=v):v=e[53],e[54]!==y?(C=c.jsx(Te,{content:y,usePortal:!0,children:v}),e[54]=y,e[55]=C):C=e[55],e[56]!==l||e[57]!==p||e[58]!==_||e[59]!==N?(S=l&&c.jsx(Te,{content:c.jsxs("div",{className:"flex flex-col gap-1",children:[N,_]}),usePortal:!0,children:c.jsx("div",{className:"elapsed-time hover-action","data-testid":"cell-status","data-status":"outdated",children:c.jsx("span",{children:p})})}),e[56]=l,e[57]=p,e[58]=_,e[59]=N,e[60]=S):S=e[60],e[61]!==C||e[62]!==S?(E=c.jsxs("div",{className:"cell-status-icon flex items-center gap-2",children:[C,S]}),e[61]=C,e[62]=S,e[63]=E):E=e[63],E}if(l!==null){let g;e[64]!==l?(g=Sa(l),e[64]=l,e[65]=g):g=e[65];const p=g;let b;e[66]!==l||e[67]!==p?(b=l?c.jsx(od,{elapsedTime:p}):null,e[66]=l,e[67]=p,e[68]=b):b=e[68];const x=b;let y,v,C,S;return e[69]!==x?(y=c.jsxs("span",{children:["This cell took ",x," to run"]}),e[69]=x,e[70]=y):y=e[70],e[71]!==_||e[72]!==y?(v=c.jsxs("div",{className:"flex flex-col gap-1",children:[y,_]}),e[71]=_,e[72]=y,e[73]=v):v=e[73],e[74]!==p?(C=c.jsx("div",{className:"cell-status-icon elapsed-time hover-action","data-testid":"cell-status","data-status":"idle",children:c.jsx("span",{children:p})}),e[74]=p,e[75]=C):C=e[75],e[76]!==v||e[77]!==C?(S=c.jsx(Te,{content:v,usePortal:!0,children:C}),e[76]=v,e[77]=C,e[78]=S):S=e[78],S}return null},od=t=>{const e=K.c(2);let n;return e[0]!==t.elapsedTime?(n=c.jsx("span",{className:"tracking-wide font-semibold",children:t.elapsedTime}),e[0]=t.elapsedTime,e[1]=n):n=e[1],n},n0=t=>{const e=K.c(18),n=1e3*t.lastRanTime;let o,r,s,i,a,l,d,u,h;if(e[0]!==n){const f=new Date(n),m=new Date,_=f.toDateString()===m.toDateString()?Q_:e0;i="Ran at",a=" ",l=c.jsx("strong",{className:"tracking-wide font-semibold",children:_.format(f)}),d=" ",o="text-muted-foreground",r="(",s=bC(f),e[0]=n,e[1]=o,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=l,e[7]=d}else o=e[1],r=e[2],s=e[3],i=e[4],a=e[5],l=e[6],d=e[7];return e[8]!==o||e[9]!==r||e[10]!==s?(u=c.jsxs("span",{className:o,children:[r,s," ago)"]}),e[8]=o,e[9]=r,e[10]=s,e[11]=u):u=e[11],e[12]!==i||e[13]!==a||e[14]!==l||e[15]!==d||e[16]!==u?(h=c.jsxs("span",{children:[i,a,l,d,u]}),e[12]=i,e[13]=a,e[14]=l,e[15]=d,e[16]=u,e[17]=h):h=e[17],h},Sa=function(t){if(t===null)return"";const e=t,n=e/1e3;return n>=60?`${Math.floor(n/60)}m${Math.floor(n%60)}s`:n>=1?`${n.toFixed(2).toString()}s`:`${e.toFixed(0).toString()}ms`};const o6=t=>{const e=K.c(6);let n;e[0]!==t.startTime?(n=t.startTime.toMilliseconds(),e[0]=t.startTime,e[1]=n):n=e[1];const o=function(i){const a=O.useRef(i),[l,d]=O.useState(i);return O.useEffect(()=>{const u=setInterval(()=>{d(Ym.now().toMilliseconds())},17);return()=>clearInterval(u)},[]),l-a.current}(n);let r,s;return e[2]!==o?(r=Sa(o),e[2]=o,e[3]=r):r=e[3],e[4]!==r?(s=c.jsx("span",{children:r}),e[4]=r,e[5]=s):s=e[5],s};var Mu="ContextMenu",[r6,VW]=q4(Mu,[W4]),an=W4(),[s6,o0]=r6(Mu),r0=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:o,dir:r,modal:s=!0}=t,[i,a]=O.useState(!1),l=an(e),d=_r(o),u=O.useCallback(h=>{a(h),d(h)},[d]);return c.jsx(s6,{scope:e,open:i,onOpenChange:u,modal:s,children:c.jsx(gV,{...l,dir:r,open:i,onOpenChange:u,modal:s,children:n})})};r0.displayName=Mu;var s0="ContextMenuTrigger",i0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:o=!1,...r}=t,s=o0(s0,n),i=an(n),a=O.useRef({x:0,y:0}),l=O.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),d=O.useRef(0),u=O.useCallback(()=>window.clearTimeout(d.current),[]),h=f=>{a.current={x:f.clientX,y:f.clientY},s.onOpenChange(!0)};return O.useEffect(()=>u,[u]),O.useEffect(()=>{o&&u()},[o,u]),c.jsxs(c.Fragment,{children:[c.jsx(sV,{...i,virtualRef:l}),c.jsx($s.span,{"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,...r,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:o?t.onContextMenu:Gn(t.onContextMenu,f=>{u(),h(f),f.preventDefault()}),onPointerDown:o?t.onPointerDown:Gn(t.onPointerDown,_l(f=>{u(),d.current=window.setTimeout(()=>h(f),700)})),onPointerMove:o?t.onPointerMove:Gn(t.onPointerMove,_l(u)),onPointerCancel:o?t.onPointerCancel:Gn(t.onPointerCancel,_l(u)),onPointerUp:o?t.onPointerUp:Gn(t.onPointerUp,_l(u))})]})});i0.displayName=s0;var a0=t=>{const{__scopeContextMenu:e,...n}=t,o=an(e);return c.jsx(_V,{...o,...n})};a0.displayName="ContextMenuPortal";var l0="ContextMenuContent",c0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=o0(l0,n),s=an(n),i=O.useRef(!1);return c.jsx(iV,{...s,...o,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,a),!a.defaultPrevented&&i.current&&a.preventDefault(),i.current=!1},onInteractOutside:a=>{var l;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||r.modal||(i.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});c0.displayName=l0,O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(aV,{...r,...o,ref:e})}).displayName="ContextMenuGroup";var d0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(lV,{...r,...o,ref:e})});d0.displayName="ContextMenuLabel";var u0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(rV,{...r,...o,ref:e})});u0.displayName="ContextMenuItem";var h0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(cV,{...r,...o,ref:e})});h0.displayName="ContextMenuCheckboxItem",O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(dV,{...r,...o,ref:e})}).displayName="ContextMenuRadioGroup";var f0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(uV,{...r,...o,ref:e})});f0.displayName="ContextMenuRadioItem";var m0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(hV,{...r,...o,ref:e})});m0.displayName="ContextMenuItemIndicator";var p0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(oV,{...r,...o,ref:e})});p0.displayName="ContextMenuSeparator",O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(fV,{...r,...o,ref:e})}).displayName="ContextMenuArrow";var g0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(mV,{...r,...o,ref:e})});g0.displayName="ContextMenuSubTrigger";var _0=O.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=an(n);return c.jsx(pV,{...r,...o,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function _l(t){return e=>e.pointerType!=="mouse"?t(e):void 0}_0.displayName="ContextMenuSubContent";var b0=c0,x0=d0,y0=u0,w0=h0,v0=f0,k0=m0,S0=p0,C0=g0,N0=_0;const j0=r0,E0=i0,i6=yV(a0);O.forwardRef((t,e)=>{const n=K.c(14);let o,r,s,i,a,l,d;return n[0]!==t?({className:r,inset:s,children:o,...i}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i):(o=n[1],r=n[2],s=n[3],i=n[4]),n[5]!==r||n[6]!==s?(a=wV({className:r,inset:s}),n[5]=r,n[6]=s,n[7]=a):a=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(SV,{className:"ml-auto h-4 w-4"}),n[8]=l):l=n[8],n[9]!==o||n[10]!==i||n[11]!==e||n[12]!==a?(d=c.jsxs(C0,{ref:e,className:a,...i,children:[o,l]}),n[9]=o,n[10]=i,n[11]=e,n[12]=a,n[13]=d):d=n[13],d}).displayName=C0.displayName;const I0="data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2";O.forwardRef((t,e)=>{const n=K.c(9);let o,r,s,i;return n[0]!==t?({className:o,...r}=t,n[0]=t,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(s=Ne(G4({subcontent:!0}),I0,o),n[3]=o,n[4]=s):s=n[4],n[5]!==r||n[6]!==e||n[7]!==s?(i=c.jsx(N0,{ref:e,className:s,...r}),n[5]=r,n[6]=e,n[7]=s,n[8]=i):i=n[8],i}).displayName=N0.displayName;const Ou=O.forwardRef((t,e)=>{const n=K.c(15);let o,r,s;n[0]!==t?({className:o,scrollable:s,...r}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]);const i=s===void 0||s;let a;n[4]!==o||n[5]!==i?(a=Ne(G4(),I0,i&&"overflow-auto",o),n[4]=o,n[5]=i,n[6]=a):a=n[6];const l=i?"calc(var(--radix-context-menu-content-available-height) - 30px)":void 0;let d,u;return n[7]!==r.style||n[8]!==l?(d={...r.style,maxHeight:l},n[7]=r.style,n[8]=l,n[9]=d):d=n[9],n[10]!==r||n[11]!==e||n[12]!==a||n[13]!==d?(u=c.jsx(i6,{children:c.jsx(vV,{children:c.jsx(b0,{ref:e,className:a,style:d,...r})})}),n[10]=r,n[11]=e,n[12]=a,n[13]=d,n[14]=u):u=n[14],u});Ou.displayName=b0.displayName;const yi=O.forwardRef((t,e)=>{const n=K.c(13);let o,r,s,i,a,l;return n[0]!==t?({className:o,inset:r,variant:i,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i):(o=n[1],r=n[2],s=n[3],i=n[4]),n[5]!==o||n[6]!==r||n[7]!==i?(a=xV({className:o,inset:r,variant:i}),n[5]=o,n[6]=r,n[7]=i,n[8]=a):a=n[8],n[9]!==s||n[10]!==e||n[11]!==a?(l=c.jsx(y0,{ref:e,className:a,...s}),n[9]=s,n[10]=e,n[11]=a,n[12]=l):l=n[12],l});yi.displayName=y0.displayName,O.forwardRef((t,e)=>{const n=K.c(15);let o,r,s,i,a,l,d,u;return n[0]!==t?({className:s,children:r,checked:o,...i}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i):(o=n[1],r=n[2],s=n[3],i=n[4]),n[5]!==s?(a=Uc({className:s}),n[5]=s,n[6]=a):a=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=Uc(),n[7]=l):l=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx("span",{className:l,children:c.jsx(k0,{children:c.jsx(CV,{className:"h-4 w-4"})})}),n[8]=d):d=n[8],n[9]!==o||n[10]!==r||n[11]!==i||n[12]!==e||n[13]!==a?(u=c.jsxs(w0,{ref:e,className:a,checked:o,...i,children:[d,r]}),n[9]=o,n[10]=r,n[11]=i,n[12]=e,n[13]=a,n[14]=u):u=n[14],u}).displayName=w0.displayName,O.forwardRef((t,e)=>{const n=K.c(13);let o,r,s,i,a,l,d;return n[0]!==t?({className:r,children:o,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==r?(i=Uc({className:r}),n[4]=r,n[5]=i):i=n[5],n[6]===Symbol.for("react.memo_cache_sentinel")?(a=Uc(),n[6]=a):a=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("span",{className:a,children:c.jsx(k0,{children:c.jsx(NV,{className:"h-4 w-4 fill-current"})})}),n[7]=l):l=n[7],n[8]!==o||n[9]!==s||n[10]!==e||n[11]!==i?(d=c.jsxs(v0,{ref:e,className:i,...s,children:[l,o]}),n[8]=o,n[9]=s,n[10]=e,n[11]=i,n[12]=d):d=n[12],d}).displayName=v0.displayName,O.forwardRef((t,e)=>{const n=K.c(11);let o,r,s,i,a;return n[0]!==t?({className:o,inset:r,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==o||n[5]!==r?(i=kV({className:o,inset:r}),n[4]=o,n[5]=r,n[6]=i):i=n[6],n[7]!==s||n[8]!==e||n[9]!==i?(a=c.jsx(x0,{ref:e,className:i,...s}),n[7]=s,n[8]=e,n[9]=i,n[10]=a):a=n[10],a}).displayName=x0.displayName;const A0=O.forwardRef((t,e)=>{const n=K.c(9);let o,r,s,i;return n[0]!==t?({className:o,...r}=t,n[0]=t,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(s=Ne(bV({className:o})),n[3]=o,n[4]=s):s=n[4],n[5]!==r||n[6]!==e||n[7]!==s?(i=c.jsx(S0,{ref:e,className:s,...r}),n[5]=r,n[6]=e,n[7]=s,n[8]=i):i=n[8],i});A0.displayName=S0.displayName;const T0=t=>{const e=K.c(20),{connectionState:n,onClick:o,tooltipContent:r}=t;let s;e[0]!==n||e[1]!==r?(s=td(n)||r,e[0]=n,e[1]=r,e[2]=s):s=e[2];const i=s;let a;e[3]!==i||e[4]!==n?(a=po(n)?i:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{children:i}),c.jsx("div",{className:"text-xs text-muted-foreground font-medium pt-1 -mt-2 border-t border-border",children:"Right-click for cell types"})]}),e[3]=i,e[4]=n,e[5]=a):a=e[5];const l=a;let d,u,h,f,m,_;return e[6]!==o?(d=()=>o==null?void 0:o({code:""}),e[6]=o,e[7]=d):d=e[7],e[8]!==n?(u=Ne("shoulder-button hover-action",po(n)&&" inactive-button"),e[8]=n,e[9]=u):u=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(br,{strokeWidth:1.8}),e[10]=h):h=e[10],e[11]!==d||e[12]!==u?(f=c.jsx(xn,{onClick:d,className:u,onMouseDown:Qn.preventFocus,shape:"circle",size:"small",color:"hint-green","data-testid":"create-cell-button",children:h}),e[11]=d,e[12]=u,e[13]=f):f=e[13],e[14]!==l||e[15]!==f?(m=c.jsx(Te,{content:l,children:f}),e[14]=l,e[15]=f,e[16]=m):m=e[16],e[17]!==o||e[18]!==m?(_=c.jsx(a6,{onClick:o,children:m}),e[17]=o,e[18]=m,e[19]=_):_=e[19],_},a6=t=>{const e=K.c(26),{children:n,onClick:o}=t,{createNewCell:r}=bt();if(!o)return n;let s,i,a,l,d,u,h,f,m,_,g,p;return e[0]!==n?(s=c.jsx(E0,{children:n}),e[0]=n,e[1]=s):s=e[1],e[2]!==o?(i=b=>{b.stopPropagation(),o({code:""})},e[2]=o,e[3]=i):i=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx("div",{className:"mr-3 text-muted-foreground",children:c.jsx(hc,{})}),e[4]=a):a=e[4],e[5]!==i?(l=c.jsxs(yi,{onSelect:i,children:[a,"Python cell"]},"python"),e[5]=i,e[6]=l):l=e[6],e[7]!==r||e[8]!==o?(d=b=>{b.stopPropagation(),fo({autoInstantiate:!0,createNewCell:r}),o({code:new ra().defaultCode,hideCode:!0})},e[7]=r,e[8]=o,e[9]=d):d=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx("div",{className:"mr-3 text-muted-foreground",children:c.jsx(uc,{})}),e[10]=u):u=e[10],e[11]!==d?(h=c.jsxs(yi,{onSelect:d,children:[u,"Markdown cell"]},"markdown"),e[11]=d,e[12]=h):h=e[12],e[13]!==r||e[14]!==o?(f=b=>{b.stopPropagation(),fo({autoInstantiate:!0,createNewCell:r}),o({code:new Vc().defaultCode})},e[13]=r,e[14]=o,e[15]=f):f=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx("div",{className:"mr-3 text-muted-foreground",children:c.jsx(lr,{size:13,strokeWidth:1.5})}),e[16]=m):m=e[16],e[17]!==f?(_=c.jsxs(yi,{onSelect:f,children:[m,"SQL cell"]},"sql"),e[17]=f,e[18]=_):_=e[18],e[19]!==l||e[20]!==h||e[21]!==_?(g=c.jsxs(Ou,{children:[l,h,_]}),e[19]=l,e[20]=h,e[21]=_,e[22]=g):g=e[22],e[23]!==s||e[24]!==g?(p=c.jsxs(j0,{children:[s,g]}),e[23]=s,e[24]=g,e[25]=p):p=e[25],p},M0=X.memo(X.forwardRef((t,e)=>{const n=K.c(34);let o,r,s;n[0]!==t?({children:o,showTooltip:s,...r}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]);const i=s===void 0||s,[a,l]=O.useState(!1);let d;n[4]!==r?(d={cell:r},n[4]=r,n[5]=d):d=n[5];const u=kd(d),h=EV();let f,m,_,g,p,b;if(n[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>({toggle:()=>l(l6)}),n[6]=f):f=n[6],O.useImperativeHandle(e,f),n[7]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx(na,{placeholder:"Search actions...",className:"h-6 m-1"}),n[7]=m):m=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(gc,{children:"No results"}),n[8]=_):_=n[8],n[9]!==u){let N;n[11]!==u.length?(N=(j,T)=>c.jsxs(O.Fragment,{children:[c.jsx(Cm,{children:j.map(A=>{let M=c.jsxs("div",{className:"flex items-center flex-1",children:[A.icon&&c.jsx("div",{className:"mr-2 w-5 text-muted-foreground",children:A.icon}),c.jsx("div",{className:"flex-1",children:A.label}),c.jsxs("div",{className:"flex-shrink-0 text-sm",children:[A.hotkey&&Y4(A.hotkey),A.rightElement]})]});return A.tooltip&&(M=c.jsx(Te,{content:A.tooltip,delayDuration:100,children:M})),c.jsx(mo,{className:Ne(A.disabled&&"!opacity-50"),onSelect:()=>{A.disableClick||A.disabled||(A.handle(),l(!1))},variant:A.variant,children:M},A.label)})},T),T<u.length-1&&c.jsx(l4,{})]},T),n[11]=u.length,n[12]=N):N=n[12],g=u.map(N),n[9]=u,n[10]=g}else g=n[10];n[13]!==g?(p=c.jsxs(Ec,{children:[m,c.jsxs(Jm,{children:[_,g]})]}),n[13]=g,n[14]=p):p=n[14],n[15]!==h||n[16]!==p?(b=c.jsx(Fs,{className:"w-[300px] p-0 pt-1 overflow-auto",scrollable:!0,...h,children:p}),n[15]=h,n[16]=p,n[17]=b):b=n[17];const x=b;if(!i){let N,j;return n[18]!==o?(N=c.jsx(Hs,{asChild:!0,children:o}),n[18]=o,n[19]=N):N=n[19],n[20]!==x||n[21]!==a||n[22]!==N?(j=c.jsxs(Ur,{open:a,onOpenChange:l,children:[N,x]}),n[20]=x,n[21]=a,n[22]=N,n[23]=j):j=n[23],j}let y;n[24]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(IV,{tabIndex:-1,children:on("cell.cellActions")}),n[24]=y):y=n[24];const v=!a&&y;let C,S,E;return n[25]!==o?(C=c.jsx(AV,{children:c.jsx(Hs,{className:"flex",children:o})}),n[25]=o,n[26]=C):C=n[26],n[27]!==v||n[28]!==C?(S=c.jsxs(TV,{delayDuration:200,disableHoverableContent:!0,children:[v,C]}),n[27]=v,n[28]=C,n[29]=S):S=n[29],n[30]!==x||n[31]!==a||n[32]!==S?(E=c.jsxs(Ur,{open:a,onOpenChange:l,children:[S,x]}),n[30]=x,n[31]=a,n[32]=S,n[33]=E):E=n[33],E})),O0=X.memo(t=>{const e=K.c(5),{children:n,cellId:o}=t;let r,s;e[0]!==o?(s=jV(o),e[0]=o,e[1]=s):s=e[1],r=s;const i=Le(r);if(!i)return null;let a;return e[2]!==n||e[3]!==i?(a=c.jsx(M0,{showTooltip:!1,...i,children:n}),e[2]=n,e[3]=i,e[4]=a):a=e[4],a});function l6(t){return!t}O0.displayName="ConnectionCellActionsDropdown";const D0=t=>{const e=K.c(32);let n,o,r;e[0]!==t?({children:n,...o}=t,e[0]=t,e[1]=n,e[2]=o):(n=e[1],o=e[2]),e[3]!==o?(r={cell:o},e[3]=o,e[4]=r):r=e[4];const s=kd(r),[i,a]=X.useState(),l=!!i;let d,u,h,f,m,_,g,p,b,x;if(e[5]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(Xi,{size:13,strokeWidth:1.5}),e[5]=d):d=e[5],e[6]!==o?(u=async()=>{var C;if((C=window.getSelection())==null?void 0:C.toString())return void document.execCommand("copy");const v=document.getElementById(Q3.create(o.cellId));v?await _n(v.textContent??""):vt.warn("cell-context-menu: output not found")},e[6]=o,e[7]=u):u=e[7],e[8]!==s||e[9]!==n||e[10]!==i||e[11]!==o||e[12]!==l||e[13]!==u){const y=[{label:"Copy",hidden:l,icon:d,handle:u},{label:"Cut",hidden:!!i,icon:c.jsx(pd,{size:13,strokeWidth:1.5}),handle:c6},{label:"Paste",hidden:!!i,icon:c.jsx(Np,{size:13,strokeWidth:1.5}),handle:async()=>{const{getEditorView:S}=o,E=S();if(E)try{const N=await navigator.clipboard.readText();if(N){const{from:j,to:T}=E.state.selection.main,A=E.state.update({changes:{from:j,to:T,insert:N}});E.dispatch(A)}}catch(N){const j=N;vt.error("Failed to paste from clipboard",j),MV({command:"paste"})}}},{label:"Copy image",hidden:!i,icon:c.jsx(id,{size:13,strokeWidth:1.5}),handle:async()=>{if(i){const S=await fetch(i.src),E=await S.blob(),N=new ClipboardItem({[E.type]:E});await navigator.clipboard.write([N]).then(d6).catch(u6)}}},{icon:c.jsx(mp,{size:13,strokeWidth:1.5}),label:"Download image",hidden:!i,handle:()=>{if(i){const S=document.createElement("a");S.download="image.png",S.href=i.src,S.click()}}},{label:"Go to Definition",icon:c.jsx(DV,{size:13,strokeWidth:1.5}),handle:()=>{const{getEditorView:S}=o,E=S();E&&OV(E)}}],v=[y,...s];let C;f=j0,e[20]===Symbol.for("react.memo_cache_sentinel")?(C=S=>{S.target instanceof HTMLImageElement?a(S.target):a(void 0)},e[20]=C):C=e[20],e[21]!==n?(p=c.jsx(E0,{onContextMenu:C,asChild:!0,children:n}),e[21]=n,e[22]=p):p=e[22],h=Ou,m="w-[300px]",_=!0,g=v.map((S,E)=>c.jsxs(O.Fragment,{children:[S.map(h6),E<v.length-1&&c.jsx(A0,{})]},E)),e[8]=s,e[9]=n,e[10]=i,e[11]=o,e[12]=l,e[13]=u,e[14]=h,e[15]=f,e[16]=m,e[17]=_,e[18]=g,e[19]=p}else h=e[14],f=e[15],m=e[16],_=e[17],g=e[18],p=e[19];return e[23]!==h||e[24]!==m||e[25]!==_||e[26]!==g?(b=c.jsx(h,{className:m,scrollable:_,children:g}),e[23]=h,e[24]=m,e[25]=_,e[26]=g,e[27]=b):b=e[27],e[28]!==f||e[29]!==p||e[30]!==b?(x=c.jsxs(f,{children:[p,b]}),e[28]=f,e[29]=p,e[30]=b,e[31]=x):x=e[31],x};function c6(){document.execCommand("cut")}function d6(){nt({title:"Copied image to clipboard"})}function u6(t){nt({title:"Failed to copy image to clipboard. Try downloading instead.",description:t.message}),vt.error("Failed to copy image to clipboard",t)}function h6(t){if(t.hidden)return null;let e=c.jsxs("div",{className:"flex items-center flex-1",children:[t.icon&&c.jsx("div",{className:"mr-2 w-5 text-muted-foreground",children:t.icon}),c.jsx("div",{className:"flex-1",children:t.label}),c.jsxs("div",{className:"flex-shrink-0 text-sm",children:[t.hotkey&&Y4(t.hotkey),t.rightElement]})]});return t.tooltip&&(e=c.jsx(Te,{delayDuration:100,content:t.tooltip,children:e})),c.jsx(yi,{className:t.disabled?"!opacity-50":"",onSelect:n=>{t.disableClick||t.disabled||t.handle(n)},variant:t.variant,children:e},t.label)}const f6=""+new URL("loro_wasm_bg-bPYKkGLG.wasm",import.meta.url).href;let w;function Du(t){w=t}const wt=new Array(128).fill(void 0);function be(t){return wt[t]}wt.push(void 0,null,!0,!1);let We=0,bl=null;function ts(){return bl!==null&&bl.byteLength!==0||(bl=new Uint8Array(w.memory.buffer)),bl}let xl=new(typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const m6=typeof xl.encodeInto=="function"?function(t,e){return xl.encodeInto(t,e)}:function(t,e){const n=xl.encode(t);return e.set(n),{read:t.length,written:n.length}};function ft(t,e,n){if(n===void 0){const a=xl.encode(t),l=e(a.length,1)>>>0;return ts().subarray(l,l+a.length).set(a),We=a.length,l}let o=t.length,r=e(o,1)>>>0;const s=ts();let i=0;for(;i<o;i++){const a=t.charCodeAt(i);if(a>127)break;s[r+i]=a}if(i!==o){i!==0&&(t=t.slice(i)),r=n(r,o,o=i+3*t.length,1)>>>0;const a=ts().subarray(r+i,r+o);i+=m6(t,a).written,r=n(r,o,i,1)>>>0}return We=i,r}let ns=null;function z(){return(ns===null||ns.buffer.detached===!0||ns.buffer.detached===void 0&&ns.buffer!==w.memory.buffer)&&(ns=new DataView(w.memory.buffer)),ns}let wi=wt.length;function re(t){wi===wt.length&&wt.push(wt.length+1);const e=wi;return wi=wt[e],wt[e]=t,e}function Xt(t,e){try{return t.apply(this,e)}catch(n){w.__wbindgen_export_2(re(n))}}let R0=new(typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function Tt(t,e){return t>>>=0,R0.decode(ts().subarray(t,t+e))}function H(t){const e=be(t);return function(n){n<132||(wt[n]=wi,wi=n)}(t),e}function On(t){return t==null}R0.decode();const P0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>{w.__wbindgen_export_4.get(t.dtor)(t.a,t.b)});function L0(t,e,n,o){const r={a:t,b:e,cnt:1,dtor:n},s=(...i)=>{r.cnt++;const a=r.a;r.a=0;try{return o(a,r.b,...i)}finally{--r.cnt===0?(w.__wbindgen_export_4.get(r.dtor)(a,r.b),P0.unregister(r)):r.a=a}};return s.original=r,P0.register(s,r,r),s}function Ru(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const r=t.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=t.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(t)){const r=t.length;let s="[";r>0&&(s+=Ru(t[0]));for(let i=1;i<r;i++)s+=", "+Ru(t[i]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(!(n&&n.length>1))return toString.call(t);if(o=n[1],o=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:o}function oo(t,e){return t>>>=0,ts().subarray(t/1,t/1+e)}function Yo(t,e){const n=e(1*t.length,1)>>>0;return ts().set(t,n/1),We=t.length,n}function Dn(t,e){t>>>=0;const n=z(),o=[];for(let r=t;r<t+4*e;r+=4)o.push(H(n.getUint32(r,!0)));return o}function kn(t,e){const n=e(4*t.length,4)>>>0,o=z();for(let r=0;r<t.length;r++)o.setUint32(n+4*r,re(t[r]),!0);return We=t.length,n}let Zt=128;function mn(t){if(Zt==1)throw new Error("out of js stack");return wt[--Zt]=t,Zt}function os(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function p6(t,e,n){w.__wbindgen_export_5(t,e,re(n))}function g6(t,e){w.__wbindgen_export_6(t,e)}const F0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_awarenesswasm_free(t>>>0,1));class z0{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,F0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_awarenesswasm_free(e,0)}constructor(e,n){const o=w.awarenesswasm_new(re(e),n);return this.__wbg_ptr=o>>>0,F0.register(this,this.__wbg_ptr,this),this}encode(e){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_encode(s,this.__wbg_ptr,re(e));var n=z().getInt32(s+0,!0),o=z().getInt32(s+4,!0),r=oo(n,o).slice();return w.__wbindgen_export_3(n,1*o,1),r}finally{w.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_encodeAll(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=oo(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}apply(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Yo(e,w.__wbindgen_export_0),i=We;w.awarenesswasm_apply(r,this.__wbg_ptr,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setLocalState(e){w.awarenesswasm_setLocalState(this.__wbg_ptr,re(e))}peer(){return H(w.awarenesswasm_peer(this.__wbg_ptr))}getAllStates(){return H(w.awarenesswasm_getAllStates(this.__wbg_ptr))}getState(e){return H(w.awarenesswasm_getState(this.__wbg_ptr,re(e)))}getTimestamp(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_getTimestamp(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getFloat64(r+8,!0);return n===0?void 0:o}finally{w.__wbindgen_add_to_stack_pointer(16)}}removeOutdated(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_removeOutdated(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}length(){return w.awarenesswasm_length(this.__wbg_ptr)}isEmpty(){return w.awarenesswasm_isEmpty(this.__wbg_ptr)!==0}peers(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_peers(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}}const B0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_changemodifier_free(t>>>0,1));class rs{static __wrap(e){e>>>=0;const n=Object.create(rs.prototype);return n.__wbg_ptr=e,B0.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,B0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_changemodifier_free(e,0)}setMessage(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We,r=w.changemodifier_setMessage(this.__wbg_ptr,n,o);return rs.__wrap(r)}setTimestamp(e){const n=w.changemodifier_setTimestamp(this.__wbg_ptr,e);return rs.__wrap(n)}}const U0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_cursor_free(t>>>0,1));class Jn{static __wrap(e){e>>>=0;const n=Object.create(Jn.prototype);return n.__wbg_ptr=e,U0.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,U0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_cursor_free(e,0)}containerId(){return H(w.cursor_containerId(this.__wbg_ptr))}pos(){return H(w.cursor_pos(this.__wbg_ptr))}side(){return H(w.cursor_side(this.__wbg_ptr))}encode(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.cursor_encode(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=oo(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Yo(e,w.__wbindgen_export_0),i=We;w.cursor_decode(r,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Jn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}kind(){return H(w.cursor_kind(this.__wbg_ptr))}}const V0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_ephemeralstorewasm_free(t>>>0,1)),Pu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorocounter_free(t>>>0,1));class vi{static __wrap(e){e>>>=0;const n=Object.create(vi.prototype);return n.__wbg_ptr=e,Pu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Pu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorocounter_free(e,0)}constructor(){const e=w.lorocounter_new();return this.__wbg_ptr=e>>>0,Pu.register(this,this.__wbg_ptr,this),this}kind(){return H(w.lorocounter_kind(this.__wbg_ptr))}get id(){return H(w.lorocounter_id(this.__wbg_ptr))}increment(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorocounter_increment(o,this.__wbg_ptr,e);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}decrement(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorocounter_decrement(o,this.__wbg_ptr,e);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get value(){return w.lorocounter_value(this.__wbg_ptr)}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorocounter_subscribe(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){return H(w.lorocounter_parent(this.__wbg_ptr))}isAttached(){return w.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){return H(w.lorocounter_getAttached(this.__wbg_ptr))}getShallowValue(){return w.lorocounter_getShallowValue(this.__wbg_ptr)}}const Lu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorodoc_free(t>>>0,1));class bo{static __wrap(e){e>>>=0;const n=Object.create(bo.prototype);return n.__wbg_ptr=e,Lu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Lu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorodoc_free(e,0)}constructor(){const e=w.lorodoc_new();return this.__wbg_ptr=e>>>0,Lu.register(this,this.__wbg_ptr,this),this}setDetachedEditing(e){w.lorodoc_setDetachedEditing(this.__wbg_ptr,e)}isDetachedEditingEnabled(){return w.lorodoc_isDetachedEditingEnabled(this.__wbg_ptr)!==0}setRecordTimestamp(e){w.lorodoc_setRecordTimestamp(this.__wbg_ptr,e)}setChangeMergeInterval(e){w.lorodoc_setChangeMergeInterval(this.__wbg_ptr,e)}configTextStyle(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_configTextStyle(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}configDefaultTextStyle(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_configDefaultTextStyle(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}static fromSnapshot(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Yo(e,w.__wbindgen_export_0),i=We;w.lorodoc_fromSnapshot(r,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return bo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}attach(){w.lorodoc_attach(this.__wbg_ptr)}isDetached(){return w.lorodoc_isDetached(this.__wbg_ptr)!==0}detach(){w.lorodoc_detach(this.__wbg_ptr)}fork(){const e=w.lorodoc_fork(this.__wbg_ptr);return bo.__wrap(e)}forkAt(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=kn(e,w.__wbindgen_export_0),i=We;w.lorodoc_forkAt(r,this.__wbg_ptr,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return bo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}checkoutToLatest(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_checkoutToLatest(n,this.__wbg_ptr);var e=z().getInt32(n+0,!0);if(z().getInt32(n+4,!0))throw H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}travelChangeAncestors(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=kn(e,w.__wbindgen_export_0),i=We;w.lorodoc_travelChangeAncestors(r,this.__wbg_ptr,s,i,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}findIdSpansBetween(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=kn(e,w.__wbindgen_export_0),a=We,l=kn(n,w.__wbindgen_export_0),d=We;w.lorodoc_findIdSpansBetween(s,this.__wbg_ptr,i,a,l,d);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}checkout(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=kn(e,w.__wbindgen_export_0),s=We;w.lorodoc_checkout(o,this.__wbg_ptr,r,s);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get peerId(){const e=w.lorodoc_peerId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get peerIdStr(){return H(w.lorodoc_peerIdStr(this.__wbg_ptr))}setPeerId(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_setPeerId(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}commit(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_commit(o,this.__wbg_ptr,On(e)?0:re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getPendingTxnLength(){return w.lorodoc_getPendingTxnLength(this.__wbg_ptr)>>>0}getText(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getText(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Ko.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}getMap(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getMap(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Jo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}getList(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getList(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return ki.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}getMovableList(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getMovableList(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Si.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}getCounter(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getCounter(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return vi.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}getTree(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getTree(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Ci.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}hasContainer(e){return w.lorodoc_hasContainer(this.__wbg_ptr,re(e))!==0}getContainerById(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getContainerById(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setNextCommitMessage(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;w.lorodoc_setNextCommitMessage(this.__wbg_ptr,n,o)}setNextCommitOrigin(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;w.lorodoc_setNextCommitOrigin(this.__wbg_ptr,n,o)}setNextCommitTimestamp(e){w.lorodoc_setNextCommitTimestamp(this.__wbg_ptr,e)}setNextCommitOptions(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_setNextCommitOptions(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}clearNextCommitOptions(){w.lorodoc_clearNextCommitOptions(this.__wbg_ptr)}getDeepValueWithID(){return H(w.lorodoc_getDeepValueWithID(this.__wbg_ptr))}getPathToContainer(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getPathToContainer(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}JSONPath(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.lorodoc_JSONPath(r,this.__wbg_ptr,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}version(){const e=w.lorodoc_version(this.__wbg_ptr);return Rn.__wrap(e)}shallowSinceVV(){const e=w.lorodoc_shallowSinceVV(this.__wbg_ptr);return Rn.__wrap(e)}isShallow(){return w.lorodoc_isShallow(this.__wbg_ptr)!==0}shallowSinceFrontiers(){return H(w.lorodoc_shallowSinceFrontiers(this.__wbg_ptr))}oplogVersion(){const e=w.lorodoc_oplogVersion(this.__wbg_ptr);return Rn.__wrap(e)}frontiers(){return H(w.lorodoc_frontiers(this.__wbg_ptr))}oplogFrontiers(){return H(w.lorodoc_oplogFrontiers(this.__wbg_ptr))}cmpWithFrontiers(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=kn(e,w.__wbindgen_export_0),i=We;w.lorodoc_cmpWithFrontiers(r,this.__wbg_ptr,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return n}finally{w.__wbindgen_add_to_stack_pointer(16)}}cmpFrontiers(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=kn(e,w.__wbindgen_export_0),a=We,l=kn(n,w.__wbindgen_export_0),d=We;w.lorodoc_cmpFrontiers(s,this.__wbg_ptr,i,a,l,d);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportSnapshot(){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportSnapshot(s,this.__wbg_ptr);var e=z().getInt32(s+0,!0),n=z().getInt32(s+4,!0),o=z().getInt32(s+8,!0);if(z().getInt32(s+12,!0))throw H(o);var r=oo(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),r}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportFrom(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportFrom(i,this.__wbg_ptr,re(e));var n=z().getInt32(i+0,!0),o=z().getInt32(i+4,!0),r=z().getInt32(i+8,!0);if(z().getInt32(i+12,!0))throw H(r);var s=oo(n,o).slice();return w.__wbindgen_export_3(n,1*o,1),s}finally{w.__wbindgen_add_to_stack_pointer(16)}}export(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_export(i,this.__wbg_ptr,re(e));var n=z().getInt32(i+0,!0),o=z().getInt32(i+4,!0),r=z().getInt32(i+8,!0);if(z().getInt32(i+12,!0))throw H(r);var s=oo(n,o).slice();return w.__wbindgen_export_3(n,1*o,1),s}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportJsonUpdates(e,n,o){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportJsonUpdates(i,this.__wbg_ptr,re(e),re(n),On(o)?16777215:o?1:0);var r=z().getInt32(i+0,!0),s=z().getInt32(i+4,!0);if(z().getInt32(i+8,!0))throw H(s);return H(r)}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportJsonInIdSpan(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportJsonInIdSpan(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}importJsonUpdates(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_importJsonUpdates(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}import(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Yo(e,w.__wbindgen_export_0),i=We;w.lorodoc_import(r,this.__wbg_ptr,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}importUpdateBatch(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_importBatch(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}importBatch(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_importBatch(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getShallowValue(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getShallowValue(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_toJSON(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){return H(w.lorodoc_subscribe(this.__wbg_ptr,re(e)))}subscribeLocalUpdates(e){return H(w.lorodoc_subscribeLocalUpdates(this.__wbg_ptr,re(e)))}debugHistory(){w.lorodoc_debugHistory(this.__wbg_ptr)}changeCount(){return w.lorodoc_changeCount(this.__wbg_ptr)>>>0}opCount(){return w.lorodoc_opCount(this.__wbg_ptr)>>>0}getAllChanges(){return H(w.lorodoc_getAllChanges(this.__wbg_ptr))}getChangeAt(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getChangeAt(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getChangeAtLamport(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),a=We;w.lorodoc_getChangeAtLamport(s,this.__wbg_ptr,i,a,n);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getOpsInChange(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getOpsInChange(i,this.__wbg_ptr,re(e));var n=z().getInt32(i+0,!0),o=z().getInt32(i+4,!0),r=z().getInt32(i+8,!0);if(z().getInt32(i+12,!0))throw H(r);var s=Dn(n,o).slice();return w.__wbindgen_export_3(n,4*o,4),s}finally{w.__wbindgen_add_to_stack_pointer(16)}}frontiersToVV(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=kn(e,w.__wbindgen_export_0),i=We;w.lorodoc_frontiersToVV(r,this.__wbg_ptr,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Rn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}vvToFrontiers(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);os(e,Rn),w.lorodoc_vvToFrontiers(r,this.__wbg_ptr,e.__wbg_ptr);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getByPath(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;return H(w.lorodoc_getByPath(this.__wbg_ptr,n,o))}getCursorPos(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);os(e,Jn),w.lorodoc_getCursorPos(r,this.__wbg_ptr,e.__wbg_ptr);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getChangedContainersIn(e,n){try{const a=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getChangedContainersIn(a,this.__wbg_ptr,re(e),n);var o=z().getInt32(a+0,!0),r=z().getInt32(a+4,!0),s=z().getInt32(a+8,!0);if(z().getInt32(a+12,!0))throw H(s);var i=Dn(o,r).slice();return w.__wbindgen_export_3(o,4*r,4),i}finally{w.__wbindgen_add_to_stack_pointer(16)}}revertTo(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=kn(e,w.__wbindgen_export_0),s=We;w.lorodoc_revertTo(o,this.__wbg_ptr,r,s);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}applyDiff(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_applyDiff(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}diff(e,n,o){try{const i=w.__wbindgen_add_to_stack_pointer(-16),a=kn(e,w.__wbindgen_export_0),l=We,d=kn(n,w.__wbindgen_export_0),u=We;w.lorodoc_diff(i,this.__wbg_ptr,a,l,d,u,On(o)?16777215:o?1:0);var r=z().getInt32(i+0,!0),s=z().getInt32(i+4,!0);if(z().getInt32(i+8,!0))throw H(s);return H(r)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getUncommittedOpsAsJson(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getUncommittedOpsAsJson(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribeFirstCommitFromPeer(e){return H(w.lorodoc_subscribeFirstCommitFromPeer(this.__wbg_ptr,re(e)))}subscribePreCommit(e){return H(w.lorodoc_subscribePreCommit(this.__wbg_ptr,re(e)))}deleteRootContainer(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_deleteRootContainer(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setHideEmptyRootContainers(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_setHideEmptyRootContainers(o,this.__wbg_ptr,e);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}}const Fu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorolist_free(t>>>0,1));class ki{static __wrap(e){e>>>=0;const n=Object.create(ki.prototype);return n.__wbg_ptr=e,Fu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Fu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorolist_free(e,0)}constructor(){const e=w.lorolist_new();return this.__wbg_ptr=e>>>0,Fu.register(this,this.__wbg_ptr,this),this}kind(){return H(w.lorolist_kind(this.__wbg_ptr))}insert(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_insert(r,this.__wbg_ptr,e,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_delete(r,this.__wbg_ptr,e,n);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){return H(w.lorolist_get(this.__wbg_ptr,e))}get id(){return H(w.lorolist_id(this.__wbg_ptr))}toArray(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_toArray(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return H(w.lorolist_toJSON(this.__wbg_ptr))}insertContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_insertContainer(s,this.__wbg_ptr,e,re(n));var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_pushContainer(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_subscribe(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get length(){return w.lorolist_length(this.__wbg_ptr)>>>0}parent(){return H(w.lorolist_parent(this.__wbg_ptr))}isAttached(){return w.lorolist_isAttached(this.__wbg_ptr)!==0}getAttached(){return H(w.lorolist_getAttached(this.__wbg_ptr))}getCursor(e,n){const o=w.lorolist_getCursor(this.__wbg_ptr,e,re(n));return o===0?void 0:Jn.__wrap(o)}push(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_push(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_pop(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_clear(n,this.__wbg_ptr);var e=z().getInt32(n+0,!0);if(z().getInt32(n+4,!0))throw H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getIdAt(e){return H(w.lorolist_getIdAt(this.__wbg_ptr,e))}isDeleted(){return w.lorolist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return H(w.lorolist_getShallowValue(this.__wbg_ptr))}}const zu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_loromap_free(t>>>0,1));class Jo{static __wrap(e){e>>>=0;const n=Object.create(Jo.prototype);return n.__wbg_ptr=e,zu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,zu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_loromap_free(e,0)}constructor(){const e=w.loromap_new();return this.__wbg_ptr=e>>>0,zu.register(this,this.__wbg_ptr,this),this}kind(){return H(w.loromap_kind(this.__wbg_ptr))}set(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.loromap_set(r,this.__wbg_ptr,s,i,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),s=We;w.loromap_delete(o,this.__wbg_ptr,r,s);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;return H(w.loromap_get(this.__wbg_ptr,n,o))}getOrCreateContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),a=We;w.loromap_getOrCreateContainer(s,this.__wbg_ptr,i,a,re(n));var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_keys(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}values(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_values(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}entries(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_entries(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}get id(){return H(w.loromap_id(this.__wbg_ptr))}toJSON(){return H(w.loromap_toJSON(this.__wbg_ptr))}setContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),a=We;w.loromap_setContainer(s,this.__wbg_ptr,i,a,re(n));var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_subscribe(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get size(){return w.loromap_size(this.__wbg_ptr)>>>0}parent(){return H(w.loromap_parent(this.__wbg_ptr))}isAttached(){return w.loromap_isAttached(this.__wbg_ptr)!==0}getAttached(){return H(w.loromap_getAttached(this.__wbg_ptr))}clear(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_clear(n,this.__wbg_ptr);var e=z().getInt32(n+0,!0);if(z().getInt32(n+4,!0))throw H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getLastEditor(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;return H(w.loromap_getLastEditor(this.__wbg_ptr,n,o))}isDeleted(){return w.loromap_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return H(w.loromap_getShallowValue(this.__wbg_ptr))}}const Bu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_loromovablelist_free(t>>>0,1));class Si{static __wrap(e){e>>>=0;const n=Object.create(Si.prototype);return n.__wbg_ptr=e,Bu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Bu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_loromovablelist_free(e,0)}constructor(){const e=w.loromovablelist_new();return this.__wbg_ptr=e>>>0,Bu.register(this,this.__wbg_ptr,this),this}kind(){return H(w.loromovablelist_kind(this.__wbg_ptr))}insert(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_insert(r,this.__wbg_ptr,e,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_delete(r,this.__wbg_ptr,e,n);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){return H(w.loromovablelist_get(this.__wbg_ptr,e))}get id(){return H(w.loromovablelist_id(this.__wbg_ptr))}toArray(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_toArray(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return H(w.loromovablelist_toJSON(this.__wbg_ptr))}insertContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_insertContainer(s,this.__wbg_ptr,e,re(n));var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_pushContainer(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_subscribe(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get length(){return w.loromovablelist_length(this.__wbg_ptr)>>>0}parent(){return H(w.loromovablelist_parent(this.__wbg_ptr))}isAttached(){return w.loromovablelist_isAttached(this.__wbg_ptr)!==0}getAttached(){return H(w.loromovablelist_getAttached(this.__wbg_ptr))}getCursor(e,n){const o=w.loromovablelist_getCursor(this.__wbg_ptr,e,re(n));return o===0?void 0:Jn.__wrap(o)}move(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_move(r,this.__wbg_ptr,e,n);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}set(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_set(r,this.__wbg_ptr,e,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_setContainer(s,this.__wbg_ptr,e,re(n));var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}push(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_push(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_pop(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_clear(n,this.__wbg_ptr);var e=z().getInt32(n+0,!0);if(z().getInt32(n+4,!0))throw H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getCreatorAt(e){return H(w.loromovablelist_getCreatorAt(this.__wbg_ptr,e))}getLastMoverAt(e){return H(w.loromovablelist_getLastMoverAt(this.__wbg_ptr,e))}getLastEditorAt(e){return H(w.loromovablelist_getLastEditorAt(this.__wbg_ptr,e))}isDeleted(){return w.loromovablelist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return H(w.loromovablelist_getShallowValue(this.__wbg_ptr))}}const Uu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorotext_free(t>>>0,1));class Ko{static __wrap(e){e>>>=0;const n=Object.create(Ko.prototype);return n.__wbg_ptr=e,Uu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Uu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorotext_free(e,0)}constructor(){const e=w.lorotext_new();return this.__wbg_ptr=e>>>0,Uu.register(this,this.__wbg_ptr,this),this}kind(){return H(w.lorotext_kind(this.__wbg_ptr))}iter(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_iter(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}update(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.lorotext_update(r,this.__wbg_ptr,s,i,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}updateByLine(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.lorotext_updateByLine(r,this.__wbg_ptr,s,i,re(n));var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}insert(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.lorotext_insert(r,this.__wbg_ptr,e,s,i);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}slice(e,n){let o,r;try{const h=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_slice(h,this.__wbg_ptr,e,n);var s=z().getInt32(h+0,!0),i=z().getInt32(h+4,!0),a=z().getInt32(h+8,!0),l=z().getInt32(h+12,!0),d=s,u=i;if(l)throw d=0,u=0,H(a);return o=d,r=u,Tt(d,u)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(o,r,1)}}charAt(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_charAt(r,this.__wbg_ptr,e);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return String.fromCodePoint(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}splice(e,n,o){let r,s;try{const f=w.__wbindgen_add_to_stack_pointer(-16),m=ft(o,w.__wbindgen_export_0,w.__wbindgen_export_1),_=We;w.lorotext_splice(f,this.__wbg_ptr,e,n,m,_);var i=z().getInt32(f+0,!0),a=z().getInt32(f+4,!0),l=z().getInt32(f+8,!0),d=z().getInt32(f+12,!0),u=i,h=a;if(d)throw u=0,h=0,H(l);return r=u,s=h,Tt(u,h)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(r,s,1)}}insertUtf8(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.lorotext_insertUtf8(r,this.__wbg_ptr,e,s,i);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_delete(r,this.__wbg_ptr,e,n);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}deleteUtf8(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_deleteUtf8(r,this.__wbg_ptr,e,n);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}mark(e,n,o){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),a=We;w.lorotext_mark(s,this.__wbg_ptr,re(e),i,a,re(o));var r=z().getInt32(s+0,!0);if(z().getInt32(s+4,!0))throw H(r)}finally{w.__wbindgen_add_to_stack_pointer(16)}}unmark(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.lorotext_unmark(r,this.__wbg_ptr,re(e),s,i);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,n;try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_toString(s,this.__wbg_ptr);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);return e=o,n=r,Tt(o,r)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(e,n,1)}}toDelta(){return H(w.lorotext_toDelta(this.__wbg_ptr))}get id(){return H(w.lorotext_id(this.__wbg_ptr))}get length(){return w.lorotext_length(this.__wbg_ptr)>>>0}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_subscribe(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}applyDelta(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_applyDelta(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){return H(w.lorotext_parent(this.__wbg_ptr))}isAttached(){return w.lorotext_isAttached(this.__wbg_ptr)!==0}getAttached(){return H(w.lorotext_getAttached(this.__wbg_ptr))}getCursor(e,n){const o=w.lorotext_getCursor(this.__wbg_ptr,e,re(n));return o===0?void 0:Jn.__wrap(o)}push(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),s=We;w.lorotext_push(o,this.__wbg_ptr,r,s);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getEditorOf(e){return H(w.lorotext_getEditorOf(this.__wbg_ptr,e))}isDeleted(){return w.lorotext_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){let e,n;try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_getShallowValue(s,this.__wbg_ptr);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);return e=o,n=r,Tt(o,r)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(e,n,1)}}toJSON(){return H(w.lorotext_toJSON(this.__wbg_ptr))}}const Vu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorotree_free(t>>>0,1));class Ci{static __wrap(e){e>>>=0;const n=Object.create(Ci.prototype);return n.__wbg_ptr=e,Vu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Vu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorotree_free(e,0)}constructor(){const e=w.lorotree_new();return this.__wbg_ptr=e>>>0,Vu.register(this,this.__wbg_ptr,this),this}kind(){return H(w.lorotree_kind(this.__wbg_ptr))}createNode(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_createNode(s,this.__wbg_ptr,mn(e),On(n)?4294967297:n>>>0);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);if(z().getInt32(s+8,!0))throw H(r);return ro.__wrap(o)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}move(e,n,o){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_move(s,this.__wbg_ptr,mn(e),mn(n),On(o)?4294967297:o>>>0);var r=z().getInt32(s+0,!0);if(z().getInt32(s+4,!0))throw H(r)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0,wt[Zt++]=void 0}}delete(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_delete(o,this.__wbg_ptr,mn(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}getNodeByID(e){try{const n=w.lorotree_getNodeByID(this.__wbg_ptr,mn(e));return n===0?void 0:ro.__wrap(n)}finally{wt[Zt++]=void 0}}get id(){return H(w.lorotree_id(this.__wbg_ptr))}has(e){try{return w.lorotree_has(this.__wbg_ptr,mn(e))!==0}finally{wt[Zt++]=void 0}}isNodeDeleted(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_isNodeDeleted(r,this.__wbg_ptr,mn(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return n!==0}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}toArray(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_toArray(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getNodes(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_getNodes(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return H(w.lorotree_toJSON(this.__wbg_ptr))}nodes(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_nodes(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}roots(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_roots(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=Dn(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_subscribe(r,this.__wbg_ptr,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){return H(w.lorotree_parent(this.__wbg_ptr))}isAttached(){return w.lorotree_isAttached(this.__wbg_ptr)!==0}getAttached(){return H(w.lorotree_getAttached(this.__wbg_ptr))}enableFractionalIndex(e){w.lorotree_enableFractionalIndex(this.__wbg_ptr,e)}disableFractionalIndex(){w.lorotree_disableFractionalIndex(this.__wbg_ptr)}isFractionalIndexEnabled(){return w.lorotree_isFractionalIndexEnabled(this.__wbg_ptr)!==0}isDeleted(){return w.lorotree_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return H(w.lorotree_getShallowValue(this.__wbg_ptr))}}const $0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorotreenode_free(t>>>0,1));class ro{static __wrap(e){e>>>=0;const n=Object.create(ro.prototype);return n.__wbg_ptr=e,$0.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,$0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorotreenode_free(e,0)}__getClassname(){let e,n;try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode___getClassname(s,this.__wbg_ptr);var o=z().getInt32(s+0,!0),r=z().getInt32(s+4,!0);return e=o,n=r,Tt(o,r)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(e,n,1)}}get id(){return H(w.lorotreenode_id(this.__wbg_ptr))}createNode(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_createNode(r,this.__wbg_ptr,On(e)?4294967297:e>>>0);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return ro.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}move(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_move(r,this.__wbg_ptr,mn(e),On(n)?4294967297:n>>>0);var o=z().getInt32(r+0,!0);if(z().getInt32(r+4,!0))throw H(o)}finally{w.__wbindgen_add_to_stack_pointer(16),wt[Zt++]=void 0}}moveAfter(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);os(e,ro),w.lorotreenode_moveAfter(o,this.__wbg_ptr,e.__wbg_ptr);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}moveBefore(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);os(e,ro),w.lorotreenode_moveBefore(o,this.__wbg_ptr,e.__wbg_ptr);var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}index(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_index(o,this.__wbg_ptr);var e=z().getFloat64(o+0,!0),n=z().getInt32(o+8,!0);if(z().getInt32(o+12,!0))throw H(n);return e===4294967297?void 0:e}finally{w.__wbindgen_add_to_stack_pointer(16)}}fractionalIndex(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_fractionalIndex(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get data(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_data(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return Jo.__wrap(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_toJSON(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_parent(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return e===0?void 0:ro.__wrap(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}children(){return H(w.lorotreenode_children(this.__wbg_ptr))}isDeleted(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_isDeleted(o,this.__wbg_ptr);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return e!==0}finally{w.__wbindgen_add_to_stack_pointer(16)}}getLastMoveId(){return H(w.lorotreenode_getLastMoveId(this.__wbg_ptr))}creationId(){return H(w.lorotreenode_creationId(this.__wbg_ptr))}creator(){return H(w.lorotreenode_creator(this.__wbg_ptr))}}const H0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_undomanager_free(t>>>0,1)),$u=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_versionvector_free(t>>>0,1));class Rn{static __wrap(e){e>>>=0;const n=Object.create(Rn.prototype);return n.__wbg_ptr=e,$u.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,$u.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_versionvector_free(e,0)}constructor(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_new(r,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return this.__wbg_ptr=n>>>0,$u.register(this,this.__wbg_ptr,this),this}finally{w.__wbindgen_add_to_stack_pointer(16)}}static parseJSON(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_parseJSON(r,re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Rn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return H(w.versionvector_toJSON(this.__wbg_ptr))}encode(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_encode(r,this.__wbg_ptr);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=oo(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Yo(e,w.__wbindgen_export_0),i=We;w.versionvector_decode(r,s,i);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return Rn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_get(r,this.__wbg_ptr,re(e));var n=z().getFloat64(r+0,!0),o=z().getInt32(r+8,!0);if(z().getInt32(r+12,!0))throw H(o);return n===4294967297?void 0:n}finally{w.__wbindgen_add_to_stack_pointer(16)}}compare(e){os(e,Rn);const n=w.versionvector_compare(this.__wbg_ptr,e.__wbg_ptr);return n===4294967297?void 0:n}setEnd(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_setEnd(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setLast(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_setLast(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}remove(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_remove(o,this.__wbg_ptr,re(e));var n=z().getInt32(o+0,!0);if(z().getInt32(o+4,!0))throw H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}length(){return w.versionvector_length(this.__wbg_ptr)>>>0}}function W0(t,e){const n=ft(String(be(e)),w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;z().setInt32(t+4,o,!0),z().setInt32(t+0,n,!0)}function q0(){return Xt(function(t,e,n){return re(Reflect.apply(be(t),be(e),be(n)))},arguments)}function G0(t){return re(be(t).buffer)}function Y0(){return Xt(function(t,e){return re(be(t).call(be(e)))},arguments)}function J0(){return Xt(function(t,e,n){return re(be(t).call(be(e),be(n)))},arguments)}function K0(){return Xt(function(t,e,n,o,r){return re(be(t).call(be(e),be(n),be(o),be(r)))},arguments)}function X0(){return Xt(function(t,e,n,o){return re(be(t).call(be(e),be(n),be(o)))},arguments)}function Z0(t){return re(rs.__wrap(t))}function Q0(t){return re(be(t).crypto)}function eb(t){return re(Jn.__wrap(t))}function tb(t){return be(t).done}function nb(t){return re(be(t).entries())}function ob(t){return re(Object.entries(be(t)))}function rb(t,e){let n,o;try{n=t,o=e,console.error(Tt(t,e))}finally{w.__wbindgen_export_3(n,o,1)}}function sb(t,e){console.error(Tt(t,e))}function ib(t){return re(Array.from(be(t)))}function ab(){return Xt(function(t,e){be(t).getRandomValues(be(e))},arguments)}function lb(t,e){return re(be(t)[e>>>0])}function cb(){return Xt(function(t,e){return re(Reflect.get(be(t),be(e)))},arguments)}function db(t,e){return be(t)[e>>>0]}function ub(t,e){return re(be(t)[be(e)])}function hb(){return Xt(function(){return re(globalThis.globalThis)},arguments)}function fb(){return Xt(function(){return re(global.global)},arguments)}function mb(t){let e;try{e=be(t)instanceof ArrayBuffer}catch{e=!1}return e}function pb(t){let e;try{e=be(t)instanceof Map}catch{e=!1}return e}function gb(t){let e;try{e=be(t)instanceof Object}catch{e=!1}return e}function _b(t){let e;try{e=be(t)instanceof Uint8Array}catch{e=!1}return e}function bb(t){return Array.isArray(be(t))}function xb(t){return Number.isSafeInteger(be(t))}function yb(){return re(Symbol.iterator)}function wb(t){return be(t).length}function vb(t){return be(t).length}function kb(t,e,n,o,r,s,i,a){let l,d;try{l=t,d=e,console.log(Tt(t,e),Tt(n,o),Tt(r,s),Tt(i,a))}finally{w.__wbindgen_export_3(l,d,1)}}function Sb(t,e){console.log(Tt(t,e))}function Cb(t,e){let n,o;try{n=t,o=e,console.log(Tt(t,e))}finally{w.__wbindgen_export_3(n,o,1)}}function Nb(t){return re(vi.__wrap(t))}function jb(t){return re(ki.__wrap(t))}function Eb(t){return re(Jo.__wrap(t))}function Ib(t){return re(Si.__wrap(t))}function Ab(t){return re(Ko.__wrap(t))}function Tb(t){return re(Ci.__wrap(t))}function Mb(t){return re(ro.__wrap(t))}function Ob(t,e){performance.mark(Tt(t,e))}function Db(){return Xt(function(t,e,n,o){let r,s,i,a;try{r=t,s=e,i=n,a=o,performance.measure(Tt(t,e),Tt(n,o))}finally{w.__wbindgen_export_3(r,s,1),w.__wbindgen_export_3(i,a,1)}},arguments)}function Rb(t){return re(be(t).msCrypto)}function Pb(){return re(new Map)}function Lb(t){return re(new Uint8Array(be(t)))}function Fb(){return re(new Object)}function zb(){return re(new Error)}function Bb(){return re(new Array)}function Ub(t,e){return re(new Function(Tt(t,e)))}function Vb(t,e,n){return re(new Uint8Array(be(t),e>>>0,n>>>0))}function $b(t){return re(new Uint8Array(t>>>0))}function Hb(t){return re(new Array(t>>>0))}function Wb(t){return re(be(t).next)}function qb(){return Xt(function(t){return re(be(t).next())},arguments)}function Gb(t){return re(be(t).node)}function Yb(){return Date.now()}function Jb(){return Xt(function(t){return re(Reflect.ownKeys(be(t)))},arguments)}function Kb(t){return re(be(t).process)}function Xb(t,e){return be(t).push(be(e))}function Zb(){return Xt(function(t,e){be(t).randomFillSync(H(e))},arguments)}function Qb(){return Xt(function(){return re(module.require)},arguments)}function ex(t){return re(Promise.resolve(be(t)))}function tx(){return Xt(function(){return re(self.self)},arguments)}function nx(){return Xt(function(t,e,n){return Reflect.set(be(t),be(e),be(n))},arguments)}function ox(t,e,n){return re(be(t).set(be(e),be(n)))}function rx(t,e,n){be(t)[H(e)]=H(n)}function sx(t,e,n){be(t).set(be(e),n>>>0)}function ix(t,e,n){be(t)[e>>>0]=H(n)}function ax(t,e,n){be(t)[e>>>0]=n}function lx(t,e){const n=ft(be(e).stack,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;z().setInt32(t+4,o,!0),z().setInt32(t+0,n,!0)}function cx(t,e,n){return re(be(t).subarray(e>>>0,n>>>0))}function dx(t,e){return re(be(t).then(be(e)))}function ux(t){return re(be(t).value)}function hx(t){return re(be(t).versions)}function fx(t){return re(Rn.__wrap(t))}function mx(){return Xt(function(){return re(window.window)},arguments)}function px(t){return+be(t)}function gx(t){return re(t)}function _x(t){return re(BigInt.asUintN(64,t))}function bx(t,e){const n=be(e),o=typeof n=="bigint"?n:void 0;z().setBigInt64(t+8,On(o)?BigInt(0):o,!0),z().setInt32(t+0,!On(o),!0)}function xx(t){const e=be(t);return typeof e=="boolean"?e?1:0:2}function yx(t){const e=H(t).original;return e.cnt--==1?(e.a=0,!0):!1}function wx(t,e,n){return re(L0(t,e,8,p6))}function vx(t,e,n){return re(L0(t,e,10,g6))}function kx(t,e){const n=ft(Ru(be(e)),w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;z().setInt32(t+4,o,!0),z().setInt32(t+0,n,!0)}function Sx(t,e){return re(new Error(Tt(t,e)))}function Cx(t,e){return be(t)in be(e)}function Nx(t){return Array.isArray(be(t))}function jx(t){return typeof be(t)=="bigint"}function Ex(t){return!be(t)}function Ix(t){return typeof be(t)=="function"}function Ax(t){return be(t)===null}function Tx(t){const e=be(t);return typeof e=="object"&&e!==null}function Mx(t){return typeof be(t)=="string"}function Ox(t){return be(t)===void 0}function Dx(t,e){return be(t)===be(e)}function Rx(t,e){return be(t)==be(e)}function Px(){return re(w.memory)}function Lx(t,e){const n=be(e),o=typeof n=="number"?n:void 0;z().setFloat64(t+8,On(o)?0:o,!0),z().setInt32(t+0,!On(o),!0)}function Fx(t){return re(t)}function zx(t){return re(be(t))}function Bx(t){H(t)}function Ux(t){throw H(t)}function Vx(t,e){const n=be(e),o=typeof n=="string"?n:void 0;var r=On(o)?0:ft(o,w.__wbindgen_export_0,w.__wbindgen_export_1),s=We;z().setInt32(t+4,s,!0),z().setInt32(t+0,r,!0)}function $x(t,e){return re(Tt(t,e))}function Hx(t,e){throw new Error(Tt(t,e))}function Wx(t){return re(typeof be(t))}const _6=Object.freeze(Object.defineProperty({__proto__:null,AwarenessWasm:z0,ChangeModifier:rs,Cursor:Jn,EphemeralStoreWasm:class{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,V0.unregister(this),t}free(){const t=this.__destroy_into_raw();w.__wbg_ephemeralstorewasm_free(t,0)}constructor(t){const e=w.ephemeralstorewasm_new(t);return this.__wbg_ptr=e>>>0,V0.register(this,this.__wbg_ptr,this),this}set(t,e){const n=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),o=We;w.ephemeralstorewasm_set(this.__wbg_ptr,n,o,re(e))}delete(t){const e=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),n=We;w.ephemeralstorewasm_delete(this.__wbg_ptr,e,n)}get(t){const e=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),n=We;return H(w.ephemeralstorewasm_get(this.__wbg_ptr,e,n))}getAllStates(){return H(w.ephemeralstorewasm_getAllStates(this.__wbg_ptr))}subscribeLocalUpdates(t){return H(w.ephemeralstorewasm_subscribeLocalUpdates(this.__wbg_ptr,re(t)))}subscribe(t){return H(w.ephemeralstorewasm_subscribe(this.__wbg_ptr,re(t)))}encode(t){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),i=We;w.ephemeralstorewasm_encode(r,this.__wbg_ptr,s,i);var e=z().getInt32(r+0,!0),n=z().getInt32(r+4,!0),o=oo(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.ephemeralstorewasm_encodeAll(o,this.__wbg_ptr);var t=z().getInt32(o+0,!0),e=z().getInt32(o+4,!0),n=oo(t,e).slice();return w.__wbindgen_export_3(t,1*e,1),n}finally{w.__wbindgen_add_to_stack_pointer(16)}}apply(t){const e=Yo(t,w.__wbindgen_export_0),n=We;w.ephemeralstorewasm_apply(this.__wbg_ptr,e,n)}removeOutdated(){w.ephemeralstorewasm_removeOutdated(this.__wbg_ptr)}isEmpty(){return w.ephemeralstorewasm_isEmpty(this.__wbg_ptr)!==0}keys(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.ephemeralstorewasm_keys(o,this.__wbg_ptr);var t=z().getInt32(o+0,!0),e=z().getInt32(o+4,!0),n=Dn(t,e).slice();return w.__wbindgen_export_3(t,4*e,4),n}finally{w.__wbindgen_add_to_stack_pointer(16)}}},LORO_VERSION:function(){let t,e;try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.LORO_VERSION(r);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);return t=n,e=o,Tt(n,o)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(t,e,1)}},LoroCounter:vi,LoroDoc:bo,LoroList:ki,LoroMap:Jo,LoroMovableList:Si,LoroText:Ko,LoroTree:Ci,LoroTreeNode:ro,UndoManager:class{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,H0.unregister(this),t}free(){const t=this.__destroy_into_raw();w.__wbg_undomanager_free(t,0)}constructor(t,e){os(t,bo);const n=w.undomanager_new(t.__wbg_ptr,re(e));return this.__wbg_ptr=n>>>0,H0.register(this,this.__wbg_ptr,this),this}undo(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.undomanager_undo(n,this.__wbg_ptr);var t=z().getInt32(n+0,!0),e=z().getInt32(n+4,!0);if(z().getInt32(n+8,!0))throw H(e);return t!==0}finally{w.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.undomanager_redo(n,this.__wbg_ptr);var t=z().getInt32(n+0,!0),e=z().getInt32(n+4,!0);if(z().getInt32(n+8,!0))throw H(e);return t!==0}finally{w.__wbindgen_add_to_stack_pointer(16)}}groupStart(){try{const e=w.__wbindgen_add_to_stack_pointer(-16);w.undomanager_groupStart(e,this.__wbg_ptr);var t=z().getInt32(e+0,!0);if(z().getInt32(e+4,!0))throw H(t)}finally{w.__wbindgen_add_to_stack_pointer(16)}}groupEnd(){w.undomanager_groupEnd(this.__wbg_ptr)}canUndo(){return w.undomanager_canUndo(this.__wbg_ptr)!==0}canRedo(){return w.undomanager_canRedo(this.__wbg_ptr)!==0}setMaxUndoSteps(t){w.undomanager_setMaxUndoSteps(this.__wbg_ptr,t)}setMergeInterval(t){w.undomanager_setMergeInterval(this.__wbg_ptr,t)}addExcludeOriginPrefix(t){const e=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),n=We;w.undomanager_addExcludeOriginPrefix(this.__wbg_ptr,e,n)}setOnPush(t){w.undomanager_setOnPush(this.__wbg_ptr,re(t))}setOnPop(t){w.undomanager_setOnPop(this.__wbg_ptr,re(t))}clear(){w.undomanager_clear(this.__wbg_ptr)}},VersionVector:Rn,__wbg_String_8f0eb39a4a4c2f66:W0,__wbg_apply_9bb7fe8fff013a3f:q0,__wbg_buffer_ef9774282e5dab94:G0,__wbg_call_0ad083564791763a:Y0,__wbg_call_a34b6b4765f27be0:J0,__wbg_call_d00953b926be4879:K0,__wbg_call_efe5a4db7065d1a2:X0,__wbg_changemodifier_new:Z0,__wbg_crypto_ed58b8e10a292839:Q0,__wbg_cursor_new:eb,__wbg_done_f4c254830a095eaf:tb,__wbg_entries_4dce6361e3ba6fbc:nb,__wbg_entries_83beb641792ccb9c:ob,__wbg_error_7534b8e9a36f1ab4:rb,__wbg_error_9912f7d6d7835a4b:sb,__wbg_from_3aa0fcaa8eef0104:ib,__wbg_getRandomValues_bcb4912f16000dc4:ab,__wbg_get_0c3cc364764a0b98:lb,__wbg_get_b996a12be035ef4f:cb,__wbg_getindex_a471648b3037c750:db,__wbg_getwithrefkey_1dc361bd10053bfe:ub,__wbg_globalThis_6b4d52a0b6aaeaea:hb,__wbg_global_49324ce12193de77:fb,__wbg_instanceof_ArrayBuffer_ff40e55b5978e215:mb,__wbg_instanceof_Map_0f3f3653f757ced1:pb,__wbg_instanceof_Object_9108547bac1f91b1:gb,__wbg_instanceof_Uint8Array_db97368f94b1373f:_b,__wbg_isArray_8738f1062fa88586:bb,__wbg_isSafeInteger_a1b3e0811faecf2f:xb,__wbg_iterator_c0c688f37fa815e6:yb,__wbg_length_12246a78d2f65d3a:wb,__wbg_length_c24da17096edfe57:vb,__wbg_log_0cc1b7768397bcfe:kb,__wbg_log_0fd6c49475c7bece:Sb,__wbg_log_cb9e190acc5753fb:Cb,__wbg_lorocounter_new:Nb,__wbg_lorolist_new:jb,__wbg_loromap_new:Eb,__wbg_loromovablelist_new:Ib,__wbg_lorotext_new:Ab,__wbg_lorotree_new:Tb,__wbg_lorotreenode_new:Mb,__wbg_mark_7438147ce31e9d4b:Ob,__wbg_measure_fb7825c11612c823:Db,__wbg_msCrypto_0a36e2ec3a343d26:Rb,__wbg_new_518e2184725aa711:Pb,__wbg_new_59845962d1127937:Lb,__wbg_new_67abf4a77618ee3e:Fb,__wbg_new_8a6f238a6ece86ea:zb,__wbg_new_e2d07398d7689006:Bb,__wbg_newnoargs_a136448eeb7d48ac:Ub,__wbg_newwithbyteoffsetandlength_84908302a4c137cf:Vb,__wbg_newwithlength_4c216eaaf23f2f9a:$b,__wbg_newwithlength_88b49de1eb24d63e:Hb,__wbg_next_928df8c15fc0c9b0:Wb,__wbg_next_9dc0926f351c7090:qb,__wbg_node_02999533c4ea02e3:Gb,__wbg_now_439b66158bc4f246:Yb,__wbg_ownKeys_b16312a839a4152c:Jb,__wbg_process_5c1d670bc53614b8:Kb,__wbg_push_e7d7247e69dad3ee:Xb,__wbg_randomFillSync_ab2cfe79ebbf2740:Zb,__wbg_require_79b1e9274cde3c87:Qb,__wbg_resolve_267ff08e7e1d2ce4:ex,__wbg_self_cca3ca60d61220f4:tx,__wbg_set_1b50d2de855a9d50:nx,__wbg_set_393f510a6b7e9da5:ox,__wbg_set_3f1d0b984ed272ed:rx,__wbg_set_5deee49b10b2b780:sx,__wbg_set_93ba9407b5476ec6:ix,__wbg_set_wasm:Du,__wbg_setindex_e0b7b31bfc87ba3f:ax,__wbg_stack_0ed75d68575b0f3c:lx,__wbg_subarray_2dc34705c0dc7cdb:cx,__wbg_then_84907e7a6730461e:dx,__wbg_value_51f8a88d4a1805fb:ux,__wbg_versions_c71aa1626a93e0a1:hx,__wbg_versionvector_new:fx,__wbg_window_2aba046d3fc4ad7c:mx,__wbindgen_as_number:px,__wbindgen_bigint_from_i64:gx,__wbindgen_bigint_from_u64:_x,__wbindgen_bigint_get_as_i64:bx,__wbindgen_boolean_get:xx,__wbindgen_cb_drop:yx,__wbindgen_closure_wrapper563:wx,__wbindgen_closure_wrapper566:vx,__wbindgen_debug_string:kx,__wbindgen_error_new:Sx,__wbindgen_in:Cx,__wbindgen_is_array:Nx,__wbindgen_is_bigint:jx,__wbindgen_is_falsy:Ex,__wbindgen_is_function:Ix,__wbindgen_is_null:Ax,__wbindgen_is_object:Tx,__wbindgen_is_string:Mx,__wbindgen_is_undefined:Ox,__wbindgen_jsval_eq:Dx,__wbindgen_jsval_loose_eq:Rx,__wbindgen_memory:Px,__wbindgen_number_get:Lx,__wbindgen_number_new:Fx,__wbindgen_object_clone_ref:zx,__wbindgen_object_drop_ref:Bx,__wbindgen_rethrow:Ux,__wbindgen_string_get:Vx,__wbindgen_string_new:$x,__wbindgen_throw:Hx,__wbindgen_typeof:Wx,decodeFrontiers:function(t){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=Yo(t,w.__wbindgen_export_0),s=We;w.decodeFrontiers(o,r,s);var e=z().getInt32(o+0,!0),n=z().getInt32(o+4,!0);if(z().getInt32(o+8,!0))throw H(n);return H(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}},decodeImportBlobMeta:function(t,e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Yo(t,w.__wbindgen_export_0),i=We;w.decodeImportBlobMeta(r,s,i,e);var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}},encodeFrontiers:function(t){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=kn(t,w.__wbindgen_export_0),a=We;w.encodeFrontiers(s,i,a);var e=z().getInt32(s+0,!0),n=z().getInt32(s+4,!0),o=z().getInt32(s+8,!0);if(z().getInt32(s+12,!0))throw H(o);var r=oo(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),r}finally{w.__wbindgen_add_to_stack_pointer(16)}},redactJsonUpdates:function(t,e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.redactJsonUpdates(r,re(t),re(e));var n=z().getInt32(r+0,!0),o=z().getInt32(r+4,!0);if(z().getInt32(r+8,!0))throw H(o);return H(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}},run:function(){w.run()},setDebug:function(){w.setDebug()}},Symbol.toStringTag,{value:"Module"}));URL=globalThis.URL;const V=await(async(t={},e)=>{let n;if(e.startsWith("data:")){const o=e.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(o,"base64");else{if(typeof atob!="function")throw new Error("Cannot decode base64-encoded data URL");{const s=atob(o);r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i)}}n=await WebAssembly.instantiate(r,t)}else{const o=await fetch(e),r=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(o,t);else{const s=await o.arrayBuffer();n=await WebAssembly.instantiate(s,t)}}return n.instance.exports})({"./loro_wasm_bg.js":{__wbindgen_object_drop_ref:Bx,__wbg_lorocounter_new:Nb,__wbg_cursor_new:eb,__wbg_lorotext_new:Ab,__wbg_loromovablelist_new:Ib,__wbg_lorotreenode_new:Mb,__wbg_lorotree_new:Tb,__wbg_lorolist_new:jb,__wbg_loromap_new:Eb,__wbg_versionvector_new:fx,__wbg_changemodifier_new:Z0,__wbindgen_is_function:Ix,__wbindgen_string_new:$x,__wbindgen_boolean_get:xx,__wbindgen_error_new:Sx,__wbindgen_object_clone_ref:zx,__wbindgen_string_get:Vx,__wbindgen_is_undefined:Ox,__wbindgen_in:Cx,__wbindgen_is_bigint:jx,__wbindgen_number_get:Lx,__wbindgen_bigint_from_i64:gx,__wbindgen_jsval_eq:Dx,__wbindgen_is_object:Tx,__wbindgen_bigint_from_u64:_x,__wbindgen_cb_drop:yx,__wbindgen_as_number:px,__wbindgen_is_string:Mx,__wbindgen_is_null:Ax,__wbindgen_number_new:Fx,__wbindgen_is_array:Nx,__wbindgen_typeof:Wx,__wbg_error_9912f7d6d7835a4b:sb,__wbg_log_0fd6c49475c7bece:Sb,__wbindgen_is_falsy:Ex,__wbg_log_cb9e190acc5753fb:Cb,__wbg_log_0cc1b7768397bcfe:kb,__wbg_mark_7438147ce31e9d4b:Ob,__wbg_measure_fb7825c11612c823:Db,__wbg_new_8a6f238a6ece86ea:zb,__wbg_stack_0ed75d68575b0f3c:lx,__wbg_error_7534b8e9a36f1ab4:rb,__wbindgen_jsval_loose_eq:Rx,__wbg_String_8f0eb39a4a4c2f66:W0,__wbg_getwithrefkey_1dc361bd10053bfe:ub,__wbg_set_3f1d0b984ed272ed:rx,__wbg_now_439b66158bc4f246:Yb,__wbg_crypto_ed58b8e10a292839:Q0,__wbg_process_5c1d670bc53614b8:Kb,__wbg_versions_c71aa1626a93e0a1:hx,__wbg_node_02999533c4ea02e3:Gb,__wbg_require_79b1e9274cde3c87:Qb,__wbg_msCrypto_0a36e2ec3a343d26:Rb,__wbg_randomFillSync_ab2cfe79ebbf2740:Zb,__wbg_getRandomValues_bcb4912f16000dc4:ab,__wbg_self_cca3ca60d61220f4:tx,__wbg_window_2aba046d3fc4ad7c:mx,__wbg_globalThis_6b4d52a0b6aaeaea:hb,__wbg_global_49324ce12193de77:fb,__wbg_newnoargs_a136448eeb7d48ac:Ub,__wbg_call_0ad083564791763a:Y0,__wbg_get_0c3cc364764a0b98:lb,__wbg_length_12246a78d2f65d3a:wb,__wbg_new_e2d07398d7689006:Bb,__wbg_new_518e2184725aa711:Pb,__wbg_next_928df8c15fc0c9b0:Wb,__wbg_next_9dc0926f351c7090:qb,__wbg_done_f4c254830a095eaf:tb,__wbg_value_51f8a88d4a1805fb:ux,__wbg_iterator_c0c688f37fa815e6:yb,__wbg_get_b996a12be035ef4f:cb,__wbg_new_67abf4a77618ee3e:Fb,__wbg_newwithlength_88b49de1eb24d63e:Hb,__wbg_set_93ba9407b5476ec6:ix,__wbg_from_3aa0fcaa8eef0104:ib,__wbg_isArray_8738f1062fa88586:bb,__wbg_push_e7d7247e69dad3ee:Xb,__wbg_instanceof_ArrayBuffer_ff40e55b5978e215:mb,__wbg_call_a34b6b4765f27be0:J0,__wbg_call_efe5a4db7065d1a2:X0,__wbg_call_d00953b926be4879:K0,__wbg_instanceof_Map_0f3f3653f757ced1:pb,__wbg_set_393f510a6b7e9da5:ox,__wbg_entries_4dce6361e3ba6fbc:nb,__wbg_isSafeInteger_a1b3e0811faecf2f:xb,__wbg_instanceof_Object_9108547bac1f91b1:gb,__wbg_entries_83beb641792ccb9c:ob,__wbg_apply_9bb7fe8fff013a3f:q0,__wbg_ownKeys_b16312a839a4152c:Jb,__wbg_set_1b50d2de855a9d50:nx,__wbg_buffer_ef9774282e5dab94:G0,__wbg_resolve_267ff08e7e1d2ce4:ex,__wbg_then_84907e7a6730461e:dx,__wbg_newwithbyteoffsetandlength_84908302a4c137cf:Vb,__wbg_new_59845962d1127937:Lb,__wbg_set_5deee49b10b2b780:sx,__wbg_length_c24da17096edfe57:vb,__wbg_instanceof_Uint8Array_db97368f94b1373f:_b,__wbg_newwithlength_4c216eaaf23f2f9a:$b,__wbg_subarray_2dc34705c0dc7cdb:cx,__wbg_getindex_a471648b3037c750:db,__wbg_setindex_e0b7b31bfc87ba3f:ax,__wbindgen_bigint_get_as_i64:bx,__wbindgen_debug_string:kx,__wbindgen_throw:Hx,__wbindgen_rethrow:Ux,__wbindgen_memory:Px,__wbindgen_closure_wrapper563:wx,__wbindgen_closure_wrapper566:vx}},f6),b6=V.memory,x6=V.__wbg_lorocounter_free,y6=V.lorocounter_new,w6=V.lorocounter_kind,v6=V.lorocounter_id,k6=V.lorocounter_increment,S6=V.lorocounter_decrement,C6=V.lorocounter_value,N6=V.lorocounter_subscribe,j6=V.lorocounter_parent,E6=V.lorocounter_isAttached,I6=V.lorocounter_getAttached,A6=V.lorocounter_getShallowValue,T6=V.__wbg_awarenesswasm_free,M6=V.awarenesswasm_new,O6=V.awarenesswasm_encode,D6=V.awarenesswasm_encodeAll,R6=V.awarenesswasm_apply,P6=V.awarenesswasm_setLocalState,L6=V.awarenesswasm_peer,F6=V.awarenesswasm_getAllStates,z6=V.awarenesswasm_getState,B6=V.awarenesswasm_getTimestamp,U6=V.awarenesswasm_removeOutdated,V6=V.awarenesswasm_length,$6=V.awarenesswasm_isEmpty,H6=V.awarenesswasm_peers,W6=V.__wbg_ephemeralstorewasm_free,q6=V.ephemeralstorewasm_new,G6=V.ephemeralstorewasm_set,Y6=V.ephemeralstorewasm_delete,J6=V.ephemeralstorewasm_get,K6=V.ephemeralstorewasm_getAllStates,X6=V.ephemeralstorewasm_subscribeLocalUpdates,Z6=V.ephemeralstorewasm_subscribe,Q6=V.ephemeralstorewasm_encode,eI=V.ephemeralstorewasm_encodeAll,tI=V.ephemeralstorewasm_apply,nI=V.ephemeralstorewasm_removeOutdated,oI=V.ephemeralstorewasm_isEmpty,rI=V.ephemeralstorewasm_keys,sI=V.LORO_VERSION,iI=V.run,aI=V.encodeFrontiers,lI=V.decodeFrontiers,cI=V.setDebug,dI=V.__wbg_lorodoc_free,uI=V.lorodoc_new,hI=V.lorodoc_setDetachedEditing,fI=V.lorodoc_isDetachedEditingEnabled,mI=V.lorodoc_setRecordTimestamp,pI=V.lorodoc_setChangeMergeInterval,gI=V.lorodoc_configTextStyle,_I=V.lorodoc_configDefaultTextStyle,bI=V.lorodoc_fromSnapshot,xI=V.lorodoc_attach,yI=V.lorodoc_isDetached,wI=V.lorodoc_detach,vI=V.lorodoc_fork,kI=V.lorodoc_forkAt,SI=V.lorodoc_checkoutToLatest,CI=V.lorodoc_travelChangeAncestors,NI=V.lorodoc_findIdSpansBetween,jI=V.lorodoc_checkout,EI=V.lorodoc_peerId,II=V.lorodoc_peerIdStr,AI=V.lorodoc_setPeerId,TI=V.lorodoc_commit,MI=V.lorodoc_getPendingTxnLength,OI=V.lorodoc_getText,DI=V.lorodoc_getMap,RI=V.lorodoc_getList,PI=V.lorodoc_getMovableList,LI=V.lorodoc_getCounter,FI=V.lorodoc_getTree,zI=V.lorodoc_hasContainer,BI=V.lorodoc_getContainerById,UI=V.lorodoc_setNextCommitMessage,VI=V.lorodoc_setNextCommitOrigin,$I=V.lorodoc_setNextCommitTimestamp,HI=V.lorodoc_setNextCommitOptions,WI=V.lorodoc_clearNextCommitOptions,qI=V.lorodoc_getDeepValueWithID,GI=V.lorodoc_getPathToContainer,YI=V.lorodoc_JSONPath,JI=V.lorodoc_version,KI=V.lorodoc_shallowSinceVV,XI=V.lorodoc_isShallow,ZI=V.lorodoc_shallowSinceFrontiers,QI=V.lorodoc_oplogVersion,e8=V.lorodoc_frontiers,t8=V.lorodoc_oplogFrontiers,n8=V.lorodoc_cmpWithFrontiers,o8=V.lorodoc_cmpFrontiers,r8=V.lorodoc_exportSnapshot,s8=V.lorodoc_exportFrom,i8=V.lorodoc_export,a8=V.lorodoc_exportJsonUpdates,l8=V.lorodoc_exportJsonInIdSpan,c8=V.lorodoc_importJsonUpdates,d8=V.lorodoc_import,u8=V.lorodoc_importBatch,h8=V.lorodoc_getShallowValue,f8=V.lorodoc_toJSON,m8=V.lorodoc_subscribe,p8=V.lorodoc_subscribeLocalUpdates,g8=V.lorodoc_debugHistory,_8=V.lorodoc_changeCount,b8=V.lorodoc_opCount,x8=V.lorodoc_getAllChanges,y8=V.lorodoc_getChangeAt,w8=V.lorodoc_getChangeAtLamport,v8=V.lorodoc_getOpsInChange,k8=V.lorodoc_frontiersToVV,S8=V.lorodoc_vvToFrontiers,C8=V.lorodoc_getByPath,N8=V.lorodoc_getCursorPos,j8=V.lorodoc_getChangedContainersIn,E8=V.lorodoc_revertTo,I8=V.lorodoc_applyDiff,A8=V.lorodoc_diff,T8=V.lorodoc_getUncommittedOpsAsJson,M8=V.lorodoc_subscribeFirstCommitFromPeer,O8=V.lorodoc_subscribePreCommit,D8=V.lorodoc_deleteRootContainer,R8=V.lorodoc_setHideEmptyRootContainers,P8=V.__wbg_lorotext_free,L8=V.lorotext_new,F8=V.lorotext_kind,z8=V.lorotext_iter,B8=V.lorotext_update,U8=V.lorotext_updateByLine,V8=V.lorotext_insert,$8=V.lorotext_slice,H8=V.lorotext_charAt,W8=V.lorotext_splice,q8=V.lorotext_insertUtf8,G8=V.lorotext_delete,Y8=V.lorotext_deleteUtf8,J8=V.lorotext_mark,K8=V.lorotext_unmark,X8=V.lorotext_toString,Z8=V.lorotext_toDelta,Q8=V.lorotext_id,eA=V.lorotext_length,tA=V.lorotext_subscribe,nA=V.lorotext_applyDelta,oA=V.lorotext_parent,rA=V.lorotext_isAttached,sA=V.lorotext_getAttached,iA=V.lorotext_getCursor,aA=V.lorotext_push,lA=V.lorotext_getEditorOf,cA=V.lorotext_isDeleted,dA=V.lorotext_getShallowValue,uA=V.lorotext_toJSON,hA=V.__wbg_loromap_free,fA=V.loromap_new,mA=V.loromap_kind,pA=V.loromap_set,gA=V.loromap_delete,_A=V.loromap_get,bA=V.loromap_getOrCreateContainer,xA=V.loromap_keys,yA=V.loromap_values,wA=V.loromap_entries,vA=V.loromap_id,kA=V.loromap_toJSON,SA=V.loromap_setContainer,CA=V.loromap_subscribe,NA=V.loromap_size,jA=V.loromap_parent,EA=V.loromap_isAttached,IA=V.loromap_getAttached,AA=V.loromap_clear,TA=V.loromap_getLastEditor,MA=V.loromap_isDeleted,OA=V.loromap_getShallowValue,DA=V.__wbg_lorolist_free,RA=V.lorolist_new,PA=V.lorolist_kind,LA=V.lorolist_insert,FA=V.lorolist_delete,zA=V.lorolist_get,BA=V.lorolist_id,UA=V.lorolist_toArray,VA=V.lorolist_toJSON,$A=V.lorolist_insertContainer,HA=V.lorolist_pushContainer,WA=V.lorolist_subscribe,qA=V.lorolist_length,GA=V.lorolist_parent,YA=V.lorolist_isAttached,JA=V.lorolist_getAttached,KA=V.lorolist_getCursor,XA=V.lorolist_push,ZA=V.lorolist_pop,QA=V.lorolist_clear,eT=V.lorolist_getIdAt,tT=V.lorolist_isDeleted,nT=V.lorolist_getShallowValue,oT=V.loromovablelist_new,rT=V.loromovablelist_kind,sT=V.loromovablelist_insert,iT=V.loromovablelist_delete,aT=V.loromovablelist_get,lT=V.loromovablelist_id,cT=V.loromovablelist_toArray,dT=V.loromovablelist_toJSON,uT=V.loromovablelist_insertContainer,hT=V.loromovablelist_pushContainer,fT=V.loromovablelist_subscribe,mT=V.loromovablelist_length,pT=V.loromovablelist_parent,gT=V.loromovablelist_isAttached,_T=V.loromovablelist_getAttached,bT=V.loromovablelist_getCursor,xT=V.loromovablelist_move,yT=V.loromovablelist_set,wT=V.loromovablelist_setContainer,vT=V.loromovablelist_push,kT=V.loromovablelist_pop,ST=V.loromovablelist_clear,CT=V.loromovablelist_getCreatorAt,NT=V.loromovablelist_getLastMoverAt,jT=V.loromovablelist_getLastEditorAt,ET=V.loromovablelist_isDeleted,IT=V.loromovablelist_getShallowValue,AT=V.__wbg_lorotree_free,TT=V.lorotreenode___getClassname,MT=V.__wbg_lorotreenode_free,OT=V.lorotreenode_id,DT=V.lorotreenode_createNode,RT=V.lorotreenode_move,PT=V.lorotreenode_moveAfter,LT=V.lorotreenode_moveBefore,FT=V.lorotreenode_index,zT=V.lorotreenode_fractionalIndex,BT=V.lorotreenode_data,UT=V.lorotreenode_toJSON,VT=V.lorotreenode_parent,$T=V.lorotreenode_children,HT=V.lorotreenode_isDeleted,WT=V.lorotreenode_getLastMoveId,qT=V.lorotreenode_creationId,GT=V.lorotreenode_creator,YT=V.lorotree_new,JT=V.lorotree_kind,KT=V.lorotree_createNode,XT=V.lorotree_move,ZT=V.lorotree_delete,QT=V.lorotree_getNodeByID,e7=V.lorotree_id,t7=V.lorotree_has,n7=V.lorotree_isNodeDeleted,o7=V.lorotree_toArray,r7=V.lorotree_getNodes,s7=V.lorotree_toJSON,i7=V.lorotree_nodes,a7=V.lorotree_roots,l7=V.lorotree_subscribe,c7=V.lorotree_parent,d7=V.lorotree_isAttached,u7=V.lorotree_getAttached,h7=V.lorotree_enableFractionalIndex,f7=V.lorotree_disableFractionalIndex,m7=V.lorotree_isFractionalIndexEnabled,p7=V.lorotree_isDeleted,g7=V.lorotree_getShallowValue,_7=V.__wbg_cursor_free,b7=V.cursor_containerId,x7=V.cursor_pos,y7=V.cursor_side,w7=V.cursor_encode,v7=V.cursor_decode,k7=V.cursor_kind,S7=V.__wbg_undomanager_free,C7=V.undomanager_new,N7=V.undomanager_undo,j7=V.undomanager_redo,E7=V.undomanager_groupStart,I7=V.undomanager_groupEnd,A7=V.undomanager_canUndo,T7=V.undomanager_canRedo,M7=V.undomanager_setMaxUndoSteps,O7=V.undomanager_setMergeInterval,D7=V.undomanager_addExcludeOriginPrefix,R7=V.undomanager_setOnPush,P7=V.undomanager_setOnPop,L7=V.undomanager_clear,F7=V.__wbg_versionvector_free,z7=V.versionvector_new,B7=V.versionvector_parseJSON,U7=V.versionvector_toJSON,V7=V.versionvector_encode,$7=V.versionvector_decode,H7=V.versionvector_get,W7=V.versionvector_compare,q7=V.versionvector_setEnd,G7=V.versionvector_setLast,Y7=V.versionvector_remove,J7=V.versionvector_length,K7=V.decodeImportBlobMeta,X7=V.__wbg_changemodifier_free,Z7=V.changemodifier_setMessage,Q7=V.changemodifier_setTimestamp,eM=V.redactJsonUpdates,tM=V.lorodoc_importUpdateBatch,nM=V.__wbg_loromovablelist_free,oM=V.__wbindgen_export_0,rM=V.__wbindgen_export_1,sM=V.__wbindgen_export_2,iM=V.__wbindgen_export_3,aM=V.__wbindgen_export_4,lM=V.__wbindgen_add_to_stack_pointer,cM=V.__wbindgen_export_5,dM=V.__wbindgen_export_6,Hu=V.__wbindgen_start,qx=Object.freeze(Object.defineProperty({__proto__:null,LORO_VERSION:sI,__wbg_awarenesswasm_free:T6,__wbg_changemodifier_free:X7,__wbg_cursor_free:_7,__wbg_ephemeralstorewasm_free:W6,__wbg_lorocounter_free:x6,__wbg_lorodoc_free:dI,__wbg_lorolist_free:DA,__wbg_loromap_free:hA,__wbg_loromovablelist_free:nM,__wbg_lorotext_free:P8,__wbg_lorotree_free:AT,__wbg_lorotreenode_free:MT,__wbg_undomanager_free:S7,__wbg_versionvector_free:F7,__wbindgen_add_to_stack_pointer:lM,__wbindgen_export_0:oM,__wbindgen_export_1:rM,__wbindgen_export_2:sM,__wbindgen_export_3:iM,__wbindgen_export_4:aM,__wbindgen_export_5:cM,__wbindgen_export_6:dM,__wbindgen_start:Hu,awarenesswasm_apply:R6,awarenesswasm_encode:O6,awarenesswasm_encodeAll:D6,awarenesswasm_getAllStates:F6,awarenesswasm_getState:z6,awarenesswasm_getTimestamp:B6,awarenesswasm_isEmpty:$6,awarenesswasm_length:V6,awarenesswasm_new:M6,awarenesswasm_peer:L6,awarenesswasm_peers:H6,awarenesswasm_removeOutdated:U6,awarenesswasm_setLocalState:P6,changemodifier_setMessage:Z7,changemodifier_setTimestamp:Q7,cursor_containerId:b7,cursor_decode:v7,cursor_encode:w7,cursor_kind:k7,cursor_pos:x7,cursor_side:y7,decodeFrontiers:lI,decodeImportBlobMeta:K7,encodeFrontiers:aI,ephemeralstorewasm_apply:tI,ephemeralstorewasm_delete:Y6,ephemeralstorewasm_encode:Q6,ephemeralstorewasm_encodeAll:eI,ephemeralstorewasm_get:J6,ephemeralstorewasm_getAllStates:K6,ephemeralstorewasm_isEmpty:oI,ephemeralstorewasm_keys:rI,ephemeralstorewasm_new:q6,ephemeralstorewasm_removeOutdated:nI,ephemeralstorewasm_set:G6,ephemeralstorewasm_subscribe:Z6,ephemeralstorewasm_subscribeLocalUpdates:X6,lorocounter_decrement:S6,lorocounter_getAttached:I6,lorocounter_getShallowValue:A6,lorocounter_id:v6,lorocounter_increment:k6,lorocounter_isAttached:E6,lorocounter_kind:w6,lorocounter_new:y6,lorocounter_parent:j6,lorocounter_subscribe:N6,lorocounter_value:C6,lorodoc_JSONPath:YI,lorodoc_applyDiff:I8,lorodoc_attach:xI,lorodoc_changeCount:_8,lorodoc_checkout:jI,lorodoc_checkoutToLatest:SI,lorodoc_clearNextCommitOptions:WI,lorodoc_cmpFrontiers:o8,lorodoc_cmpWithFrontiers:n8,lorodoc_commit:TI,lorodoc_configDefaultTextStyle:_I,lorodoc_configTextStyle:gI,lorodoc_debugHistory:g8,lorodoc_deleteRootContainer:D8,lorodoc_detach:wI,lorodoc_diff:A8,lorodoc_export:i8,lorodoc_exportFrom:s8,lorodoc_exportJsonInIdSpan:l8,lorodoc_exportJsonUpdates:a8,lorodoc_exportSnapshot:r8,lorodoc_findIdSpansBetween:NI,lorodoc_fork:vI,lorodoc_forkAt:kI,lorodoc_fromSnapshot:bI,lorodoc_frontiers:e8,lorodoc_frontiersToVV:k8,lorodoc_getAllChanges:x8,lorodoc_getByPath:C8,lorodoc_getChangeAt:y8,lorodoc_getChangeAtLamport:w8,lorodoc_getChangedContainersIn:j8,lorodoc_getContainerById:BI,lorodoc_getCounter:LI,lorodoc_getCursorPos:N8,lorodoc_getDeepValueWithID:qI,lorodoc_getList:RI,lorodoc_getMap:DI,lorodoc_getMovableList:PI,lorodoc_getOpsInChange:v8,lorodoc_getPathToContainer:GI,lorodoc_getPendingTxnLength:MI,lorodoc_getShallowValue:h8,lorodoc_getText:OI,lorodoc_getTree:FI,lorodoc_getUncommittedOpsAsJson:T8,lorodoc_hasContainer:zI,lorodoc_import:d8,lorodoc_importBatch:u8,lorodoc_importJsonUpdates:c8,lorodoc_importUpdateBatch:tM,lorodoc_isDetached:yI,lorodoc_isDetachedEditingEnabled:fI,lorodoc_isShallow:XI,lorodoc_new:uI,lorodoc_opCount:b8,lorodoc_oplogFrontiers:t8,lorodoc_oplogVersion:QI,lorodoc_peerId:EI,lorodoc_peerIdStr:II,lorodoc_revertTo:E8,lorodoc_setChangeMergeInterval:pI,lorodoc_setDetachedEditing:hI,lorodoc_setHideEmptyRootContainers:R8,lorodoc_setNextCommitMessage:UI,lorodoc_setNextCommitOptions:HI,lorodoc_setNextCommitOrigin:VI,lorodoc_setNextCommitTimestamp:$I,lorodoc_setPeerId:AI,lorodoc_setRecordTimestamp:mI,lorodoc_shallowSinceFrontiers:ZI,lorodoc_shallowSinceVV:KI,lorodoc_subscribe:m8,lorodoc_subscribeFirstCommitFromPeer:M8,lorodoc_subscribeLocalUpdates:p8,lorodoc_subscribePreCommit:O8,lorodoc_toJSON:f8,lorodoc_travelChangeAncestors:CI,lorodoc_version:JI,lorodoc_vvToFrontiers:S8,lorolist_clear:QA,lorolist_delete:FA,lorolist_get:zA,lorolist_getAttached:JA,lorolist_getCursor:KA,lorolist_getIdAt:eT,lorolist_getShallowValue:nT,lorolist_id:BA,lorolist_insert:LA,lorolist_insertContainer:$A,lorolist_isAttached:YA,lorolist_isDeleted:tT,lorolist_kind:PA,lorolist_length:qA,lorolist_new:RA,lorolist_parent:GA,lorolist_pop:ZA,lorolist_push:XA,lorolist_pushContainer:HA,lorolist_subscribe:WA,lorolist_toArray:UA,lorolist_toJSON:VA,loromap_clear:AA,loromap_delete:gA,loromap_entries:wA,loromap_get:_A,loromap_getAttached:IA,loromap_getLastEditor:TA,loromap_getOrCreateContainer:bA,loromap_getShallowValue:OA,loromap_id:vA,loromap_isAttached:EA,loromap_isDeleted:MA,loromap_keys:xA,loromap_kind:mA,loromap_new:fA,loromap_parent:jA,loromap_set:pA,loromap_setContainer:SA,loromap_size:NA,loromap_subscribe:CA,loromap_toJSON:kA,loromap_values:yA,loromovablelist_clear:ST,loromovablelist_delete:iT,loromovablelist_get:aT,loromovablelist_getAttached:_T,loromovablelist_getCreatorAt:CT,loromovablelist_getCursor:bT,loromovablelist_getLastEditorAt:jT,loromovablelist_getLastMoverAt:NT,loromovablelist_getShallowValue:IT,loromovablelist_id:lT,loromovablelist_insert:sT,loromovablelist_insertContainer:uT,loromovablelist_isAttached:gT,loromovablelist_isDeleted:ET,loromovablelist_kind:rT,loromovablelist_length:mT,loromovablelist_move:xT,loromovablelist_new:oT,loromovablelist_parent:pT,loromovablelist_pop:kT,loromovablelist_push:vT,loromovablelist_pushContainer:hT,loromovablelist_set:yT,loromovablelist_setContainer:wT,loromovablelist_subscribe:fT,loromovablelist_toArray:cT,loromovablelist_toJSON:dT,lorotext_applyDelta:nA,lorotext_charAt:H8,lorotext_delete:G8,lorotext_deleteUtf8:Y8,lorotext_getAttached:sA,lorotext_getCursor:iA,lorotext_getEditorOf:lA,lorotext_getShallowValue:dA,lorotext_id:Q8,lorotext_insert:V8,lorotext_insertUtf8:q8,lorotext_isAttached:rA,lorotext_isDeleted:cA,lorotext_iter:z8,lorotext_kind:F8,lorotext_length:eA,lorotext_mark:J8,lorotext_new:L8,lorotext_parent:oA,lorotext_push:aA,lorotext_slice:$8,lorotext_splice:W8,lorotext_subscribe:tA,lorotext_toDelta:Z8,lorotext_toJSON:uA,lorotext_toString:X8,lorotext_unmark:K8,lorotext_update:B8,lorotext_updateByLine:U8,lorotree_createNode:KT,lorotree_delete:ZT,lorotree_disableFractionalIndex:f7,lorotree_enableFractionalIndex:h7,lorotree_getAttached:u7,lorotree_getNodeByID:QT,lorotree_getNodes:r7,lorotree_getShallowValue:g7,lorotree_has:t7,lorotree_id:e7,lorotree_isAttached:d7,lorotree_isDeleted:p7,lorotree_isFractionalIndexEnabled:m7,lorotree_isNodeDeleted:n7,lorotree_kind:JT,lorotree_move:XT,lorotree_new:YT,lorotree_nodes:i7,lorotree_parent:c7,lorotree_roots:a7,lorotree_subscribe:l7,lorotree_toArray:o7,lorotree_toJSON:s7,lorotreenode___getClassname:TT,lorotreenode_children:$T,lorotreenode_createNode:DT,lorotreenode_creationId:qT,lorotreenode_creator:GT,lorotreenode_data:BT,lorotreenode_fractionalIndex:zT,lorotreenode_getLastMoveId:WT,lorotreenode_id:OT,lorotreenode_index:FT,lorotreenode_isDeleted:HT,lorotreenode_move:RT,lorotreenode_moveAfter:PT,lorotreenode_moveBefore:LT,lorotreenode_parent:VT,lorotreenode_toJSON:UT,memory:b6,redactJsonUpdates:eM,run:iI,setDebug:cI,undomanager_addExcludeOriginPrefix:D7,undomanager_canRedo:T7,undomanager_canUndo:A7,undomanager_clear:L7,undomanager_groupEnd:I7,undomanager_groupStart:E7,undomanager_new:C7,undomanager_redo:j7,undomanager_setMaxUndoSteps:M7,undomanager_setMergeInterval:O7,undomanager_setOnPop:P7,undomanager_setOnPush:R7,undomanager_undo:N7,versionvector_compare:W7,versionvector_decode:$7,versionvector_encode:V7,versionvector_get:H7,versionvector_length:J7,versionvector_new:z7,versionvector_parseJSON:B7,versionvector_remove:Y7,versionvector_setEnd:q7,versionvector_setLast:G7,versionvector_toJSON:U7},Symbol.toStringTag,{value:"Module"}));if(Hu)Du(qx),Hu();else{const t=await Km(()=>Promise.resolve().then(()=>qx),void 0,import.meta.url);Du(new WebAssembly.Instance(t.default,{"./loro_wasm_bg.js":_6}).exports)}const uM=["Map","Text","List","Tree","MovableList","Counter"];function Gx(t){if(typeof t!="object"||t==null)return!1;const e=Object.getPrototypeOf(t);return e!=null&&typeof e=="object"&&typeof e.kind=="function"&&uM.includes(t.kind())}bo.prototype.toJsonWithReplacer=function(t){const e=new Set,n=this,o=(i,a)=>{if(typeof a=="string"&&a.startsWith("cid:")&&!e.has(a)){e.add(a);const d=n.getContainerById(a);if(d==null)throw new Error(`ContainerID not found: ${a}`);const u=t(i,d);if(u===d){const h=d.getShallowValue();return typeof h=="object"?r(h):h}if(Gx(u))throw new Error("Using new container is not allowed in toJsonWithReplacer");return typeof u=="object"&&u!=null?r(u):u}if(typeof a=="object"&&a!=null)return r(a);const l=t(i,a);if(Gx(l))throw new Error("Using new container is not allowed in toJsonWithReplacer");return l},r=i=>{if(Array.isArray(i))return i.map((l,d)=>o(d,l)).filter(l=>l!==void 0);const a={};for(const[l,d]of Object.entries(i)){const u=o(l,d);u!==void 0&&(a[l]=u)}return a},s=n.getShallowValue();return r(s)};const hM=et.baseTheme({".loro-cursor":{position:"absolute",width:"2px",display:"inline-block",height:"1.2em"},".loro-cursor::before":{position:"absolute",top:"1.3em",left:"0",content:"var(--rtc-name)",padding:"2px 6px",fontSize:"12px",borderRadius:"3px",whiteSpace:"nowrap",userSelect:"none",backgroundColor:"inherit",opacity:"0.7"},".loro-selection":{opacity:"0.5"}}),Ni=Dt.define(),Wu=In.define({create:()=>({remoteCursors:new Map,isCheckout:!1}),update(t,e){for(const n of e.effects)if(n.is(Ni))switch(n.value.type){case"update":{const{peer:o,user:r,cursor:s}=n.value;t.remoteCursors.set(o,{uid:o,cursor:s,user:r});break}case"delete":t.remoteCursors.delete(n.value.peer);break;case"checkout":t.isCheckout=n.value.checkout}return t}}),Yx=t=>{const e=t.transactions.flatMap(n=>n.effects).filter(n=>n.is(Ni));return t.docChanged||t.viewportChanged||e.length>0};class yl{constructor(e,n,o,r,s){this.left=e,this.top=n,this.height=o,this.name=r,this.colorClassName=s}draw(){const e=document.createElement("div");return this.adjust(e),e}update(e){return this.adjust(e),!0}adjust(e){e.style.left=`${this.left}px`,e.style.top=`${this.top}px`,e.style.height=`${this.height}px`,e.className=`loro-cursor ${this.colorClassName}`,e.style.setProperty("--rtc-name",`"${this.name}"`)}eq(e){return this.left===e.left&&this.top===e.top&&this.height===e.height&&this.name===e.name}static createCursor(e,n,o,r){const s=yl.calculateAbsoluteCursorPosition(n,e);if(!s)return[];const i=e.scrollDOM.getBoundingClientRect(),a=(e.textDirection===PV.LTR?i.left:i.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,l=i.top-e.scrollDOM.scrollTop;return[new yl(s.left-a,s.top-l,s.bottom-s.top,o,r)]}static calculateAbsoluteCursorPosition(e,n){const o=Math.max(0,Math.min(n.state.doc.length,e.anchor));return n.coordsAtPos(o,e.assoc||1)}}const fM=(t,e,n,o)=>{const r=[],{updated:s,added:i}=n;for(const a of[...s,...i]){const l=Jx(t,e,a,o);l&&r.push(l)}return r},Jx=(t,e,n,o)=>{const r=e.getAllStates()[n];if(!r||n===t.peerIdStr||r.scopeId!==o)return;if(r.type==="delete")return Ni.of({type:"delete",peer:r.uid,scopeId:r.scopeId});const s=Jn.decode(r.cursor.anchor),i=t.getCursorPos(s).offset;let a=i;if(r.cursor.head){const l=Jn.decode(r.cursor.head);a=t.getCursorPos(l).offset}return Ni.of({type:"update",peer:r.uid,scopeId:r.scopeId,cursor:{anchor:i,head:a},user:r.user})};class mM{constructor(e,n,o,r,s,i,a){this.view=e,this.doc=n,this.user=o,this.awareness=r,this.getTextFromDoc=s,this.scopeId=i,this.getUserId=a,this.sub=void 0,this.sub=this.doc.subscribe(l=>{if(l.by==="local"){const d=[];for(const u of this.awareness.peers()){const h=Jx(this.doc,this.awareness,u,this.scopeId);h&&d.push(h)}this.view.dispatch({effects:d})}else l.by==="checkout"&&this.view.dispatch({effects:[Ni.of({type:"checkout",checkout:this.doc.isDetached()})]})})}update(e){if(!e.selectionSet&&!e.focusChanged&&!e.docChanged)return;const n=e.state.selection.main;if(this.view.hasFocus&&!this.doc.isDetached()){const o=gM({doc:this.doc,getTextFromDoc:this.getTextFromDoc,anchor:n.anchor,head:n.head});this.awareness.setLocalState({type:"update",uid:this.getUserId?this.getUserId():this.doc.peerIdStr,scopeId:this.scopeId,cursor:o,user:this.user})}else this.awareness.setLocalState({type:"delete",uid:this.getUserId?this.getUserId():this.doc.peerIdStr,scopeId:this.scopeId})}destroy(){var e;(e=this.sub)==null||e.call(this),this.awareness.setLocalState({type:"delete",uid:this.getUserId?this.getUserId():this.doc.peerIdStr,scopeId:this.scopeId})}}class pM{constructor(e,n,o,r){this.view=e,this.doc=n,this.awareness=o,this.scopeId=r,this._awarenessListener=void 0;const s=async(i,a)=>{a!=="local"&&this.view.dispatch({effects:fM(this.doc,this.awareness,i,this.scopeId)})};this._awarenessListener=s,this.awareness.addListener(s)}destroy(){this._awarenessListener&&this.awareness.removeListener(this._awarenessListener)}}const gM=({doc:t,getTextFromDoc:e,anchor:n,head:o})=>{var i,a;n===o&&(o=void 0);const r=(i=e(t).getCursor(n))==null?void 0:i.encode();if(!r)throw new Error("cursor head not found");let s;return o!==void 0&&(s=(a=e(t).getCursor(o))==null?void 0:a.encode()),{anchor:r,head:s}},wl=["bg-[var(--amber-6)]","bg-[var(--blue-6)]","bg-[var(--crimson-6)]","bg-[var(--cyan-6)]","bg-[var(--grass-6)]","bg-[var(--gray-6)]","bg-[var(--green-6)]","bg-[var(--lime-6)]","bg-[var(--orange-6)]","bg-[var(--purple-6)]","bg-[var(--red-6)]","bg-[var(--sage-6)]","bg-[var(--sky-6)]","bg-[var(--slate-6)]"],_M=(t,e,n)=>En.define(o=>new bM(o,t,e,n)),ss=Gm.define();class bM{constructor(e,n,o,r){this.view=e,this.doc=n,this.docPath=o,this.getTextFromDoc=r,this.sub=void 0,this.isInitDispatch=!1,this.onRemoteUpdate=s=>{if(s.by!=="local")if(s.by!=="checkout"){if(s.by==="import"){const i=[];let a=0;for(const{diff:l,path:d}of s.events){if(d.join("/")!==this.docPath.join("/")||l.type!=="text")continue;const u=l.diff;for(const h of u)h.insert?i.push({from:a,to:a,insert:h.insert}):h.delete?(i.push({from:a,to:a+h.delete}),a+=h.delete):h.retain!=null&&(a+=h.retain);i.length>0&&this.view.dispatch({changes:i,annotations:[ss.of(this)]})}}}else this.view.dispatch({changes:[{from:0,to:this.view.state.doc.length,insert:this.getTextFromDoc(this.doc).toString()}],annotations:[ss.of(this)]})},this.sub=n.subscribe(this.onRemoteUpdate),Promise.resolve().then(()=>{this.isInitDispatch=!0;const s=this.view.state.doc.toString(),i=this.getTextFromDoc(this.doc);s!==i.toString()&&e.dispatch({changes:[{from:0,to:this.view.state.doc.length,insert:i.toString()}]})})}update(e){if(this.isInitDispatch)return void(this.isInitDispatch=!1);if(!e.docChanged||e.transactions.length>0&&(e.transactions[0].annotation(ss)===this||e.transactions[0].annotation(ss)==="undo"))return;let n=0;e.changes.iterChanges((o,r,s,i,a)=>{const l=a.sliceString(0,a.length,`
`);o!==r&&this.getTextFromDoc(this.doc).delete(o+n,r-o),l.length>0&&this.getTextFromDoc(this.doc).insert(o+n,l),n+=l.length-(r-o)}),this.doc.commit()}destroy(){var e;(e=this.sub)==null||e.call(this),this.sub=void 0}}const ln=vt.get("rtc"),Kx=ln.get("awareness").disabled(),qu="awareness:",is=zt(void 0),qt=new bo,vl=new class{constructor(t,e=3e4){this.listeners=new Set,this.inner=new z0(t,e),this.peer=t,this.timeout=e}apply(t,e="remote"){const{updated:n,added:o}=this.inner.apply(t);this.listeners.forEach(r=>{r({updated:n,added:o,removed:[]},e)}),this.startTimerIfNotEmpty()}setLocalState(t){const e=this.inner.getState(this.peer)==null;this.inner.setLocalState(t),e?this.listeners.forEach(n=>{n({updated:[],added:[this.inner.peer()],removed:[]},"local")}):this.listeners.forEach(n=>{n({updated:[this.inner.peer()],added:[],removed:[]},"local")}),this.startTimerIfNotEmpty()}getLocalState(){return this.inner.getState(this.peer)}getAllStates(){return this.inner.getAllStates()}encode(t){return this.inner.encode(t)}encodeAll(){return this.inner.encodeAll()}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}peers(){return this.inner.peers()}destroy(){clearInterval(this.timer),this.listeners.clear()}startTimerIfNotEmpty(){this.inner.isEmpty()||this.timer!=null||(this.timer=setInterval(()=>{const t=this.inner.removeOutdated();t.length>0&&this.listeners.forEach(e=>{e({updated:[],added:[],removed:t},"timeout")}),this.inner.isEmpty()&&(clearInterval(this.timer),this.timer=void 0)},this.timeout/2))}}(qt.peerIdStr),Gu=FV(()=>{ln.debug("creating websocket");const t=z4().getWsSyncURL(Z4()).toString(),e=new _W(t,void 0,{maxRetries:10,debug:!1,startClosed:!0,connectionTimeout:1e4});return Promise.resolve().then(async()=>{await B4(),zV()==="edit"&&e.reconnect()}),e.addEventListener("message",async n=>{const o=n.data,r=await o.arrayBuffer(),s=new Uint8Array(r);if(function(i,a){return new TextDecoder().decode(i.slice(0,a.length))===a}(s,qu)){const i=function(a,l){return a.slice(l.length)}(s,qu);return vl.apply(i),void Kx.debug("applied awareness update")}qt.import(s),ln.debug("imported doc change. new doc:",qt.toJSON()),at.get(is)!==qt&&at.set(is,qt)}),e.addEventListener("open",()=>{ln.debug("websocket open")}),e.addEventListener("close",n=>{ln.warn("websocket close",n),at.get(is)===qt&&at.set(is,void 0)}),e});function Yu(t,e,n=""){if(un())return{extension:[],code:n};const o=qt.getByPath(`codes/${t}`)!==void 0,r=qt.getMap("codes").getOrCreateContainer(t,new Ko);o||(ln.log("initializing code for new cell",n),r.insert(0,n));const s={get name(){return at.get(Q4)||"Anonymous"},get colorClassName(){return(i=>{if(typeof i=="string"){let a=0;for(let l=0;l<i.length;l++)a=(a<<5)-a+i.charCodeAt(l),a=Math.trunc(a);return wl[Math.abs(a)%wl.length]}return wl[i%wl.length]})(this.name)}};return{code:n.toString(),extension:[xM(t),yM(t),wM(qt,vl,s,()=>r,t),_M(qt,["codes",t],()=>r)]}}function xM(t){const e=(o,r)=>{const s=o.state.field(zc).type,i=r.toString();i&&i!==s&&(ln.debug(`[incoming] setting language type: ${s} -> ${i}`),Lr(o,{language:i,keepCodeAsIs:!0}))},n=(o,r)=>{const s=o.state.field(Zm),i=r.toJSON();aa(s,i)||o.dispatch({effects:[K4.of(i)],annotations:[ss.of(!0)]})};return En.define(o=>{let r;return Promise.resolve().then(()=>{const s=qt.getByPath(`languages/${t}`);if(!s)return void ln.error("no language container found for cell",t);zo(s instanceof Ko,"language type is not a LoroText");const i=qt.getByPath(`language_metadata/${t}`);i?(zo(i instanceof Jo,"language metadata is not a LoroMap"),e(o,s),n(o,i),r=qt.subscribe(a=>{if(a.origin==="local")return;const l=a.events.some(u=>u.target===s.id),d=a.events.some(u=>u.target===i.id);l&&e(o,s),d&&n(o,i)})):ln.error("no language metadata container found for cell",t)}),{destroy(){r()}}})}function yM(t){const e=qt.getMap("languages").getOrCreateContainer(t,new Ko),n=qt.getMap("language_metadata").getOrCreateContainer(t,new Jo);return et.updateListener.of(o=>{const r=e.toString()!=="";if(!o.docChanged&&r)return;if(!r){const i=Xm(o.state).type;Lr(o.view,{language:i}),ln.debug("no initial language, setting default to",i),e.delete(0,e.length),e.insert(0,i),ln.debug("no initial language metadata, setting default to",o.state.field(Zm));const a=o.state.field(Zm);for(const l of Object.keys(a))n.set(l,a[l]);return void qt.commit()}let s=!1;for(const i of o.transactions)if(!i.annotation(ss)){for(const a of i.effects)if(a.is(LV)&&e.toString()!==a.value.type&&(ln.debug(`[outgoing] language change: ${e} -> ${a.value.type}`),e.delete(0,e.length),e.insert(0,a.value.type),s=!0),a.is(K4)||a.is(X4)){const l=a.value;a.is(X4)?(ln.debug("[outgoing] setting language metadata: ",l),n.clear()):ln.debug("[outgoing] updating language metadata: ",l);for(const d of Object.keys(l))n.set(d,l[d]);s=!0}}s&&qt.commit()})}function wM(t,e,n,o,r,s){const i=`loro:cell:${r}`;return[Wu,J4({above:!0,class:"loro-cursor-layer",update:Yx,markers:a=>{const{remoteCursors:l,isCheckout:d}=a.state.field(Wu);return d?[]:[...l.values()].flatMap(u=>{var f,m;const h=Bo.cursor(u.cursor.anchor);return yl.createCursor(a,h,((f=u.user)==null?void 0:f.name)||"unknown",((m=u.user)==null?void 0:m.colorClassName)||"")})}}),J4({above:!1,class:"loro-selection-layer",update:Yx,markers:a=>{const{remoteCursors:l,isCheckout:d}=a.state.field(Wu);return d?[]:[...l.entries()].filter(([,u])=>u.cursor.head!==void 0&&u.cursor.anchor!==u.cursor.head).flatMap(([,u])=>{var f;const h=Bo.range(u.cursor.anchor,u.cursor.head);return RV.forRange(a,`loro-selection ${((f=u.user)==null?void 0:f.colorClassName)||""}`,h)})}}),En.define(a=>new mM(a,t,n,e,o,i,s)),En.define(a=>new pM(a,t,e,i)),hM]}function kl(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}$c()&&Gu(),qt.subscribeLocalUpdates(t=>{ln.debug("local update, sending to server"),Gu().send(t)}),vl.addListener((t,e)=>{const n=[...t.added,...t.removed,...t.updated];e==="local"&&(Kx.debug("awareness changes",n),Gu().send(function(o,r){const s=new TextEncoder().encode(o);return new Uint8Array([...s,...r])}(qu,vl.encode(n))))});var Xx={modified:{doc:""},original:{doc:""}},Zx=O.createContext(Xx);function vM(t,e){return Et({},t,e,{modified:Et({},t.modified,e.modified),original:Et({},t.original,e.original)})}var Ju=()=>O.useContext(Zx),kM=t=>{var{children:e,theme:n}=t,[o,r]=O.useReducer(vM,Et({},Xx,{theme:n}));return O.useEffect(()=>r({theme:n}),[n]),c.jsx(Zx.Provider,{value:Et({},o,{dispatch:r}),children:e})},SM=["extensions","value","selection","onChange"],Qx=t=>{var{extensions:e=[],value:n,selection:o,onChange:r}=t,s=_a(t,SM),{theme:i,dispatch:a}=Ju(),l=Ws(Et({},s,{theme:i}));return O.useEffect(()=>a({original:{doc:n,selection:o,extensions:[...l,...e]},originalExtension:{onChange:r,option:s,extension:[e]}}),[t]),null};Qx.displayName="CodeMirrorMerge.Original";var CM=["extensions","value","selection","onChange"],ey=t=>{var{extensions:e=[],value:n,selection:o,onChange:r}=t,s=_a(t,CM),{theme:i,dispatch:a}=Ju(),l=Ws(Et({},s,{theme:i}));return O.useEffect(()=>{a({modified:{doc:n,selection:o,extensions:[...l,...e]},modifiedExtension:{onChange:r,option:s,extension:[e]}})},[t]),null};ey.displayName="CodeMirrorMerge.Modified";class Mt{constructor(e,n,o,r){this.fromA=e,this.toA=n,this.fromB=o,this.toB=r}offset(e,n){return new Mt(this.fromA+e,this.toA+e,this.fromB+n,this.toB+n)}}function Tr(t,e,n,o,r,s){if(t==o)return[];let i=Zu(t,e,n,o,r,s),a=Qu(t,e+i,n,o,r+i,s),l=(n-=a)-(e+=i),d=(s-=a)-(r+=i);if(!l||!d)return[new Mt(e,n,r,s)];if(l>d){let h=t.slice(e,n).indexOf(o.slice(r,s));if(h>-1)return[new Mt(e,e+h,r,r),new Mt(e+h+d,n,s,s)]}else if(d>l){let h=o.slice(r,s).indexOf(t.slice(e,n));if(h>-1)return[new Mt(e,e,r,r+h),new Mt(n,n,r+h+l,s)]}if(l==1||d==1)return[new Mt(e,n,r,s)];let u=oy(t,e,n,o,r,s);if(u){let[h,f,m]=u;return Tr(t,e,h,o,r,f).concat(Tr(t,h+m,n,o,f+m,s))}return function(h,f,m,_,g,p){let b=m-f,x=p-g;if(ji<1e9&&Math.min(b,x)>16*ji)return Math.min(b,x)>64*ji?[new Mt(f,m,g,p)]:ry(h,f,m,_,g,p);let y=Math.ceil((b+x)/2);Ku.reset(y),Xu.reset(y);let v=(N,j)=>h.charCodeAt(f+N)==_.charCodeAt(g+j),C=(N,j)=>h.charCodeAt(m-N-1)==_.charCodeAt(p-j-1),S=(b-x)%2!=0?Xu:null,E=S?null:Ku;for(let N=0;N<y;N++){if(N>ji)return ry(h,f,m,_,g,p);let j=Ku.advance(N,b,x,y,S,!1,v)||Xu.advance(N,b,x,y,E,!0,C);if(j)return NM(h,f,m,f+j[0],_,g,p,g+j[1])}return[new Mt(f,m,g,p)]}(t,e,n,o,r,s)}let ji=1e9;class ty{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let n=0;n<this.len;n++)this.vec[n]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,n,o,r,s,i,a){for(let l=-e+this.start;l<=e-this.end;l+=2){let d=r+l,u=l==-e||l!=e&&this.vec[d-1]<this.vec[d+1]?this.vec[d+1]:this.vec[d-1]+1,h=u-l;for(;u<n&&h<o&&a(u,h);)u++,h++;if(this.vec[d]=u,u>n)this.end+=2;else if(h>o)this.start+=2;else if(s){let f=r+(n-o)-l;if(f>=0&&f<this.len&&s.vec[f]!=-1){if(i){let m=s.vec[f];if(m>=n-u)return[m,r+m-f]}else if(u>=n-s.vec[f])return[u,h]}}}return null}}const Ku=new ty,Xu=new ty;function NM(t,e,n,o,r,s,i,a){let l=!1;return as(t,o)||++o!=n||(l=!0),as(r,a)||++a!=i||(l=!0),l?[new Mt(e,n,s,i)]:Tr(t,e,o,r,s,a).concat(Tr(t,o,n,r,a,i))}function ny(t,e){let n=1,o=Math.min(t,e);for(;n<o;)n<<=1;return n}function Zu(t,e,n,o,r,s){if(e==n||e==s||t.charCodeAt(e)!=o.charCodeAt(r))return 0;let i=ny(n-e,s-r);for(let a=e,l=r;;){let d=a+i,u=l+i;if(d>n||u>s||t.slice(a,d)!=o.slice(l,u)){if(i==1)return a-e-(as(t,a)?0:1);i>>=1}else{if(d==n||u==s)return d-e;a=d,l=u}}}function Qu(t,e,n,o,r,s){if(e==n||r==s||t.charCodeAt(n-1)!=o.charCodeAt(s-1))return 0;let i=ny(n-e,s-r);for(let a=n,l=s;;){let d=a-i,u=l-i;if(d<e||u<r||t.slice(d,a)!=o.slice(u,l)){if(i==1)return n-a-(as(t,a)?0:1);i>>=1}else{if(d==e||u==r)return n-d;a=d,l=u}}}function eh(t,e,n,o,r,s,i,a){let l=o.slice(r,s),d=null;for(;;){if(d||i<a)return d;for(let u=e+i;;){as(t,u)||u++;let h=u+i;if(as(t,h)||(h+=h==u+1?1:-1),h>=n)break;let f=t.slice(u,h),m=-1;for(;(m=l.indexOf(f,m+1))!=-1;){let _=Zu(t,h,n,o,r+m+f.length,s),g=Qu(t,e,u,o,r,r+m),p=f.length+_+g;(!d||d[2]<p)&&(d=[u-g,r+m-g,p])}u=h}if(a<0)return d;i>>=1}}function oy(t,e,n,o,r,s){let i=n-e,a=s-r;if(i<a){let l=oy(o,r,s,t,e,n);return l&&[l[1],l[0],l[2]]}return i<4||2*a<i?null:eh(t,e,n,o,r,s,Math.floor(i/4),-1)}function ry(t,e,n,o,r,s){let i,a=n-e,l=s-r;if(a<l){let f=eh(o,r,s,t,e,n,Math.floor(a/6),50);i=f&&[f[1],f[0],f[2]]}else i=eh(t,e,n,o,r,s,Math.floor(l/6),50);if(!i)return[new Mt(e,n,r,s)];let[d,u,h]=i;return Tr(t,e,d,o,r,u).concat(Tr(t,d+h,n,o,u+h,s))}function sy(t,e){for(let n=1;n<t.length;n++){let o=t[n-1],r=t[n];o.toA>r.fromA-e&&o.toB>r.fromB-e&&(t[n-1]=new Mt(o.fromA,r.toA,o.fromB,r.toB),t.splice(n--,1))}}let Mr;try{Mr=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch{}function iy(t){return t>48&&t<58||t>64&&t<91||t>96&&t<123}function ay(t,e){if(e==t.length)return 0;let n=t.charCodeAt(e);return n<192?iy(n)?1:0:Mr?uy(n)&&e!=t.length-1?Mr.test(t.slice(e,e+2))?2:0:Mr.test(String.fromCharCode(n))?1:0:0}function ly(t,e){if(!e)return 0;let n=t.charCodeAt(e-1);return n<192?iy(n)?1:0:Mr?hy(n)&&e!=1?Mr.test(t.slice(e-2,e))?2:0:Mr.test(String.fromCharCode(n))?1:0:0}function cy(t,e,n){if(e==t.length||!ly(t,e))return e;for(let o=e,r=e+n;;){let s=ay(t,o);if(!s)return o;if(o+=s,o>r)return e}}function dy(t,e,n){if(!e||!ay(t,e))return e;for(let o=e,r=e-n;;){let s=ly(t,o);if(!s)return o;if(o-=s,o<r)return e}}function jM(t,e,n){for(let o=e,r=e-n;;){let s=o?t.charCodeAt(o-1):10;if(s==10)return o;if(o--,o<r||s!=32&&s!=9)return e}}const uy=t=>t>=55296&&t<=56319,hy=t=>t>=56320&&t<=57343;function as(t,e){return!e||e==t.length||!uy(t.charCodeAt(e-1))||!hy(t.charCodeAt(e))}function EM(t,e,n){var o;return ji=((o=n==null?void 0:n.scanLimit)!==null&&o!==void 0?o:1e9)>>1,function(r,s,i){for(;;){sy(i,1);let a=!1;for(let l=0;l<i.length;l++){let d,u,h=i[l];(d=Zu(r,h.fromA,h.toA,s,h.fromB,h.toB))&&(h=i[l]=new Mt(h.fromA+d,h.toA,h.fromB+d,h.toB)),(u=Qu(r,h.fromA,h.toA,s,h.fromB,h.toB))&&(h=i[l]=new Mt(h.fromA,h.toA-u,h.fromB,h.toB-u));let f=h.toA-h.fromA,m=h.toB-h.fromB;if(f&&m)continue;let _=h.fromA-(l?i[l-1].toA:0),g=(l<i.length-1?i[l+1].fromA:r.length)-h.toA;if(!_||!g)continue;let p=f?r.slice(h.fromA,h.toA):s.slice(h.fromB,h.toB);_<=p.length&&r.slice(h.fromA-_,h.fromA)==p.slice(p.length-_)?(i[l]=new Mt(h.fromA-_,h.toA-_,h.fromB-_,h.toB-_),a=!0):g<=p.length&&r.slice(h.toA,h.toA+g)==p.slice(0,g)&&(i[l]=new Mt(h.fromA+g,h.toA+g,h.fromB+g,h.toB+g),a=!0)}if(!a)break}return i}(t,e,Tr(t,0,t.length,e,0,e.length))}function fy(t,e,n){return function(o,r,s){for(let i=0,a=0;a<o.length;a++){let l=o[a],d=l.toA-l.fromA,u=l.toB-l.fromB;if(d&&u||d>3||u>3){let h=a==o.length-1?r.length:o[a+1].fromA,f=l.fromA-i,m=h-l.toA,_=dy(r,l.fromA,Math.min(f,5)),g=cy(r,l.toA,Math.min(m,5)),p=l.fromA-_,b=g-l.toA;if(!d||!u){let x,y,v=Math.max(d,u),[C,S,E]=d?[r,l.fromA,l.toA]:[s,l.fromB,l.toB];p&&b?(v>p&&r.slice(_,l.fromA)==C.slice(E-p,E)?(l=o[a]=new Mt(_,_+d,l.fromB-p,l.toB-p),_=l.fromA,g=cy(r,l.toA,Math.min(h-l.toA,5))):v>b&&r.slice(l.toA,g)==C.slice(S,S+b)&&(l=o[a]=new Mt(g-d,g,l.fromB+b,l.toB+b),g=l.toA,_=dy(r,l.fromA,Math.min(l.fromA-i,5))),p=l.fromA-_,b=g-l.toA):p||b||!(y=l.fromA-(x=jM(r,l.fromA,f)))||r.slice(x,l.fromA)!=C.slice(E-y,E)||(l=o[a]=new Mt(x,x+d,l.fromB-y,l.toB-y))}(p||b)&&(l=o[a]=new Mt(l.fromA-p,l.toA+b,l.fromB-p,l.toB+b)),i=l.toA}}return sy(o,3),o}(EM(t,e,n),t,e)}const so=Us.define({combine:t=>t[0]}),th=Dt.define(),ls=In.define({create:t=>null,update(t,e){for(let n of e.effects)n.is(th)&&(t=n.value);return t}});class cs{constructor(e,n,o,r,s){this.changes=e,this.fromA=n,this.toA=o,this.fromB=r,this.toB=s}offset(e,n){return e||n?new cs(this.changes,this.fromA+e,this.toA+e,this.fromB+n,this.toB+n):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,n,o){return gy(fy(e.toString(),n.toString(),o),e,n,0,0)}static updateA(e,n,o,r,s){return xy(by(e,r,!0,o.length),e,n,o,s)}static updateB(e,n,o,r,s){return xy(by(e,r,!1,n.length),e,n,o,s)}}function my(t,e,n,o){let r=n.lineAt(t),s=o.lineAt(e);return r.to==t&&s.to==e&&t<n.length&&e<o.length?[t+1,e+1]:[r.from,s.from]}function py(t,e,n,o){let r=n.lineAt(t),s=o.lineAt(e);return r.from==t&&s.from==e?[t,e]:[r.to+1,s.to+1]}function gy(t,e,n,o,r){let s=[];for(let i=0;i<t.length;i++){let a=t[i],[l,d]=my(a.fromA+o,a.fromB+r,e,n),[u,h]=py(a.toA+o,a.toB+r,e,n),f=[a.offset(-l+o,-d+r)];for(;i<t.length-1;){let m=t[i+1],[_,g]=my(m.fromA+o,m.fromB+r,e,n);if(_>u+1&&g>h+1)break;f.push(m.offset(-l+o,-d+r)),[u,h]=py(m.toA+o,m.toB+r,e,n),i++}s.push(new cs(f,l,Math.max(l,u),d,Math.max(d,h)))}return s}const Sl=1e3;function _y(t,e,n,o){let r=0,s=t.length;for(;;){if(r==s){let u=0,h=0;r&&({toA:u,toB:h}=t[r-1]);let f=e-(n?u:h);return[u+f,h+f]}let i=r+s>>1,a=t[i],[l,d]=n?[a.fromA,a.toA]:[a.fromB,a.toB];if(l>e)s=i;else{if(!(d<=e))return o?[a.fromA,a.fromB]:[a.toA,a.toB];r=i+1}}}function by(t,e,n,o){let r=[];return e.iterChangedRanges((s,i,a,l)=>{let d=0,u=n?e.length:o,h=0,f=n?o:e.length;s>Sl&&([d,h]=_y(t,s-Sl,n,!0)),i<e.length-Sl&&([u,f]=_y(t,i+Sl,n,!1));let m,_=l-a-(i-s),[g,p]=n?[_,0]:[0,_];r.length&&(m=r[r.length-1]).toA>=d?r[r.length-1]={fromA:m.fromA,fromB:m.fromB,toA:u,toB:f,diffA:m.diffA+g,diffB:m.diffB+p}:r.push({fromA:d,toA:u,fromB:h,toB:f,diffA:g,diffB:p})}),r}function xy(t,e,n,o,r){if(!t.length)return e;let s=0,i=0,a=0,l=[];for(let d of t){let u=d.fromA+i,h=d.toA+i+d.diffA,f=d.fromB+a,m=d.toB+a+d.diffB;for(;s<e.length;){let _=e[s];if(_.toA+i<=u&&_.toB+a<=f)l.push(_.offset(i,a));else if(_.fromA+i>h)break;s++}for(let _ of gy(fy(n.sliceString(u,h),o.sliceString(f,m),r),n,o,u,f))l.push(_);for(i+=d.diffA,a+=d.diffB;s<e.length;){let _=e[s];if(_.fromA>h+i&&_.fromB>m+a)break;s++}}for(;s<e.length;)l.push(e[s++].offset(i,a));return l}const yy=En.fromClass(class{constructor(t){({deco:this.deco,gutter:this.gutter}=ky(t))}update(t){var e,n;(t.docChanged||t.viewportChanged||(e=t.startState,n=t.state,e.field(ls,!1)!=n.field(ls,!1))||function(o,r){return o.facet(so)!=r.facet(so)}(t.startState,t.state))&&({deco:this.deco,gutter:this.gutter}=ky(t.view))}},{decorations:t=>t.deco}),Cl=Vo.low(UV({class:"cm-changeGutter",markers:t=>{var e;return((e=t.plugin(yy))===null||e===void 0?void 0:e.gutter)||Qm.empty}})),wy=dt.line({class:"cm-changedLine"}),IM=dt.mark({class:"cm-changedText"}),AM=dt.mark({tagName:"ins",class:"cm-insertedLine"}),TM=dt.mark({tagName:"del",class:"cm-deletedLine"}),vy=new class extends VV{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function MM(t,e,n,o,r,s){let i=n?t.fromA:t.fromB,a=n?t.toA:t.toB,l=0;if(i!=a){r.add(i,i,wy),r.add(i,a,n?TM:AM),s&&s.add(i,i,vy);for(let d=e.iterRange(i,a-1),u=i;!d.next().done;){if(d.lineBreak){u++,r.add(u,u,wy),s&&s.add(u,u,vy);continue}let h=u+d.value.length;if(o)for(;l<t.changes.length;){let f=t.changes[l],m=i+(n?f.fromA:f.fromB),_=i+(n?f.toA:f.toB),g=Math.max(u,m),p=Math.min(h,_);if(g<p&&r.add(g,p,IM),!(_<h))break;l++}u=h}}}function ky(t){let e=t.state.field(ls),{side:n,highlightChanges:o,markGutter:r}=t.state.facet(so),s=n=="a",i=new Ls,a=r?new Ls:null,{from:l,to:d}=t.viewport;for(let u of e){if((s?u.fromA:u.fromB)>=d)break;(s?u.toA:u.toB)>l&&MM(u,t.state.doc,s,o,i,a)}return{deco:i.finish(),gutter:a&&a.finish()}}class Nl extends Vs{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const jl=Dt.define({map:(t,e)=>t.map(e)}),Ei=In.define({create:()=>dt.none,update:(t,e)=>{for(let n of e.effects)if(n.is(jl))return n.value;return t.map(e.changes)},provide:t=>et.decorations.from(t)}),nh=.01,oh=Dt.define({map:(t,e)=>e.mapPos(t)});class OM extends Vs{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let n=document.createElement("div");return n.className="cm-collapsedLines",n.textContent="\u299A "+e.state.phrase("$ unchanged lines",this.lines)+" \u299A",n.addEventListener("click",o=>{let r=e.posAtDOM(o.target);e.dispatch({effects:oh.of(r)});let{side:s,sibling:i}=e.state.facet(so);i&&i().dispatch({effects:oh.of(DM(r,e.state.field(ls),s=="a"))})}),n}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}function DM(t,e,n){let o=0,r=0;for(let s=0;;s++){let i=s<e.length?e[s]:null;if(!i||(n?i.fromA:i.fromB)>=t)return r+(t-o);[o,r]=n?[i.toA,i.toB]:[i.toB,i.toA]}}const RM=In.define({create:t=>dt.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(oh)&&(t=t.update({filter:o=>o!=n.value}));return t},provide:t=>et.decorations.from(t)});function Sy({margin:t=3,minSize:e=4}){return RM.init(n=>function(o,r,s){let i=new Ls,a=o.facet(so).side=="a",l=o.field(ls),d=1;for(let u=0;;u++){let h=u<l.length?l[u]:null,f=u?d+r:1,m=h?o.doc.lineAt(a?h.fromA:h.fromB).number-1-r:o.doc.lines,_=m-f+1;if(_>=s&&i.add(o.doc.line(f).from,o.doc.line(m).to,dt.replace({widget:new OM(_),block:!0})),!h)break;d=o.doc.lineAt(Math.min(o.doc.length,a?h.toA:h.toB)).number}return i.finish()}(n,t,e))}const PM=et.styleModule.of(new BV({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),LM=et.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),Cy=new Fc,El=new Fc;class Ny{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig;let n=[Vo.low(yy),LM,PM,Ei,et.updateListener.of(h=>{this.measuring<0&&(h.heightChanged||h.viewportChanged)&&!h.transactions.some(f=>f.effects.some(m=>m.is(jl)))&&this.measure()})],o=[so.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&o.push(Cl);let r=gr.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],et.editorAttributes.of({class:"cm-merge-a"}),El.of(o),n]}),s=[so.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&s.push(Cl);let i=gr.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],et.editorAttributes.of({class:"cm-merge-b"}),El.of(s),n]});this.chunks=cs.build(r.doc,i.doc,this.diffConf);let a=[ls.init(()=>this.chunks),Cy.of(e.collapseUnchanged?Sy(e.collapseUnchanged):[])];r=r.update({effects:Dt.appendConfig.of(a)}).state,i=i.update({effects:Dt.appendConfig.of(a)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let l=e.orientation||"a-b",d=document.createElement("div");d.className="cm-mergeViewEditor";let u=document.createElement("div");u.className="cm-mergeViewEditor",this.editorDOM.appendChild(l=="a-b"?d:u),this.editorDOM.appendChild(l=="a-b"?u:d),this.a=new et({state:r,parent:d,root:e.root,dispatchTransactions:h=>this.dispatch(h,this.a)}),this.b=new et({state:i,parent:u,root:e.root,dispatchTransactions:h=>this.dispatch(h,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,n){if(e.some(o=>o.docChanged)){let o=e[e.length-1],r=e.reduce((i,a)=>i.compose(a.changes),pa.empty(e[0].startState.doc.length));this.chunks=n==this.a?cs.updateA(this.chunks,o.newDoc,this.b.state.doc,r,this.diffConf):cs.updateB(this.chunks,this.a.state.doc,o.newDoc,r,this.diffConf),n.update([...e,o.state.update({effects:th.of(this.chunks)})]);let s=n==this.a?this.b:this.a;s.update([s.state.update({effects:th.of(this.chunks)})]),this.scheduleMeasure()}else n.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let s=e.orientation!="b-a";if(s!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let i=this.a.dom.parentNode,a=this.b.dom.parentNode;i.remove(),a.remove(),this.editorDOM.insertBefore(s?i:a,this.editorDOM.firstChild),this.editorDOM.appendChild(s?a:i),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let s=!!this.revertDOM,i=this.revertToA,a=this.renderRevert;"revertControls"in e&&(s=!!e.revertControls,i=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(a=e.renderRevertControl),this.setupRevertControls(s,i,a)}let n="highlightChanges"in e,o="gutter"in e,r="collapseUnchanged"in e;if(n||o||r){let s=[],i=[];if(n||o){let a=this.a.state.facet(so),l=o?e.gutter!==!1:a.markGutter,d=n?e.highlightChanges!==!1:a.highlightChanges;s.push(El.reconfigure([so.of({side:"a",sibling:()=>this.b,highlightChanges:d,markGutter:l}),l?Cl:[]])),i.push(El.reconfigure([so.of({side:"b",sibling:()=>this.a,highlightChanges:d,markGutter:l}),l?Cl:[]]))}if(r){let a=Cy.reconfigure(e.collapseUnchanged?Sy(e.collapseUnchanged):[]);s.push(a),i.push(a)}this.a.dispatch({effects:s}),this.b.dispatch({effects:i})}this.scheduleMeasure()}setupRevertControls(e,n,o){this.revertToA=n,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=o,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",r=>this.revertClicked(r)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){(function(e,n,o){let r=new Ls,s=new Ls,i=e.state.field(Ei).iter(),a=n.state.field(Ei).iter(),l=0,d=0,u=0,h=0;for(let g=0;;g++){let p=g<o.length?o[g]:null;if(l<(p?p.fromA:e.state.doc.length)){let b=e.lineBlockAt(l).top+u-(n.lineBlockAt(d).top+h);b<-.01?(u-=b,r.add(l,l,dt.widget({widget:new Nl(-b),block:!0,side:-1}))):b>nh&&(h+=b,s.add(d,d,dt.widget({widget:new Nl(b),block:!0,side:-1})))}if(!p)break;for(l=p.toA,d=p.toB;i.value&&i.from<l;)u-=i.value.spec.widget.height,i.next();for(;a.value&&a.from<d;)h-=a.value.spec.widget.height,a.next()}for(;i.value;)u-=i.value.spec.widget.height,i.next();for(;a.value;)h-=a.value.spec.widget.height,a.next();let f=e.contentHeight+u-(n.contentHeight+h);f<nh?r.add(e.state.doc.length,e.state.doc.length,dt.widget({widget:new Nl(-f),block:!0,side:1})):f>nh&&s.add(n.state.doc.length,n.state.doc.length,dt.widget({widget:new Nl(f),block:!0,side:1}));let m=r.finish(),_=s.finish();Qm.eq([m],[e.state.field(Ei)])||e.dispatch({effects:jl.of(m)}),Qm.eq([_],[n.state.field(Ei)])||n.dispatch({effects:jl.of(_)})})(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,n=e.firstChild,o=this.a.viewport,r=this.b.viewport;for(let s=0;s<this.chunks.length;s++){let i=this.chunks[s];if(i.fromA>o.to||i.fromB>r.to)break;if(i.fromA<o.from||i.fromB<r.from)continue;let a=this.a.lineBlockAt(i.fromA).top+"px";for(;n&&+n.dataset.chunk<s;)n=jy(n);n&&n.dataset.chunk==String(s)?(n.style.top!=a&&(n.style.top=a),n=n.nextSibling):e.insertBefore(this.renderRevertButton(a,s),n)}for(;n;)n=jy(n)}renderRevertButton(e,n){let o;if(this.renderRevert)o=this.renderRevert();else{o=document.createElement("button");let r=this.a.state.phrase("Revert this chunk");o.setAttribute("aria-label",r),o.setAttribute("title",r),o.textContent=this.revertToLeft?"\u21DC":"\u21DD"}return o.style.top=e,o.setAttribute("data-chunk",String(n)),o}revertClicked(e){let n,o=e.target;for(;o&&o.parentNode!=this.revertDOM;)o=o.parentNode;if(o&&(n=this.chunks[o.dataset.chunk])){let[r,s,i,a,l,d]=this.revertToA?[this.b,this.a,n.fromB,n.toB,n.fromA,n.toA]:[this.a,this.b,n.fromA,n.toA,n.fromB,n.toB],u=r.state.sliceDoc(i,Math.max(i,a-1));i!=a&&d<=s.state.doc.length&&(u+=r.state.lineBreak),s.dispatch({changes:{from:l,to:Math.min(s.state.doc.length,d),insert:u},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function jy(t){let e=t.nextSibling;return t.remove(),e}var FM=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl","diffConfig","root"],zM=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],Ey=X.forwardRef((t,e)=>{var{className:n,children:o,orientation:r,revertControls:s,highlightChanges:i,gutter:a,collapseUnchanged:l,destroyRerender:d=!0,renderRevertControl:u,diffConfig:h,root:f}=t,m=_a(t,FM),_=Ju(),{modified:g,modifiedExtension:p,original:b,originalExtension:x,theme:y,dispatch:v}=_,C=_a(_,zM),S=O.useRef(null),E=O.useRef(),N={orientation:r,revertControls:s,highlightChanges:i,gutter:a,collapseUnchanged:l,renderRevertControl:u,diffConfig:h,root:f};O.useImperativeHandle(e,()=>({container:S.current,view:E.current,modified:g,original:b,config:Et({a:b,b:g,parent:S.current},N)}),[S,E,g,b,N]);var j=et.updateListener.of(A=>{if(A.docChanged&&typeof(x==null?void 0:x.onChange)=="function"){var M=A.state.doc.toString();x==null||x.onChange(M,A)}}),T=et.updateListener.of(A=>{if(A.docChanged&&typeof(p==null?void 0:p.onChange)=="function"){var M=A.state.doc.toString();p==null||p.onChange(M,A)}});return O.useEffect(()=>{!E.current&&S.current&&x&&p&&(E.current=new Ny(Et({a:Et({},b,{extensions:[...(x==null?void 0:x.extension)||[],...Ws(Et({},x==null?void 0:x.option,{theme:y})),j]}),b:Et({},g,{extensions:[...(p==null?void 0:p.extension)||[],...Ws(Et({},p==null?void 0:p.option,{theme:y})),T]}),parent:S.current},N)),v({view:E.current}))},[E,S,x,p]),O.useEffect(()=>{if(b&&b.doc&&E.current){var A,M,P=(A=E.current)==null?void 0:A.a.state.doc.toString();P!==b.doc&&((M=E.current)==null||M.a.dispatch({changes:{from:0,to:P.length,insert:b.doc||""}}))}if(g&&g.doc&&E.current){var R,L,B=(R=E.current)==null?void 0:R.b.state.doc.toString();B!==g.doc&&((L=E.current)==null||L.b.dispatch({changes:{from:0,to:B.length,insert:g.doc||""}}))}if(d&&E.current){var U=E.current.a.state.selection.ranges[0].from,D=E.current.b.state.selection.ranges[0].from;E.current.destroy(),E.current=new Ny(Et({a:Et({},b,{extensions:[...(x==null?void 0:x.extension)||[],...Ws(Et({},x==null?void 0:x.option,{theme:y}))]}),b:Et({},g,{extensions:[...(p==null?void 0:p.extension)||[],...Ws(Et({},p==null?void 0:p.option,{theme:y}))]}),parent:S.current},N)),U&&(E.current.a.focus(),E.current.a.dispatch({selection:{anchor:U,head:U}})),D&&(E.current.b.focus(),E.current.b.dispatch({selection:{anchor:D,head:D}}))}},[E,y,S.current,b,g,x,p,d]),O.useEffect(()=>()=>E.current&&E.current.destroy(),[]),O.useEffect(()=>{if(E.current){var A={};C.orientation!==r&&(A.orientation=r),C.revertControls!==s&&(A.revertControls=s),C.highlightChanges!==i&&(A.highlightChanges=i),C.gutter!==a&&(A.gutter=a),C.collapseUnchanged!==l&&(A.collapseUnchanged=l),C.renderRevertControl!==u&&(A.collapseUnchanged=l),Object.keys(A).length&&v&&E.current&&(E.current.reconfigure(Et({},A)),v(Et({},A)))}},[v,E,r,s,i,a,l,u]),c.jsx("div",Et({ref:S,className:"cm-merge-theme"+(n?" "+n:"")},m,{children:o}))});Ey.displayName="CodeMirrorMerge.Internal";var BM=["theme"],ds=X.forwardRef((t,e)=>{var{theme:n}=t,o=_a(t,BM);return c.jsx(kM,{theme:n,children:c.jsx(Ey,Et({},o,{ref:e}))})});ds.Original=Qx,ds.Modified=ey,ds.displayName="CodeMirrorMerge";const UM=ds.Original,VM=ds.Modified,Iy=[HV(),et.lineWrapping],$M=t=>{const e=K.c(42),{className:n,onChange:o,initialPrompt:r,currentLanguageAdapter:s,currentCode:i,declineChange:a,acceptChange:l,enabled:d,children:u}=t;let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={},e[0]=h):h=e[0];const[f,m]=O.useState(h),[_,g]=Qt(kC),p=ep(),{completion:b,input:x,stop:y,isLoading:v,setCompletion:C,setInput:S,handleSubmit:E}=$V({api:p.getAiURL("completion").toString(),headers:p.headers(),initialInput:r,streamProtocol:"text",experimental_throttle:100,body:{...f,includeOtherCode:_?Lc(i):"",code:i,language:s},onError:HM,onFinish:(q,Y)=>{N(Y.trimEnd())}}),N=C,j=X.useRef(null);let T,A,M,P;e[1]!==d?(T=()=>{var q;d&&(WV(()=>{const Y=j.current;return!!(Y!=null&&Y.view)&&(Y.view.focus(),!0)},{retries:3,delay:100,initialDelay:100}),qV((q=j.current)==null?void 0:q.view))},A=[d],e[1]=d,e[2]=T,e[3]=A):(T=e[2],A=e[3]),O.useEffect(T,A),e[4]!==d||e[5]!==r||e[6]!==S?(M=()=>{d&&S(r||"")},P=[d,r,S],e[4]=d,e[5]=r,e[6]=S,e[7]=M,e[8]=P):(M=e[7],P=e[8]),O.useEffect(M,P);const{theme:R}=xr();let L;e[9]!==n?(L=Ne("flex flex-col w-full rounded-[inherit]",n),e[9]=n,e[10]=L):L=e[10];const B=d&&"max-h-[400px] min-h-11 visible",U=!d&&"max-h-0 min-h-0 invisible";let D,k,$,I;e[11]!==B||e[12]!==U?(D=Ne("flex items-center gap-2 border-b px-3 transition-all rounded-[inherit] rounded-b-none duration-300",B,U),e[11]=B,e[12]=U,e[13]=D):D=e[13],e[14]!==l||e[15]!==b||e[16]!==a||e[17]!==d||e[18]!==E||e[19]!==_||e[20]!==x||e[21]!==v||e[22]!==N||e[23]!==g||e[24]!==S||e[25]!==y||e[26]!==R?(k=d&&c.jsxs(c.Fragment,{children:[c.jsx(ea,{className:"text-[var(--blue-10)] flex-shrink-0",size:16}),c.jsx(Hc,{inputRef:j,theme:R,onClose:()=>{a(),N("")},value:x,onChange:q=>{S(q),m(tS({input:q}))},onSubmit:()=>{v||E()}}),v&&c.jsxs(Ae,{"data-testid":"stop-completion-button",variant:"text",size:"xs",className:"mb-0",onClick:y,children:[c.jsx(Wc,{className:"animate-spin mr-1",size:14}),"Stop"]}),!v&&b&&c.jsx(Ae,{"data-testid":"accept-completion-button",variant:"text",size:"xs",className:"mb-0",disabled:v,onClick:()=>{l(b),N("")},children:c.jsx("span",{className:"text-[var(--grass-11)] opacity-100",children:"Accept"})}),c.jsx("div",{className:"h-full w-px bg-border mx-2"}),c.jsx(Te,{content:"Include code from other cells",children:c.jsxs("div",{className:"flex flex-row items-start gap-1 overflow-hidden",children:[c.jsx(nS,{"data-testid":"include-other-cells-checkbox",id:"include-other-cells",checked:_,onCheckedChange:q=>g(!!q)}),c.jsx(Fr,{htmlFor:"include-other-cells",className:"text-muted-foreground text-xs whitespace-nowrap ellipsis",children:"Include all code"})]})}),c.jsx(Ae,{"data-testid":"decline-completion-button",variant:"text",size:"icon",disabled:v,onClick:()=>{y(),a(),N("")},children:c.jsx(eo,{className:"text-[var(--red-10)]",size:16})})]}),e[14]=l,e[15]=b,e[16]=a,e[17]=d,e[18]=E,e[19]=_,e[20]=x,e[21]=v,e[22]=N,e[23]=g,e[24]=S,e[25]=y,e[26]=R,e[27]=k):k=e[27],e[28]!==D||e[29]!==k?($=c.jsx("div",{className:D,children:k}),e[28]=D,e[29]=k,e[30]=$):$=e[30],e[31]!==b||e[32]!==i||e[33]!==d||e[34]!==o||e[35]!==R?(I=b&&d&&c.jsxs(ds,{className:"cm",theme:R,children:[c.jsx(UM,{onChange:o,value:i,extensions:Iy}),c.jsx(VM,{value:b,editable:!1,readOnly:!0,extensions:Iy})]}),e[31]=b,e[32]=i,e[33]=d,e[34]=o,e[35]=R,e[36]=I):I=e[36];const W=(!b||!d)&&u;let G;return e[37]!==$||e[38]!==I||e[39]!==W||e[40]!==L?(G=c.jsxs("div",{className:L,children:[$,I,W]}),e[37]=$,e[38]=I,e[39]=W,e[40]=L,e[41]=G):G=e[41],G};function HM(t){nt({title:"Completion failed",description:eS(t)})}const Il="application/x-marimo-cell",WM=xt({cells:GV(xt({code:ht()})),version:kt("1.0")}),Ii=zt(!1),Ai=new WeakMap;function Ay(t){return{handle:e=>t(e),bulkHandle:e=>{let n=!0;try{for(const o of e)n=n&&t(o);return n}catch{return!1}}}}function xo(t){return{handle:e=>t([e]),bulkHandle:e=>t(e)}}function Ty(t,e){const n=K.c(23),{canMoveX:o,editorView:r,cellActionDropdownRef:s}=e,{saveOrNameNotebook:i}=Md(),a=Ot(Zs),l=bt(),d=T4(),u=Ot(Ii),h=Ks(),f=Le(YV),{copyCells:m,pasteAtCell:_}=function(){const N=bt(),j=qe(async A=>{const M=Nn(),P=A.map(R=>M.cellData[R]).filter(Boolean);if(P.length!==0)try{const R={cells:P.map(D=>({code:D.code})),version:"1.0"},L=P.map(D=>D.code).join(`

`),B=new ClipboardItem({[Il]:new Blob([JSON.stringify(R)],{type:Il}),"text/plain":new Blob([L],{type:"text/plain"})});await navigator.clipboard.write([B]);const U=P.length===1?"Cell":`${P.length} cells`;nt({title:`${U} copied`,description:`${U} ${P.length===1?"has":"have"} been copied to clipboard`})}catch(R){vt.error("Failed to copy cells to clipboard",R);try{const L=P.map(U=>U.code).join(`

`);await navigator.clipboard.writeText(L);const B=P.length===1?"Cell":`${P.length} cells`;nt({title:`${B} copied`,description:`${B} code ${P.length===1?"has":"have"} been copied to clipboard`})}catch{nt({title:"Copy failed",description:"Failed to copy cells to clipboard",variant:"danger"})}}else nt({title:"Error",description:"No cells found",variant:"danger"})}),T=qe(async A=>{try{const M=await navigator.clipboard.read();for(const R of M)if(R.types.includes(Il)){const L=await R.getType(Il),B=await L.text();try{const U=WM.parse(JSON.parse(B));if(U.cells.length===0)break;const D=A;for(const k of U.cells)N.createNewCell({cellId:D,before:!1,code:k.code,autoFocus:!1});return void U.cells.length}catch(U){vt.warn("Failed to parse clipboard cell data",U)}}const P=await navigator.clipboard.readText();P.trim()?N.createNewCell({cellId:A,before:!1,code:P,autoFocus:!0}):nt({title:"Nothing to paste",description:"No cell or text found in clipboard",variant:"danger"})}catch(M){vt.error("Failed to paste from clipboard",M),nt({title:"Paste failed",description:"Failed to read from clipboard",variant:"danger"})}});return{copyCells:j,pasteAtCell:T}}(),g=Dd(),p=function(N){const j=K.c(2);let T,A;return j[0]!==N?(A=zt(M=>M(Od).selected.has(N)),j[0]=N,j[1]=A):A=j[1],T=A,Le(T)}(t),b=Le(mc);let x;n[0]!==b?(x=(N,j)=>jm(b.getHotkey(N).key)(j.nativeEvent||j),n[0]=b,n[1]=x):x=n[1];const y=x,v=function(N){const j=K.c(10),T=JV(),A=bt(),M=Ot(Ii);let P,R,L;j[0]!==N||j[1]!==T?(P=()=>{T(N)},j[0]=N,j[1]=T,j[2]=P):P=j[2],j[3]!==A||j[4]!==N||j[5]!==M?(R=()=>{M(!1),A.markTouched({cellId:N})},j[3]=A,j[4]=N,j[5]=M,j[6]=R):R=j[6],j[7]!==P||j[8]!==R?(L={onFocusWithin:P,onBlurWithin:R},j[7]=P,j[8]=R,j[9]=L):L=j[9];const{focusWithinProps:B}=KV(L);return B}(t);let C;n[2]!==l||n[3]!==o||n[4]!==s||n[5]!==t||n[6]!==m||n[7]!==r||n[8]!==p||n[9]!==y||n[10]!==f||n[11]!==_||n[12]!==h||n[13]!==i||n[14]!==g||n[15]!==a||n[16]!==u||n[17]!==d?(C={onKeyDown:N=>{if(Qn.fromInput(N))return void N.continuePropagation();const j={"Mod+ArrowUp":()=>(l.focusTopCell(),g.clear(),!0),"Mod+ArrowDown":()=>(l.focusBottomCell(),g.clear(),!0),ArrowUp:()=>(l.focusCell({cellId:t,before:!0}),g.clear(),!0),ArrowDown:()=>(l.focusCell({cellId:t,before:!1}),g.clear(),!0),"Shift+ArrowUp":()=>{const M=d.get(qc);g.extend({cellId:t,allCellIds:M});const P=M.findWithId(t).before(t);return P&&g.extend({cellId:P,allCellIds:M}),l.focusCell({cellId:t,before:!0}),!0},"Shift+ArrowDown":()=>{const M=d.get(qc);g.extend({cellId:t,allCellIds:M});const P=M.findWithId(t).after(t);return P&&g.extend({cellId:P,allCellIds:M}),l.focusCell({cellId:t,before:!1}),!0},Escape:()=>!!p&&(g.clear(),!0),Enter:()=>(u(!0),sS(d,t),g.clear(),!0),s:()=>(i(),!0)};for(const[M,P]of Object.entries(j))if(jm(M)(N)&&P())return void N.preventDefault();if(f==="vim"&&function(M,P){const R=function(k){if(k.ctrlKey||k.metaKey||k.altKey)return"";const $=k.key.toLowerCase();return k.shiftKey?`shift+${$}`:$}(M),L=M.target;if(!R||!L)return!1;const B=Ai.get(L);let U=R;B!=null&&B.timeout&&clearTimeout(B.timeout),B&&(U=`${B.sequence} ${R}`);const D=P[U];if(D)return Ai.delete(L),D();if(!B){const k=P[R];if(k)return k()}if(Object.keys(P).some(k=>k.startsWith(`${U} `))){const k=window.setTimeout(()=>{Ai.delete(L)},500);return Ai.set(L,{sequence:U,timeout:k}),!0}return Ai.delete(L),!1}(N.nativeEvent||N,{j:j.ArrowDown,k:j.ArrowUp,i:j.Enter,"shift+j":j["Shift+ArrowDown"],"shift+k":j["Shift+ArrowUp"],"g g":j["Mod+ArrowUp"],"shift+g":j["Mod+ArrowDown"]}))return void N.preventDefault();const T={"cell.run":xo(M=>(h(M),!0)),"cell.runAndNewBelow":xo(M=>{h(M);const P=M[M.length-1];return l.moveToNextCell({cellId:P,before:!1}),!0}),"cell.runAndNewAbove":xo(M=>{h(M);const P=M[0];return l.moveToNextCell({cellId:P,before:!0}),!0}),"cell.createAbove":M=>(l.createNewCell({cellId:M,before:!0}),!0),"cell.createBelow":M=>(l.createNewCell({cellId:M,before:!1}),!0),"cell.moveUp":xo(M=>{const P=M[0];return d.get(cr).cellIds.findWithId(P).first()!==P&&(M.forEach(R=>{l.moveCell({cellId:R,before:!0})}),!0)}),"cell.moveDown":xo(M=>{const P=M[M.length-1];return d.get(cr).cellIds.findWithId(P).last()!==P&&([...M].reverse().forEach(R=>{l.moveCell({cellId:R,before:!1})}),!0)}),"cell.moveLeft":Ay(M=>!!o&&(l.moveCell({cellId:M,direction:"left"}),!0)),"cell.moveRight":Ay(M=>!!o&&(l.moveCell({cellId:M,direction:"right"}),!0)),"cell.hideCode":xo(M=>{var R;const P=!M.map(L=>{var U;return((U=d.get(cr).cellData[L])==null?void 0:U.config)||null}).every(qM);ur({configs:Object.fromEntries(M.map(L=>[L,{hide_code:P}]))});for(const L of M)l.updateCellConfig({cellId:L,config:{hide_code:P}});if(M.length===1){const L=M[0];l.focusCell({cellId:L,before:!1}),P?((R=r.current)==null||R.contentDOM.blur(),rS(L)):sS(d,L)}return!0}),"cell.focusDown":M=>(l.focusCell({cellId:M,before:!1}),!0),"cell.focusUp":M=>(l.focusCell({cellId:M,before:!0}),!0),"cell.sendToBottom":xo(M=>(M.forEach(P=>{l.sendToBottom({cellId:P})}),!0)),"cell.sendToTop":xo(M=>([...M].reverse().forEach(P=>{l.sendToTop({cellId:P})}),!0)),"cell.aiCompletion":M=>{var R;let P=!1;return a(L=>(L==null?void 0:L.cellId)===M?(P=!0,null):{cellId:M}),P&&((R=r.current)==null||R.focus()),!0},"cell.cellActions":()=>{var M;return(M=s.current)==null||M.toggle(),!0},"command.copyCell":xo(M=>(m(M),!0)),"command.pasteCell":M=>(_(M),!0),"command.createCellBefore":M=>!Qn.hasModifier(N)&&(l.createNewCell({cellId:M,before:!0,autoFocus:!0}),!0),"command.createCellAfter":M=>!Qn.hasModifier(N)&&(l.createNewCell({cellId:M,before:!1,autoFocus:!0}),!0)},A=function(M){return M.get(Od).selected}(d);for(const[M,P]of Object.entries(T))if(y(M,N)){if(P instanceof Function){if(P(t))return void N.preventDefault()}else if(A.size>=2?P.bulkHandle([...A]):P.handle(t))return void N.preventDefault();return}N.continuePropagation()}},n[2]=l,n[3]=o,n[4]=s,n[5]=t,n[6]=m,n[7]=r,n[8]=p,n[9]=y,n[10]=f,n[11]=_,n[12]=h,n[13]=i,n[14]=g,n[15]=a,n[16]=u,n[17]=d,n[18]=C):C=n[18];const{keyboardProps:S}=oS(C);let E;return n[19]!==v||n[20]!==p||n[21]!==S?(E=pm(v,S,{"data-selected":p,className:"data-[selected=true]:ring-1 data-[selected=true]:ring-[var(--blue-8)] data-[selected=true]:ring-offset-1"}),n[19]=v,n[20]=p,n[21]=S,n[22]=E):E=n[22],E}function qM(t){return t==null?void 0:t.hide_code}const GM=t=>{const e=K.c(24),{editorView:n,code:o,currentLanguageAdapter:r,onAfterToggle:s}=t;let i,a;e[0]!==o?(a=new ra().isSupported(o)||o.trim()==="",e[0]=o,e[1]=a):a=e[1],i=a;const l=i;let d,u;e[2]!==o?(u=new Vc().isSupported(o)||o.trim()==="",e[2]=o,e[3]=u):u=e[3],d=u;const h=d&&r==="python";let f,m;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(lr,{color:"var(--sky-11)",strokeWidth:2.5,className:"w-4 h-4"}),e[4]=f):f=e[4],e[5]!==r||e[6]!==n||e[7]!==s||e[8]!==h?(m=c.jsx(rh,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:h,icon:f,toType:"sql",displayName:"SQL",onAfterToggle:s}),e[5]=r,e[6]=n,e[7]=s,e[8]=h,e[9]=m):m=e[9];const _=l&&r==="python";let g,p,b,x,y;return e[10]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx(uc,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),e[10]=g):g=e[10],e[11]!==r||e[12]!==n||e[13]!==s||e[14]!==_?(p=c.jsx(rh,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:_,icon:g,toType:"markdown",displayName:"Markdown",onAfterToggle:s}),e[11]=r,e[12]=n,e[13]=s,e[14]=_,e[15]=p):p=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(hc,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),e[16]=b):b=e[16],e[17]!==r||e[18]!==n?(x=c.jsx(rh,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:!0,icon:b,toType:"python",displayName:"Python",onAfterToggle:Hn.NOOP}),e[17]=r,e[18]=n,e[19]=x):x=e[19],e[20]!==p||e[21]!==x||e[22]!==m?(y=c.jsxs("div",{className:"absolute right-3 top-2 z-20 flex hover-action gap-1",children:[m,p,x]}),e[20]=p,e[21]=x,e[22]=m,e[23]=y):y=e[23],y},rh=t=>{const e=K.c(10),{editorView:n,currentLanguageAdapter:o,canSwitchToLanguage:r,icon:s,toType:i,displayName:a,onAfterToggle:l}=t;let d;e[0]!==n||e[1]!==l||e[2]!==i?(d=()=>{n&&(Lr(n,{language:i}),l())},e[0]=n,e[1]=l,e[2]=i,e[3]=d):d=e[3];const u=d;if(!r||o===i)return null;const h=`View as ${a}`;let f,m;return e[4]!==u||e[5]!==s?(f=c.jsx(Ae,{"data-testid":"language-toggle-button",variant:"text",size:"xs",className:"opacity-80 px-1",onClick:u,children:s}),e[4]=u,e[5]=s,e[6]=f):f=e[6],e[7]!==h||e[8]!==f?(m=c.jsx(Te,{content:h,children:f}),e[7]=h,e[8]=f,e[9]=m):m=e[9],m},My=({theme:t,showPlaceholder:e,id:n,config:o,code:r,status:s,serializedEditorState:i,setEditorView:a,runCell:l,userConfig:d,editorViewRef:u,editorViewParentRef:h,hidden:f,hasOutput:m,showHiddenCode:_,languageAdapter:g,setLanguageAdapter:p,showLanguageToggles:b=!0})=>{var q;const[x,y]=Qt(Zs),v=vd(),{saveOrNameNotebook:C}=Md(),S=s==="running"||s==="queued",E=bt(),N=gg(),j=g==="markdown",T=qe(()=>!S&&(v({cellId:n}),!0)),A=qe(()=>!S&&(l(),!0)),M=qe(()=>{const Y=!o.hide_code;return ur({configs:{[n]:{hide_code:Y}}}),E.updateCellConfig({cellId:n,config:{hide_code:Y}}),Y}),P=Le(dc),R=qe(()=>{fo({autoInstantiate:P,createNewCell:E.createNewCell})}),L=XV(d),B=O.useMemo(()=>{const Y=e6({cellId:n,showPlaceholder:e,enableAI:L,cellActions:{...E,afterToggleMarkdown:R,onRun:A,deleteCell:T,saveNotebook:C,createManyBelow:ee=>{for(const oe of[...ee].reverse())E.createNewCell({code:oe,before:!1,cellId:n,skipIfCodeExists:!0})},splitCell:N,toggleHideCode:M,aiCellCompletion:()=>{let ee=!1;return y(oe=>(oe==null?void 0:oe.cellId)===n?(ee=!0,null):{cellId:n}),ee}},completionConfig:d.completion,keymapConfig:d.keymap,lspConfig:d.language_servers,theme:t,hotkeys:new iS(d.keymap.overrides??{}),diagnosticsConfig:d.diagnostics,displayConfig:d.display});return Y.push(En.define(ee=>{const oe=ee.state.field(zc);return p(oe.type),{update(ie){const Z=ie.state.field(zc);p(Z.type)}}}),et.updateListener.of(ee=>{ee.selectionSet&&ee.state.selection.ranges.some(oe=>oe.from!==oe.to)&&_({focus:!1})})),Y},[n,d.keymap,d.completion,d.language_servers,d.display,d.diagnostics,L,t,e,E,N,M,T,A,y,R,p,_,C]),U=$c(),D=qe(()=>{if(U){const ee=Yu(n,0,r);B.push(ee.extension),r=ee.code}const Y=new et({state:gr.create({doc:r,extensions:B})});a(Y),U||Lr(Y,{language:Xm(Y.state).type})}),k=qe(()=>{if(zo(u.current!==null,"Editor view is not initialized"),U){const Y=Yu(n);B.push(Y.extension)}u.current.dispatch({effects:[Dt.reconfigure.of([B]),ZV(u.current,{completionConfig:d.completion,hotkeysProvider:new iS(d.keymap.overrides??{}),lspConfig:{...d.language_servers,diagnostics:d.diagnostics}})]})}),$=qe(()=>{if(zo(i,"Editor view is not initialized"),U){const ee=Yu(n,0,r);B.push(ee.extension),r=ee.code}const Y=new et({state:gr.fromJSON(i,{doc:r,extensions:B},{history:QV})});U||Lr(Y,{language:Xm(Y.state).type}),a(Y),E.clearSerializedEditorState({cellId:n})});O.useEffect(()=>{i===null?u.current===null?D():k():$(),u.current!==null&&h&&h.current!==null&&h.current.replaceChildren(u.current.dom)},[D,k,$,u,h,i,B]),O.useEffect(()=>{const Y=u.current;return()=>{Y==null||Y.destroy()}},[u]);const I=function(Y){const ee=K.c(3),oe=Ot(Ii);let ie;ee[0]!==Y||ee[1]!==oe?(ie={onKeyDown:Q=>{Q.key==="Escape"&&(oe(!1),rS(Y)),Q.continuePropagation()}},ee[0]=Y,ee[1]=oe,ee[2]=ie):ie=ee[2];const{keyboardProps:Z}=oS(ie);return Z}(n),W=f&&!j||f&&j&&!m;let G="";return j&&f&&m?G="h-0 overflow-hidden":f&&(G="opacity-20 h-8 [&>div.cm-editor]:h-full [&>div.cm-editor]:overflow-hidden"),c.jsx($M,{enabled:(x==null?void 0:x.cellId)===n,initialPrompt:x==null?void 0:x.initialPrompt,currentCode:((q=u.current)==null?void 0:q.state.doc.toString())??r,currentLanguageAdapter:g,declineChange:qe(()=>{var Y;y(null),(Y=u.current)==null||Y.focus()}),onChange:qe(Y=>{var ee;(ee=u.current)==null||ee.dispatch({changes:{from:0,to:u.current.state.doc.length,insert:Y}})}),acceptChange:qe(Y=>{var ee,oe;(ee=u.current)==null||ee.dispatch({changes:{from:0,to:u.current.state.doc.length,insert:Y}}),(oe=u.current)==null||oe.focus(),y(null)}),children:c.jsxs("div",{className:"relative w-full",...I,children:[W&&c.jsx(aS,{tooltip:"Edit code",className:"absolute inset-0 z-10",onClick:_}),c.jsx(Oy,{className:G,editorView:u.current,ref:h}),!f&&b&&c.jsx("div",{className:"absolute top-1 right-5",children:c.jsx(GM,{code:r,editorView:u.current,currentLanguageAdapter:g,onAfterToggle:R})})]})})},Oy=X.forwardRef((t,e)=>{const n=K.c(10),{className:o,editorView:r}=t,s=O.useRef(null);let i,a,l,d,u;return n[0]!==r?(i=()=>{r!==null&&s.current!==null&&s.current.children.length===0&&s.current.append(r.dom)},a=[r,s],n[0]=r,n[1]=i,n[2]=a):(i=n[1],a=n[2]),O.useEffect(i,a),n[3]!==o?(l=Ne("cm mathjax_ignore",o),n[3]=o,n[4]=l):l=n[4],n[5]!==e?(d=h=>{e?kl(e,s)(h):kl(s)(h)},n[5]=e,n[6]=d):d=n[6],n[7]!==l||n[8]!==d?(u=c.jsx("div",{className:l,ref:d,"data-testid":"cell-editor"}),n[7]=l,n[8]=d,n[9]=u):u=n[9],u});Oy.displayName="CellCodeMirrorEditor";const sh=$c()?function(t){const e=n=>{const o=K.c(5),r=Le(hn),[s,i]=Qt(is);if(r.state===$t.CONNECTING||s===void 0){let l,d;return o[0]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("span",{children:"Waiting for real-time collaboration connection..."}),o[0]=l):l=o[0],o[1]!==i?(d=c.jsx("div",{className:"flex h-full w-full items-baseline p-4",children:c.jsxs(Gc,{milliseconds:1e3,fallback:null,children:[l,c.jsx(Ae,{variant:"link",onClick:()=>{i("disabled")},children:"Turn off real-time collaboration"})]})}),o[1]=i,o[2]=d):d=o[2],d}let a;return o[3]!==n?(a=c.jsx(t,{...n}),o[3]=n,o[4]=a):a=o[4],a};return e.displayName=`WithWaitUntilConnected(${t.displayName})`,e}(O.memo(My)):O.memo(My),YM=t=>{const e=K.c(10);let n,o,r,s;return e[0]!==t.left?(n=c.jsx("div",{className:"flex-1 flex item-center gap-2",children:t.left}),e[0]=t.left,e[1]=n):n=e[1],e[2]!==t.center?(o=c.jsx("div",{className:"flex-1 flex item-center gap-2 justify-center",children:t.center}),e[2]=t.center,e[3]=o):o=e[3],e[4]!==t.right?(r=c.jsx("div",{className:"flex-1 flex item-center gap-2 justify-end",children:t.right}),e[4]=t.right,e[5]=r):r=e[5],e[6]!==n||e[7]!==o||e[8]!==r?(s=c.jsxs("div",{className:"flex items-center gap-2 w-full px-3",children:[n,o,r]}),e[6]=n,e[7]=o,e[8]=r,e[9]=s):s=e[9],s},JM=t=>{const e=K.c(8);if(!t.canCollapse&&!t.isCollapsed)return null;const n=t.isCollapsed?"Expand":"Collapse";let o,r,s;return e[0]!==t.isCollapsed?(o=c.jsx("span",{children:c.jsx(KM,{isCollapsed:t.isCollapsed})}),e[0]=t.isCollapsed,e[1]=o):o=e[1],e[2]!==n||e[3]!==o?(r=c.jsx(Te,{content:n,children:o}),e[2]=n,e[3]=o,e[4]=r):r=e[4],e[5]!==t.onClick||e[6]!==r?(s=c.jsx(Ae,{variant:"text",size:"icon",onClick:t.onClick,children:r}),e[5]=t.onClick,e[6]=r,e[7]=s):s=e[7],s},KM=t=>{const e=K.c(2),{isCollapsed:n}=t;let o;return e[0]!==n?(o=n?c.jsx(ta,{className:"w-5 h-5 flex-shrink-0"}):c.jsx(dr,{className:"w-5 h-5 flex-shrink-0"}),e[0]=n,e[1]=o):o=e[1],o},Dy=O.memo(t=>{const e=K.c(24),{onClick:n,count:o,cellId:r}=t,s=Ac();let i;e[0]!==r||e[1]!==s?(i=e$(s,r),e[0]=r,e[1]=s,e[2]=i):i=e[2];const a=i;let l,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=Ne("flex items-center justify-between w-[calc(100%-2rem)] h-9 bg-muted rounded-b mx-4 opacity-80 hover:opacity-100 cursor-pointer"),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(t$,{className:"w-4 h-4 flex-shrink-0"}),e[4]=d):d=e[4];const u=o===1?"cell":"cells";let h,f,m,_,g,p,b;return e[5]!==o||e[6]!==u?(h=c.jsxs(c.Fragment,{children:[d,c.jsxs("span",{className:"text-sm text-gray-500",children:[o," ",u," collapsed"]})]}),e[5]=o,e[6]=u,e[7]=h):h=e[7],e[8]!==a.errored?(f=a.errored&&c.jsx(Te,{content:"Has errors",delayDuration:100,children:c.jsx(qp,{className:"w-4 h-4 flex-shrink-0 text-destructive"})}),e[8]=a.errored,e[9]=f):f=e[9],e[10]!==a.stale?(m=a.stale&&c.jsx(Te,{content:"Has stale cells",delayDuration:100,children:c.jsx(lS,{className:"w-4 h-4 flex-shrink-0 text-[var(--yellow-11)]"})}),e[10]=a.stale,e[11]=m):m=e[11],e[12]!==a.runningOrQueued?(_=a.runningOrQueued&&c.jsx(Te,{content:"Running",delayDuration:100,children:c.jsx(Wc,{className:"w-4 h-4 flex-shrink-0 animate-spin"})}),e[12]=a.runningOrQueued,e[13]=_):_=e[13],e[14]!==f||e[15]!==m||e[16]!==_?(g=c.jsxs(c.Fragment,{children:[f,m,_]}),e[14]=f,e[15]=m,e[16]=_,e[17]=g):g=e[17],e[18]!==h||e[19]!==g?(p=c.jsx(YM,{center:h,right:g}),e[18]=h,e[19]=g,e[20]=p):p=e[20],e[21]!==n||e[22]!==p?(b=c.jsx("div",{onClick:n,className:l,children:p}),e[21]=n,e[22]=p,e[23]=b):b=e[23],b});Dy.displayName="CollapsedCellBanner";const Ry=t=>{const e=K.c(31),{status:n,connectionState:o,onClick:r}=t,s=n==="running"||n==="queued";let i,a,l,d,u,h,f,m,_,g,p,b,x,y;if(e[0]!==o||e[1]!==s||e[2]!==r||e[3]!==n){const v=po(o);let C;if(v){let S;e[14]!==o?(S=td(o),e[14]=o,e[15]=S):S=e[15],C=S}else C=n==="running"?"A cell can't be deleted when it's running":n==="queued"?"A cell can't be deleted when it's queued to run":"Delete";a=Te,_=C,g=!1,i=Ae,l="ghost",d="icon",u=r,h="delete-button",f=Qn.preventFocus,m=Ne("hover:bg-transparent text-destructive/60 hover:text-destructive",(v||s)&&"inactive-button"),e[0]=o,e[1]=s,e[2]=r,e[3]=n,e[4]=i,e[5]=a,e[6]=l,e[7]=d,e[8]=u,e[9]=h,e[10]=f,e[11]=m,e[12]=_,e[13]=g}else i=e[4],a=e[5],l=e[6],d=e[7],u=e[8],h=e[9],f=e[10],m=e[11],_=e[12],g=e[13];return e[16]===Symbol.for("react.memo_cache_sentinel")?(p={boxShadow:"none"},b=c.jsx(fc,{size:14}),e[16]=p,e[17]=b):(p=e[16],b=e[17]),e[18]!==i||e[19]!==l||e[20]!==d||e[21]!==u||e[22]!==h||e[23]!==f||e[24]!==m?(x=c.jsx(i,{variant:l,size:d,onClick:u,"data-testid":h,onMouseDown:f,className:m,style:p,children:b}),e[18]=i,e[19]=l,e[20]=d,e[21]=u,e[22]=h,e[23]=f,e[24]=m,e[25]=x):x=e[25],e[26]!==a||e[27]!==x||e[28]!==_||e[29]!==g?(y=c.jsx(a,{content:_,usePortal:g,children:x}),e[26]=a,e[27]=x,e[28]=_,e[29]=g,e[30]=y):y=e[30],y},XM=t=>{const e=K.c(27),{onClick:n,connectionState:o,needsRun:r,status:s,config:i,edited:a}=t,l=s==="disabled-transitively",d=s==="running"||s==="queued";let u,h;e[0]!==l||e[1]!==i.disabled||e[2]!==o||e[3]!==a||e[4]!==d||e[5]!==r?(u=po(o)||d||!i.disabled&&l&&!a,h=function({connectionState:p,needsRun:b,loading:x,inactive:y}){return po(p)?"disabled":b&&!x?"stale":x||y?"disabled":"green"}({connectionState:o,needsRun:r,loading:d,inactive:u}),e[0]=l,e[1]=i.disabled,e[2]=o,e[3]=a,e[4]=d,e[5]=r,e[6]=u,e[7]=h):(u=e[6],h=e[7]);const f=h;if(i.disabled){let p,b;return e[8]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(Pp,{}),e[8]=p):p=e[8],e[9]!==u||e[10]!==n||e[11]!==f?(b=c.jsx(si,{tooltip:"Add code to notebook",disabled:u,onClick:n,variant:f,"data-testid":"run-button",children:p}),e[9]=u,e[10]=n,e[11]=f,e[12]=b):b=e[12],b}if(!i.disabled&&l&&!a){let p,b;return e[13]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(Wr,{strokeWidth:1.2}),e[13]=p):p=e[13],e[14]!==u||e[15]!==n||e[16]!==f?(b=c.jsx(si,{disabled:u,tooltip:"This cell can't be run because it has a disabled ancestor",onClick:n,variant:f,"data-testid":"run-button",children:p}),e[14]=u,e[15]=n,e[16]=f,e[17]=b):b=e[17],b}let m,_,g;if(po(o)){let p;e[18]!==o?(p=td(o),e[18]=o,e[19]=p):p=e[19],m=p}else if(s==="queued")m="This cell is already queued to run";else if(s==="running")m="This cell is already running.";else{let p;e[20]===Symbol.for("react.memo_cache_sentinel")?(p=on("cell.run"),e[20]=p):p=e[20],m=p}return e[21]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(Wr,{strokeWidth:1.2}),e[21]=_):_=e[21],e[22]!==u||e[23]!==n||e[24]!==m||e[25]!==f?(g=c.jsx(si,{tooltip:m,disabled:u,onClick:n,variant:f,"data-testid":"run-button",children:_}),e[22]=u,e[23]=n,e[24]=m,e[25]=f,e[26]=g):g=e[26],g},Py=X.createContext(null),Ly=O.memo(()=>O.use(Py));Ly.displayName="DragHandle";const Fy=X.forwardRef((t,e)=>{const n=K.c(21);let o,r,s,i,a;n[0]!==t?({cellId:r,canMoveX:o,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==r?(i=r.toString(),n[4]=r,n[5]=i):i=n[5],n[6]!==i?(a={id:i},n[6]=i,n[7]=a):a=n[7];const{attributes:l,listeners:d,setNodeRef:u,transform:h,transition:f,isDragging:m}=R1(a);let _;n[8]!==h?(_=function(x){return!x||x.x===0&&x.y===0&&x.scaleX===1&&x.scaleY===1}(h)?null:h,n[8]=h,n[9]=_):_=n[9];const g=_,p=g==null?void 0:f;let b;return n[10]!==l||n[11]!==o||n[12]!==r||n[13]!==m||n[14]!==d||n[15]!==s||n[16]!==e||n[17]!==u||n[18]!==g||n[19]!==p?(b=c.jsx(zy,{ref:e,cellId:r,canMoveX:o,...s,attributes:l,listeners:d,setNodeRef:u,transform:g,transition:p,isDragging:m}),n[10]=l,n[11]=o,n[12]=r,n[13]=m,n[14]=d,n[15]=s,n[16]=e,n[17]=u,n[18]=g,n[19]=p,n[20]=b):b=n[20],b});Fy.displayName="SortableCell";const zy=X.forwardRef((t,e)=>{const n=K.c(37);let o,r,s,i,a,l,d,u,h,f;if(n[0]!==t){const{cellId:j,canMoveX:T,children:A,attributes:M,listeners:P,setNodeRef:R,transform:L,transition:B,isDragging:U,...D}=t;r=T,s=A,o=M,a=P,d=R,u=L,h=B,i=U,l=D,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i,n[5]=a,n[6]=l,n[7]=d,n[8]=u,n[9]=h}else o=n[1],r=n[2],s=n[3],i=n[4],a=n[5],l=n[6],d=n[7],u=n[8],h=n[9];n[10]!==r||n[11]!==u?(f=u?Dc.Transform.toString({x:r?u.x:0,y:u.y,scaleX:1,scaleY:1}):void 0,n[10]=r,n[11]=u,n[12]=f):f=n[12];const m=i?2:void 0;let _;n[13]!==f||n[14]!==m||n[15]!==h?(_={transform:f,transition:h,zIndex:m,position:"relative"},n[13]=f,n[14]=m,n[15]=h,n[16]=_):_=n[16];const g=_;let p,b;n[17]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(Rp,{strokeWidth:1,size:20}),n[17]=p):p=n[17],n[18]!==o||n[19]!==a?(b=c.jsx("div",{...o,...a,onMouseDown:Qn.preventFocus,"data-testid":"drag-button",className:"py-[1px] cursor-grab opacity-50 hover:opacity-100 hover-action hover:bg-muted rounded border border-transparent hover:border-border active:bg-accent",children:p}),n[18]=o,n[19]=a,n[20]=b):b=n[20];const x=b,y=!!u;let v;n[21]!==e||n[22]!==d?(v=j=>{kl(e,d)(j)},n[21]=e,n[22]=d,n[23]=v):v=n[23];const C=y&&"is-moving";let S,E,N;return n[24]!==l.className||n[25]!==C?(S=Ne(l.className,C,"outline-none rounded-lg"),n[24]=l.className,n[25]=C,n[26]=S):S=n[26],n[27]!==s||n[28]!==x?(E=c.jsx(Py.Provider,{value:x,children:s}),n[27]=s,n[28]=x,n[29]=E):E=n[29],n[30]!==i||n[31]!==l||n[32]!==g||n[33]!==v||n[34]!==S||n[35]!==E?(N=c.jsx("div",{tabIndex:-1,ref:v,...l,"data-is-dragging":i,className:S,style:g,children:E}),n[30]=i,n[31]=l,n[32]=g,n[33]=v,n[34]=S,n[35]=E,n[36]=N):N=n[36],N});function By(t,e){const n=K.c(9);let o;n[0]!==t.current||n[1]!==e?(o=l=>{t.current===null||t.current.contains(l.relatedTarget)||e.current===null||xm(e.current)},n[0]=t.current,n[1]=e,n[2]=o):o=n[2];const r=qe(o);let s;n[3]!==t.current||n[4]!==e?(s=l=>{if(t.current===document.activeElement&&e.current!==null&&ma(e.current.state)==="active"){for(const d of V4)if(l.key===d.key&&d.run){d.run(e.current),l.preventDefault(),l.stopPropagation();break}e.current.focus()}},n[3]=t.current,n[4]=e,n[5]=s):s=n[5];const i=qe(s);let a;return n[6]!==r||n[7]!==i?(a={closeCompletionHandler:r,resumeCompletionHandler:i},n[6]=r,n[7]=i,n[8]=a):a=n[8],a}zy.displayName="SortableCellInternal";const Uy=O.forwardRef((t,e)=>{const n=K.c(13),{id:o,output:r,interrupted:s,errored:i,stopped:a,name:l,outputStale:d,outputLoading:u}=t;let h;n[0]===Symbol.for("react.memo_cache_sentinel")?(h=Yc("marimo-cell","hover-actions-parent z-10",{published:!0}),n[0]=h):h=n[0];const f=h,m=uS(r==null?void 0:r.mimetype);if(i||s||a||m)return null;let _,g,p;return n[1]!==o||n[2]!==l?(_=gp(o,l),n[1]=o,n[2]=l,n[3]=_):_=n[3],n[4]!==o||n[5]!==r||n[6]!==u||n[7]!==d?(g=c.jsx(Jc,{allowExpand:!1,forceExpand:!0,output:r,className:"output-area",cellId:o,stale:d,loading:u}),n[4]=o,n[5]=r,n[6]=u,n[7]=d,n[8]=g):g=n[8],n[9]!==e||n[10]!==_||n[11]!==g?(p=c.jsx("div",{tabIndex:-1,ref:e,className:f,..._,children:g}),n[9]=e,n[10]=_,n[11]=g,n[12]=p):p=n[12],p});Uy.displayName="ReadonlyCellComponent";const ZM=({theme:t,showPlaceholder:e,id:n,code:o,output:r,consoleOutputs:s,status:i,runStartTimestamp:a,lastRunStartTimestamp:l,runElapsedTimeMs:d,edited:u,interrupted:h,errored:f,stopped:m,staleInputs:_,serializedEditorState:g,serialization:p,debuggerActive:b,connectionState:x,canDelete:y,actions:v,deleteCell:C,userConfig:S,outline:E,isCollapsed:N,collapseCount:j,config:T,canMoveX:A,name:M,editorView:P,setEditorView:R,outputStale:L})=>{const B=O.useRef(null),U=O.useRef(null),D=O.useRef(null),k=O.useRef(null),$=Ot(Zs),I=xd(n),[W,G]=O.useState(),q=T.disabled||i==="disabled-transitively",Y=hS({executionTime:d,status:i,errored:f,interrupted:h,stopped:m}),ee=u||h||_&&!q,oe=cS(i),ie=(i==="queued"||u||_)&&!h,Z=O.useCallback(()=>P.current,[P]),{closeCompletionHandler:Q,resumeCompletionHandler:me}=By(B,P),{isCellCodeShown:fe,isMarkdown:de,isMarkdownCodeHidden:ue,showHiddenCode:ce,showHiddenCodeIfMarkdown:ke}=function(J){const se=K.c(15),{cellId:ge,cellConfig:pe,languageAdapter:xe,editorView:Ve}=J,[Be,rt]=Qt(Ii);let le,Ie;se[0]!==ge?(Ie=s$(ge),se[0]=ge,se[1]=Ie):Ie=se[1],le=Ie;const Me=Le(le),$e=!pe.hide_code||Be||Me,Ke=xe==="markdown",Pe=Ke&&!$e;let Ye;se[2]!==Ve||se[3]!==$e||se[4]!==rt?(Ye=Ft=>{var Yt;if($e)return;const dn=(Ft==null?void 0:Ft.focus)??!0;rt(!0),dn&&((Yt=Ve.current)==null||Yt.focus())},se[2]=Ve,se[3]=$e,se[4]=rt,se[5]=Ye):Ye=se[5];const ot=qe(Ye);let Xe;se[6]!==Pe||se[7]!==ot?(Xe=()=>{Pe&&ot({focus:!0})},se[6]=Pe,se[7]=ot,se[8]=Xe):Xe=se[8];const ct=qe(Xe);let jt;return se[9]!==$e||se[10]!==Ke||se[11]!==Pe||se[12]!==ot||se[13]!==ct?(jt={isCellCodeShown:$e,isMarkdown:Ke,isMarkdownCodeHidden:Pe,showHiddenCode:ot,showHiddenCodeIfMarkdown:ct},se[9]=$e,se[10]=Ke,se[11]=Pe,se[12]=ot,se[13]=ct,se[14]=jt):jt=se[14],jt}({cellId:n,cellConfig:T,languageAdapter:W,editorView:P}),Se=Ty(n,{canMoveX:A,editorView:P,cellActionDropdownRef:U}),ae=r$(E),Ce=!dS(r),_e=s.length>0,Ee=S.display.cell_output,ze=Ce&&Ee==="above",Oe=Ce&&Ee==="below",[He,Fe]=O.useState(!1),[it,Qe]=O.useState(!1);(function(J){const{ref:se,box:ge="content-box",skip:pe}=J,xe=O.useRef({...n6}),Ve=O.useRef(void 0);Ve.current=J.onResize,O.useEffect(()=>{if(!se.current||pe||typeof window>"u"||!("ResizeObserver"in window))return;const Be=new ResizeObserver(([rt])=>{const le=ge==="border-box"?"borderBoxSize":ge==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",Ie=Z_(rt,le,"inlineSize"),Me=Z_(rt,le,"blockSize");if(xe.current.width!==Ie||xe.current.height!==Me){const $e={width:Ie,height:Me};xe.current.width=Ie,xe.current.height=Me,Ve.current&&Ve.current($e)}});return Be.observe(se.current,{box:ge}),()=>{Be.disconnect()}},[ge,se,pe])})({ref:k,skip:!de,onResize:J=>{const se=J.height&&J.height<68,ge=ue&&(se||Ee==="below");Fe(ge),ae&&ge?Qe(!0):it&&Qe(!1)}});const tt=J=>c.jsx(aS,{tooltip:"Edit markdown",className:Ne("z-20 relative",J),onClick:ce}),ne=Ce&&c.jsxs("div",{className:"relative",onDoubleClick:ke,children:[c.jsx("div",{className:"absolute top-5 -left-8 z-10 print:hidden",children:c.jsx(JM,{isCollapsed:N,onClick:()=>{N?v.expandCell({cellId:n}):v.collapseCell({cellId:n})},canCollapse:ae})}),ue&&Oe&&tt("top-3"),c.jsx(Jc,{allowExpand:!0,forceExpand:ue,output:r,className:"output-area",cellId:n,stale:L,loading:oe}),ue&&ze&&tt("bottom-3")]}),ve=Yc("marimo-cell","hover-actions-parent z-10",{interactive:!0,"needs-run":ee,"has-error":f,stopped:m,disabled:T.disabled,stale:i==="disabled-transitively",borderless:ue&&Ce&&!Se["data-selected"]}),je=qe(J=>{$({cellId:n,initialPrompt:J.prompt})}),Re=!(!p||p.toLowerCase()!=="valid");return c.jsx(tp,{children:c.jsx(D0,{cellId:n,config:T,status:i,getEditorView:Z,hasOutput:Ce,hasConsoleOutput:_e,name:M,children:c.jsxs(Fy,{tabIndex:-1,ref:B,"data-status":i,onBlur:Q,onKeyDown:me,cellId:n,canMoveX:A,title:T.disabled?"This cell is disabled":i==="disabled-transitively"?"This cell has a disabled ancestor":void 0,children:[c.jsxs("div",{tabIndex:-1,...Se,className:Ne(ve,Se.className,"focus:ring-1 focus:ring-[var(--blue-7)] focus:ring-offset-0"),ref:k,...gp(n,M),children:[Ee==="above"&&ne,c.jsxs("div",{className:Ne("tray"),"data-hidden":ue,children:[c.jsx("div",{className:"absolute right-2 -top-4 z-10",children:c.jsx($y,{edited:u,connectionState:x,status:i,cellConfig:T,needsRun:ee,hasOutput:Ce,hasConsoleOutput:_e,cellActionDropdownRef:U,cellId:n,name:M,getEditorView:Z,onRun:I})}),c.jsx(QM,{cellId:n,className:Ne(ue&&ze&&"-top-7",ue&&Oe&&"-bottom-8",ue&&it&&"-left-[3.8rem]"),connectionState:x,actions:v}),c.jsx(sh,{theme:t,showPlaceholder:e,id:n,code:o,config:T,status:i,serializedEditorState:g,runCell:I,setEditorView:R,userConfig:S,editorViewRef:P,editorViewParentRef:D,hidden:!fe,hasOutput:Ce,showHiddenCode:ce,languageAdapter:W,setLanguageAdapter:G}),c.jsx(Vy,{className:Ne(ue&&Ee==="below"&&"top-14"),edited:u,status:i,isCellStatusInline:He,uninstantiated:Y,disabled:T.disabled,runElapsedTimeMs:d,runStartTimestamp:a,lastRunStartTimestamp:l,staleInputs:_,interrupted:h}),c.jsx("div",{className:"shoulder-bottom hover-action",children:y&&fe&&c.jsx(Ry,{connectionState:x,status:i,onClick:()=>{oe||po(x)||C({cellId:n})}})})]}),Ee==="below"&&ne,p&&c.jsxs("a",{href:"https://links.marimo.app/reusable-definitions",target:"_blank",className:"hover:underline py-1 px-2 flex items-center justify-end gap-2 last:rounded-b",rel:"noopener",children:[Re&&c.jsx("span",{className:"text-muted-foreground text-xs font-bold",children:"reusable"}),c.jsx(Te,{content:c.jsx("span",{className:"max-w-16 text-xs",children:Re?"This function or class can be imported into other Python notebooks or modules.":c.jsxs(c.Fragment,{children:["This definition can't be reused in other Python modules:",c.jsx("br",{}),c.jsx("br",{}),c.jsx("pre",{children:p}),c.jsx("br",{}),"Click this icon to learn more."]})}),children:Re&&c.jsx(sc,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})||c.jsx(np,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})})]}),c.jsx(_p,{consoleOutputs:s,stale:ie,cellName:p?"_":M,onRefactorWithAI:je,onClear:()=>{v.clearCellConsoleOutput({cellId:n})},onSubmitDebugger:(J,se)=>{v.setStdinResponse({cellId:n,response:J,outputIndex:se}),fS({text:J})},cellId:n,debuggerActive:b})]}),N&&c.jsx(Dy,{onClick:()=>v.expandCell({cellId:n}),count:j,cellId:n})]})})})},Vy=t=>{const e=K.c(19),{className:n,disabled:o,edited:r,interrupted:s,isCellStatusInline:i,lastRunStartTimestamp:a,runElapsedTimeMs:l,runStartTimestamp:d,staleInputs:u,status:h,uninstantiated:f}=t,m=o!==void 0&&o;let _;e[0]!==m||e[1]!==r||e[2]!==s||e[3]!==a||e[4]!==l||e[5]!==d||e[6]!==u||e[7]!==h||e[8]!==f?(_=c.jsx(t0,{status:h,staleInputs:u,interrupted:s,editing:!0,edited:r,disabled:m,elapsedTime:l,runStartTimestamp:d,uninstantiated:f,lastRunStartTimestamp:a}),e[0]=m,e[1]=r,e[2]=s,e[3]=a,e[4]=l,e[5]=d,e[6]=u,e[7]=h,e[8]=f,e[9]=_):_=e[9];const g=_;let p;e[10]!==n?(p=Ne("shoulder-right z-20",n),e[10]=n,e[11]=p):p=e[11];const b=!i&&g;let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=c.jsx(Ly,{}),e[12]=x):x=e[12];const y=i&&g;let v,C;return e[13]!==y?(v=c.jsxs("div",{className:"flex gap-2 items-end",children:[x,y]}),e[13]=y,e[14]=v):v=e[14],e[15]!==p||e[16]!==b||e[17]!==v?(C=c.jsxs("div",{className:p,children:[b,v]}),e[15]=p,e[16]=b,e[17]=v,e[18]=C):C=e[18],C},QM=t=>{const e=K.c(21),{className:n,connectionState:o,actions:r,cellId:s}=t;let i;e[0]!==r||e[1]!==s?(i=v=>{const C=v===void 0?{}:v;return r.createNewCell({cellId:s,before:!1,...C})},e[0]=r,e[1]=s,e[2]=i):i=e[2];const a=qe(i);let l;e[3]!==r||e[4]!==s?(l=v=>{const C=v===void 0?{}:v;return r.createNewCell({cellId:s,before:!0,...C})},e[3]=r,e[4]=s,e[5]=l):l=e[5];const d=qe(l),u=nd(o);let h,f;e[6]!==n?(h=Ne("absolute flex flex-col gap-[2px] justify-center h-full left-[-34px] z-20",n),e[6]=n,e[7]=h):h=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(f=on("cell.createAbove"),e[8]=f):f=e[8];const m=u?d:void 0;let _,g,p;e[9]!==o||e[10]!==m?(_=c.jsx(T0,{tooltipContent:f,connectionState:o,onClick:m}),e[9]=o,e[10]=m,e[11]=_):_=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("div",{className:"flex-1"}),e[12]=g):g=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(p=on("cell.createBelow"),e[13]=p):p=e[13];const b=u?a:void 0;let x,y;return e[14]!==o||e[15]!==b?(x=c.jsx(T0,{tooltipContent:p,connectionState:o,onClick:b}),e[14]=o,e[15]=b,e[16]=x):x=e[16],e[17]!==h||e[18]!==_||e[19]!==x?(y=c.jsxs("div",{className:h,children:[_,g,x]}),e[17]=h,e[18]=_,e[19]=x,e[20]=y):y=e[20],y},$y=t=>{const e=K.c(27),{edited:n,connectionState:o,status:r,cellConfig:s,needsRun:i,hasOutput:a,hasConsoleOutput:l,onRun:d,cellActionDropdownRef:u,cellId:h,getEditorView:f,name:m,includeCellActions:_}=t,g=_===void 0||_,p=nd(o),b=!i&&"hover-action";let x;e[0]!==b?(x=Ne(b),e[0]=b,e[1]=x):x=e[1];const y=p?d:Hn.NOOP;let v,C,S,E;return e[2]!==s||e[3]!==o||e[4]!==n||e[5]!==i||e[6]!==r||e[7]!==y?(v=c.jsx(XM,{edited:n,onClick:y,connectionState:o,status:r,config:s,needsRun:i}),e[2]=s,e[3]=o,e[4]=n,e[5]=i,e[6]=r,e[7]=y,e[8]=v):v=e[8],e[9]!==o||e[10]!==r?(C=c.jsx(jE,{status:r,connectionState:o}),e[9]=o,e[10]=r,e[11]=C):C=e[11],e[12]!==u||e[13]!==s||e[14]!==h||e[15]!==f||e[16]!==l||e[17]!==a||e[18]!==g||e[19]!==m||e[20]!==r?(S=g&&c.jsx(M0,{ref:u,cellId:h,status:r,getEditorView:f,name:m,config:s,hasOutput:a,hasConsoleOutput:l,children:c.jsx(si,{variant:"green",tooltip:null,"data-testid":"cell-actions-button",children:c.jsx(pp,{strokeWidth:1.5})})}),e[12]=u,e[13]=s,e[14]=h,e[15]=f,e[16]=l,e[17]=a,e[18]=g,e[19]=m,e[20]=r,e[21]=S):S=e[21],e[22]!==x||e[23]!==v||e[24]!==C||e[25]!==S?(E=c.jsxs(NE,{className:x,children:[v,C,S]}),e[22]=x,e[23]=v,e[24]=C,e[25]=S,e[26]=E):E=e[26],E},eO=({theme:t,showPlaceholder:e,id:n,code:o,output:r,consoleOutputs:s,status:i,runStartTimestamp:a,lastRunStartTimestamp:l,runElapsedTimeMs:d,edited:u,interrupted:h,errored:f,stopped:m,staleInputs:_,serializedEditorState:g,debuggerActive:p,connectionState:b,canDelete:x,actions:y,deleteCell:v,userConfig:C,config:S,canMoveX:E,name:N,editorView:j,setEditorView:T})=>{const A=O.useRef(null),M=O.useRef(null),P=O.useRef(null),R=Ot(Zs),L=xd(n),B=S.disabled||i==="disabled-transitively",U=hS({executionTime:d,status:i,errored:f,interrupted:h,stopped:m}),D=u||h||_&&!B,k=i==="running"||i==="queued",$=(i==="queued"||u||_)&&!h,I=O.useCallback(()=>j.current,[j]),{closeCompletionHandler:W,resumeCompletionHandler:G}=By(A,j),q=Ty(n,{canMoveX:E,editorView:j,cellActionDropdownRef:M}),Y=!dS(r),ee=s.length>0,oe=uS(r==null?void 0:r.mimetype),ie=Yc("marimo-cell","hover-actions-parent z-10 border shadow-sm","!border-[var(--blue-5)] !rounded-sm",{"needs-run":D,"has-error":f,stopped:m}),Z=qe(Q=>{R({cellId:n,initialPrompt:Q.prompt})});return c.jsx(tp,{children:c.jsx(D0,{cellId:n,config:S,status:i,getEditorView:I,hasOutput:Y,hasConsoleOutput:ee,name:N,children:c.jsxs("div",{"data-status":i,ref:A,...pm(q,{className:ie,onBlur:W,onKeyDown:G}),...gp(n,N),title:S.disabled?"This cell is disabled":i==="disabled-transitively"?"This cell has a disabled ancestor":void 0,"data-setup-cell":!0,children:[c.jsxs("div",{className:Ne("tray"),"data-hidden":!1,children:[c.jsx("div",{className:"absolute right-2 -top-4 z-10",children:c.jsx($y,{edited:u,connectionState:b,status:i,cellConfig:S,needsRun:D,hasOutput:Y,hasConsoleOutput:ee,cellActionDropdownRef:M,cellId:n,name:N,getEditorView:I,onRun:L,includeCellActions:!1})}),c.jsx(sh,{theme:t,showPlaceholder:e,id:n,code:o,config:S,status:i,serializedEditorState:g,runCell:L,setEditorView:T,userConfig:C,editorViewRef:j,editorViewParentRef:P,hidden:!1,hasOutput:Y,showHiddenCode:Hn.NOOP,languageAdapter:"python",setLanguageAdapter:Hn.NOOP,showLanguageToggles:!1}),c.jsx(Vy,{edited:u,status:i,isCellStatusInline:!1,uninstantiated:U,disabled:S.disabled,runElapsedTimeMs:d,runStartTimestamp:a,lastRunStartTimestamp:l,staleInputs:_,interrupted:h}),c.jsx("div",{className:"shoulder-bottom hover-action",children:x&&c.jsx(Ry,{connectionState:b,status:i,onClick:()=>{k||po(b)||v({cellId:n})}})})]}),c.jsxs("div",{className:"py-1 px-2 flex justify-end gap-2 last:rounded-b",children:[c.jsx("span",{className:"text-muted-foreground text-xs font-bold",children:"setup cell"}),c.jsx(Te,{content:c.jsxs("span",{className:"max-w-16",children:["This ",c.jsx("b",{children:"setup cell"})," is guaranteed to run before all other cells. Include ",c.jsx("br",{}),"initialization or imports and constants required by top-level functions."]}),children:c.jsx(np,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})})]}),oe&&c.jsx(Jc,{allowExpand:!0,forceExpand:!0,output:r,className:"output-area",cellId:n,stale:!1,loading:k}),c.jsx(_p,{consoleOutputs:s,stale:$,cellName:"_",onRefactorWithAI:Z,onClear:()=>{y.clearCellConsoleOutput({cellId:n})},onSubmitDebugger:(Q,me)=>{y.setStdinResponse({cellId:n,response:Q,outputIndex:me}),fS({text:Q})},cellId:n,debuggerActive:p})]})})})},Hy=O.memo(O.forwardRef((t,e)=>{const{status:n,output:o,runStartTimestamp:r,interrupted:s,staleInputs:i,edited:a,id:l,mode:d}=t;vt.debug("Rendering Cell",l);const u=O.useRef(null);O.useImperativeHandle(e,()=>({get editorView(){return function(m){const _=m.current;if(_===null)throw new ReferenceError("Attempting to dereference null object.");return _}(u)},get editorViewOrNull(){return u.current}}),[u]);const h=n$({status:n,output:o,runStartTimestamp:r,interrupted:s,staleInputs:i},a),f=cS(n);return l===$o?c.jsx(eO,{...t,editorView:u,setEditorView:m=>{u.current=m},outputStale:h}):d==="edit"?c.jsx(o$,{atoms:[Ii],children:c.jsx(ZM,{...t,editorView:u,setEditorView:m=>{u.current=m},outputStale:h})}):c.jsx(Uy,{...t,outputStale:h,outputLoading:f})})),tO=(t,e)=>function(n,o){const r=/^(\d+)\.(\d+)\.(\d+)(?:-([\w.-]+))?(?:\+([\w.-]+))?$/,s=i=>{const a=i.match(r);if(!a)return null;const[,l,d,u,h]=a;return{major:Number.parseInt(l,10),minor:Number.parseInt(d,10),patch:Number.parseInt(u,10),preRelease:h||""}};try{const i=s(n),a=s(o);return i&&a?i.major!==a.major?i.major-a.major:i.minor!==a.minor?i.minor-a.minor:i.patch!==a.patch?i.patch-a.patch:i.preRelease===""&&a.preRelease!==""?1:i.preRelease!==""&&a.preRelease===""?-1:i.preRelease.localeCompare(a.preRelease):n.localeCompare(o,void 0,{numeric:!0,sensitivity:"base"})}catch{return n.localeCompare(o,void 0,{numeric:!0,sensitivity:"base"})}}(e,t),Wy=new class{constructor(t){this.ttl=void 0,this.cache=new Map,this.ttl=t.ttl}cleanupExpiredEntries(){const t=Date.now();for(const[e,n]of this.cache.entries())t-n.timestamp>this.ttl&&this.cache.delete(e)}get(t){this.cleanupExpiredEntries();const e=this.cache.get(t);if(e){if(!(Date.now()-e.timestamp>this.ttl))return e.data;this.cache.delete(t)}}set(t,e){this.cache.set(t,{data:e,timestamp:Date.now()})}clear(){this.cache.clear()}}({ttl:3e5}),nO=xt({info:xt({provides_extra:ht().array().nullable()}),releases:i$(ht(),a$())});function qy(t){const e=K.c(5);let n;e[0]!==t?(n=function(i){return i.replaceAll(/\[.*]/g,"").trim()}(t),e[0]=t,e[1]=n):n=e[1];const o=n;let r,s;return e[2]!==o?(r=async()=>{const i=Wy.get(o);if(i)return i;const a=await fetch(`https://pypi.org/pypi/${o}/json`,{method:"GET"});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=nO.transform(oO).parse(await a.json());return Wy.set(o,l),l},s=[o],e[2]=o,e[3]=r,e[4]=s):(r=e[3],s=e[4]),Wn(r,s)}function oO(t){return{versions:Object.keys(t.releases).toSorted(tO),extras:t.info.provides_extra??[]}}function Gy(t){const e=t.match(/^([^[]+)(?:\[([^\]]+)])?$/);if(!e)return{name:t,extras:[]};const[,n,o]=e;return{name:n,extras:o?o.split(",").map(r=>r.trim()):[]}}const rO=()=>{const t=K.c(70),{packageAlert:e}=bW(),{clearPackageAlert:n}=xW(),[o]=zr();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const[s,i]=O.useState(r);let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a={},t[1]=a):a=t[1];const[l,d]=O.useState(a);if(e===null)return null;const u=o.package_management.manager!=="pixi";if(yW(e)){let h,f,m,_,g,p,b,x,y,v;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[c.jsx(fd,{className:"w-5 h-5 inline-block mr-2"}),"Missing packages"]}),t[2]=h):h=t[2],t[3]!==n||t[4]!==e.id?(f=()=>n(e.id),t[3]=n,t[4]=e.id,t[5]=f):f=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx(eo,{className:"w-5 h-5"}),t[6]=m):m=t[6],t[7]!==f?(_=c.jsxs("div",{className:"flex justify-between",children:[h,c.jsx(Ae,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:f,children:m})]}),t[7]=f,t[8]=_):_=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("p",{children:"The following packages were not found:"}),t[9]=g):g=t[9],t[10]!==s||t[11]!==u||t[12]!==e.packages||t[13]!==l){let C;t[15]!==s||t[16]!==u||t[17]!==l?(C=(S,E)=>{const N=Gy(S),j=l[S]||N.extras;return c.jsxs("li",{className:"flex items-center gap-2 font-mono text-sm",children:[c.jsx(Ys,{size:"1rem"}),c.jsx(lO,{packageName:N.name,selectedExtras:j,onExtrasChange:T=>d(A=>({...A,[S]:T}))}),u&&c.jsx(cO,{value:s[S]??"latest",onChange:T=>i(A=>({...A,[S]:T})),packageName:N.name})]},E)},t[15]=s,t[16]=u,t[17]=l,t[18]=C):C=t[18],p=e.packages.map(C),t[10]=s,t[11]=u,t[12]=e.packages,t[13]=l,t[14]=p}else p=t[14];return t[19]!==p?(b=c.jsxs("div",{children:[g,c.jsx("ul",{className:"list-disc ml-4 mt-1",children:p})]}),t[19]=p,t[20]=b):b=t[20],t[21]!==n||t[22]!==s||t[23]!==e.id||t[24]!==e.isolated||t[25]!==e.packages||t[26]!==l||t[27]!==o.package_management.manager?(x=c.jsx("div",{className:"ml-auto flex flex-row items-baseline",children:e.isolated?c.jsxs(c.Fragment,{children:[c.jsx(iO,{manager:o.package_management.manager,packages:e.packages.map(C=>{const S=Gy(C),E=l[C]||S.extras;return function(N,j){return j.length===0?N:`${N}[${j.join(",")}]`}(S.name,E)}),versions:s,clearPackageAlert:()=>n(e.id)}),!un()&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"px-2 text-sm",children:"with"})," ",c.jsx(aO,{})]})]}):c.jsxs("p",{children:["If you set up a"," ",c.jsx(Tm,{href:"https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments",children:"virtual environment"}),", marimo can install these packages for you."]})}),t[21]=n,t[22]=s,t[23]=e.id,t[24]=e.isolated,t[25]=e.packages,t[26]=l,t[27]=o.package_management.manager,t[28]=x):x=t[28],t[29]!==b||t[30]!==x?(y=c.jsxs("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:[b,x]}),t[29]=b,t[30]=x,t[31]=y):y=t[31],t[32]!==y||t[33]!==_?(v=c.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:c.jsxs(ba,{kind:"danger",className:"flex flex-col rounded py-3 px-5 animate-in slide-in-from-left",children:[_,y]})}),t[32]=y,t[33]=_,t[34]=v):v=t[34],v}if(wW(e)){let h;t[35]!==e.packages?(h=function(R){const L=new Set(Object.values(R)),B=L.has("queued")||L.has("installing")?"installing":L.has("failed")?"failed":"installed";return B==="installing"?{status:"installing",title:"Installing packages",titleIcon:c.jsx(Na,{className:"w-5 h-5 inline-block mr-2"}),description:"Installing packages:"}:B==="installed"?{status:"installed",title:"All packages installed!",titleIcon:c.jsx(Gp,{className:"w-5 h-5 inline-block mr-2"}),description:"Installed packages:"}:{status:"failed",title:"Some packages failed to install",titleIcon:c.jsx(fd,{className:"w-5 h-5 inline-block mr-2"}),description:"See terminal for error logs."}}(e.packages),t[35]=e.packages,t[36]=h):h=t[36];const{status:f,title:m,titleIcon:_,description:g}=h;f==="installed"&&setTimeout(()=>n(e.id),1e4);const p=f==="failed"?"danger":"info";let b,x,y,v,C;t[37]!==m||t[38]!==_?(b=c.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[_,m]}),t[37]=m,t[38]=_,t[39]=b):b=t[39],t[40]!==n||t[41]!==e.id?(x=()=>n(e.id),t[40]=n,t[41]=e.id,t[42]=x):x=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(eo,{className:"w-5 h-5"}),t[43]=y):y=t[43],t[44]!==x?(v=c.jsx(Ae,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:x,children:y}),t[44]=x,t[45]=v):v=t[45],t[46]!==b||t[47]!==v?(C=c.jsxs("div",{className:"flex justify-between",children:[b,v]}),t[46]=b,t[47]=v,t[48]=C):C=t[48];const S=f==="installed"&&"text-accent-foreground";let E,N,j,T,A,M,P;if(t[49]!==S?(E=Ne("flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",S),t[49]=S,t[50]=E):E=t[50],t[51]!==g?(N=c.jsx("p",{children:g}),t[51]=g,t[52]=N):N=t[52],t[53]!==e.packages||t[54]!==f){let R;t[56]!==f?(R=(L,B)=>{const[U,D]=L;return c.jsxs("li",{className:Ne("flex items-center gap-1 font-mono text-sm",D==="installing"&&"font-semibold",D==="failed"&&"text-destructive",D==="installed"&&"text-accent-foreground",D==="installed"&&f==="failed"&&"text-muted-foreground"),children:[c.jsx(sO,{status:D}),U]},B)},t[56]=f,t[57]=R):R=t[57],j=Object.entries(e.packages).map(R),t[53]=e.packages,t[54]=f,t[55]=j}else j=t[55];return t[58]!==j?(T=c.jsx("ul",{className:"list-disc ml-4 mt-1",children:j}),t[58]=j,t[59]=T):T=t[59],t[60]!==N||t[61]!==T?(A=c.jsxs("div",{children:[N,T]}),t[60]=N,t[61]=T,t[62]=A):A=t[62],t[63]!==E||t[64]!==A?(M=c.jsx("div",{className:E,children:A}),t[63]=E,t[64]=A,t[65]=M):M=t[65],t[66]!==M||t[67]!==p||t[68]!==C?(P=c.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:c.jsxs(ba,{kind:p,className:"flex flex-col rounded pt-3 pb-4 px-5",children:[C,M]})}),t[66]=M,t[67]=p,t[68]=C,t[69]=P):P=t[69],P}return wc(e),null},sO=t=>{const e=K.c(4),{status:n}=t;switch(n){case"queued":{let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(Ys,{size:"1rem"}),e[0]=o):o=e[0],o}case"installing":{let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(Na,{size:"1rem"}),e[1]=o):o=e[1],o}case"installed":{let o;return e[2]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(Cc,{size:"1rem"}),e[2]=o):o=e[2],o}case"failed":{let o;return e[3]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(eo,{size:"1rem"}),e[3]=o):o=e[3],o}default:return wc(n),null}},iO=t=>{const e=K.c(9),{manager:n,packages:o,versions:r,clearPackageAlert:s}=t;let i,a,l,d;return e[0]!==s||e[1]!==n||e[2]!==o||e[3]!==r?(i=async()=>{s();const u={...r};for(const h of o)u[h]=u[h]??"";await u$({manager:n,versions:u}).catch(dO)},e[0]=s,e[1]=n,e[2]=o,e[3]=r,e[4]=i):i=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(Na,{className:"w-4 h-4 mr-2"}),l=c.jsx("span",{className:"font-semibold",children:"Install"}),e[5]=a,e[6]=l):(a=e[5],l=e[6]),e[7]!==i?(d=c.jsxs(Ae,{variant:"outline","data-testid":"install-packages-button",size:"sm",onClick:i,children:[a,l]}),e[7]=i,e[8]=d):d=e[8],d},aO=()=>{const t=K.c(16),[e,n]=zr();let o,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=_4(l$),t[0]=o):o=t[0],t[1]!==e?(r={resolver:o,defaultValues:e},t[1]=e,t[2]=r):r=t[2];const s=b4(r);let i;t[3]!==n?(i=async f=>{await Br({config:f}).then(()=>{n(f)})},t[3]=n,t[4]=i):i=t[4];const a=i;let l,d,u,h;return t[5]!==s||t[6]!==a?(l=s.handleSubmit(a),t[5]=s,t[6]=a,t[7]=l):l=t[7],t[8]!==s.control?(d=c.jsx("div",{className:"flex flex-col gap-3",children:c.jsx(u4,{control:s.control,name:"package_management.manager",render:hO})}),t[8]=s.control,t[9]=d):d=t[9],t[10]!==l||t[11]!==d?(u=c.jsx("form",{onChange:l,className:"flex flex-col gap-5",children:d}),t[10]=l,t[11]=d,t[12]=u):u=t[12],t[13]!==s||t[14]!==u?(h=c.jsx(c$,{...s,children:u}),t[13]=s,t[14]=u,t[15]=h):h=t[15],h},lO=t=>{const e=K.c(14),{packageName:n,selectedExtras:o,onExtrasChange:r}=t,[s,i]=O.useState(!1),{isPending:a,error:l,data:d}=qy(n);let u;e[0]!==r||e[1]!==o?(u=(g,p)=>{r(p?[...o,g]:o.filter(b=>b!==g))},e[0]=r,e[1]=o,e[2]=u):u=e[2];const h=u,f=!a&&!l;let m,_;if(e[3]!==(d==null?void 0:d.extras)?(m=(d==null?void 0:d.extras)??[],e[3]=d==null?void 0:d.extras,e[4]=m):m=e[4],e[5]!==f||e[6]!==h||e[7]!==s||e[8]!==n||e[9]!==o||e[10]!==m){const g=m.filter(fO);let p;e[12]!==n?(p=c.jsx("span",{className:"shrink-0",children:n}),e[12]=n,e[13]=p):p=e[13],_=c.jsxs("div",{className:"flex items-center max-w-72",children:[p,o.length>0?c.jsxs("span",{className:"flex items-center min-w-0 flex-1",children:[c.jsx("span",{className:"shrink-0",children:"["}),c.jsxs(hr,{open:s&&f,onOpenChange:b=>{f&&i(b)},children:[c.jsx(fr,{asChild:!0,children:c.jsx("button",{className:"hover:bg-muted/50 rounded text-sm px-1 transition-colors border border-muted-foreground/30 hover:border-muted-foreground/60 min-w-0 flex-1 truncate text-left",title:`Selected extras: ${o.join(", ")}`,children:o.join(",")})}),c.jsxs(mr,{align:"start",className:"w-64 p-0 max-h-96 flex flex-col",children:[o.length>0&&c.jsx("div",{className:"p-2 bg-popover border-b border-border",children:c.jsx("div",{className:"flex flex-wrap gap-1 p-1 min-h-[24px]",children:o.map(b=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-1 py-0.5 text-sm font-mono border border-muted-foreground/30 hover:border-muted-foreground/60 rounded-sm cursor-pointer group transition-colors",onClick:()=>h(b,!1),children:[b,c.jsx(eo,{className:"w-3 h-3 opacity-60 group-hover:opacity-100"})]},b))})}),c.jsx("div",{className:"overflow-y-auto flex-1",children:g.map(b=>c.jsx(mS,{checked:o.includes(b),onCheckedChange:x=>{h(b,x)},className:"font-mono text-sm",onSelect:mO,children:b},b))})]})]}),c.jsx("span",{className:"shrink-0",children:"]"})]}):g.length>0?c.jsxs(hr,{open:s&&f,onOpenChange:b=>{f&&i(b)},children:[c.jsx(fr,{asChild:!0,children:c.jsx("button",{disabled:!f,className:Ne("hover:bg-muted/50 rounded text-sm ml-2 transition-colors border border-muted-foreground/30 hover:border-muted-foreground/60 h-5 w-5 flex items-center justify-center p-0",!f&&"opacity-50 cursor-not-allowed"),title:f?"Add extras":"Loading extras...",children:c.jsx(br,{className:"w-3 h-3 flex-shrink-0"})})}),c.jsxs(mr,{align:"start",className:"w-64 p-0 max-h-96 flex flex-col",children:[c.jsx("div",{className:"p-2 bg-popover border-b border-border",children:c.jsx("span",{className:"text-muted-foreground italic text-sm",children:"Package extras"})}),c.jsx("div",{className:"overflow-y-auto flex-1",children:g.map(b=>c.jsx(mS,{checked:o.includes(b),onCheckedChange:x=>{h(b,x)},className:"font-mono text-sm",onSelect:pO,children:b},b))})]})]}):null]}),e[5]=f,e[6]=h,e[7]=s,e[8]=n,e[9]=o,e[10]=m,e[11]=_}else _=e[11];return _},cO=t=>{const e=K.c(16),{value:n,onChange:o,packageName:r}=t,{error:s,isPending:i,data:a}=qy(r);if(s){let h,f,m;return e[0]!==o?(h=_=>o(_.target.value),e[0]=o,e[1]=h):h=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx("option",{value:"latest",children:"latest"}),e[2]=f):f=e[2],e[3]!==h||e[4]!==n?(m=c.jsx(Te,{content:"Failed to fetch package versions",children:c.jsx(op,{value:n,onChange:h,disabled:!0,className:"inline-flex ml-2 w-24 text-ellipsis",children:f})}),e[3]=h,e[4]=n,e[5]=m):m=e[5],m}let l,d,u;return e[6]!==o?(l=h=>o(h.target.value),e[6]=o,e[7]=l):l=e[7],e[8]!==i||e[9]!==a?(d=i?c.jsx("option",{value:"latest",children:"latest"}):["latest",...a.versions.slice(0,100)].map(gO),e[8]=i,e[9]=a,e[10]=d):d=e[10],e[11]!==i||e[12]!==l||e[13]!==d||e[14]!==n?(u=c.jsx(op,{value:n,onChange:l,disabled:i,className:"inline-flex ml-2 w-24 text-ellipsis",children:d}),e[11]=i,e[12]=l,e[13]=d,e[14]=n,e[15]=u):u=e[15],u};function dO(t){vt.error(t)}function uO(t){return c.jsx("option",{value:t,children:t},t)}function hO(t){const{field:e}=t;return c.jsxs(h4,{children:[c.jsx(f4,{children:c.jsx(op,{"data-testid":"install-package-manager-select",onChange:n=>e.onChange(n.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:d$.map(uO)})}),c.jsx(g4,{})]})}function fO(t){return!/^(dev|test|testing)$/i.test(t)}function mO(t){return t.preventDefault()}function pO(t){return t.preventDefault()}function gO(t){return c.jsx("option",{value:t,children:t},t)}const _O=t=>{let{transform:e}=t;return{...e,x:0}},bO={threshold:{x:0,y:.1}},xO=X.memo(t=>{const e=K.c(23),{children:n,multiColumn:o}=t,{dropCellOverCell:r,dropCellOverColumn:s,moveColumn:i,compactColumns:a}=bt(),[l,d]=O.useState(null),[u,h]=O.useState(null),[f]=a4();let m;e:{if(f.width==="columns"){m=rp.EMPTY;break e}let R;e[0]===Symbol.for("react.memo_cache_sentinel")?(R=[_O],e[0]=R):R=e[0],m=R}const _=m;let g,p;e[1]===Symbol.for("react.memo_cache_sentinel")?(g={activationConstraint:{distance:8}},e[1]=g):g=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(p={coordinateGetter:SE},e[2]=p):p=e[2];const b=function(){for(var R=arguments.length,L=new Array(R),B=0;B<R;B++)L[B]=arguments[B];return O.useMemo(()=>[...L].filter(U=>U!=null),[...L])}(r1(Gd,g),r1(Wd,p));let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=R=>{d(R.active.id);const L=Nn();h(L.cellIds)},e[3]=x):x=e[3];const y=qe(x);let v;e[4]!==u?(v=()=>{d(null),h(null)},e[4]=u,e[5]=v):v=e[5];const C=qe(v);let S;e[6]!==l?(S=R=>{const L=R.droppableContainers.filter(yO);if(l&&us(l))return Bd({...R,droppableContainers:L});const B=(I=>{let{droppableContainers:W,droppableRects:G,pointerCoordinates:q}=I;if(!q)return[];const Y=[];for(const ee of W){const{id:oe}=ee,ie=G.get(oe);if(ie&&Vj(q,ie)){const Z=Fd(ie).reduce((me,fe)=>me+Pd(q,fe),0),Q=Number((Z/4).toFixed(4));Y.push({id:oe,data:{droppableContainer:ee,value:Q}})}}return Y.sort(Ld)})({...R,droppableContainers:L}),U=zd(B.length>0?B:i1({...R,droppableContainers:L}),"id");if(!U)return[];zo(us(U),`Expected column id. Got: ${U}`);const D=Nn().cellIds.get(U);if(zo(D,`Expected column. Got: ${U}`),D&&D.topLevelIds.length===0)return[{id:U}];const k=new Set(D.topLevelIds),$=Bd({...R,droppableContainers:R.droppableContainers.filter(I=>I.id!==U&&k.has(I.id))});if($.length>0){const I=$[0].id;return zo(ih(I),`Expected cell id. Got: ${I}`),[{id:I}]}return[]},e[6]=l,e[7]=S):S=e[7];const E=S;let N;e[8]!==r||e[9]!==s||e[10]!==i?(N=R=>{const{active:L,over:B}=R,U=B==null?void 0:B.id;if(U!=null&&L.id!==U){if(ih(L.id)){if(us(U))return void s({cellId:L.id,columnId:U});if(ih(U))return void r({cellId:L.id,overCellId:U})}us(L.id)&&us(U)&&i({column:L.id,overColumn:U})}},e[8]=r,e[9]=s,e[10]=i,e[11]=N):N=e[11];const j=qe(N);let T;e[12]!==a?(T=R=>{const{active:L,over:B}=R;B!==null&&L.id!==B.id&&a()},e[12]=a,e[13]=T):T=e[13];const A=qe(T),M=o?E:Bd;let P;return e[14]!==n||e[15]!==C||e[16]!==A||e[17]!==j||e[18]!==y||e[19]!==_||e[20]!==b||e[21]!==M?(P=c.jsx(uE,{autoScroll:bO,sensors:b,collisionDetection:M,modifiers:_,onDragEnd:A,onDragStart:y,onDragCancel:C,onDragOver:j,children:n}),e[14]=n,e[15]=C,e[16]=A,e[17]=j,e[18]=y,e[19]=_,e[20]=b,e[21]=M,e[22]=P):P=e[22],P});function ih(t){return typeof t=="string"&&!t.startsWith("tree_")}function us(t){return typeof t=="string"&&t.startsWith("tree_")}function yO(t){return us(t.id)}const wO=t=>{const e=K.c(13),{className:n,size:o,gap:r,durationMs:s}=t,i=o===void 0?8:o,a=r===void 0?"gap-1":r,l=s===void 0?1200:s,d=`${l}ms`;let u;e[0]!==d?(u={animationDuration:d},e[0]=d,e[1]=u):u=e[1];const h=u;let f,m,_,g;return e[2]!==n||e[3]!==a?(f=Yc("flex",a,n),e[2]=n,e[3]=a,e[4]=f):f=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(m=[0,1,2],e[5]=m):m=e[5],e[6]!==h||e[7]!==l||e[8]!==i?(_=m.map(p=>c.jsx(h$,{width:i,height:i,className:"fill-current text-current animate-ellipsis-dot",style:{...h,animationDelay:l/3*p+"ms"}},p)),e[6]=h,e[7]=l,e[8]=i,e[9]=_):_=e[9],e[10]!==f||e[11]!==_?(g=c.jsx("div",{className:f,"aria-label":"Loading",children:_}),e[10]=f,e[11]=_,e[12]=g):g=e[12],g},Yy=t=>{const e=K.c(11),{title:n,children:o,show:r,delayMs:s,kind:i}=t,a=s===void 0?2e3:s,l=i===void 0?"info":i;if(!r)return null;let d,u,h;e[0]!==n?(d=n&&c.jsx("div",{className:"flex justify-between",children:c.jsx("span",{className:"font-bold text-lg flex items-center mb-1",children:n})}),e[0]=n,e[1]=d):d=e[1],e[2]!==o?(u=c.jsx("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:c.jsx("div",{children:o})}),e[2]=o,e[3]=u):u=e[3],e[4]!==l||e[5]!==d||e[6]!==u?(h=c.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-1/2 transform -translate-x-1/2 z-[200] opacity-95",children:c.jsxs(ba,{kind:l,className:"flex flex-col rounded py-2 px-4 animate-in slide-in-from-top w-fit",children:[d,u]})}),e[4]=l,e[5]=d,e[6]=u,e[7]=h):h=e[7];const f=h;let m;return e[8]!==f||e[9]!==a?(m=c.jsx(Gc,{milliseconds:a,children:f}),e[8]=f,e[9]=a,e[10]=m):m=e[10],m},vO=()=>{const t=K.c(3),e=Le(f$),n=Le(m$);let o;return t[0]!==n||t[1]!==e?(o=e&&c.jsxs(c.Fragment,{children:[c.jsx(Gc,{milliseconds:1e3,children:c.jsx("div",{className:"absolute top-4 m-0 flex items-center min-h-[28px] left-1/2 transform -translate-x-1/2 z-[200] ",children:c.jsx(Te,{content:"Connecting to a marimo runtime",children:c.jsx("div",{className:"flex items-center",children:c.jsx(wO,{size:5,className:"text-yellow-500"})})})})}),c.jsx(Yy,{show:e,delayMs:5e3,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(An,{className:"h-4 w-4"}),c.jsx("p",{children:"Connecting to a marimo runtime ..."})]})})]})||n&&c.jsx(Yy,{show:n,kind:"danger",children:c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("p",{children:"Failed to connect."})})}),t[0]=n,t[1]=e,t[2]=o):o=t[2],o},Jy=X.forwardRef((t,e)=>{const n=K.c(62);let o,r,s,i,a,l;n[0]!==t?({columnId:i,canDelete:o,canMoveLeft:r,canMoveRight:s,...a}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i,n[5]=a):(o=n[1],r=n[2],s=n[3],i=n[4],a=n[5]),n[6]!==i?(l={id:i},n[6]=i,n[7]=l):l=n[7];const{attributes:d,listeners:u,setNodeRef:h,transform:f,transition:m,isDragging:_,isOver:g}=R1(l);let p;n[8]!==f?(p=f?Dc.Transform.toString({x:f.x,y:0,scaleX:1,scaleY:1}):void 0,n[8]=f,n[9]=p):p=n[9];const b=_?2:void 0;let x;n[10]!==p||n[11]!==b||n[12]!==m?(x={transform:p,transition:m,zIndex:b,position:"relative","--gutter-width":"50px"},n[10]=p,n[11]=b,n[12]=m,n[13]=x):x=n[13];const y=x,{deleteColumn:v,moveColumn:C,addColumn:S}=bt();let E;n[14]===Symbol.for("react.memo_cache_sentinel")?(E=Ne("h-full hover:bg-muted rounded-none"),n[14]=E):E=n[14];const N=E,j=SO;let T;n[15]!==i||n[16]!==C?(T=()=>C({column:i,overColumn:"_left_"}),n[15]=i,n[16]=C,n[17]=T):T=n[17];const A=!r;let M,P,R;n[18]===Symbol.for("react.memo_cache_sentinel")?(M=c.jsx(i4,{className:"size-4"}),n[18]=M):M=n[18],n[19]!==T||n[20]!==A?(P=c.jsx(Te,{content:"Move column left",side:"top",delayDuration:300,children:c.jsx(Ae,{variant:"text",size:"sm",className:N,onClick:T,disabled:A,children:M})}),n[19]=T,n[20]=A,n[21]=P):P=n[21],n[22]!==i||n[23]!==C?(R=()=>C({column:i,overColumn:"_right_"}),n[22]=i,n[23]=C,n[24]=R):R=n[24];const L=!s;let B,U,D,k,$,I,W,G;n[25]===Symbol.for("react.memo_cache_sentinel")?(B=c.jsx(ta,{className:"size-4"}),n[25]=B):B=n[25],n[26]!==R||n[27]!==L?(U=c.jsx(Te,{content:"Move column right",side:"top",delayDuration:300,children:c.jsx(Ae,{variant:"text",size:"sm",className:N,onClick:R,disabled:L,children:B})}),n[26]=R,n[27]=L,n[28]=U):U=n[28],n[29]!==d||n[30]!==u?(D=c.jsx("div",{className:"flex gap-2 h-full flex-grow active:bg-accent cursor-grab",...d,...u,"data-testid":"column-drag-button"}),n[29]=d,n[30]=u,n[31]=D):D=n[31],n[32]!==o||n[33]!==i||n[34]!==v?(k=o&&c.jsx(Te,{content:"Delete column",side:"top",delayDuration:300,children:c.jsx(Ae,{variant:"text",size:"sm",className:"opacity-0 group-hover:opacity-70 group-hover:hover:opacity-100 text-destructive h-full hover:bg-destructive/20 rounded-none",onClick:()=>v({columnId:i}),children:c.jsx(eo,{className:"size-4"})})}),n[32]=o,n[33]=i,n[34]=v,n[35]=k):k=n[35],n[36]!==S||n[37]!==i?($=()=>{S({columnId:i}),requestAnimationFrame(j)},n[36]=S,n[37]=i,n[38]=$):$=n[38],n[39]===Symbol.for("react.memo_cache_sentinel")?(I=c.jsx(br,{className:"size-4"}),n[39]=I):I=n[39],n[40]!==$?(W=c.jsx(Te,{content:"Add column",side:"top",delayDuration:300,children:c.jsx(Ae,{variant:"text",size:"sm",className:N,onClick:$,children:I})}),n[40]=$,n[41]=W):W=n[41],n[42]!==U||n[43]!==D||n[44]!==k||n[45]!==W||n[46]!==P?(G=c.jsxs("div",{className:"h-6 group flex items-center rounded-t-lg border hover:border-border border-[var(--slate-3)] overflow-hidden bg-[var(--slate-1)]",children:[P,U,D,k,W]}),n[42]=U,n[43]=D,n[44]=k,n[45]=W,n[46]=P,n[47]=G):G=n[47];const q=G;let Y;n[48]!==e||n[49]!==h?(Y=me=>{kl(e,h)(me)},n[48]=e,n[49]=h,n[50]=Y):Y=n[50];const ee=_?"":a.className,oe=_?"z-20":"z-1 hover:z-10 focus-within:z-10",ie=g&&"bg-accent/20";let Z,Q;return n[51]!==ee||n[52]!==oe||n[53]!==ie?(Z=Ne(ee,oe,ie),n[51]=ee,n[52]=oe,n[53]=ie,n[54]=Z):Z=n[54],n[55]!==q||n[56]!==_||n[57]!==a||n[58]!==y||n[59]!==Y||n[60]!==Z?(Q=c.jsxs("div",{tabIndex:-1,ref:Y,...a,style:y,"data-is-dragging":_,className:Z,children:[q,a.children]}),n[55]=q,n[56]=_,n[57]=a,n[58]=y,n[59]=Y,n[60]=Z,n[61]=Q):Q=n[61],Q});Jy.displayName="SortableColumn";const kO=O.memo(Jy);function SO(){const t=document.getElementById("App");t&&t.scrollTo({left:t.scrollLeft+1e3,behavior:"smooth"})}const{getColumnWidth:CO,saveColumnWidth:NO}=p$,Ky=O.memo(t=>{const e=K.c(20),n=O.useRef(null);if(t.width==="columns"){const s=t.canDelete,i=t.columnId,a=t.canMoveLeft,l=t.canMoveRight;let d,u,h,f;return e[0]!==t.index?(d=CO(t.index),e[0]=t.index,e[1]=d):d=e[1],e[2]!==t.index?(u=m=>{NO(t.index,m)},e[2]=t.index,e[3]=u):u=e[3],e[4]!==t.children||e[5]!==d||e[6]!==u?(h=c.jsx(jO,{startingWidth:d,onResize:u,children:t.children}),e[4]=t.children,e[5]=d,e[6]=u,e[7]=h):h=e[7],e[8]!==t.canDelete||e[9]!==t.canMoveLeft||e[10]!==t.canMoveRight||e[11]!==t.columnId||e[12]!==t.footer||e[13]!==h?(f=c.jsxs(kO,{tabIndex:-1,ref:n,canDelete:s,columnId:i,canMoveLeft:a,canMoveRight:l,className:"group/column",children:[h,t.footer]}),e[8]=t.canDelete,e[9]=t.canMoveLeft,e[10]=t.canMoveRight,e[11]=t.columnId,e[12]=t.footer,e[13]=h,e[14]=f):f=e[14],f}let o,r;return e[15]!==t.children?(o=c.jsx("div",{"data-testid":"cell-column",className:"flex flex-col gap-5",children:t.children}),e[15]=t.children,e[16]=o):o=e[16],e[17]!==t.footer||e[18]!==o?(r=c.jsxs(c.Fragment,{children:[o,t.footer]}),e[17]=t.footer,e[18]=o,e[19]=r):r=e[19],r});Ky.displayName="Column";const jO=t=>{const e=K.c(15),{startingWidth:n,onResize:o,children:r}=t;let s;e[0]!==o||e[1]!==n?(s={startingWidth:n,onResize:o},e[0]=o,e[1]=n,e[2]=s):s=e[2];const{resizableDivRef:i,handleRefs:a,style:l}=g$(s),d=EO;let u,h,f,m;return e[3]!==a.left?(u=d(a.left),e[3]=a.left,e[4]=u):u=e[4],e[5]!==r||e[6]!==i||e[7]!==l?(h=c.jsx("div",{ref:i,className:"flex flex-col gap-5 box-content min-h-[100px] px-11 py-6 min-w-[500px] z-1",style:l,children:r}),e[5]=r,e[6]=i,e[7]=l,e[8]=h):h=e[8],e[9]!==a.right?(f=d(a.right),e[9]=a.right,e[10]=f):f=e[10],e[11]!==u||e[12]!==h||e[13]!==f?(m=c.jsxs("div",{className:"flex flex-row",children:[u,h,f]}),e[11]=u,e[12]=h,e[13]=f,e[14]=m):m=e[14],m};function EO(t){return c.jsx("div",{ref:t,className:`w-[3px] cursor-col-resize transition-colors duration-200 z-[100]
          relative before:content-[''] before:absolute before:inset-y-0 before:-left-[3px]
          before:right-[-3px] before:w-[9px] before:z-[-1]
          hover/column:bg-[var(--slate-3)] dark:hover/column:bg-[var(--slate-5)]
          hover/column:hover:bg-primary/60 dark:hover/column:hover:bg-primary/60`})}const IO=t=>{const e=K.c(10),{width:n}=t,{banners:o}=vW(),{removeBanner:r}=kW();if(o.length===0)return null;const s=n==="columns"&&"sticky left-12 w-full max-w-[80vw]";let i,a,l;if(e[0]!==s?(i=Ne("flex flex-col gap-4 mb-5 print:hidden",s),e[0]=s,e[1]=i):i=e[1],e[2]!==o||e[3]!==r){let d;e[5]!==r?(d=u=>c.jsxs(ba,{kind:u.variant||"info",className:"flex flex-col rounded p-3",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[c.jsx(pS,{className:"w-5 h-5 inline-block mr-2"}),u.title]}),c.jsx(Ae,{"data-testid":"remove-banner-button",variant:"text",size:"icon",onClick:()=>r(u.id),children:c.jsx(eo,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("span",{children:sp({html:u.description})}),u.action==="restart"&&c.jsx(AO,{})]})]},u.id),e[5]=r,e[6]=d):d=e[6],a=o.map(d),e[2]=o,e[3]=r,e[4]=a}else a=e[4];return e[7]!==i||e[8]!==a?(l=c.jsx("div",{className:i,children:a}),e[7]=i,e[8]=a,e[9]=l):l=e[9],l},AO=()=>{const t=K.c(3),e=qg();let n,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsx(Zp,{className:"w-3 h-3 mr-2"}),t[0]=n):n=t[0],t[1]!==e?(o=c.jsxs(Ae,{"data-testid":"restart-session-button",variant:"link",size:"xs",onClick:e,children:[n,"Restart"]}),t[1]=e,t[2]=o):o=t[2],o},TO=zt(t=>{const e=t(cr);for(const n of e.cellIds.inOrderIds){const o=e.cellRuntime[n];if(o.status==="idle"&&o.consoleOutputs.some(r=>r.channel==="stdin"&&r.response===void 0))return!0}return!1}),MO=()=>{const t=K.c(3),e=OO;if(!Le(TO))return null;let n,o,r;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsx("div",{className:"flex justify-between",children:c.jsx("span",{className:"font-bold text-lg flex items-center mb-1",children:"Program waiting for input"})}),t[0]=n):n=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(U4,{className:"inline",children:"stdin"}),t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")){const s=c.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-1/2 transform -translate-x-1/2 z-[200] opacity-95",children:c.jsxs(ba,{kind:"info",className:"flex flex-col rounded py-2 px-4 animate-in slide-in-from-top w-fit",children:[n,c.jsx("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:c.jsx("div",{children:c.jsxs("p",{children:["The program is still running, but blocked on"," ",o,".",c.jsx(Ae,{variant:"link",className:"h-auto font-normal",onClick:e,children:"Jump to the cell"})]})})})]})});r=c.jsx(Gc,{milliseconds:2e3,children:s}),t[2]=r}else r=t[2];return r};function OO(){const t=document.querySelector("[data-stdin-blocking]");t?(t.scrollIntoView({behavior:"smooth",block:"center"}),requestAnimationFrame(()=>{t.focus()})):vt.error("No element with data-stdin-blocking found")}function DO(){const t=setTimeout(RO,100);return()=>clearTimeout(t)}function RO(){requestAnimationFrame(PO)}function PO(){const t=function(e){const n=e.match(/scrollTo=([^&]+)/),o=n==null?void 0:n[1];return o?decodeURIComponent(o.split("&")[0]):null}(window.location.hash);if(t)(function(e){var o,r;if(Zy)return;const n=document.querySelector(`[data-cell-name="${e}"]`);if(n){if(n.scrollIntoView({behavior:"smooth",block:"start"}),Zy=!0,n instanceof HTMLElement){n.focus();const{cellHandles:s}=Nn(),i=n.dataset.cellId;if(!i)return void vt.error(`Missing cellId for cell with name ${e}`);const a=(r=(o=s[i])==null?void 0:o.current)==null?void 0:r.editorView;a&&a.focus()}}else vt.warn(`Cannot focus cell with name ${e} because it was not found`),Xy()})(t);else try{Xy()}catch(e){const n=e;vt.warn("Error focusing first editor",n)}}function Xy(){var o,r;const{cellIds:t,cellData:e,cellHandles:n}=Nn();for(const s of t.iterateTopLevelIds){const i=n[s];if(!((o=e[s])==null?void 0:o.config.hide_code)&&((r=i==null?void 0:i.current)!=null&&r.editorView))return void i.current.editorView.focus()}}let Zy=!1;const LO=t=>{const e=K.c(8),n=Le(_$),o=t.appConfig.width==="columns";let r,s,i;return e[0]!==t?(r=c.jsx(FO,{...t}),e[0]=t,e[1]=r):r=e[1],e[2]!==n||e[3]!==r?(s=c.jsx(O1,{id:"column-container",items:n,strategy:gE,children:r}),e[2]=n,e[3]=r,e[4]=s):s=e[4],e[5]!==o||e[6]!==s?(i=c.jsx(xO,{multiColumn:o,children:s}),e[5]=o,e[6]=s,e[7]=i):i=e[7],i},FO=t=>{const e=K.c(52),{mode:n,userConfig:o,appConfig:r,connStatus:s}=t,i=Ac(),a=bt(),{theme:l}=xr(),{toggleSidebarPanel:d}=sa();gS(DO),Jt("global.focusTop",a.focusTopCell),Jt("global.focusBottom",a.focusBottomCell),Jt("global.toggleSidebar",d),Jt("global.foldCode",a.foldAll),Jt("global.unfoldCode",a.unfoldAll),Jt("global.formatAll",UO),Jt("cell.hideCode",Hn.NOOP),Jt("cell.format",Hn.NOOP);const u=vd(),h=a.scrollToTarget;let f,m,_,g,p,b,x,y,v,C,S,E,N,j,T,A;if(e[0]!==i.scrollKey||e[1]!==h?(f=()=>{i.scrollKey!==null&&h()},e[0]=i.scrollKey,e[1]=h,e[2]=f):f=e[2],e[3]!==i.cellIds||e[4]!==i.scrollKey||e[5]!==h?(m=[i.cellIds,i.scrollKey,h],e[3]=i.cellIds,e[4]=i.scrollKey,e[5]=h,e[6]=m):m=e[6],O.useEffect(f,m),e[7]!==a||e[8]!==r||e[9]!==s||e[10]!==n||e[11]!==i||e[12]!==u||e[13]!==l||e[14]!==o){const M=i.cellIds.getColumns();let P;e[26]!==i.cellIds?(P=i.cellIds.hasOnlyOneId(),e[26]=i.cellIds,e[27]=P):P=e[27];const R=P;let L;e[28]!==i.cellIds.inOrderIds?(L=i.cellIds.inOrderIds.includes($o),e[28]=i.cellIds.inOrderIds,e[29]=L):L=e[29];const B=L;_=SW,v="pb-[40vh]",C=!1,S=r,E="pr-4",e[30]===Symbol.for("react.memo_cache_sentinel")?(N=c.jsx(rO,{}),g=c.jsx(MO,{}),p=c.jsx(vO,{}),e[30]=g,e[31]=p,e[32]=N):(g=e[30],p=e[31],N=e[32]),e[33]!==r.width?(b=c.jsx(IO,{width:r.width}),e[33]=r.width,e[34]=b):b=e[34];const U=r.width==="columns"&&"grid grid-flow-col auto-cols-min gap-6";e[35]!==U?(x=Ne(U),e[35]=U,e[36]=x):x=e[36],y=M.map((D,k)=>c.jsx(zO,{column:D,index:k,columnsLength:M.length,appConfig:r,notebook:i,mode:n,userConfig:o,connStatus:s,actions:a,theme:l,hasOnlyOneCell:R,hasSetupCell:B,onDeleteCell:u},D.id)),e[7]=a,e[8]=r,e[9]=s,e[10]=n,e[11]=i,e[12]=u,e[13]=l,e[14]=o,e[15]=_,e[16]=g,e[17]=p,e[18]=b,e[19]=x,e[20]=y,e[21]=v,e[22]=C,e[23]=S,e[24]=E,e[25]=N}else _=e[15],g=e[16],p=e[17],b=e[18],x=e[19],y=e[20],v=e[21],C=e[22],S=e[23],E=e[24],N=e[25];return e[37]!==x||e[38]!==y?(j=c.jsx("div",{className:x,children:y}),e[37]=x,e[38]=y,e[39]=j):j=e[39],e[40]===Symbol.for("react.memo_cache_sentinel")?(T=c.jsx(CW,{}),e[40]=T):T=e[40],e[41]!==_||e[42]!==g||e[43]!==p||e[44]!==b||e[45]!==j||e[46]!==v||e[47]!==C||e[48]!==S||e[49]!==E||e[50]!==N?(A=c.jsxs(_,{className:v,invisible:C,appConfig:S,innerClassName:E,children:[N,g,p,b,j,T]}),e[41]=_,e[42]=g,e[43]=p,e[44]=b,e[45]=j,e[46]=v,e[47]=C,e[48]=S,e[49]=E,e[50]=N,e[51]=A):A=e[51],A},zO=t=>{const e=K.c(40),{column:n,index:o,columnsLength:r,appConfig:s,notebook:i,mode:a,userConfig:l,connStatus:d,actions:u,theme:h,hasOnlyOneCell:f,hasSetupCell:m,onDeleteCell:_}=t,g=d.state,p=n.id,b=o>0,x=o<r-1,y=s.width,v=r>1,C=n.id,S=s.width==="columns"&&"opacity-0 group-hover/column:opacity-100";let E,N;e[0]!==S?(E=Ne(S),e[0]=S,e[1]=E):E=e[1],e[2]!==n.id||e[3]!==E?(N=c.jsx(BO,{columnId:C,className:E}),e[2]=n.id,e[3]=E,e[4]=N):N=e[4];const j=`column-${o+1}`,T=n.topLevelIds;let A,M,P,R;return e[5]!==u||e[6]!==g||e[7]!==m||e[8]!==o||e[9]!==a||e[10]!==i||e[11]!==_||e[12]!==h||e[13]!==l?(A=o===0&&m&&c.jsx(Hy,{theme:h,showPlaceholder:!1,...i.cellData[$o],...i.cellRuntime[$o],...u,runElapsedTimeMs:i.cellRuntime[$o].runElapsedTimeMs??i.cellData[$o].lastExecutionTime,canDelete:!0,mode:a,connectionState:g,ref:i.cellHandles[$o],userConfig:l,isCollapsed:!1,collapseCount:0,canMoveX:!1,actions:u,deleteCell:_},$o),e[5]=u,e[6]=g,e[7]=m,e[8]=o,e[9]=a,e[10]=i,e[11]=_,e[12]=h,e[13]=l,e[14]=A):A=e[14],e[15]!==u||e[16]!==s.width||e[17]!==n||e[18]!==g||e[19]!==f||e[20]!==a||e[21]!==i||e[22]!==_||e[23]!==h||e[24]!==l?(M=n.topLevelIds.map(L=>{if(L===$o)return null;const B=i.cellData[L],U=i.cellRuntime[L];return c.jsx(Hy,{theme:h,showPlaceholder:f,...B,...U,runElapsedTimeMs:U.runElapsedTimeMs??B.lastExecutionTime,canDelete:!f,mode:a,connectionState:g,ref:i.cellHandles[L],userConfig:l,config:B.config,name:B.name,isCollapsed:n.isCollapsed(L),collapseCount:n.getCount(L),canMoveX:s.width==="columns",actions:u,deleteCell:_},B.id.toString())}),e[15]=u,e[16]=s.width,e[17]=n,e[18]=g,e[19]=f,e[20]=a,e[21]=i,e[22]=_,e[23]=h,e[24]=l,e[25]=M):M=e[25],e[26]!==n.topLevelIds||e[27]!==j||e[28]!==A||e[29]!==M?(P=c.jsxs(O1,{id:j,items:T,strategy:_E,children:[A,M]}),e[26]=n.topLevelIds,e[27]=j,e[28]=A,e[29]=M,e[30]=P):P=e[30],e[31]!==s.width||e[32]!==n.id||e[33]!==o||e[34]!==P||e[35]!==b||e[36]!==x||e[37]!==v||e[38]!==N?(R=c.jsx(Ky,{columnId:p,index:o,canMoveLeft:b,canMoveRight:x,width:y,canDelete:v,footer:N,children:P}),e[31]=s.width,e[32]=n.id,e[33]=o,e[34]=P,e[35]=b,e[36]=x,e[37]=v,e[38]=N,e[39]=R):R=e[39],R},BO=t=>{const e=K.c(17),{columnId:n,className:o}=t,{createNewCell:r}=bt(),[s,i]=b$(!1),a=Le(cc),l=Le(P4);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=Ne("mb-0 rounded-none sm:px-4 md:px-5 lg:px-8 tracking-wide no-wrap whitespace-nowrap","hover:bg-accent hover:text-accent-foreground font-semibold uppercase text-xs"),e[0]=d):d=e[0];const u=d;let h;e[1]!==a||e[2]!==n||e[3]!==r||e[4]!==s||e[5]!==i.toggle||e[6]!==l?(h=()=>s?c.jsx(x$,{onClose:i.toggle}):c.jsxs(c.Fragment,{children:[c.jsxs(Ae,{className:u,variant:"text",size:"sm",disabled:!l,onClick:()=>r({cellId:{type:"__end__",columnId:n},before:!1}),children:[c.jsx(tg,{className:"mr-2 size-4 flex-shrink-0"}),"Python"]}),c.jsxs(Ae,{className:u,variant:"text",size:"sm",disabled:!l,onClick:()=>{fo({autoInstantiate:!0,createNewCell:r}),r({cellId:{type:"__end__",columnId:n},before:!1,code:new ra().defaultCode,hideCode:!0})},children:[c.jsx(rg,{className:"mr-2 size-4 flex-shrink-0"}),"Markdown"]}),c.jsxs(Ae,{className:u,variant:"text",size:"sm",disabled:!l,onClick:()=>{fo({autoInstantiate:!0,createNewCell:r}),r({cellId:{type:"__end__",columnId:n},before:!1,code:new Vc().defaultCode})},children:[c.jsx(lr,{className:"mr-2 size-4 flex-shrink-0"}),"SQL"]}),c.jsx(Te,{content:a?null:c.jsx("span",{children:"Enable via settings under AI Assist"}),delayDuration:100,asChild:!1,children:c.jsxs(Ae,{className:u,variant:"text",size:"sm",disabled:!a||!l,onClick:i.toggle,children:[c.jsx(ea,{className:"mr-2 size-4 flex-shrink-0"}),"Generate with AI"]})})]}),e[1]=a,e[2]=n,e[3]=r,e[4]=s,e[5]=i.toggle,e[6]=l,e[7]=h):h=e[7];const f=h,m=!s&&"w-fit",_=s&&"opacity-100 w-full max-w-4xl shadow-lg shadow-[var(--blue-3)]";let g,p,b;return e[8]!==o||e[9]!==m||e[10]!==_?(g=Ne("shadow-sm border border-border rounded transition-all duration-200 overflow-hidden divide-x divide-border flex",m,_,o),e[8]=o,e[9]=m,e[10]=_,e[11]=g):g=e[11],e[12]!==f?(p=f(),e[12]=f,e[13]=p):p=e[13],e[14]!==g||e[15]!==p?(b=c.jsx("div",{className:"flex justify-center mt-4 pt-6 pb-32 group gap-4 w-full print:hidden",children:c.jsx("div",{className:g,children:p})}),e[14]=g,e[15]=p,e[16]=b):b=e[16],b};function UO(){D4()}const VO=y$(w$,400),$O=(t,e)=>{at.get(Os)||t.isEmpty()||e.isEmpty()||aa(t.inOrderIds,e.inOrderIds)||VO({cell_ids:t.inOrderIds})},Qy=t=>{const e=K.c(66),{userConfig:n,appConfig:o,hideControls:r}=t,s=r!==void 0&&r;v$(qc,$O);const{setCells:i,mergeAllColumns:a,collapseAllCells:l,expandAllCells:d}=bt(),u=Le(_m),h=Le(k$),f=Le(S$),m=Dm(),_=Ot(Td),g=u.mode==="edit",p=u.mode==="present",b=Le(C$);let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],e[0]=x):x=e[0],O.useEffect(WO,x);const y=n.runtime.auto_instantiate;let v,C,S;e[1]!==i||e[2]!==_?(v=(fe,de)=>{i(fe);const ue=fe.map(qO),ce=fe.map(GO),ke=fe.map(YO);_({names:ue,codes:ce,configs:ke,layout:de})},e[1]=i,e[2]=_,e[3]=v):v=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(C=Z4(),e[4]=C):C=e[4],e[5]!==v||e[6]!==n.runtime.auto_instantiate?(S={autoInstantiate:y,setCells:v,sessionId:C},e[5]=v,e[6]=n.runtime.auto_instantiate,e[7]=S):S=e[7];const{connection:E}=NW(S);let N,j;e[8]!==o.app_title||e[9]!==m?(N=()=>{document.title=o.app_title||jn.basename(m??"")||"Untitled Notebook"},j=[o.app_title,m],e[8]=o.app_title,e[9]=m,e[10]=N,e[11]=j):(N=e[10],j=e[11]),O.useEffect(N,j);const T=Oc(o.width);let A,M;e[12]!==o.width||e[13]!==a||e[14]!==T?(A=()=>{T==="columns"&&o.width!=="columns"&&a()},e[12]=o.width,e[13]=a,e[14]=T,e[15]=A):A=e[15],e[16]!==o.width||e[17]!==a||e[18]!==h||e[19]!==T?(M=[o.width,T,a,h],e[16]=o.width,e[17]=a,e[18]=h,e[19]=T,e[20]=M):M=e[20],O.useEffect(A,M);const P=function(){const fe=K.c(2),de=Ks();let ue;return fe[0]!==de?(ue=()=>de(uB(Nn())),fe[0]=de,fe[1]=ue):ue=fe[1],qe(ue)}(),R=fg(),L=hg();let B,U,D,k,$,I;e[21]!==P?(B=()=>{P()},e[21]=P,e[22]=B):B=e[22],Jt("global.runStale",B),Jt("global.interrupt",JO),e[23]!==L?(U=()=>{L()},e[23]=L,e[24]=U):U=e[24],Jt("global.hideCode",U),e[25]!==R?(D=()=>{R()},e[25]=R,e[26]=D):D=e[26],Jt("global.runAll",D),e[27]!==l?(k=()=>{l()},e[27]=l,e[28]=k):k=e[28],Jt("global.collapseAllSections",k),e[29]!==d?($=()=>{d()},e[29]=d,e[30]=$):$=e[30],Jt("global.expandAllSections",$),e[31]!==o||e[32]!==E||e[33]!==n||e[34]!==u.mode?(I=c.jsx(LO,{connStatus:E,mode:u.mode,userConfig:n,appConfig:o}),e[31]=o,e[32]=E,e[33]=n,e[34]=u.mode,e[35]=I):I=e[35];const W=I,G=o.width;let q,Y,ee,oe,ie,Z,Q,me;return e[36]===Symbol.for("react.memo_cache_sentinel")?(q=Ne("pt-4 sm:pt-12 pb-2 mb-4 print:hidden z-50","sticky left-0"),e[36]=q):q=e[36],e[37]!==m||e[38]!==g?(Y=g&&c.jsx("div",{className:"flex items-center justify-center container",children:c.jsx(wj,{filename:m})}),e[37]=m,e[38]=g,e[39]=Y):Y=e[39],e[40]!==E||e[41]!==Y?(ee=c.jsx(EW,{connection:E,className:q,children:Y}),e[40]=E,e[41]=Y,e[42]=ee):ee=e[42],e[43]!==o||e[44]!==W||e[45]!==f||e[46]!==u.mode?(oe=f&&c.jsx(jW,{appConfig:o,mode:u.mode,children:W}),e[43]=o,e[44]=W,e[45]=f,e[46]=u.mode,e[47]=oe):oe=e[47],e[48]!==o.width||e[49]!==E||e[50]!==b||e[51]!==ee||e[52]!==oe?(ie=c.jsxs(IW,{connection:E,isRunning:b,width:G,children:[ee,oe]}),e[48]=o.width,e[49]=E,e[50]=b,e[51]=ee,e[52]=oe,e[53]=ie):ie=e[53],e[54]===Symbol.for("react.memo_cache_sentinel")?(Z=c.jsx(Mj,{}),e[54]=Z):Z=e[54],e[55]!==o||e[56]!==E||e[57]!==s||e[58]!==p||e[59]!==b||e[60]!==P||e[61]!==L?(Q=!s&&c.jsx(Kc,{children:c.jsx(gj,{presenting:p,onTogglePresenting:L,onInterrupt:Hm,onRun:P,connectionState:E.state,running:b,appConfig:o})}),e[55]=o,e[56]=E,e[57]=s,e[58]=p,e[59]=b,e[60]=P,e[61]=L,e[62]=Q):Q=e[62],e[63]!==ie||e[64]!==Q?(me=c.jsxs(c.Fragment,{children:[ie,Z,Q]}),e[63]=ie,e[64]=Q,e[65]=me):me=e[65],me};function HO(){dC.INSTANCE.stop()}function WO(){return dC.INSTANCE.start(N$),HO}function qO(t){return t.name}function GO(t){return t.code}function YO(t){return t.config}function JO(){Hm()}const ew=t=>Le(j$)[t.capability]?t.children:null,Pn=O.forwardRef((t,e)=>{const n=K.c(18);let o,r,s,i,a;n[0]!==t?({children:o,tooltip:a,selected:i,className:r,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i,n[5]=a):(o=n[1],r=n[2],s=n[3],i=n[4],a=n[5]);const l=!i&&"hover:bg-[var(--sage-3)]",d=i&&"bg-[var(--sage-4)]";let u,h;n[6]!==r||n[7]!==l||n[8]!==d?(u=Ne("h-full flex items-center p-2 text-sm shadow-inset font-mono cursor-pointer rounded",l,d,r),n[6]=r,n[7]=l,n[8]=d,n[9]=u):u=n[9],n[10]!==o||n[11]!==e||n[12]!==s||n[13]!==u?(h=c.jsx("div",{ref:e,className:u,...s,children:o}),n[10]=o,n[11]=e,n[12]=s,n[13]=u,n[14]=h):h=n[14];const f=h;if(a){let m;return n[15]!==f||n[16]!==a?(m=c.jsx(Te,{content:a,side:"top",delayDuration:200,children:f}),n[15]=f,n[16]=a,n[17]=m):m=n[17],m}return f});Pn.displayName="FooterItem";const KO=()=>{var u;const t=K.c(14),e=Le(_S),n=Le(cc),o=((u=e==null?void 0:e.open_ai)==null?void 0:u.model)||"gpt-4-turbo",{handleClick:r}=wa();if(!n){let h,f,m;return t[0]!==r?(h=()=>r("ai"),t[0]=r,t[1]=h):h=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(ea,{className:"h-4 w-4 opacity-60"}),t[2]=f):f=t[2],t[3]!==h?(m=c.jsx(Pn,{tooltip:"Assist is disabled",selected:!1,onClick:h,"data-testid":"footer-ai-disabled",children:f}),t[3]=h,t[4]=m):m=t[4],m}let s,i,a,l,d;return t[5]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx("b",{children:"Assist model:"}),t[5]=s):s=t[5],t[6]!==o?(i=c.jsxs(c.Fragment,{children:[s," ",o]}),t[6]=o,t[7]=i):i=t[7],t[8]!==r?(a=()=>r("ai"),t[8]=r,t[9]=a):a=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(ea,{className:"h-4 w-4"}),t[10]=l):l=t[10],t[11]!==i||t[12]!==a?(d=c.jsx(Pn,{tooltip:i,onClick:a,selected:!1,"data-testid":"footer-ai-enabled",children:l}),t[11]=i,t[12]=a,t[13]=d):d=t[13],d},XO=()=>{const t=K.c(26),e=Le(hn).state,n=ep();let o,r;t[0]!==e||t[1]!==n?(o=async()=>{if(e===$t.OPEN){if(un())return{isHealthy:!0,lastChecked:new Date,error:void 0};try{return{isHealthy:await n.isHealthy(),lastChecked:new Date,error:void 0}}catch(v){const C=v;return{isHealthy:!1,lastChecked:new Date,error:C instanceof Error?C.message:"Unknown error"}}}},r=[n,e],t[0]=e,t[1]=n,t[2]=o,t[3]=r):(o=t[2],r=t[3]);const{isFetching:s,error:i,data:a,refetch:l}=Wn(o,r),d=e===$t.OPEN?3e4:null;let u,h;t[4]!==d?(u={delayMs:d,whenVisible:!0},t[4]=d,t[5]=u):u=t[5],ya(l,u),t[6]!==e||t[7]!==a||t[8]!==i?(h=()=>[Om(e.toLowerCase()),a!=null&&a.lastChecked?a.isHealthy?"\u2713 Healthy":"\u2717 Unhealthy":"Health: Unknown",i?`Error: ${i}`:""].filter(Boolean).join(`
`),t[6]=e,t[7]=a,t[8]=i,t[9]=h):h=t[9];const f=h;let m;t[10]!==e||t[11]!==(a==null?void 0:a.isHealthy)||t[12]!==(a==null?void 0:a.lastChecked)||t[13]!==s?(m=()=>s||e===$t.CONNECTING?c.jsx(An,{size:"small"}):e===$t.CLOSING?c.jsx(An,{className:"text-destructive",size:"small"}):e===$t.OPEN?a!=null&&a.isHealthy?c.jsx(rd,{className:"w-4 h-4 text-[var(--green-9)]"}):a!=null&&a.lastChecked?c.jsx(pS,{className:"w-4 h-4 text-[var(--yellow-9)]"}):c.jsx(rd,{className:"w-4 h-4"}):c.jsx(va,{className:"w-4 h-4 text-red-500"}),t[10]=e,t[11]=a==null?void 0:a.isHealthy,t[12]=a==null?void 0:a.lastChecked,t[13]=s,t[14]=m):m=t[14];const _=m,g=f();let p,b,x,y;return t[15]!==e?(p=e===$t.OPEN&&c.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Click to refresh health status"}),t[15]=e,t[16]=p):p=t[16],t[17]!==g||t[18]!==p?(b=c.jsxs("div",{className:"text-sm whitespace-pre-line",children:[g,p]}),t[17]=g,t[18]=p,t[19]=b):b=t[19],t[20]!==_?(x=_(),t[20]=_,t[21]=x):x=t[21],t[22]!==l||t[23]!==b||t[24]!==x?(y=c.jsx(Pn,{tooltip:b,selected:!1,onClick:l,"data-testid":"footer-backend-status",children:x}),t[22]=l,t[23]=b,t[24]=x,t[25]=y):y=t[25],y},ZO=t=>{const e=K.c(3);let n,o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsx("path",{d:"M205.28 31.36c14.096 14.88 20.016 35.2 22.512 63.68c6.626 0 12.805 1.47 16.976 7.152l7.792 10.56A17.55 17.55 0 0 1 256 123.2v28.688c-.008 3.704-1.843 7.315-4.832 9.504C215.885 187.222 172.35 208 128 208c-49.066 0-98.19-28.273-123.168-46.608c-2.989-2.189-4.825-5.8-4.832-9.504V123.2c0-3.776 1.2-7.424 3.424-10.464l7.792-10.544c4.173-5.657 10.38-7.152 16.992-7.152c2.496-28.48 8.4-48.8 22.512-63.68C77.331 3.165 112.567.06 127.552 0H128c14.72 0 50.4 2.88 77.28 31.36m-77.264 47.376c-3.04 0-6.544.176-10.272.544c-1.312 4.896-3.248 9.312-6.08 12.128c-11.2 11.2-24.704 12.928-31.936 12.928c-6.802 0-13.927-1.42-19.744-5.088c-5.502 1.808-10.786 4.415-11.136 10.912c-.586 12.28-.637 24.55-.688 36.824c-.026 6.16-.05 12.322-.144 18.488c.024 3.579 2.182 6.903 5.44 8.384C79.936 185.92 104.976 192 128.016 192c23.008 0 48.048-6.08 74.512-18.144c3.258-1.48 5.415-4.805 5.44-8.384c.317-18.418.062-36.912-.816-55.312h.016c-.342-6.534-5.648-9.098-11.168-10.912c-5.82 3.652-12.927 5.088-19.728 5.088c-7.232 0-20.72-1.728-31.936-12.928c-2.832-2.816-4.768-7.232-6.08-12.128a106 106 0 0 0-10.24-.544m-26.941 43.93c5.748 0 10.408 4.66 10.408 10.409v19.183c0 5.749-4.66 10.409-10.408 10.409s-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408m53.333 0c5.749 0 10.409 4.66 10.409 10.409v19.183c0 5.749-4.66 10.409-10.409 10.409c-5.748 0-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408M81.44 28.32c-11.2 1.12-20.64 4.8-25.44 9.92c-10.4 11.36-8.16 40.16-2.24 46.24c4.32 4.32 12.48 7.2 21.28 7.2c6.72 0 19.52-1.44 30.08-12.16c4.64-4.48 7.52-15.68 7.2-27.04c-.32-9.12-2.88-16.64-6.72-19.84c-4.16-3.68-13.6-5.28-24.16-4.32m68.96 4.32c-3.84 3.2-6.4 10.72-6.72 19.84c-.32 11.36 2.56 22.56 7.2 27.04c10.56 10.72 23.36 12.16 30.08 12.16c8.8 0 16.96-2.88 21.28-7.2c5.92-6.08 8.16-34.88-2.24-46.24c-4.8-5.12-14.24-8.8-25.44-9.92c-10.56-.96-20 .64-24.16 4.32M128 56c-2.56 0-5.6.16-8.96.48c.32 1.76.48 3.68.64 5.76c0 1.44 0 2.88-.16 4.48c3.2-.32 5.92-.32 8.48-.32s5.28 0 8.48.32c-.16-1.6-.16-3.04-.16-4.48c.16-2.08.32-4 .64-5.76c-3.36-.32-6.4-.48-8.96-.48"}),e[0]=n):n=e[0],e[1]!==t?(o=c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.24em",height:"1em",viewBox:"0 0 256 208",fill:"currentColor",...t,children:n}),e[1]=t,e[2]=o):o=e[2],o},QO=zt(t=>t(E$).completion.copilot),e9=()=>{const t=K.c(1);if(Le(QO)==="github"){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=c.jsx(t9,{}),t[0]=e):e=t[0],e}return null},tw=vt.get("[copilot-status-bar]"),t9=()=>{const t=Le(QS),e=Le(cW)!==null,{handleClick:n}=wa(),o=()=>n("ai"),r=t?"Ready":"Not connected",s=Ot(QS),i=Ot(dW);return gS(()=>{const a=ZS();let l=!0;return(async()=>{try{if(await a.initializePromise.catch(u=>{throw tw.error("Failed to initialize",u),a.close(),u}),!l)return;const d=await a.signedIn();if(!l)return;s(d),i(d?"signedIn":"signedOut")}catch(d){if(!l)return;tw.warn("Connection failed",d),s(!1),i("connectionError"),nt({title:"GitHub Copilot Connection Error",description:"Failed to connect to GitHub Copilot. Check settings and try again.",variant:"danger",action:c.jsx(Ae,{variant:"link",onClick:o,children:"Settings"})})}})(),()=>{l=!1}}),c.jsx(Pn,{tooltip:c.jsxs(c.Fragment,{children:[c.jsx("b",{children:"GitHub Copilot:"})," ",r]}),selected:!1,onClick:o,"data-testid":"footer-copilot-status",children:c.jsx("span",{children:e?c.jsx(An,{className:"h-4 w-4"}):c.jsx(ZO,{className:Ne("h-4 w-4",!t&&"opacity-60")})})})},n9=t=>{const e=K.c(17),[n,o]=O.useState(0),r=Le(hn);let s,i,a,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>o(i9),i={delayMs:1e4,whenVisible:!0},e[0]=s,e[1]=i):(s=e[0],i=e[1]),ya(s,i),e[2]!==r.state?(a=async()=>un()||r.state!==$t.OPEN?null:I$(),e[2]=r.state,e[3]=a):a=e[3],e[4]!==r.state||e[5]!==n?(l=[n,r.state],e[4]=r.state,e[5]=n,e[6]=l):l=e[6];const{data:d}=Wn(a,l);let u,h,f,m;return e[7]!==d?(u=(d==null?void 0:d.gpu)&&d.gpu.length>0&&c.jsx(s9,{gpus:d.gpu}),e[7]=d,e[8]=u):u=e[8],e[9]!==d?(h=d&&c.jsx(o9,{memory:d.memory,kernel:d.kernel,server:d.server}),e[9]=d,e[10]=h):h=e[10],e[11]!==d?(f=d&&c.jsx(r9,{cpu:d.cpu}),e[11]=d,e[12]=f):f=e[12],e[13]!==u||e[14]!==h||e[15]!==f?(m=c.jsxs("div",{className:"flex gap-2 items-center px-1",children:[u,h,f]}),e[13]=u,e[14]=h,e[15]=f,e[16]=m):m=e[16],m},o9=t=>{const e=K.c(25),{memory:n,kernel:o,server:r}=t,{percent:s,total:i,available:a}=n;let l;e[0]!==s?(l=Math.round(s),e[0]=s,e[1]=l):l=e[1];const d=l;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx("b",{children:"computer memory:"}),e[2]=u):u=e[2];const h=i-a;let f,m,_,g,p,b,x,y,v;return e[3]!==h?(f=lh(h),e[3]=h,e[4]=f):f=e[4],e[5]!==i?(m=lh(i),e[5]=i,e[6]=m):m=e[6],e[7]!==d||e[8]!==f||e[9]!==m?(_=c.jsxs("span",{children:[u," ",f," / ",m," GB (",d,"%)"]}),e[7]=d,e[8]=f,e[9]=m,e[10]=_):_=e[10],e[11]!==r?(g=(r==null?void 0:r.memory)&&c.jsxs("span",{children:[c.jsx("b",{children:"marimo server:"})," ",Al(r.memory)]}),e[11]=r,e[12]=g):g=e[12],e[13]!==o?(p=(o==null?void 0:o.memory)&&c.jsxs("span",{children:[c.jsx("b",{children:"kernel:"})," ",Al(o.memory)]}),e[13]=o,e[14]=p):p=e[14],e[15]!==_||e[16]!==g||e[17]!==p?(b=c.jsxs("div",{className:"flex flex-col gap-1",children:[_,g,p]}),e[15]=_,e[16]=g,e[17]=p,e[18]=b):b=e[18],e[19]===Symbol.for("react.memo_cache_sentinel")?(x=c.jsx($p,{className:"w-4 h-4"}),e[19]=x):x=e[19],e[20]!==d?(y=c.jsxs("div",{className:"flex items-center gap-1","data-testid":"memory-usage-bar",children:[x,c.jsx(ah,{percent:d,colorClassName:"bg-primary"})]}),e[20]=d,e[21]=y):y=e[21],e[22]!==y||e[23]!==b?(v=c.jsx(Te,{delayDuration:200,content:b,children:y}),e[22]=y,e[23]=b,e[24]=v):v=e[24],v},r9=t=>{const e=K.c(11),{cpu:n}=t,{percent:o}=n;let r;e[0]!==o?(r=Math.round(o),e[0]=o,e[1]=r):r=e[1];const s=r;let i,a,l,d,u;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx("b",{children:"CPU:"}),e[2]=i):i=e[2],e[3]!==s?(a=c.jsxs("span",{children:[i," ",s,"%"]}),e[3]=s,e[4]=a):a=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(uW,{className:"w-4 h-4"}),e[5]=l):l=e[5],e[6]!==s?(d=c.jsxs("div",{className:"flex items-center gap-1","data-testid":"cpu-bar",children:[l,c.jsx(ah,{percent:s,colorClassName:"bg-primary"})]}),e[6]=s,e[7]=d):d=e[7],e[8]!==a||e[9]!==d?(u=c.jsx(Te,{delayDuration:200,content:a,children:d}),e[8]=a,e[9]=d,e[10]=u):u=e[10],u},s9=t=>{const e=K.c(12),{gpus:n}=t;let o;e[0]!==n?(o=Math.round(n.reduce(a9,0)/n.length),e[0]=n,e[1]=o):o=e[1];const r=o;let s,i,a,l,d;return e[2]!==n?(s=n.map(l9),e[2]=n,e[3]=s):s=e[3],e[4]!==s?(i=c.jsx("div",{className:"flex flex-col gap-1",children:s}),e[4]=s,e[5]=i):i=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(Wp,{className:"w-4 h-4"}),e[6]=a):a=e[6],e[7]!==r?(l=c.jsxs("div",{className:"flex items-center gap-1","data-testid":"gpu-bar",children:[a,c.jsx(ah,{percent:r,colorClassName:"bg-[var(--grass-9)]"})]}),e[7]=r,e[8]=l):l=e[8],e[9]!==i||e[10]!==l?(d=c.jsx(Te,{delayDuration:200,content:i,children:l}),e[9]=i,e[10]=l,e[11]=d):d=e[11],d},ah=t=>{const e=K.c(7),{percent:n,colorClassName:o}=t;let r;e[0]!==o?(r=Ne("h-full bg-primary",o),e[0]=o,e[1]=r):r=e[1];const s=`${n}%`;let i,a;return e[2]!==s?(i={width:s},e[2]=s,e[3]=i):i=e[3],e[4]!==r||e[5]!==i?(a=c.jsx("div",{className:"h-3 w-20 bg-[var(--slate-4)] rounded-lg overflow-hidden border",children:c.jsx("div",{className:r,style:i})}),e[4]=r,e[5]=i,e[6]=a):a=e[6],a};function Al(t){return t>1073741824?`${lh(t)} GB`:`${function(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(e/1048576)}(t)} MB`}function lh(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(t/1073741824)}function i9(t){return t+1}function a9(t,e){return t+e.memory.percent}function l9(t){return c.jsxs("span",{children:[c.jsxs("b",{children:["GPU ",t.index," (",t.name,"):"]})," ",Al(t.memory.used)," / ",Al(t.memory.total)," GB (",Math.round(t.memory.percent),"%)"]},t.index)}const c9=()=>{const t=K.c(13),e=Le(is),[n,o]=Qt(Q4),[r,s]=O.useState(!1);if(!$c()||e==="disabled")return null;const i=e?"Real-time collaboration active":"Connecting to real-time collaboration";let a,l,d,u,h,f;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(cg,{className:"w-4 h-4"}),t[0]=a):a=t[0],t[1]!==i?(l=c.jsx(Hs,{asChild:!0,children:c.jsx(Pn,{tooltip:i,selected:!1,"data-testid":"footer-rtc-status",children:a})}),t[1]=i,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium leading-none",children:"Username"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Set your username for real-time collaboration"})]}),t[3]=d):d=t[3],t[4]!==o?(u=m=>o(m.target.value),t[4]=o,t[5]=u):u=t[5],t[6]!==u||t[7]!==n?(h=c.jsx(Fs,{className:"w-80",children:c.jsxs("div",{className:"space-y-4",children:[d,c.jsx(ir,{value:n,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",onChange:u,placeholder:"Enter your username"})]})}),t[6]=u,t[7]=n,t[8]=h):h=t[8],t[9]!==r||t[10]!==l||t[11]!==h?(f=c.jsxs(Ur,{open:r,onOpenChange:s,children:[l,h]}),t[9]=r,t[10]=l,t[11]=h,t[12]=f):f=t[12],f},d9=t=>{const e=K.c(101),{className:n}=t,[o,r]=A$(),s=zr()[0],[i,a]=O.useState(!1);let l,d,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const Oe=window.matchMedia("(min-width: 768px)"),He=()=>{Oe.matches&&a(!1)};return Oe.addEventListener("change",He),()=>Oe.removeEventListener("change",He)},d=[],e[0]=l,e[1]=d):(l=e[0],d=e[1]),O.useEffect(l,d),e[2]!==s||e[3]!==r?(u=async Oe=>{const He={...s,runtime:{...s.runtime,auto_instantiate:Oe}};await Br({config:He}).then(()=>r(He))},e[2]=s,e[3]=r,e[4]=u):u=e[4];const h=u;let f;e[5]!==r||e[6]!==o?(f=async Oe=>{const He={...o,runtime:{...o.runtime,on_cell_change:Oe?"autorun":"lazy"}};await Br({config:He}).then(()=>r(He))},e[5]=r,e[6]=o,e[7]=f):f=e[7];const m=f;let _;e[8]!==r||e[9]!==o?(_=async Oe=>{const He={...o,runtime:{...o.runtime,auto_reload:Oe}};await Br({config:He}).then(()=>r(He))},e[8]=r,e[9]=o,e[10]=_):_=e[10];const g=_;let p;e[11]!==s.runtime.auto_instantiate||e[12]!==s.runtime.auto_reload||e[13]!==s.runtime.on_cell_change?(p=!s.runtime.auto_instantiate&&s.runtime.on_cell_change==="lazy"&&(un()||s.runtime.auto_reload!=="autorun"),e[11]=s.runtime.auto_instantiate,e[12]=s.runtime.auto_reload,e[13]=s.runtime.on_cell_change,e[14]=p):p=e[14];const b=p;let x;e[15]!==n?(x=Ne("flex items-center",n),e[15]=n,e[16]=x):x=e[16];const y=s.runtime.auto_instantiate?"Disable autorun on startup":"Enable autorun on startup";let v,C,S;e[17]!==s.runtime.auto_instantiate||e[18]!==h?(v=()=>h(!s.runtime.auto_instantiate),e[17]=s.runtime.auto_instantiate,e[18]=h,e[19]=v):v=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx("span",{children:"on startup: "}),e[20]=C):C=e[20],e[21]!==s.runtime.auto_instantiate?(S=s.runtime.auto_instantiate?c.jsx(vn,{size:14}):c.jsx(wn,{size:14}),e[21]=s.runtime.auto_instantiate,e[22]=S):S=e[22];const E=s.runtime.auto_instantiate?"autorun":"lazy";let N,j,T,A;e[23]!==E?(N=c.jsx("span",{children:E}),e[23]=E,e[24]=N):N=e[24],e[25]!==S||e[26]!==N?(j=c.jsxs("div",{className:"font-prose text-sm flex items-center gap-1 whitespace-nowrap",children:[C,S,N]}),e[25]=S,e[26]=N,e[27]=j):j=e[27],e[28]!==j||e[29]!==y||e[30]!==v?(T=c.jsx(Pn,{tooltip:y,selected:!1,onClick:v,"data-testid":"footer-autorun-startup",children:j}),e[28]=j,e[29]=y,e[30]=v,e[31]=T):T=e[31],e[32]===Symbol.for("react.memo_cache_sentinel")?(A=c.jsx("div",{className:"border-r border-border h-6 mx-1"}),e[32]=A):A=e[32];const M=s.runtime.on_cell_change==="autorun"?"Disable autorun":"Enable autorun";let P,R,L,B,U,D,k,$,I,W,G,q,Y;e[33]!==s.runtime.on_cell_change||e[34]!==m?(P=()=>m(s.runtime.on_cell_change!=="autorun"),e[33]=s.runtime.on_cell_change,e[34]=m,e[35]=P):P=e[35],e[36]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsx("span",{children:"on cell change: "}),e[36]=R):R=e[36],e[37]!==s.runtime.on_cell_change?(L=c.jsxs("div",{className:"font-prose text-sm flex items-center gap-1 whitespace-nowrap",children:[R,s.runtime.on_cell_change==="autorun"?c.jsx(vn,{size:14}):c.jsx(wn,{size:14}),c.jsx("span",{children:s.runtime.on_cell_change})]}),e[37]=s.runtime.on_cell_change,e[38]=L):L=e[38],e[39]!==M||e[40]!==P||e[41]!==L?(B=c.jsx(Pn,{tooltip:M,selected:!1,onClick:P,"data-testid":"footer-autorun-cell-change",children:L}),e[39]=M,e[40]=P,e[41]=L,e[42]=B):B=e[42],e[43]!==s.runtime.auto_reload||e[44]!==g?(U=!un()&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-r border-border h-6 mx-1"}),c.jsx(Pn,{tooltip:null,selected:!1,"data-testid":"footer-module-reload",children:c.jsxs(hr,{children:[c.jsxs(fr,{className:"font-prose text-sm flex items-center gap-1 whitespace-nowrap",children:[c.jsx("span",{children:"on module change: "}),s.runtime.auto_reload==="off"&&c.jsx(va,{size:14}),s.runtime.auto_reload==="lazy"&&c.jsx(wn,{size:14}),s.runtime.auto_reload==="autorun"&&c.jsx(vn,{size:14}),c.jsx("span",{children:s.runtime.auto_reload}),c.jsx(dr,{size:14})]}),c.jsx(mr,{children:["off","lazy","autorun"].map(Oe=>c.jsxs(Vt,{onClick:()=>g(Oe),children:[Oe==="off"&&c.jsx(va,{size:14,className:"mr-2 text-muted-foreground"}),Oe==="lazy"&&c.jsx(wn,{size:14,className:"mr-2 text-muted-foreground"}),Oe==="autorun"&&c.jsx(vn,{size:14,className:"mr-2 text-muted-foreground"}),Oe]},Oe))})]})})]}),e[43]=s.runtime.auto_reload,e[44]=g,e[45]=U):U=e[45],e[46]!==T||e[47]!==B||e[48]!==U?(D=c.jsxs("div",{className:"hidden md:flex md:items-center",children:[T,A,B,U]}),e[46]=T,e[47]=B,e[48]=U,e[49]=D):D=e[49],e[50]!==b?(k=b?c.jsx(wn,{size:16,className:"text-muted-foreground"}):c.jsx(vn,{size:16,className:"text-amber-500"}),e[50]=b,e[51]=k):k=e[51],e[52]===Symbol.for("react.memo_cache_sentinel")?($=c.jsx(dr,{size:14}),e[52]=$):$=e[52],e[53]!==k?(I=c.jsx(fr,{asChild:!0,children:c.jsx(Pn,{tooltip:"Runtime reactivity",selected:!1,"data-testid":"footer-runtime-settings",children:c.jsxs("div",{className:"flex items-center gap-1",children:[k,$]})})}),e[53]=k,e[54]=I):I=e[54],e[55]===Symbol.for("react.memo_cache_sentinel")?(W=c.jsx(p4,{children:"Runtime reactivity"}),G=c.jsx(bn,{}),e[55]=W,e[56]=G):(W=e[55],G=e[56]),e[57]!==s.runtime.auto_instantiate?(q=s.runtime.auto_instantiate?c.jsx(vn,{size:14,className:"text-amber-500"}):c.jsx(wn,{size:14,className:"text-muted-foreground"}),e[57]=s.runtime.auto_instantiate,e[58]=q):q=e[58],e[59]===Symbol.for("react.memo_cache_sentinel")?(Y=c.jsx("div",{className:"text-sm font-medium",children:"On startup"}),e[59]=Y):Y=e[59];const ee=s.runtime.auto_instantiate?"autorun":"lazy";let oe,ie,Z,Q,me,fe,de,ue,ce;e[60]!==ee?(oe=c.jsxs("div",{children:[Y,c.jsx("div",{className:"text-xs text-muted-foreground",children:ee})]}),e[60]=ee,e[61]=oe):oe=e[61],e[62]!==q||e[63]!==oe?(ie=c.jsxs("div",{className:"flex items-center space-x-2",children:[q,oe]}),e[62]=q,e[63]=oe,e[64]=ie):ie=e[64],e[65]!==s.runtime.auto_instantiate||e[66]!==h?(Z=c.jsx(km,{checked:s.runtime.auto_instantiate,onCheckedChange:h,size:"sm"}),e[65]=s.runtime.auto_instantiate,e[66]=h,e[67]=Z):Z=e[67],e[68]!==ie||e[69]!==Z?(Q=c.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[ie,Z]}),e[68]=ie,e[69]=Z,e[70]=Q):Q=e[70],e[71]===Symbol.for("react.memo_cache_sentinel")?(me=c.jsx(bn,{}),e[71]=me):me=e[71],e[72]!==s.runtime.on_cell_change?(fe=s.runtime.on_cell_change==="autorun"?c.jsx(vn,{size:14,className:"text-amber-500"}):c.jsx(wn,{size:14,className:"text-muted-foreground"}),e[72]=s.runtime.on_cell_change,e[73]=fe):fe=e[73],e[74]===Symbol.for("react.memo_cache_sentinel")?(de=c.jsx("div",{className:"text-sm font-medium",children:"On cell change"}),e[74]=de):de=e[74],e[75]!==s.runtime.on_cell_change?(ue=c.jsxs("div",{children:[de,c.jsx("div",{className:"text-xs text-muted-foreground",children:s.runtime.on_cell_change})]}),e[75]=s.runtime.on_cell_change,e[76]=ue):ue=e[76],e[77]!==fe||e[78]!==ue?(ce=c.jsxs("div",{className:"flex items-center space-x-2",children:[fe,ue]}),e[77]=fe,e[78]=ue,e[79]=ce):ce=e[79];const ke=s.runtime.on_cell_change==="autorun";let Se,ae,Ce,_e,Ee,ze;return e[80]!==m||e[81]!==ke?(Se=c.jsx(km,{checked:ke,onCheckedChange:m,size:"sm"}),e[80]=m,e[81]=ke,e[82]=Se):Se=e[82],e[83]!==ce||e[84]!==Se?(ae=c.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[ce,Se]}),e[83]=ce,e[84]=Se,e[85]=ae):ae=e[85],e[86]!==s.runtime.auto_reload||e[87]!==g?(Ce=!un()&&c.jsxs(c.Fragment,{children:[c.jsx(bn,{}),c.jsxs("div",{className:"px-2 py-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.runtime.auto_reload==="off"&&c.jsx(va,{size:14,className:"text-muted-foreground"}),s.runtime.auto_reload==="lazy"&&c.jsx(wn,{size:14,className:"text-muted-foreground"}),s.runtime.auto_reload==="autorun"&&c.jsx(vn,{size:14,className:"text-amber-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium",children:"On module change"}),c.jsx("div",{className:"text-xs text-muted-foreground",children:s.runtime.auto_reload})]})]}),c.jsx("div",{className:"space-y-1",children:["off","lazy","autorun"].map(Oe=>c.jsxs("button",{onClick:()=>g(Oe),className:Ne("w-full flex items-center px-2 py-1 text-sm rounded hover:bg-accent",Oe===s.runtime.auto_reload&&"bg-accent"),children:[Oe==="off"&&c.jsx(va,{size:12,className:"mr-2"}),Oe==="lazy"&&c.jsx(wn,{size:12,className:"mr-2"}),Oe==="autorun"&&c.jsx(vn,{size:12,className:"mr-2"}),c.jsx("span",{className:"capitalize",children:Oe}),Oe===s.runtime.auto_reload&&c.jsx("span",{className:"ml-auto",children:"\u2713"})]},Oe))})]})]}),e[86]=s.runtime.auto_reload,e[87]=g,e[88]=Ce):Ce=e[88],e[89]!==Q||e[90]!==ae||e[91]!==Ce?(_e=c.jsxs(mr,{align:"start",className:"w-64",children:[W,G,Q,me,ae,Ce]}),e[89]=Q,e[90]=ae,e[91]=Ce,e[92]=_e):_e=e[92],e[93]!==i||e[94]!==I||e[95]!==_e?(Ee=c.jsx("div",{className:"flex md:hidden",children:c.jsxs(hr,{open:i,onOpenChange:a,children:[I,_e]})}),e[93]=i,e[94]=I,e[95]=_e,e[96]=Ee):Ee=e[96],e[97]!==D||e[98]!==Ee||e[99]!==x?(ze=c.jsxs("div",{className:x,children:[D,Ee]}),e[97]=D,e[98]=Ee,e[99]=x,e[100]=ze):ze=e[100],ze},u9=()=>{const t=K.c(24),{selectedPanel:e,isTerminalOpen:n}=Sc(),{toggleApplication:o,toggleTerminal:r}=sa(),s=Le(T$),i=h9,a=yd.find(f9);let l;zo(a,"Error panel not found"),t[0]!==r?(l=()=>{r()},t[0]=r,t[1]=l):l=t[1],Jt("global.toggleTerminal",l);const d=Pn,u=a.tooltip,h=e===a.type,f=()=>o(a.type),m=i(a,s>0?"text-destructive":"");let _,g,p,b,x,y,v,C,S,E;return t[2]!==s?(_=c.jsx("span",{className:"ml-1 font-mono mt-[0.125rem]",children:s}),t[2]=s,t[3]=_):_=t[3],t[4]!==d||t[5]!==a||t[6]!==h||t[7]!==f||t[8]!==m||t[9]!==_?(g=c.jsxs(d,{tooltip:u,selected:h,onClick:f,"data-testid":"footer-errors",children:[m,_]}),t[4]=d,t[5]=a,t[6]=h,t[7]=f,t[8]=m,t[9]=_,t[10]=g):g=t[10],t[11]!==r?(p=()=>r(),t[11]=r,t[12]=p):p=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(ag,{className:"h-5 w-5"}),t[13]=b):b=t[13],t[14]!==n||t[15]!==p?(x=c.jsx(ew,{capability:"terminal",children:c.jsx(Pn,{tooltip:"Open terminal",selected:n,onClick:p,"data-testid":"footer-terminal",children:b})}),t[14]=n,t[15]=p,t[16]=x):x=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(d9,{}),v=c.jsx("div",{className:"mx-auto"}),t[17]=y,t[18]=v):(y=t[17],v=t[18]),t[19]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx(fj,{children:c.jsx(Te,{content:c.jsx("div",{className:"w-[200px]",children:"Kiosk mode is enabled. This allows you to view the outputs of the cells without the ability to edit them."}),children:c.jsx("span",{className:"text-muted-foreground text-sm mr-4",children:"kiosk mode"})})}),t[19]=C):C=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsxs("div",{className:"flex items-center flex-shrink-0 min-w-0",children:[c.jsx(n9,{}),c.jsx(KO,{}),c.jsx(e9,{}),c.jsx(c9,{}),c.jsx(XO,{})]}),t[20]=S):S=t[20],t[21]!==x||t[22]!==g?(E=c.jsxs("footer",{className:"h-10 py-2 bg-background flex items-center text-muted-foreground text-md px-1 border-t border-border select-none no-print text-sm shadow-[0_0_4px_1px_rgba(0,0,0,0.1)] z-50 print:hidden hide-on-fullscreen overflow-x-auto overflow-y-hidden scrollbar-thin",children:[g,x,y,v,C,S]}),t[21]=x,t[22]=g,t[23]=E):E=t[23],E};function h9(t,e){const{Icon:n}=t;return c.jsx(n,{className:Ne("h-5 w-5",e)})}function f9(t){return t.type==="errors"}const m9=t=>{const e=K.c(6),{children:n}=t,{openModal:o,closeModal:r}=$n();let s,i;return e[0]!==r||e[1]!==o?(s=()=>o(c.jsx(p9,{onClose:r})),e[0]=r,e[1]=o,e[2]=s):s=e[2],e[3]!==n||e[4]!==s?(i=c.jsx(bS,{onClick:s,children:n}),e[3]=n,e[4]=s,e[5]=i):i=e[5],i},p9=t=>{const e=K.c(9),{onClose:n}=t;let o,r,s,i,a,l,d;return e[0]!==n?(o=async u=>{u.preventDefault();const h=new FormData(u.target),f=h.get("rating"),m=h.get("message");fetch("https://marimo.io/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:f,message:m})}),n(),nt({title:"Feedback sent!",description:"Thank you for your feedback!"})},e[0]=n,e[1]=o):o=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(sr,{children:"Send Feedback"}),e[2]=r):r=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx("p",{className:"my-2 prose dark:prose-invert",children:"We want to hear from you \u2014 from minor bug reports to wishlist features and everything in between. Here are some ways you can get in touch:"}),e[3]=s):s=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsxs("li",{className:"my-0",children:["Take our"," ",c.jsx("a",{href:Zn.feedbackForm,target:"_blank",className:"underline",children:"two-minute survey."})]}),e[4]=i):i=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsxs("li",{className:"my-0",children:["File a"," ",c.jsx("a",{href:Zn.issuesPage,target:"_blank",className:"underline",children:"GitHub issue."})]}),e[5]=a):a=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsxs(Ts,{children:[r,c.jsxs(Ms,{children:[s,c.jsxs("ul",{className:"list-disc ml-8 my-2 prose dark:prose-invert",children:[i,a,c.jsxs("li",{className:"my-0",children:["Chat with us on"," ",c.jsx("a",{href:Zn.discordLink,target:"_blank",className:"underline",children:"Discord."})]})]}),c.jsx("p",{className:"my-2 prose dark:prose-invert",children:"We're excited you're here as we build the future of Python data tooling. Thanks for being part of our community!"})]})]}),e[6]=l):l=e[6],e[7]!==o?(d=c.jsx(ar,{className:"w-fit",children:c.jsx("form",{onSubmit:o,children:l})}),e[7]=o,e[8]=d):d=e[8],d},g9=()=>{const t=K.c(10),{selectedPanel:e}=Sc(),{toggleApplication:n}=sa(),o=b9;let r,s,i,a,l,d;return t[0]!==e||t[1]!==n?(r="h-full pt-4 pb-1 px-1 flex flex-col items-start text-muted-foreground text-md select-none no-print text-sm z-50 dark:bg-background print:hidden hide-on-fullscreen",s=yd.filter(x9).map(u=>c.jsx(nw,{tooltip:u.tooltip,selected:e===u.type,onClick:()=>n(u.type),children:o(u)},u.type)),t[0]=e,t[1]=n,t[2]=r,t[3]=s):(r=t[2],s=t[3]),t[4]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(m9,{children:c.jsx(nw,{tooltip:"Send feedback!",selected:!1,children:c.jsx(Hp,{className:"h-5 w-5"})})}),a=c.jsx("div",{className:"flex-1"}),l=c.jsx(_9,{}),t[4]=i,t[5]=a,t[6]=l):(i=t[4],a=t[5],l=t[6]),t[7]!==r||t[8]!==s?(d=c.jsxs("div",{className:r,children:[s,i,a,l]}),t[7]=r,t[8]=s,t[9]=d):d=t[9],d},_9=()=>{const t=K.c(7),e=Le(M$);let n,o,r;return t[0]!==e?(n=e>0?c.jsxs("span",{children:[e," cell",e>1?"s":""," queued or running"]}):"No cells queued or running",t[0]=e,t[1]=n):n=t[1],t[2]!==e?(o=c.jsx("div",{className:"flex flex-col-reverse gap-[1px] overflow-hidden",children:Array.from({length:e}).map(y9)}),t[2]=e,t[3]=o):o=t[3],t[4]!==n||t[5]!==o?(r=c.jsx(Te,{content:n,side:"right",delayDuration:200,children:o}),t[4]=n,t[5]=o,t[6]=r):r=t[6],r},nw=t=>{const e=K.c(17);let n,o,r,s,i;e[0]!==t?({children:n,tooltip:i,selected:s,className:o,...r}=t,e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=s,e[5]=i):(n=e[1],o=e[2],r=e[3],s=e[4],i=e[5]);const a=!s&&"hover:bg-[var(--sage-3)]",l=s&&"bg-[var(--sage-4)]";let d,u,h;return e[6]!==o||e[7]!==a||e[8]!==l?(d=Ne("flex items-center p-2 text-sm mx-[1px] shadow-inset font-mono cursor-pointer rounded",a,l,o),e[6]=o,e[7]=a,e[8]=l,e[9]=d):d=e[9],e[10]!==n||e[11]!==r||e[12]!==d?(u=c.jsx("div",{className:d,...r,children:n}),e[10]=n,e[11]=r,e[12]=d,e[13]=u):u=e[13],e[14]!==u||e[15]!==i?(h=c.jsx(Te,{content:i,side:"right",delayDuration:200,children:u}),e[14]=u,e[15]=i,e[16]=h):h=e[16],h};function b9(t,e){const{Icon:n}=t;return c.jsx(n,{className:Ne("h-5 w-5",e)})}function x9(t){return!t.hidden&&t.position==="sidebar"}function y9(t,e){return c.jsx("div",{className:"flex-shrink-0 h-1 w-2 bg-[var(--grass-6)] border border-[var(--grass-7)]"},e.toString())}var ch="ScrollArea",[ow,$W]=q4(ch),[w9,Ln]=ow(ch),rw=O.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:o="hover",dir:r,scrollHideDelay:s=600,...i}=t,[a,l]=O.useState(null),[d,u]=O.useState(null),[h,f]=O.useState(null),[m,_]=O.useState(null),[g,p]=O.useState(null),[b,x]=O.useState(0),[y,v]=O.useState(0),[C,S]=O.useState(!1),[E,N]=O.useState(!1),j=qs(e,A=>l(A)),T=O$(r);return c.jsx(w9,{scope:n,type:o,dir:T,scrollHideDelay:s,scrollArea:a,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:_,scrollbarXEnabled:C,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:p,scrollbarYEnabled:E,onScrollbarYEnabledChange:N,onCornerWidthChange:x,onCornerHeightChange:v,children:c.jsx($s.div,{dir:T,...i,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":y+"px",...t.style}})})});rw.displayName=ch;var sw="ScrollAreaViewport",iw=O.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:o,nonce:r,...s}=t,i=Ln(sw,n),a=O.useRef(null),l=qs(e,a,i.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx($s.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});iw.displayName=sw;var io="ScrollAreaScrollbar",dh=O.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=Ln(io,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=r,a=t.orientation==="horizontal";return O.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),r.type==="hover"?c.jsx(v9,{...o,ref:e,forceMount:n}):r.type==="scroll"?c.jsx(k9,{...o,ref:e,forceMount:n}):r.type==="auto"?c.jsx(aw,{...o,ref:e,forceMount:n}):r.type==="always"?c.jsx(uh,{...o,ref:e}):null});dh.displayName=io;var v9=O.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=Ln(io,t.__scopeScrollArea),[s,i]=O.useState(!1);return O.useEffect(()=>{const a=r.scrollArea;let l=0;if(a){const d=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),r.scrollHideDelay)};return a.addEventListener("pointerenter",d),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",d),a.removeEventListener("pointerleave",u)}}},[r.scrollArea,r.scrollHideDelay]),c.jsx(Xc,{present:n||s,children:c.jsx(aw,{"data-state":s?"visible":"hidden",...o,ref:e})})}),k9=O.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=Ln(io,t.__scopeScrollArea),s=t.orientation==="horizontal",i=Dl(()=>l("SCROLL_END"),100),[a,l]=function(d,u){return O.useReducer((h,f)=>u[h][f]??h,d)}("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return O.useEffect(()=>{if(a==="idle"){const d=window.setTimeout(()=>l("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(d)}},[a,r.scrollHideDelay,l]),O.useEffect(()=>{const d=r.viewport,u=s?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const m=d[u];h!==m&&(l("SCROLL"),i()),h=m};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[r.viewport,s,l,i]),c.jsx(Xc,{present:n||a!=="hidden",children:c.jsx(uh,{"data-state":a==="hidden"?"hidden":"visible",...o,ref:e,onPointerEnter:Gn(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Gn(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),aw=O.forwardRef((t,e)=>{const n=Ln(io,t.__scopeScrollArea),{forceMount:o,...r}=t,[s,i]=O.useState(!1),a=t.orientation==="horizontal",l=Dl(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?d:u)}},10);return hs(n.viewport,l),hs(n.content,l),c.jsx(Xc,{present:o||s,children:c.jsx(uh,{"data-state":s?"visible":"hidden",...r,ref:e})})}),uh=O.forwardRef((t,e)=>{const{orientation:n="vertical",...o}=t,r=Ln(io,t.__scopeScrollArea),s=O.useRef(null),i=O.useRef(0),[a,l]=O.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=hw(a.viewport,a.content),u={...o,sizes:a,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function h(f,m){return function(_,g,p,b="ltr"){const x=Ol(p),y=x/2,v=g||y,C=x-v,S=p.scrollbar.paddingStart+v,E=p.scrollbar.size-p.scrollbar.paddingEnd-C,N=p.content-p.viewport,j=b==="ltr"?[0,N]:[-1*N,0];return mw([S,E],j)(_)}(f,i.current,a,m)}return n==="horizontal"?c.jsx(S9,{...u,ref:e,onThumbPositionChange:()=>{if(r.viewport&&s.current){const f=fw(r.viewport.scrollLeft,a,r.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollLeft=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollLeft=h(f,r.dir))}}):n==="vertical"?c.jsx(C9,{...u,ref:e,onThumbPositionChange:()=>{if(r.viewport&&s.current){const f=fw(r.viewport.scrollTop,a);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollTop=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollTop=h(f))}}):null}),S9=O.forwardRef((t,e)=>{const{sizes:n,onSizesChange:o,...r}=t,s=Ln(io,t.__scopeScrollArea),[i,a]=O.useState(),l=O.useRef(null),d=qs(e,l,s.onScrollbarXChange);return O.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),c.jsx(cw,{"data-orientation":"horizontal",...r,ref:d,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ol(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(s.viewport){const f=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),pw(f,h)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&o({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Ml(i.paddingLeft),paddingEnd:Ml(i.paddingRight)}})}})}),C9=O.forwardRef((t,e)=>{const{sizes:n,onSizesChange:o,...r}=t,s=Ln(io,t.__scopeScrollArea),[i,a]=O.useState(),l=O.useRef(null),d=qs(e,l,s.onScrollbarYChange);return O.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),c.jsx(cw,{"data-orientation":"vertical",...r,ref:d,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ol(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(s.viewport){const f=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),pw(f,h)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&o({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Ml(i.paddingTop),paddingEnd:Ml(i.paddingBottom)}})}})}),[N9,lw]=ow(io),cw=O.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:o,hasThumb:r,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=t,m=Ln(io,n),[_,g]=O.useState(null),p=qs(e,j=>g(j)),b=O.useRef(null),x=O.useRef(""),y=m.viewport,v=o.content-o.viewport,C=_r(u),S=_r(l),E=Dl(h,10);function N(j){if(b.current){const T=j.clientX-b.current.left,A=j.clientY-b.current.top;d({x:T,y:A})}}return O.useEffect(()=>{const j=T=>{const A=T.target;(_==null?void 0:_.contains(A))&&C(T,v)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[y,_,v,C]),O.useEffect(S,[o,S]),hs(_,E),hs(m.content,E),c.jsx(N9,{scope:n,scrollbar:_,hasThumb:r,onThumbChange:_r(s),onThumbPointerUp:_r(i),onThumbPositionChange:S,onThumbPointerDown:_r(a),children:c.jsx($s.div,{...f,ref:p,style:{position:"absolute",...f.style},onPointerDown:Gn(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),b.current=_.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),N(j))}),onPointerMove:Gn(t.onPointerMove,N),onPointerUp:Gn(t.onPointerUp,j=>{const T=j.target;T.hasPointerCapture(j.pointerId)&&T.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),Tl="ScrollAreaThumb",dw=O.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=lw(Tl,t.__scopeScrollArea);return c.jsx(Xc,{present:n||r.hasThumb,children:c.jsx(j9,{ref:e,...o})})}),j9=O.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:o,...r}=t,s=Ln(Tl,n),i=lw(Tl,n),{onThumbPositionChange:a}=i,l=qs(e,h=>i.onThumbChange(h)),d=O.useRef(void 0),u=Dl(()=>{d.current&&(d.current(),d.current=void 0)},100);return O.useEffect(()=>{const h=s.viewport;if(h){const f=()=>{if(u(),!d.current){const m=I9(h,a);d.current=m,a()}};return a(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[s.viewport,u,a]),c.jsx($s.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:Gn(t.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),m=h.clientX-f.left,_=h.clientY-f.top;i.onThumbPointerDown({x:m,y:_})}),onPointerUp:Gn(t.onPointerUp,i.onThumbPointerUp)})});dw.displayName=Tl;var hh="ScrollAreaCorner",uw=O.forwardRef((t,e)=>{const n=Ln(hh,t.__scopeScrollArea),o=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&o?c.jsx(E9,{...t,ref:e}):null});uw.displayName=hh;var E9=O.forwardRef((t,e)=>{const{__scopeScrollArea:n,...o}=t,r=Ln(hh,n),[s,i]=O.useState(0),[a,l]=O.useState(0),d=!!(s&&a);return hs(r.scrollbarX,()=>{var h;const u=((h=r.scrollbarX)==null?void 0:h.offsetHeight)||0;r.onCornerHeightChange(u),l(u)}),hs(r.scrollbarY,()=>{var h;const u=((h=r.scrollbarY)==null?void 0:h.offsetWidth)||0;r.onCornerWidthChange(u),i(u)}),d?c.jsx($s.div,{...o,ref:e,style:{width:s,height:a,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ml(t){return t?parseInt(t,10):0}function hw(t,e){const n=t/e;return isNaN(n)?0:n}function Ol(t){const e=hw(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=(t.scrollbar.size-n)*e;return Math.max(o,18)}function fw(t,e,n="ltr"){const o=Ol(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-r,i=e.content-e.viewport,a=s-o,l=R$(t,n==="ltr"?[0,i]:[-1*i,0]);return mw([0,i],[0,a])(l)}function mw(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const o=(e[1]-e[0])/(t[1]-t[0]);return e[0]+o*(n-t[0])}}function pw(t,e){return t>0&&t<e}var I9=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},o=0;return function r(){const s={left:t.scrollLeft,top:t.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&e(),n=s,o=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(o)};function Dl(t,e){const n=_r(t),o=O.useRef(0);return O.useEffect(()=>()=>window.clearTimeout(o.current),[]),O.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(n,e)},[n,e])}function hs(t,e){const n=_r(e);D$(()=>{let o=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(o),r.unobserve(t)}}},[t,n])}var gw=rw,A9=iw,T9=uw;const _w=O.forwardRef((t,e)=>{const n=K.c(15);let o,r,s,i,a,l,d,u;return n[0]!==t?({className:r,children:o,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==r?(i=Ne("relative overflow-hidden",r),n[4]=r,n[5]=i):i=n[5],n[6]!==o?(a=c.jsx(A9,{className:"h-full w-full rounded-[inherit]",children:o}),n[6]=o,n[7]=a):a=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(bw,{}),d=c.jsx(T9,{}),n[8]=l,n[9]=d):(l=n[8],d=n[9]),n[10]!==s||n[11]!==e||n[12]!==i||n[13]!==a?(u=c.jsxs(gw,{ref:e,className:i,...s,children:[a,l,d]}),n[10]=s,n[11]=e,n[12]=i,n[13]=a,n[14]=u):u=n[14],u});_w.displayName=gw.displayName;const bw=O.forwardRef((t,e)=>{const n=K.c(14);let o,r,s;n[0]!==t?({className:o,orientation:s,...r}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]);const i=s===void 0?"vertical":s,a=i==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",l=i==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let d,u,h;return n[4]!==o||n[5]!==a||n[6]!==l?(d=Ne("flex touch-none select-none transition-colors",a,l,o),n[4]=o,n[5]=a,n[6]=l,n[7]=d):d=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(dw,{className:"relative flex-1 rounded-full bg-border"}),n[8]=u):u=n[8],n[9]!==i||n[10]!==r||n[11]!==e||n[12]!==d?(h=c.jsx(dh,{ref:e,orientation:i,className:d,...r,children:u}),n[9]=i,n[10]=r,n[11]=e,n[12]=d,n[13]=h):h=n[13],h});bw.displayName=dh.displayName;let fh;fh=(t,e,n,o,r,s)=>{if(!e)return vt.warn("No active chat"),t;const i=t.chats.findIndex(h=>h.id===e);if(i===-1)return vt.warn("No active chat"),t;const a=t.chats[i],l=a.messages.findIndex(h=>h.id===n),d=[...t.chats],u=Date.now();if(l===-1)d[i]={...a,messages:[...a.messages,{id:n,role:o,content:r,timestamp:u,parts:s}],updatedAt:u};else{const h=[...a.messages];h[l]={...h[l],content:r,parts:s},d[i]={...a,messages:h,updatedAt:u}}return{...t,chats:d}},yn=t=>{const e=K.c(15),{title:n,description:o,icon:r,action:s}=t;let i,a,l,d,u,h;return e[0]!==r?(i=r&&X.cloneElement(r,{className:"text-accent-foreground"}),e[0]=r,e[1]=i):i=e[1],e[2]!==n?(a=c.jsx("span",{className:"mt-1 text-accent-foreground",children:n}),e[2]=n,e[3]=a):a=e[3],e[4]!==i||e[5]!==a?(l=c.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[i,a]}),e[4]=i,e[5]=a,e[6]=l):l=e[6],e[7]!==o?(d=c.jsx("span",{className:"text-muted-foreground text-sm",children:o}),e[7]=o,e[8]=d):d=e[8],e[9]!==s?(u=s&&c.jsx("div",{className:"mt-2",children:s}),e[9]=s,e[10]=u):u=e[10],e[11]!==l||e[12]!==d||e[13]!==u?(h=c.jsxs("div",{className:"mx-6 my-6 flex flex-col gap-2",children:[l,d,u]}),e[11]=l,e[12]=d,e[13]=u,e[14]=h):h=e[14],h};function HW(){}function WW(){}const M9=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,O9=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,D9={};function xw(t,e){return(D9.jsx?O9:M9).test(t)}const R9=/[ \t\n\f\r]/g;function yw(t){return t.replace(R9,"")===""}class Ti{constructor(e,n,o){this.property=e,this.normal=n,o&&(this.space=o)}}function ww(t,e){const n={},o={};let r=-1;for(;++r<t.length;)Object.assign(n,t[r].property),Object.assign(o,t[r].normal);return new Ti(n,o,e)}function mh(t){return t.toLowerCase()}Ti.prototype.property={},Ti.prototype.normal={},Ti.prototype.space=null;class Fn{constructor(e,n){this.property=e,this.attribute=n}}Fn.prototype.space=null,Fn.prototype.boolean=!1,Fn.prototype.booleanish=!1,Fn.prototype.overloadedBoolean=!1,Fn.prototype.number=!1,Fn.prototype.commaSeparated=!1,Fn.prototype.spaceSeparated=!1,Fn.prototype.commaOrSpaceSeparated=!1,Fn.prototype.mustUseProperty=!1,Fn.prototype.defined=!1;let P9=0;const Ze=Or(),Pt=Or(),vw=Or(),ye=Or(),gt=Or(),fs=Or(),Sn=Or();function Or(){return 2**++P9}const ph=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ze,booleanish:Pt,commaOrSpaceSeparated:Sn,commaSeparated:fs,number:ye,overloadedBoolean:vw,spaceSeparated:gt},Symbol.toStringTag,{value:"Module"})),gh=Object.keys(ph);class _h extends Fn{constructor(e,n,o,r){let s=-1;if(super(e,n),kw(this,"space",r),typeof o=="number")for(;++s<gh.length;){const i=gh[s];kw(this,gh[s],(o&ph[i])===ph[i])}}}function kw(t,e,n){n&&(t[e]=n)}_h.prototype.defined=!0;const L9={}.hasOwnProperty;function ms(t){const e={},n={};let o;for(o in t.properties)if(L9.call(t.properties,o)){const r=t.properties[o],s=new _h(o,t.transform(t.attributes||{},o),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(o)&&(s.mustUseProperty=!0),e[o]=s,n[mh(o)]=o,n[mh(s.attribute)]=o}return new Ti(e,n,t.space)}const Sw=ms({space:"xlink",transform:(t,e)=>"xlink:"+e.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Cw=ms({space:"xml",transform:(t,e)=>"xml:"+e.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Nw(t,e){return e in t?t[e]:e}function jw(t,e){return Nw(t,e.toLowerCase())}const Ew=ms({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:jw,properties:{xmlns:null,xmlnsXLink:null}}),Iw=ms({transform:(t,e)=>e==="role"?e:"aria-"+e.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:Pt,ariaAutoComplete:null,ariaBusy:Pt,ariaChecked:Pt,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:gt,ariaCurrent:null,ariaDescribedBy:gt,ariaDetails:null,ariaDisabled:Pt,ariaDropEffect:gt,ariaErrorMessage:null,ariaExpanded:Pt,ariaFlowTo:gt,ariaGrabbed:Pt,ariaHasPopup:null,ariaHidden:Pt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gt,ariaLevel:ye,ariaLive:null,ariaModal:Pt,ariaMultiLine:Pt,ariaMultiSelectable:Pt,ariaOrientation:null,ariaOwns:gt,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:Pt,ariaReadOnly:Pt,ariaRelevant:null,ariaRequired:Pt,ariaRoleDescription:gt,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:Pt,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null}}),F9=ms({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:jw,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fs,acceptCharset:gt,accessKey:gt,action:null,allow:null,allowFullScreen:Ze,allowPaymentRequest:Ze,allowUserMedia:Ze,alt:null,as:null,async:Ze,autoCapitalize:null,autoComplete:gt,autoFocus:Ze,autoPlay:Ze,blocking:gt,capture:null,charSet:null,checked:Ze,cite:null,className:gt,cols:ye,colSpan:null,content:null,contentEditable:Pt,controls:Ze,controlsList:gt,coords:ye|fs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ze,defer:Ze,dir:null,dirName:null,disabled:Ze,download:vw,draggable:Pt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ze,formTarget:null,headers:gt,height:ye,hidden:Ze,high:ye,href:null,hrefLang:null,htmlFor:gt,httpEquiv:gt,id:null,imageSizes:null,imageSrcSet:null,inert:Ze,inputMode:null,integrity:null,is:null,isMap:Ze,itemId:null,itemProp:gt,itemRef:gt,itemScope:Ze,itemType:gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ze,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:Ze,muted:Ze,name:null,nonce:null,noModule:Ze,noValidate:Ze,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ze,optimum:ye,pattern:null,ping:gt,placeholder:null,playsInline:Ze,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ze,referrerPolicy:null,rel:gt,required:Ze,reversed:Ze,rows:ye,rowSpan:ye,sandbox:gt,scope:null,scoped:Ze,seamless:Ze,selected:Ze,shadowRootClonable:Ze,shadowRootDelegatesFocus:Ze,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:Pt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:Ze,useMap:null,value:Pt,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gt,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ze,declare:Ze,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:Ze,noHref:Ze,noShade:Ze,noWrap:Ze,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:Pt,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ze,disableRemotePlayback:Ze,prefix:null,property:null,results:ye,security:null,unselectable:null}}),z9=ms({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Nw,properties:{about:Sn,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:Ze,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fs,g2:fs,glyphName:fs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:Sn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sn,rev:Sn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sn,requiredFeatures:Sn,requiredFonts:Sn,requiredFormats:Sn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:Sn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sn,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),B9=/^data[-\w.:]+$/i,Aw=/-[a-z]/g,U9=/[A-Z]/g;function V9(t){return"-"+t.toLowerCase()}function $9(t){return t.charAt(1).toUpperCase()}const H9={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},W9=ww([Cw,Sw,Ew,Iw,F9],"html"),bh=ww([Cw,Sw,Ew,Iw,z9],"svg"),Tw=xS(P$()),q9=Tw.default||Tw,Mw=Ow("end"),xh=Ow("start");function Ow(t){return function(e){const n=e&&e.position&&e.position[t]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function Mi(t){return t&&typeof t=="object"?"position"in t||"type"in t?Dw(t.position):"start"in t||"end"in t?Dw(t):"line"in t||"column"in t?yh(t):"":""}function yh(t){return Rw(t&&t.line)+":"+Rw(t&&t.column)}function Dw(t){return yh(t&&t.start)+"-"+yh(t&&t.end)}function Rw(t){return t&&typeof t=="number"?t:1}class tn extends Error{constructor(e,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let r="",s={},i=!1;if(n&&(s="line"in n&&"column"in n||"start"in n&&"end"in n?{place:n}:"type"in n?{ancestors:[n],place:n.position}:{...n}),typeof e=="string"?r=e:!s.cause&&e&&(i=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof o=="string"){const l=o.indexOf(":");l===-1?s.ruleId=o:(s.source=o.slice(0,l),s.ruleId=o.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=Mi(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}tn.prototype.file="",tn.prototype.name="",tn.prototype.reason="",tn.prototype.message="",tn.prototype.stack="",tn.prototype.column=void 0,tn.prototype.line=void 0,tn.prototype.ancestors=void 0,tn.prototype.cause=void 0,tn.prototype.fatal=void 0,tn.prototype.place=void 0,tn.prototype.ruleId=void 0,tn.prototype.source=void 0;const wh={}.hasOwnProperty,G9=new Map,Y9=/[A-Z]/g,J9=/-([a-z])/g,K9=new Set(["table","tbody","thead","tfoot","tr"]),X9=new Set(["td","th"]),Pw="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Z9(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let o;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=function(i,a){return l;function l(d,u,h,f){const m=Array.isArray(h.children),_=xh(d);return a(u,h,f,m,{columnNumber:_?_.column-1:void 0,fileName:i,lineNumber:_?_.line:void 0},void 0)}}(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=function(i,a,l){return d;function d(u,h,f,m){const _=Array.isArray(f.children)?l:a;return m?_(h,f,m):_(h,f)}}(0,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:o,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?bh:W9,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Lw(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function Lw(t,e,n){return e.type==="element"?function(o,r,s){const i=o.schema;let a=i;r.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=bh,o.schema=a),o.ancestors.push(r);const l=zw(o,r.tagName,!1),d=function(h,f){const m={};let _,g;for(g in f.properties)if(g!=="children"&&wh.call(f.properties,g)){const p=Q9(h,g,f.properties[g]);if(p){const[b,x]=p;h.tableCellAlignToStyle&&b==="align"&&typeof x=="string"&&X9.has(f.tagName)?_=x:m[b]=x}}return _&&((m.style||(m.style={}))[h.stylePropertyNameCase==="css"?"text-align":"textAlign"]=_),m}(o,r);let u=kh(o,r);return K9.has(r.tagName)&&(u=u.filter(function(h){return typeof h!="string"||!(typeof(f=h)=="object"?f.type==="text"&&yw(f.value):yw(f));var f})),Fw(o,d,l,r),vh(d,u),o.ancestors.pop(),o.schema=i,o.create(r,l,d,s)}(t,e,n):e.type==="mdxFlowExpression"||e.type==="mdxTextExpression"?function(o,r){if(r.data&&r.data.estree&&o.evaluater){const s=r.data.estree.body[0];return s.type,o.evaluater.evaluateExpression(s.expression)}Oi(o,r.position)}(t,e):e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement"?function(o,r,s){const i=o.schema;let a=i;r.name==="svg"&&i.space==="html"&&(a=bh,o.schema=a),o.ancestors.push(r);const l=r.name===null?o.Fragment:zw(o,r.name,!0),d=function(h,f){const m={};for(const _ of f.attributes)if(_.type==="mdxJsxExpressionAttribute")if(_.data&&_.data.estree&&h.evaluater){const g=_.data.estree.body[0];g.type;const p=g.expression;p.type;const b=p.properties[0];b.type,Object.assign(m,h.evaluater.evaluateExpression(b.argument))}else Oi(h,f.position);else{const g=_.name;let p;if(_.value&&typeof _.value=="object")if(_.value.data&&_.value.data.estree&&h.evaluater){const b=_.value.data.estree.body[0];b.type,p=h.evaluater.evaluateExpression(b.expression)}else Oi(h,f.position);else p=_.value===null||_.value;m[g]=p}return m}(o,r),u=kh(o,r);return Fw(o,d,l,r),vh(d,u),o.ancestors.pop(),o.schema=i,o.create(r,l,d,s)}(t,e,n):e.type==="mdxjsEsm"?function(o,r){if(r.data&&r.data.estree&&o.evaluater)return o.evaluater.evaluateProgram(r.data.estree);Oi(o,r.position)}(t,e):e.type==="root"?function(o,r,s){const i={};return vh(i,kh(o,r)),o.create(r,o.Fragment,i,s)}(t,e,n):e.type==="text"?function(o,r){return r.value}(0,e):void 0}function Fw(t,e,n,o){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=o)}function vh(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function kh(t,e){const n=[];let o=-1;const r=t.passKeys?new Map:G9;for(;++o<e.children.length;){const s=e.children[o];let i;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const d=r.get(l)||0;i=l+"-"+d,r.set(l,d+1)}}const a=Lw(t,s,i);a!==void 0&&n.push(a)}return n}function Q9(t,e,n){const o=function(r,s){const i=mh(s);let a=s,l=Fn;if(i in r.normal)return r.property[r.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&B9.test(s)){if(s.charAt(4)==="-"){const d=s.slice(5).replace(Aw,$9);a="data"+d.charAt(0).toUpperCase()+d.slice(1)}else{const d=s.slice(4);if(!Aw.test(d)){let u=d.replace(U9,V9);u.charAt(0)!=="-"&&(u="-"+u),s="data"+u}}l=_h}return new l(a,s)}(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=o.commaSeparated?function(r){const s={};return(r[r.length-1]===""?[...r,""]:r).join((s.padRight?" ":"")+","+(s.padLeft===!1?"":" ")).trim()}(n):n.join(" ").trim()),o.property==="style"){let r=typeof n=="object"?n:function(s,i){const a={};try{q9(i,l)}catch(d){if(!s.ignoreInvalidStyle){const u=d,h=new tn("Cannot parse `style` attribute",{ancestors:s.ancestors,cause:u,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw h.file=s.filePath||void 0,h.url=Pw+"#cannot-parse-style-attribute",h}}return a;function l(d,u){let h=d;h.slice(0,2)!=="--"&&(h.slice(0,4)==="-ms-"&&(h="ms-"+h.slice(4)),h=h.replace(J9,tD)),a[h]=u}}(t,String(n));return t.stylePropertyNameCase==="css"&&(r=function(s){const i={};let a;for(a in s)wh.call(s,a)&&(i[eD(a)]=s[a]);return i}(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&o.space?H9[o.property]||o.property:o.attribute,n]}}function zw(t,e,n){let o;if(n)if(e.includes(".")){const r=e.split(".");let s,i=-1;for(;++i<r.length;){const a=xw(r[i])?{type:"Identifier",name:r[i]}:{type:"Literal",value:r[i]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}o=s}else o=xw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};else o={type:"Literal",value:e};if(o.type==="Literal"){const r=o.value;return wh.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(o);Oi(t)}function Oi(t,e){const n=new tn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Pw+"#cannot-handle-mdx-estrees-without-createevaluater",n}function eD(t){let e=t.replace(Y9,nD);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function tD(t,e){return e.toUpperCase()}function nD(t){return"-"+t.toLowerCase()}const Sh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Rl={};function Bw(t,e,n){if(function(o){return!!(o&&typeof o=="object")}(t)){if("value"in t)return t.type!=="html"||n?t.value:"";if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Uw(t.children,e,n)}return Array.isArray(t)?Uw(t,e,n):""}function Uw(t,e,n){const o=[];let r=-1;for(;++r<t.length;)o[r]=Bw(t[r],e,n);return o.join("")}const Vw=document.createElement("i");function Ch(t){const e="&"+t+";";Vw.innerHTML=e;const n=Vw.textContent;return(n.charCodeAt(n.length-1)!==59||t==="semi")&&n!==e&&n}function ao(t,e,n,o){const r=t.length;let s,i=0;if(e=e<0?-e>r?0:r+e:e>r?r:e,n=n>0?n:0,o.length<1e4)s=Array.from(o),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);i<o.length;)s=o.slice(i,i+1e4),s.unshift(e,0),t.splice(...s),i+=1e4,e+=1e4}function zn(t,e){return t.length>0?(ao(t,t.length,0,e),t):e}const $w={}.hasOwnProperty;function oD(t,e){let n;for(n in e){const o=($w.call(t,n)?t[n]:void 0)||(t[n]={}),r=e[n];let s;if(r)for(s in r){$w.call(o,s)||(o[s]=[]);const i=r[s];rD(o[s],Array.isArray(i)?i:i?[i]:[])}}}function rD(t,e){let n=-1;const o=[];for(;++n<e.length;)(e[n].add==="after"?t:o).push(e[n]);ao(t,0,0,o)}function Hw(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||(65535&n)==65534||n>1114111?"\uFFFD":String.fromCodePoint(n)}function ps(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const lo=Xo(/[A-Za-z]/),Cn=Xo(/[\dA-Za-z]/),sD=Xo(/[#-'*+\--9=?A-Z^-~]/);function Nh(t){return t!==null&&(t<32||t===127)}const jh=Xo(/\d/),iD=Xo(/[\dA-Fa-f]/),aD=Xo(/[!-/:-@[-`{-~]/);function Je(t){return t!==null&&t<-2}function pn(t){return t!==null&&(t<0||t===32)}function ut(t){return t===-2||t===-1||t===32}const lD=Xo(new RegExp("\\p{P}|\\p{S}","u")),cD=Xo(/\s/);function Xo(t){return function(e){return e!==null&&e>-1&&t.test(String.fromCharCode(e))}}function gs(t){const e=[];let n=-1,o=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let i="";if(s===37&&Cn(t.charCodeAt(n+1))&&Cn(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(i=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(i=String.fromCharCode(s,a),r=1):i="\uFFFD"}else i=String.fromCharCode(s);i&&(e.push(t.slice(o,n),encodeURIComponent(i)),o=n+r+1,i=""),r&&(n+=r,r=0)}return e.join("")+t.slice(o)}function _t(t,e,n,o){const r=o?o-1:Number.POSITIVE_INFINITY;let s=0;return function(a){return ut(a)?(t.enter(n),i(a)):e(a)};function i(a){return ut(a)&&s++<r?(t.consume(a),i):(t.exit(n),e(a))}}const dD={tokenize:function(t){const e=t.attempt(this.parser.constructs.contentInitial,function(s){return s===null?void t.consume(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),_t(t,e,"linePrefix"))},function(s){return t.enter("paragraph"),o(s)});let n;return e;function o(s){const i=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=i),n=i,r(s)}function r(s){return s===null?(t.exit("chunkText"),t.exit("paragraph"),void t.consume(s)):Je(s)?(t.consume(s),t.exit("chunkText"),o):(t.consume(s),r)}}},uD={tokenize:function(t){const e=this,n=[];let o,r,s,i=0;return a;function a(y){if(i<n.length){const v=n[i];return e.containerState=v[1],t.attempt(v[0].continuation,l,d)(y)}return d(y)}function l(y){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&x();const v=e.events.length;let C,S=v;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){C=e.events[S][1].end;break}b(i);let E=v;for(;E<e.events.length;)e.events[E][1].end={...C},E++;return ao(e.events,S+1,0,e.events.slice(v)),e.events.length=E,d(y)}return a(y)}function d(y){if(i===n.length){if(!o)return f(y);if(o.currentConstruct&&o.currentConstruct.concrete)return _(y);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Ww,u,h)(y)}function u(y){return o&&x(),b(i),f(y)}function h(y){return e.parser.lazy[e.now().line]=i!==n.length,s=e.now().offset,_(y)}function f(y){return e.containerState={},t.attempt(Ww,m,_)(y)}function m(y){return i++,n.push([e.currentConstruct,e.containerState]),f(y)}function _(y){return y===null?(o&&x(),b(0),void t.consume(y)):(o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:r}),g(y))}function g(y){return y===null?(p(t.exit("chunkFlow"),!0),b(0),void t.consume(y)):Je(y)?(t.consume(y),p(t.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(t.consume(y),g)}function p(y,v){const C=e.sliceStream(y);if(v&&C.push(null),y.previous=r,r&&(r.next=y),r=y,o.defineSkip(y.start),o.write(C),e.parser.lazy[y.start.line]){let S=o.events.length;for(;S--;)if(o.events[S][1].start.offset<s&&(!o.events[S][1].end||o.events[S][1].end.offset>s))return;const E=e.events.length;let N,j,T=E;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(N){j=e.events[T][1].end;break}N=!0}for(b(i),S=E;S<e.events.length;)e.events[S][1].end={...j},S++;ao(e.events,T+1,0,e.events.slice(E)),e.events.length=S}}function b(y){let v=n.length;for(;v-- >y;){const C=n[v];e.containerState=C[1],C[0].exit.call(e,t)}n.length=y}function x(){o.write([null]),r=void 0,o=void 0,e.containerState._closeFlow=void 0}}},Ww={tokenize:function(t,e,n){return _t(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function qw(t){return t===null||pn(t)||cD(t)?1:lD(t)?2:void 0}function Eh(t,e,n){const o=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!o.includes(s)&&(e=s(e,n),o.push(s))}return e}const Ih={name:"attention",resolveAll:function(t,e){let n,o,r,s,i,a,l,d,u=-1;for(;++u<t.length;)if(t[u][0]==="enter"&&t[u][1].type==="attentionSequence"&&t[u][1]._close){for(n=u;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[u][1]).charCodeAt(0)){if((t[n][1]._close||t[u][1]._open)&&(t[u][1].end.offset-t[u][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[u][1].end.offset-t[u][1].start.offset)%3))continue;a=t[n][1].end.offset-t[n][1].start.offset>1&&t[u][1].end.offset-t[u][1].start.offset>1?2:1;const h={...t[n][1].end},f={...t[u][1].start};Gw(h,-a),Gw(f,a),s={type:a>1?"strongSequence":"emphasisSequence",start:h,end:{...t[n][1].end}},i={type:a>1?"strongSequence":"emphasisSequence",start:{...t[u][1].start},end:f},r={type:a>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[u][1].start}},o={type:a>1?"strong":"emphasis",start:{...s.start},end:{...i.end}},t[n][1].end={...s.start},t[u][1].start={...i.end},l=[],t[n][1].end.offset-t[n][1].start.offset&&(l=zn(l,[["enter",t[n][1],e],["exit",t[n][1],e]])),l=zn(l,[["enter",o,e],["enter",s,e],["exit",s,e],["enter",r,e]]),l=zn(l,Eh(e.parser.constructs.insideSpan.null,t.slice(n+1,u),e)),l=zn(l,[["exit",r,e],["enter",i,e],["exit",i,e],["exit",o,e]]),t[u][1].end.offset-t[u][1].start.offset?(d=2,l=zn(l,[["enter",t[u][1],e],["exit",t[u][1],e]])):d=0,ao(t,n-1,u-n+3,l),u=n+l.length-d-2;break}}for(u=-1;++u<t.length;)t[u][1].type==="attentionSequence"&&(t[u][1].type="data");return t},tokenize:function(t,e){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,r=qw(o);let s;return function(a){return s=a,t.enter("attentionSequence"),i(a)};function i(a){if(a===s)return t.consume(a),i;const l=t.exit("attentionSequence"),d=qw(a),u=!d||d===2&&r||n.includes(a),h=!r||r===2&&d||n.includes(o);return l._open=!!(s===42?u:u&&(r||!h)),l._close=!!(s===42?h:h&&(d||!u)),e(a)}}};function Gw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const hD={name:"autolink",tokenize:function(t,e,n){let o=0;return function(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),r};function r(f){return lo(f)?(t.consume(f),s):f===64?n(f):l(f)}function s(f){return f===43||f===45||f===46||Cn(f)?(o=1,i(f)):l(f)}function i(f){return f===58?(t.consume(f),o=0,a):(f===43||f===45||f===46||Cn(f))&&o++<32?(t.consume(f),i):(o=0,l(f))}function a(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||Nh(f)?n(f):(t.consume(f),a)}function l(f){return f===64?(t.consume(f),d):sD(f)?(t.consume(f),l):n(f)}function d(f){return Cn(f)?u(f):n(f)}function u(f){return f===46?(t.consume(f),o=0,d):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||Cn(f))&&o++<63){const m=f===45?h:u;return t.consume(f),m}return n(f)}}},Pl={partial:!0,tokenize:function(t,e,n){return function(r){return ut(r)?_t(t,o,"linePrefix")(r):o(r)};function o(r){return r===null||Je(r)?e(r):n(r)}}},Yw={continuation:{tokenize:function(t,e,n){const o=this;return function(s){return ut(s)?_t(t,r,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):r(s)};function r(s){return t.attempt(Yw,e,n)(s)}}},exit:function(t){t.exit("blockQuote")},name:"blockQuote",tokenize:function(t,e,n){const o=this;return function(s){if(s===62){const i=o.containerState;return i.open||(t.enter("blockQuote",{_container:!0}),i.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),r}return n(s)};function r(s){return ut(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}},Jw={name:"characterEscape",tokenize:function(t,e,n){return function(r){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(r),t.exit("escapeMarker"),o};function o(r){return aD(r)?(t.enter("characterEscapeValue"),t.consume(r),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(r)}}},Kw={name:"characterReference",tokenize:function(t,e,n){const o=this;let r,s,i=0;return function(u){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),a};function a(u){return u===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(u),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),r=31,s=Cn,d(u))}function l(u){return u===88||u===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(u),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),r=6,s=iD,d):(t.enter("characterReferenceValue"),r=7,s=jh,d(u))}function d(u){if(u===59&&i){const h=t.exit("characterReferenceValue");return s!==Cn||Ch(o.sliceSerialize(h))?(t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),t.exit("characterReference"),e):n(u)}return s(u)&&i++<r?(t.consume(u),d):n(u)}}},Xw={partial:!0,tokenize:function(t,e,n){const o=this;return function(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r)};function r(s){return o.parser.lazy[o.now().line]?n(s):e(s)}}},Zw={concrete:!0,name:"codeFenced",tokenize:function(t,e,n){const o=this,r={partial:!0,tokenize:function(y,v,C){let S=0;return E;function E(M){return y.enter("lineEnding"),y.consume(M),y.exit("lineEnding"),N}function N(M){return y.enter("codeFencedFence"),ut(M)?_t(y,j,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):j(M)}function j(M){return M===s?(y.enter("codeFencedFenceSequence"),T(M)):C(M)}function T(M){return M===s?(S++,y.consume(M),T):S>=a?(y.exit("codeFencedFenceSequence"),ut(M)?_t(y,A,"whitespace")(M):A(M)):C(M)}function A(M){return M===null||Je(M)?(y.exit("codeFencedFence"),v(M)):C(M)}}};let s,i=0,a=0;return function(y){return function(v){const C=o.events[o.events.length-1];return i=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,s=v,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),l(v)}(y)};function l(y){return y===s?(a++,t.consume(y),l):a<3?n(y):(t.exit("codeFencedFenceSequence"),ut(y)?_t(t,d,"whitespace")(y):d(y))}function d(y){return y===null||Je(y)?(t.exit("codeFencedFence"),o.interrupt?e(y):t.check(Xw,m,x)(y)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),u(y))}function u(y){return y===null||Je(y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(y)):ut(y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),_t(t,h,"whitespace")(y)):y===96&&y===s?n(y):(t.consume(y),u)}function h(y){return y===null||Je(y)?d(y):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===null||Je(y)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(y)):y===96&&y===s?n(y):(t.consume(y),f)}function m(y){return t.attempt(r,x,_)(y)}function _(y){return t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),g}function g(y){return i>0&&ut(y)?_t(t,p,"linePrefix",i+1)(y):p(y)}function p(y){return y===null||Je(y)?t.check(Xw,m,x)(y):(t.enter("codeFlowValue"),b(y))}function b(y){return y===null||Je(y)?(t.exit("codeFlowValue"),p(y)):(t.consume(y),b)}function x(y){return t.exit("codeFenced"),e(y)}}},Ah={name:"codeIndented",tokenize:function(t,e,n){const o=this;return function(l){return t.enter("codeIndented"),_t(t,r,"linePrefix",5)(l)};function r(l){const d=o.events[o.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?a(l):Je(l)?t.attempt(fD,s,a)(l):(t.enter("codeFlowValue"),i(l))}function i(l){return l===null||Je(l)?(t.exit("codeFlowValue"),s(l)):(t.consume(l),i)}function a(l){return t.exit("codeIndented"),e(l)}}},fD={partial:!0,tokenize:function(t,e,n){const o=this;return r;function r(i){return o.parser.lazy[o.now().line]?n(i):Je(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),r):_t(t,s,"linePrefix",5)(i)}function s(i){const a=o.events[o.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(i):Je(i)?r(i):n(i)}}},mD={name:"codeText",previous:function(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"},resolve:function(t){let e,n,o=t.length-4,r=3;if(!(t[r][1].type!=="lineEnding"&&t[r][1].type!=="space"||t[o][1].type!=="lineEnding"&&t[o][1].type!=="space")){for(e=r;++e<o;)if(t[e][1].type==="codeTextData"){t[r][1].type="codeTextPadding",t[o][1].type="codeTextPadding",r+=2,o-=2;break}}for(e=r-1,o++;++e<=o;)n===void 0?e!==o&&t[e][1].type!=="lineEnding"&&(n=e):e!==o&&t[e][1].type!=="lineEnding"||(t[n][1].type="codeTextData",e!==n+2&&(t[n][1].end=t[e-1][1].end,t.splice(n+2,e-n-2),o-=e-n-2,e=n+2),n=void 0);return t},tokenize:function(t,e,n){let o,r,s=0;return function(u){return t.enter("codeText"),t.enter("codeTextSequence"),i(u)};function i(u){return u===96?(t.consume(u),s++,i):(t.exit("codeTextSequence"),a(u))}function a(u){return u===null?n(u):u===32?(t.enter("space"),t.consume(u),t.exit("space"),a):u===96?(r=t.enter("codeTextSequence"),o=0,d(u)):Je(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),a):(t.enter("codeTextData"),l(u))}function l(u){return u===null||u===32||u===96||Je(u)?(t.exit("codeTextData"),a(u)):(t.consume(u),l)}function d(u){return u===96?(t.consume(u),o++,d):o===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(u)):(r.type="codeTextData",l(u))}}};class pD{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(e,o):e>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(e,n,o){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return o&&Di(this.left,o),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Di(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Di(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Di(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Di(this.left,n.reverse())}}}function Di(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Qw(t){const e={};let n,o,r,s,i,a,l,d=-1;const u=new pD(t);for(;++d<u.length;){for(;d in e;)d=e[d];if(n=u.get(d),d&&n[1].type==="chunkFlow"&&u.get(d-1)[1].type==="listItemPrefix"&&(a=n[1]._tokenizer.events,r=0,r<a.length&&a[r][1].type==="lineEndingBlank"&&(r+=2),r<a.length&&a[r][1].type==="content"))for(;++r<a.length&&a[r][1].type!=="content";)a[r][1].type==="chunkText"&&(a[r][1]._isInFirstContentOfListItem=!0,r++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,gD(u,d)),d=e[d],l=!0);else if(n[1]._container){for(r=d,o=void 0;r--&&(s=u.get(r),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(o&&(u.get(o)[1].type="lineEndingBlank"),s[1].type="lineEnding",o=r);o&&(n[1].end={...u.get(o)[1].start},i=u.slice(o,d),i.unshift(n),u.splice(o,d-o+1,i))}}return ao(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function gD(t,e){const n=t.get(e)[1],o=t.get(e)[2];let r=e-1;const s=[],i=n._tokenizer||o.parser[n.contentType](n.start),a=i.events,l=[],d={};let u,h,f=-1,m=n,_=0,g=0;const p=[g];for(;m;){for(;t.get(++r)[1]!==m;);s.push(r),m._tokenizer||(u=o.sliceStream(m),m.next||u.push(null),h&&i.defineSkip(m.start),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,p.push(g),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(i.events=[],m?(m._tokenizer=void 0,m.previous=void 0):p.pop(),f=p.length;f--;){const b=a.slice(p[f],p[f+1]),x=s.pop();l.push([x,x+b.length-1]),t.splice(x,2,b)}for(l.reverse(),f=-1;++f<l.length;)d[_+l[f][0]]=_+l[f][1],_+=l[f][1]-l[f][0]-1;return d}const _D={resolve:function(t){return Qw(t),t},tokenize:function(t,e){let n;return function(i){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(i)};function o(i){return i===null?r(i):Je(i)?t.check(bD,s,r)(i):(t.consume(i),o)}function r(i){return t.exit("chunkContent"),t.exit("content"),e(i)}function s(i){return t.consume(i),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}},bD={partial:!0,tokenize:function(t,e,n){const o=this;return function(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),_t(t,r,"linePrefix")};function r(s){if(s===null||Je(s))return n(s);const i=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(s):t.interrupt(o.parser.constructs.flow,n,e)(s)}}};function ev(t,e,n,o,r,s,i,a,l){const d=l||Number.POSITIVE_INFINITY;let u=0;return function(p){return p===60?(t.enter(o),t.enter(r),t.enter(s),t.consume(p),t.exit(s),h):p===null||p===32||p===41||Nh(p)?n(p):(t.enter(o),t.enter(i),t.enter(a),t.enter("chunkString",{contentType:"string"}),_(p))};function h(p){return p===62?(t.enter(s),t.consume(p),t.exit(s),t.exit(r),t.exit(o),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===62?(t.exit("chunkString"),t.exit(a),h(p)):p===null||p===60||Je(p)?n(p):(t.consume(p),p===92?m:f)}function m(p){return p===60||p===62||p===92?(t.consume(p),f):f(p)}function _(p){return u||p!==null&&p!==41&&!pn(p)?u<d&&p===40?(t.consume(p),u++,_):p===41?(t.consume(p),u--,_):p===null||p===32||p===40||Nh(p)?n(p):(t.consume(p),p===92?g:_):(t.exit("chunkString"),t.exit(a),t.exit(i),t.exit(o),e(p))}function g(p){return p===40||p===41||p===92?(t.consume(p),_):_(p)}}function tv(t,e,n,o,r,s){const i=this;let a,l=0;return function(f){return t.enter(o),t.enter(r),t.consume(f),t.exit(r),t.enter(s),d};function d(f){return l>999||f===null||f===91||f===93&&!a||f===94&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(f):f===93?(t.exit(s),t.enter(r),t.consume(f),t.exit(r),t.exit(o),e):Je(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===null||f===91||f===93||Je(f)||l++>999?(t.exit("chunkString"),d(f)):(t.consume(f),a||(a=!ut(f)),f===92?h:u)}function h(f){return f===91||f===92||f===93?(t.consume(f),l++,u):u(f)}}function nv(t,e,n,o,r,s){let i;return function(h){return h===34||h===39||h===40?(t.enter(o),t.enter(r),t.consume(h),t.exit(r),i=h===40?41:h,a):n(h)};function a(h){return h===i?(t.enter(r),t.consume(h),t.exit(r),t.exit(o),e):(t.enter(s),l(h))}function l(h){return h===i?(t.exit(s),a(i)):h===null?n(h):Je(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),_t(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===i||h===null||Je(h)?(t.exit("chunkString"),l(h)):(t.consume(h),h===92?u:d)}function u(h){return h===i||h===92?(t.consume(h),d):d(h)}}function Ri(t,e){let n;return function o(r){return Je(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,o):ut(r)?_t(t,o,n?"linePrefix":"lineSuffix")(r):e(r)}}const xD={name:"definition",tokenize:function(t,e,n){const o=this;let r;return function(h){return t.enter("definition"),function(f){return tv.call(o,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}(h)};function s(h){return r=ps(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),i):n(h)}function i(h){return pn(h)?Ri(t,a)(h):a(h)}function a(h){return ev(t,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function l(h){return t.attempt(yD,d,d)(h)}function d(h){return ut(h)?_t(t,u,"whitespace")(h):u(h)}function u(h){return h===null||Je(h)?(t.exit("definition"),o.parser.defined.push(r),e(h)):n(h)}}},yD={partial:!0,tokenize:function(t,e,n){return function(i){return pn(i)?Ri(t,o)(i):n(i)};function o(i){return nv(t,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function r(i){return ut(i)?_t(t,s,"whitespace")(i):s(i)}function s(i){return i===null||Je(i)?e(i):n(i)}}},wD={name:"hardBreakEscape",tokenize:function(t,e,n){return function(r){return t.enter("hardBreakEscape"),t.consume(r),o};function o(r){return Je(r)?(t.exit("hardBreakEscape"),e(r)):n(r)}}},vD={name:"headingAtx",resolve:function(t,e){let n,o,r=t.length-2,s=3;return t[s][1].type==="whitespace"&&(s+=2),r-2>s&&t[r][1].type==="whitespace"&&(r-=2),t[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&t[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(n={type:"atxHeadingText",start:t[s][1].start,end:t[r][1].end},o={type:"chunkText",start:t[s][1].start,end:t[r][1].end,contentType:"text"},ao(t,s,r-s+1,[["enter",n,e],["enter",o,e],["exit",o,e],["exit",n,e]])),t},tokenize:function(t,e,n){let o=0;return function(l){return t.enter("atxHeading"),function(d){return t.enter("atxHeadingSequence"),r(d)}(l)};function r(l){return l===35&&o++<6?(t.consume(l),r):l===null||pn(l)?(t.exit("atxHeadingSequence"),s(l)):n(l)}function s(l){return l===35?(t.enter("atxHeadingSequence"),i(l)):l===null||Je(l)?(t.exit("atxHeading"),e(l)):ut(l)?_t(t,s,"whitespace")(l):(t.enter("atxHeadingText"),a(l))}function i(l){return l===35?(t.consume(l),i):(t.exit("atxHeadingSequence"),s(l))}function a(l){return l===null||l===35||pn(l)?(t.exit("atxHeadingText"),s(l)):(t.consume(l),a)}}},kD=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ov=["pre","script","style","textarea"],SD={concrete:!0,name:"htmlFlow",resolveTo:function(t){let e=t.length;for(;e--&&(t[e][0]!=="enter"||t[e][1].type!=="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t},tokenize:function(t,e,n){const o=this;let r,s,i,a,l;return function(I){return function(W){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(W),d}(I)};function d(I){return I===33?(t.consume(I),u):I===47?(t.consume(I),s=!0,m):I===63?(t.consume(I),r=3,o.interrupt?e:D):lo(I)?(t.consume(I),i=String.fromCharCode(I),_):n(I)}function u(I){return I===45?(t.consume(I),r=2,h):I===91?(t.consume(I),r=5,a=0,f):lo(I)?(t.consume(I),r=4,o.interrupt?e:D):n(I)}function h(I){return I===45?(t.consume(I),o.interrupt?e:D):n(I)}function f(I){return I==="CDATA[".charCodeAt(a++)?(t.consume(I),a===6?o.interrupt?e:T:f):n(I)}function m(I){return lo(I)?(t.consume(I),i=String.fromCharCode(I),_):n(I)}function _(I){if(I===null||I===47||I===62||pn(I)){const W=I===47,G=i.toLowerCase();return W||s||!ov.includes(G)?kD.includes(i.toLowerCase())?(r=6,W?(t.consume(I),g):o.interrupt?e(I):T(I)):(r=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(I):s?p(I):b(I)):(r=1,o.interrupt?e(I):T(I))}return I===45||Cn(I)?(t.consume(I),i+=String.fromCharCode(I),_):n(I)}function g(I){return I===62?(t.consume(I),o.interrupt?e:T):n(I)}function p(I){return ut(I)?(t.consume(I),p):N(I)}function b(I){return I===47?(t.consume(I),N):I===58||I===95||lo(I)?(t.consume(I),x):ut(I)?(t.consume(I),b):N(I)}function x(I){return I===45||I===46||I===58||I===95||Cn(I)?(t.consume(I),x):y(I)}function y(I){return I===61?(t.consume(I),v):ut(I)?(t.consume(I),y):b(I)}function v(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),l=I,C):ut(I)?(t.consume(I),v):S(I)}function C(I){return I===l?(t.consume(I),l=null,E):I===null||Je(I)?n(I):(t.consume(I),C)}function S(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||pn(I)?y(I):(t.consume(I),S)}function E(I){return I===47||I===62||ut(I)?b(I):n(I)}function N(I){return I===62?(t.consume(I),j):n(I)}function j(I){return I===null||Je(I)?T(I):ut(I)?(t.consume(I),j):n(I)}function T(I){return I===45&&r===2?(t.consume(I),R):I===60&&r===1?(t.consume(I),L):I===62&&r===4?(t.consume(I),k):I===63&&r===3?(t.consume(I),D):I===93&&r===5?(t.consume(I),U):!Je(I)||r!==6&&r!==7?I===null||Je(I)?(t.exit("htmlFlowData"),A(I)):(t.consume(I),T):(t.exit("htmlFlowData"),t.check(CD,$,A)(I))}function A(I){return t.check(ND,M,$)(I)}function M(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),P}function P(I){return I===null||Je(I)?A(I):(t.enter("htmlFlowData"),T(I))}function R(I){return I===45?(t.consume(I),D):T(I)}function L(I){return I===47?(t.consume(I),i="",B):T(I)}function B(I){if(I===62){const W=i.toLowerCase();return ov.includes(W)?(t.consume(I),k):T(I)}return lo(I)&&i.length<8?(t.consume(I),i+=String.fromCharCode(I),B):T(I)}function U(I){return I===93?(t.consume(I),D):T(I)}function D(I){return I===62?(t.consume(I),k):I===45&&r===2?(t.consume(I),D):T(I)}function k(I){return I===null||Je(I)?(t.exit("htmlFlowData"),$(I)):(t.consume(I),k)}function $(I){return t.exit("htmlFlow"),e(I)}}},CD={partial:!0,tokenize:function(t,e,n){return function(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(Pl,e,n)}}},ND={partial:!0,tokenize:function(t,e,n){const o=this;return function(s){return Je(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r):n(s)};function r(s){return o.parser.lazy[o.now().line]?n(s):e(s)}}},jD={name:"htmlText",tokenize:function(t,e,n){const o=this;let r,s,i;return function(k){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(k),a};function a(k){return k===33?(t.consume(k),l):k===47?(t.consume(k),v):k===63?(t.consume(k),x):lo(k)?(t.consume(k),E):n(k)}function l(k){return k===45?(t.consume(k),d):k===91?(t.consume(k),s=0,m):lo(k)?(t.consume(k),b):n(k)}function d(k){return k===45?(t.consume(k),f):n(k)}function u(k){return k===null?n(k):k===45?(t.consume(k),h):Je(k)?(i=u,B(k)):(t.consume(k),u)}function h(k){return k===45?(t.consume(k),f):u(k)}function f(k){return k===62?L(k):k===45?h(k):u(k)}function m(k){return k==="CDATA[".charCodeAt(s++)?(t.consume(k),s===6?_:m):n(k)}function _(k){return k===null?n(k):k===93?(t.consume(k),g):Je(k)?(i=_,B(k)):(t.consume(k),_)}function g(k){return k===93?(t.consume(k),p):_(k)}function p(k){return k===62?L(k):k===93?(t.consume(k),p):_(k)}function b(k){return k===null||k===62?L(k):Je(k)?(i=b,B(k)):(t.consume(k),b)}function x(k){return k===null?n(k):k===63?(t.consume(k),y):Je(k)?(i=x,B(k)):(t.consume(k),x)}function y(k){return k===62?L(k):x(k)}function v(k){return lo(k)?(t.consume(k),C):n(k)}function C(k){return k===45||Cn(k)?(t.consume(k),C):S(k)}function S(k){return Je(k)?(i=S,B(k)):ut(k)?(t.consume(k),S):L(k)}function E(k){return k===45||Cn(k)?(t.consume(k),E):k===47||k===62||pn(k)?N(k):n(k)}function N(k){return k===47?(t.consume(k),L):k===58||k===95||lo(k)?(t.consume(k),j):Je(k)?(i=N,B(k)):ut(k)?(t.consume(k),N):L(k)}function j(k){return k===45||k===46||k===58||k===95||Cn(k)?(t.consume(k),j):T(k)}function T(k){return k===61?(t.consume(k),A):Je(k)?(i=T,B(k)):ut(k)?(t.consume(k),T):N(k)}function A(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(t.consume(k),r=k,M):Je(k)?(i=A,B(k)):ut(k)?(t.consume(k),A):(t.consume(k),P)}function M(k){return k===r?(t.consume(k),r=void 0,R):k===null?n(k):Je(k)?(i=M,B(k)):(t.consume(k),M)}function P(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||pn(k)?N(k):(t.consume(k),P)}function R(k){return k===47||k===62||pn(k)?N(k):n(k)}function L(k){return k===62?(t.consume(k),t.exit("htmlTextData"),t.exit("htmlText"),e):n(k)}function B(k){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),U}function U(k){return ut(k)?_t(t,D,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):D(k)}function D(k){return t.enter("htmlTextData"),i(k)}}},Th={name:"labelEnd",resolveAll:function(t){let e=-1;const n=[];for(;++e<t.length;){const o=t[e][1];if(n.push(t[e]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const r=o.type==="labelImage"?4:2;o.type="data",e+=r}}return t.length!==n.length&&ao(t,0,t.length,n),t},resolveTo:function(t,e){let n,o,r,s,i=t.length,a=0;for(;i--;)if(n=t[i][1],o){if(n.type==="link"||n.type==="labelLink"&&n._inactive)break;t[i][0]==="enter"&&n.type==="labelLink"&&(n._inactive=!0)}else if(r){if(t[i][0]==="enter"&&(n.type==="labelImage"||n.type==="labelLink")&&!n._balanced&&(o=i,n.type!=="labelLink")){a=2;break}}else n.type==="labelEnd"&&(r=i);const l={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[o][1].start},end:{...t[r][1].end}},u={type:"labelText",start:{...t[o+a+2][1].end},end:{...t[r-2][1].start}};return s=[["enter",l,e],["enter",d,e]],s=zn(s,t.slice(o+1,o+a+3)),s=zn(s,[["enter",u,e]]),s=zn(s,Eh(e.parser.constructs.insideSpan.null,t.slice(o+a+4,r-3),e)),s=zn(s,[["exit",u,e],t[r-2],t[r-1],["exit",d,e]]),s=zn(s,t.slice(r+1)),s=zn(s,[["exit",l,e]]),ao(t,o,t.length,s),t},tokenize:function(t,e,n){const o=this;let r,s,i=o.events.length;for(;i--;)if((o.events[i][1].type==="labelImage"||o.events[i][1].type==="labelLink")&&!o.events[i][1]._balanced){r=o.events[i][1];break}return function(h){return r?r._inactive?u(h):(s=o.parser.defined.includes(ps(o.sliceSerialize({start:r.end,end:o.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),a):n(h)};function a(h){return h===40?t.attempt(ED,d,s?d:u)(h):h===91?t.attempt(ID,d,s?l:u)(h):s?d(h):u(h)}function l(h){return t.attempt(AD,d,u)(h)}function d(h){return e(h)}function u(h){return r._balanced=!0,n(h)}}},ED={tokenize:function(t,e,n){return function(u){return t.enter("resource"),t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),o};function o(u){return pn(u)?Ri(t,r)(u):r(u)}function r(u){return u===41?d(u):ev(t,s,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return pn(u)?Ri(t,a)(u):d(u)}function i(u){return n(u)}function a(u){return u===34||u===39||u===40?nv(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):d(u)}function l(u){return pn(u)?Ri(t,d)(u):d(u)}function d(u){return u===41?(t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),t.exit("resource"),e):n(u)}}},ID={tokenize:function(t,e,n){const o=this;return function(i){return tv.call(o,t,r,s,"reference","referenceMarker","referenceString")(i)};function r(i){return o.parser.defined.includes(ps(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?e(i):n(i)}function s(i){return n(i)}}},AD={tokenize:function(t,e,n){return function(r){return t.enter("reference"),t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),o};function o(r){return r===93?(t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),t.exit("reference"),e):n(r)}}},TD={name:"labelStartImage",resolveAll:Th.resolveAll,tokenize:function(t,e,n){const o=this;return function(i){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(i),t.exit("labelImageMarker"),r};function r(i){return i===91?(t.enter("labelMarker"),t.consume(i),t.exit("labelMarker"),t.exit("labelImage"),s):n(i)}function s(i){return i===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(i):e(i)}}},MD={name:"labelStartLink",resolveAll:Th.resolveAll,tokenize:function(t,e,n){const o=this;return function(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),r};function r(s){return s===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(s):e(s)}}},Mh={name:"lineEnding",tokenize:function(t,e){return function(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),_t(t,e,"linePrefix")}}},Ll={name:"thematicBreak",tokenize:function(t,e,n){let o,r=0;return function(a){return t.enter("thematicBreak"),function(l){return o=l,s(l)}(a)};function s(a){return a===o?(t.enter("thematicBreakSequence"),i(a)):r>=3&&(a===null||Je(a))?(t.exit("thematicBreak"),e(a)):n(a)}function i(a){return a===o?(t.consume(a),r++,i):(t.exit("thematicBreakSequence"),ut(a)?_t(t,s,"whitespace")(a):s(a))}}},gn={continuation:{tokenize:function(t,e,n){const o=this;return o.containerState._closeFlow=void 0,t.check(Pl,r,s);function r(a){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,_t(t,e,"listItemIndent",o.containerState.size+1)(a)}function s(a){return o.containerState.furtherBlankLines||!ut(a)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,i(a)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,t.attempt(DD,e,i)(a))}function i(a){return o.containerState._closeFlow=!0,o.interrupt=void 0,_t(t,t.attempt(gn,e,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}},exit:function(t){t.exit(this.containerState.type)},name:"list",tokenize:function(t,e,n){const o=this,r=o.events[o.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,i=0;return function(f){const m=o.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!o.containerState.marker||f===o.containerState.marker:jh(f)){if(o.containerState.type||(o.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Ll,n,l)(f):l(f);if(!o.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(f)}return n(f)};function a(f){return jh(f)&&++i<10?(t.consume(f),a):(!o.interrupt||i<2)&&(o.containerState.marker?f===o.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),l(f)):n(f)}function l(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||f,t.check(Pl,o.interrupt?n:d,t.attempt(OD,h,u))}function d(f){return o.containerState.initialBlankLine=!0,s++,h(f)}function u(f){return ut(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return o.containerState.size=s+o.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}},OD={partial:!0,tokenize:function(t,e,n){const o=this;return _t(t,function(r){const s=o.events[o.events.length-1];return!ut(r)&&s&&s[1].type==="listItemPrefixWhitespace"?e(r):n(r)},"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},DD={partial:!0,tokenize:function(t,e,n){const o=this;return _t(t,function(r){const s=o.events[o.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===o.containerState.size?e(r):n(r)},"listItemIndent",o.containerState.size+1)}},rv={name:"setextUnderline",resolveTo:function(t,e){let n,o,r,s=t.length;for(;s--;)if(t[s][0]==="enter"){if(t[s][1].type==="content"){n=s;break}t[s][1].type==="paragraph"&&(o=s)}else t[s][1].type==="content"&&t.splice(s,1),r||t[s][1].type!=="definition"||(r=s);const i={type:"setextHeading",start:{...t[o][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",r?(t.splice(o,0,["enter",i,e]),t.splice(r+1,0,["exit",t[n][1],e]),t[n][1].end={...t[r][1].end}):t[n][1]=i,t.push(["exit",i,e]),t},tokenize:function(t,e,n){const o=this;let r;return function(a){let l,d=o.events.length;for(;d--;)if(o.events[d][1].type!=="lineEnding"&&o.events[d][1].type!=="linePrefix"&&o.events[d][1].type!=="content"){l=o.events[d][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||l)?(t.enter("setextHeadingLine"),r=a,function(u){return t.enter("setextHeadingLineSequence"),s(u)}(a)):n(a)};function s(a){return a===r?(t.consume(a),s):(t.exit("setextHeadingLineSequence"),ut(a)?_t(t,i,"lineSuffix")(a):i(a))}function i(a){return a===null||Je(a)?(t.exit("setextHeadingLine"),e(a)):n(a)}}},RD={tokenize:function(t){const e=this,n=t.attempt(Pl,function(r){return r===null?void t.consume(r):(t.enter("lineEndingBlank"),t.consume(r),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n)},t.attempt(this.parser.constructs.flowInitial,o,_t(t,t.attempt(this.parser.constructs.flow,o,t.attempt(_D,o)),"linePrefix")));return n;function o(r){if(r!==null)return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),e.currentConstruct=void 0,n;t.consume(r)}}},PD={resolveAll:iv()},LD=sv("string"),FD=sv("text");function sv(t){return{resolveAll:iv(t==="text"?zD:void 0),tokenize:function(e){const n=this,o=this.parser.constructs[t],r=e.attempt(o,s,i);return s;function s(d){return l(d)?r(d):i(d)}function i(d){if(d!==null)return e.enter("data"),e.consume(d),a;e.consume(d)}function a(d){return l(d)?(e.exit("data"),r(d)):(e.consume(d),a)}function l(d){if(d===null)return!0;const u=o[d];let h=-1;if(u)for(;++h<u.length;){const f=u[h];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}}function iv(t){return function(e,n){let o,r=-1;for(;++r<=e.length;)o===void 0?e[r]&&e[r][1].type==="data"&&(o=r,r++):e[r]&&e[r][1].type==="data"||(r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),r=o+2),o=void 0);return t?t(e,n):e}}function zD(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const o=t[n-1][1],r=e.sliceStream(o);let s,i=r.length,a=-1,l=0;for(;i--;){const d=r[i];if(typeof d=="string"){for(a=d.length;d.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(d===-2)s=!0,l++;else if(d!==-1){i++;break}}if(l){const d={type:n===t.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:o.start._bufferIndex+a,_index:o.start._index+i,line:o.end.line,column:o.end.column-l,offset:o.end.offset-l},end:{...o.end}};o.end={...d.start},o.start.offset===o.end.offset?Object.assign(o,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const BD={42:gn,43:gn,45:gn,48:gn,49:gn,50:gn,51:gn,52:gn,53:gn,54:gn,55:gn,56:gn,57:gn,62:Yw},UD={91:xD},VD={[-2]:Ah,[-1]:Ah,32:Ah},$D={35:vD,42:Ll,45:[rv,Ll],60:SD,61:rv,95:Ll,96:Zw,126:Zw},HD={38:Kw,92:Jw},WD={[-5]:Mh,[-4]:Mh,[-3]:Mh,33:TD,38:Kw,42:Ih,60:[hD,jD],91:MD,92:[wD,Jw],93:Th,95:Ih,96:mD},qD={null:[Ih,PD]},GD=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:UD,disable:{null:[]},document:BD,flow:$D,flowInitial:VD,insideSpan:qD,string:HD,text:WD},Symbol.toStringTag,{value:"Module"}));function YD(t,e,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let i=[],a=[];const l={attempt:p(function(y,v){b(y,v.from)}),check:p(g),consume:function(y){Je(y)?(o.line++,o.column=1,o.offset+=y===-3?2:1,x()):y!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===i[o._index].length&&(o._bufferIndex=-1,o._index++)),d.previous=y},enter:function(y,v){const C=v||{};return C.type=y,C.start=f(),d.events.push(["enter",C,d]),a.push(C),C},exit:function(y){const v=a.pop();return v.end=f(),d.events.push(["exit",v,d]),v},interrupt:p(g,{interrupt:!0})},d={code:null,containerState:{},defineSkip:function(y){r[y.line]=y.column,x()},events:[],now:f,parser:t,previous:null,sliceSerialize:function(y,v){return function(C,S){let E=-1;const N=[];let j;for(;++E<C.length;){const T=C[E];let A;if(typeof T=="string")A=T;else switch(T){case-5:A="\r";break;case-4:A=`
`;break;case-3:A=`\r
`;break;case-2:A=S?" ":"	";break;case-1:if(!S&&j)continue;A=" ";break;default:A=String.fromCharCode(T)}j=T===-2,N.push(A)}return N.join("")}(h(y),v)},sliceStream:h,write:function(y){return i=zn(i,y),m(),i[i.length-1]!==null?[]:(b(e,0),d.events=Eh(s,d.events,d),d.events)}};let u=e.tokenize.call(d,l);return e.resolveAll&&s.push(e),d;function h(y){return function(v,C){const S=C.start._index,E=C.start._bufferIndex,N=C.end._index,j=C.end._bufferIndex;let T;if(S===N)T=[v[S].slice(E,j)];else{if(T=v.slice(S,N),E>-1){const A=T[0];typeof A=="string"?T[0]=A.slice(E):T.shift()}j>0&&T.push(v[N].slice(0,j))}return T}(i,y)}function f(){const{_bufferIndex:y,_index:v,line:C,column:S,offset:E}=o;return{_bufferIndex:y,_index:v,line:C,column:S,offset:E}}function m(){let y;for(;o._index<i.length;){const v=i[o._index];if(typeof v=="string")for(y=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===y&&o._bufferIndex<v.length;)_(v.charCodeAt(o._bufferIndex));else _(v)}}function _(y){u=u(y)}function g(y,v){v.restore()}function p(y,v){return function(C,S,E){let N,j,T,A;return Array.isArray(C)?M(C):"tokenize"in C?M([C]):function(B){return U;function U(D){const k=D!==null&&B[D],$=D!==null&&B.null;return M([...Array.isArray(k)?k:k?[k]:[],...Array.isArray($)?$:$?[$]:[]])(D)}}(C);function M(B){return N=B,j=0,B.length===0?E:P(B[j])}function P(B){return function(U){return A=function(){const D=f(),k=d.previous,$=d.currentConstruct,I=d.events.length,W=Array.from(a);return{from:I,restore:G};function G(){o=D,d.previous=k,d.currentConstruct=$,d.events.length=I,a=W,x()}}(),T=B,B.partial||(d.currentConstruct=B),B.name&&d.parser.constructs.disable.null.includes(B.name)?L():B.tokenize.call(v?Object.assign(Object.create(d),v):d,l,R,L)(U)}}function R(B){return y(T,A),S}function L(B){return A.restore(),++j<N.length?P(N[j]):E}}}function b(y,v){y.resolveAll&&!s.includes(y)&&s.push(y),y.resolve&&ao(d.events,v,d.events.length-v,y.resolve(d.events.slice(v),d)),y.resolveTo&&(d.events=y.resolveTo(d.events,d))}function x(){o.line in r&&o.column<2&&(o.column=r[o.line],o.offset+=r[o.line]-1)}}function JD(t){const e=function(r){const s={};let i=-1;for(;++i<r.length;)oD(s,r[i]);return s}([GD,...(t||{}).extensions||[]]),n={constructs:e,content:o(dD),defined:[],document:o(uD),flow:o(RD),lazy:{},string:o(LD),text:o(FD)};return n;function o(r){return function(s){return YD(n,r,s)}}}const av=/[\0\t\n\r]/g,KD=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function XD(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),r=o===120||o===88;return Hw(n.slice(r?2:1),r?16:10)}return Ch(n)||t}const lv={}.hasOwnProperty;function ZD(t,e,n){return typeof e!="string"&&(n=e,e=void 0),function(o){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(ze),autolinkProtocol:M,autolinkEmail:M,atxHeading:l(ae),blockQuote:l(de),characterEscape:M,characterReference:M,codeFenced:l(ue),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:l(ue,d),codeText:l(ce,d),codeTextData:M,data:M,codeFlowValue:M,definition:l(ke),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:l(Se),hardBreakEscape:l(Ce),hardBreakTrailing:l(Ce),htmlFlow:l(_e,d),htmlFlowData:M,htmlText:l(_e,d),htmlTextData:M,image:l(Ee),label:d,link:l(ze),listItem:l(He),listItemValue:g,listOrdered:l(Oe,_),listUnordered:l(Oe),paragraph:l(Fe),reference:ee,referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:l(ae),strong:l(it),thematicBreak:l(tt)},exit:{atxHeading:h(),atxHeadingSequence:N,autolink:h(),autolinkEmail:fe,autolinkProtocol:me,blockQuote:h(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:ie,characterReferenceMarkerNumeric:ie,characterReferenceValue:Z,characterReference:Q,codeFenced:h(y),codeFencedFence:x,codeFencedFenceInfo:p,codeFencedFenceMeta:b,codeFlowValue:P,codeIndented:h(v),codeText:h(D),codeTextData:P,data:P,definition:h(),definitionDestinationString:E,definitionLabelString:C,definitionTitleString:S,emphasis:h(),hardBreakEscape:h(L),hardBreakTrailing:h(L),htmlFlow:h(B),htmlFlowData:P,htmlText:h(U),htmlTextData:P,image:h($),label:W,labelText:I,lineEnding:R,link:h(k),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:oe,resourceDestinationString:G,resourceTitleString:q,resource:Y,setextHeading:h(A),setextHeadingLineSequence:T,setextHeadingText:j,strong:h(),thematicBreak:h()}};cv(r,(o||{}).mdastExtensions||[]);const s={};return i;function i(ne){let ve={type:"root",children:[]};const je={stack:[ve],tokenStack:[],config:r,enter:u,exit:f,buffer:d,resume:m,data:s},Re=[];let J=-1;for(;++J<ne.length;)(ne[J][1].type==="listOrdered"||ne[J][1].type==="listUnordered")&&(ne[J][0]==="enter"?Re.push(J):J=a(ne,Re.pop(),J));for(J=-1;++J<ne.length;){const se=r[ne[J][0]];lv.call(se,ne[J][1].type)&&se[ne[J][1].type].call(Object.assign({sliceSerialize:ne[J][2].sliceSerialize},je),ne[J][1])}if(je.tokenStack.length>0){const se=je.tokenStack[je.tokenStack.length-1];(se[1]||dv).call(je,void 0,se[0])}for(ve.position={start:Zo(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Zo(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},J=-1;++J<r.transforms.length;)ve=r.transforms[J](ve)||ve;return ve}function a(ne,ve,je){let Re,J,se,ge,pe=ve-1,xe=-1,Ve=!1;for(;++pe<=je;){const Be=ne[pe];switch(Be[1].type){case"listUnordered":case"listOrdered":case"blockQuote":Be[0]==="enter"?xe++:xe--,ge=void 0;break;case"lineEndingBlank":Be[0]==="enter"&&(!Re||ge||xe||se||(se=pe),ge=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ge=void 0}if(!xe&&Be[0]==="enter"&&Be[1].type==="listItemPrefix"||xe===-1&&Be[0]==="exit"&&(Be[1].type==="listUnordered"||Be[1].type==="listOrdered")){if(Re){let rt=pe;for(J=void 0;rt--;){const le=ne[rt];if(le[1].type==="lineEnding"||le[1].type==="lineEndingBlank"){if(le[0]==="exit")continue;J&&(ne[J][1].type="lineEndingBlank",Ve=!0),le[1].type="lineEnding",J=rt}else if(le[1].type!=="linePrefix"&&le[1].type!=="blockQuotePrefix"&&le[1].type!=="blockQuotePrefixWhitespace"&&le[1].type!=="blockQuoteMarker"&&le[1].type!=="listItemIndent")break}se&&(!J||se<J)&&(Re._spread=!0),Re.end=Object.assign({},J?ne[J][1].start:Be[1].end),ne.splice(J||pe,0,["exit",Re,Be[2]]),pe++,je++}if(Be[1].type==="listItemPrefix"){const rt={type:"listItem",_spread:!1,start:Object.assign({},Be[1].start),end:void 0};Re=rt,ne.splice(pe,0,["enter",rt,Be[2]]),pe++,je++,se=void 0,ge=!0}}}return ne[ve][1]._spread=Ve,je}function l(ne,ve){return je;function je(Re){u.call(this,ne(Re),Re),ve&&ve.call(this,Re)}}function d(){this.stack.push({type:"fragment",children:[]})}function u(ne,ve,je){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([ve,je||void 0]),ne.position={start:Zo(ve.start),end:void 0}}function h(ne){return ve;function ve(je){ne&&ne.call(this,je),f.call(this,je)}}function f(ne,ve){const je=this.stack.pop(),Re=this.tokenStack.pop();if(!Re)throw new Error("Cannot close `"+ne.type+"` ("+Mi({start:ne.start,end:ne.end})+"): it\u2019s not open");Re[0].type!==ne.type&&(ve?ve.call(this,ne,Re[0]):(Re[1]||dv).call(this,ne,Re[0])),je.position.end=Zo(ne.end)}function m(){return function(ne){return Bw(ne,typeof Rl.includeImageAlt!="boolean"||Rl.includeImageAlt,typeof Rl.includeHtml!="boolean"||Rl.includeHtml)}(this.stack.pop())}function _(){this.data.expectingFirstListItemValue=!0}function g(ne){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0)}function p(){const ne=this.resume();this.stack[this.stack.length-1].lang=ne}function b(){const ne=this.resume();this.stack[this.stack.length-1].meta=ne}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const ne=this.resume();this.stack[this.stack.length-1].value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ne=this.resume();this.stack[this.stack.length-1].value=ne.replace(/(\r?\n|\r)$/g,"")}function C(ne){const ve=this.resume(),je=this.stack[this.stack.length-1];je.label=ve,je.identifier=ps(this.sliceSerialize(ne)).toLowerCase()}function S(){const ne=this.resume();this.stack[this.stack.length-1].title=ne}function E(){const ne=this.resume();this.stack[this.stack.length-1].url=ne}function N(ne){const ve=this.stack[this.stack.length-1];if(!ve.depth){const je=this.sliceSerialize(ne).length;ve.depth=je}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function T(ne){this.stack[this.stack.length-1].depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function M(ne){const ve=this.stack[this.stack.length-1].children;let je=ve[ve.length-1];je&&je.type==="text"||(je=Qe(),je.position={start:Zo(ne.start),end:void 0},ve.push(je)),this.stack.push(je)}function P(ne){const ve=this.stack.pop();ve.value+=this.sliceSerialize(ne),ve.position.end=Zo(ne.end)}function R(ne){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak)return ve.children[ve.children.length-1].position.end=Zo(ne.end),void(this.data.atHardBreak=void 0);!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes(ve.type)&&(M.call(this,ne),P.call(this,ne))}function L(){this.data.atHardBreak=!0}function B(){const ne=this.resume();this.stack[this.stack.length-1].value=ne}function U(){const ne=this.resume();this.stack[this.stack.length-1].value=ne}function D(){const ne=this.resume();this.stack[this.stack.length-1].value=ne}function k(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ve,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function $(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ve,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function I(ne){const ve=this.sliceSerialize(ne),je=this.stack[this.stack.length-2];je.label=function(Re){return Re.replace(KD,XD)}(ve),je.identifier=ps(ve).toLowerCase()}function W(){const ne=this.stack[this.stack.length-1],ve=this.resume(),je=this.stack[this.stack.length-1];if(this.data.inReference=!0,je.type==="link"){const Re=ne.children;je.children=Re}else je.alt=ve}function G(){const ne=this.resume();this.stack[this.stack.length-1].url=ne}function q(){const ne=this.resume();this.stack[this.stack.length-1].title=ne}function Y(){this.data.inReference=void 0}function ee(){this.data.referenceType="collapsed"}function oe(ne){const ve=this.resume(),je=this.stack[this.stack.length-1];je.label=ve,je.identifier=ps(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function ie(ne){this.data.characterReferenceType=ne.type}function Z(ne){const ve=this.sliceSerialize(ne),je=this.data.characterReferenceType;let Re;je?(Re=Hw(ve,je==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Re=Ch(ve),this.stack[this.stack.length-1].value+=Re}function Q(ne){this.stack.pop().position.end=Zo(ne.end)}function me(ne){P.call(this,ne),this.stack[this.stack.length-1].url=this.sliceSerialize(ne)}function fe(ne){P.call(this,ne),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(ne)}function de(){return{type:"blockquote",children:[]}}function ue(){return{type:"code",lang:null,meta:null,value:""}}function ce(){return{type:"inlineCode",value:""}}function ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Se(){return{type:"emphasis",children:[]}}function ae(){return{type:"heading",depth:0,children:[]}}function Ce(){return{type:"break"}}function _e(){return{type:"html",value:""}}function Ee(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function Oe(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function He(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Fe(){return{type:"paragraph",children:[]}}function it(){return{type:"strong",children:[]}}function Qe(){return{type:"text",value:""}}function tt(){return{type:"thematicBreak"}}}(n)(function(o){for(;!Qw(o););return o}(JD(n).document().write(function(){let o,r=1,s="",i=!0;return function(a,l,d){const u=[];let h,f,m,_,g;for(a=s+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),m=0,s="",i&&(a.charCodeAt(0)===65279&&m++,i=void 0);m<a.length;){if(av.lastIndex=m,h=av.exec(a),_=h&&h.index!==void 0?h.index:a.length,g=a.charCodeAt(_),!h){s=a.slice(m);break}if(g===10&&m===_&&o)u.push(-3),o=void 0;else switch(o&&(u.push(-5),o=void 0),m<_&&(u.push(a.slice(m,_)),r+=_-m),g){case 0:u.push(65533),r++;break;case 9:for(f=4*Math.ceil(r/4),u.push(-2);r++<f;)u.push(-1);break;case 10:u.push(-4),r=1;break;default:o=!0,r=1}m=_+1}return d&&(o&&u.push(-5),s&&u.push(s),u.push(null)),u}}()(t,e,!0))))}function Zo(t){return{line:t.line,column:t.column,offset:t.offset}}function cv(t,e){let n=-1;for(;++n<e.length;){const o=e[n];Array.isArray(o)?cv(t,o):QD(t,o)}}function QD(t,e){let n;for(n in e)if(lv.call(e,n))switch(n){case"canContainEols":{const o=e[n];o&&t[n].push(...o);break}case"transforms":{const o=e[n];o&&t[n].push(...o);break}case"enter":case"exit":{const o=e[n];o&&Object.assign(t[n],o);break}}}function dv(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Mi({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Mi({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Mi({start:e.start,end:e.end})+") is still open")}function eR(t){const e=this;e.parser=function(n){return ZD(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function uv(t,e){const n=e.referenceType;let o="]";if(n==="collapsed"?o+="[]":n==="full"&&(o+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+o}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const i=r[r.length-1];return i&&i.type==="text"?i.value+=o:r.push({type:"text",value:o}),r}function hv(t){const e=t.spread;return e??t.children.length>1}function tR(t){const e=String(t),n=/\r?\n|\r/g;let o=n.exec(e),r=0;const s=[];for(;o;)s.push(fv(e.slice(r,o.index),r>0,!0),o[0]),r=o.index+o[0].length,o=n.exec(e);return s.push(fv(e.slice(r),r>0,!1)),s.join("")}function fv(t,e,n){let o=0,r=t.length;if(e){let s=t.codePointAt(o);for(;s===9||s===32;)o++,s=t.codePointAt(o)}if(n){let s=t.codePointAt(r-1);for(;s===9||s===32;)r--,s=t.codePointAt(r-1)}return r>o?t.slice(o,r):""}const nR={blockquote:function(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)},break:function(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]},code:function(t,e){const n=e.value?e.value+`
`:"",o={};e.lang&&(o.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r},delete:function(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},emphasis:function(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},footnoteReference:function(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",o=String(e.identifier).toUpperCase(),r=gs(o.toLowerCase()),s=t.footnoteOrder.indexOf(o);let i,a=t.footnoteCounts.get(o);a===void 0?(a=0,t.footnoteOrder.push(o),i=t.footnoteOrder.length):i=s+1,a+=1,t.footnoteCounts.set(o,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};t.patch(e,l);const d={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,d),t.applyData(e,d)},heading:function(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},html:function(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}},imageReference:function(t,e){const n=String(e.identifier).toUpperCase(),o=t.definitionById.get(n);if(!o)return uv(t,e);const r={src:gs(o.url||""),alt:e.alt};o.title!==null&&o.title!==void 0&&(r.title=o.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)},image:function(t,e){const n={src:gs(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const o={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,o),t.applyData(e,o)},inlineCode:function(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const o={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,o),t.applyData(e,o)},linkReference:function(t,e){const n=String(e.identifier).toUpperCase(),o=t.definitionById.get(n);if(!o)return uv(t,e);const r={href:gs(o.url||"")};o.title!==null&&o.title!==void 0&&(r.title=o.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)},link:function(t,e){const n={href:gs(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const o={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)},listItem:function(t,e,n){const o=t.all(e),r=n?function(u){let h=!1;if(u.type==="list"){h=u.spread||!1;const f=u.children;let m=-1;for(;!h&&++m<f.length;)h=hv(f[m])}return h}(n):hv(e),s={},i=[];if(typeof e.checked=="boolean"){const u=o[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},o.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<o.length;){const u=o[a];(r||a!==0||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`}),u.type!=="element"||u.tagName!=="p"||r?i.push(u):i.push(...u.children)}const l=o[o.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&i.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:i};return t.patch(e,d),t.applyData(e,d)},list:function(t,e){const n={},o=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<o.length;){const i=o[r];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(o,!0)};return t.patch(e,s),t.applyData(e,s)},paragraph:function(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},root:function(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)},strong:function(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},table:function(t,e){const n=t.all(e),o=n.shift(),r=[];if(o){const i={type:"element",tagName:"thead",properties:{},children:t.wrap([o],!0)};t.patch(e.children[0],i),r.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=xh(e.children[1]),l=Mw(e.children[e.children.length-1]);a&&l&&(i.position={start:a,end:l}),r.push(i)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)},tableCell:function(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},tableRow:function(t,e,n){const o=n?n.children:void 0,r=(o?o.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,i=s?s.length:e.children.length;let a=-1;const l=[];for(;++a<i;){const u=e.children[a],h={},f=s?s[a]:void 0;f&&(h.align=f);let m={type:"element",tagName:r,properties:h,children:[]};u&&(m.children=t.all(u),t.patch(u,m),m=t.applyData(u,m)),l.push(m)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(l,!0)};return t.patch(e,d),t.applyData(e,d)},text:function(t,e){const n={type:"text",value:tR(String(e.value))};return t.patch(e,n),t.applyData(e,n)},thematicBreak:function(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)},toml:Fl,yaml:Fl,definition:Fl,footnoteDefinition:Fl};function Fl(){}const mv=typeof self=="object"?self:globalThis,pv=t=>((e,n)=>{const o=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=n[s];switch(i){case 0:case-1:return o(a,s);case 1:{const l=o([],s);for(const d of a)l.push(r(d));return l}case 2:{const l=o({},s);for(const[d,u]of a)l[r(d)]=r(u);return l}case 3:return o(new Date(a),s);case 4:{const{source:l,flags:d}=a;return o(new RegExp(l,d),s)}case 5:{const l=o(new Map,s);for(const[d,u]of a)l.set(r(d),r(u));return l}case 6:{const l=o(new Set,s);for(const d of a)l.add(r(d));return l}case 7:{const{name:l,message:d}=a;return o(new mv[l](d),s)}case 8:return o(BigInt(a),s);case"BigInt":return o(Object(BigInt(a)),s)}return o(new mv[i](a),s)};return r})(new Map,t)(0),_s="",{toString:oR}={},{keys:rR}=Object,Pi=t=>{const e=typeof t;if(e!=="object"||!t)return[0,e];const n=oR.call(t).slice(8,-1);switch(n){case"Array":return[1,_s];case"Object":return[2,_s];case"Date":return[3,_s];case"RegExp":return[4,_s];case"Map":return[5,_s];case"Set":return[6,_s]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},zl=([t,e])=>t===0&&(e==="function"||e==="symbol"),gv=(t,{json:e,lossy:n}={})=>{const o=[];return((r,s,i,a)=>{const l=(u,h)=>{const f=a.push(u)-1;return i.set(h,f),f},d=u=>{if(i.has(u))return i.get(u);let[h,f]=Pi(u);switch(h){case 0:{let _=u;switch(f){case"bigint":h=8,_=u.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+f);_=null;break;case"undefined":return l([-1],u)}return l([h,_],u)}case 1:{if(f)return l([f,[...u]],u);const _=[],g=l([h,_],u);for(const p of u)_.push(d(p));return g}case 2:{if(f)switch(f){case"BigInt":return l([f,u.toString()],u);case"Boolean":case"Number":case"String":return l([f,u.valueOf()],u)}if(s&&"toJSON"in u)return d(u.toJSON());const _=[],g=l([h,_],u);for(const p of rR(u))!r&&zl(Pi(u[p]))||_.push([d(p),d(u[p])]);return g}case 3:return l([h,u.toISOString()],u);case 4:{const{source:_,flags:g}=u;return l([h,{source:_,flags:g}],u)}case 5:{const _=[],g=l([h,_],u);for(const[p,b]of u)(r||!zl(Pi(p))&&!zl(Pi(b)))&&_.push([d(p),d(b)]);return g}case 6:{const _=[],g=l([h,_],u);for(const p of u)!r&&zl(Pi(p))||_.push(d(p));return g}}const{message:m}=u;return l([h,{name:f,message:m}],u)};return d})(!(e||n),!!e,new Map,o)(t),o},Bl=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?pv(gv(t,e)):structuredClone(t):(t,e)=>pv(gv(t,e));function sR(t,e){const n=[{type:"text",value:"\u21A9"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function iR(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}const _v=function(t){if(t==null)return aR;if(typeof t=="function")return Ul(t);if(typeof t=="object")return Array.isArray(t)?function(e){const n=[];let o=-1;for(;++o<e.length;)n[o]=_v(e[o]);return Ul(r);function r(...s){let i=-1;for(;++i<n.length;)if(n[i].apply(this,s))return!0;return!1}}(t):function(e){const n=e;return Ul(o);function o(r){const s=r;let i;for(i in e)if(s[i]!==n[i])return!1;return!0}}(t);if(typeof t=="string")return function(e){return Ul(n);function n(o){return o&&o.type===e}}(t);throw new Error("Expected function, string, or object as test")};function Ul(t){return function(e,n,o){return!!(function(r){return r!==null&&typeof r=="object"&&"type"in r}(e)&&t.call(this,e,typeof n=="number"?n:void 0,o||void 0))}}function aR(){return!0}const bv=[],lR=!0,xv=!1;function cR(t,e,n,o){let r;typeof e=="function"&&typeof n!="function"?(o=n,n=e):r=e;const s=_v(r),i=o?-1:1;(function a(l,d,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+l.type+(m?"<"+m+">":"")+")"})}return f;function f(){let m,_,g,p=bv;if((!e||s(l,d,u[u.length-1]||void 0))&&(p=function(b){return Array.isArray(b)?b:typeof b=="number"?[lR,b]:b==null?bv:[b]}(n(l,u)),p[0]===xv))return p;if("children"in l&&l.children){const b=l;if(b.children&&p[0]!=="skip")for(_=(o?b.children.length:-1)+i,g=u.concat(b);_>-1&&_<b.children.length;){const x=b.children[_];if(m=a(x,_,g)(),m[0]===xv)return m;_=typeof m[1]=="number"?m[1]:_+i}}return p}})(t,void 0,[])()}function yv(t,e,n,o){let r,s,i;typeof e=="function"?(s=void 0,i=e,r=n):(s=e,i=n,r=o),cR(t,s,function(a,l){const d=l[l.length-1],u=d?d.children.indexOf(a):void 0;return i(a,u,d)},r)}const Oh={}.hasOwnProperty,dR={};function uR(t,e){t.position&&(e.position=function(n){const o=xh(n),r=Mw(n);if(o&&r)return{start:o,end:r}}(t))}function hR(t,e){let n=e;if(t&&t.data){const o=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;typeof o=="string"&&(n.type==="element"?n.tagName=o:n={type:"element",tagName:o,properties:{},children:"children"in n?n.children:[n]}),n.type==="element"&&s&&Object.assign(n.properties,Bl(s)),"children"in n&&n.children&&r!=null&&(n.children=r)}return n}function fR(t,e){const n=e.data||{},o=!("value"in e)||Oh.call(n,"hProperties")||Oh.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:t.all(e)}:{type:"text",value:e.value};return t.patch(e,o),t.applyData(e,o)}function mR(t,e){const n=[];let o=-1;for(e&&n.push({type:"text",value:`
`});++o<t.length;)o&&n.push({type:"text",value:`
`}),n.push(t[o]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function wv(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function vv(t,e){const n=function(i,a){const l=a||dR,d=new Map,u=new Map,h=new Map,f={...nR,...l.handlers},m={all:function(_){const g=[];if("children"in _){const p=_.children;let b=-1;for(;++b<p.length;){const x=m.one(p[b],_);if(x){if(b&&p[b-1].type==="break"&&(Array.isArray(x)||x.type!=="text"||(x.value=wv(x.value)),!Array.isArray(x)&&x.type==="element")){const y=x.children[0];y&&y.type==="text"&&(y.value=wv(y.value))}Array.isArray(x)?g.push(...x):g.push(x)}}}return g},applyData:hR,definitionById:d,footnoteById:u,footnoteCounts:h,footnoteOrder:[],handlers:f,one:function(_,g){const p=_.type,b=m.handlers[p];if(Oh.call(m.handlers,p)&&b)return b(m,_,g);if(m.options.passThrough&&m.options.passThrough.includes(p)){if("children"in _){const{children:x,...y}=_,v=Bl(y);return v.children=m.all(_),v}return Bl(_)}return(m.options.unknownHandler||fR)(m,_,g)},options:l,patch:uR,wrap:mR};return yv(i,function(_){if(_.type==="definition"||_.type==="footnoteDefinition"){const g=_.type==="definition"?d:u,p=String(_.identifier).toUpperCase();g.has(p)||g.set(p,_)}}),m}(t,e),o=n.one(t,void 0),r=function(i){const a=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",l=i.options.footnoteBackContent||sR,d=i.options.footnoteBackLabel||iR,u=i.options.footnoteLabel||"Footnotes",h=i.options.footnoteLabelTagName||"h2",f=i.options.footnoteLabelProperties||{className:["sr-only"]},m=[];let _=-1;for(;++_<i.footnoteOrder.length;){const g=i.footnoteById.get(i.footnoteOrder[_]);if(!g)continue;const p=i.all(g),b=String(g.identifier).toUpperCase(),x=gs(b.toLowerCase());let y=0;const v=[],C=i.footnoteCounts.get(b);for(;C!==void 0&&++y<=C;){v.length>0&&v.push({type:"text",value:" "});let N=typeof l=="string"?l:l(_,y);typeof N=="string"&&(N={type:"text",value:N}),v.push({type:"element",tagName:"a",properties:{href:"#"+a+"fnref-"+x+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof d=="string"?d:d(_,y),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const S=p[p.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const N=S.children[S.children.length-1];N&&N.type==="text"?N.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...v)}else p.push(...v);const E={type:"element",tagName:"li",properties:{id:a+"fn-"+x},children:i.wrap(p,!0)};i.patch(g,E),m.push(E)}if(m.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:h,properties:{...Bl(f),id:"footnote-label"},children:[{type:"text",value:u}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(m,!0)},{type:"text",value:`
`}]}}(n),s=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function pR(t,e){return t&&"run"in t?async function(n,o){const r=vv(n,{file:o,...e});await t.run(r,o)}:function(n,o){return vv(n,{file:o,...t||e})}}function kv(t){if(t)throw t}var Dh,Sv,gR=function(){if(Sv)return Dh;Sv=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=function(l){return typeof Array.isArray=="function"?Array.isArray(l):e.call(l)==="[object Array]"},s=function(l){if(!l||e.call(l)!=="[object Object]")return!1;var d,u=t.call(l,"constructor"),h=l.constructor&&l.constructor.prototype&&t.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!u&&!h)return!1;for(d in l);return d===void 0||t.call(l,d)},i=function(l,d){n&&d.name==="__proto__"?n(l,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):l[d.name]=d.newValue},a=function(l,d){if(d==="__proto__"){if(!t.call(l,d))return;if(o)return o(l,d).value}return l[d]};return Dh=function l(){var d,u,h,f,m,_,g=arguments[0],p=1,b=arguments.length,x=!1;for(typeof g=="boolean"&&(x=g,g=arguments[1]||{},p=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});p<b;++p)if((d=arguments[p])!=null)for(u in d)h=a(g,u),g!==(f=a(d,u))&&(x&&f&&(s(f)||(m=r(f)))?(m?(m=!1,_=h&&r(h)?h:[]):_=h&&s(h)?h:{},i(g,{name:u,newValue:l(x,_,f)})):f!==void 0&&i(g,{name:u,newValue:f}));return g},Dh}();const Rh=xS(gR);function Ph(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return!(e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.toStringTag in t||Symbol.iterator in t)}function _R(){const t=[],e={run:function(...n){let o=-1;const r=n.pop();if(typeof r!="function")throw new TypeError("Expected function as last argument, not "+r);(function s(i,...a){const l=t[++o];let d=-1;if(i)r(i);else{for(;++d<n.length;)a[d]!==null&&a[d]!==void 0||(a[d]=n[d]);n=a,l?function(u,h){let f;return m;function m(...p){const b=u.length>p.length;let x;b&&p.push(_);try{x=u.apply(this,p)}catch(y){if(b&&f)throw y;return _(y)}b||(x&&x.then&&typeof x.then=="function"?x.then(g,_):x instanceof Error?_(x):g(x))}function _(p,...b){f||(f=!0,h(p,...b))}function g(p){_(null,p)}}(l,s)(...a):r(null,...a)}})(null,...n)},use:function(n){if(typeof n!="function")throw new TypeError("Expected `middelware` to be a function, not "+n);return t.push(n),e}};return e}const co={basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Li(t);let n,o=0,r=-1,s=t.length;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(n){o=s+1;break}}else r<0&&(n=!0,r=s+1);return r<0?"":t.slice(o,r)}if(e===t)return"";let i=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(n){o=s+1;break}}else i<0&&(n=!0,i=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=i));return o===r?r=i:r<0&&(r=t.length),t.slice(o,r)},dirname:function(t){if(Li(t),t.length===0)return".";let e,n=-1,o=t.length;for(;--o;)if(t.codePointAt(o)===47){if(e){n=o;break}}else e||(e=!0);return n<0?t.codePointAt(0)===47?"/":".":n===1&&t.codePointAt(0)===47?"//":t.slice(0,n)},extname:function(t){Li(t);let e,n=t.length,o=-1,r=0,s=-1,i=0;for(;n--;){const a=t.codePointAt(n);if(a!==47)o<0&&(e=!0,o=n+1),a===46?s<0?s=n:i!==1&&(i=1):s>-1&&(i=-1);else if(e){r=n+1;break}}return s<0||o<0||i===0||i===1&&s===o-1&&s===r+1?"":t.slice(s,o)},join:function(...t){let e,n=-1;for(;++n<t.length;)Li(t[n]),t[n]&&(e=e===void 0?t[n]:e+"/"+t[n]);return e===void 0?".":function(o){Li(o);const r=o.codePointAt(0)===47;let s=function(i,a){let l,d,u="",h=0,f=-1,m=0,_=-1;for(;++_<=i.length;){if(_<i.length)l=i.codePointAt(_);else{if(l===47)break;l=47}if(l===47){if(!(f===_-1||m===1))if(f!==_-1&&m===2){if(u.length<2||h!==2||u.codePointAt(u.length-1)!==46||u.codePointAt(u.length-2)!==46){if(u.length>2){if(d=u.lastIndexOf("/"),d!==u.length-1){d<0?(u="",h=0):(u=u.slice(0,d),h=u.length-1-u.lastIndexOf("/")),f=_,m=0;continue}}else if(u.length>0){u="",h=0,f=_,m=0;continue}}a&&(u=u.length>0?u+"/..":"..",h=2)}else u.length>0?u+="/"+i.slice(f+1,_):u=i.slice(f+1,_),h=_-f-1;f=_,m=0}else l===46&&m>-1?m++:m=-1}return u}(o,!r);return s.length!==0||r||(s="."),s.length>0&&o.codePointAt(o.length-1)===47&&(s+="/"),r?"/"+s:s}(e)},sep:"/"};function Li(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const bR={cwd:function(){return"/"}};function Lh(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function xR(t){if(typeof t=="string")t=new URL(t);else if(!Lh(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=e.pathname;let o=-1;for(;++o<n.length;)if(n.codePointAt(o)===37&&n.codePointAt(o+1)===50){const r=n.codePointAt(o+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(n)}(t)}const Fh=["history","path","basename","stem","extname","dirname"];class Cv{constructor(e){let n;n=e?Lh(e)?{path:e}:typeof e=="string"||function(s){return!!(s&&typeof s=="object"&&"byteLength"in s&&"byteOffset"in s)}(e)?{value:e}:e:{},this.cwd="cwd"in n?"":bR.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o,r=-1;for(;++r<Fh.length;){const s=Fh[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}for(o in n)Fh.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?co.basename(this.path):void 0}set basename(e){Bh(e,"basename"),zh(e,"basename"),this.path=co.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?co.dirname(this.path):void 0}set dirname(e){Nv(this.basename,"dirname"),this.path=co.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?co.extname(this.path):void 0}set extname(e){if(zh(e,"extname"),Nv(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=co.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Lh(e)&&(e=xR(e)),Bh(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?co.basename(this.path,this.extname):void 0}set stem(e){Bh(e,"stem"),zh(e,"stem"),this.path=co.join(this.dirname||"",e+(this.extname||""))}fail(e,n,o){const r=this.message(e,n,o);throw r.fatal=!0,r}info(e,n,o){const r=this.message(e,n,o);return r.fatal=void 0,r}message(e,n,o){const r=new tn(e,n,o);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function zh(t,e){if(t&&t.includes(co.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+co.sep+"`")}function Bh(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Nv(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}const yR=function(t){const e=this.constructor.prototype,n=e[t],o=function(){return n.apply(o,arguments)};return Object.setPrototypeOf(o,e),o},wR={}.hasOwnProperty;class Uh extends yR{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=_R()}copy(){const e=new Uh;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];e.use(...o)}return e.data(Rh(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Hh("data",this.frozen),this.namespace[e]=n,this):wR.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Hh("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const r=n.call(e,...o);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Vl(e),o=this.parser||this.Parser;return Vh("parse",o),o(String(n),n)}process(e,n){const o=this;return this.freeze(),Vh("process",this.parser||this.Parser),$h("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,i){const a=Vl(e),l=o.parse(a);function d(u,h){u||!h?i(u):s?s(h):n(void 0,h)}o.run(l,a,function(u,h,f){if(u||!h||!f)return d(u);const m=h,_=o.stringify(m,f);var g;typeof(g=_)=="string"||function(p){return!!(p&&typeof p=="object"&&"byteLength"in p&&"byteOffset"in p)}(g)?f.value=_:f.result=_,d(u,f)})}}processSync(e){let n,o=!1;return this.freeze(),Vh("processSync",this.parser||this.Parser),$h("processSync",this.compiler||this.Compiler),this.process(e,function(r,s){o=!0,kv(r),n=s}),Ev("processSync","process",o),n}run(e,n,o){jv(e),this.freeze();const r=this.transformers;return o||typeof n!="function"||(o=n,n=void 0),o?s(void 0,o):new Promise(s);function s(i,a){const l=Vl(n);r.run(e,l,function(d,u,h){const f=u||e;d?a(d):i?i(f):o(void 0,f,h)})}}runSync(e,n){let o,r=!1;return this.run(e,n,function(s,i){kv(s),o=i,r=!0}),Ev("runSync","run",r),o}stringify(e,n){this.freeze();const o=Vl(n),r=this.compiler||this.Compiler;return $h("stringify",r),jv(e),r(e,o)}use(e,...n){const o=this.attachers,r=this.namespace;if(Hh("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else{if(typeof e!="object")throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):i(e)}return this;function s(d){if(typeof d=="function")l(d,[]);else{if(typeof d!="object")throw new TypeError("Expected usable value, not `"+d+"`");if(Array.isArray(d)){const[u,...h]=d;l(u,h)}else i(d)}}function i(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(d.plugins),d.settings&&(r.settings=Rh(!0,r.settings,d.settings))}function a(d){let u=-1;if(d!=null){if(!Array.isArray(d))throw new TypeError("Expected a list of plugins, not `"+d+"`");for(;++u<d.length;)s(d[u])}}function l(d,u){let h=-1,f=-1;for(;++h<o.length;)if(o[h][0]===d){f=h;break}if(f===-1)o.push([d,...u]);else if(u.length>0){let[m,..._]=u;const g=o[f][1];Ph(g)&&Ph(m)&&(m=Rh(!0,g,m)),o[f]=[d,m,..._]}}}}const vR=new Uh().freeze();function Vh(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function $h(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Hh(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jv(t){if(!Ph(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Ev(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Vl(t){return function(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}(t)?t:new Cv(t)}const Iv=[],Av={allowDangerousHtml:!0},kR=/^(https?|ircs?|mailto|xmpp)$/i,SR=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function CR(t){const e=function(o){const r=o.rehypePlugins||Iv,s=o.remarkPlugins||Iv,i=o.remarkRehypeOptions?{...o.remarkRehypeOptions,...Av}:Av;return vR().use(eR).use(s).use(pR,i).use(r)}(t),n=function(o){const r=o.children||"",s=new Cv;return typeof r=="string"&&(s.value=r),s}(t);return function(o,r){const s=r.allowedElements,i=r.allowElement,a=r.components,l=r.disallowedElements,d=r.skipHtml,u=r.unwrapDisallowed,h=r.urlTransform||NR;for(const m of SR)Object.hasOwn(r,m.from)&&(m.from,m.to&&m.to,m.id,void 0);return r.className&&(o={type:"element",tagName:"div",properties:{className:r.className},children:o.type==="root"?o.children:[o]}),yv(o,f),Z9(o,{Fragment:c.Fragment,components:a,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function f(m,_,g){if(m.type==="raw"&&g&&typeof _=="number")return d?g.children.splice(_,1):g.children[_]={type:"text",value:m.value},_;if(m.type==="element"){let p;for(p in Sh)if(Object.hasOwn(Sh,p)&&Object.hasOwn(m.properties,p)){const b=m.properties[p],x=Sh[p];(x===null||x.includes(m.tagName))&&(m.properties[p]=h(String(b||""),p,m))}}if(m.type==="element"){let p=s?!s.includes(m.tagName):!!l&&l.includes(m.tagName);if(!p&&i&&typeof _=="number"&&(p=!i(m,_,g)),p&&g&&typeof _=="number")return u&&m.children?g.children.splice(_,1,...m.children):g.children.splice(_,1),_}}}(e.runSync(e.parse(n),n),t)}function NR(t){const e=t.indexOf(":"),n=t.indexOf("?"),o=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||o!==-1&&e>o||kR.test(t.slice(0,e))?t:""}const jR=[et.lineWrapping],ER=new Set(["python","markdown","sql","json","yaml","toml","shell","javascript","typescript","jsx","tsx","css","html"]),IR=t=>{const e=K.c(26),{code:n,language:o}=t,{theme:r}=xr(),{createNewCell:s}=bt(),i=Rs(),a=Le(dc),[l,d]=O.useState(n);let u,h,f;e[0]!==n?(u=()=>{d(n)},h=[n],e[0]=n,e[1]=u,e[2]=h):(u=e[1],h=e[2]),O.useEffect(u,h),e[3]!==a||e[4]!==s||e[5]!==o||e[6]!==i||e[7]!==l?(f=()=>{const N=function(j,T){return j?j==="python"?{language:j,code:T}:j==="sql"?{language:"python",code:Vc.fromQuery(T)}:j==="markdown"?{language:"python",code:ra.fromMarkdown(T)}:j==="shell"||j==="bash"?{language:"python",code:`import subprocess
subprocess.run("${T}")`}:{language:"python",code:`_${j} = """
${T}
"""`}:{language:"python",code:T}}(o,l);o==="sql"&&fo({autoInstantiate:a,createNewCell:s,fromCellId:i}),s({code:N.code,before:!1,cellId:i??"__end__"})},e[3]=a,e[4]=s,e[5]=o,e[6]=i,e[7]=l,e[8]=f):f=e[8];const m=f;let _;e[9]!==l?(_=async()=>{await _n(l)},e[9]=l,e[10]=_):_=e[10];const g=_,p=r==="dark"?"dark":"light",b=o&&ER.has(o)?o:void 0;let x,y,v,C,S,E;return e[11]!==p||e[12]!==b||e[13]!==l?(x=c.jsx(O.Suspense,{children:c.jsx(xa,{theme:p,language:b,className:"cm border rounded overflow-hidden",extensions:jR,value:l,onChange:d})}),e[11]=p,e[12]=b,e[13]=l,e[14]=x):x=e[14],e[15]!==g?(y=c.jsx(AR,{size:"xs",variant:"outline",onClick:g,children:"Copy"}),e[15]=g,e[16]=y):y=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(v=c.jsx(qr,{className:"ml-2 h-4 w-4"}),e[17]=v):v=e[17],e[18]!==m?(C=c.jsxs(Ae,{size:"xs",variant:"outline",onClick:m,children:["Add to Notebook",v]}),e[18]=m,e[19]=C):C=e[19],e[20]!==C||e[21]!==y?(S=c.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[y,C]}),e[20]=C,e[21]=y,e[22]=S):S=e[22],e[23]!==S||e[24]!==x?(E=c.jsxs("div",{className:"relative",children:[x,S]}),e[23]=S,e[24]=x,e[25]=E):E=e[25],E},AR=t=>{const e=K.c(12);let n,o;e[0]!==t?({onClick:n,...o}=t,e[0]=t,e[1]=n,e[2]=o):(n=e[1],o=e[2]);const[r,s]=O.useState(!1);let i,a,l;e[3]!==r?(i=()=>{r&&setTimeout(()=>s(!1),1e3)},a=[r],e[3]=r,e[4]=i,e[5]=a):(i=e[4],a=e[5]),O.useEffect(i,a),e[6]!==n?(l=h=>{n==null||n(h),s(!0)},e[6]=n,e[7]=l):l=e[7];const d=r?"Copied":"Copy";let u;return e[8]!==o||e[9]!==l||e[10]!==d?(u=c.jsx(Ae,{...o,onClick:l,children:d}),e[8]=o,e[9]=l,e[10]=d,e[11]=u):u=e[11],u},TR={code:({children:t,className:e})=>{const n=e==null?void 0:e.replace("language-","");return n&&typeof t=="string"?c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-muted-foreground pl-1",children:n}),c.jsx(IR,{code:t.trim(),language:n})]}):c.jsx("code",{className:e,children:t})}},Tv=O.memo(t=>{const e=K.c(2),{content:n}=t;let o;return e[0]!==n?(o=c.jsx(CR,{components:TR,className:"prose dark:prose-invert max-w-none prose-pre:pl-0",children:n}),e[0]=n,e[1]=o):o=e[1],o},(t,e)=>t.content===e.content);Tv.displayName="MemoizedMarkdownBlock";const Wh=O.memo(({content:t})=>{const e=O.useMemo(()=>{return n=t,L$.lexer(n).map(o=>o.raw);var n},[t]);return c.jsx(c.Fragment,{children:e.map((n,o)=>c.jsx(Tv,{content:n},`markdown-block-${o}`))})});Wh.displayName="MarkdownRenderer";const MR=t=>{const e=K.c(13),{reasoning:n,index:o,isStreaming:r}=t,s=o===void 0?0:o,i=r!==void 0&&r,a=i?"reasoning":void 0;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(ic,{className:"h-3 w-3"}),e[0]=l):l=e[0];const d=i?"Thinking":"View reasoning";let u,h,f,m;return e[1]!==n.length||e[2]!==d?(u=c.jsx(yS,{className:"text-xs text-muted-foreground hover:bg-muted/50 px-2 py-1 h-auto rounded-sm [&[data-state=open]>svg]:rotate-180",children:c.jsxs("span",{className:"flex items-center gap-2",children:[l,d," (",n.length," ","chars)"]})}),e[1]=n.length,e[2]=d,e[3]=u):u=e[3],e[4]!==n?(h=c.jsx(wS,{className:"pb-2 px-2",children:c.jsx("div",{className:"bg-muted/30 border border-muted/50 rounded-md p-3 italic text-muted-foreground/90 relative",children:c.jsx("div",{className:"pr-6",children:c.jsx(Wh,{content:n})})})}),e[4]=n,e[5]=h):h=e[5],e[6]!==u||e[7]!==h?(f=c.jsxs(vS,{value:"reasoning",className:"border-0",children:[u,h]}),e[6]=u,e[7]=h,e[8]=f):f=e[8],e[9]!==s||e[10]!==a||e[11]!==f?(m=c.jsx(kS,{type:"single",collapsible:!0,className:"w-full mb-2",value:a,children:f},s),e[9]=s,e[10]=a,e[11]=f,e[12]=m):m=e[12],m},OR=t=>{const e=K.c(32),{toolName:n,result:o,error:r,index:s,state:i}=t,a=s===void 0?0:s,l=i==="result"&&(o||r),d=r?"error":l?"success":"loading";let u;e[0]!==d?(u=()=>{switch(d){case"loading":return c.jsx(Wc,{className:"h-3 w-3 animate-spin"});case"error":return c.jsx(Zi,{className:"h-3 w-3 text-destructive"});case"success":return c.jsx(hW,{className:"h-3 w-3 text-green-600"});default:return c.jsx(F$,{className:"h-3 w-3"})}},e[0]=d,e[1]=u):u=e[1];const h=u;let f;e[2]!==r||e[3]!==l||e[4]!==d?(f=()=>d==="loading"?"Running: ":r?"Failed: ":l?"Done: ":"Tool call",e[2]=r,e[3]=l,e[4]=d,e[5]=f):f=e[5];const m=f,_=`tool-${a}`,g=d==="error"&&"text-destructive/80",p=d==="success"&&"text-green-600/80";let b,x;e[6]!==g||e[7]!==p?(b=Ne("h-6 text-xs border-border !shadow-none !ring-0 bg-muted hover:bg-muted/30 py-0 px-2 gap-1 rounded-sm [&[data-state=open]>svg]:rotate-180",g,p),e[6]=g,e[7]=p,e[8]=b):b=e[8],e[9]!==h?(x=h(),e[9]=h,e[10]=x):x=e[10];const y=m();let v,C,S,E,N,j,T;return e[11]!==n?(v=c.jsx("code",{className:"font-mono text-xs",children:n}),e[11]=n,e[12]=v):v=e[12],e[13]!==v||e[14]!==x||e[15]!==y?(C=c.jsxs("span",{className:"flex items-center gap-1",children:[x,y,":"," ",v]}),e[13]=v,e[14]=x,e[15]=y,e[16]=C):C=e[16],e[17]!==C||e[18]!==b?(S=c.jsx(yS,{className:b,children:C}),e[17]=C,e[18]=b,e[19]=S):S=e[19],e[20]!==r||e[21]!==l||e[22]!==o?(E=l&&c.jsxs("div",{className:"space-y-3",children:[o&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground mt-2 mb-1",children:"Result:"}),c.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:typeof o=="string"?o:JSON.stringify(o,null,2)})]}),r&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-medium text-destructive mb-1",children:"Error:"}),c.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3 text-sm text-destructive",children:r})]})]}),e[20]=r,e[21]=l,e[22]=o,e[23]=E):E=e[23],e[24]!==E?(N=c.jsx(wS,{className:"pb-2 px-2",children:E}),e[24]=E,e[25]=N):N=e[25],e[26]!==S||e[27]!==N?(j=c.jsxs(vS,{value:"tool-call",className:"border-0",children:[S,N]}),e[26]=S,e[27]=N,e[28]=j):j=e[28],e[29]!==j||e[30]!==_?(T=c.jsx(kS,{type:"single",collapsible:!0,className:"w-full my-4",children:j},_),e[29]=j,e[30]=_,e[31]=T):T=e[31],T},DR=t=>{const e=K.c(27),{onNewChat:n,activeChatId:o,setActiveChat:r,chats:s}=t,{handleClick:i}=wa();let a,l,d,u,h,f,m,_,g,p,b;if(e[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(br,{className:"h-4 w-4"}),e[0]=a):a=e[0],e[1]!==n?(l=c.jsx(Te,{content:"New chat",children:c.jsx(Ae,{variant:"text",size:"icon",onClick:n,children:a})}),e[1]=n,e[2]=l):l=e[2],e[3]!==i?(d=()=>i("ai"),e[3]=i,e[4]=d):d=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(Pm,{className:"h-4 w-4"}),e[5]=u):u=e[5],e[6]!==d?(h=c.jsx(Te,{content:"AI Settings",children:c.jsx(Ae,{variant:"text",size:"xs",className:"hover:bg-foreground/10 py-2",onClick:d,children:u})}),e[6]=d,e[7]=h):h=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(Te,{content:"Previous chats",children:c.jsx(Hs,{asChild:!0,children:c.jsx(Ae,{variant:"text",size:"icon",children:c.jsx(V$,{className:"h-4 w-4"})})})}),e[8]=f):f=e[8],e[9]!==s.length?(m=s.length===0&&c.jsx(yn,{title:"No chats yet",description:"Start a new chat to get started",icon:c.jsx(ic,{})}),e[9]=s.length,e[10]=m):m=e[10],e[11]!==o||e[12]!==s||e[13]!==r){let x;e[15]!==o||e[16]!==r?(x=y=>c.jsxs("button",{className:Ne("w-full p-3 rounded-md cursor-pointer hover:bg-accent text-left",y.id===o&&"bg-accent"),onClick:()=>{r(y.id)},type:"button",children:[c.jsx("div",{className:"font-medium",children:y.title}),c.jsx("div",{className:"text-sm text-muted-foreground",children:$$(y.updatedAt)})]},y.id),e[15]=o,e[16]=r,e[17]=x):x=e[17],_=s.map(x),e[11]=o,e[12]=s,e[13]=r,e[14]=_}else _=e[14];return e[18]!==m||e[19]!==_?(g=c.jsxs(Ur,{children:[f,c.jsx(Fs,{className:"w-[520px] p-0",align:"start",side:"right",children:c.jsx(_w,{className:"h-[500px] p-4",children:c.jsxs("div",{className:"space-y-4",children:[m,_]})})})]}),e[18]=m,e[19]=_,e[20]=g):g=e[20],e[21]!==h||e[22]!==g?(p=c.jsxs("div",{className:"flex items-center gap-2",children:[h,g]}),e[21]=h,e[22]=g,e[23]=p):p=e[23],e[24]!==p||e[25]!==l?(b=c.jsxs("div",{className:"flex border-b px-2 py-1 justify-between flex-shrink-0 items-center",children:[l,p]}),e[24]=p,e[25]=l,e[26]=b):b=e[26],b},Mv=O.memo(t=>{var f;const e=K.c(15),{message:n,index:o,theme:r,onEdit:s,isStreamingReasoning:i,totalMessages:a}=t,l=n.role==="user"?"justify-end":"justify-start";let d,u,h;return e[0]!==l?(d=Ne("flex group relative",l),e[0]=l,e[1]=d):d=e[1],e[2]!==o||e[3]!==i||e[4]!==n.content||e[5]!==n.id||e[6]!==n.parts||e[7]!==n.role||e[8]!==s||e[9]!==r||e[10]!==a?(u=n.role==="user"?c.jsx("div",{className:"w-[95%] bg-background border p-1 rounded-sm",children:c.jsx(Hc,{value:n.content,theme:r,placeholder:"Type your message...",onChange:LR,onSubmit:(m,_)=>{_.trim()&&s(o,_)},onClose:FR},n.id)}):c.jsxs("div",{className:"w-[95%] break-words",children:[c.jsx("div",{className:"absolute right-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(SS,{className:"h-3 w-3",value:n.content})}),(f=n.parts)==null?void 0:f.map((m,_)=>{var g;switch(m.type){case"text":return c.jsx(Wh,{content:m.text},_);case"reasoning":return c.jsx(MR,{reasoning:m.reasoning,index:_,isStreaming:o===a-1&&i&&_===(((g=n.parts)==null?void 0:g.length)||0)-1},_);case"tool-invocation":return c.jsx(OR,{index:_,toolName:m.toolInvocation.toolName,result:m.toolInvocation.state==="result"?m.toolInvocation.result:null,state:m.toolInvocation.state},_);default:return null}})]}),e[2]=o,e[3]=i,e[4]=n.content,e[5]=n.id,e[6]=n.parts,e[7]=n.role,e[8]=s,e[9]=r,e[10]=a,e[11]=u):u=e[11],e[12]!==d||e[13]!==u?(h=c.jsx("div",{className:d,children:u}),e[12]=d,e[13]=u,e[14]=h):h=e[14],h});Mv.displayName="ChatMessage";const qh=O.memo(t=>{var C;const e=K.c(22),{input:n,onSendClick:o,isLoading:r,onStop:s}=t,i=Le(_S),[a,l]=Qt(qm),d=((C=i==null?void 0:i.open_ai)==null?void 0:C.model)||"o4-mini";let u,h,f,m,_,g;if(e[0]!==l||e[1]!==a){u=async E=>{var j;const N={...a,ai:{...a.ai,open_ai:{...(j=a.ai)==null?void 0:j.open_ai,model:E}}};S(N)};const S=async E=>{await Br({config:E}).then(()=>{l(E)})};e[0]=l,e[1]=a,e[2]=u}else u=e[2];e[3]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(bc,{className:"h-6 text-xs border-border !shadow-none !ring-0 bg-muted hover:bg-muted/30 py-0 px-2 gap-1",children:c.jsx(xc,{placeholder:"Model"})}),e[3]=h):h=e[3],e[4]!==d?(f=!eC.includes(d)&&c.jsx(oa,{value:d,className:"text-sm",children:d},d),e[4]=d,e[5]=f):f=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(m=eC.map(zR),e[6]=m):m=e[6],e[7]!==f?(_=c.jsxs(yc,{children:[f,m]}),e[7]=f,e[8]=_):_=e[8],e[9]!==d||e[10]!==u||e[11]!==_?(g=c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs(_c,{value:d,onValueChange:u,children:[h,_]})}),e[9]=d,e[10]=u,e[11]=_,e[12]=g):g=e[12];const p=r?s:o,b=!r&&!n.trim();let x,y,v;return e[13]!==r?(x=r?c.jsx(vc,{className:"h-3 w-3 fill-current"}):c.jsx(z$,{className:"h-3 w-3"}),e[13]=r,e[14]=x):x=e[14],e[15]!==p||e[16]!==b||e[17]!==x?(y=c.jsx(Ae,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted/30",onClick:p,disabled:b,children:x}),e[15]=p,e[16]=b,e[17]=x,e[18]=y):y=e[18],e[19]!==g||e[20]!==y?(v=c.jsxs("div",{className:"px-3 py-2 border-t border-border/20 flex items-center justify-between",children:[g,y]}),e[19]=g,e[20]=y,e[21]=v):v=e[21],v});qh.displayName="ChatInputFooter";const Ov=O.memo(t=>{var g,p;const e=K.c(19),{input:n,setInput:o,onSubmit:r,theme:s,inputRef:i,isLoading:a,onStop:l}=t;let d;e[0]!==n||e[1]!==r?(d=()=>{n.trim()&&r(void 0,n)},e[0]=n,e[1]=r,e[2]=d):d=e[2];const u=d;let h,f,m,_;return e[3]!==((g=i.current)==null?void 0:g.editor)?(h=()=>{var b,x;return(x=(b=i.current)==null?void 0:b.editor)==null?void 0:x.blur()},e[3]=(p=i.current)==null?void 0:p.editor,e[4]=h):h=e[4],e[5]!==n||e[6]!==r||e[7]!==o||e[8]!==h||e[9]!==s?(f=c.jsx("div",{className:"px-2 py-3 flex-1",children:c.jsx(Hc,{value:n,onChange:o,onSubmit:r,onClose:h,theme:s,placeholder:"Type your message..."})}),e[5]=n,e[6]=r,e[7]=o,e[8]=h,e[9]=s,e[10]=f):f=e[10],e[11]!==u||e[12]!==n||e[13]!==a||e[14]!==l?(m=c.jsx(qh,{input:n,onSendClick:u,isLoading:a,onStop:l}),e[11]=u,e[12]=n,e[13]=a,e[14]=l,e[15]=m):m=e[15],e[16]!==f||e[17]!==m?(_=c.jsxs("div",{className:"border-t relative flex-shrink-0 min-h-[80px] flex flex-col",children:[f,m]}),e[16]=f,e[17]=m,e[18]=_):_=e[18],_});Ov.displayName="ChatInput";const RR=()=>{const t=K.c(6),e=Le(cc),{handleClick:n}=wa();if(!e){let r,s,i;return t[0]!==n?(r=c.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>n("ai"),children:"Edit AI settings"}),t[0]=n,t[1]=r):r=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx(ic,{}),t[2]=s):s=t[2],t[3]!==r?(i=c.jsx(yn,{title:"Chat with AI",description:"AI is currently disabled. Add your API key to enable.",action:r,icon:s}),t[3]=r,t[4]=i):i=t[4],i}let o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(PR,{}),t[5]=o):o=t[5],o},PR=()=>{const[t,e]=Qt(wd),[n,o]=Qt(SC),[r,s]=O.useState(""),i=O.useRef(null),a=O.useRef(null),l=O.useRef(null),d=O.useRef(null),{theme:u}=xr(),h=ep(),{messages:f,input:m,setInput:_,setMessages:g,append:p,handleSubmit:b,error:x,status:y,reload:v,stop:C}=B$({id:n==null?void 0:n.id,maxSteps:10,initialMessages:(n==null?void 0:n.messages)||[],keepLastMessageOnError:!0,api:h.getAiURL("chat").toString(),headers:h.headers(),experimental_prepareRequestBody:T=>({...T,...tS({input:T.messages.map(A=>A.content).join(`
`)}),includeOtherCode:Lc("")}),onFinish:T=>{e(A=>fh(A,A.activeChatId,T.id,"assistant",T.content,T.parts))},onToolCall:async({toolCall:T})=>{try{const A=await U$({toolName:T.toolName,arguments:T.args});return A.result||A.error}catch(A){return vt.error("Tool call failed:",A),`Error: ${A instanceof Error?A.message:String(A)}`}},onError:T=>{vt.error("An error occurred:",T)},onResponse:T=>{vt.debug("Received HTTP response from server:",T)}}),S=y==="submitted"||y==="streaming";O.useEffect(()=>{if(!t.activeChatId||f.length===0)return;const T=f[f.length-1];if((T==null?void 0:T.role)!=="user")return;const A=t.chats.find(R=>R.id===t.activeChatId);if(!A)return;const M=new Set(A.messages.map(R=>R.id)),P=f.filter(R=>R.role==="user"&&!M.has(R.id));P.length>0&&e(R=>{let L=R;for(const B of P)L=fh(L,R.activeChatId,B.id,"user",B.content);return L})},[f,t.activeChatId,t.chats,e]);const E=S&&f.length>0&&(T=>{if(T.length===0)return!1;const A=T.at(-1);if(!A||A.role!=="assistant"||!A.parts)return!1;const M=A.parts;return M.length===0?!1:M[M.length-1].type==="reasoning"})(f);O.useEffect(()=>{requestAnimationFrame(()=>{if(l.current){const T=l.current;T.scrollTop=T.scrollHeight}})},[t.activeChatId]);const N=(T,A)=>{g(M=>M.slice(0,T)),t.activeChatId&&e(M=>({...M,chats:M.chats.map(P=>P.id===t.activeChatId?{...P,messages:P.messages.slice(0,T),updatedAt:Date.now()}:P)})),p({role:"user",content:A})},j=()=>{r.trim()&&(T=>{const A=Date.now(),M={id:CS(),title:T.length>50?`${T.slice(0,50)}...`:T,messages:[],createdAt:A,updatedAt:A};e(R=>({...R,chats:[...R.chats,M],activeChatId:M.id}));const P=CS();p({id:P,role:"user",content:T}),_("")})(r.trim())};return c.jsxs("div",{className:"flex flex-col h-[calc(100%-53px)]",children:[c.jsx(tp,{children:c.jsx(DR,{onNewChat:()=>{o(null),_(""),s("")},activeChatId:n==null?void 0:n.id,setActiveChat:o,chats:[...t.chats].sort((T,A)=>A.updatedAt-T.updatedAt)})}),c.jsxs("div",{className:"flex-1 px-3 bg-[var(--slate-1)] gap-4 py-3 flex flex-col overflow-y-auto",ref:l,children:[(!f||f.length===0)&&c.jsxs("div",{className:"flex flex-col rounded-md border bg-background",children:[c.jsx("div",{className:"px-1",children:c.jsx(Hc,{value:r,placeholder:"Ask anything, @ to include context about tables or dataframes",theme:u,onClose:()=>{var T,A;return(A=(T=i.current)==null?void 0:T.editor)==null?void 0:A.blur()},onChange:s,onSubmit:j},"new-thread-input")}),c.jsx(qh,{input:r,onSendClick:j,isLoading:S,onStop:C})]}),f.map((T,A)=>c.jsx(Mv,{message:T,index:A,theme:u,onEdit:N,setChatState:e,chatState:t,isStreamingReasoning:E,totalMessages:f.length},A)),S&&c.jsx("div",{className:"flex justify-center py-4",children:c.jsx(Wc,{className:"h-4 w-4 animate-spin"})}),x&&c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(Vr,{error:x}),c.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>{v()},children:"Retry"})]}),c.jsx("div",{ref:d})]}),S&&c.jsx("div",{className:"w-full flex justify-center items-center z-20 border-t",children:c.jsx(Ae,{variant:"linkDestructive",size:"sm",onClick:C,children:"Stop"})}),f&&f.length>0&&c.jsx(Ov,{input:m,setInput:_,onSubmit:(T,A)=>{A.trim()&&b(T)},theme:u,inputRef:a,isLoading:S,onStop:C})]})};function LR(){}function FR(){}function zR(t){return c.jsx(oa,{value:t,className:"text-sm",children:t},t)}function cn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n,o=0;o<t.length;o++)(n=cn(t[o]))!==""&&(e+=(e&&" ")+n);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const{useDebugValue:BR}=X,{useSyncExternalStoreWithSelector:UR}=H$,VR=t=>t;function Dv(t,e=VR,n){const o=UR(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return BR(o),o}const Rv=(t,e)=>{const n=W$(t),o=(r,s=e)=>Dv(n,r,s);return Object.assign(o,n),o};function nn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[o,r]of t)if(!Object.is(r,e.get(o)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(e,o)||!Object.is(t[o],e[o]))return!1;return!0}function uo(t,e){if(t=function(s){let i;for(;i=s.sourceEvent;)s=i;return s}(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(e.getScreenCTM().inverse())).x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const $R={passive:!1},Fi={capture:!0,passive:!1};function Gh(t){t.stopImmediatePropagation()}function bs(t){t.preventDefault(),t.stopImmediatePropagation()}function Pv(t){var e=t.document.documentElement,n=to(t).on("dragstart.drag",bs,Fi);"onselectstart"in e?n.on("selectstart.drag",bs,Fi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Lv(t,e){var n=t.document.documentElement,o=to(t).on("dragstart.drag",null);e&&(o.on("click.drag",bs,Fi),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $l=t=>()=>t;function Yh(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:l,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}function HR(t){return!t.ctrlKey&&!t.button}function WR(){return this.parentNode}function qR(t,e){return e??{x:t.x,y:t.y}}function GR(){return navigator.maxTouchPoints||"ontouchstart"in this}Yh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};const Hl=t=>()=>t;function YR(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Jh(t){t.stopImmediatePropagation()}function zi(t){t.preventDefault(),t.stopImmediatePropagation()}function JR(t){return!(t.ctrlKey&&t.type!=="wheel"||t.button)}function KR(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Fv(){return this.__zoom||vr}function XR(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ZR(){return navigator.maxTouchPoints||"ontouchstart"in this}function QR(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}const Wl=O.createContext(null),eP=Wl.Provider,tP=t=>`Node type "${t}" not found. Using fallback type "default".`,nP=()=>"The React Flow parent container needs a width and a height to render the graph.",oP=()=>"Only child nodes can use a parent extent.",rP=t=>`Marker type "${t}" doesn't exist.`,sP=(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,iP=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",aP=t=>`Edge type "${t}" not found. Using fallback type "default".`,lP=t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,zv="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function mt(t,e){const n=O.useContext(Wl);if(n===null)throw new Error(zv);return Dv(n,t,e)}const Gt=()=>{const t=O.useContext(Wl);if(t===null)throw new Error(zv);return O.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},cP=t=>t.userSelectionActive?"none":"all";function ql({position:t,children:e,className:n,style:o,...r}){const s=mt(cP),i=`${t}`.split("-");return X.createElement("div",{className:cn(["react-flow__panel",n,...i]),style:{...o,pointerEvents:s},...r},e)}function dP({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:X.createElement(ql,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},X.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var uP=O.memo(({x:t,y:e,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:d,...u})=>{const h=O.useRef(null),[f,m]=O.useState({x:0,y:0,width:0,height:0}),_=cn(["react-flow__edge-textwrapper",d]);return O.useEffect(()=>{if(h.current){const g=h.current.getBBox();m({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),n!==void 0&&n?X.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:_,visibility:f.width?"visible":"hidden",...u},r&&X.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),X.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:o},n),l):null});const Kh=t=>({width:t.offsetWidth,height:t.offsetHeight}),xs=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Xh=(t={x:0,y:0},e)=>({x:xs(t.x,e[0][0],e[1][0]),y:xs(t.y,e[0][1],e[1][1])}),Bv=(t,e,n)=>t<e?xs(Math.abs(t-e),1,50)/50:t>n?-xs(Math.abs(t-n),1,50)/50:0,Uv=(t,e)=>[20*Bv(t.x,35,e.width-35),20*Bv(t.y,35,e.height-35)],Vv=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Zh=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),$v=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Qh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},Bn=t=>!isNaN(t)&&isFinite(t),Nt=Symbol.for("internals"),Hv=["Enter"," ","Escape"];function ef(t){var o,r;const e=(s=>"nativeEvent"in s)(t)?t.nativeEvent:t,n=((r=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:r[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Wv=t=>"clientX"in t,Qo=(t,e)=>{var s,i;const n=Wv(t),o=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,r=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:o-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},Gl=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Bi=({id:t,path:e,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:f,interactionWidth:m=20})=>X.createElement(X.Fragment,null,X.createElement("path",{id:t,style:u,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),m&&X.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),r&&Bn(n)&&Bn(o)?X.createElement(uP,{x:n,y:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:d}):null);function Ui(t,e,n){return n===void 0?n:o=>{const r=e().edges.find(s=>s.id===t);r&&n(o,{...r})}}function qv({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,s=n<t?n+r:n-r,i=Math.abs(o-e)/2;return[s,o<e?o+i:o-i,r,i]}function Gv({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=.125*t+.375*r+.375*i+.125*n,d=.125*e+.375*s+.375*a+.125*o;return[l,d,Math.abs(l-t),Math.abs(d-e)]}var Dr,Yv,er,tf,Vi,Jv,tr,$i,ys,Kv,Ue,Yl;function Xv({pos:t,x1:e,y1:n,x2:o,y2:r}){return t===Ue.Left||t===Ue.Right?[.5*(e+o),n]:[e,.5*(n+r)]}function Zv({sourceX:t,sourceY:e,sourcePosition:n=Ue.Bottom,targetX:o,targetY:r,targetPosition:s=Ue.Top}){const[i,a]=Xv({pos:n,x1:t,y1:e,x2:o,y2:r}),[l,d]=Xv({pos:s,x1:o,y1:r,x2:t,y2:e}),[u,h,f,m]=Gv({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:d});return[`M${t},${e} C${i},${a} ${l},${d} ${o},${r}`,u,h,f,m]}Bi.displayName="BaseEdge",(Yv=Dr||(Dr={})).Strict="strict",Yv.Loose="loose",(tf=er||(er={})).Free="free",tf.Vertical="vertical",tf.Horizontal="horizontal",(Jv=Vi||(Vi={})).Partial="partial",Jv.Full="full",($i=tr||(tr={})).Bezier="default",$i.Straight="straight",$i.Step="step",$i.SmoothStep="smoothstep",$i.SimpleBezier="simplebezier",(Kv=ys||(ys={})).Arrow="arrow",Kv.ArrowClosed="arrowclosed",(Yl=Ue||(Ue={})).Left="left",Yl.Top="top",Yl.Right="right",Yl.Bottom="bottom";const nf=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=Ue.Bottom,targetPosition:s=Ue.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:_,interactionWidth:g})=>{const[p,b,x]=Zv({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:s});return X.createElement(Bi,{path:p,labelX:b,labelY:x,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:_,interactionWidth:g})});nf.displayName="SimpleBezierEdge";const Qv={[Ue.Left]:{x:-1,y:0},[Ue.Right]:{x:1,y:0},[Ue.Top]:{x:0,y:-1},[Ue.Bottom]:{x:0,y:1}},e2=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function hP({source:t,sourcePosition:e=Ue.Bottom,target:n,targetPosition:o=Ue.Top,center:r,offset:s}){const i=Qv[e],a=Qv[o],l={x:t.x+i.x*s,y:t.y+i.y*s},d={x:n.x+a.x*s,y:n.y+a.y*s},u=(({source:S,sourcePosition:E=Ue.Bottom,target:N})=>E===Ue.Left||E===Ue.Right?S.x<N.x?{x:1,y:0}:{x:-1,y:0}:S.y<N.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:e,target:d}),h=u.x!==0?"x":"y",f=u[h];let m,_,g=[];const p={x:0,y:0},b={x:0,y:0},[x,y,v,C]=qv({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[h]*a[h]===-1){m=r.x??x,_=r.y??y;const S=[{x:m,y:l.y},{x:m,y:d.y}],E=[{x:l.x,y:_},{x:d.x,y:_}];g=i[h]===f?h==="x"?S:E:h==="x"?E:S}else{const S=[{x:l.x,y:d.y}],E=[{x:d.x,y:l.y}];if(g=h==="x"?i.x===f?E:S:i.y===f?S:E,e===o){const T=Math.abs(t[h]-n[h]);if(T<=s){const A=Math.min(s-1,s-T);i[h]===f?p[h]=(l[h]>t[h]?-1:1)*A:b[h]=(d[h]>n[h]?-1:1)*A}}if(e!==o){const T=h==="x"?"y":"x",A=i[h]===a[T],M=l[T]>d[T],P=l[T]<d[T];(i[h]===1&&(!A&&M||A&&P)||i[h]!==1&&(!A&&P||A&&M))&&(g=h==="x"?S:E)}const N={x:l.x+p.x,y:l.y+p.y},j={x:d.x+b.x,y:d.y+b.y};Math.max(Math.abs(N.x-g[0].x),Math.abs(j.x-g[0].x))>=Math.max(Math.abs(N.y-g[0].y),Math.abs(j.y-g[0].y))?(m=(N.x+j.x)/2,_=g[0].y):(m=g[0].x,_=(N.y+j.y)/2)}return[[t,{x:l.x+p.x,y:l.y+p.y},...g,{x:d.x+b.x,y:d.y+b.y},n],m,_,v,C]}function of({sourceX:t,sourceY:e,sourcePosition:n=Ue.Bottom,targetX:o,targetY:r,targetPosition:s=Ue.Top,borderRadius:i=5,centerX:a,centerY:l,offset:d=20}){const[u,h,f,m,_]=hP({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:l},offset:d});return[u.reduce((g,p,b)=>{let x="";return x=b>0&&b<u.length-1?function(y,v,C,S){const E=Math.min(e2(y,v)/2,e2(v,C)/2,S),{x:N,y:j}=v;if(y.x===N&&N===C.x||y.y===j&&j===C.y)return`L${N} ${j}`;if(y.y===j)return`L ${N+E*(y.x<C.x?-1:1)},${j}Q ${N},${j} ${N},${j+E*(y.y<C.y?1:-1)}`;const T=y.x<C.x?1:-1;return`L ${N},${j+E*(y.y<C.y?-1:1)}Q ${N},${j} ${N+E*T},${j}`}(u[b-1],p,u[b+1],i):`${b===0?"M":"L"}${p.x} ${p.y}`,g+=x},""),h,f,m,_]}const Jl=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:d,style:u,sourcePosition:h=Ue.Bottom,targetPosition:f=Ue.Top,markerEnd:m,markerStart:_,pathOptions:g,interactionWidth:p})=>{const[b,x,y]=of({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:o,targetPosition:f,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return X.createElement(Bi,{path:b,labelX:x,labelY:y,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:d,style:u,markerEnd:m,markerStart:_,interactionWidth:p})});Jl.displayName="SmoothStepEdge";const rf=O.memo(t=>{var e;return X.createElement(Jl,{...t,pathOptions:O.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});rf.displayName="StepEdge";const sf=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:f,interactionWidth:m})=>{const[_,g,p]=function({sourceX:b,sourceY:x,targetX:y,targetY:v}){const[C,S,E,N]=qv({sourceX:b,sourceY:x,targetX:y,targetY:v});return[`M ${b},${x}L ${y},${v}`,C,S,E,N]}({sourceX:t,sourceY:e,targetX:n,targetY:o});return X.createElement(Bi,{path:_,labelX:g,labelY:p,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:f,interactionWidth:m})});function Kl(t,e){return t>=0?.5*t:25*e*Math.sqrt(-t)}function t2({pos:t,x1:e,y1:n,x2:o,y2:r,c:s}){switch(t){case Ue.Left:return[e-Kl(e-o,s),n];case Ue.Right:return[e+Kl(o-e,s),n];case Ue.Top:return[e,n-Kl(n-r,s)];case Ue.Bottom:return[e,n+Kl(r-n,s)]}}function n2({sourceX:t,sourceY:e,sourcePosition:n=Ue.Bottom,targetX:o,targetY:r,targetPosition:s=Ue.Top,curvature:i=.25}){const[a,l]=t2({pos:n,x1:t,y1:e,x2:o,y2:r,c:i}),[d,u]=t2({pos:s,x1:o,y1:r,x2:t,y2:e,c:i}),[h,f,m,_]=Gv({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:d,targetControlY:u});return[`M${t},${e} C${a},${l} ${d},${u} ${o},${r}`,h,f,m,_]}sf.displayName="StraightEdge";const Xl=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=Ue.Bottom,targetPosition:s=Ue.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:_,pathOptions:g,interactionWidth:p})=>{const[b,x,y]=n2({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:s,curvature:g==null?void 0:g.curvature});return X.createElement(Bi,{path:b,labelX:x,labelY:y,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:_,interactionWidth:p})});Xl.displayName="BezierEdge";const af=O.createContext(null),fP=af.Provider;af.Consumer;const mP=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`reactflow__edge-${t}${e||""}-${n}${o||""}`,lf=(t,e)=>t===void 0?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,cf=({x:t,y:e},[n,o,r],s,[i,a])=>{const l={x:(t-n)/r,y:(e-o)/r};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},o2=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o}),ws=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],o=(t.height??0)*e[1],r={x:t.position.x-n,y:t.position.y-o};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:r}},df=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const{x:s,y:i}=ws(r,e).positionAbsolute;return a=o,l=Zh({x:s,y:i,width:r.width||0,height:r.height||0}),{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y),x2:Math.max(a.x2,l.x2),y2:Math.max(a.y2,l.y2)};var a,l},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:o,y:r,x2:s,y2:i})=>({x:o,y:r,width:s-o,height:i-r}))(n)},r2=(t,e,[n,o,r]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const l={x:(e.x-n)/r,y:(e.y-o)/r,width:e.width/r,height:e.height/r},d=[];return t.forEach(u=>{const{width:h,height:f,selectable:m=!0,hidden:_=!1}=u;if(i&&!m||_)return!1;const{positionAbsolute:g}=ws(u,a),p={x:g.x,y:g.y,width:h||0,height:f||0},b=Qh(l,p);(h===void 0||f===void 0||h===null||f===null||s&&b>0||b>=(h||0)*(f||0)||u.dragging)&&d.push(u)}),d},s2=(t,e)=>{const n=t.map(o=>o.id);return e.filter(o=>n.includes(o.source)||n.includes(o.target))},i2=(t,e,n,o,r,s=.1)=>{const i=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(i,a),d=xs(l,o,r);return{x:e/2-(t.x+t.width/2)*d,y:n/2-(t.y+t.height/2)*d,zoom:d}},Rr=(t,e=0)=>t.transition().duration(e);function a2(t,e,n,o){return(e[n]||[]).reduce((r,s)=>{var i,a;return`${t.id}-${s.id}-${n}`!==o&&r.push({id:s.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),r},[])}const pP={source:null,target:null,sourceHandle:null,targetHandle:null},l2=()=>({handleDomNode:null,isValid:!1,connection:pP,endHandle:null});function c2(t,e,n,o,r,s,i){const a=r==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),d={...l2(),handleDomNode:l};if(l){const u=uf(void 0,l),h=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),_=l.classList.contains("connectableend"),g={source:a?h:n,sourceHandle:a?f:o,target:a?n:h,targetHandle:a?o:f};d.connection=g,m&&_&&(e===Dr.Strict?a&&u==="source"||!a&&u==="target":h!==n||f!==o)&&(d.endHandle={nodeId:h,handleId:f,type:u},d.isValid=s(g))}return d}function uf(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function hf(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function gP(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function d2({event:t,handleId:e,nodeId:n,onConnect:o,isTarget:r,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:d}){const u=Vv(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:m,connectionRadius:_,onConnectStart:g,panBy:p,getNodes:b,cancelConnection:x}=s();let y,v=0;const{x:C,y:S}=Qo(t),E=u==null?void 0:u.elementFromPoint(C,S),N=uf(l,E),j=f==null?void 0:f.getBoundingClientRect();if(!j||!N)return;let T,A=Qo(t,j),M=!1,P=null,R=!1,L=null;const B=function({nodes:$,nodeId:I,handleId:W,handleType:G}){return $.reduce((q,Y)=>{if(Y[Nt]){const{handleBounds:ee}=Y[Nt];let oe=[],ie=[];ee&&(oe=a2(Y,ee,"source",`${I}-${W}-${G}`),ie=a2(Y,ee,"target",`${I}-${W}-${G}`)),q.push(...oe,...ie)}return q},[])}({nodes:b(),nodeId:n,handleId:e,handleType:N}),U=()=>{if(!m)return;const[$,I]=Uv(A,j);p({x:$,y:I}),v=requestAnimationFrame(U)};function D($){const{transform:I}=s();A=Qo($,j);const{handle:W,validHandleResult:G}=function(q,Y,ee,oe,ie,Z){const{x:Q,y:me}=Qo(q),fe=Y.elementsFromPoint(Q,me).find(Se=>Se.classList.contains("react-flow__handle"));if(fe){const Se=fe.getAttribute("data-nodeid");if(Se){const ae=uf(void 0,fe),Ce=fe.getAttribute("data-handleid"),_e=Z({nodeId:Se,id:Ce,type:ae});if(_e){const Ee=ie.find(ze=>ze.nodeId===Se&&ze.type===ae&&ze.id===Ce);return{handle:{id:Ce,type:ae,nodeId:Se,x:(Ee==null?void 0:Ee.x)||ee.x,y:(Ee==null?void 0:Ee.y)||ee.y},validHandleResult:_e}}}}let de=[],ue=1/0;if(ie.forEach(Se=>{const ae=Math.sqrt((Se.x-ee.x)**2+(Se.y-ee.y)**2);if(ae<=oe){const Ce=Z(Se);ae<=ue&&(ae<ue?de=[{handle:Se,validHandleResult:Ce}]:ae===ue&&de.push({handle:Se,validHandleResult:Ce}),ue=ae)}}),!de.length)return{handle:null,validHandleResult:l2()};if(de.length===1)return de[0];const ce=de.some(({validHandleResult:Se})=>Se.isValid),ke=de.some(({handle:Se})=>Se.type==="target");return de.find(({handle:Se,validHandleResult:ae})=>ke?Se.type==="target":!ce||ae.isValid)||de[0]}($,u,cf(A,I,!1,[1,1]),_,B,q=>c2(q,h,n,e,r?"target":"source",a,u));if(y=W,M||(U(),M=!0),L=G.handleDomNode,P=G.connection,R=G.isValid,i({connectionPosition:y&&R?o2({x:y.x,y:y.y},I):A,connectionStatus:gP(!!y,R),connectionEndHandle:G.endHandle}),!y&&!R&&!L)return hf(T);P.source!==P.target&&L&&(hf(T),T=L,L.classList.add("connecting","react-flow__handle-connecting"),L.classList.toggle("valid",R),L.classList.toggle("react-flow__handle-valid",R))}function k($){var I,W;(y||L)&&P&&R&&(o==null||o(P)),(W=(I=s()).onConnectEnd)==null||W.call(I,$),l&&(d==null||d($)),hf(T),x(),cancelAnimationFrame(v),M=!1,R=!1,P=null,L=null,u.removeEventListener("mousemove",D),u.removeEventListener("mouseup",k),u.removeEventListener("touchmove",D),u.removeEventListener("touchend",k)}i({connectionPosition:A,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:e,type:N},connectionEndHandle:null}),g==null||g(t,{nodeId:n,handleId:e,handleType:N}),u.addEventListener("mousemove",D),u.addEventListener("mouseup",k),u.addEventListener("touchmove",D),u.addEventListener("touchend",k)}const u2=()=>!0,_P=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),h2=O.forwardRef(({type:t="source",position:e=Ue.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:l,className:d,onMouseDown:u,onTouchStart:h,...f},m)=>{var N,j;const _=i||null,g=t==="target",p=Gt(),b=O.useContext(af),{connectOnClick:x,noPanClassName:y}=mt(_P,nn),{connecting:v,clickConnecting:C}=mt(((T,A,M)=>P=>{const{connectionStartHandle:R,connectionEndHandle:L,connectionClickStartHandle:B}=P;return{connecting:(R==null?void 0:R.nodeId)===T&&(R==null?void 0:R.handleId)===A&&(R==null?void 0:R.type)===M||(L==null?void 0:L.nodeId)===T&&(L==null?void 0:L.handleId)===A&&(L==null?void 0:L.type)===M,clickConnecting:(B==null?void 0:B.nodeId)===T&&(B==null?void 0:B.handleId)===A&&(B==null?void 0:B.type)===M}})(b,_,t),nn);b||((j=(N=p.getState()).onError)==null||j.call(N,"010",iP()));const S=T=>{const{defaultEdgeOptions:A,onConnect:M,hasDefaultEdges:P}=p.getState(),R={...A,...T};if(P){const{edges:L,setEdges:B}=p.getState();B(((U,D)=>{if(!U.source||!U.target)return D;let k;return k=($=>"id"in $&&"source"in $&&"target"in $)(U)?{...U}:{...U,id:mP(U)},(($,I)=>I.some(W=>!(W.source!==$.source||W.target!==$.target||W.sourceHandle!==$.sourceHandle&&(W.sourceHandle||$.sourceHandle)||W.targetHandle!==$.targetHandle&&(W.targetHandle||$.targetHandle))))(k,D)?D:D.concat(k)})(R,L))}M==null||M(R),a==null||a(R)},E=T=>{if(!b)return;const A=Wv(T);r&&(A&&T.button===0||!A)&&d2({event:T,handleId:_,nodeId:b,onConnect:S,isTarget:g,getState:p.getState,setState:p.setState,isValidConnection:n||p.getState().isValidConnection||u2}),A?u==null||u(T):h==null||h(T)};return X.createElement("div",{"data-handleid":_,"data-nodeid":b,"data-handlepos":e,"data-id":`${b}-${_}-${t}`,className:cn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",y,d,{source:!g,target:g,connectable:o,connectablestart:r,connectableend:s,connecting:C,connectionindicator:o&&(r&&!v||s&&v)}]),onMouseDown:E,onTouchStart:E,onClick:x?T=>{const{onClickConnectStart:A,onClickConnectEnd:M,connectionClickStartHandle:P,connectionMode:R,isValidConnection:L}=p.getState();if(!b||!P&&!r)return;if(!P)return A==null||A(T,{nodeId:b,handleId:_,handleType:t}),void p.setState({connectionClickStartHandle:{nodeId:b,type:t,handleId:_}});const B=Vv(T.target),U=n||L||u2,{connection:D,isValid:k}=c2({nodeId:b,id:_,type:t},R,P.nodeId,P.handleId||null,P.type,U,B);k&&S(D),M==null||M(T),p.setState({connectionClickStartHandle:null})}:void 0,ref:m,...f},l)});h2.displayName="Handle";var nr=O.memo(h2);const f2=({data:t,isConnectable:e,targetPosition:n=Ue.Top,sourcePosition:o=Ue.Bottom})=>X.createElement(X.Fragment,null,X.createElement(nr,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,X.createElement(nr,{type:"source",position:o,isConnectable:e}));f2.displayName="DefaultNode";var ff=O.memo(f2);const m2=({data:t,isConnectable:e,sourcePosition:n=Ue.Bottom})=>X.createElement(X.Fragment,null,t==null?void 0:t.label,X.createElement(nr,{type:"source",position:n,isConnectable:e}));m2.displayName="InputNode";var p2=O.memo(m2);const g2=({data:t,isConnectable:e,targetPosition:n=Ue.Top})=>X.createElement(X.Fragment,null,X.createElement(nr,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);g2.displayName="OutputNode";var _2=O.memo(g2);const mf=()=>null;mf.displayName="GroupNode";const bP=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Zl=t=>t.id;function xP(t,e){return nn(t.selectedNodes.map(Zl),e.selectedNodes.map(Zl))&&nn(t.selectedEdges.map(Zl),e.selectedEdges.map(Zl))}const b2=O.memo(({onSelectionChange:t})=>{const e=Gt(),{selectedNodes:n,selectedEdges:o}=mt(bP,xP);return O.useEffect(()=>{const r={nodes:n,edges:o};t==null||t(r),e.getState().onSelectionChange.forEach(s=>s(r))},[n,o,t]),null});b2.displayName="SelectionListener";const yP=t=>!!t.onSelectionChange;function wP({onSelectionChange:t}){const e=mt(yP);return t||e?X.createElement(b2,{onSelectionChange:t}):null}const vP=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function vs(t,e){O.useEffect(()=>{t!==void 0&&e(t)},[t])}function st(t,e,n){O.useEffect(()=>{e!==void 0&&n({[t]:e})},[e])}const kP=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:d,nodesConnectable:u,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:_,minZoom:g,maxZoom:p,nodeExtent:b,onNodesChange:x,onEdgesChange:y,elementsSelectable:v,connectionMode:C,snapGrid:S,snapToGrid:E,translateExtent:N,connectOnClick:j,defaultEdgeOptions:T,fitView:A,fitViewOptions:M,onNodesDelete:P,onEdgesDelete:R,onNodeDrag:L,onNodeDragStart:B,onNodeDragStop:U,onSelectionDrag:D,onSelectionDragStart:k,onSelectionDragStop:$,noPanClassName:I,nodeOrigin:W,rfId:G,autoPanOnConnect:q,autoPanOnNodeDrag:Y,onError:ee,connectionRadius:oe,isValidConnection:ie,nodeDragThreshold:Z})=>{const{setNodes:Q,setEdges:me,setDefaultNodesAndEdges:fe,setMinZoom:de,setMaxZoom:ue,setTranslateExtent:ce,setNodeExtent:ke,reset:Se}=mt(vP,nn),ae=Gt();return O.useEffect(()=>{const Ce=o==null?void 0:o.map(_e=>({..._e,...T}));return fe(n,Ce),()=>{Se()}},[]),st("defaultEdgeOptions",T,ae.setState),st("connectionMode",C,ae.setState),st("onConnect",r,ae.setState),st("onConnectStart",s,ae.setState),st("onConnectEnd",i,ae.setState),st("onClickConnectStart",a,ae.setState),st("onClickConnectEnd",l,ae.setState),st("nodesDraggable",d,ae.setState),st("nodesConnectable",u,ae.setState),st("nodesFocusable",h,ae.setState),st("edgesFocusable",f,ae.setState),st("edgesUpdatable",m,ae.setState),st("elementsSelectable",v,ae.setState),st("elevateNodesOnSelect",_,ae.setState),st("snapToGrid",E,ae.setState),st("snapGrid",S,ae.setState),st("onNodesChange",x,ae.setState),st("onEdgesChange",y,ae.setState),st("connectOnClick",j,ae.setState),st("fitViewOnInit",A,ae.setState),st("fitViewOnInitOptions",M,ae.setState),st("onNodesDelete",P,ae.setState),st("onEdgesDelete",R,ae.setState),st("onNodeDrag",L,ae.setState),st("onNodeDragStart",B,ae.setState),st("onNodeDragStop",U,ae.setState),st("onSelectionDrag",D,ae.setState),st("onSelectionDragStart",k,ae.setState),st("onSelectionDragStop",$,ae.setState),st("noPanClassName",I,ae.setState),st("nodeOrigin",W,ae.setState),st("rfId",G,ae.setState),st("autoPanOnConnect",q,ae.setState),st("autoPanOnNodeDrag",Y,ae.setState),st("onError",ee,ae.setState),st("connectionRadius",oe,ae.setState),st("isValidConnection",ie,ae.setState),st("nodeDragThreshold",Z,ae.setState),vs(t,Q),vs(e,me),vs(g,de),vs(p,ue),vs(N,ce),vs(b,ke),null},x2={display:"none"},SP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},y2="react-flow__node-desc",w2="react-flow__edge-desc",CP=t=>t.ariaLiveMessage;function NP({rfId:t}){const e=mt(CP);return X.createElement("div",{id:`react-flow__aria-live-${t}`,"aria-live":"assertive","aria-atomic":"true",style:SP},e)}function jP({rfId:t,disableKeyboardA11y:e}){return X.createElement(X.Fragment,null,X.createElement("div",{id:`${y2}-${t}`,style:x2},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),X.createElement("div",{id:`${w2}-${t}`,style:x2},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&X.createElement(NP,{rfId:t}))}var Hi=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,o]=O.useState(!1),r=O.useRef(!1),s=O.useRef(new Set([])),[i,a]=O.useMemo(()=>{if(t!==null){const l=(Array.isArray(t)?t:[t]).filter(u=>typeof u=="string").map(u=>u.split("+")),d=l.reduce((u,h)=>u.concat(...h),[]);return[l,d]}return[[],[]]},[t]);return O.useEffect(()=>{const l=typeof document<"u"?document:null,d=(e==null?void 0:e.target)||l;if(t!==null){const u=m=>{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&ef(m))return!1;const _=k2(m.code,a);s.current.add(m[_]),v2(i,s.current,!1)&&(m.preventDefault(),o(!0))},h=m=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&ef(m))return!1;const _=k2(m.code,a);v2(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(m[_]),m.key==="Meta"&&s.current.clear(),r.current=!1},f=()=>{s.current.clear(),o(!1)};return d==null||d.addEventListener("keydown",u),d==null||d.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{d==null||d.removeEventListener("keydown",u),d==null||d.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[t,o]),n};function v2(t,e,n){return t.filter(o=>n||o.length===e.size).some(o=>o.every(r=>e.has(r)))}function k2(t,e){return e.includes(t)?"code":"key"}function S2(t,e,n,o){var a,l;const r=t.parentNode||t.parentId;if(!r)return n;const s=e.get(r),i=ws(s,o);return S2(s,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((a=s[Nt])==null?void 0:a.z)??0)>(n.z??0)?((l=s[Nt])==null?void 0:l.z)??0:n.z??0},o)}function C2(t,e,n){t.forEach(o=>{var s;const r=o.parentNode||o.parentId;if(r&&!t.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[o.id]){const{x:i,y:a,z:l}=S2(o,t,{...o.position,z:((s=o[Nt])==null?void 0:s.z)??0},e);o.positionAbsolute={x:i,y:a},o[Nt].z=l,n!=null&&n[o.id]&&(o[Nt].isParent=!0)}})}function pf(t,e,n,o){const r=new Map,s={},i=o?1e3:0;return t.forEach(a=>{var m;const l=(Bn(a.zIndex)?a.zIndex:0)+(a.selected?i:0),d=e.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(s[h]=!0);const f=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==a.type;Object.defineProperty(u,Nt,{enumerable:!1,value:{handleBounds:f||(m=d==null?void 0:d[Nt])==null?void 0:m.handleBounds,z:l}}),r.set(a.id,u)}),C2(r,n,s),r}function N2(t,e={}){const{getNodes:n,width:o,height:r,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:d,fitViewOnInit:u,nodeOrigin:h}=t(),f=e.initial&&!d&&u;if(a&&l&&(f||!e.initial)){const m=n().filter(g=>{var b;const p=e.includeHiddenNodes?g.width&&g.height:!g.hidden;return(b=e.nodes)!=null&&b.length?p&&e.nodes.some(x=>x.id===g.id):p}),_=m.every(g=>g.width&&g.height);if(m.length>0&&_){const g=df(m,h),{x:p,y:b,zoom:x}=i2(g,o,r,e.minZoom??s,e.maxZoom??i,e.padding??.1),y=vr.translate(p,b).scale(x);return typeof e.duration=="number"&&e.duration>0?a.transform(Rr(l,e.duration),y):a.transform(l,y),!0}}return!1}function EP(t,e){return t.forEach(n=>{const o=e.get(n.id);o&&e.set(o.id,{...o,[Nt]:o[Nt],selected:n.selected})}),new Map(e)}function IP(t,e){return e.map(n=>{const o=t.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Ql({changedNodes:t,changedEdges:e,get:n,set:o}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:d}=n();t!=null&&t.length&&(l&&o({nodeInternals:EP(t,r)}),i==null||i(t)),e!=null&&e.length&&(d&&o({edges:IP(e,s)}),a==null||a(e))}const ks=()=>{},AP={zoomIn:ks,zoomOut:ks,zoomTo:ks,getZoom:()=>1,setViewport:ks,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ks,fitBounds:ks,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},TP=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function Wi(){const t=(()=>{const g=Gt(),{d3Zoom:p,d3Selection:b}=mt(TP,nn);return O.useMemo(()=>b&&p?{zoomIn:y=>p.scaleBy(Rr(b,y==null?void 0:y.duration),1.2),zoomOut:y=>p.scaleBy(Rr(b,y==null?void 0:y.duration),1/1.2),zoomTo:(y,v)=>p.scaleTo(Rr(b,v==null?void 0:v.duration),y),getZoom:()=>g.getState().transform[2],setViewport:(y,v)=>{const[C,S,E]=g.getState().transform,N=vr.translate(y.x??C,y.y??S).scale(y.zoom??E);p.transform(Rr(b,v==null?void 0:v.duration),N)},getViewport:()=>{const[y,v,C]=g.getState().transform;return{x:y,y:v,zoom:C}},fitView:y=>N2(g.getState,y),setCenter:(y,v,C)=>{const{width:S,height:E,maxZoom:N}=g.getState(),j=(C==null?void 0:C.zoom)!==void 0?C.zoom:N,T=S/2-y*j,A=E/2-v*j,M=vr.translate(T,A).scale(j);p.transform(Rr(b,C==null?void 0:C.duration),M)},fitBounds:(y,v)=>{const{width:C,height:S,minZoom:E,maxZoom:N}=g.getState(),{x:j,y:T,zoom:A}=i2(y,C,S,E,N,(v==null?void 0:v.padding)??.1),M=vr.translate(j,T).scale(A);p.transform(Rr(b,v==null?void 0:v.duration),M)},project:y=>{const{transform:v,snapToGrid:C,snapGrid:S}=g.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),cf(y,v,C,S)},screenToFlowPosition:y=>{const{transform:v,snapToGrid:C,snapGrid:S,domNode:E}=g.getState();if(!E)return y;const{x:N,y:j}=E.getBoundingClientRect(),T={x:y.x-N,y:y.y-j};return cf(T,v,C,S)},flowToScreenPosition:y=>{const{transform:v,domNode:C}=g.getState();if(!C)return y;const{x:S,y:E}=C.getBoundingClientRect(),N=o2(y,v);return{x:N.x+S,y:N.y+E}},viewportInitialized:!0}:AP,[p,b])})(),e=Gt(),n=O.useCallback(()=>e.getState().getNodes().map(g=>({...g})),[]),o=O.useCallback(g=>e.getState().nodeInternals.get(g),[]),r=O.useCallback(()=>{const{edges:g=[]}=e.getState();return g.map(p=>({...p}))},[]),s=O.useCallback(g=>{const{edges:p=[]}=e.getState();return p.find(b=>b.id===g)},[]),i=O.useCallback(g=>{const{getNodes:p,setNodes:b,hasDefaultNodes:x,onNodesChange:y}=e.getState(),v=p(),C=typeof g=="function"?g(v):g;if(x)b(C);else if(y){const S=C.length===0?v.map(E=>({type:"remove",id:E.id})):C.map(E=>({item:E,type:"reset"}));y(S)}},[]),a=O.useCallback(g=>{const{edges:p=[],setEdges:b,hasDefaultEdges:x,onEdgesChange:y}=e.getState(),v=typeof g=="function"?g(p):g;x?b(v):y&&y(v.length===0?p.map(C=>({type:"remove",id:C.id})):v.map(C=>({item:C,type:"reset"})))},[]),l=O.useCallback(g=>{const p=Array.isArray(g)?g:[g],{getNodes:b,setNodes:x,hasDefaultNodes:y,onNodesChange:v}=e.getState();if(y)x([...b(),...p]);else if(v){const C=p.map(S=>({item:S,type:"add"}));v(C)}},[]),d=O.useCallback(g=>{const p=Array.isArray(g)?g:[g],{edges:b=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:v}=e.getState();y?x([...b,...p]):v&&v(p.map(C=>({item:C,type:"add"})))},[]),u=O.useCallback(()=>{const{getNodes:g,edges:p=[],transform:b}=e.getState(),[x,y,v]=b;return{nodes:g().map(C=>({...C})),edges:p.map(C=>({...C})),viewport:{x,y,zoom:v}}},[]),h=O.useCallback(({nodes:g,edges:p})=>{const{nodeInternals:b,getNodes:x,edges:y,hasDefaultNodes:v,hasDefaultEdges:C,onNodesDelete:S,onEdgesDelete:E,onNodesChange:N,onEdgesChange:j}=e.getState(),T=(g||[]).map(L=>L.id),A=(p||[]).map(L=>L.id),M=x().reduce((L,B)=>{const U=B.parentNode||B.parentId,D=!T.includes(B.id)&&U&&L.find(k=>k.id===U);return(typeof B.deletable!="boolean"||B.deletable)&&(T.includes(B.id)||D)&&L.push(B),L},[]),P=y.filter(L=>typeof L.deletable!="boolean"||L.deletable),R=P.filter(L=>A.includes(L.id));if(M||R){const L=s2(M,P),B=[...R,...L],U=B.reduce((D,k)=>(D.includes(k.id)||D.push(k.id),D),[]);(C||v)&&(C&&e.setState({edges:y.filter(D=>!U.includes(D.id))}),v&&(M.forEach(D=>{b.delete(D.id)}),e.setState({nodeInternals:new Map(b)}))),U.length>0&&(E==null||E(B),j&&j(U.map(D=>({id:D,type:"remove"})))),M.length>0&&(S==null||S(M),N)&&N(M.map(D=>({id:D.id,type:"remove"})))}},[]),f=O.useCallback(g=>{const p=Bn((b=g).width)&&Bn(b.height)&&Bn(b.x)&&Bn(b.y);var b;const x=p?null:e.getState().nodeInternals.get(g.id);return!p&&!x?[null,null,p]:[p?g:$v(x),x,p]},[]),m=O.useCallback((g,p=!0,b)=>{const[x,y,v]=f(g);return x?(b||e.getState().getNodes()).filter(C=>{if(!(v||C.id!==y.id&&C.positionAbsolute))return!1;const S=$v(C),E=Qh(S,x);return p&&E>0||E>=x.width*x.height}):[]},[]),_=O.useCallback((g,p,b=!0)=>{const[x]=f(g);if(!x)return!1;const y=Qh(x,p);return b&&y>0||y>=x.width*x.height},[]);return O.useMemo(()=>({...t,getNodes:n,getNode:o,getEdges:r,getEdge:s,setNodes:i,setEdges:a,addNodes:l,addEdges:d,toObject:u,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:_}),[t,n,o,r,s,i,a,l,d,u,h,m,_])}const MP={actInsideInputWithModifier:!1},gf={position:"absolute",width:"100%",height:"100%",top:0,left:0},ec=t=>({x:t.x,y:t.y,zoom:t.k}),Ss=(t,e)=>t.target.closest(`.${e}`),j2=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),E2=t=>{const e=t.ctrlKey&&Gl()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},OP=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),DP=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=er.Free,zoomOnDoubleClick:d=!0,elementsSelectable:u,panOnDrag:h=!0,defaultViewport:f,translateExtent:m,minZoom:_,maxZoom:g,zoomActivationKeyCode:p,preventScrolling:b=!0,children:x,noWheelClassName:y,noPanClassName:v})=>{const C=O.useRef(),S=Gt(),E=O.useRef(!1),N=O.useRef(!1),j=O.useRef(null),T=O.useRef({x:0,y:0,zoom:0}),{d3Zoom:A,d3Selection:M,d3ZoomHandler:P,userSelectionActive:R}=mt(OP,nn),L=Hi(p),B=O.useRef(0),U=O.useRef(!1),D=O.useRef();return function(k){const $=Gt();O.useEffect(()=>{let I;const W=()=>{var q,Y;if(!k.current)return;const G=Kh(k.current);G.height!==0&&G.width!==0||((Y=(q=$.getState()).onError)==null||Y.call(q,"004",nP())),$.setState({width:G.width||500,height:G.height||500})};return W(),window.addEventListener("resize",W),k.current&&(I=new ResizeObserver(()=>W()),I.observe(k.current)),()=>{window.removeEventListener("resize",W),I&&k.current&&I.unobserve(k.current)}},[])}(j),O.useEffect(()=>{if(j.current){const k=j.current.getBoundingClientRect(),$=function(){var Y,ee,oe,ie=JR,Z=KR,Q=QR,me=XR,fe=ZR,de=[0,1/0],ue=[[-1/0,-1/0],[1/0,1/0]],ce=250,ke=BW,Se=uC("start","zoom","end"),ae=0,Ce=10;function _e(J){J.property("__zoom",Fv).on("wheel.zoom",Qe,{passive:!1}).on("mousedown.zoom",tt).on("dblclick.zoom",ne).filter(fe).on("touchstart.zoom",ve).on("touchmove.zoom",je).on("touchend.zoom touchcancel.zoom",Re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Ee(J,se){return(se=Math.max(de[0],Math.min(de[1],se)))===J.k?J:new bp(se,J.x,J.y)}function ze(J,se,ge){var pe=se[0]-ge[0]*J.k,xe=se[1]-ge[1]*J.k;return pe===J.x&&xe===J.y?J:new bp(J.k,pe,xe)}function Oe(J){return[(+J[0][0]+ +J[1][0])/2,(+J[0][1]+ +J[1][1])/2]}function He(J,se,ge,pe){J.on("start.zoom",function(){Fe(this,arguments).event(pe).start()}).on("interrupt.zoom end.zoom",function(){Fe(this,arguments).event(pe).end()}).tween("zoom",function(){var xe=this,Ve=arguments,Be=Fe(xe,Ve).event(pe),rt=Z.apply(xe,Ve),le=ge==null?Oe(rt):typeof ge=="function"?ge.apply(xe,Ve):ge,Ie=Math.max(rt[1][0]-rt[0][0],rt[1][1]-rt[0][1]),Me=xe.__zoom,$e=typeof se=="function"?se.apply(xe,Ve):se,Ke=ke(Me.invert(le).concat(Ie/Me.k),$e.invert(le).concat(Ie/$e.k));return function(Pe){if(Pe===1)Pe=$e;else{var Ye=Ke(Pe),ot=Ie/Ye[2];Pe=new bp(ot,le[0]-Ye[0]*ot,le[1]-Ye[1]*ot)}Be.zoom(null,Pe)}})}function Fe(J,se,ge){return!ge&&J.__zooming||new it(J,se)}function it(J,se){this.that=J,this.args=se,this.active=0,this.sourceEvent=null,this.extent=Z.apply(J,se),this.taps=0}function Qe(J,...se){if(ie.apply(this,arguments)){var ge=Fe(this,se).event(J),pe=this.__zoom,xe=Math.max(de[0],Math.min(de[1],pe.k*Math.pow(2,me.apply(this,arguments)))),Ve=uo(J);if(ge.wheel)ge.mouse[0][0]===Ve[0]&&ge.mouse[0][1]===Ve[1]||(ge.mouse[1]=pe.invert(ge.mouse[0]=Ve)),clearTimeout(ge.wheel);else{if(pe.k===xe)return;ge.mouse=[Ve,pe.invert(Ve)],xp(this),ge.start()}zi(J),ge.wheel=setTimeout(function(){ge.wheel=null,ge.end()},150),ge.zoom("mouse",Q(ze(Ee(pe,xe),ge.mouse[0],ge.mouse[1]),ge.extent,ue))}}function tt(J,...se){if(!oe&&ie.apply(this,arguments)){var ge=J.currentTarget,pe=Fe(this,se,!0).event(J),xe=to(J.view).on("mousemove.zoom",function(le){if(zi(le),!pe.moved){var Ie=le.clientX-Be,Me=le.clientY-rt;pe.moved=Ie*Ie+Me*Me>ae}pe.event(le).zoom("mouse",Q(ze(pe.that.__zoom,pe.mouse[0]=uo(le,ge),pe.mouse[1]),pe.extent,ue))},!0).on("mouseup.zoom",function(le){xe.on("mousemove.zoom mouseup.zoom",null),Lv(le.view,pe.moved),zi(le),pe.event(le).end()},!0),Ve=uo(J,ge),Be=J.clientX,rt=J.clientY;Pv(J.view),Jh(J),pe.mouse=[Ve,this.__zoom.invert(Ve)],xp(this),pe.start()}}function ne(J,...se){if(ie.apply(this,arguments)){var ge=this.__zoom,pe=uo(J.changedTouches?J.changedTouches[0]:J,this),xe=ge.invert(pe),Ve=ge.k*(J.shiftKey?.5:2),Be=Q(ze(Ee(ge,Ve),pe,xe),Z.apply(this,se),ue);zi(J),ce>0?to(this).transition().duration(ce).call(He,Be,pe,J):to(this).call(_e.transform,Be,pe,J)}}function ve(J,...se){if(ie.apply(this,arguments)){var ge,pe,xe,Ve,Be=J.touches,rt=Be.length,le=Fe(this,se,J.changedTouches.length===rt).event(J);for(Jh(J),pe=0;pe<rt;++pe)Ve=[Ve=uo(xe=Be[pe],this),this.__zoom.invert(Ve),xe.identifier],le.touch0?le.touch1||le.touch0[2]===Ve[2]||(le.touch1=Ve,le.taps=0):(le.touch0=Ve,ge=!0,le.taps=1+!!Y);Y&&(Y=clearTimeout(Y)),ge&&(le.taps<2&&(ee=Ve[0],Y=setTimeout(function(){Y=null},500)),xp(this),le.start())}}function je(J,...se){if(this.__zooming){var ge,pe,xe,Ve,Be=Fe(this,se).event(J),rt=J.changedTouches,le=rt.length;for(zi(J),ge=0;ge<le;++ge)xe=uo(pe=rt[ge],this),Be.touch0&&Be.touch0[2]===pe.identifier?Be.touch0[0]=xe:Be.touch1&&Be.touch1[2]===pe.identifier&&(Be.touch1[0]=xe);if(pe=Be.that.__zoom,Be.touch1){var Ie=Be.touch0[0],Me=Be.touch0[1],$e=Be.touch1[0],Ke=Be.touch1[1],Pe=(Pe=$e[0]-Ie[0])*Pe+(Pe=$e[1]-Ie[1])*Pe,Ye=(Ye=Ke[0]-Me[0])*Ye+(Ye=Ke[1]-Me[1])*Ye;pe=Ee(pe,Math.sqrt(Pe/Ye)),xe=[(Ie[0]+$e[0])/2,(Ie[1]+$e[1])/2],Ve=[(Me[0]+Ke[0])/2,(Me[1]+Ke[1])/2]}else{if(!Be.touch0)return;xe=Be.touch0[0],Ve=Be.touch0[1]}Be.zoom("touch",Q(ze(pe,xe,Ve),Be.extent,ue))}}function Re(J,...se){if(this.__zooming){var ge,pe,xe=Fe(this,se).event(J),Ve=J.changedTouches,Be=Ve.length;for(Jh(J),oe&&clearTimeout(oe),oe=setTimeout(function(){oe=null},500),ge=0;ge<Be;++ge)pe=Ve[ge],xe.touch0&&xe.touch0[2]===pe.identifier?delete xe.touch0:xe.touch1&&xe.touch1[2]===pe.identifier&&delete xe.touch1;if(xe.touch1&&!xe.touch0&&(xe.touch0=xe.touch1,delete xe.touch1),xe.touch0)xe.touch0[1]=this.__zoom.invert(xe.touch0[0]);else if(xe.end(),xe.taps===2&&(pe=uo(pe,this),Math.hypot(ee[0]-pe[0],ee[1]-pe[1])<Ce)){var rt=to(this).on("dblclick.zoom");rt&&rt.apply(this,arguments)}}}return _e.transform=function(J,se,ge,pe){var xe=J.selection?J.selection():J;xe.property("__zoom",Fv),J!==xe?He(J,se,ge,pe):xe.interrupt().each(function(){Fe(this,arguments).event(pe).start().zoom(null,typeof se=="function"?se.apply(this,arguments):se).end()})},_e.scaleBy=function(J,se,ge,pe){_e.scaleTo(J,function(){return this.__zoom.k*(typeof se=="function"?se.apply(this,arguments):se)},ge,pe)},_e.scaleTo=function(J,se,ge,pe){_e.transform(J,function(){var xe=Z.apply(this,arguments),Ve=this.__zoom,Be=ge==null?Oe(xe):typeof ge=="function"?ge.apply(this,arguments):ge,rt=Ve.invert(Be),le=typeof se=="function"?se.apply(this,arguments):se;return Q(ze(Ee(Ve,le),Be,rt),xe,ue)},ge,pe)},_e.translateBy=function(J,se,ge,pe){_e.transform(J,function(){return Q(this.__zoom.translate(typeof se=="function"?se.apply(this,arguments):se,typeof ge=="function"?ge.apply(this,arguments):ge),Z.apply(this,arguments),ue)},null,pe)},_e.translateTo=function(J,se,ge,pe,xe){_e.transform(J,function(){var Ve=Z.apply(this,arguments),Be=this.__zoom,rt=pe==null?Oe(Ve):typeof pe=="function"?pe.apply(this,arguments):pe;return Q(vr.translate(rt[0],rt[1]).scale(Be.k).translate(typeof se=="function"?-se.apply(this,arguments):-se,typeof ge=="function"?-ge.apply(this,arguments):-ge),Ve,ue)},pe,xe)},it.prototype={event:function(J){return J&&(this.sourceEvent=J),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(J,se){return this.mouse&&J!=="mouse"&&(this.mouse[1]=se.invert(this.mouse[0])),this.touch0&&J!=="touch"&&(this.touch0[1]=se.invert(this.touch0[0])),this.touch1&&J!=="touch"&&(this.touch1[1]=se.invert(this.touch1[0])),this.that.__zoom=se,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(J){var se=to(this.that).datum();Se.call(J,this.that,new YR(J,{sourceEvent:this.sourceEvent,target:_e,transform:this.that.__zoom,dispatch:Se}),se)}},_e.wheelDelta=function(J){return arguments.length?(me=typeof J=="function"?J:Hl(+J),_e):me},_e.filter=function(J){return arguments.length?(ie=typeof J=="function"?J:Hl(!!J),_e):ie},_e.touchable=function(J){return arguments.length?(fe=typeof J=="function"?J:Hl(!!J),_e):fe},_e.extent=function(J){return arguments.length?(Z=typeof J=="function"?J:Hl([[+J[0][0],+J[0][1]],[+J[1][0],+J[1][1]]]),_e):Z},_e.scaleExtent=function(J){return arguments.length?(de[0]=+J[0],de[1]=+J[1],_e):[de[0],de[1]]},_e.translateExtent=function(J){return arguments.length?(ue[0][0]=+J[0][0],ue[1][0]=+J[1][0],ue[0][1]=+J[0][1],ue[1][1]=+J[1][1],_e):[[ue[0][0],ue[0][1]],[ue[1][0],ue[1][1]]]},_e.constrain=function(J){return arguments.length?(Q=J,_e):Q},_e.duration=function(J){return arguments.length?(ce=+J,_e):ce},_e.interpolate=function(J){return arguments.length?(ke=J,_e):ke},_e.on=function(){var J=Se.on.apply(Se,arguments);return J===Se?_e:J},_e.clickDistance=function(J){return arguments.length?(ae=(J=+J)*J,_e):Math.sqrt(ae)},_e.tapDistance=function(J){return arguments.length?(Ce=+J,_e):Ce},_e}().scaleExtent([_,g]).translateExtent(m),I=to(j.current).call($),W=vr.translate(f.x,f.y).scale(xs(f.zoom,_,g)),G=[[0,0],[k.width,k.height]],q=$.constrain()(W,G,m);$.transform(I,q),$.wheelDelta(E2),S.setState({d3Zoom:$,d3Selection:I,d3ZoomHandler:I.on("wheel.zoom"),transform:[q.x,q.y,q.k],domNode:j.current.closest(".react-flow")})}},[]),O.useEffect(()=>{M&&A&&(!i||L||R?P!==void 0&&M.on("wheel.zoom",function(k,$){if(!b&&k.type==="wheel"&&!k.ctrlKey||Ss(k,y))return null;k.preventDefault(),P.call(this,k,$)},{passive:!1}):M.on("wheel.zoom",k=>{if(Ss(k,y))return!1;k.preventDefault(),k.stopImmediatePropagation();const $=M.property("__zoom").k||1;if(k.ctrlKey&&s){const ie=uo(k),Z=E2(k),Q=$*Math.pow(2,Z);return void A.scaleTo(M,Q,ie,k)}const I=k.deltaMode===1?20:1;let W=l===er.Vertical?0:k.deltaX*I,G=l===er.Horizontal?0:k.deltaY*I;!Gl()&&k.shiftKey&&l!==er.Vertical&&(W=k.deltaY*I,G=0),A.translateBy(M,-W/$*a,-G/$*a,{internal:!0});const q=ec(M.property("__zoom")),{onViewportChangeStart:Y,onViewportChange:ee,onViewportChangeEnd:oe}=S.getState();clearTimeout(D.current),U.current||(U.current=!0,e==null||e(k,q),Y==null||Y(q)),U.current&&(t==null||t(k,q),ee==null||ee(q),D.current=setTimeout(()=>{n==null||n(k,q),oe==null||oe(q),U.current=!1},150))},{passive:!1}))},[R,i,l,M,A,P,L,s,b,y,e,t,n]),O.useEffect(()=>{A&&A.on("start",k=>{var W,G;if(!k.sourceEvent||k.sourceEvent.internal)return null;B.current=(W=k.sourceEvent)==null?void 0:W.button;const{onViewportChangeStart:$}=S.getState(),I=ec(k.transform);E.current=!0,T.current=I,((G=k.sourceEvent)==null?void 0:G.type)==="mousedown"&&S.setState({paneDragging:!0}),$==null||$(I),e==null||e(k.sourceEvent,I)})},[A,e]),O.useEffect(()=>{A&&(R&&!E.current?A.on("zoom",null):R||A.on("zoom",k=>{var I;const{onViewportChange:$}=S.getState();if(S.setState({transform:[k.transform.x,k.transform.y,k.transform.k]}),N.current=!(!o||!j2(h,B.current??0)),(t||$)&&!((I=k.sourceEvent)!=null&&I.internal)){const W=ec(k.transform);$==null||$(W),t==null||t(k.sourceEvent,W)}}))},[R,A,t,h,o]),O.useEffect(()=>{A&&A.on("end",k=>{if(!k.sourceEvent||k.sourceEvent.internal)return null;const{onViewportChangeEnd:$}=S.getState();if(E.current=!1,S.setState({paneDragging:!1}),o&&j2(h,B.current??0)&&!N.current&&o(k.sourceEvent),N.current=!1,(n||$)&&(I=T.current,W=k.transform,I.x!==W.x||I.y!==W.y||I.zoom!==W.k)){const G=ec(k.transform);T.current=G,clearTimeout(C.current),C.current=setTimeout(()=>{$==null||$(G),n==null||n(k.sourceEvent,G)},i?150:0)}var I,W})},[A,i,h,n,o]),O.useEffect(()=>{A&&A.filter(k=>{const $=L||r,I=s&&k.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&k.button===1&&k.type==="mousedown"&&(Ss(k,"react-flow__node")||Ss(k,"react-flow__edge")))return!0;if(!(h||$||i||d||s)||R||!d&&k.type==="dblclick"||Ss(k,y)&&k.type==="wheel"||Ss(k,v)&&(k.type!=="wheel"||i&&k.type==="wheel"&&!L)||!s&&k.ctrlKey&&k.type==="wheel"||!$&&!i&&!I&&k.type==="wheel"||!h&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(h)&&!h.includes(k.button)&&k.type==="mousedown")return!1;const W=Array.isArray(h)&&h.includes(k.button)||!k.button||k.button<=1;return(!k.ctrlKey||k.type==="wheel")&&W})},[R,A,r,s,i,d,h,u,L]),X.createElement("div",{className:"react-flow__renderer",ref:j,style:gf},x)},RP=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function PP(){const{userSelectionActive:t,userSelectionRect:e}=mt(RP,nn);return t&&e?X.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function I2(t,e){const n=e.parentNode||e.parentId,o=t.find(r=>r.id===n);if(o){const r=e.position.x+e.width-o.width,s=e.position.y+e.height-o.height;if(r>0||s>0||e.position.x<0||e.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),s>0&&(o.style.height+=s),e.position.x<0){const i=Math.abs(e.position.x);o.position.x=o.position.x-i,o.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);o.position.y=o.position.y-i,o.style.height+=i,e.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function A2(t,e){if(t.some(o=>o.type==="reset"))return t.filter(o=>o.type==="reset").map(o=>o.item);const n=t.filter(o=>o.type==="add").map(o=>o.item);return e.reduce((o,r)=>{const s=t.filter(a=>a.id===r.id);if(s.length===0)return o.push(r),o;const i={...r};for(const a of s)if(a)switch(a.type){case"select":i.selected=a.selected;break;case"position":a.position!==void 0&&(i.position=a.position),a.positionAbsolute!==void 0&&(i.positionAbsolute=a.positionAbsolute),a.dragging!==void 0&&(i.dragging=a.dragging),i.expandParent&&I2(o,i);break;case"dimensions":a.dimensions!==void 0&&(i.width=a.dimensions.width,i.height=a.dimensions.height),a.updateStyle!==void 0&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&I2(o,i);break;case"remove":return o}return o.push(i),o},n)}function T2(t,e){return A2(t,e)}const or=(t,e)=>({id:t,type:"select",selected:e});function Cs(t,e){return t.reduce((n,o)=>{const r=e.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(or(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(or(o.id,!1))),n},[])}const _f=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},LP=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),M2=O.memo(({isSelecting:t,selectionMode:e=Vi.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:d,onPaneMouseLeave:u,children:h})=>{const f=O.useRef(null),m=Gt(),_=O.useRef(0),g=O.useRef(0),p=O.useRef(),{userSelectionActive:b,elementsSelectable:x,dragging:y}=mt(LP,nn),v=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),_.current=0,g.current=0},C=N=>{s==null||s(N),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},S=a?N=>a(N):void 0,E=x&&(t||b);return X.createElement("div",{className:cn(["react-flow__pane",{dragging:y,selection:t}]),onClick:E?void 0:_f(C,f),onContextMenu:_f(N=>{Array.isArray(n)&&(n!=null&&n.includes(2))?N.preventDefault():i==null||i(N)},f),onWheel:_f(S,f),onMouseEnter:E?void 0:l,onMouseDown:E?N=>{const{resetSelectedElements:j,domNode:T}=m.getState();if(p.current=T==null?void 0:T.getBoundingClientRect(),!x||!t||N.button!==0||N.target!==f.current||!p.current)return;const{x:A,y:M}=Qo(N,p.current);j(),m.setState({userSelectionRect:{width:0,height:0,startX:A,startY:M,x:A,y:M}}),o==null||o(N)}:void 0,onMouseMove:E?N=>{const{userSelectionRect:j,nodeInternals:T,edges:A,transform:M,onNodesChange:P,onEdgesChange:R,nodeOrigin:L,getNodes:B}=m.getState();if(!t||!p.current||!j)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=Qo(N,p.current),D=j.startX??0,k=j.startY??0,$={...j,x:U.x<D?U.x:D,y:U.y<k?U.y:k,width:Math.abs(U.x-D),height:Math.abs(U.y-k)},I=B(),W=r2(T,$,M,e===Vi.Partial,!0,L),G=s2(W,A).map(Y=>Y.id),q=W.map(Y=>Y.id);if(_.current!==q.length){_.current=q.length;const Y=Cs(I,q);Y.length&&(P==null||P(Y))}if(g.current!==G.length){g.current=G.length;const Y=Cs(A,G);Y.length&&(R==null||R(Y))}m.setState({userSelectionRect:$})}:d,onMouseUp:E?N=>{if(N.button!==0)return;const{userSelectionRect:j}=m.getState();!b&&j&&N.target===f.current&&(C==null||C(N)),m.setState({nodesSelectionActive:_.current>0}),v(),r==null||r(N)}:void 0,onMouseLeave:E?N=>{b&&(m.setState({nodesSelectionActive:_.current>0}),r==null||r(N)),v()}:u,ref:f,style:gf},h,X.createElement(PP,null))});function O2(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const o=e.get(n);return!!o&&(!!o.selected||O2(o,e))}function D2(t,e,n){let o=t;do{if(o!=null&&o.matches(e))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function FP(t,e,n,o){return Array.from(t.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!O2(r,t))&&(r.draggable||e&&r.draggable===void 0)).map(r=>{var s,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function R2(t,e,n,o,r=[0,0],s){const i=function(h,f){return f&&f!=="parent"?[f[0],[f[1][0]-(h.width||0),f[1][1]-(h.height||0)]]:f}(t,t.extent||o);let a=i;const l=t.parentNode||t.parentId;if(t.extent!=="parent"||t.expandParent){if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:f,y:m}=ws(h,r).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}}else if(l&&t.width&&t.height){const h=n.get(l),{x:f,y:m}=ws(h,r).positionAbsolute;a=h&&Bn(f)&&Bn(m)&&Bn(h.width)&&Bn(h.height)?[[f+t.width*r[0],m+t.height*r[1]],[f+h.width-t.width+t.width*r[0],m+h.height-t.height+t.height*r[1]]]:a}else s==null||s("005",oP()),a=i;let d={x:0,y:0};if(l){const h=n.get(l);d=ws(h,r).positionAbsolute}const u=a&&a!=="parent"?Xh(e,a):e;return{position:{x:u.x-d.x,y:u.y-d.y},positionAbsolute:u}}function bf({nodeId:t,dragItems:e,nodeInternals:n}){const o=e.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?o.find(r=>r.id===t):o[0],o]}M2.displayName="Pane";const P2=(t,e,n,o)=>{const r=e.querySelectorAll(t);if(!r||!r.length)return null;const s=Array.from(r),i=e.getBoundingClientRect(),a=i.width*o[0],l=i.height*o[1];return s.map(d=>{const u=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(u.left-i.left-a)/n,y:(u.top-i.top-l)/n,...Kh(d)}})};function qi(t,e,n){return n===void 0?n:o=>{const r=e().nodeInternals.get(t);r&&n(o,{...r})}}function xf({id:t,store:e,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:l}=e.getState(),d=a.get(t);d?(e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&i)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var u;return(u=o==null?void 0:o.current)==null?void 0:u.blur()})):r([t])):l==null||l("012",lP(t))}function yf(t){return(e,n,o)=>t==null?void 0:t(e,o)}function L2({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const a=Gt(),[l,d]=O.useState(!1),u=O.useRef([]),h=O.useRef({x:null,y:null}),f=O.useRef(0),m=O.useRef(null),_=O.useRef({x:0,y:0}),g=O.useRef(null),p=O.useRef(!1),b=O.useRef(!1),x=O.useRef(!1),y=function(){const v=Gt();return O.useCallback(({sourceEvent:S})=>{const{transform:E,snapGrid:N,snapToGrid:j}=v.getState(),T=S.touches?S.touches[0].clientX:S.clientX,A=S.touches?S.touches[0].clientY:S.clientY,M={x:(T-E[0])/E[2],y:(A-E[1])/E[2]};return{xSnapped:j?N[0]*Math.round(M.x/N[0]):M.x,ySnapped:j?N[1]*Math.round(M.y/N[1]):M.y,...M}},[])}();return O.useEffect(()=>{if(t!=null&&t.current){const v=to(t.current),C=({x:N,y:j})=>{const{nodeInternals:T,onNodeDrag:A,onSelectionDrag:M,updateNodePositions:P,nodeExtent:R,snapGrid:L,snapToGrid:B,nodeOrigin:U,onError:D}=a.getState();h.current={x:N,y:j};let k=!1,$={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&R){const W=df(u.current,U);$=Zh(W)}if(u.current=u.current.map(W=>{const G={x:N-W.distance.x,y:j-W.distance.y};B&&(G.x=L[0]*Math.round(G.x/L[0]),G.y=L[1]*Math.round(G.y/L[1]));const q=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];u.current.length>1&&R&&!W.extent&&(q[0][0]=W.positionAbsolute.x-$.x+R[0][0],q[1][0]=W.positionAbsolute.x+(W.width??0)-$.x2+R[1][0],q[0][1]=W.positionAbsolute.y-$.y+R[0][1],q[1][1]=W.positionAbsolute.y+(W.height??0)-$.y2+R[1][1]);const Y=R2(W,G,T,q,U,D);return k=k||W.position.x!==Y.position.x||W.position.y!==Y.position.y,W.position=Y.position,W.positionAbsolute=Y.positionAbsolute,W}),!k)return;P(u.current,!0,!0),d(!0);const I=r?A:yf(M);if(I&&g.current){const[W,G]=bf({nodeId:r,dragItems:u.current,nodeInternals:T});I(g.current,W,G)}},S=()=>{if(!m.current)return;const[N,j]=Uv(_.current,m.current);if(N!==0||j!==0){const{transform:T,panBy:A}=a.getState();h.current.x=(h.current.x??0)-N/T[2],h.current.y=(h.current.y??0)-j/T[2],A({x:N,y:j})&&C(h.current)}f.current=requestAnimationFrame(S)},E=N=>{var U;const{nodeInternals:j,multiSelectionActive:T,nodesDraggable:A,unselectNodesAndEdges:M,onNodeDragStart:P,onSelectionDragStart:R}=a.getState();b.current=!0;const L=r?P:yf(R);i&&s||T||!r||(U=j.get(r))!=null&&U.selected||M(),r&&s&&i&&xf({id:r,store:a,nodeRef:t});const B=y(N);if(h.current=B,u.current=FP(j,A,B,r),L&&u.current){const[D,k]=bf({nodeId:r,dragItems:u.current,nodeInternals:j});L(N.sourceEvent,D,k)}};if(!e){const N=function(){var j,T,A,M,P=HR,R=WR,L=qR,B=GR,U={},D=uC("start","drag","end"),k=0,$=0;function I(Z){Z.on("mousedown.drag",W).filter(B).on("touchstart.drag",Y).on("touchmove.drag",ee,$R).on("touchend.drag touchcancel.drag",oe).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function W(Z,Q){if(!M&&P.call(this,Z,Q)){var me=ie(this,R.call(this,Z,Q),Z,Q,"mouse");me&&(to(Z.view).on("mousemove.drag",G,Fi).on("mouseup.drag",q,Fi),Pv(Z.view),Gh(Z),A=!1,j=Z.clientX,T=Z.clientY,me("start",Z))}}function G(Z){if(bs(Z),!A){var Q=Z.clientX-j,me=Z.clientY-T;A=Q*Q+me*me>$}U.mouse("drag",Z)}function q(Z){to(Z.view).on("mousemove.drag mouseup.drag",null),Lv(Z.view,A),bs(Z),U.mouse("end",Z)}function Y(Z,Q){if(P.call(this,Z,Q)){var me,fe,de=Z.changedTouches,ue=R.call(this,Z,Q),ce=de.length;for(me=0;me<ce;++me)(fe=ie(this,ue,Z,Q,de[me].identifier,de[me]))&&(Gh(Z),fe("start",Z,de[me]))}}function ee(Z){var Q,me,fe=Z.changedTouches,de=fe.length;for(Q=0;Q<de;++Q)(me=U[fe[Q].identifier])&&(bs(Z),me("drag",Z,fe[Q]))}function oe(Z){var Q,me,fe=Z.changedTouches,de=fe.length;for(M&&clearTimeout(M),M=setTimeout(function(){M=null},500),Q=0;Q<de;++Q)(me=U[fe[Q].identifier])&&(Gh(Z),me("end",Z,fe[Q]))}function ie(Z,Q,me,fe,de,ue){var ce,ke,Se,ae=D.copy(),Ce=uo(ue||me,Q);if((Se=L.call(Z,new Yh("beforestart",{sourceEvent:me,target:I,identifier:de,active:k,x:Ce[0],y:Ce[1],dx:0,dy:0,dispatch:ae}),fe))!=null)return ce=Se.x-Ce[0]||0,ke=Se.y-Ce[1]||0,function _e(Ee,ze,Oe){var He,Fe=Ce;switch(Ee){case"start":U[de]=_e,He=k++;break;case"end":delete U[de],--k;case"drag":Ce=uo(Oe||ze,Q),He=k}ae.call(Ee,Z,new Yh(Ee,{sourceEvent:ze,subject:Se,target:I,identifier:de,active:He,x:Ce[0]+ce,y:Ce[1]+ke,dx:Ce[0]-Fe[0],dy:Ce[1]-Fe[1],dispatch:ae}),fe)}}return I.filter=function(Z){return arguments.length?(P=typeof Z=="function"?Z:$l(!!Z),I):P},I.container=function(Z){return arguments.length?(R=typeof Z=="function"?Z:$l(Z),I):R},I.subject=function(Z){return arguments.length?(L=typeof Z=="function"?Z:$l(Z),I):L},I.touchable=function(Z){return arguments.length?(B=typeof Z=="function"?Z:$l(!!Z),I):B},I.on=function(){var Z=D.on.apply(D,arguments);return Z===D?I:Z},I.clickDistance=function(Z){return arguments.length?($=(Z=+Z)*Z,I):Math.sqrt($)},I}().on("start",j=>{const{domNode:T,nodeDragThreshold:A}=a.getState();A===0&&E(j),x.current=!1;const M=y(j);h.current=M,m.current=(T==null?void 0:T.getBoundingClientRect())||null,_.current=Qo(j.sourceEvent,m.current)}).on("drag",j=>{var P,R;const T=y(j),{autoPanOnNodeDrag:A,nodeDragThreshold:M}=a.getState();if(j.sourceEvent.type==="touchmove"&&j.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!p.current&&b.current&&A&&(p.current=!0,S()),!b.current){const L=T.xSnapped-(((P=h==null?void 0:h.current)==null?void 0:P.x)??0),B=T.ySnapped-(((R=h==null?void 0:h.current)==null?void 0:R.y)??0);Math.sqrt(L*L+B*B)>M&&E(j)}(h.current.x!==T.xSnapped||h.current.y!==T.ySnapped)&&u.current&&b.current&&(g.current=j.sourceEvent,_.current=Qo(j.sourceEvent,m.current),C(T))}}).on("end",j=>{if(b.current&&!x.current&&(d(!1),p.current=!1,b.current=!1,cancelAnimationFrame(f.current),u.current)){const{updateNodePositions:T,nodeInternals:A,onNodeDragStop:M,onSelectionDragStop:P}=a.getState(),R=r?M:yf(P);if(T(u.current,!1,!1),R){const[L,B]=bf({nodeId:r,dragItems:u.current,nodeInternals:A});R(j.sourceEvent,L,B)}}}).filter(j=>{const T=j.target;return!j.button&&(!n||!D2(T,`.${n}`,t))&&(!o||D2(T,o,t))});return v.call(N),()=>{v.on(".drag",null)}}v.on(".drag",null)}},[t,e,n,o,s,a,r,i,y]),l}function F2(){const t=Gt();return O.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:l,onError:d,nodesDraggable:u}=t.getState(),h=i().filter(x=>x.selected&&(x.draggable||u&&x.draggable===void 0)),f=a?l[0]:5,m=a?l[1]:5,_=n.isShiftPressed?4:1,g=n.x*f*_,p=n.y*m*_,b=h.map(x=>{if(x.positionAbsolute){const y={x:x.positionAbsolute.x+g,y:x.positionAbsolute.y+p};a&&(y.x=l[0]*Math.round(y.x/l[0]),y.y=l[1]*Math.round(y.y/l[1]));const{positionAbsolute:v,position:C}=R2(x,y,o,r,void 0,d);x.position=C,x.positionAbsolute=v}return x});s(b,!0,!1)},[])}const Ns={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Gi=t=>{const e=({id:n,type:o,data:r,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:d,onClick:u,onMouseEnter:h,onMouseMove:f,onMouseLeave:m,onContextMenu:_,onDoubleClick:g,style:p,className:b,isDraggable:x,isSelectable:y,isConnectable:v,isFocusable:C,selectNodesOnDrag:S,sourcePosition:E,targetPosition:N,hidden:j,resizeObserver:T,dragHandle:A,zIndex:M,isParent:P,noDragClassName:R,noPanClassName:L,initialized:B,disableKeyboardA11y:U,ariaLabel:D,rfId:k,hasHandleBounds:$})=>{const I=Gt(),W=O.useRef(null),G=O.useRef(null),q=O.useRef(E),Y=O.useRef(N),ee=O.useRef(o),oe=y||x||u||h||f||m,ie=F2(),Z=qi(n,I.getState,h),Q=qi(n,I.getState,f),me=qi(n,I.getState,m),fe=qi(n,I.getState,_),de=qi(n,I.getState,g);O.useEffect(()=>()=>{G.current&&(T==null||T.unobserve(G.current),G.current=null)},[]),O.useEffect(()=>{if(W.current&&!j){const ce=W.current;B&&$&&G.current===ce||(G.current&&(T==null||T.unobserve(G.current)),T==null||T.observe(ce),G.current=ce)}},[j,B,$]),O.useEffect(()=>{const ce=ee.current!==o,ke=q.current!==E,Se=Y.current!==N;W.current&&(ce||ke||Se)&&(ce&&(ee.current=o),ke&&(q.current=E),Se&&(Y.current=N),I.getState().updateNodeDimensions([{id:n,nodeElement:W.current,forceUpdate:!0}]))},[n,o,E,N]);const ue=L2({nodeRef:W,disabled:j||!x,noDragClassName:R,handleSelector:A,nodeId:n,isSelectable:y,selectNodesOnDrag:S});return j?null:X.createElement("div",{className:cn(["react-flow__node",`react-flow__node-${o}`,{[L]:x},b,{selected:d,selectable:y,parent:P,dragging:ue}]),ref:W,style:{zIndex:M,transform:`translate(${a}px,${l}px)`,pointerEvents:oe?"all":"none",visibility:B?"visible":"hidden",...p},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Z,onMouseMove:Q,onMouseLeave:me,onContextMenu:fe,onClick:ce=>{const{nodeDragThreshold:ke}=I.getState();if(y&&(!S||!x||ke>0)&&xf({id:n,store:I,nodeRef:W}),u){const Se=I.getState().nodeInternals.get(n);Se&&u(ce,{...Se})}},onDoubleClick:de,onKeyDown:C?ce=>{if(!ef(ce)&&!U)if(Hv.includes(ce.key)&&y){const ke=ce.key==="Escape";xf({id:n,store:I,unselect:ke,nodeRef:W})}else x&&d&&Object.prototype.hasOwnProperty.call(Ns,ce.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${ce.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ie({x:Ns[ce.key].x,y:Ns[ce.key].y,isShiftPressed:ce.shiftKey}))}:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":U?void 0:`${y2}-${k}`,"aria-label":D},X.createElement(fP,{value:n},X.createElement(t,{id:n,data:r,type:o,xPos:s,yPos:i,selected:d,isConnectable:v,sourcePosition:E,targetPosition:N,dragging:ue,dragHandle:A,zIndex:M})))};return e.displayName="NodeWrapper",O.memo(e)};const zP=t=>{const e=t.getNodes().filter(n=>n.selected);return{...df(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var BP=O.memo(function({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const o=Gt(),{width:r,height:s,x:i,y:a,transformString:l,userSelectionActive:d}=mt(zP,nn),u=F2(),h=O.useRef(null);if(O.useEffect(()=>{var m;n||((m=h.current)==null||m.focus({preventScroll:!0}))},[n]),L2({nodeRef:h}),d||!r||!s)return null;const f=t?m=>{const _=o.getState().getNodes().filter(g=>g.selected);t(m,_)}:void 0;return X.createElement("div",{className:cn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},X.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m=>{Object.prototype.hasOwnProperty.call(Ns,m.key)&&u({x:Ns[m.key].x,y:Ns[m.key].y,isShiftPressed:m.shiftKey})},style:{width:r,height:s,top:a,left:i}}))});const UP=t=>t.nodesSelectionActive,z2=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:d,onMoveEnd:u,selectionKeyCode:h,selectionOnDrag:f,selectionMode:m,onSelectionStart:_,onSelectionEnd:g,multiSelectionKeyCode:p,panActivationKeyCode:b,zoomActivationKeyCode:x,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:C,panOnScroll:S,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:T,defaultViewport:A,translateExtent:M,minZoom:P,maxZoom:R,preventScrolling:L,onSelectionContextMenu:B,noWheelClassName:U,noPanClassName:D,disableKeyboardA11y:k})=>{const $=mt(UP),I=Hi(h),W=Hi(b),G=W||T,q=W||S,Y=I||f&&G!==!0;return(({deleteKeyCode:ee,multiSelectionKeyCode:oe})=>{const ie=Gt(),{deleteElements:Z}=Wi(),Q=Hi(ee,MP),me=Hi(oe);O.useEffect(()=>{if(Q){const{edges:fe,getNodes:de}=ie.getState(),ue=de().filter(ke=>ke.selected),ce=fe.filter(ke=>ke.selected);Z({nodes:ue,edges:ce}),ie.setState({nodesSelectionActive:!1})}},[Q]),O.useEffect(()=>{ie.setState({multiSelectionActive:me})},[me])})({deleteKeyCode:a,multiSelectionKeyCode:p}),X.createElement(DP,{onMove:l,onMoveStart:d,onMoveEnd:u,onPaneContextMenu:s,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:C,panOnScroll:q,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:!I&&G,defaultViewport:A,translateExtent:M,minZoom:P,maxZoom:R,zoomActivationKeyCode:x,preventScrolling:L,noWheelClassName:U,noPanClassName:D},X.createElement(M2,{onSelectionStart:_,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:G,isSelecting:!!Y,selectionMode:m},t,$&&X.createElement(BP,{onSelectionContextMenu:B,noPanClassName:D,disableKeyboardA11y:k})))};z2.displayName="FlowRenderer";var VP=O.memo(z2);function $P(t){return{input:Gi(t.input||p2),default:Gi(t.default||ff),output:Gi(t.output||_2),group:Gi(t.group||mf),...Object.keys(t).filter(e=>!["input","default","output","group"].includes(e)).reduce((e,n)=>(e[n]=Gi(t[n]||ff),e),{})}}const HP=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),B2=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:s,onError:i}=mt(HP,nn),a=(l=t.onlyRenderVisibleElements,mt(O.useCallback(h=>l?r2(h.nodeInternals,{x:0,y:0,width:h.width,height:h.height},h.transform,!0):h.getNodes(),[l])));var l;const d=O.useRef(),u=O.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(f=>{const m=f.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));s(m)});return d.current=h,h},[]);return O.useEffect(()=>()=>{var h;(h=d==null?void 0:d.current)==null||h.disconnect()},[]),X.createElement("div",{className:"react-flow__nodes",style:gf},a.map(h=>{var S,E,N;let f=h.type||"default";t.nodeTypes[f]||(i==null||i("003",tP(f)),f="default");const m=t.nodeTypes[f]||t.nodeTypes.default,_=!!(h.draggable||e&&h.draggable===void 0),g=!!(h.selectable||r&&h.selectable===void 0),p=!!(h.connectable||n&&h.connectable===void 0),b=!!(h.focusable||o&&h.focusable===void 0),x=t.nodeExtent?Xh(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,y=(x==null?void 0:x.x)??0,v=(x==null?void 0:x.y)??0,C=(({x:j,y:T,width:A,height:M,origin:P})=>A&&M?P[0]<0||P[1]<0||P[0]>1||P[1]>1?{x:j,y:T}:{x:j-A*P[0],y:T-M*P[1]}:{x:j,y:T})({x:y,y:v,width:h.width??0,height:h.height??0,origin:t.nodeOrigin});return X.createElement(m,{key:h.id,id:h.id,className:h.className,style:h.style,type:f,data:h.data,sourcePosition:h.sourcePosition||Ue.Bottom,targetPosition:h.targetPosition||Ue.Top,hidden:h.hidden,xPos:y,yPos:v,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:_,isSelectable:g,isConnectable:p,isFocusable:b,resizeObserver:u,dragHandle:h.dragHandle,zIndex:((S=h[Nt])==null?void 0:S.z)??0,isParent:!!((E=h[Nt])!=null&&E.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((N=h[Nt])!=null&&N.handleBounds)})}))};B2.displayName="NodeRenderer";var WP=O.memo(B2);const qP=(t,e,n)=>n===Ue.Left?t-e:n===Ue.Right?t+e:t,GP=(t,e,n)=>n===Ue.Top?t-e:n===Ue.Bottom?t+e:t,U2="react-flow__edgeupdater",V2=({position:t,centerX:e,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:a})=>X.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:cn([U2,`${U2}-${a}`]),cx:qP(e,o,t),cy:GP(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),YP=()=>!0;var js=t=>{const e=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:a,selected:l,animated:d,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:p,source:b,target:x,sourceX:y,sourceY:v,targetX:C,targetY:S,sourcePosition:E,targetPosition:N,elementsSelectable:j,hidden:T,sourceHandleId:A,targetHandleId:M,onContextMenu:P,onMouseEnter:R,onMouseMove:L,onMouseLeave:B,reconnectRadius:U,onReconnect:D,onReconnectStart:k,onReconnectEnd:$,markerEnd:I,markerStart:W,rfId:G,ariaLabel:q,isFocusable:Y,isReconnectable:ee,pathOptions:oe,interactionWidth:ie,disableKeyboardA11y:Z})=>{const Q=O.useRef(null),[me,fe]=O.useState(!1),[de,ue]=O.useState(!1),ce=Gt(),ke=O.useMemo(()=>`url('#${lf(W,G)}')`,[W,G]),Se=O.useMemo(()=>`url('#${lf(I,G)}')`,[I,G]);if(T)return null;const ae=Ui(n,ce.getState,a),Ce=Ui(n,ce.getState,P),_e=Ui(n,ce.getState,R),Ee=Ui(n,ce.getState,L),ze=Ui(n,ce.getState,B),Oe=(Qe,tt)=>{if(Qe.button!==0)return;const{edges:ne,isValidConnection:ve}=ce.getState(),je=tt?x:b,Re=(tt?M:A)||null,J=tt?"target":"source",se=ve||YP,ge=tt,pe=ne.find(xe=>xe.id===n);ue(!0),k==null||k(Qe,pe,J),d2({event:Qe,handleId:Re,nodeId:je,onConnect:xe=>D==null?void 0:D(pe,xe),isTarget:ge,getState:ce.getState,setState:ce.setState,isValidConnection:se,edgeUpdaterType:J,onReconnectEnd:xe=>{ue(!1),$==null||$(xe,pe,J)}})},He=()=>fe(!0),Fe=()=>fe(!1),it=!j&&!i;return X.createElement("g",{className:cn(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:l,animated:d,inactive:it,updating:me}]),onClick:Qe=>{var J;const{edges:tt,addSelectedEdges:ne,unselectNodesAndEdges:ve,multiSelectionActive:je}=ce.getState(),Re=tt.find(se=>se.id===n);Re&&(j&&(ce.setState({nodesSelectionActive:!1}),Re.selected&&je?(ve({nodes:[],edges:[Re]}),(J=Q.current)==null||J.blur()):ne([n])),i&&i(Qe,Re))},onDoubleClick:ae,onContextMenu:Ce,onMouseEnter:_e,onMouseMove:Ee,onMouseLeave:ze,onKeyDown:Y?Qe=>{var tt;if(!Z&&Hv.includes(Qe.key)&&j){const{unselectNodesAndEdges:ne,addSelectedEdges:ve,edges:je}=ce.getState();Qe.key==="Escape"?((tt=Q.current)==null||tt.blur(),ne({edges:[je.find(Re=>Re.id===n)]})):ve([n])}}:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":q===null?void 0:q||`Edge from ${b} to ${x}`,"aria-describedby":Y?`${w2}-${G}`:void 0,ref:Q},!de&&X.createElement(t,{id:n,source:b,target:x,selected:l,animated:d,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,data:s,style:p,sourceX:y,sourceY:v,targetX:C,targetY:S,sourcePosition:E,targetPosition:N,sourceHandleId:A,targetHandleId:M,markerStart:ke,markerEnd:Se,pathOptions:oe,interactionWidth:ie}),ee&&X.createElement(X.Fragment,null,(ee==="source"||ee===!0)&&X.createElement(V2,{position:E,centerX:y,centerY:v,radius:U,onMouseDown:Qe=>Oe(Qe,!0),onMouseEnter:He,onMouseOut:Fe,type:"source"}),(ee==="target"||ee===!0)&&X.createElement(V2,{position:N,centerX:C,centerY:S,radius:U,onMouseDown:Qe=>Oe(Qe,!1),onMouseEnter:He,onMouseOut:Fe,type:"target"})))};return e.displayName="EdgeWrapper",O.memo(e)};function JP(t){return{default:js(t.default||Xl),straight:js(t.bezier||sf),step:js(t.step||rf),smoothstep:js(t.step||Jl),simplebezier:js(t.simplebezier||nf),...Object.keys(t).filter(e=>!["default","bezier"].includes(e)).reduce((e,n)=>(e[n]=js(t[n]||Xl),e),{})}}function $2(t,e,n=null){const o=((n==null?void 0:n.x)||0)+e.x,r=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case Ue.Top:return{x:o+s/2,y:r};case Ue.Right:return{x:o+s,y:r+i/2};case Ue.Bottom:return{x:o+s/2,y:r+i};case Ue.Left:return{x:o,y:r+i/2}}}function H2(t,e){return t?t.length!==1&&e?e&&t.find(n=>n.id===e)||null:t[0]:null}function W2(t){var o,r,s,i,a;const e=((o=t==null?void 0:t[Nt])==null?void 0:o.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&((r=t==null?void 0:t.positionAbsolute)==null?void 0:r.x)!==void 0&&((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)!==void 0;return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const KP=[{level:0,isMaxLevel:!0,edges:[]}];function XP(t,e,n){return function(o,r,s=!1){let i=-1;const a=o.reduce((d,u)=>{var m,_;const h=Bn(u.zIndex);let f=h?u.zIndex:0;if(s){const g=r.get(u.target),p=r.get(u.source),b=u.selected||(g==null?void 0:g.selected)||(p==null?void 0:p.selected),x=Math.max(((m=p==null?void 0:p[Nt])==null?void 0:m.z)||0,((_=g==null?void 0:g[Nt])==null?void 0:_.z)||0,1e3);f=(h?u.zIndex:0)+(b?x:0)}return d[f]?d[f].push(u):d[f]=[u],i=f>i?f:i,d},{}),l=Object.entries(a).map(([d,u])=>{const h=+d;return{edges:u,level:h,isMaxLevel:h===i}});return l.length===0?KP:l}(mt(O.useCallback(o=>t?o.edges.filter(r=>{const s=e.get(r.source),i=e.get(r.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&function({sourcePos:a,targetPos:l,sourceWidth:d,sourceHeight:u,targetWidth:h,targetHeight:f,width:m,height:_,transform:g}){const p={x:Math.min(a.x,l.x),y:Math.min(a.y,l.y),x2:Math.max(a.x+d,l.x+h),y2:Math.max(a.y+u,l.y+f)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const b=Zh({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:m/g[2],height:_/g[2]}),x=Math.max(0,Math.min(b.x2,p.x2)-Math.max(b.x,p.x)),y=Math.max(0,Math.min(b.y2,p.y2)-Math.max(b.y,p.y));return Math.ceil(x*y)>0}({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:i.width,targetHeight:i.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,e])),e,n)}const q2={[ys.Arrow]:({color:t="none",strokeWidth:e=1})=>X.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[ys.ArrowClosed]:({color:t="none",strokeWidth:e=1})=>X.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ZP=({id:t,type:e,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=function(d){const u=Gt();return O.useMemo(()=>{var h,f;return Object.prototype.hasOwnProperty.call(q2,d)?q2[d]:((f=(h=u.getState()).onError)==null||f.call(h,"009",rP(d)),null)},[d])}(e);return l?X.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},X.createElement(l,{color:n,strokeWidth:i})):null},G2=({defaultColor:t,rfId:e})=>{const n=mt(O.useCallback((({defaultColor:o,rfId:r})=>s=>{const i=[];return s.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(d=>{if(d&&typeof d=="object"){const u=lf(d,r);i.includes(u)||(a.push({id:u,color:d.color||o,...d}),i.push(u))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))})({defaultColor:t,rfId:e}),[t,e]),(o,r)=>!(o.length!==r.length||o.some((s,i)=>s.id!==r[i].id)));return X.createElement("defs",null,n.map(o=>X.createElement(ZP,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};G2.displayName="MarkerDefinitions";var QP=O.memo(G2);const eL=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Y2=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:d,onEdgeClick:u,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:_,reconnectRadius:g,children:p,disableKeyboardA11y:b})=>{const{edgesFocusable:x,edgesUpdatable:y,elementsSelectable:v,width:C,height:S,connectionMode:E,nodeInternals:N,onError:j}=mt(eL,nn),T=XP(e,N,n);return C?X.createElement(X.Fragment,null,T.map(({level:A,edges:M,isMaxLevel:P})=>X.createElement("svg",{key:A,style:{zIndex:A},width:C,height:S,className:"react-flow__edges react-flow__container"},P&&X.createElement(QP,{defaultColor:t,rfId:o}),X.createElement("g",null,M.map(R=>{const[L,B,U]=W2(N.get(R.source)),[D,k,$]=W2(N.get(R.target));if(!U||!$)return null;let I=R.type||"default";r[I]||(j==null||j("011",aP(I)),I="default");const W=r[I]||r.default,G=E===Dr.Strict?k.target:(k.target??[]).concat(k.source??[]),q=H2(B.source,R.sourceHandle),Y=H2(G,R.targetHandle),ee=(q==null?void 0:q.position)||Ue.Bottom,oe=(Y==null?void 0:Y.position)||Ue.Top,ie=!!(R.focusable||x&&R.focusable===void 0),Z=R.reconnectable||R.updatable,Q=f!==void 0&&(Z||y&&Z===void 0);if(!q||!Y)return j==null||j("008",sP(q,R)),null;const{sourceX:me,sourceY:fe,targetX:de,targetY:ue}=((ce,ke,Se,ae,Ce,_e)=>{const Ee=$2(Se,ce,ke),ze=$2(_e,ae,Ce);return{sourceX:Ee.x,sourceY:Ee.y,targetX:ze.x,targetY:ze.y}})(L,q,ee,D,Y,oe);return X.createElement(W,{key:R.id,id:R.id,className:cn([R.className,s]),type:I,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:me,sourceY:fe,targetX:de,targetY:ue,sourcePosition:ee,targetPosition:oe,elementsSelectable:v,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:d,onClick:u,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:_,reconnectRadius:g,rfId:o,ariaLabel:R.ariaLabel,isFocusable:ie,isReconnectable:Q,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:b})})))),p):null};Y2.displayName="EdgeRenderer";var tL=O.memo(Y2);const nL=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function oL({children:t}){const e=mt(nL);return X.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}const rL={[Ue.Left]:Ue.Right,[Ue.Right]:Ue.Left,[Ue.Top]:Ue.Bottom,[Ue.Bottom]:Ue.Top},J2=({nodeId:t,handleType:e,style:n,type:o=tr.Bezier,CustomComponent:r,connectionStatus:s})=>{var S,E,N;const{fromNode:i,handleId:a,toX:l,toY:d,connectionMode:u}=mt(O.useCallback(j=>({fromNode:j.nodeInternals.get(t),handleId:j.connectionHandleId,toX:(j.connectionPosition.x-j.transform[0])/j.transform[2],toY:(j.connectionPosition.y-j.transform[1])/j.transform[2],connectionMode:j.connectionMode}),[t]),nn),h=(S=i==null?void 0:i[Nt])==null?void 0:S.handleBounds;let f=h==null?void 0:h[e];if(u===Dr.Loose&&(f=f||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!f)return null;const m=a?f.find(j=>j.id===a):f[0],_=m?m.x+m.width/2:(i.width??0)/2,g=m?m.y+m.height/2:i.height??0,p=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+_,b=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+g,x=m==null?void 0:m.position,y=x?rL[x]:null;if(!x||!y)return null;if(r)return X.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:m,fromX:p,fromY:b,toX:l,toY:d,fromPosition:x,toPosition:y,connectionStatus:s});let v="";const C={sourceX:p,sourceY:b,sourcePosition:x,targetX:l,targetY:d,targetPosition:y};return o===tr.Bezier?[v]=n2(C):o===tr.Step?[v]=of({...C,borderRadius:0}):o===tr.SmoothStep?[v]=of(C):o===tr.SimpleBezier?[v]=Zv(C):v=`M${p},${b} ${l},${d}`,X.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};J2.displayName="ConnectionLine";const sL=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function iL({containerStyle:t,style:e,type:n,component:o}){const{nodeId:r,handleType:s,nodesConnectable:i,width:a,height:l,connectionStatus:d}=mt(sL,nn);return r&&s&&a&&i?X.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},X.createElement("g",{className:cn(["react-flow__connection",d])},X.createElement(J2,{nodeId:r,handleType:s,style:e,type:n,CustomComponent:o,connectionStatus:d}))):null}function K2(t,e){return O.useRef(null),Gt(),O.useMemo(()=>e(t),[t])}const X2=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:d,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:_,onSelectionStart:g,onSelectionEnd:p,connectionLineType:b,connectionLineStyle:x,connectionLineComponent:y,connectionLineContainerStyle:v,selectionKeyCode:C,selectionOnDrag:S,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:T,deleteKeyCode:A,onlyRenderVisibleElements:M,elementsSelectable:P,selectNodesOnDrag:R,defaultViewport:L,translateExtent:B,minZoom:U,maxZoom:D,preventScrolling:k,defaultMarkerColor:$,zoomOnScroll:I,zoomOnPinch:W,panOnScroll:G,panOnScrollSpeed:q,panOnScrollMode:Y,zoomOnDoubleClick:ee,panOnDrag:oe,onPaneClick:ie,onPaneMouseEnter:Z,onPaneMouseMove:Q,onPaneMouseLeave:me,onPaneScroll:fe,onPaneContextMenu:de,onEdgeContextMenu:ue,onEdgeMouseEnter:ce,onEdgeMouseMove:ke,onEdgeMouseLeave:Se,onReconnect:ae,onReconnectStart:Ce,onReconnectEnd:_e,reconnectRadius:Ee,noDragClassName:ze,noWheelClassName:Oe,noPanClassName:He,elevateEdgesOnSelect:Fe,disableKeyboardA11y:it,nodeOrigin:Qe,nodeExtent:tt,rfId:ne})=>{const ve=K2(t,$P),je=K2(e,JP);return function(Re){const J=Wi(),se=O.useRef(!1);O.useEffect(()=>{!se.current&&J.viewportInitialized&&Re&&(setTimeout(()=>Re(J),1),se.current=!0)},[Re,J.viewportInitialized])}(s),X.createElement(VP,{onPaneClick:ie,onPaneMouseEnter:Z,onPaneMouseMove:Q,onPaneMouseLeave:me,onPaneContextMenu:de,onPaneScroll:fe,deleteKeyCode:A,selectionKeyCode:C,selectionOnDrag:S,selectionMode:E,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:T,elementsSelectable:P,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:I,zoomOnPinch:W,zoomOnDoubleClick:ee,panOnScroll:G,panOnScrollSpeed:q,panOnScrollMode:Y,panOnDrag:oe,defaultViewport:L,translateExtent:B,minZoom:U,maxZoom:D,onSelectionContextMenu:_,preventScrolling:k,noDragClassName:ze,noWheelClassName:Oe,noPanClassName:He,disableKeyboardA11y:it},X.createElement(oL,null,X.createElement(tL,{edgeTypes:je,onEdgeClick:a,onEdgeDoubleClick:d,onlyRenderVisibleElements:M,onEdgeContextMenu:ue,onEdgeMouseEnter:ce,onEdgeMouseMove:ke,onEdgeMouseLeave:Se,onReconnect:ae,onReconnectStart:Ce,onReconnectEnd:_e,reconnectRadius:Ee,defaultMarkerColor:$,noPanClassName:He,elevateEdgesOnSelect:!!Fe,disableKeyboardA11y:it,rfId:ne},X.createElement(iL,{style:x,type:b,component:y,containerStyle:v})),X.createElement("div",{className:"react-flow__edgelabel-renderer"}),X.createElement(WP,{nodeTypes:ve,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:R,onlyRenderVisibleElements:M,noPanClassName:He,noDragClassName:ze,disableKeyboardA11y:it,nodeOrigin:Qe,nodeExtent:tt,rfId:ne})))};X2.displayName="GraphView";var aL=O.memo(X2);const wf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],rr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:wf,nodeExtent:wf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Dr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,e)=>{},isValidConnection:void 0},lL=()=>((t,e)=>t?Rv(t,e):Rv)((t,e)=>({...rr,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:s}=e();t({nodeInternals:pf(n,o,r,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=e();t({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=n!==void 0,s=o!==void 0,i=r?pf(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?o:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:d}=e(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const h=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=n.reduce((g,p)=>{const b=r.get(p.id);if(b!=null&&b.hidden)r.set(b.id,{...b,[Nt]:{...b[Nt],handleBounds:void 0}});else if(b){const x=Kh(p.nodeElement);!(!x.width||!x.height||b.width===x.width&&b.height===x.height&&!p.forceUpdate)&&(r.set(b.id,{...b,[Nt]:{...b[Nt],handleBounds:{source:P2(".source",p.nodeElement,f,d),target:P2(".target",p.nodeElement,f,d)}},...x}),g.push({id:b.id,type:"dimensions",dimensions:x}))}return g},[]);C2(r,d);const _=i||s&&!i&&N2(e,{initial:!0,...a});t({nodeInternals:new Map(r),fitViewOnInitDone:_}),(m==null?void 0:m.length)>0&&(o==null||o(m))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:s}=e(),i=n.map(a=>{const l={id:a.id,type:"position",dragging:r};return o&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const d=pf(T2(n,a()),r,i,l);t({nodeInternals:d})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=e();let i,a=null;o?i=n.map(l=>or(l,!0)):(i=Cs(s(),n),a=Cs(r,[])),Ql({changedNodes:i,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=e();let i,a=null;o?i=n.map(l=>or(l,!0)):(i=Cs(r,n),a=Cs(s(),[])),Ql({changedNodes:a,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:s}=e(),i=o||r;Ql({changedNodes:(n||s()).map(a=>(a.selected=!1,or(a.id,!1))),changedEdges:i.map(a=>or(a.id,!1)),get:e,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=e();o==null||o.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=e();o==null||o.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{var o;(o=e().d3Zoom)==null||o.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=e();Ql({changedNodes:o().filter(r=>r.selected).map(r=>or(r.id,!1)),changedEdges:n.filter(r=>r.selected).map(r=>or(r.id,!1)),get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=e();o.forEach(r=>{r.positionAbsolute=Xh(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:s,d3Zoom:i,d3Selection:a,translateExtent:l}=e();if(!i||!a||!n.x&&!n.y)return!1;const d=vr.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),u=[[0,0],[r,s]],h=i==null?void 0:i.constrain()(d,u,l);return i.transform(a,h),o[0]!==h.x||o[1]!==h.y||o[2]!==h.k},cancelConnection:()=>t({connectionNodeId:rr.connectionNodeId,connectionHandleId:rr.connectionHandleId,connectionHandleType:rr.connectionHandleType,connectionStatus:rr.connectionStatus,connectionStartHandle:rr.connectionStartHandle,connectionEndHandle:rr.connectionEndHandle}),reset:()=>t({...rr})}),Object.is),vf=({children:t})=>{const e=O.useRef(null);return e.current||(e.current=lL()),X.createElement(eP,{value:e.current},t)};vf.displayName="ReactFlowProvider";const Z2=({children:t})=>O.useContext(Wl)?X.createElement(X.Fragment,null,t):X.createElement(vf,null,t);Z2.displayName="ReactFlowWrapper";const cL={input:p2,default:ff,output:_2,group:mf},dL={default:Xl,straight:sf,step:rf,smoothstep:Jl,simplebezier:nf},uL=[0,0],hL=[15,15],fL={x:0,y:0,zoom:1},mL={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},kf=O.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s=cL,edgeTypes:i=dL,onNodeClick:a,onEdgeClick:l,onInit:d,onMove:u,onMoveStart:h,onMoveEnd:f,onConnect:m,onConnectStart:_,onConnectEnd:g,onClickConnectStart:p,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:S,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:j,onNodesDelete:T,onEdgesDelete:A,onSelectionChange:M,onSelectionDragStart:P,onSelectionDrag:R,onSelectionDragStop:L,onSelectionContextMenu:B,onSelectionStart:U,onSelectionEnd:D,connectionMode:k=Dr.Strict,connectionLineType:$=tr.Bezier,connectionLineStyle:I,connectionLineComponent:W,connectionLineContainerStyle:G,deleteKeyCode:q="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:ee=!1,selectionMode:oe=Vi.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:Z=Gl()?"Meta":"Control",zoomActivationKeyCode:Q=Gl()?"Meta":"Control",snapToGrid:me=!1,snapGrid:fe=hL,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:ue=!0,nodesDraggable:ce,nodesConnectable:ke,nodesFocusable:Se,nodeOrigin:ae=uL,edgesFocusable:Ce,edgesUpdatable:_e,elementsSelectable:Ee,defaultViewport:ze=fL,minZoom:Oe=.5,maxZoom:He=2,translateExtent:Fe=wf,preventScrolling:it=!0,nodeExtent:Qe,defaultMarkerColor:tt="#b1b1b7",zoomOnScroll:ne=!0,zoomOnPinch:ve=!0,panOnScroll:je=!1,panOnScrollSpeed:Re=.5,panOnScrollMode:J=er.Free,zoomOnDoubleClick:se=!0,panOnDrag:ge=!0,onPaneClick:pe,onPaneMouseEnter:xe,onPaneMouseMove:Ve,onPaneMouseLeave:Be,onPaneScroll:rt,onPaneContextMenu:le,children:Ie,onEdgeContextMenu:Me,onEdgeDoubleClick:$e,onEdgeMouseEnter:Ke,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ye,onEdgeUpdate:ot,onEdgeUpdateStart:Xe,onEdgeUpdateEnd:ct,onReconnect:jt,onReconnectStart:Ft,onReconnectEnd:dn,reconnectRadius:Yt=10,edgeUpdaterRadius:Xn=10,onNodesChange:Is,onEdgesChange:ho,noDragClassName:Fo="nodrag",noWheelClassName:Vn="nowheel",noPanClassName:As="nopan",fitView:Ji=!1,fitViewOptions:Pz,connectOnClick:Lz=!0,attributionPosition:Fz,proOptions:zz,defaultEdgeOptions:Bz,elevateNodesOnSelect:Uz=!0,elevateEdgesOnSelect:Vz=!1,disableKeyboardA11y:V3=!1,autoPanOnConnect:$z=!0,autoPanOnNodeDrag:Hz=!0,connectionRadius:Wz=20,isValidConnection:qz,onError:Gz,style:Yz,id:$3,nodeDragThreshold:Jz,...Kz},Xz)=>{const mm=$3||"1";return X.createElement("div",{...Kz,style:{...Yz,...mL},ref:Xz,className:cn(["react-flow",r]),"data-testid":"rf__wrapper",id:$3},X.createElement(Z2,null,X.createElement(aL,{onInit:d,onMove:u,onMoveStart:h,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:x,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:S,nodeTypes:s,edgeTypes:i,connectionLineType:$,connectionLineStyle:I,connectionLineComponent:W,connectionLineContainerStyle:G,selectionKeyCode:Y,selectionOnDrag:ee,selectionMode:oe,deleteKeyCode:q,multiSelectionKeyCode:Z,panActivationKeyCode:ie,zoomActivationKeyCode:Q,onlyRenderVisibleElements:de,selectNodesOnDrag:ue,defaultViewport:ze,translateExtent:Fe,minZoom:Oe,maxZoom:He,preventScrolling:it,zoomOnScroll:ne,zoomOnPinch:ve,zoomOnDoubleClick:se,panOnScroll:je,panOnScrollSpeed:Re,panOnScrollMode:J,panOnDrag:ge,onPaneClick:pe,onPaneMouseEnter:xe,onPaneMouseMove:Ve,onPaneMouseLeave:Be,onPaneScroll:rt,onPaneContextMenu:le,onSelectionContextMenu:B,onSelectionStart:U,onSelectionEnd:D,onEdgeContextMenu:Me,onEdgeDoubleClick:$e,onEdgeMouseEnter:Ke,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ye,onReconnect:jt??ot,onReconnectStart:Ft??Xe,onReconnectEnd:dn??ct,reconnectRadius:Yt??Xn,defaultMarkerColor:tt,noDragClassName:Fo,noWheelClassName:Vn,noPanClassName:As,elevateEdgesOnSelect:Vz,rfId:mm,disableKeyboardA11y:V3,nodeOrigin:ae,nodeExtent:Qe}),X.createElement(kP,{nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:m,onConnectStart:_,onConnectEnd:g,onClickConnectStart:p,onClickConnectEnd:b,nodesDraggable:ce,nodesConnectable:ke,nodesFocusable:Se,edgesFocusable:Ce,edgesUpdatable:_e,elementsSelectable:Ee,elevateNodesOnSelect:Uz,minZoom:Oe,maxZoom:He,nodeExtent:Qe,onNodesChange:Is,onEdgesChange:ho,snapToGrid:me,snapGrid:fe,connectionMode:k,translateExtent:Fe,connectOnClick:Lz,defaultEdgeOptions:Bz,fitView:Ji,fitViewOptions:Pz,onNodesDelete:T,onEdgesDelete:A,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:j,onSelectionDrag:R,onSelectionDragStart:P,onSelectionDragStop:L,noPanClassName:As,nodeOrigin:ae,rfId:mm,autoPanOnConnect:$z,autoPanOnNodeDrag:Hz,onError:Gz,connectionRadius:Wz,isValidConnection:qz,nodeDragThreshold:Jz}),X.createElement(wP,{onSelectionChange:M}),Ie,X.createElement(dP,{proOptions:zz,position:Fz}),X.createElement(jP,{rfId:mm,disableKeyboardA11y:V3})))});function Q2(t){return e=>{const[n,o]=O.useState(e),r=O.useCallback(s=>o(i=>t(s,i)),[]);return[n,o,r]}}kf.displayName="ReactFlow";const ek=Q2(T2),tk=Q2(function(t,e){return A2(t,e)});function pL(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},X.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function gL(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},X.createElement("path",{d:"M0 0h32v4.2H0z"}))}function _L(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},X.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function bL(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},X.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function xL(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},X.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Es=({children:t,className:e,...n})=>X.createElement("button",{type:"button",className:cn(["react-flow__controls-button",e]),...n},t);Es.displayName="ControlButton";const yL=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),nk=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:l,className:d,children:u,position:h="bottom-left"})=>{const f=Gt(),[m,_]=O.useState(!1),{isInteractive:g,minZoomReached:p,maxZoomReached:b}=mt(yL,nn),{zoomIn:x,zoomOut:y,fitView:v}=Wi();return O.useEffect(()=>{_(!0)},[]),m?X.createElement(ql,{className:cn(["react-flow__controls",d]),position:h,style:t,"data-testid":"rf__controls"},e&&X.createElement(X.Fragment,null,X.createElement(Es,{onClick:()=>{x(),s==null||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b},X.createElement(pL,null)),X.createElement(Es,{onClick:()=>{y(),i==null||i()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:p},X.createElement(gL,null))),n&&X.createElement(Es,{className:"react-flow__controls-fitview",onClick:()=>{v(r),a==null||a()},title:"fit view","aria-label":"fit view"},X.createElement(_L,null)),o&&X.createElement(Es,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)},title:"toggle interactivity","aria-label":"toggle interactivity"},g?X.createElement(xL,null):X.createElement(bL,null)),u):null};nk.displayName="Controls";var Un,wL=O.memo(nk);function vL({color:t,dimensions:e,lineWidth:n}){return X.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function kL({color:t,radius:e}){return X.createElement("circle",{cx:e,cy:e,r:e,fill:t})}(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Un||(Un={}));const SL={[Un.Dots]:"#91919a",[Un.Lines]:"#eee",[Un.Cross]:"#e2e2e2"},CL={[Un.Dots]:1,[Un.Lines]:1,[Un.Cross]:6},NL=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function ok({id:t,variant:e=Un.Dots,gap:n=20,size:o,lineWidth:r=1,offset:s=2,color:i,style:a,className:l}){const d=O.useRef(null),{transform:u,patternId:h}=mt(NL,nn),f=i||SL[e],m=o||CL[e],_=e===Un.Dots,g=e===Un.Cross,p=Array.isArray(n)?n:[n,n],b=[p[0]*u[2]||1,p[1]*u[2]||1],x=m*u[2],y=g?[x,x]:b,v=_?[x/s,x/s]:[y[0]/s,y[1]/s];return X.createElement("svg",{className:cn(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},X.createElement("pattern",{id:h+t,x:u[0]%b[0],y:u[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},_?X.createElement(kL,{color:f,radius:x/s}):X.createElement(vL,{dimensions:y,color:f,lineWidth:r})),X.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}ok.displayName="Background";var jL=O.memo(ok);function Sf(t){return Math.min(11*t+35,200)}const rk=X.createContext("LR"),sk=O.memo(t=>{const e=K.c(51),{data:n,selected:o}=t,r=Le(n.atom),s=Zc().inOrderIds.indexOf(r.id),i=o?"var(--gray-9)":"var(--gray-3)",a=mt(EL),l=O.use(rk);let d,u,h,f,m;if(e[0]!==r.code||e[1]!==i||e[2]!==l||e[3]!==o){const A=r.code.split(`
`).length,M=l==="LR"?Ue.Left:Ue.Top;let P;e[8]!==i?(P={background:i},e[8]=i,e[9]=P):P=e[9],e[10]!==M||e[11]!==P?(h=c.jsx(nr,{type:"target",id:"inputs",position:M,style:P}),e[10]=M,e[11]=P,e[12]=h):h=e[12];const R=l==="LR"?Ue.Left:Ue.Top;let L;e[13]!==i?(L={background:i},e[13]=i,e[14]=L):L=e[14],e[15]!==R||e[16]!==L?(f=c.jsx(nr,{type:"source",id:"inputs",position:R,style:L}),e[15]=R,e[16]=L,e[17]=f):f=e[17];const B=o&&"border-primary";e[18]!==B?(u=Ne("flex flex-col bg-card border border-input/50 rounded-md mx-[2px] overflow-hidden",B),e[18]=B,e[19]=u):u=e[19],d=Sf(A),e[0]=r.code,e[1]=i,e[2]=l,e[3]=o,e[4]=d,e[5]=u,e[6]=h,e[7]=f}else d=e[4],u=e[5],h=e[6],f=e[7];var _;let g;e[20]!==n.forceWidth||e[21]!==a?(m=n.forceWidth||(_=a,Math.min(Math.max(_-100,100),400)),e[20]=n.forceWidth,e[21]=a,e[22]=m):m=e[22],e[23]!==d||e[24]!==m?(g={height:d,width:m},e[23]=d,e[24]=m,e[25]=g):g=e[25];const p=q$(r.name,s);let b,x,y;e[26]!==p?(b=c.jsx("div",{className:"text-muted-foreground font-semibold text-xs py-1 px-2 bg-muted border-b",children:p}),e[26]=p,e[27]=b):b=e[27],e[28]!==r.code?(x=c.jsx(AW,{code:r.code}),e[28]=r.code,e[29]=x):x=e[29],e[30]!==u||e[31]!==g||e[32]!==b||e[33]!==x?(y=c.jsxs("div",{className:u,style:g,children:[b,x]}),e[30]=u,e[31]=g,e[32]=b,e[33]=x,e[34]=y):y=e[34];const v=l==="LR"?Ue.Right:Ue.Bottom;let C,S;e[35]!==i?(C={background:i},e[35]=i,e[36]=C):C=e[36],e[37]!==v||e[38]!==C?(S=c.jsx(nr,{type:"source",id:"outputs",position:v,style:C}),e[37]=v,e[38]=C,e[39]=S):S=e[39];const E=l==="LR"?Ue.Right:Ue.Bottom;let N,j,T;return e[40]!==i?(N={background:i},e[40]=i,e[41]=N):N=e[41],e[42]!==E||e[43]!==N?(j=c.jsx(nr,{type:"target",id:"outputs",position:E,style:N}),e[42]=E,e[43]=N,e[44]=j):j=e[44],e[45]!==y||e[46]!==S||e[47]!==j||e[48]!==h||e[49]!==f?(T=c.jsxs("div",{children:[h,f,y,S,j]}),e[45]=y,e[46]=S,e[47]=j,e[48]=h,e[49]=f,e[50]=T):T=e[50],T},(t,e)=>["data","selected","id"].every(n=>t[n]===e[n]));sk.displayName="CustomNode";const ik={custom:sk};function EL(t){const{width:e}=t;return e}const ak=t=>{const e=K.c(18),{maxCount:n,cellIds:o,onClick:r,skipScroll:s}=t,i=Zc();let a,l,d,u;if(e[0]!==o||e[1]!==i||e[2]!==n||e[3]!==r||e[4]!==s){d=Symbol.for("react.early_return_sentinel");e:{let h;e[8]!==i?(h=(_,g)=>i.inOrderIds.indexOf(_)-i.inOrderIds.indexOf(g),e[8]=i,e[9]=h):h=e[9];const f=[...o].sort(h);if(o.length===0){let _;e[10]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx("div",{className:"text-muted-foreground",children:"--"}),e[10]=_):_=e[10],d=_;break e}let m;e[11]!==o.length||e[12]!==r||e[13]!==s?(m=(_,g)=>c.jsxs("span",{className:"truncate",children:[c.jsx(yr,{variant:"focus",cellId:_,skipScroll:s,className:"whitespace-nowrap",onClick:r?()=>r(_):void 0},_),g<o.length-1&&", "]},_),e[11]=o.length,e[12]=r,e[13]=s,e[14]=m):m=e[14],a=f.slice(0,n).map(m),l=o.length>n&&c.jsxs(Ur,{children:[c.jsx(Hs,{asChild:!0,children:c.jsxs("span",{className:"whitespace-nowrap text-muted-foreground text-xs hover:underline cursor-pointer",children:["+",o.length-n," more"]})}),c.jsx(Fs,{className:"w-auto",children:c.jsx("div",{className:"flex flex-col gap-1 py-1",children:f.slice(n).map(_=>c.jsx(yr,{variant:"focus",cellId:_,className:"whitespace-nowrap",onClick:r?()=>r(_):void 0},_))})})]})}e[0]=o,e[1]=i,e[2]=n,e[3]=r,e[4]=s,e[5]=a,e[6]=l,e[7]=d}else a=e[5],l=e[6],d=e[7];return d!==Symbol.for("react.early_return_sentinel")?d:(e[15]!==a||e[16]!==l?(u=c.jsxs(c.Fragment,{children:[a,l]}),e[15]=a,e[16]=l,e[17]=u):u=e[17],u)},Cf=t=>{const e=K.c(15);let n,o,r,s;e[0]!==t?({name:o,declaredBy:n,onClick:r,...s}=t,e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=s):(n=e[1],o=e[2],r=e[3],s=e[4]);const i=n.length>1?"destructive":"outline";let a,l,d;return e[5]!==o||e[6]!==r?(a=async u=>{r?r(u):(await _n(o),nt({title:"Copied to clipboard"}))},e[5]=o,e[6]=r,e[7]=a):a=e[7],e[8]!==o||e[9]!==i||e[10]!==a?(l=c.jsx(NS,{title:o,variant:i,className:"rounded-sm text-ellipsis block overflow-hidden max-w-fit cursor-pointer font-medium",onClick:a,children:o}),e[8]=o,e[9]=i,e[10]=a,e[11]=l):l=e[11],e[12]!==s||e[13]!==l?(d=c.jsx("div",{className:"max-w-[130px]",...s,children:l}),e[12]=s,e[13]=l,e[14]=d):d=e[14],d},Nf=O.memo(t=>{const e=K.c(38),{onChange:n,view:o,settings:r,onSettingsChange:s}=t;let i;e[0]!==s||e[1]!==r?(i=(R,L)=>{s({...r,[R]:L})},e[0]=s,e[1]=r,e[2]=i):i=e[2];const a=i;let l,d,u,h,f,m;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(Hs,{asChild:!0,children:c.jsx(Ae,{variant:"text",size:"xs",children:c.jsx(Pm,{className:"w-4 h-4"})})}),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx("div",{className:"font-semibold pb-4",children:"Settings"}),e[4]=d):d=e[4],e[5]!==a?(u=R=>a("hidePureMarkdown",!!R),e[5]=a,e[6]=u):u=e[6],e[7]!==r.hidePureMarkdown||e[8]!==u?(h=c.jsx(nS,{"data-testid":"hide-pure-markdown-checkbox",id:"hide-pure-markdown",checked:r.hidePureMarkdown,onCheckedChange:u}),e[7]=r.hidePureMarkdown,e[8]=u,e[9]=h):h=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(Fr,{htmlFor:"hide-pure-markdown",children:"Hide pure markdown"}),e[10]=f):f=e[10],e[11]!==h?(m=c.jsxs(Ur,{children:[l,c.jsxs(Fs,{className:"w-auto p-2 text-muted-foreground",children:[d,c.jsxs("div",{className:"flex items-center gap-2",children:[h,f]})]})]}),e[11]=h,e[12]=m):m=e[12];const _=m,g=o==="_minimap_";let p,b,x;e[13]!==n?(p=()=>n("_minimap_"),e[13]=n,e[14]=p):p=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(Qp,{className:"w-4 h-4 mr-1"}),e[15]=b):b=e[15],e[16]!==g||e[17]!==p?(x=c.jsxs(Ae,{variant:"outline",className:"bg-background","aria-selected":g,size:"xs",onClick:p,children:[b,"Mini Map"]}),e[16]=g,e[17]=p,e[18]=x):x=e[18];const y=o==="TB";let v,C,S;e[19]!==n?(v=()=>n("TB"),e[19]=n,e[20]=v):v=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx(Ea,{className:"w-4 h-4 mr-1"}),e[21]=C):C=e[21],e[22]!==y||e[23]!==v?(S=c.jsxs(Ae,{variant:"outline",className:"bg-background","aria-selected":y,size:"xs",onClick:v,children:[C,"Vertical Tree"]}),e[22]=y,e[23]=v,e[24]=S):S=e[24];const E=o==="LR";let N,j,T,A;e[25]!==n?(N=()=>n("LR"),e[25]=n,e[26]=N):N=e[26],e[27]===Symbol.for("react.memo_cache_sentinel")?(j=c.jsx(Ea,{className:"w-4 h-4 mr-1 transform -rotate-90"}),e[27]=j):j=e[27],e[28]!==E||e[29]!==N?(T=c.jsxs(Ae,{variant:"outline",className:"bg-background","aria-selected":E,size:"xs",onClick:N,children:[j," ","Horizontal Tree"]}),e[28]=E,e[29]=N,e[30]=T):T=e[30],e[31]!==x||e[32]!==S||e[33]!==T?(A=c.jsxs("div",{className:"flex gap-2",children:[x,S,T]}),e[31]=x,e[32]=S,e[33]=T,e[34]=A):A=e[34];const M=o!=="_minimap_"&&_;let P;return e[35]!==A||e[36]!==M?(P=c.jsxs(ql,{position:"top-right",className:"flex flex-col items-end gap-2",children:[A,M]}),e[35]=A,e[36]=M,e[37]=P):P=e[37],P});Nf.displayName="GraphToolbar";const tc=O.memo(t=>{const e=K.c(11),{selection:n,variables:o,onClearSelection:r}=t;if(!n)return null;const s=IL;let i;e[0]!==r||e[1]!==n.id||e[2]!==n.source||e[3]!==n.target||e[4]!==n.type||e[5]!==o?(i=()=>{if(n.type==="node"){const u=Object.values(o).filter(m=>m.usedBy.includes(n.id)),h=Object.values(o).filter(m=>m.declaredBy.includes(n.id)),f=(m,_)=>c.jsxs(c.Fragment,{children:[m.length===0&&c.jsx("div",{className:"text-muted-foreground text-sm text-center",children:"--"}),c.jsx("div",{className:"grid grid-cols-5 gap-3 items-center text-sm py-1 flex-1 empty:hidden",children:m.map(g=>c.jsxs(X.Fragment,{children:[c.jsx(Cf,{declaredBy:g.declaredBy,name:g.name}),c.jsxs("div",{className:"truncate col-span-2",title:g.value??"",children:[g.value,c.jsxs("span",{className:"ml-1 truncate text-foreground/60 font-mono",children:["(",g.dataType,")"]})]}),c.jsx("div",{className:"truncate col-span-2 gap-1 items-center",children:c.jsx(ak,{skipScroll:!0,onClick:()=>s(_==="in"?g.declaredBy[0]:g.usedBy[0],g.name),maxCount:3,cellIds:g.usedBy})})]},g.name))})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[c.jsx(sc,{className:"w-5 h-5"}),c.jsx(yr,{cellId:n.id}),c.jsx("div",{className:"flex-1"}),c.jsx(O0,{cellId:n.id,children:c.jsx(Ae,{variant:"ghost",size:"icon",children:c.jsx(ld,{className:"w-4 h-4"})})}),c.jsx(Ae,{variant:"text",size:"icon",onClick:()=>{r()},children:c.jsx(eo,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"text-sm flex flex-col py-3 pl-2 pr-4 flex-1 justify-center",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[c.jsx(wp,{className:"w-4 h-4"}),"Outputs"]}),f(h,"out")]}),c.jsx("hr",{className:"border-divider my-3"}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[c.jsx(fn,{className:"w-4 h-4"}),"Inputs"]}),f(u,"in")]})]})]})}if(n.type==="edge"){const u=Object.values(o).filter(h=>h.declaredBy.includes(n.source)&&h.usedBy.includes(n.target));return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[c.jsx(Aa,{className:"w-4 h-4"}),c.jsx(yr,{cellId:n.source}),c.jsx(sd,{className:"w-4 h-4"}),c.jsx(yr,{cellId:n.target})]}),c.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-[350px] items-center text-sm p-3 flex-1",children:u.map(h=>c.jsxs(X.Fragment,{children:[c.jsx(Cf,{declaredBy:h.declaredBy,name:h.name,onClick:()=>{s(h.declaredBy[0],h.name)}}),c.jsx("div",{className:"truncate text-foreground/60 font-mono",children:h.dataType}),c.jsx("div",{className:"truncate col-span-2",title:h.value??"",children:h.value})]},h.name))})]})}},e[0]=r,e[1]=n.id,e[2]=n.source,e[3]=n.target,e[4]=n.type,e[5]=o,e[6]=i):i=e[6];const a=i;let l,d;return e[7]!==a?(l=a(),e[7]=a,e[8]=l):l=e[8],e[9]!==l?(d=c.jsx(ql,{position:"bottom-left",className:"max-h-[90%] flex flex-col w-[calc(100%-5rem)]",children:c.jsx("div",{className:"min-h-[100px] shadow-md rounded-md border max-w-[550px] border-primary/40 my-4 min-w-[240px] bg-[var(--slate-1)] text-muted-foreground/80 flex flex-col overflow-y-auto",children:l})}),e[9]=l,e[10]=d):d=e[10],d});function IL(t,e){const n=Qi(t);n&&ip(n,e)}function lk(){const t=K.c(7),e=Wi(),n=mt(TL),o=mt(AL);let r;t[0]!==e?(r=()=>{e.fitView({duration:100})},t[0]=e,t[1]=r):r=t[1];const s=G$(r,100);let i,a;t[2]!==s||t[3]!==o||t[4]!==n?(i=()=>{n&&o&&s()},a=[n,o,s],t[2]=s,t[3]=o,t[4]=n,t[5]=i,t[6]=a):(i=t[5],a=t[6]),O.useEffect(i,a)}function AL(t){const{height:e}=t;return e}function TL(t){const{width:e}=t;return e}tc.displayName="GraphSelectionPanel";const ck=new class{createEdge(t,e,n){return{type:"smoothstep",pathOptions:{offset:20,borderRadius:100},data:{direction:n},markerEnd:{type:ys.Arrow},id:`${t}-${e}-${n}`,source:t,sourceHandle:n,targetHandle:n,target:e}}createNode(t,e,n){return{id:t,data:{atom:e},width:250,type:"custom",height:Sf(at.get(e).code.trim().split(`
`).length),position:{x:0,y:n+20}}}createElements(t,e,n,o){let r=0;const s=[],i=[];for(const[l,d]of rp.zip(t,e)){const u=this.createNode(l,d,r);s.push(u),r=u.position.y+(u.height||0)}const a=new Set;for(const l of Object.values(n)){const{declaredBy:d,usedBy:u}=l;for(const h of d)for(const f of u){const m=`${h}-${f}`;a.has(m)||(a.add(m),i.push(this.createEdge(h,f,"inputs"),this.createEdge(h,f,"outputs")))}}return{nodes:s,edges:i}}},ML=t=>{const e=K.c(37),{cellIds:n,variables:o,cellAtoms:r,children:s}=t;let i;e[0]!==r||e[1]!==n||e[2]!==o?(i=ck.createElements(n,r,o,!1),e[0]=r,e[1]=n,e[2]=o,e[3]=i):i=e[3];const{nodes:a,edges:l}=i;let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[4]=d):d=e[4];const[u,h]=tk(d),[f,m]=ek(a),[_,g]=O.useState(),[p,b]=O.useState(),x=O.useRef(!1);lk();const y=mt(OL);let v;e[5]!==h||e[6]!==m?(v=k=>{m(k.nodes),h([])},e[5]=h,e[6]=m,e[7]=v):v=e[7];const C=qe(v);let S,E,N,j;e[8]!==r||e[9]!==n||e[10]!==C||e[11]!==o?(S=()=>{x.current?C(ck.createElements(n,r,o,!1)):x.current=!0},E=[n,o,r,C],e[8]=r,e[9]=n,e[10]=C,e[11]=o,e[12]=S,e[13]=E):(S=e[12],E=e[13]),O.useEffect(S,E),e[14]!==l||e[15]!==_||e[16]!==h?(N=()=>{if(_){const k=l.filter($=>{const{source:I,target:W,data:G}=$;return I===_&&G.direction==="outputs"||W===_&&G.direction==="inputs"});h(k)}},j=[_,h,l],e[14]=l,e[15]=_,e[16]=h,e[17]=N,e[18]=j):(N=e[17],j=e[18]),O.useEffect(N,j);const T=function(k,$){const I=K.c(17);let W,G;if(I[0]!==$||I[1]!==k){let Q;I[3]!==$?(Q=(me,fe)=>{const{position:de}=fe;return Math.min(me,de.y-$/2-10)},I[3]=$,I[4]=Q):Q=I[4],G=k.reduce(Q,Number.POSITIVE_INFINITY),I[0]=$,I[1]=k,I[2]=G}else G=I[2];const q=G;let Y;if(I[5]!==$||I[6]!==k){let Q;I[8]!==$?(Q=(me,fe)=>{const{position:de}=fe;return Math.max(me,de.y+$/2+10)},I[8]=$,I[9]=Q):Q=I[9],Y=k.reduce(Q,Number.NEGATIVE_INFINITY),I[5]=$,I[6]=k,I[7]=Y}else Y=I[7];const ee=Y;let oe,ie,Z;return I[10]!==q?(oe=[Number.NEGATIVE_INFINITY,q],I[10]=q,I[11]=oe):oe=I[11],I[12]!==ee?(ie=[Number.POSITIVE_INFINITY,ee],I[12]=ee,I[13]=ie):ie=I[13],I[14]!==oe||I[15]!==ie?(Z=[oe,ie],I[14]=oe,I[15]=ie,I[16]=Z):Z=I[16],W=Z,W}(f,y);let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{g(void 0),b(void 0)},e[19]=A):A=e[19];const M=A;let P;e[20]!==u||e[21]!==p||e[22]!==_||e[23]!==o?(P=()=>p?c.jsx(tc,{selection:{type:"edge",source:p.source,target:p.target},onClearSelection:M,variables:o,edges:u}):_?c.jsx(tc,{selection:{type:"node",id:_},variables:o,edges:u,onClearSelection:M}):null,e[20]=u,e[21]=p,e[22]=_,e[23]=o,e[24]=P):P=e[24];const R=P;let L,B,U,D;return e[25]!==h?(L=(k,$)=>{const I=$.id;g(I),b(void 0),h([])},e[25]=h,e[26]=L):L=e[26],e[27]===Symbol.for("react.memo_cache_sentinel")?(B=(k,$)=>{b($)},e[27]=B):B=e[27],e[28]!==R?(U=R(),e[28]=R,e[29]=U):U=e[29],e[30]!==s||e[31]!==u||e[32]!==f||e[33]!==L||e[34]!==U||e[35]!==T?(D=c.jsxs(kf,{nodes:f,edges:u,nodeTypes:ik,translateExtent:T,onNodeClick:L,onNodeDoubleClick:DL,onEdgeClick:B,snapToGrid:!0,fitView:!0,elementsSelectable:!0,minZoom:1,maxZoom:1,draggable:!1,panOnScrollMode:er.Vertical,zoomOnDoubleClick:!1,nodesDraggable:!1,nodesConnectable:!1,nodesFocusable:!1,edgesFocusable:!1,selectNodesOnDrag:!1,panOnDrag:!1,preventScrolling:!1,zoomOnPinch:!1,panOnScroll:!0,autoPanOnNodeDrag:!1,autoPanOnConnect:!1,children:[U,s]}),e[30]=s,e[31]=u,e[32]=f,e[33]=L,e[34]=U,e[35]=T,e[36]=D):D=e[36],D};function OL(t){const{height:e}=t;return e}function DL(t,e){jS(e.id,"focus")}var jf,dk,uk,hk,fk,mk,Ef,pk,If,gk,Af,_k,Tf,bk,Mf,xk,Of,yk,Df,wk,Rf,vk,Pf,kk,Lf,Sk,Ff,Ck,zf,Nk,Bf,jk,Uf,Ek,Ik,Ak,Tk,Mk,Ok,Dk,Vf,Rk,$f,Pk,Hf,Lk,Wf,Fk,qf,zk,Gf,Bk,Yf,Uk,Jf,Vk,Kf,$k,Xf,Hk,Zf,Wk,Qf,qk,em,Gk,tm,Yk,Jk,Kk,Xk,Zk,Qk,e3,nm,t3,om,n3,o3,r3,rm,s3,sm,i3,im,a3,am,l3,lm,c3,d3,u3,h3,f3;function cm(){if(dk)return jf;dk=1;var t="\0";function e(s,i){s[i]?s[i]++:s[i]=1}function n(s,i){--s[i]||delete s[i]}function o(s,i,a,l){var d=""+i,u=""+a;if(!s&&d>u){var h=d;d=u,u=h}return d+""+u+""+(l===void 0?"\0":l)}function r(s,i){return o(s,i.v,i.w,i.name)}return jf=class{constructor(s){te(this,"_isDirected",!0);te(this,"_isMultigraph",!1);te(this,"_isCompound",!1);te(this,"_label");te(this,"_defaultNodeLabelFn",()=>{});te(this,"_defaultEdgeLabelFn",()=>{});te(this,"_nodes",{});te(this,"_in",{});te(this,"_preds",{});te(this,"_out",{});te(this,"_sucs",{});te(this,"_edgeObjs",{});te(this,"_edgeLabels",{});te(this,"_nodeCount",0);te(this,"_edgeCount",0);te(this,"_parent");te(this,"_children");s&&(this._isDirected=!Object.hasOwn(s,"directed")||s.directed,this._isMultigraph=!!Object.hasOwn(s,"multigraph")&&s.multigraph,this._isCompound=!!Object.hasOwn(s,"compound")&&s.compound),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(s){return this._label=s,this}graph(){return this._label}setDefaultNodeLabel(s){return this._defaultNodeLabelFn=s,typeof s!="function"&&(this._defaultNodeLabelFn=()=>s),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var s=this;return this.nodes().filter(i=>Object.keys(s._in[i]).length===0)}sinks(){var s=this;return this.nodes().filter(i=>Object.keys(s._out[i]).length===0)}setNodes(s,i){var a=arguments,l=this;return s.forEach(function(d){a.length>1?l.setNode(d,i):l.setNode(d)}),this}setNode(s,i){return Object.hasOwn(this._nodes,s)?(arguments.length>1&&(this._nodes[s]=i),this):(this._nodes[s]=arguments.length>1?i:this._defaultNodeLabelFn(s),this._isCompound&&(this._parent[s]=t,this._children[s]={},this._children[t][s]=!0),this._in[s]={},this._preds[s]={},this._out[s]={},this._sucs[s]={},++this._nodeCount,this)}node(s){return this._nodes[s]}hasNode(s){return Object.hasOwn(this._nodes,s)}removeNode(s){var i=this;if(Object.hasOwn(this._nodes,s)){var a=l=>i.removeEdge(i._edgeObjs[l]);delete this._nodes[s],this._isCompound&&(this._removeFromParentsChildList(s),delete this._parent[s],this.children(s).forEach(function(l){i.setParent(l)}),delete this._children[s]),Object.keys(this._in[s]).forEach(a),delete this._in[s],delete this._preds[s],Object.keys(this._out[s]).forEach(a),delete this._out[s],delete this._sucs[s],--this._nodeCount}return this}setParent(s,i){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(i===void 0)i=t;else{for(var a=i+="";a!==void 0;a=this.parent(a))if(a===s)throw new Error("Setting "+i+" as parent of "+s+" would create a cycle");this.setNode(i)}return this.setNode(s),this._removeFromParentsChildList(s),this._parent[s]=i,this._children[i][s]=!0,this}_removeFromParentsChildList(s){delete this._children[this._parent[s]][s]}parent(s){if(this._isCompound){var i=this._parent[s];if(i!==t)return i}}children(s=t){if(this._isCompound){var i=this._children[s];if(i)return Object.keys(i)}else{if(s===t)return this.nodes();if(this.hasNode(s))return[]}}predecessors(s){var i=this._preds[s];if(i)return Object.keys(i)}successors(s){var i=this._sucs[s];if(i)return Object.keys(i)}neighbors(s){var i=this.predecessors(s);if(i){const l=new Set(i);for(var a of this.successors(s))l.add(a);return Array.from(l.values())}}isLeaf(s){return(this.isDirected()?this.successors(s):this.neighbors(s)).length===0}filterNodes(s){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var a=this;Object.entries(this._nodes).forEach(function([u,h]){s(u)&&i.setNode(u,h)}),Object.values(this._edgeObjs).forEach(function(u){i.hasNode(u.v)&&i.hasNode(u.w)&&i.setEdge(u,a.edge(u))});var l={};function d(u){var h=a.parent(u);return h===void 0||i.hasNode(h)?(l[u]=h,h):h in l?l[h]:d(h)}return this._isCompound&&i.nodes().forEach(u=>i.setParent(u,d(u))),i}setDefaultEdgeLabel(s){return this._defaultEdgeLabelFn=s,typeof s!="function"&&(this._defaultEdgeLabelFn=()=>s),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(s,i){var a=this,l=arguments;return s.reduce(function(d,u){return l.length>1?a.setEdge(d,u,i):a.setEdge(d,u),u}),this}setEdge(){var s,i,a,l,d=!1,u=arguments[0];typeof u=="object"&&u!==null&&"v"in u?(s=u.v,i=u.w,a=u.name,arguments.length===2&&(l=arguments[1],d=!0)):(s=u,i=arguments[1],a=arguments[3],arguments.length>2&&(l=arguments[2],d=!0)),s=""+s,i=""+i,a!==void 0&&(a=""+a);var h=o(this._isDirected,s,i,a);if(Object.hasOwn(this._edgeLabels,h))return d&&(this._edgeLabels[h]=l),this;if(a!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(s),this.setNode(i),this._edgeLabels[h]=d?l:this._defaultEdgeLabelFn(s,i,a);var f=function(m,_,g,p){var b=""+_,x=""+g;if(!m&&b>x){var y=b;b=x,x=y}var v={v:b,w:x};return p&&(v.name=p),v}(this._isDirected,s,i,a);return s=f.v,i=f.w,Object.freeze(f),this._edgeObjs[h]=f,e(this._preds[i],s),e(this._sucs[s],i),this._in[i][h]=f,this._out[s][h]=f,this._edgeCount++,this}edge(s,i,a){var l=arguments.length===1?r(this._isDirected,arguments[0]):o(this._isDirected,s,i,a);return this._edgeLabels[l]}edgeAsObj(){const s=this.edge(...arguments);return typeof s!="object"?{label:s}:s}hasEdge(s,i,a){var l=arguments.length===1?r(this._isDirected,arguments[0]):o(this._isDirected,s,i,a);return Object.hasOwn(this._edgeLabels,l)}removeEdge(s,i,a){var l=arguments.length===1?r(this._isDirected,arguments[0]):o(this._isDirected,s,i,a),d=this._edgeObjs[l];return d&&(s=d.v,i=d.w,delete this._edgeLabels[l],delete this._edgeObjs[l],n(this._preds[i],s),n(this._sucs[s],i),delete this._in[i][l],delete this._out[s][l],this._edgeCount--),this}inEdges(s,i){var a=this._in[s];if(a){var l=Object.values(a);return i?l.filter(d=>d.v===i):l}}outEdges(s,i){var a=this._out[s];if(a){var l=Object.values(a);return i?l.filter(d=>d.w===i):l}}nodeEdges(s,i){var a=this.inEdges(s,i);if(a)return a.concat(this.outEdges(s,i))}},jf}function RL(){return mk?fk:(mk=1,fk={Graph:cm(),version:hk?uk:(hk=1,uk="2.2.4")})}function PL(){if(pk)return Ef;pk=1;var t=cm();function e(o){return o.nodes().map(function(r){var s=o.node(r),i=o.parent(r),a={v:r};return s!==void 0&&(a.value=s),i!==void 0&&(a.parent=i),a})}function n(o){return o.edges().map(function(r){var s=o.edge(r),i={v:r.v,w:r.w};return r.name!==void 0&&(i.name=r.name),s!==void 0&&(i.value=s),i})}return Ef={write:function(o){var r={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:e(o),edges:n(o)};return o.graph()!==void 0&&(r.value=structuredClone(o.graph())),r},read:function(o){var r=new t(o.options).setGraph(o.value);return o.nodes.forEach(function(s){r.setNode(s.v,s.value),s.parent&&r.setParent(s.v,s.parent)}),o.edges.forEach(function(s){r.setEdge({v:s.v,w:s.w,name:s.name},s.value)}),r}},Ef}function LL(){return gk||(gk=1,If=function(t){var e,n={},o=[];function r(s){Object.hasOwn(n,s)||(n[s]=!0,e.push(s),t.successors(s).forEach(r),t.predecessors(s).forEach(r))}return t.nodes().forEach(function(s){e=[],r(s),e.length&&o.push(e)}),o}),If}function m3(){return _k?Af:(_k=1,Af=class{constructor(){te(this,"_arr",[]);te(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,e){var n=this._keyIndices;if(t=String(t),!Object.hasOwn(n,t)){var o=this._arr,r=o.length;return n[t]=r,o.push({key:t,priority:e}),this._decrease(r),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)}_heapify(t){var e=this._arr,n=2*t,o=n+1,r=t;n<e.length&&(r=e[n].priority<e[r].priority?n:r,o<e.length&&(r=e[o].priority<e[r].priority?o:r),r!==t&&(this._swap(t,r),this._heapify(r)))}_decrease(t){for(var e,n=this._arr,o=n[t].priority;t!==0&&!(n[e=t>>1].priority<o);)this._swap(t,e),t=e}_swap(t,e){var n=this._arr,o=this._keyIndices,r=n[t],s=n[e];n[t]=s,n[e]=r,o[s.key]=t,o[r.key]=e}},Af)}function p3(){if(bk)return Tf;bk=1;var t=m3();Tf=function(n,o,r,s){return function(i,a,l,d){var u,h,f={},m=new t,_=function(g){var p=g.v!==u?g.v:g.w,b=f[p],x=l(g),y=h.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+x);y<b.distance&&(b.distance=y,b.predecessor=u,m.decrease(p,y))};for(i.nodes().forEach(function(g){var p=g===a?0:Number.POSITIVE_INFINITY;f[g]={distance:p},m.add(g,p)});m.size()>0&&(u=m.removeMin(),(h=f[u]).distance!==Number.POSITIVE_INFINITY);)d(u).forEach(_);return f}(n,String(o),r||e,s||function(i){return n.outEdges(i)})};var e=()=>1;return Tf}function FL(){if(xk)return Mf;xk=1;var t=p3();return Mf=function(e,n,o){return e.nodes().reduce(function(r,s){return r[s]=t(e,s,n,o),r},{})},Mf}function g3(){return yk||(yk=1,Of=function(t){var e=0,n=[],o={},r=[];function s(i){var a=o[i]={onStack:!0,lowlink:e,index:e++};if(n.push(i),t.successors(i).forEach(function(u){Object.hasOwn(o,u)?o[u].onStack&&(a.lowlink=Math.min(a.lowlink,o[u].index)):(s(u),a.lowlink=Math.min(a.lowlink,o[u].lowlink))}),a.lowlink===a.index){var l,d=[];do l=n.pop(),o[l].onStack=!1,d.push(l);while(i!==l);r.push(d)}}return t.nodes().forEach(function(i){Object.hasOwn(o,i)||s(i)}),r}),Of}function zL(){if(wk)return Df;wk=1;var t=g3();return Df=function(e){return t(e).filter(function(n){return n.length>1||n.length===1&&e.hasEdge(n[0],n[0])})},Df}function BL(){if(vk)return Rf;vk=1,Rf=function(e,n,o){return function(r,s,i){var a={},l=r.nodes();return l.forEach(function(d){a[d]={},a[d][d]={distance:0},l.forEach(function(u){d!==u&&(a[d][u]={distance:Number.POSITIVE_INFINITY})}),i(d).forEach(function(u){var h=u.v===d?u.w:u.v,f=s(u);a[d][h]={distance:f,predecessor:d}})}),l.forEach(function(d){var u=a[d];l.forEach(function(h){var f=a[h];l.forEach(function(m){var _=f[d],g=u[m],p=f[m],b=_.distance+g.distance;b<p.distance&&(p.distance=b,p.predecessor=g.predecessor)})})}),a}(e,n||t,o||function(r){return e.outEdges(r)})};var t=()=>1;return Rf}function _3(){if(kk)return Pf;function t(n){var o={},r={},s=[];if(n.sinks().forEach(function i(a){if(Object.hasOwn(r,a))throw new e;Object.hasOwn(o,a)||(r[a]=!0,o[a]=!0,n.predecessors(a).forEach(i),delete r[a],s.push(a))}),Object.keys(o).length!==n.nodeCount())throw new e;return s}kk=1;class e extends Error{constructor(){super(...arguments)}}return Pf=t,t.CycleException=e,Pf}function UL(){if(Sk)return Lf;Sk=1;var t=_3();return Lf=function(e){try{t(e)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0},Lf}function b3(){if(Ck)return Ff;function t(o,r,s,i){for(var a=[[o,!1]];a.length>0;){var l=a.pop();l[1]?i.push(l[0]):Object.hasOwn(s,l[0])||(s[l[0]]=!0,a.push([l[0],!0]),n(r(l[0]),d=>a.push([d,!1])))}}function e(o,r,s,i){for(var a=[o];a.length>0;){var l=a.pop();Object.hasOwn(s,l)||(s[l]=!0,i.push(l),n(r(l),d=>a.push(d)))}}function n(o,r){for(var s=o.length;s--;)r(o[s],s,o);return o}return Ck=1,Ff=function(o,r,s){Array.isArray(r)||(r=[r]);var i=o.isDirected()?u=>o.successors(u):u=>o.neighbors(u),a=s==="post"?t:e,l=[],d={};return r.forEach(u=>{if(!o.hasNode(u))throw new Error("Graph does not have node: "+u);a(u,i,d,l)}),l},Ff}function VL(){if(Nk)return zf;Nk=1;var t=b3();return zf=function(e,n){return t(e,n,"post")},zf}function $L(){if(jk)return Bf;jk=1;var t=b3();return Bf=function(e,n){return t(e,n,"pre")},Bf}function HL(){if(Ek)return Uf;Ek=1;var t=cm(),e=m3();return Uf=function(n,o){var r,s=new t,i={},a=new e;function l(u){var h=u.v===r?u.w:u.v,f=a.priority(h);if(f!==void 0){var m=o(u);m<f&&(i[h]=r,a.decrease(h,m))}}if(n.nodeCount()===0)return s;n.nodes().forEach(function(u){a.add(u,Number.POSITIVE_INFINITY),s.setNode(u)}),a.decrease(n.nodes()[0],0);for(var d=!1;a.size()>0;){if(r=a.removeMin(),Object.hasOwn(i,r))s.setEdge(r,i[r]);else{if(d)throw new Error("Input graph is not connected: "+n);d=!0}n.nodeEdges(r).forEach(l)}return s},Uf}function Kn(){if(Mk)return Tk;Mk=1;var t=RL();return Tk={Graph:t.Graph,json:PL(),alg:Ak?Ik:(Ak=1,Ik={components:LL(),dijkstra:p3(),dijkstraAll:FL(),findCycles:zL(),floydWarshall:BL(),isAcyclic:UL(),postorder:VL(),preorder:$L(),prim:HL(),tarjan:g3(),topsort:_3()}),version:t.version}}function WL(){if(Rk)return Vf;Rk=1;let t=Kn().Graph,e=function(){if(Dk)return Ok;function s(a){a._prev._next=a._next,a._next._prev=a._prev,delete a._next,delete a._prev}function i(a,l){if(a!=="_next"&&a!=="_prev")return l}return Dk=1,Ok=class{constructor(){let a={};a._next=a._prev=a,this._sentinel=a}dequeue(){let a=this._sentinel,l=a._prev;if(l!==a)return s(l),l}enqueue(a){let l=this._sentinel;a._prev&&a._next&&s(a),a._next=l._next,l._next._prev=a,l._next=a,a._prev=l}toString(){let a=[],l=this._sentinel,d=l._prev;for(;d!==l;)a.push(JSON.stringify(d,i)),d=d._prev;return"["+a.join(", ")+"]"}}}();Vf=function(s,i){if(s.nodeCount()<=1)return[];let a=function(l,d){let u=new t,h=0,f=0;l.nodes().forEach(g=>{u.setNode(g,{v:g,in:0,out:0})}),l.edges().forEach(g=>{let p=u.edge(g.v,g.w)||0,b=d(g),x=p+b;u.setEdge(g.v,g.w,x),f=Math.max(f,u.node(g.v).out+=b),h=Math.max(h,u.node(g.w).in+=b)});let m=function(g){const p=[];for(let b=0;b<g;b++)p.push(b);return p}(f+h+3).map(()=>new e),_=h+1;return u.nodes().forEach(g=>{r(m,_,u.node(g))}),{graph:u,buckets:m,zeroIdx:_}}(s,i||n);return function(l,d,u){let h,f=[],m=d[d.length-1],_=d[0];for(;l.nodeCount();){for(;h=_.dequeue();)o(l,d,u,h);for(;h=m.dequeue();)o(l,d,u,h);if(l.nodeCount()){for(let g=d.length-2;g>0;--g)if(h=d[g].dequeue(),h){f=f.concat(o(l,d,u,h,!0));break}}}return f}(a.graph,a.buckets,a.zeroIdx).flatMap(l=>s.outEdges(l.v,l.w))};let n=()=>1;function o(s,i,a,l,d){let u=d?[]:void 0;return s.inEdges(l.v).forEach(h=>{let f=s.edge(h),m=s.node(h.v);d&&u.push({v:h.v,w:h.w}),m.out-=f,r(i,a,m)}),s.outEdges(l.v).forEach(h=>{let f=s.edge(h),m=h.w,_=s.node(m);_.in-=f,r(i,a,_)}),s.removeNode(l.v),u}function r(s,i,a){a.out?a.in?s[a.out-a.in+i].enqueue(a):s[s.length-1].enqueue(a):s[0].enqueue(a)}return Vf}function Lt(){if(Pk)return $f;Pk=1;let t=Kn().Graph;function e(d,u,h,f){for(var m=f;d.hasNode(m);)m=i(f);return h.dummy=u,d.setNode(m,h),m}$f={addBorderNode:function(d,u,h,f){let m={width:0,height:0};return arguments.length>=4&&(m.rank=h,m.order=f),e(d,"border",m,u)},addDummyNode:e,applyWithChunking:o,asNonCompoundGraph:function(d){let u=new t({multigraph:d.isMultigraph()}).setGraph(d.graph());return d.nodes().forEach(h=>{d.children(h).length||u.setNode(h,d.node(h))}),d.edges().forEach(h=>{u.setEdge(h,d.edge(h))}),u},buildLayerMatrix:function(d){let u=a(r(d)+1).map(()=>[]);return d.nodes().forEach(h=>{let f=d.node(h),m=f.rank;m!==void 0&&(u[m][f.order]=h)}),u},intersectRect:function(d,u){let h,f,m=d.x,_=d.y,g=u.x-m,p=u.y-_,b=d.width/2,x=d.height/2;if(!g&&!p)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(p)*b>Math.abs(g)*x?(p<0&&(x=-x),h=x*g/p,f=x):(g<0&&(b=-b),h=b,f=b*p/g),{x:m+h,y:_+f}},mapValues:function(d,u){let h=u;return typeof u=="string"&&(h=f=>f[u]),Object.entries(d).reduce((f,[m,_])=>(f[m]=h(_,m),f),{})},maxRank:r,normalizeRanks:function(d){let u=d.nodes().map(f=>{let m=d.node(f).rank;return m===void 0?Number.MAX_VALUE:m}),h=o(Math.min,u);d.nodes().forEach(f=>{let m=d.node(f);Object.hasOwn(m,"rank")&&(m.rank-=h)})},notime:function(d,u){return u()},partition:function(d,u){let h={lhs:[],rhs:[]};return d.forEach(f=>{u(f)?h.lhs.push(f):h.rhs.push(f)}),h},pick:function(d,u){const h={};for(const f of u)d[f]!==void 0&&(h[f]=d[f]);return h},predecessorWeights:function(d){let u=d.nodes().map(h=>{let f={};return d.inEdges(h).forEach(m=>{f[m.v]=(f[m.v]||0)+d.edge(m).weight}),f});return l(d.nodes(),u)},range:a,removeEmptyRanks:function(d){let u=d.nodes().map(g=>d.node(g).rank),h=o(Math.min,u),f=[];d.nodes().forEach(g=>{let p=d.node(g).rank-h;f[p]||(f[p]=[]),f[p].push(g)});let m=0,_=d.graph().nodeRankFactor;Array.from(f).forEach((g,p)=>{g===void 0&&p%_!==0?--m:g!==void 0&&m&&g.forEach(b=>d.node(b).rank+=m)})},simplify:function(d){let u=new t().setGraph(d.graph());return d.nodes().forEach(h=>u.setNode(h,d.node(h))),d.edges().forEach(h=>{let f=u.edge(h.v,h.w)||{weight:0,minlen:1},m=d.edge(h);u.setEdge(h.v,h.w,{weight:f.weight+m.weight,minlen:Math.max(f.minlen,m.minlen)})}),u},successorWeights:function(d){let u=d.nodes().map(h=>{let f={};return d.outEdges(h).forEach(m=>{f[m.w]=(f[m.w]||0)+d.edge(m).weight}),f});return l(d.nodes(),u)},time:function(d,u){let h=Date.now();try{return u()}finally{console.log(d+" time: "+(Date.now()-h)+"ms")}},uniqueId:i,zipObject:l};const n=65535;function o(d,u){if(u.length>n){const h=function(f,m=n){const _=[];for(let g=0;g<f.length;g+=m){const p=f.slice(g,g+m);_.push(p)}return _}(u);return d.apply(null,h.map(f=>d.apply(null,f)))}return d.apply(null,u)}function r(d){const u=d.nodes().map(h=>{let f=d.node(h).rank;return f===void 0?Number.MIN_VALUE:f});return o(Math.max,u)}let s=0;function i(d){return d+""+ ++s}function a(d,u,h=1){u==null&&(u=d,d=0);let f=_=>_<u;h<0&&(f=_=>u<_);const m=[];for(let _=d;f(_);_+=h)m.push(_);return m}function l(d,u){return d.reduce((h,f,m)=>(h[f]=u[m],h),{})}return $f}function qL(){if(Lk)return Hf;Lk=1;let t=WL(),e=Lt().uniqueId;return Hf={run:function(n){(n.graph().acyclicer==="greedy"?t(n,function(r){return s=>r.edge(s).weight}(n)):function(r){let s=[],i={},a={};function l(d){Object.hasOwn(a,d)||(a[d]=!0,i[d]=!0,r.outEdges(d).forEach(u=>{Object.hasOwn(i,u.w)?s.push(u):l(u.w)}),delete i[d])}return r.nodes().forEach(l),s}(n)).forEach(r=>{let s=n.edge(r);n.removeEdge(r),s.forwardName=r.name,s.reversed=!0,n.setEdge(r.w,r.v,s,e("rev"))})},undo:function(n){n.edges().forEach(o=>{let r=n.edge(o);if(r.reversed){n.removeEdge(o);let s=r.forwardName;delete r.reversed,delete r.forwardName,n.setEdge(o.w,o.v,r,s)}})}},Hf}function GL(){if(Fk)return Wf;Fk=1;let t=Lt();return Wf={run:function(e){e.graph().dummyChains=[],e.edges().forEach(n=>function(o,r){let s,i,a,l=r.v,d=o.node(l).rank,u=r.w,h=o.node(u).rank,f=r.name,m=o.edge(r),_=m.labelRank;if(h!==d+1){for(o.removeEdge(r),a=0,++d;d<h;++a,++d)m.points=[],i={width:0,height:0,edgeLabel:m,edgeObj:r,rank:d},s=t.addDummyNode(o,"edge",i,"_d"),d===_&&(i.width=m.width,i.height=m.height,i.dummy="edge-label",i.labelpos=m.labelpos),o.setEdge(l,s,{weight:m.weight},f),a===0&&o.graph().dummyChains.push(s),l=s;o.setEdge(l,u,{weight:m.weight},f)}}(e,n))},undo:function(e){e.graph().dummyChains.forEach(n=>{let o,r=e.node(n),s=r.edgeLabel;for(e.setEdge(r.edgeObj,s);r.dummy;)o=e.successors(n)[0],e.removeNode(n),s.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height),n=o,r=e.node(n)})}},Wf}function nc(){if(zk)return qf;zk=1;const{applyWithChunking:t}=Lt();return qf={longestPath:function(e){var n={};e.sources().forEach(function o(r){var s=e.node(r);if(Object.hasOwn(n,r))return s.rank;n[r]=!0;let i=e.outEdges(r).map(l=>l==null?Number.POSITIVE_INFINITY:o(l.w)-e.edge(l).minlen);var a=t(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),s.rank=a})},slack:function(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen}},qf}function x3(){if(Bk)return Gf;Bk=1;var t=Kn().Graph,e=nc().slack;function n(s,i){return s.nodes().forEach(function a(l){i.nodeEdges(l).forEach(d=>{var u=d.v,h=l===u?d.w:u;s.hasNode(h)||e(i,d)||(s.setNode(h,{}),s.setEdge(l,h,{}),a(h))})}),s.nodeCount()}function o(s,i){return i.edges().reduce((a,l)=>{let d=Number.POSITIVE_INFINITY;return s.hasNode(l.v)!==s.hasNode(l.w)&&(d=e(i,l)),d<a[0]?[d,l]:a},[Number.POSITIVE_INFINITY,null])[1]}function r(s,i,a){s.nodes().forEach(l=>i.node(l).rank+=a)}return Gf=function(s){var i,a,l=new t({directed:!1}),d=s.nodes()[0],u=s.nodeCount();for(l.setNode(d,{});n(l,s)<u;)i=o(l,s),a=l.hasNode(i.v)?e(s,i):-e(s,i),r(l,s,a);return l},Gf}function YL(){if(Uk)return Yf;Uk=1;var t=x3(),e=nc().slack,n=nc().longestPath,o=Kn().alg.preorder,r=Kn().alg.postorder,s=Lt().simplify;function i(g){g=s(g),n(g);var p,b=t(g);for(d(b),a(b,g);p=h(b);)m(b,g,p,f(b,g,p))}function a(g,p){var b=r(g,g.nodes());(b=b.slice(0,b.length-1)).forEach(x=>function(y,v,C){var S=y.node(C),E=S.parent;y.edge(C,E).cutvalue=l(y,v,C)}(g,p,x))}function l(g,p,b){var x=g.node(b).parent,y=!0,v=p.edge(b,x),C=0;return v||(y=!1,v=p.edge(x,b)),C=v.weight,p.nodeEdges(b).forEach(S=>{var E,N,j=S.v===b,T=j?S.w:S.v;if(T!==x){var A=j===y,M=p.edge(S).weight;if(C+=A?M:-M,E=b,N=T,g.hasEdge(E,N)){var P=g.edge(b,T).cutvalue;C+=A?-P:P}}}),C}function d(g,p){arguments.length<2&&(p=g.nodes()[0]),u(g,{},1,p)}function u(g,p,b,x,y){var v=b,C=g.node(x);return p[x]=!0,g.neighbors(x).forEach(S=>{Object.hasOwn(p,S)||(b=u(g,p,b,S,x))}),C.low=v,C.lim=b++,y?C.parent=y:delete C.parent,b}function h(g){return g.edges().find(p=>g.edge(p).cutvalue<0)}function f(g,p,b){var x=b.v,y=b.w;p.hasEdge(x,y)||(x=b.w,y=b.v);var v=g.node(x),C=g.node(y),S=v,E=!1;v.lim>C.lim&&(S=C,E=!0);var N=p.edges().filter(j=>E===_(g,g.node(j.v),S)&&E!==_(g,g.node(j.w),S));return N.reduce((j,T)=>e(p,T)<e(p,j)?T:j)}function m(g,p,b,x){var y=b.v,v=b.w;g.removeEdge(y,v),g.setEdge(x.v,x.w,{}),d(g),a(g,p),function(C,S){var E=C.nodes().find(j=>!S.node(j).parent),N=o(C,E);(N=N.slice(1)).forEach(j=>{var T=C.node(j).parent,A=S.edge(j,T),M=!1;A||(A=S.edge(T,j),M=!0),S.node(j).rank=S.node(T).rank+(M?A.minlen:-A.minlen)})}(g,p)}function _(g,p,b){return b.low<=p.lim&&p.lim<=b.lim}return Yf=i,i.initLowLimValues=d,i.initCutValues=a,i.calcCutValue=l,i.leaveEdge=h,i.enterEdge=f,i.exchangeEdges=m,Yf}function JL(){if(Vk)return Jf;Vk=1;var t=nc().longestPath,e=x3(),n=YL();Jf=function(s){var i=s.graph().ranker;if(i instanceof Function)return i(s);switch(s.graph().ranker){case"network-simplex":default:r(s);break;case"tight-tree":(function(a){t(a),e(a)})(s);break;case"longest-path":o(s);case"none":}};var o=t;function r(s){n(s)}return Jf}function KL(){return $k||($k=1,Kf=function(t){let e=function(n){let o={},r=0;function s(i){let a=r;n.children(i).forEach(s),o[i]={low:a,lim:r++}}return n.children().forEach(s),o}(t);t.graph().dummyChains.forEach(n=>{let o=t.node(n),r=o.edgeObj,s=function(h,f,m,_){let g,p,b=[],x=[],y=Math.min(f[m].low,f[_].low),v=Math.max(f[m].lim,f[_].lim);g=m;do g=h.parent(g),b.push(g);while(g&&(f[g].low>y||v>f[g].lim));for(p=g,g=_;(g=h.parent(g))!==p;)x.push(g);return{path:b.concat(x.reverse()),lca:p}}(t,e,r.v,r.w),i=s.path,a=s.lca,l=0,d=i[l],u=!0;for(;n!==r.w;){if(o=t.node(n),u){for(;(d=i[l])!==a&&t.node(d).maxRank<o.rank;)l++;d===a&&(u=!1)}if(!u){for(;l<i.length-1&&t.node(d=i[l+1]).minRank<=o.rank;)l++;d=i[l]}t.setParent(n,d),n=t.successors(n)[0]}})}),Kf}function XL(){if(Hk)return Xf;Hk=1;let t=Lt();function e(n,o,r,s,i,a,l){let d=n.children(l);if(!d.length)return void(l!==o&&n.setEdge(o,l,{weight:0,minlen:r}));let u=t.addBorderNode(n,"_bt"),h=t.addBorderNode(n,"_bb"),f=n.node(l);n.setParent(u,l),f.borderTop=u,n.setParent(h,l),f.borderBottom=h,d.forEach(m=>{e(n,o,r,s,i,a,m);let _=n.node(m),g=_.borderTop?_.borderTop:m,p=_.borderBottom?_.borderBottom:m,b=_.borderTop?s:2*s,x=g!==p?1:i-a[l]+1;n.setEdge(u,g,{weight:b,minlen:x,nestingEdge:!0}),n.setEdge(p,h,{weight:b,minlen:x,nestingEdge:!0})}),n.parent(l)||n.setEdge(o,u,{weight:0,minlen:i+a[l]})}return Xf={run:function(n){let o=t.addDummyNode(n,"root",{},"_root"),r=function(d){var u={};function h(f,m){var _=d.children(f);_&&_.length&&_.forEach(g=>h(g,m+1)),u[f]=m}return d.children().forEach(f=>h(f,1)),u}(n),s=Object.values(r),i=t.applyWithChunking(Math.max,s)-1,a=2*i+1;n.graph().nestingRoot=o,n.edges().forEach(d=>n.edge(d).minlen*=a);let l=function(d){return d.edges().reduce((u,h)=>u+d.edge(h).weight,0)}(n)+1;n.children().forEach(d=>e(n,o,a,l,i,r,d)),n.graph().nodeRankFactor=a},cleanup:function(n){var o=n.graph();n.removeNode(o.nestingRoot),delete o.nestingRoot,n.edges().forEach(r=>{n.edge(r).nestingEdge&&n.removeEdge(r)})}},Xf}function ZL(){if(qk)return Qf;function t(r){r.nodes().forEach(s=>e(r.node(s))),r.edges().forEach(s=>e(r.edge(s)))}function e(r){let s=r.width;r.width=r.height,r.height=s}function n(r){r.y=-r.y}function o(r){let s=r.x;r.x=r.y,r.y=s}return qk=1,Qf={adjust:function(r){let s=r.graph().rankdir.toLowerCase();s!=="lr"&&s!=="rl"||t(r)},undo:function(r){let s=r.graph().rankdir.toLowerCase();s!=="bt"&&s!=="rl"||function(i){i.nodes().forEach(a=>n(i.node(a))),i.edges().forEach(a=>{let l=i.edge(a);l.points.forEach(n),Object.hasOwn(l,"y")&&n(l)})}(r),s!=="lr"&&s!=="rl"||(function(i){i.nodes().forEach(a=>o(i.node(a))),i.edges().forEach(a=>{let l=i.edge(a);l.points.forEach(o),Object.hasOwn(l,"x")&&o(l)})}(r),t(r))}},Qf}function QL(){if(Zk)return Xk;Zk=1;let t=Lt();return Xk=function(e,n){let o={};return e.forEach((r,s)=>{let i=o[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:s};r.barycenter!==void 0&&(i.barycenter=r.barycenter,i.weight=r.weight)}),n.edges().forEach(r=>{let s=o[r.v],i=o[r.w];s!==void 0&&i!==void 0&&(i.indegree++,s.out.push(o[r.w]))}),function(r){let s=[];function i(l){return d=>{d.merged||(d.barycenter===void 0||l.barycenter===void 0||d.barycenter>=l.barycenter)&&function(u,h){let f=0,m=0;u.weight&&(f+=u.barycenter*u.weight,m+=u.weight),h.weight&&(f+=h.barycenter*h.weight,m+=h.weight),u.vs=h.vs.concat(u.vs),u.barycenter=f/m,u.weight=m,u.i=Math.min(h.i,u.i),h.merged=!0}(l,d)}}function a(l){return d=>{d.in.push(l),--d.indegree===0&&r.push(d)}}for(;r.length;){let l=r.pop();s.push(l),l.in.reverse().forEach(i(l)),l.out.forEach(a(l))}return s.filter(l=>!l.merged).map(l=>t.pick(l,["vs","i","barycenter","weight"]))}(Object.values(o).filter(r=>!r.indegree))}}function eF(){if(t3)return nm;t3=1;let t=(Kk||(Kk=1,Jk=function(o,r=[]){return r.map(s=>{let i=o.inEdges(s);if(i.length){let a=i.reduce((l,d)=>{let u=o.edge(d),h=o.node(d.v);return{sum:l.sum+u.weight*h.order,weight:l.weight+u.weight}},{sum:0,weight:0});return{v:s,barycenter:a.sum/a.weight,weight:a.weight}}return{v:s}})}),Jk),e=QL(),n=function(){if(e3)return Qk;e3=1;let o=Lt();function r(s,i,a){let l;for(;i.length&&(l=i[i.length-1]).i<=a;)i.pop(),s.push(l.vs),a++;return a}return Qk=function(s,i){let a=o.partition(s,p=>Object.hasOwn(p,"barycenter")),l=a.lhs,d=a.rhs.sort((p,b)=>b.i-p.i),u=[],h=0,f=0,m=0;var _;l.sort((_=!!i,(p,b)=>p.barycenter<b.barycenter?-1:p.barycenter>b.barycenter?1:_?b.i-p.i:p.i-b.i)),m=r(u,d,m),l.forEach(p=>{m+=p.vs.length,u.push(p.vs),h+=p.barycenter*p.weight,f+=p.weight,m=r(u,d,m)});let g={vs:u.flat(!0)};return f&&(g.barycenter=h/f,g.weight=f),g}}();return nm=function o(r,s,i,a){let l=r.children(s),d=r.node(s),u=d?d.borderLeft:void 0,h=d?d.borderRight:void 0,f={};u&&(l=l.filter(p=>p!==u&&p!==h));let m=t(r,l);m.forEach(p=>{if(r.children(p.v).length){let y=o(r,p.v,i,a);f[p.v]=y,Object.hasOwn(y,"barycenter")&&(x=y,(b=p).barycenter!==void 0?(b.barycenter=(b.barycenter*b.weight+x.barycenter*x.weight)/(b.weight+x.weight),b.weight+=x.weight):(b.barycenter=x.barycenter,b.weight=x.weight))}var b,x});let _=e(m,i);(function(p,b){p.forEach(x=>{x.vs=x.vs.flatMap(y=>b[y]?b[y].vs:y)})})(_,f);let g=n(_,a);if(u&&(g.vs=[u,g.vs,h].flat(!0),r.predecessors(u).length)){let p=r.node(r.predecessors(u)[0]),b=r.node(r.predecessors(h)[0]);Object.hasOwn(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+p.order+b.order)/(g.weight+2),g.weight+=2}return g},nm}function tF(){if(n3)return om;n3=1;let t=Kn().Graph,e=Lt();return om=function(n,o,r){let s=function(a){for(var l;a.hasNode(l=e.uniqueId("_root")););return l}(n),i=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(a=>n.node(a));return n.nodes().forEach(a=>{let l=n.node(a),d=n.parent(a);(l.rank===o||l.minRank<=o&&o<=l.maxRank)&&(i.setNode(a),i.setParent(a,d||s),n[r](a).forEach(u=>{let h=u.v===a?u.w:u.v,f=i.edge(h,a),m=f!==void 0?f.weight:0;i.setEdge(h,a,{weight:n.edge(u).weight+m})}),Object.hasOwn(l,"minRank")&&i.setNode(a,{borderLeft:l.borderLeft[o],borderRight:l.borderRight[o]}))}),i},om}function nF(){if(s3)return rm;s3=1;let t=function(){if(Gk)return em;Gk=1;let u=Lt();return em=function(h){let f={},m=h.nodes().filter(x=>!h.children(x).length),_=m.map(x=>h.node(x).rank),g=u.applyWithChunking(Math.max,_),p=u.range(g+1).map(()=>[]);function b(x){if(f[x])return;f[x]=!0;let y=h.node(x);p[y.rank].push(x),h.successors(x).forEach(b)}return m.sort((x,y)=>h.node(x).rank-h.node(y).rank).forEach(b),p},em}(),e=function(){if(Yk)return tm;Yk=1;let u=Lt().zipObject;function h(f,m,_){let g=u(_,_.map((C,S)=>S)),p=m.flatMap(C=>f.outEdges(C).map(S=>({pos:g[S.w],weight:f.edge(S).weight})).sort((S,E)=>S.pos-E.pos)),b=1;for(;b<_.length;)b<<=1;let x=2*b-1;b-=1;let y=new Array(x).fill(0),v=0;return p.forEach(C=>{let S=C.pos+b;y[S]+=C.weight;let E=0;for(;S>0;)S%2&&(E+=y[S+1]),S=S-1>>1,y[S]+=C.weight;v+=C.weight*E}),v}return tm=function(f,m){let _=0;for(let g=1;g<m.length;++g)_+=h(f,m[g-1],m[g]);return _},tm}(),n=eF(),o=tF(),r=(r3||(r3=1,o3=function(u,h,f){let m,_={};f.forEach(g=>{let p,b,x=u.parent(g);for(;x;){if(p=u.parent(x),p?(b=_[p],_[p]=x):(b=m,m=x),b&&b!==x)return void h.setEdge(b,x);x=p}})}),o3),s=Kn().Graph,i=Lt();function a(u,h,f){return h.map(function(m){return o(u,m,f)})}function l(u,h){let f=new s;u.forEach(function(m){let _=m.graph().root,g=n(m,_,f,h);g.vs.forEach((p,b)=>m.node(p).order=b),r(m,f,g.vs)})}function d(u,h){Object.values(h).forEach(f=>f.forEach((m,_)=>u.node(m).order=_))}return rm=function u(h,f){if(f&&typeof f.customOrder=="function")return void f.customOrder(h,u);let m=i.maxRank(h),_=a(h,i.range(1,m+1),"inEdges"),g=a(h,i.range(m-1,-1,-1),"outEdges"),p=t(h);if(d(h,p),f&&f.disableOptimalOrderHeuristic)return;let b,x=Number.POSITIVE_INFINITY;for(let y=0,v=0;v<4;++y,++v){l(y%2?_:g,y%4>=2),p=i.buildLayerMatrix(h);let C=e(h,p);C<x&&(v=0,b=Object.assign({},p),x=C)}d(h,b)},rm}function oF(){if(i3)return sm;i3=1;let t=Kn().Graph,e=Lt();function n(h,f){let m={};return f.length&&f.reduce(function(_,g){let p=0,b=0,x=_.length,y=g[g.length-1];return g.forEach((v,C)=>{let S=function(N,j){if(N.node(j).dummy)return N.predecessors(j).find(T=>N.node(T).dummy)}(h,v),E=S?h.node(S).order:x;(S||v===y)&&(g.slice(b,C+1).forEach(N=>{h.predecessors(N).forEach(j=>{let T=h.node(j),A=T.order;!(A<p||E<A)||T.dummy&&h.node(N).dummy||r(m,j,N)})}),b=C+1,p=E)}),g}),m}function o(h,f){let m={};function _(g,p,b,x,y){let v;e.range(p,b).forEach(C=>{v=g[C],h.node(v).dummy&&h.predecessors(v).forEach(S=>{let E=h.node(S);E.dummy&&(E.order<x||E.order>y)&&r(m,S,v)})})}return f.length&&f.reduce(function(g,p){let b,x=-1,y=0;return p.forEach((v,C)=>{if(h.node(v).dummy==="border"){let S=h.predecessors(v);S.length&&(b=h.node(S[0]).order,_(p,y,C,x,b),y=C,x=b)}_(p,y,p.length,b,g.length)}),p}),m}function r(h,f,m){if(f>m){let g=f;f=m,m=g}let _=h[f];_||(h[f]=_={}),_[m]=!0}function s(h,f,m){if(f>m){let _=f;f=m,m=_}return!!h[f]&&Object.hasOwn(h[f],m)}function i(h,f,m,_){let g={},p={},b={};return f.forEach(x=>{x.forEach((y,v)=>{g[y]=y,p[y]=y,b[y]=v})}),f.forEach(x=>{let y=-1;x.forEach(v=>{let C=_(v);if(C.length){C=C.sort((E,N)=>b[E]-b[N]);let S=(C.length-1)/2;for(let E=Math.floor(S),N=Math.ceil(S);E<=N;++E){let j=C[E];p[v]===v&&y<b[j]&&!s(m,v,j)&&(p[j]=v,p[v]=g[v]=g[j],y=b[j])}}})}),{root:g,align:p}}function a(h,f,m,_,g){let p={},b=function(v,C,S,E){let N=new t,j=v.graph(),T=function(A,M,P){return(R,L,B)=>{let U,D=R.node(L),k=R.node(B),$=0;if($+=D.width/2,Object.hasOwn(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":U=-D.width/2;break;case"r":U=D.width/2}if(U&&($+=P?U:-U),U=0,$+=(D.dummy?M:A)/2,$+=(k.dummy?M:A)/2,$+=k.width/2,Object.hasOwn(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":U=k.width/2;break;case"r":U=-k.width/2}return U&&($+=P?U:-U),U=0,$}}(j.nodesep,j.edgesep,E);return C.forEach(A=>{let M;A.forEach(P=>{let R=S[P];if(N.setNode(R),M){var L=S[M],B=N.edge(L,R);N.setEdge(L,R,Math.max(T(v,P,M),B||0))}M=P})}),N}(h,f,m,g),x=g?"borderLeft":"borderRight";function y(v,C){let S=b.nodes(),E=S.pop(),N={};for(;E;)N[E]?v(E):(N[E]=!0,S.push(E),S=S.concat(C(E))),E=S.pop()}return y(function(v){p[v]=b.inEdges(v).reduce((C,S)=>Math.max(C,p[S.v]+b.edge(S)),0)},b.predecessors.bind(b)),y(function(v){let C=b.outEdges(v).reduce((E,N)=>Math.min(E,p[N.w]-b.edge(N)),Number.POSITIVE_INFINITY),S=h.node(v);C!==Number.POSITIVE_INFINITY&&S.borderType!==x&&(p[v]=Math.max(p[v],C))},b.successors.bind(b)),Object.keys(_).forEach(v=>p[v]=p[m[v]]),p}function l(h,f){return Object.values(f).reduce((m,_)=>{let g=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY;Object.entries(_).forEach(([x,y])=>{let v=function(C,S){return C.node(S).width}(h,x)/2;g=Math.max(y+v,g),p=Math.min(y-v,p)});const b=g-p;return b<m[0]&&(m=[b,_]),m},[Number.POSITIVE_INFINITY,null])[1]}function d(h,f){let m=Object.values(f),_=e.applyWithChunking(Math.min,m),g=e.applyWithChunking(Math.max,m);["u","d"].forEach(p=>{["l","r"].forEach(b=>{let x=p+b,y=h[x];if(y===f)return;let v=Object.values(y),C=_-e.applyWithChunking(Math.min,v);b!=="l"&&(C=g-e.applyWithChunking(Math.max,v)),C&&(h[x]=e.mapValues(y,S=>S+C))})})}function u(h,f){return e.mapValues(h.ul,(m,_)=>{if(f)return h[f.toLowerCase()][_];{let g=Object.values(h).map(p=>p[_]).sort((p,b)=>p-b);return(g[1]+g[2])/2}})}return sm={positionX:function(h){let f,m=e.buildLayerMatrix(h),_=Object.assign(n(h,m),o(h,m)),g={};["u","d"].forEach(b=>{f=b==="u"?m:Object.values(m).reverse(),["l","r"].forEach(x=>{x==="r"&&(f=f.map(S=>Object.values(S).reverse()));let y=(b==="u"?h.predecessors:h.successors).bind(h),v=i(h,f,_,y),C=a(h,f,v.root,v.align,x==="r");x==="r"&&(C=e.mapValues(C,S=>-S)),g[b+x]=C})});let p=l(h,g);return d(g,p),u(g,h.graph().align)},findType1Conflicts:n,findType2Conflicts:o,addConflict:r,hasConflict:s,verticalAlignment:i,horizontalCompaction:a,alignCoordinates:d,findSmallestWidthAlignment:l,balance:u},sm}function rF(){if(a3)return im;a3=1;let t=Lt(),e=oF().positionX;return im=function(n){n=t.asNonCompoundGraph(n),function(o){let r=t.buildLayerMatrix(o),s=o.graph().ranksep,i=0;r.forEach(a=>{const l=a.reduce((d,u)=>{const h=o.node(u).height;return d>h?d:h},0);a.forEach(d=>o.node(d).y=i+l/2),i+=l+s})}(n),Object.entries(e(n)).forEach(([o,r])=>n.node(o).x=r)},im}function sF(){if(l3)return am;l3=1;let t=qL(),e=GL(),n=JL(),o=Lt().normalizeRanks,r=KL(),s=Lt().removeEmptyRanks,i=XL(),a=function(){if(Wk)return Zf;Wk=1;let E=Lt();function N(j,T,A,M,P,R){let L={width:0,height:0,rank:R,borderType:T},B=P[T][R-1],U=E.addDummyNode(j,"border",L,A);P[T][R]=U,j.setParent(U,M),B&&j.setEdge(B,U,{weight:1})}return Zf=function(j){j.children().forEach(function T(A){let M=j.children(A),P=j.node(A);if(M.length&&M.forEach(T),Object.hasOwn(P,"minRank")){P.borderLeft=[],P.borderRight=[];for(let R=P.minRank,L=P.maxRank+1;R<L;++R)N(j,"borderLeft","_bl",A,P,R),N(j,"borderRight","_br",A,P,R)}})},Zf}(),l=ZL(),d=nF(),u=rF(),h=Lt(),f=Kn().Graph;am=function(E,N){let j=N&&N.debugTiming?h.time:h.notime;j("layout",()=>{let T=j("  buildLayoutGraph",()=>function(A){let M=new f({multigraph:!0,compound:!0}),P=S(A.graph());return M.setGraph(Object.assign({},_,C(P,m),h.pick(P,g))),A.nodes().forEach(R=>{const L=C(S(A.node(R)),p);Object.keys(b).forEach(B=>{L[B]===void 0&&(L[B]=b[B])}),M.setNode(R,L),M.setParent(R,A.parent(R))}),A.edges().forEach(R=>{let L=S(A.edge(R));M.setEdge(R,Object.assign({},y,C(L,x),h.pick(L,v)))}),M}(E));j("  runLayout",()=>function(A,M,P){M("    makeSpaceForEdgeLabels",()=>function(R){let L=R.graph();L.ranksep/=2,R.edges().forEach(B=>{let U=R.edge(B);U.minlen*=2,U.labelpos.toLowerCase()!=="c"&&(L.rankdir==="TB"||L.rankdir==="BT"?U.width+=U.labeloffset:U.height+=U.labeloffset)})}(A)),M("    removeSelfEdges",()=>function(R){R.edges().forEach(L=>{if(L.v===L.w){var B=R.node(L.v);B.selfEdges||(B.selfEdges=[]),B.selfEdges.push({e:L,label:R.edge(L)}),R.removeEdge(L)}})}(A)),M("    acyclic",()=>t.run(A)),M("    nestingGraph.run",()=>i.run(A)),M("    rank",()=>n(h.asNonCompoundGraph(A))),M("    injectEdgeLabelProxies",()=>function(R){R.edges().forEach(L=>{let B=R.edge(L);if(B.width&&B.height){let U=R.node(L.v),D={rank:(R.node(L.w).rank-U.rank)/2+U.rank,e:L};h.addDummyNode(R,"edge-proxy",D,"_ep")}})}(A)),M("    removeEmptyRanks",()=>s(A)),M("    nestingGraph.cleanup",()=>i.cleanup(A)),M("    normalizeRanks",()=>o(A)),M("    assignRankMinMax",()=>function(R){let L=0;R.nodes().forEach(B=>{let U=R.node(B);U.borderTop&&(U.minRank=R.node(U.borderTop).rank,U.maxRank=R.node(U.borderBottom).rank,L=Math.max(L,U.maxRank))}),R.graph().maxRank=L}(A)),M("    removeEdgeLabelProxies",()=>function(R){R.nodes().forEach(L=>{let B=R.node(L);B.dummy==="edge-proxy"&&(R.edge(B.e).labelRank=B.rank,R.removeNode(L))})}(A)),M("    normalize.run",()=>e.run(A)),M("    parentDummyChains",()=>r(A)),M("    addBorderSegments",()=>a(A)),M("    order",()=>d(A,P)),M("    insertSelfEdges",()=>function(R){var L=h.buildLayerMatrix(R);L.forEach(B=>{var U=0;B.forEach((D,k)=>{var $=R.node(D);$.order=k+U,($.selfEdges||[]).forEach(I=>{h.addDummyNode(R,"selfedge",{width:I.label.width,height:I.label.height,rank:$.rank,order:k+ ++U,e:I.e,label:I.label},"_se")}),delete $.selfEdges})})}(A)),M("    adjustCoordinateSystem",()=>l.adjust(A)),M("    position",()=>u(A)),M("    positionSelfEdges",()=>function(R){R.nodes().forEach(L=>{var B=R.node(L);if(B.dummy==="selfedge"){var U=R.node(B.e.v),D=U.x+U.width/2,k=U.y,$=B.x-D,I=U.height/2;R.setEdge(B.e,B.label),R.removeNode(L),B.label.points=[{x:D+2*$/3,y:k-I},{x:D+5*$/6,y:k-I},{x:D+$,y:k},{x:D+5*$/6,y:k+I},{x:D+2*$/3,y:k+I}],B.label.x=B.x,B.label.y=B.y}})}(A)),M("    removeBorderNodes",()=>function(R){R.nodes().forEach(L=>{if(R.children(L).length){let B=R.node(L),U=R.node(B.borderTop),D=R.node(B.borderBottom),k=R.node(B.borderLeft[B.borderLeft.length-1]),$=R.node(B.borderRight[B.borderRight.length-1]);B.width=Math.abs($.x-k.x),B.height=Math.abs(D.y-U.y),B.x=k.x+B.width/2,B.y=U.y+B.height/2}}),R.nodes().forEach(L=>{R.node(L).dummy==="border"&&R.removeNode(L)})}(A)),M("    normalize.undo",()=>e.undo(A)),M("    fixupEdgeLabelCoords",()=>function(R){R.edges().forEach(L=>{let B=R.edge(L);if(Object.hasOwn(B,"x"))switch(B.labelpos!=="l"&&B.labelpos!=="r"||(B.width-=B.labeloffset),B.labelpos){case"l":B.x-=B.width/2+B.labeloffset;break;case"r":B.x+=B.width/2+B.labeloffset}})}(A)),M("    undoCoordinateSystem",()=>l.undo(A)),M("    translateGraph",()=>function(R){let L=Number.POSITIVE_INFINITY,B=0,U=Number.POSITIVE_INFINITY,D=0,k=R.graph(),$=k.marginx||0,I=k.marginy||0;function W(G){let q=G.x,Y=G.y,ee=G.width,oe=G.height;L=Math.min(L,q-ee/2),B=Math.max(B,q+ee/2),U=Math.min(U,Y-oe/2),D=Math.max(D,Y+oe/2)}R.nodes().forEach(G=>W(R.node(G))),R.edges().forEach(G=>{let q=R.edge(G);Object.hasOwn(q,"x")&&W(q)}),L-=$,U-=I,R.nodes().forEach(G=>{let q=R.node(G);q.x-=L,q.y-=U}),R.edges().forEach(G=>{let q=R.edge(G);q.points.forEach(Y=>{Y.x-=L,Y.y-=U}),Object.hasOwn(q,"x")&&(q.x-=L),Object.hasOwn(q,"y")&&(q.y-=U)}),k.width=B-L+$,k.height=D-U+I}(A)),M("    assignNodeIntersects",()=>function(R){R.edges().forEach(L=>{let B,U,D=R.edge(L),k=R.node(L.v),$=R.node(L.w);D.points?(B=D.points[0],U=D.points[D.points.length-1]):(D.points=[],B=$,U=k),D.points.unshift(h.intersectRect(k,B)),D.points.push(h.intersectRect($,U))})}(A)),M("    reversePoints",()=>function(R){R.edges().forEach(L=>{let B=R.edge(L);B.reversed&&B.points.reverse()})}(A)),M("    acyclic.undo",()=>t.undo(A))}(T,j,N)),j("  updateInputGraph",()=>function(A,M){A.nodes().forEach(P=>{let R=A.node(P),L=M.node(P);R&&(R.x=L.x,R.y=L.y,R.rank=L.rank,M.children(P).length&&(R.width=L.width,R.height=L.height))}),A.edges().forEach(P=>{let R=A.edge(P),L=M.edge(P);R.points=L.points,Object.hasOwn(L,"x")&&(R.x=L.x,R.y=L.y)}),A.graph().width=M.graph().width,A.graph().height=M.graph().height}(E,T))})};let m=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],p=["width","height","rank"],b={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],y={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v=["labelpos"];function C(E,N){return h.mapValues(h.pick(E,N),Number)}function S(E){var N={};return E&&Object.entries(E).forEach(([j,T])=>{typeof j=="string"&&(j=j.toLowerCase()),N[j]=T}),N}return am}function iF(){if(c3)return lm;c3=1;let t=Lt(),e=Kn().Graph;return lm={debugOrdering:function(n){let o=t.buildLayerMatrix(n),r=new e({compound:!0,multigraph:!0}).setGraph({});return n.nodes().forEach(s=>{r.setNode(s,{label:s}),r.setParent(s,"layer"+n.node(s).rank)}),n.edges().forEach(s=>r.setEdge(s.v,s.w,{},s.name)),o.forEach((s,i)=>{let a="layer"+i;r.setNode(a,{rank:"same"}),s.reduce((l,d)=>(r.setEdge(l,d,{style:"invis"}),d))}),r}},lm}var y3=f3?h3:(f3=1,h3={graphlib:Kn(),layout:sF(),debug:iF(),util:{time:Lt().time,notime:Lt().notime},version:u3?d3:(u3=1,d3="1.1.5")});const Yi=new y3.graphlib.Graph().setDefaultEdgeLabel(()=>({})),w3=({nodes:t,edges:e,direction:n})=>(Yi.setGraph({rankdir:n,nodesep:150,ranksep:200,ranker:"longest-path"}),e.forEach(o=>Yi.setEdge(o.source,o.target)),t.forEach(o=>Yi.setNode(o.id,{...o,width:o.width??0,height:o.height??0})),y3.layout(Yi),{nodes:t.map(o=>{const{x:r,y:s}=Yi.node(o.id);return{...o,position:{x:r,y:s}}}),edges:e}),v3=new class{createEdge(t,e){return{animated:!0,markerEnd:{type:ys.ArrowClosed},id:`${t}-${e}`,style:{strokeWidth:2},source:t,sourceHandle:"outputs",targetHandle:"inputs",target:e}}createNode(t,e){return{id:t,data:{atom:e,forceWidth:300},width:300,type:"custom",height:Sf(at.get(e).code.trim().split(`
`).length),position:{x:0,y:0}}}createElements(t,e,n,o){const r=[],s=[],i=new Set,a=new Set;for(const l of Object.values(n)){if(l.value==="marimo"&&l.name==="mo")continue;const{declaredBy:d,usedBy:u}=l;for(const h of d)for(const f of u){const m=`${h}-${f}`;a.has(m)||(a.add(m),i.add(h),i.add(f),s.push(this.createEdge(h,f)))}}for(const[l,d]of rp.zip(t,e)){o||r.push(this.createNode(l,d));const u=i.has(l),h=at.get(d).code.trim().startsWith("mo.md");!u&&h||r.push(this.createNode(l,d))}return{nodes:r,edges:s}}},aF=t=>{const e=K.c(43),{cellIds:n,variables:o,cellAtoms:r,children:s,layoutDirection:i,settings:a}=t;let l;e[0]!==r||e[1]!==n||e[2]!==i||e[3]!==a.hidePureMarkdown||e[4]!==o?(l=()=>{let k=v3.createElements(n,r,o,a.hidePureMarkdown);return k=w3({nodes:k.nodes,edges:k.edges,direction:i}),k},e[0]=r,e[1]=n,e[2]=i,e[3]=a.hidePureMarkdown,e[4]=o,e[5]=l):l=e[5];const[d]=O.useState(l),[u,h,f]=ek(d.nodes),[m,_,g]=tk(d.edges),p=Wi();let b;e[6]!==i||e[7]!==_||e[8]!==h?(b=k=>{const $=w3({nodes:k.nodes,edges:k.edges,direction:i});h($.nodes),_($.edges)},e[6]=i,e[7]=_,e[8]=h,e[9]=b):b=e[9];const x=qe(b);let y,v;e[10]!==r||e[11]!==n||e[12]!==a.hidePureMarkdown||e[13]!==x||e[14]!==o?(y=()=>{x(v3.createElements(n,r,o,a.hidePureMarkdown))},v=[n,o,r,x,a.hidePureMarkdown],e[10]=r,e[11]=n,e[12]=a.hidePureMarkdown,e[13]=x,e[14]=o,e[15]=y,e[16]=v):(y=e[15],v=e[16]),O.useEffect(y,v);const[C,S]=O.useState();let E;lk(),e[17]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{S(void 0)},e[17]=E):E=e[17];const N=E;let j,T,A,M,P,R,L,B,U,D;return e[18]===Symbol.for("react.memo_cache_sentinel")?(j={minZoom:.5,maxZoom:1.5},T=(k,$)=>{S({type:"node",id:$.id})},A=(k,$)=>{const{source:I,target:W}=$;S({type:"edge",source:I,target:W})},e[18]=j,e[19]=T,e[20]=A):(j=e[18],T=e[19],A=e[20]),e[21]===Symbol.for("react.memo_cache_sentinel")?(M=c.jsx(jL,{color:"#ccc",variant:Un.Dots}),e[21]=M):M=e[21],e[22]!==p||e[23]!==u?(P=()=>{const k=at.get(Y$);if(k){const $=u.find(I=>I.id===k);$&&(p.fitView({padding:1,duration:600,nodes:[$]}),S({type:"node",id:k}))}},e[22]=p,e[23]=u,e[24]=P):P=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsx(Vp,{className:"size-4"}),e[25]=R):R=e[25],e[26]!==P?(L=c.jsx(wL,{position:"bottom-right",showInteractive:!1,children:c.jsx(Te,{content:"Jump to focused cell",delayDuration:200,side:"left",asChild:!1,children:c.jsx(Es,{onMouseDown:Qn.preventFocus,onClick:P,children:R})})}),e[26]=P,e[27]=L):L=e[27],e[28]!==m||e[29]!==C||e[30]!==o?(B=c.jsx(tc,{selection:C,variables:o,edges:m,onClearSelection:N}),e[28]=m,e[29]=C,e[30]=o,e[31]=B):B=e[31],e[32]!==s||e[33]!==m||e[34]!==u||e[35]!==g||e[36]!==f||e[37]!==L||e[38]!==B?(U=c.jsxs(kf,{nodes:u,edges:m,nodeTypes:ik,minZoom:.2,fitViewOptions:j,onNodeClick:T,onEdgeClick:A,onNodeDoubleClick:lF,fitView:!0,onNodesChange:f,onEdgesChange:g,zoomOnDoubleClick:!1,nodesConnectable:!1,children:[M,L,B,s]}),e[32]=s,e[33]=m,e[34]=u,e[35]=g,e[36]=f,e[37]=L,e[38]=B,e[39]=U):U=e[39],e[40]!==i||e[41]!==U?(D=c.jsx(rk,{value:i,children:U}),e[40]=i,e[41]=U,e[42]=D):D=e[42],D};function lF(t,e){jS(e.id,"focus")}const cF=zt("_minimap_"),dF=zt({hidePureMarkdown:!0}),uF=t=>{const e=K.c(11),[n,o]=Qt(cF),[r,s]=Qt(dF);let i;e[0]!==n||e[1]!==t||e[2]!==o||e[3]!==s||e[4]!==r?(i=()=>n==="_minimap_"?c.jsx(ML,{...t,children:c.jsx(Nf,{settings:r,onSettingsChange:s,view:n,onChange:o})}):c.jsx(aF,{...t,settings:r,layoutDirection:n,children:c.jsx(Nf,{settings:r,onSettingsChange:s,view:n,onChange:o})}),e[0]=n,e[1]=t,e[2]=o,e[3]=s,e[4]=r,e[5]=i):i=e[5];const a=i;let l,d;return e[6]!==a?(l=a(),e[6]=a,e[7]=l):l=e[7],e[8]!==n||e[9]!==l?(d=c.jsx(vf,{children:l},n),e[8]=n,e[9]=l,e[10]=d):d=e[10],d},hF=()=>{const t=K.c(5),e=ES(),n=Zc(),[o]=J$();let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=Ne("w-full h-full flex-1 mx-auto -mb-4 relative"),t[0]=r):r=t[0],t[1]!==n.inOrderIds||t[2]!==o||t[3]!==e?(s=c.jsx("div",{className:r,children:c.jsx(uF,{cellAtoms:o,variables:e,cellIds:n.inOrderIds})}),t[1]=n.inOrderIds,t[2]=o,t[3]=e,t[4]=s):s=t[4],s},fF=t=>{const e=K.c(4),{isOpen:n,children:o}=t,[r,s]=X.useState(!1);let i,a;return e[0]!==r||e[1]!==n?(i=()=>{n&&!r&&s(!0)},a=[n,r],e[0]=r,e[1]=n,e[2]=i,e[3]=a):(i=e[2],a=e[3]),X.useEffect(i,a),r?o:null},mF=t=>{const e=K.c(8),{variableName:n,className:o}=t;let r;e[0]!==n?(r=()=>{const l=function(u){const h=at.get(IS)[u];if(h)return h.declaredBy[0]}(n);if(!l)return;const d=Qi(l);d&&ip(d,n)},e[0]=n,e[1]=r):r=e[1];const s=r;let i,a;return e[2]!==o?(i=Ne("text-link opacity-80 hover:opacity-100 hover:underline",o),e[2]=o,e[3]=i):i=e[3],e[4]!==s||e[5]!==i||e[6]!==n?(a=c.jsx("button",{type:"button",onClick:s,className:i,children:n}),e[4]=s,e[5]=i,e[6]=n,e[7]=a):a=e[7],a},pF=zt(t=>{const e=t(K$),n=t(IS),o=t(qc);return ka(e,r=>{if(!r.variable_name)return-1;const s=Object.values(n).find(a=>a.name===r.variable_name);if(!s)return 0;const i=o.inOrderIds.indexOf(s.declaredBy[0]);return i===-1?0:i})}),gF=zt(t=>{const e=new Map(t(X$));for(const n of AS){const o=e.get(n);o&&o.databases.length===0&&e.delete(n)}return ka([...e.values()],n=>AS.has(n.name)?1:0)}),_F=()=>{const t=K.c(32),[e,n]=X.useState(""),o=Ot(TS),r=Le(pF),s=Le(gF);if(r.length===0&&s.length===0){let b;return t[0]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(yn,{title:"No tables found",description:"Any datasets/dataframes in the global scope will be shown here.",action:c.jsx(Vg,{children:c.jsxs(Ae,{variant:"outline",size:"sm",children:["Add database or catalog",c.jsx(br,{className:"h-4 w-4 ml-2"})]})}),icon:c.jsx(lr,{})}),t[0]=b):b=t[0],b}const i=!!e.trim();let a,l,d,u,h,f,m,_,g,p;if(t[1]!==o?(a=b=>{o(b.length>0),n(b)},t[1]=o,t[2]=a):a=t[2],t[3]!==e||t[4]!==a?(l=c.jsx(na,{placeholder:"Search tables...",className:"h-6 m-1",value:e,onValueChange:a,rootClassName:"flex-1 border-r"}),t[3]=e,t[4]=a,t[5]=l):l=t[5],t[6]!==i?(d=i&&c.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:()=>n(""),children:c.jsx(eo,{className:"h-4 w-4"})}),t[6]=i,t[7]=d):d=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(Vg,{children:c.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:c.jsx(br,{className:"h-4 w-4"})})}),t[8]=u):u=t[8],t[9]!==l||t[10]!==d?(h=c.jsxs("div",{className:"flex items-center w-full",children:[l,d,u]}),t[9]=l,t[10]=d,t[11]=h):h=t[11],t[12]!==s||t[13]!==i||t[14]!==e){let b;t[16]!==i||t[17]!==e?(b=x=>c.jsx(bF,{connection:x,hasChildren:x.databases.length>0,children:x.databases.map(y=>c.jsx(xF,{engineName:x.name,database:y,hasSearch:i,children:c.jsx(yF,{schemas:y.schemas,defaultSchema:x.default_schema,defaultDatabase:x.default_database,engineName:x.name,databaseName:y.name,hasSearch:i,searchValue:e})},y.name))},x.name),t[16]=i,t[17]=e,t[18]=b):b=t[18],f=s.map(b),t[12]=s,t[13]=i,t[14]=e,t[15]=f}else f=t[15];return t[19]!==s.length||t[20]!==r.length?(m=s.length>0&&r.length>0&&c.jsxs(MS,{children:[c.jsx(hc,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-xs",children:"Python"})]}),t[19]=s.length,t[20]=r.length,t[21]=m):m=t[21],t[22]!==e||t[23]!==r?(_=r.length>0&&c.jsx(k3,{tables:r,searchValue:e}),t[22]=e,t[23]=r,t[24]=_):_=t[24],t[25]!==f||t[26]!==m||t[27]!==_?(g=c.jsxs(Jm,{className:"flex flex-col",children:[f,m,_]}),t[25]=f,t[26]=m,t[27]=_,t[28]=g):g=t[28],t[29]!==h||t[30]!==g?(p=c.jsxs(Ec,{className:"border-b bg-background rounded-none h-full pb-10 overflow-auto outline-none",shouldFilter:!1,children:[h,g]}),t[29]=h,t[30]=g,t[31]=p):p=t[31],p},bF=t=>{const e=K.c(25),{connection:n,children:o,hasChildren:r}=t,s=n.name===Z$,i=s?"In-Memory":n.name,[a,l]=X.useState(!1);let d;e[0]!==n.name?(d=async()=>{l(!0),await eH({engine:n.name}),setTimeout(()=>l(!1),500)},e[0]=n.name,e[1]=d):d=e[1];const u=d;let h,f,m;e[2]!==n.dialect?(h=c.jsx(y4,{className:"h-4 w-4 text-muted-foreground",name:n.dialect}),e[2]=n.dialect,e[3]=h):h=e[3],e[4]!==n.dialect?(f=Q$(n.dialect),e[4]=n.dialect,e[5]=f):f=e[5],e[6]!==f?(m=c.jsx("span",{className:"text-xs",children:f}),e[6]=f,e[7]=m):m=e[7];const _=i;let g,p,b,x,y;return e[8]!==_?(g=c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",c.jsx(mF,{variableName:_}),")"]}),e[8]=_,e[9]=g):g=e[9],e[10]!==u||e[11]!==s||e[12]!==a?(p=!s&&c.jsx(Te,{content:"Refresh connection",children:c.jsx(Ae,{variant:"ghost",size:"icon",className:"ml-auto hover:bg-transparent hover:shadow-none",onClick:u,children:c.jsx(Bc,{className:Ne("h-4 w-4 text-muted-foreground hover:text-foreground",a&&"animate-[spin_0.5s]")})})}),e[10]=u,e[11]=s,e[12]=a,e[13]=p):p=e[13],e[14]!==h||e[15]!==m||e[16]!==g||e[17]!==p?(b=c.jsxs(MS,{children:[h,m,g,p]}),e[14]=h,e[15]=m,e[16]=g,e[17]=p,e[18]=b):b=e[18],e[19]!==o||e[20]!==r?(x=r?o:c.jsx(Qc,{content:"No databases available",className:"pl-2"}),e[19]=o,e[20]=r,e[21]=x):x=e[21],e[22]!==b||e[23]!==x?(y=c.jsxs(c.Fragment,{children:[b,x]}),e[22]=b,e[23]=x,e[24]=y):y=e[24],y},xF=t=>{const e=K.c(28),{hasSearch:n,engineName:o,database:r,children:s}=t,[i,a]=X.useState(!1),[l,d]=X.useState(!1);let u,h,f;e[0]!==n?(u=()=>{a(n)},h=[n],e[0]=n,e[1]=u,e[2]=h):(u=e[1],h=e[2]),X.useEffect(u,h),e[3]!==i||e[4]!==l?(f=()=>{a(!i),d(!l)},e[3]=i,e[4]=l,e[5]=f):f=e[5];const m=`${o}:${r.name}`;let _;e[6]!==i?(_=c.jsx(FS,{isExpanded:i}),e[6]=i,e[7]=_):_=e[7];const g=l&&i?"text-foreground":"text-muted-foreground";let p,b;e[8]!==g?(p=Ne("h-4 w-4",g),e[8]=g,e[9]=p):p=e[9],e[10]!==p?(b=c.jsx(lr,{className:p}),e[10]=p,e[11]=b):b=e[11];const x=l&&i&&"font-semibold";let y,v,C,S;e[12]!==x?(y=Ne(x),e[12]=x,e[13]=y):y=e[13],e[14]!==r.name?(v=r.name===""?c.jsx("i",{children:"Not connected"}):r.name,e[14]=r.name,e[15]=v):v=e[15],e[16]!==y||e[17]!==v?(C=c.jsx("span",{className:y,children:v}),e[16]=y,e[17]=v,e[18]=C):C=e[18],e[19]!==C||e[20]!==f||e[21]!==m||e[22]!==_||e[23]!==b?(S=c.jsxs(mo,{className:"text-sm flex flex-row gap-1 items-center cursor-pointer rounded-none",onSelect:f,value:m,children:[_,b,C]}),e[19]=C,e[20]=f,e[21]=m,e[22]=_,e[23]=b,e[24]=S):S=e[24];const E=i&&s;let N;return e[25]!==S||e[26]!==E?(N=c.jsxs(c.Fragment,{children:[S,E]}),e[25]=S,e[26]=E,e[27]=N):N=e[27],N},yF=t=>{const e=K.c(20),{schemas:n,defaultSchema:o,defaultDatabase:r,engineName:s,databaseName:i,hasSearch:a,searchValue:l}=t;if(n.length===0){let h;return e[0]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(Qc,{content:"No schemas available",className:"pl-6"}),e[0]=h):h=e[0],h}let d,u;if(e[1]!==i||e[2]!==r||e[3]!==o||e[4]!==s||e[5]!==a||e[6]!==n||e[7]!==l){let h;e[9]!==l?(h=_=>!l||_.tables.some(g=>g.name.toLowerCase().includes(l.toLowerCase())),e[9]=l,e[10]=h):h=e[10];const f=n.filter(h);let m;e[11]!==i||e[12]!==r||e[13]!==o||e[14]!==s||e[15]!==a||e[16]!==l?(m=_=>c.jsx(wF,{databaseName:i,schema:_,hasSearch:a,children:c.jsx(k3,{tables:_.tables,searchValue:l,sqlTableContext:{engine:s,database:i,schema:_.name,defaultSchema:o,defaultDatabase:r}})},_.name),e[11]=i,e[12]=r,e[13]=o,e[14]=s,e[15]=a,e[16]=l,e[17]=m):m=e[17],d=f.map(m),e[1]=i,e[2]=r,e[3]=o,e[4]=s,e[5]=a,e[6]=n,e[7]=l,e[8]=d}else d=e[8];return e[18]!==d?(u=c.jsx(c.Fragment,{children:d}),e[18]=d,e[19]=u):u=e[19],u},wF=t=>{const e=K.c(26),{databaseName:n,schema:o,children:r,hasSearch:s}=t,[i,a]=X.useState(!1),[l,d]=X.useState(!1),u=`${n}:${o.name}`;let h,f,m,_;if(e[0]!==s?(h=()=>{a(s)},f=[s],e[0]=s,e[1]=h,e[2]=f):(h=e[1],f=e[2]),X.useEffect(h,f),LS(o.name))return r;e[3]!==i||e[4]!==l?(m=()=>{a(!i),d(!l)},e[3]=i,e[4]=l,e[5]=m):m=e[5],e[6]!==i?(_=c.jsx(FS,{isExpanded:i}),e[6]=i,e[7]=_):_=e[7];const g=l&&i&&"text-foreground";let p,b;e[8]!==g?(p=Ne("h-4 w-4 text-muted-foreground",g),e[8]=g,e[9]=p):p=e[9],e[10]!==p?(b=c.jsx(aH,{className:p}),e[10]=p,e[11]=b):b=e[11];const x=l&&i&&"font-semibold";let y,v,C;e[12]!==x?(y=Ne(x),e[12]=x,e[13]=y):y=e[13],e[14]!==o.name||e[15]!==y?(v=c.jsx("span",{className:y,children:o.name}),e[14]=o.name,e[15]=y,e[16]=v):v=e[16],e[17]!==v||e[18]!==m||e[19]!==_||e[20]!==b||e[21]!==u?(C=c.jsxs(mo,{className:"text-sm flex flex-row gap-1 items-center pl-5 cursor-pointer rounded-none",onSelect:m,value:u,children:[_,b,v]}),e[17]=v,e[18]=m,e[19]=_,e[20]=b,e[21]=u,e[22]=C):C=e[22];const S=i&&r;let E;return e[23]!==C||e[24]!==S?(E=c.jsxs(c.Fragment,{children:[C,S]}),e[23]=C,e[24]=S,e[25]=E):E=e[25],E},k3=t=>{const e=K.c(24),{tables:n,sqlTableContext:o,searchValue:r}=t,{addTableList:s}=OS(),[i,a]=X.useState(!1),[l,d]=X.useState(!1);let u,h;e[0]!==s||e[1]!==o||e[2]!==n.length||e[3]!==i?(u=async()=>{if(n.length===0&&o&&!i){a(!0),d(!0);const{engine:p,database:b,schema:x}=o,y=await TW.request({engine:p,database:b,schema:x});if(!(y!=null&&y.tables))throw d(!1),new Error("No tables available");s({tables:y.tables,sqlTableContext:o}),d(!1)}},e[0]=s,e[1]=o,e[2]=n.length,e[3]=i,e[4]=u):u=e[4],e[5]!==o||e[6]!==n.length||e[7]!==i?(h=[n.length,o,i],e[5]=o,e[6]=n.length,e[7]=i,e[8]=h):h=e[8];const{isPending:f,error:m}=Wn(u,h);if(f||l){let p;return e[9]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(DS,{message:"Loading tables...",className:"pl-12"}),e[9]=p):p=e[9],p}if(m){let p;return e[10]!==m?(p=c.jsx(RS,{error:m,className:"pl-12"}),e[10]=m,e[11]=p):p=e[11],p}if(n.length===0){let p;return e[12]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(Qc,{content:"No tables found",className:"pl-9"}),e[12]=p):p=e[12],p}let _,g;if(e[13]!==r||e[14]!==o||e[15]!==n){let p;e[17]!==r?(p=y=>!r||y.name.toLowerCase().includes(r.toLowerCase()),e[17]=r,e[18]=p):p=e[18];const b=n.filter(p);let x;e[19]!==r||e[20]!==o?(x=y=>c.jsx(vF,{table:y,sqlTableContext:o,isSearching:!!r},y.name),e[19]=r,e[20]=o,e[21]=x):x=e[21],_=b.map(x),e[13]=r,e[14]=o,e[15]=n,e[16]=_}else _=e[16];return e[22]!==_?(g=c.jsx(c.Fragment,{children:_}),e[22]=_,e[23]=g):g=e[23],g},vF=t=>{const e=K.c(64),{table:n,sqlTableContext:o,isSearching:r}=t,{addTable:s}=OS(),[i,a]=X.useState(!1),[l,d]=X.useState(!1),u=n.columns.length>0;let h,f;e[0]!==s||e[1]!==i||e[2]!==o||e[3]!==n.name||e[4]!==u||e[5]!==l?(h=async()=>{if(i&&!u&&o&&!l){d(!0);const{engine:oe,database:ie,schema:Z}=o,Q=await MW.request({engine:oe,database:ie,schema:Z,tableName:n.name});if(!(Q!=null&&Q.table))throw new Error("No table details available");s({table:Q.table,sqlTableContext:o})}},e[0]=s,e[1]=i,e[2]=o,e[3]=n.name,e[4]=u,e[5]=l,e[6]=h):h=e[6],e[7]!==i||e[8]!==u?(f=[i,u],e[7]=i,e[8]=u,e[9]=f):f=e[9];const{isFetching:m,isPending:_,error:g}=Wn(h,f),p=Le(dc),b=Rs(),{createNewCell:x}=bt(),y=PS();let v;e[10]!==y||e[11]!==p||e[12]!==x||e[13]!==b||e[14]!==o||e[15]!==n?(v=()=>{fo({autoInstantiate:p,createNewCell:x,fromCellId:b}),y((()=>{if(n.source_type==="catalog"){const oe=o!=null&&o.database?`${o.database}.${n.name}`:n.name;return`${n.engine}.load_table("${oe}")`}if(o)return zS({table:n,columnName:"*",sqlTableContext:o});switch(n.source_type){case"local":return`mo.ui.table(${n.name})`;case"duckdb":case"connection":return zS({table:n,columnName:"*",sqlTableContext:o});default:return wc(n.source_type),""}})())},e[10]=y,e[11]=p,e[12]=x,e[13]=b,e[14]=o,e[15]=n,e[16]=v):v=e[16];const C=v;let S;e[17]!==n.num_columns||e[18]!==n.num_rows?(S=()=>{const oe=[];return n.num_rows!=null&&oe.push(`${n.num_rows} rows`),n.num_columns!=null&&oe.push(`${n.num_columns} columns`),oe.length===0?null:c.jsx("div",{className:"flex flex-row gap-2 items-center pl-6 group-hover:hidden",children:c.jsx("span",{className:"text-xs text-muted-foreground",children:oe.join(", ")})})},e[17]=n.num_columns,e[18]=n.num_rows,e[19]=S):S=e[19];const E=S;let N;e[20]!==g||e[21]!==m||e[22]!==_||e[23]!==o||e[24]!==n?(N=()=>{if(_||m)return c.jsx(DS,{message:"Loading columns...",className:"pl-12"});if(g)return c.jsx(RS,{error:g,className:"pl-12"});const oe=n.columns;return oe.length===0?c.jsx(Qc,{content:"No columns found",className:"pl-12"}):oe.map(ie=>c.jsx(kF,{table:n,column:ie,sqlTableContext:o},ie.name))},e[20]=g,e[21]=m,e[22]=_,e[23]=o,e[24]=n,e[25]=N):N=e[25];const j=N;let T;e[26]!==i||e[27]!==r||e[28]!==n.source_type||e[29]!==n.type?(T=()=>{if(n.source_type==="local")return;const oe=n.type==="table"?tH:wm;return c.jsx(oe,{className:"h-3 w-3",strokeWidth:i||r?2.5:void 0})},e[26]=i,e[27]=r,e[28]=n.source_type,e[29]=n.type,e[30]=T):T=e[30];const A=T,M=o?`${o.database}.${o.schema}.${n.name}`:n.name,P=o&&(LS(o.schema)?"pl-9":"pl-12"),R=(i||r)&&"font-semibold";let L,B,U,D,k,$,I,W,G,q,Y,ee;return e[31]!==P||e[32]!==R?(L=Ne("rounded-none group h-8 cursor-pointer",P,R),e[31]=P,e[32]=R,e[33]=L):L=e[33],e[34]!==i?(B=()=>a(!i),e[34]=i,e[35]=B):B=e[35],e[36]!==A?(U=A(),e[36]=A,e[37]=U):U=e[37],e[38]!==n.name?(D=c.jsx("span",{className:"text-sm",children:n.name}),e[38]=n.name,e[39]=D):D=e[39],e[40]!==U||e[41]!==D?(k=c.jsxs("div",{className:"flex gap-2 items-center flex-1",children:[U,D]}),e[40]=U,e[41]=D,e[42]=k):k=e[42],e[43]!==E?($=E(),e[43]=E,e[44]=$):$=e[44],e[45]!==C?(I=Qn.stopPropagation(()=>C()),e[45]=C,e[46]=I):I=e[46],e[47]===Symbol.for("react.memo_cache_sentinel")?(W=c.jsx(nH,{className:"h-3 w-3"}),e[47]=W):W=e[47],e[48]!==I?(G=c.jsx(Te,{content:"Add table to notebook",delayDuration:400,children:c.jsx(Ae,{className:"group-hover:inline-flex hidden",variant:"text",size:"icon",onClick:I,children:W})}),e[48]=I,e[49]=G):G=e[49],e[50]!==i||e[51]!==B||e[52]!==k||e[53]!==$||e[54]!==G||e[55]!==L||e[56]!==M?(q=c.jsxs(mo,{className:L,value:M,"aria-selected":i,forceMount:!0,onSelect:B,children:[k,$,G]}),e[50]=i,e[51]=B,e[52]=k,e[53]=$,e[54]=G,e[55]=L,e[56]=M,e[57]=q):q=e[57],e[58]!==i||e[59]!==j?(Y=i&&j(),e[58]=i,e[59]=j,e[60]=Y):Y=e[60],e[61]!==q||e[62]!==Y?(ee=c.jsxs(c.Fragment,{children:[q,Y]}),e[61]=q,e[62]=Y,e[63]=ee):ee=e[63],ee},kF=t=>{var I,W;const e=K.c(51),{table:n,column:o,sqlTableContext:r}=t,[s,i]=X.useState(!1),a=Le(TS),l=Ot(oH);let d,u;e[0]!==a?(d=()=>{a&&i(!1)},u=[a],e[0]=a,e[1]=d,e[2]=u):(d=e[1],u=e[2]),X.useEffect(d,u),l(s?G=>new Set([...G,`${n.name}:${o.name}`]):G=>(G.delete(`${n.name}:${o.name}`),new Set(G)));const h=PS(),{columnsPreviews:f}=rH();let m;e[3]!==o.name||e[4]!==n.primary_keys?(m=((I=n.primary_keys)==null?void 0:I.includes(o.name))||!1,e[3]=o.name,e[4]=n.primary_keys,e[5]=m):m=e[5];const _=m;let g;e[6]!==o.name||e[7]!==n.indexes?(g=((W=n.indexes)==null?void 0:W.includes(o.name))||!1,e[6]=o.name,e[7]=n.indexes,e[8]=g):g=e[8];const p=g;let b;e[9]!==h?(b=G=>{h(G)},e[9]=h,e[10]=b):b=e[10];const x=b,y=SF,v=s?"font-semibold":"";let C;e[11]!==o.name||e[12]!==v?(C=c.jsx("span",{className:v,children:o.name}),e[11]=o.name,e[12]=v,e[13]=C):C=e[13];const S=C,E=`${n.name}.${o.name}`,N=`${n.name}.${o.name}`;let j;e[14]!==s?(j=()=>i(!s),e[14]=s,e[15]=j):j=e[15];const T=r?"pl-14":"pl-7";let A,M,P,R,L,B,U,D,k,$;return e[16]!==T?(A=Ne("flex flex-row gap-2 items-center flex-1",T),e[16]=T,e[17]=A):A=e[17],e[18]!==o.type||e[19]!==S?(M=c.jsx(sH,{columnName:S,dataType:o.type}),e[18]=o.type,e[19]=S,e[20]=M):M=e[20],e[21]!==_?(P=_&&y({tooltipContent:"Primary key",content:"PK"}),e[21]=_,e[22]=P):P=e[22],e[23]!==p?(R=p&&y({tooltipContent:"Indexed",content:"IDX"}),e[23]=p,e[24]=R):R=e[24],e[25]!==A||e[26]!==M||e[27]!==P||e[28]!==R?(L=c.jsxs("div",{className:A,children:[M,P,R]}),e[25]=A,e[26]=M,e[27]=P,e[28]=R,e[29]=L):L=e[29],e[30]!==o.name?(B=c.jsx(Te,{content:"Copy column name",delayDuration:400,children:c.jsx(Ae,{variant:"text",size:"icon",className:"group-hover:opacity-100 opacity-0 hover:bg-muted text-muted-foreground hover:text-foreground",children:c.jsx(SS,{tooltip:!1,value:o.name,className:"h-3 w-3"})})}),e[30]=o.name,e[31]=B):B=e[31],e[32]!==o.external_type?(U=c.jsx("span",{className:"text-xs text-muted-foreground",children:o.external_type}),e[32]=o.external_type,e[33]=U):U=e[33],e[34]!==j||e[35]!==L||e[36]!==B||e[37]!==U||e[38]!==E||e[39]!==N?(D=c.jsxs(mo,{className:"rounded-none py-1 group cursor-pointer",value:N,onSelect:j,children:[L,B,U]},E),e[34]=j,e[35]=L,e[36]=B,e[37]=U,e[38]=E,e[39]=N,e[40]=D):D=e[40],e[41]!==o||e[42]!==f||e[43]!==x||e[44]!==s||e[45]!==r||e[46]!==n?(k=s&&c.jsx("div",{className:"pl-10 pr-2 py-2 bg-[var(--slate-1)] shadow-inner border-b",children:c.jsx(Ic,{children:c.jsx(iH,{table:n,column:o,onAddColumnChart:x,preview:f.get(r?`${r.database}.${r.schema}.${n.name}:${o.name}`:`${n.name}:${o.name}`),sqlTableContext:r})})}),e[41]=o,e[42]=f,e[43]=x,e[44]=s,e[45]=r,e[46]=n,e[47]=k):k=e[47],e[48]!==D||e[49]!==k?($=c.jsxs(c.Fragment,{children:[D,k]}),e[48]=D,e[49]=k,e[50]=$):$=e[50],$};function SF(t){const{tooltipContent:e,content:n}=t;return c.jsx(Te,{content:e,delayDuration:100,children:c.jsx("span",{className:"text-xs text-black bg-gray-100 dark:invert rounded px-1",children:n})})}const CF=()=>{const t=K.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=c.jsx(_F,{}),t[0]=e):e=t[0],e},NF=()=>{const t=K.c(5),{documentation:e}=Le(lH);if(!e){let r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(yn,{title:"View docs as you type",description:"Move your text cursor over a symbol to see its documentation.",icon:c.jsx(_d,{})}),t[0]=r):r=t[0],r}let n,o;return t[1]!==e?(n=sp({html:e}),t[1]=e,t[2]=n):n=t[2],t[3]!==n?(o=c.jsx("div",{className:"p-3 overflow-y-auto overflow-x-hidden h-full docs-documentation flex flex-col gap-4",children:n}),t[3]=n,t[4]=o):o=t[4],o},jF=()=>{const t=K.c(5),e=cH();if(e.length===0){let r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(yn,{title:"No errors!",icon:c.jsx(Jp,{})}),t[0]=r):r=t[0],r}let n,o;return t[1]!==e?(n=e.map(EF),t[1]=e,t[2]=n):n=t[2],t[3]!==n?(o=c.jsx("div",{className:"flex flex-col overflow-auto",children:n}),t[3]=n,t[4]=o):o=t[4],o};function EF(t){return c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-mono font-semibold bg-muted border-y px-2 py-1",children:c.jsx(dH,{cellId:t.cellId})}),c.jsx("div",{className:"px-2",children:c.jsx(uH,{errors:t.output.data,cellId:t.cellId},t.cellId)},t.cellId)]},t.cellId)}const dm=new Map,IF=({file:t,onOpenNotebook:e})=>{const{theme:n}=xr(),o=Le(mc),[r,s]=O.useState(""),{data:i,isPending:a,error:l,setData:d}=Wn(async()=>{const g=await ap({path:t.path}),p=g.contents||"";return s(dm.get(t.path)||p),g},[t.path]),u=async()=>{r!==(i==null?void 0:i.contents)&&await xH({path:t.path,contents:r}).then(g=>{g.success&&(d(p=>({...p,contents:r})),s(r))})},h=O.useRef(r);if(h.current=r,O.useEffect(()=>()=>{if(!(i!=null&&i.contents))return;const g=h.current;g===i.contents?dm.delete(t.path):dm.set(t.path,g)},[t.path,i==null?void 0:i.contents]),l)return c.jsx(Vr,{error:l});if(a||!i)return null;const f=i.mimeType||"text/plain",m=f in um;if(!i.contents&&!m)return c.jsxs("div",{className:"grid grid-cols-2 gap-2 p-6",children:[c.jsx("div",{className:"font-bold text-muted-foreground",children:"Name"}),c.jsx("div",{children:i.file.name}),c.jsx("div",{className:"font-bold text-muted-foreground",children:"Type"}),c.jsx("div",{children:f})]});const _=c.jsxs("div",{className:"text-xs text-muted-foreground p-1 flex justify-end gap-2 border-b",children:[t.isMarimoFile&&!un()&&c.jsx(Te,{content:"Open notebook",children:c.jsx(xn,{size:"small",onClick:g=>e(g),children:c.jsx(Nc,{})})}),c.jsx(Te,{content:"Download",children:c.jsx(xn,{size:"small",onClick:()=>{if(S3(f)){const g=_H(i.contents,f);return void bH(g,i.file.name)}ia(new Blob([i.contents||r],{type:f}),i.file.name)},children:c.jsx(Rm,{})})}),!S3(f)&&c.jsxs(c.Fragment,{children:[c.jsx(Te,{content:"Copy contents to clipboard",children:c.jsx(xn,{size:"small",onClick:async()=>{await _n(r)},children:c.jsx(Xi,{})})}),c.jsx(Te,{content:on("global.save"),children:c.jsx(xn,{size:"small",color:r===i.contents?void 0:"green",onClick:u,disabled:r===i.contents,children:c.jsx(Ia,{})})})]})]});return f.startsWith("image/")?c.jsxs(c.Fragment,{children:[_,c.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:c.jsx(hH,{base64:i.contents,mime:f})})]}):f==="text/csv"&&i.contents?c.jsxs(c.Fragment,{children:[_,c.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:c.jsx(fH,{contents:i.contents})})]}):f.startsWith("audio/")?c.jsxs(c.Fragment,{children:[_,c.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:c.jsx(mH,{base64:i.contents,mime:f})})]}):f.startsWith("video/")?c.jsxs(c.Fragment,{children:[_,c.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:c.jsx(pH,{base64:i.contents,mime:f})})]}):f.startsWith("application/pdf")?c.jsxs(c.Fragment,{children:[_,c.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:c.jsx(gH,{base64:i.contents,mime:f})})]}):c.jsxs(c.Fragment,{children:[_,c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsx(O.Suspense,{children:c.jsx(xa,{theme:n==="dark"?"dark":"light",language:um[f]||um.default,className:"border-b",extensions:[et.lineWrapping,qn.of([{key:o.getHotkey("global.save").key,stopPropagation:!0,run:()=>r!==i.contents&&(u(),!0)}])],value:r,onChange:s})})})]})},S3=t=>t.startsWith("image/")||t.startsWith("audio/")||t.startsWith("video/")||t.startsWith("application/pdf"),um={"application/javascript":"javascript","text/markdown":"markdown","text/html":"html","text/css":"css","text/x-python":"python","application/json":"json","application/xml":"xml","text/x-yaml":"yaml","text/csv":"markdown","text/plain":"markdown",default:"markdown"},C3=zt(new class{constructor(t){this.callbacks=t,this.delegate=new fp([]),this.rootPath="",this.onChange=Hn.NOOP,this.path=new kc("/"),this.initialize=async e=>{if(this.onChange=e,this.delegate.data.length===0)try{const n=await this.callbacks.listFiles({path:this.rootPath});this.delegate=new fp(n.files),this.rootPath=n.root,this.path=kc.guessDeliminator(n.root)}catch(n){nt({title:"Failed",description:eS(n)})}this.onChange(this.delegate.data)},this.refreshAll=async e=>{const n=[this.rootPath,...e.map(r=>{var s;return(s=this.delegate.find(r))==null?void 0:s.data.path})].filter(Boolean),o=await Promise.all(n.map(r=>this.callbacks.listFiles({path:r}).catch(()=>({files:[]}))));for(const[r,s]of n.entries()){const i=o[r];s===this.rootPath?this.delegate=new fp(i.files):this.delegate.update({id:s,changes:{children:i.files}})}this.onChange(this.delegate.data)},this.relativeFromRoot=e=>{const n=this.rootPath.endsWith(this.path.deliminator)?this.rootPath:`${this.rootPath}${this.path.deliminator}`;return e.startsWith(n)?e.slice(n.length):e},this.handleResponse=e=>e.success?e:(nt({title:"Failed",description:e.message}),null)}async expand(t){const e=this.delegate.find(t);if(!e||!e.data.isDirectory)return!1;if(e.children&&e.children.length>0)return!0;const n=await this.callbacks.listFiles({path:e.data.path});return this.delegate.update({id:t,changes:{children:n.files}}),this.onChange(this.delegate.data),!0}async rename(t,e){const n=this.delegate.find(t);if(!n)return;const o=n.data.path,r=this.path.join(this.path.dirname(o),e);await this.callbacks.renameFileOrFolder({path:o,newPath:r}).then(this.handleResponse),this.delegate.update({id:t,changes:{name:e,path:r}}),this.onChange(this.delegate.data),await this.refreshAll([r])}async move(t,e){var o;const n=e?((o=this.delegate.find(e))==null?void 0:o.data.path)??e:this.rootPath;await Promise.all(t.map(r=>{this.delegate.move({id:r,parentId:e,index:0});const s=this.delegate.find(r);if(!s)return Promise.resolve();const i=this.path.join(n,this.path.basename(s.data.path));return this.delegate.update({id:r,changes:{path:i}}),this.callbacks.renameFileOrFolder({path:s.data.path,newPath:i}).then(this.handleResponse)})),this.onChange(this.delegate.data),await this.refreshAll([n])}async createFile(t,e){var r;const n=e?((r=this.delegate.find(e))==null?void 0:r.data.path)??e:this.rootPath,o=await this.callbacks.createFileOrFolder({path:n,type:"file",name:t}).then(this.handleResponse);o!=null&&o.info&&(this.delegate.create({parentId:e,index:0,data:o.info}),this.onChange(this.delegate.data),await this.refreshAll([n]))}async createFolder(t,e){var r;const n=e?((r=this.delegate.find(e))==null?void 0:r.data.path)??e:this.rootPath,o=await this.callbacks.createFileOrFolder({path:n,type:"directory",name:t}).then(this.handleResponse);o!=null&&o.info&&(this.delegate.create({parentId:e,index:0,data:o.info}),this.onChange(this.delegate.data),await this.refreshAll([n]))}async delete(t){const e=this.delegate.find(t);e&&(await this.callbacks.deleteFileOrFolder({path:e.data.path}).then(this.handleResponse),this.delegate.drop({id:t}),this.onChange(this.delegate.data))}}({listFiles:E4,createFileOrFolder:lp,deleteFileOrFolder:wH,renameFileOrFolder:yH})),AF=zt({});function TF(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=r=>{var s;e((s=r.target)==null?void 0:s.result)},o.onerror=r=>{n(new Error(`Failed to read blob: ${r.type}`))},o.readAsDataURL(t)})}function N3(t){const e=K.c(4);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const o=n;let r;return e[2]!==o?(r={multiple:!0,maxSize:104857600,onError:PF,onDropRejected:OF,onDrop:MF,...o},e[2]=o,e[3]=r):r=e[3],vH(r)}async function MF(t){for(const e of t){const n=FF(LF(e));let o="";n&&(o=kc.guessDeliminator(n).dirname(n));const r=(await TF(e)).split(",")[1];await lp({path:o,type:"file",name:e.name,contents:r})}await async function(){await at.get(C3).refreshAll([])}()}function OF(t){nt({title:"File upload failed",description:c.jsx("div",{className:"flex flex-col gap-1",children:t.map(DF)}),variant:"danger"})}function DF(t){return c.jsxs("div",{children:[t.file.name," (",t.errors.map(RF).join(", "),")"]},t.file.name)}function RF(t){return t.message}function PF(t){vt.error(t),nt({title:"File upload failed",description:t.message,variant:"danger"})}function LF(t){return t.webkitRelativePath?t.webkitRelativePath:"path"in t&&typeof t.path=="string"?t.path:"relativePath"in t&&typeof t.relativePath=="string"?t.relativePath:void 0}function FF(t){if(t)return t.replace(/^\/+/,"")}const j3=X.createContext(null),zF=t=>{const e=K.c(60),{height:n}=t,o=O.useRef(null),[r]=Qt(C3);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],e[0]=s):s=e[0];const[i,a]=O.useState(s),[l,d]=O.useState(null),{openPrompt:u}=$n(),[h,f]=Qt(AF);let m,_;e[1]!==r?(m=()=>r.initialize(a),e[1]=r,e[2]=m):m=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[3]=_):_=e[3];const{isPending:g,error:p}=Wn(m,_);let b;e[4]!==h||e[5]!==r?(b=()=>{r.refreshAll(Object.keys(h).filter(k=>h[k]))},e[4]=h,e[5]=r,e[6]=b):b=e[6];const x=qe(b);let y;e[7]!==u||e[8]!==r?(y=async()=>{u({title:"Folder name",onConfirm:async k=>{r.createFolder(k,null)}})},e[7]=u,e[8]=r,e[9]=y):y=e[9];const v=qe(y);let C;e[10]!==u||e[11]!==r?(C=async()=>{u({title:"File name",onConfirm:async k=>{r.createFile(k,null)}})},e[10]=u,e[11]=r,e[12]=C):C=e[12];const S=qe(C);let E;e[13]!==f?(E=()=>{var k;(k=o.current)==null||k.closeAll(),f({})},e[13]=f,e[14]=E):E=e[14];const N=qe(E);if(g){let k;return e[15]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsx(An,{size:"medium",centered:!0}),e[15]=k):k=e[15],k}if(p){let k;return e[16]!==p?(k=c.jsx(Vr,{error:p}),e[16]=p,e[17]=k):k=e[17],k}if(l){let k,$,I,W,G,q;return e[18]===Symbol.for("react.memo_cache_sentinel")?(k=()=>d(null),e[18]=k):k=e[18],e[19]===Symbol.for("react.memo_cache_sentinel")?($=c.jsx(Ae,{onClick:k,"data-testid":"file-explorer-back-button",variant:"text",size:"xs",className:"mb-0",children:c.jsx(It,{size:16})}),e[19]=$):$=e[19],e[20]!==l.name?(I=c.jsxs("div",{className:"flex items-center pl-1 pr-3 flex-shrink-0 border-b justify-between",children:[$,c.jsx("span",{className:"font-bold",children:l.name})]}),e[20]=l.name,e[21]=I):I=e[21],e[22]!==l.path||e[23]!==r?(W=Y=>E3(Y,r.relativeFromRoot(l.path)),e[22]=l.path,e[23]=r,e[24]=W):W=e[24],e[25]!==l||e[26]!==W?(G=c.jsx(O.Suspense,{children:c.jsx(IF,{onOpenNotebook:W,file:l})}),e[25]=l,e[26]=W,e[27]=G):G=e[27],e[28]!==I||e[29]!==G?(q=c.jsxs(c.Fragment,{children:[I,G]}),e[28]=I,e[29]=G,e[30]=q):q=e[30],q}let j;e[31]!==N||e[32]!==S||e[33]!==v||e[34]!==x||e[35]!==r?(j=c.jsx(UF,{onRefresh:x,onCreateFile:S,onCreateFolder:v,onCollapseAll:N,tree:r}),e[31]=N,e[32]=S,e[33]=v,e[34]=x,e[35]=r,e[36]=j):j=e[36];const T=n-33;let A,M,P,R,L,B,U,D;return e[37]!==r?(A=async k=>{const{ids:$}=k;for(const I of $)await r.delete(I)},M=async k=>{const{id:$,name:I}=k;await r.rename($,I)},P=async k=>{const{dragIds:$,parentId:I}=k;await r.move($,I)},e[37]=r,e[38]=A,e[39]=M,e[40]=P):(A=e[38],M=e[39],P=e[40]),e[41]===Symbol.for("react.memo_cache_sentinel")?(R=k=>{const $=k[0];$&&($.data.isDirectory||d($.data))},e[41]=R):R=e[41],e[42]!==h||e[43]!==f||e[44]!==r?(L=async k=>{if(await r.expand(k)){const $=h[k]??!1;f({...h,[k]:!$})}},e[42]=h,e[43]=f,e[44]=r,e[45]=L):L=e[45],e[46]!==i||e[47]!==h||e[48]!==A||e[49]!==M||e[50]!==P||e[51]!==L||e[52]!==T?(B=c.jsx(fW,{width:"100%",ref:o,height:T,className:"h-full",data:i,initialOpenState:h,openByDefault:!1,renderCursor:qF,disableDrop:GF,onDelete:A,onRename:M,onMove:P,onSelect:R,onToggle:L,padding:15,rowHeight:30,indent:BF,overscanCount:1e3,disableMultiSelection:!0,children:HF}),e[46]=i,e[47]=h,e[48]=A,e[49]=M,e[50]=P,e[51]=L,e[52]=T,e[53]=B):B=e[53],e[54]!==B||e[55]!==r?(U=c.jsx(j3,{value:r,children:B}),e[54]=B,e[55]=r,e[56]=U):U=e[56],e[57]!==U||e[58]!==j?(D=c.jsxs(c.Fragment,{children:[j,U]}),e[57]=U,e[58]=j,e[59]=D):D=e[59],D},BF=15,UF=t=>{const e=K.c(30),{onRefresh:n,onCreateFile:o,onCreateFolder:r,onCollapseAll:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={noDrag:!0,noDragEventsBubbling:!0},e[0]=i):i=e[0];const{getRootProps:a,getInputProps:l}=N3(i);let d,u,h,f,m,_,g,p,b,x,y,v,C,S,E;return e[1]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(ja,{size:16}),e[1]=d):d=e[1],e[2]!==o?(u=c.jsx(Te,{content:"Add file",children:c.jsx(Ae,{"data-testid":"file-explorer-add-file-button",onClick:o,variant:"text",size:"xs",children:d})}),e[2]=o,e[3]=u):u=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(cd,{size:16}),e[4]=h):h=e[4],e[5]!==r?(f=c.jsx(Te,{content:"Add folder",children:c.jsx(Ae,{"data-testid":"file-explorer-add-folder-button",onClick:r,variant:"text",size:"xs",children:h})}),e[5]=r,e[6]=f):f=e[6],e[7]!==a?(m=a({}),e[7]=a,e[8]=m):m=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(_=kH({variant:"text",size:"xs"}),g=c.jsx(CH,{size:16}),e[9]=_,e[10]=g):(_=e[9],g=e[10]),e[11]!==m?(p=c.jsx(Te,{content:"Upload file",children:c.jsx("button",{"data-testid":"file-explorer-upload-button",...m,className:_,children:g})}),e[11]=m,e[12]=p):p=e[12],e[13]!==l?(b=l({}),e[13]=l,e[14]=b):b=e[14],e[15]!==b?(x=c.jsx("input",{...b,type:"file"}),e[15]=b,e[16]=x):x=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(lS,{size:16}),e[17]=y):y=e[17],e[18]!==n?(v=c.jsx(Te,{content:"Refresh",children:c.jsx(Ae,{"data-testid":"file-explorer-refresh-button",onClick:n,variant:"text",size:"xs",children:y})}),e[18]=n,e[19]=v):v=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx(Ep,{size:16}),e[20]=C):C=e[20],e[21]!==s?(S=c.jsx(Te,{content:"Collapse all folders",children:c.jsx(Ae,{"data-testid":"file-explorer-collapse-button",onClick:s,variant:"text",size:"xs",children:C})}),e[21]=s,e[22]=S):S=e[22],e[23]!==x||e[24]!==v||e[25]!==S||e[26]!==u||e[27]!==f||e[28]!==p?(E=c.jsxs("div",{className:"flex items-center justify-end px-2 flex-shrink-0 border-b",children:[u,f,p,x,v,S]}),e[23]=x,e[24]=v,e[25]=S,e[26]=u,e[27]=f,e[28]=p,e[29]=E):E=e[29],E},VF=t=>{const e=K.c(9),{node:n,onOpenMarimoFile:o}=t;let r,s,i;return e[0]!==n?(r=a=>{n.data.isDirectory||(a.stopPropagation(),n.select())},e[0]=n,e[1]=r):r=e[1],e[2]!==n.data.isMarimoFile||e[3]!==o?(s=n.data.isMarimoFile&&!un()&&c.jsxs("span",{className:"flex-shrink-0 ml-2 text-sm hidden group-hover:inline hover:underline",onClick:o,children:["open ",c.jsx(Nc,{className:"inline ml-1",size:12})]}),e[2]=n.data.isMarimoFile,e[3]=o,e[4]=s):s=e[4],e[5]!==n.data.name||e[6]!==r||e[7]!==s?(i=c.jsxs("span",{className:"flex-1 overflow-hidden text-ellipsis",onClick:r,children:[n.data.name,s]}),e[5]=n.data.name,e[6]=r,e[7]=s,e[8]=i):i=e[8],i},$F=t=>{const e=K.c(10),{node:n}=t,o=O.useRef(null);let r,s,i,a,l;return e[0]!==n.data.name?(r=()=>{var d,u;(d=o.current)==null||d.focus(),(u=o.current)==null||u.setSelectionRange(0,n.data.name.lastIndexOf("."))},s=[n.data.name],e[0]=n.data.name,e[1]=r,e[2]=s):(r=e[1],s=e[2]),O.useEffect(r,s),e[3]!==n?(i=()=>n.reset(),a=d=>{d.key==="Escape"&&n.reset(),d.key==="Enter"&&n.submit(d.currentTarget.value)},e[3]=n,e[4]=i,e[5]=a):(i=e[4],a=e[5]),e[6]!==n.data.name||e[7]!==i||e[8]!==a?(l=c.jsx("input",{ref:o,className:"flex-1 bg-transparent border border-border text-muted-foreground",defaultValue:n.data.name,onClick:YF,onBlur:i,onKeyDown:a}),e[6]=n.data.name,e[7]=i,e[8]=a,e[9]=l):l=e[9],l},HF=({node:t,style:e,dragHandle:n})=>{const o=t.data.isDirectory?"directory":N4(t.data.name),r=j4[o],{openConfirm:s,openPrompt:i}=$n(),{createNewCell:a}=bt(),l=Rs(),d=O.use(j3),u=async g=>{E3(g,d?d.relativeFromRoot(t.data.path):t.data.path)},h=async g=>{g.stopPropagation(),g.preventDefault(),s({title:"Delete file",description:`Are you sure you want to delete ${t.data.name}?`,confirmAction:c.jsx(w4,{onClick:async()=>{await t.tree.delete(t.id)},"aria-label":"Confirm",children:"Delete"})})},f=qe(async()=>{t.open(),i({title:"Folder name",onConfirm:async g=>{d==null||d.createFolder(g,t.id)}})}),m=qe(async()=>{t.open(),i({title:"File name",onConfirm:async g=>{d==null||d.createFile(g,t.id)}})}),_=qe(async()=>{var x;if(!d||t.data.isDirectory)return;const[g,p]=SH(t.data.name),b=`${g}_copy${p}`;try{const y=await ap({path:t.data.path}),v=((x=t.parent)==null?void 0:x.data.path)||"";await lp({path:v,type:"file",name:b,contents:y.contents?btoa(y.contents):void 0}),await d.refreshAll([v])}catch{nt({title:"Failed to duplicate file",description:"Unable to create a duplicate of the file",variant:"danger"})}});return c.jsxs("div",{style:e,ref:n,className:Ne("flex items-center cursor-pointer ml-1 text-muted-foreground whitespace-nowrap group"),draggable:!0,onClick:g=>{g.stopPropagation(),t.data.isDirectory&&t.toggle()},children:[c.jsx(WF,{node:t}),c.jsxs("span",{className:Ne("flex items-center pl-1 py-1 cursor-pointer hover:bg-accent/50 hover:text-accent-foreground rounded-l flex-1 overflow-hidden group",t.willReceiveDrop&&t.data.isDirectory&&"bg-accent/80 hover:bg-accent/80 text-accent-foreground"),children:[t.data.isMarimoFile?c.jsx("img",{src:"./favicon.ico",className:"w-5 h-5 flex-shrink-0 mr-2 filter grayscale",alt:"Marimo"}):c.jsx(r,{className:"w-5 h-5 flex-shrink-0 mr-2",strokeWidth:1.5}),t.isEditing?c.jsx($F,{node:t}):c.jsx(VF,{node:t,onOpenMarimoFile:u}),c.jsxs(hr,{modal:!1,children:[c.jsx(fr,{asChild:!0,tabIndex:-1,onClick:g=>g.stopPropagation(),children:c.jsx(Ae,{"data-testid":"file-explorer-more-button",variant:"text",tabIndex:-1,size:"xs",className:"mb-0","aria-label":"More options",children:c.jsx(ld,{strokeWidth:2,className:"w-5 h-5 hidden group-hover:block"})})}),(()=>{const g={size:14,strokeWidth:1.5,className:"mr-2"};return c.jsxs(mr,{align:"end",className:"no-print w-[220px]",onClick:p=>p.stopPropagation(),onCloseAutoFocus:p=>p.preventDefault(),children:[!t.data.isDirectory&&c.jsxs(Vt,{onSelect:()=>t.select(),children:[c.jsx(dg,{...g}),"Open file"]}),!t.data.isDirectory&&!un()&&c.jsxs(Vt,{onSelect:()=>{NH({path:t.data.path})},children:[c.jsx(Nc,{...g}),"Open file in external editor"]}),t.data.isDirectory&&c.jsxs(c.Fragment,{children:[c.jsxs(Vt,{onSelect:()=>m(),children:[c.jsx(ja,{...g}),"Create file"]}),c.jsxs(Vt,{onSelect:()=>f(),children:[c.jsx(cd,{...g}),"Create folder"]}),c.jsx(bn,{})]}),c.jsxs(Vt,{onSelect:()=>t.edit(),children:[c.jsx(Kp,{...g}),"Rename"]}),!t.data.isDirectory&&c.jsxs(Vt,{onSelect:_,children:[c.jsx(Xi,{...g}),"Duplicate"]}),c.jsxs(Vt,{onSelect:async()=>{await _n(t.data.path),nt({title:"Copied to clipboard"})},children:[c.jsx(hd,{...g}),"Copy path"]}),d&&c.jsxs(Vt,{onSelect:async()=>{await _n(d.relativeFromRoot(t.data.path)),nt({title:"Copied to clipboard"})},children:[c.jsx(hd,{...g}),"Copy relative path"]}),c.jsx(bn,{}),c.jsxs(Vt,{onSelect:()=>{const{path:p}=t.data;(b=>{a({code:b,before:!1,cellId:l??"__end__"})})(BS[o](p))},children:[c.jsx(qr,{...g}),"Insert snippet for reading file"]}),c.jsxs(Vt,{onSelect:async()=>{nt({title:"Copied to clipboard",description:"Code to open the file has been copied to your clipboard. You can also drag and drop this file into the editor"});const{path:p}=t.data,b=BS[o](p);await _n(b)},children:[c.jsx(jH,{...g}),"Copy snippet for reading file"]}),t.data.isMarimoFile&&!un()&&c.jsxs(c.Fragment,{children:[c.jsx(bn,{}),c.jsxs(Vt,{onSelect:u,children:[c.jsx(sg,{...g}),"Open notebook"]})]}),c.jsx(bn,{}),!t.data.isDirectory&&c.jsxs(c.Fragment,{children:[c.jsxs(Vt,{onSelect:async()=>{const p=(await ap({path:t.data.path})).contents||"";ia(new Blob([p]),t.data.name)},children:[c.jsx(Rm,{...g}),"Download"]}),c.jsx(bn,{})]}),c.jsxs(Vt,{onSelect:h,variant:"danger",children:[c.jsx(fc,{...g}),"Delete"]})]})})()]})]})]})},WF=t=>{const e=K.c(3),{node:n}=t;if(!n.data.isDirectory){let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx("span",{className:"w-5 h-5 flex-shrink-0"}),e[0]=r):r=e[0],r}let o;return e[1]!==n.isOpen?(o=n.isOpen?c.jsx(dr,{className:"w-5 h-5 flex-shrink-0"}):c.jsx(ta,{className:"w-5 h-5 flex-shrink-0"}),e[1]=n.isOpen,e[2]=o):o=e[2],o};function E3(t,e){t.stopPropagation(),t.preventDefault(),KS(e)}function qF(){return null}function GF(t){const{parentNode:e}=t;return!e.data.isDirectory}function YF(t){return t.stopPropagation()}let I3,A3,T3;I3=()=>{const t=K.c(20),{ref:e,height:n}=EH(),o=n===void 0?1:n;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={noClick:!0,noKeyboard:!0},t[0]=r):r=t[0];const{getRootProps:s,getInputProps:i,isDragActive:a}=N3(r);let l,d,u,h,f,m,_,g;return t[1]!==s?(l=s(),t[1]=s,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(d=Ne("flex flex-col flex-1 overflow-hidden relative"),t[3]=d):d=t[3],t[4]!==i?(u=i(),t[4]=i,t[5]=u):u=t[5],t[6]!==u?(h=c.jsx("input",{...u}),t[6]=u,t[7]=h):h=t[7],t[8]!==a?(f=a&&c.jsx("div",{className:"absolute inset-0 flex items-center uppercase justify-center text-xl font-bold text-primary/90 bg-accent/85 z-10 border-2 border-dashed border-primary/90 rounded-lg pointer-events-none",children:"Drop files here"}),t[8]=a,t[9]=f):f=t[9],t[10]!==o?(m=c.jsx(zF,{height:o}),t[10]=o,t[11]=m):m=t[11],t[12]!==e||t[13]!==m?(_=c.jsx("div",{ref:e,className:"flex flex-col flex-1 overflow-hidden",children:m}),t[12]=e,t[13]=m,t[14]=_):_=t[14],t[15]!==l||t[16]!==h||t[17]!==f||t[18]!==_?(g=c.jsxs("div",{...l,className:d,children:[h,f,_]}),t[15]=l,t[16]=h,t[17]=f,t[18]=_,t[19]=g):g=t[19],g},yp=t=>{const e=K.c(6),n=t.dataTestId;let o,r;return e[0]!==t.className?(o=Ne("text-xs font-semibold text-accent-foreground",t.className),e[0]=t.className,e[1]=o):o=e[1],e[2]!==t.dataTestId||e[3]!==t.onClick||e[4]!==o?(r=c.jsx("button",{type:"button","data-testid":n,className:o,onClick:t.onClick,children:"Clear"}),e[2]=t.dataTestId,e[3]=t.onClick,e[4]=o,e[5]=r):r=e[5],r},A3=()=>{const t=K.c(9),e=IH(),{clearLogs:n}=bt();if(e.length===0){let i,a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx("code",{className:"border rounded px-1",children:"stdout"}),t[0]=i):i=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(yn,{title:"No logs",description:c.jsxs("span",{children:[i," and"," ",c.jsx("code",{className:"border rounded px-1",children:"stderr"})," logs will appear here."]}),icon:c.jsx(ym,{})}),t[1]=a):a=t[1],a}let o,r,s;return t[2]!==n?(o=c.jsx("div",{className:"flex flex-row justify-end px-2 py-1",children:c.jsx(yp,{dataTestId:"clear-logs-button",onClick:n})}),t[2]=n,t[3]=o):o=t[3],t[4]!==e?(r=c.jsx("div",{className:"overflow-auto flex-1",children:c.jsx(T3,{logs:e,className:"min-w-[300px]"})}),t[4]=e,t[5]=r):r=t[5],t[6]!==o||t[7]!==r?(s=c.jsxs(c.Fragment,{children:[o,r]}),t[6]=o,t[7]=r,t[8]=s):s=t[8],s},T3=t=>{const e=K.c(10),{logs:n,className:o}=t;let r,s,i,a,l;return e[0]!==o?(r=Ne("flex flex-col",o),e[0]=o,e[1]=r):r=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(s={whiteSpace:"pre-wrap"},e[2]=s):s=e[2],e[3]!==n?(i=n.map(XF),e[3]=n,e[4]=i):i=e[4],e[5]!==i?(a=c.jsx("pre",{className:"grid text-xs font-mono gap-1 whitespace-break-spaces font-semibold align-left",children:c.jsx("div",{className:"grid grid-cols-[30px,1fr]",style:s,children:i})}),e[5]=i,e[6]=a):a=e[6],e[7]!==r||e[8]!==a?(l=c.jsx("div",{className:r,children:a}),e[7]=r,e[8]=a,e[9]=l):l=e[9],l};function JF(t){const e=AH(t.timestamp),n=KF[t.level],o=t.level.toUpperCase();return c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",e,"]"]}),c.jsx("span",{className:Ne("flex-shrink-0",n),children:o}),c.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)]",children:["(",c.jsx(yr,{cellId:t.cellId}),")"]}),t.message]})}const KF={stdout:"text-[var(--grass-9)]",stderr:"text-[var(--red-9)]"};function XF(t,e){return c.jsxs("div",{className:"contents group",children:[c.jsx("span",{className:Ne("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","text-right col-span-1 py-1 pr-1"),children:e+1}),c.jsx("span",{className:Ne("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","px-2 flex gap-x-1.5 py-1 flex-wrap"),children:JF(t)})]},e)}const ZF=()=>{const t=K.c(7),{items:e}=Le(TH);let n,o;t[0]!==e?(o=OW(e),t[0]=e,t[1]=o):o=t[1],n=o;const r=n,{activeHeaderId:s,activeOccurrences:i}=DW(r);if(e.length===0){let l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(yn,{title:"No outline",description:"Add markdown headings to your notebook to create an outline.",icon:c.jsx(gd,{})}),t[2]=l):l=t[2],l}let a;return t[3]!==s||t[4]!==i||t[5]!==e?(a=c.jsx(RW,{items:e,activeHeaderId:s,activeOccurrences:i}),t[3]=s,t[4]=i,t[5]=e,t[6]=a):a=t[6],a},M3=zt(null),O3=t=>{const e=K.c(9),{onClick:n,loading:o,children:r,className:s}=t;if(o){let d;return e[0]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(An,{size:"small",className:"h-4 w-4 shrink-0 opacity-50"}),e[0]=d):d=e[0],d}let i,a,l;return e[1]!==s?(i=Ne("px-2 h-full text-xs text-muted-foreground hover:text-foreground","invisible group-hover:visible",s),e[1]=s,e[2]=i):i=e[2],e[3]!==n?(a=Qn.stopPropagation(n),e[3]=n,e[4]=a):a=e[4],e[5]!==r||e[6]!==i||e[7]!==a?(l=c.jsx("button",{type:"button",className:i,onClick:a,children:r}),e[5]=r,e[6]=i,e[7]=a,e[8]=l):l=e[8],l},QF=()=>{var v,C;const t=K.c(27),[e]=zr(),n=e.package_management.manager,[o,r]=X.useState(null);let s;t[0]!==n?(s=[n],t[0]=n,t[1]=s):s=t[1];const{data:i,error:a,refetch:l,isPending:d}=Wn(oz,s);if(d){let S;return t[2]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx(An,{size:"medium",centered:!0}),t[2]=S):S=t[2],S}if(a){let S;return t[3]!==a?(S=c.jsx(Vr,{error:a}),t[3]=a,t[4]=S):S=t[4],S}const u=i.tree!=null;let h;t[5]!==u||t[6]!==o?(h=function(S,E){return S==="list"?"list":E?S||"tree":"list"}(o,u),t[5]=u,t[6]=o,t[7]=h):h=t[7];const f=h,m=(v=i.tree)==null?void 0:v.name,_=(C=i==null?void 0:i.tree)==null?void 0:C.version,g=m==="<root>";let p,b,x,y;return t[8]!==n||t[9]!==l?(p=c.jsx(ez,{packageManager:n,onSuccess:l}),t[8]=n,t[9]=l,t[10]=p):p=t[10],t[11]!==g||t[12]!==u||t[13]!==m||t[14]!==_||t[15]!==f?(b=u&&c.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b",children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{type:"button",className:Ne("px-2 py-1 text-xs rounded",f==="list"?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),onClick:()=>r("list"),children:"List"}),c.jsx("button",{type:"button",className:Ne("px-2 py-1 text-xs rounded",f==="tree"?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),onClick:()=>r("tree"),children:"Tree"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"items-center border px-2 py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground rounded-sm text-ellipsis block overflow-hidden max-w-fit font-medium",title:g?"sandbox":"project",children:g?"sandbox":"project"}),m&&!g&&c.jsxs("span",{className:"text-xs text-muted-foreground",children:[m,_&&` v${_}`]})]})]}),t[11]=g,t[12]=u,t[13]=m,t[14]=_,t[15]=f,t[16]=b):b=t[16],t[17]!==i.list||t[18]!==i.tree||t[19]!==a||t[20]!==l||t[21]!==f?(x=f==="list"?c.jsx(tz,{packages:i.list,onSuccess:l}):c.jsx(nz,{tree:i.tree,error:a,onSuccess:l}),t[17]=i.list,t[18]=i.tree,t[19]=a,t[20]=l,t[21]=f,t[22]=x):x=t[22],t[23]!==p||t[24]!==b||t[25]!==x?(y=c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[p,b,x]}),t[23]=p,t[24]=b,t[25]=x,t[26]=y):y=t[26],y},ez=t=>{const e=K.c(40),{onSuccess:n,packageManager:o}=t,[r,s]=X.useState(""),{handleClick:i}=wa(),a=Le(M3),l=Ot(M3);let d,u;e[0]!==a||e[1]!==l?(d=()=>{a&&(s(a),l(null))},u=[a,l],e[0]=a,e[1]=l,e[2]=d,e[3]=u):(d=e[2],u=e[3]),X.useEffect(d,u);const{loading:h,handleInstallPackages:f}=DH();let m;e[4]!==n?(m=()=>{n(),s("")},e[4]=n,e[5]=m):m=e[5];const _=m;let g;e[6]!==f||e[7]!==r||e[8]!==_?(g=()=>{f(r.split(",").map(rz),_)},e[6]=f,e[7]=r,e[8]=_,e[9]=g):g=e[9];const p=g,b=`Install packages with ${o}...`;let x,y,v,C,S,E,N,j,T,A,M,P,R,L;e[10]!==h||e[11]!==i?(x=h?c.jsx(An,{size:"small",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}):c.jsx(Te,{content:"Change package manager",children:c.jsx(Ys,{onClick:()=>i("packageManagement"),className:"mr-2 h-4 w-4 shrink-0 opacity-50 hover:opacity-80 cursor-pointer"})}),e[10]=h,e[11]=i,e[12]=x):x=e[12],e[13]!==p?(y=I=>{I.key==="Enter"&&(I.preventDefault(),p())},e[13]=p,e[14]=y):y=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(v=I=>s(I.target.value),e[15]=v):v=e[15],e[16]!==r||e[17]!==b||e[18]!==x||e[19]!==y?(C=c.jsx(US,{placeholder:b,id:H1,icon:x,rootClassName:"flex-1 border-none",value:r,onKeyDown:y,onChange:v}),e[16]=r,e[17]=b,e[18]=x,e[19]=y,e[20]=C):C=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx("span",{className:"font-bold tracking-wide",children:"Package name:"}),e[21]=S):S=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(E=c.jsxs("div",{children:[S," A package name; this will install the latest version.",c.jsx("div",{className:"text-muted-foreground",children:"Example: httpx"})]}),N=c.jsx("span",{className:"font-bold tracking-wide",children:"Package and version:"}),e[22]=E,e[23]=N):(E=e[22],N=e[23]),e[24]===Symbol.for("react.memo_cache_sentinel")?(j=c.jsxs("div",{children:[N," ","A package with a specific version or version range.",c.jsx("div",{className:"text-muted-foreground",children:"Examples: httpx==0.27.0, httpx>=0.27.0"})]}),T=c.jsx("span",{className:"font-bold tracking-wide",children:"Git:"}),e[24]=j,e[25]=T):(j=e[24],T=e[25]),e[26]===Symbol.for("react.memo_cache_sentinel")?(A=c.jsxs("div",{children:[T," A Git repository",c.jsx("div",{className:"text-muted-foreground",children:"Example: git+https://github.com/encode/httpx"})]}),M=c.jsx("span",{className:"font-bold tracking-wide",children:"URL:"}),e[26]=A,e[27]=M):(A=e[26],M=e[27]),e[28]===Symbol.for("react.memo_cache_sentinel")?(P=c.jsxs("div",{children:[M," A remote wheel or source distribution.",c.jsx("div",{className:"text-muted-foreground",children:"Example: https://example.com/httpx-0.27.0.tar.gz"})]}),R=c.jsx("span",{className:"font-bold tracking-wide",children:"Path:"}),e[28]=P,e[29]=R):(P=e[28],R=e[29]),e[30]===Symbol.for("react.memo_cache_sentinel")?(L=c.jsx(Te,{delayDuration:300,side:"left",align:"start",content:c.jsxs("div",{className:"text-sm flex flex-col w-full max-w-[360px]",children:["Packages are installed using the package manager specified in your user configuration. Depending on your package manager, you can install packages with various formats:",c.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[E,j,A,P,c.jsxs("div",{children:[R," A local wheel, source distribution, or project directory.",c.jsx("div",{className:"text-muted-foreground",children:"Example: /example/foo-0.1.0-py3-none-any.whl"})]})]})]}),children:c.jsx(np,{className:"h-4 w-4 cursor-help text-muted-foreground hover:text-foreground bg-transparent"})}),e[30]=L):L=e[30];const B=r&&"bg-accent text-accent-foreground";let U;e[31]!==B?(U=Ne("float-right px-2 m-0 h-full text-sm text-secondary-foreground ml-2",B,"disabled:cursor-not-allowed disabled:opacity-50"),e[31]=B,e[32]=U):U=e[32];const D=!r;let k,$;return e[33]!==p||e[34]!==U||e[35]!==D?(k=c.jsx("button",{type:"button",className:U,onClick:p,disabled:D,children:"Add"}),e[33]=p,e[34]=U,e[35]=D,e[36]=k):k=e[36],e[37]!==k||e[38]!==C?($=c.jsxs("div",{className:"flex items-center w-full border-b",children:[C,L,k]}),e[37]=k,e[38]=C,e[39]=$):$=e[39],$},tz=t=>{const e=K.c(9),{onSuccess:n,packages:o}=t;if(o.length===0){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(yn,{title:"No packages",description:"No packages are installed in this environment.",icon:c.jsx(Ys,{})}),e[0]=a):a=e[0],a}let r,s,i;if(e[1]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(cp,{children:c.jsxs(Gs,{children:[c.jsx($r,{children:"Name"}),c.jsx($r,{children:"Version"}),c.jsx($r,{})]})}),e[1]=r):r=e[1],e[2]!==n||e[3]!==o){let a;e[5]!==n?(a=l=>c.jsxs(Gs,{className:"group",onClick:async()=>{await _n(`${l.name}==${l.version}`),nt({title:"Copied to clipboard"})},children:[c.jsx(Hr,{children:l.name}),c.jsx(Hr,{children:l.version}),c.jsxs(Hr,{className:"flex justify-end",children:[c.jsx(D3,{packageName:l.name,onSuccess:n}),c.jsx(R3,{packageName:l.name,onSuccess:n})]})]},l.name),e[5]=n,e[6]=a):a=e[6],s=o.map(a),e[2]=n,e[3]=o,e[4]=s}else s=e[4];return e[7]!==s?(i=c.jsxs(dp,{className:"overflow-auto flex-1",children:[r,c.jsx(up,{children:s})]}),e[7]=s,e[8]=i):i=e[8],i},D3=({packageName:t,onSuccess:e})=>{const[n,o]=X.useState(!1);return un()?null:c.jsx(O3,{onClick:async()=>{try{o(!0);const r=await RH({package:t,upgrade:!0});r.success?(e(),VS(t)):VS(t,r.error)}finally{o(!1)}},loading:n,children:"Upgrade"})},R3=({packageName:t,onSuccess:e})=>{const[n,o]=X.useState(!1);return c.jsx(O3,{onClick:async()=>{try{o(!0);const r=await PH({package:t});r.success?(e(),$S(t)):$S(t,r.error)}finally{o(!1)}},loading:n,children:"Remove"})},nz=t=>{const e=K.c(18),{tree:n,error:o,onSuccess:r}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[i,a]=X.useState(s);let l,d,u;if(e[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{a(new Set)},e[1]=l):l=e[1],e[2]!==n?(d=[n],e[2]=n,e[3]=d):d=e[3],X.useEffect(l,d),o){let _;return e[4]!==o?(_=c.jsx(Vr,{error:o}),e[4]=o,e[5]=_):_=e[5],_}if(!n){let _;return e[6]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(An,{size:"medium",centered:!0}),e[6]=_):_=e[6],_}if(n.dependencies.length===0){let _;return e[7]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(yn,{title:"No dependencies",description:"No package dependencies found in this environment.",icon:c.jsx(Ys,{})}),e[7]=_):_=e[7],_}e[8]===Symbol.for("react.memo_cache_sentinel")?(u=_=>{a(g=>{const p=new Set(g);return p.has(_)?p.delete(_):p.add(_),p})},e[8]=u):u=e[8];const h=u;let f,m;if(e[9]!==i||e[10]!==r||e[11]!==n.dependencies){let _;e[13]!==i||e[14]!==r?(_=(g,p)=>c.jsx("div",{className:"border-b",children:c.jsx(P3,{nodeId:`root-${p}`,node:g,level:0,isTopLevel:!0,expandedNodes:i,onToggle:h,onSuccess:r})},`${g.name}-${p}`),e[13]=i,e[14]=r,e[15]=_):_=e[15],f=n.dependencies.map(_),e[9]=i,e[10]=r,e[11]=n.dependencies,e[12]=f}else f=e[12];return e[16]!==f?(m=c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsx("div",{children:f})}),e[16]=f,e[17]=m):m=e[17],m},P3=t=>{const e=K.c(57),{nodeId:n,node:o,level:r,isTopLevel:s,expandedNodes:i,onToggle:a,onSuccess:l}=t,d=s!==void 0&&s,u=o.dependencies.length>0;let h;e[0]!==i||e[1]!==n?(h=i.has(n),e[0]=i,e[1]=n,e[2]=h):h=e[2];const f=h,m=d?0:16+16*r;let _;e[3]!==u||e[4]!==n||e[5]!==a?(_=U=>{U.key!=="Enter"&&U.key!==" "||(U.preventDefault(),u&&a(n))},e[3]=u,e[4]=n,e[5]=a,e[6]=_):_=e[6];const g=_;let p;e[7]!==u||e[8]!==n||e[9]!==a?(p=U=>{U.stopPropagation(),u&&a(n)},e[7]=u,e[8]=n,e[9]=a,e[10]=p):p=e[10];const b=p,x=u&&"select-none",y=d?"px-2 py-0.5":"";let v,C;e[11]!==x||e[12]!==y?(v=Ne("flex items-center group cursor-pointer text-sm whitespace-nowrap","hover:bg-[var(--slate-2)] focus:bg-[var(--slate-2)] focus:outline-none",x,y),e[11]=x,e[12]=y,e[13]=v):v=e[13],e[14]!==m||e[15]!==d?(C=d?{}:{paddingLeft:`${m}px`},e[14]=m,e[15]=d,e[16]=C):C=e[16];const S=u?f:void 0;let E,N,j,T,A,M,P,R,L,B;return e[17]!==u||e[18]!==f?(E=u?f?c.jsx(dr,{className:"w-4 h-4 mr-2 flex-shrink-0"}):c.jsx(ta,{className:"w-4 h-4 mr-2 flex-shrink-0"}):c.jsx("div",{className:"w-4 mr-2 flex-shrink-0"}),e[17]=u,e[18]=f,e[19]=E):E=e[19],e[20]!==o.name?(N=c.jsx("span",{className:"font-medium truncate",children:o.name}),e[20]=o.name,e[21]=N):N=e[21],e[22]!==o.version?(j=o.version&&c.jsxs("span",{className:"text-muted-foreground text-xs",children:["v",o.version]}),e[22]=o.version,e[23]=j):j=e[23],e[24]!==N||e[25]!==j?(T=c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0 py-1.5",children:[N,j]}),e[24]=N,e[25]=j,e[26]=T):T=e[26],e[27]!==o.tags?(A=o.tags.map(sz),e[27]=o.tags,e[28]=A):A=e[28],e[29]!==A?(M=c.jsx("div",{className:"flex items-center gap-1 ml-2",children:A}),e[29]=A,e[30]=M):M=e[30],e[31]!==d||e[32]!==o.name||e[33]!==l?(P=d&&c.jsxs("div",{className:"flex gap-1 invisible group-hover:visible",children:[c.jsx(D3,{packageName:o.name,onSuccess:l}),c.jsx(R3,{packageName:o.name,onSuccess:l})]}),e[31]=d,e[32]=o.name,e[33]=l,e[34]=P):P=e[34],e[35]!==b||e[36]!==g||e[37]!==E||e[38]!==T||e[39]!==M||e[40]!==P||e[41]!==v||e[42]!==C||e[43]!==S?(R=c.jsxs("div",{className:v,style:C,onClick:b,onKeyDown:g,tabIndex:0,role:"treeitem","aria-selected":!1,"aria-expanded":S,children:[E,T,M,P]}),e[35]=b,e[36]=g,e[37]=E,e[38]=T,e[39]=M,e[40]=P,e[41]=v,e[42]=C,e[43]=S,e[44]=R):R=e[44],e[45]!==i||e[46]!==u||e[47]!==f||e[48]!==r||e[49]!==o.dependencies||e[50]!==n||e[51]!==l||e[52]!==a?(L=u&&f&&c.jsx("div",{role:"group",children:o.dependencies.map((U,D)=>c.jsx(P3,{nodeId:`${n}-${D}`,node:U,level:r+1,isTopLevel:!1,expandedNodes:i,onToggle:a,onSuccess:l},`${U.name}-${D}`))}),e[45]=i,e[46]=u,e[47]=f,e[48]=r,e[49]=o.dependencies,e[50]=n,e[51]=l,e[52]=a,e[53]=L):L=e[53],e[54]!==R||e[55]!==L?(B=c.jsxs("div",{children:[R,L]}),e[54]=R,e[55]=L,e[56]=B):B=e[56],B};async function oz(){const[t,e]=await Promise.all([MH(),OH()]);return{list:t.packages,tree:e.tree}}function rz(t){return t.trim()}function sz(t,e){return t.kind==="cycle"?c.jsx("div",{className:"items-center border px-2 py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground rounded-sm text-ellipsis block overflow-hidden max-w-fit font-medium border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300",title:"cycle",children:"cycle"},e):t.kind==="extra"?c.jsx("div",{className:"items-center border px-2 py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground rounded-sm text-ellipsis block overflow-hidden max-w-fit font-medium border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300",title:t.value,children:t.value},e):t.kind==="group"?c.jsx("div",{className:"items-center border px-2 py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground rounded-sm text-ellipsis block overflow-hidden max-w-fit font-medium border-green-300 dark:border-green-700 text-green-700 dark:text-green-300",title:t.value,children:t.value},e):null}const hm=t4("marimo:scratchpadHistory:v1",[]),iz=zt(!1),az=zt(null,(t,e,n)=>{if(!(n=n.trim()))return;const o=t(hm),r=[n,...o.filter(s=>s!==n)].slice(0,15);e(hm,r)}),lz={hide_code:!1,disabled:!1},cz=()=>{const t=K.c(69),e=Ac(),[n]=zr(),{theme:o}=xr(),r=O.useRef(null),s=Rs(),{createNewCell:i,updateCellCode:a}=bt(),l=e.cellRuntime[wr],d=l==null?void 0:l.output,u=l==null?void 0:l.status,h=l==null?void 0:l.consoleOutputs,f=e.cellData[wr],m=(f==null?void 0:f.code)??"",_=Ot(az),[g,p]=Qt(iz),b=Le(hm);let x;t[0]!==_||t[1]!==m?(x=()=>{HS({code:m}),_(m)},t[0]=_,t[1]=m,t[2]=x):x=t[2];const y=qe(x);let v;t[3]!==m||t[4]!==i||t[5]!==s?(v=()=>{m.trim()&&i({code:m,before:!1,cellId:s??"__end__"})},t[3]=m,t[4]=i,t[5]=s,t[6]=v):v=t[6];const C=qe(v);let S;t[7]!==a?(S=()=>{a({cellId:wr,code:"",formattingChange:!1}),HS({code:""});const ae=r.current;ae&&ae.dispatch({changes:{from:0,to:ae.state.doc.length,insert:""}})},t[7]=a,t[8]=S):S=t[8];const E=qe(S);let N;t[9]!==p||t[10]!==a?(N=ae=>{p(!1),a({cellId:wr,code:ae,formattingChange:!1});const Ce=r.current;Ce&&Ce.dispatch({changes:{from:0,to:Ce.state.doc.length,insert:ae}})},t[9]=p,t[10]=a,t[11]=N):N=t[11];const j=qe(N),[T,A]=O.useState();let M;t[12]!==m||t[13]!==h||t[14]!==y||t[15]!==T||t[16]!==d||t[17]!==o||t[18]!==n?(M=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[40%]",children:c.jsx(sh,{theme:o,showPlaceholder:!1,id:wr,code:m,config:lz,status:"idle",serializedEditorState:null,runCell:y,userConfig:n,editorViewRef:r,setEditorView:ae=>{r.current=ae},hidden:!1,showHiddenCode:Hn.NOOP,languageAdapter:T,setLanguageAdapter:A})}),c.jsx("div",{className:"flex-1 overflow-auto flex-shrink-0",children:c.jsx(Jc,{allowExpand:!1,output:d,className:"output-area",cellId:wr,stale:!1,loading:!1})}),c.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[35%]",children:c.jsx(_p,{consoleOutputs:h,className:"overflow-auto",stale:!1,cellName:n4,onSubmitDebugger:Hn.NOOP,cellId:wr,debuggerActive:!1})})]}),t[12]=m,t[13]=h,t[14]=y,t[15]=T,t[16]=d,t[17]=o,t[18]=n,t[19]=M):M=t[19];const P=M;let R;t[20]!==j||t[21]!==b||t[22]!==g||t[23]!==o?(R=()=>g?c.jsx("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:c.jsx("div",{className:"overflow-auto flex flex-col gap-3",children:b.map((ae,Ce)=>c.jsx("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>j(ae),children:c.jsx(O.Suspense,{children:c.jsx(xa,{language:"python",theme:o,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:ae.trim(),editable:!1,readOnly:!0})})},Ce))})}):null,t[20]=j,t[21]=b,t[22]=g,t[23]=o,t[24]=R):R=t[24];const L=R;let B,U,D,k,$,I,W,G,q,Y,ee;t[25]===Symbol.for("react.memo_cache_sentinel")?(B=bm.create(wr),U=c.jsx("p",{className:"mx-2 my-2 text-muted-foreground text-sm",children:"Use this scratchpad cell to experiment with code without restrictions on variable names. Scratchpad code is ephemeral: variables defined in the scratchpad aren't saved to notebook memory, and the code is not saved in the notebook file."}),t[25]=B,t[26]=U):(B=t[25],U=t[26]),t[27]===Symbol.for("react.memo_cache_sentinel")?(D=on("cell.run"),t[27]=D):D=t[27],t[28]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsx(Wr,{color:"var(--grass-11)",size:16}),t[28]=k):k=t[28],t[29]!==y||t[30]!==g?($=c.jsx(Te,{content:D,children:c.jsx(Ae,{"data-testid":"scratchpad-run-button",onClick:y,disabled:g,variant:"text",size:"xs",children:k})}),t[29]=y,t[30]=g,t[31]=$):$=t[31],t[32]===Symbol.for("react.memo_cache_sentinel")?(I=c.jsx(Ap,{size:16}),t[32]=I):I=t[32],t[33]!==E||t[34]!==g?(W=c.jsx(Te,{content:"Clear code and outputs",children:c.jsx(Ae,{disabled:g,size:"xs",variant:"text",onClick:E,children:I})}),t[33]=E,t[34]=g,t[35]=W):W=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(G=c.jsx(qr,{size:16}),t[36]=G):G=t[36],t[37]!==C||t[38]!==g?(q=c.jsx(ei,{children:c.jsx(Te,{content:"Insert code",children:c.jsx(Ae,{disabled:g,size:"xs",variant:"text",onClick:C,children:G})})}),t[37]=C,t[38]=g,t[39]=q):q=t[39],t[40]!==u?(Y=(u==="running"||u==="queued")&&c.jsx(An,{className:"inline",size:"small"}),t[40]=u,t[41]=Y):Y=t[41],t[42]===Symbol.for("react.memo_cache_sentinel")?(ee=c.jsx("div",{className:"flex-1"}),t[42]=ee):ee=t[42];const oe=g&&"bg-[var(--sky-3)] rounded-none";let ie,Z;t[43]!==oe?(ie=Ne(oe),t[43]=oe,t[44]=ie):ie=t[44],t[45]!==g||t[46]!==p?(Z=()=>p(!g),t[45]=g,t[46]=p,t[47]=Z):Z=t[47];const Q=b.length===0;let me,fe,de,ue,ce,ke,Se;return t[48]===Symbol.for("react.memo_cache_sentinel")?(me=c.jsx(Lp,{size:16}),t[48]=me):me=t[48],t[49]!==ie||t[50]!==Z||t[51]!==Q?(fe=c.jsx(Te,{content:"Toggle history",children:c.jsx(Ae,{size:"xs",variant:"text",className:ie,onClick:Z,disabled:Q,children:me})}),t[49]=ie,t[50]=Z,t[51]=Q,t[52]=fe):fe=t[52],t[53]!==$||t[54]!==W||t[55]!==q||t[56]!==Y||t[57]!==fe?(de=c.jsxs("div",{className:"flex items-center flex-shrink-0",children:[$,W,q,Y,ee,fe]}),t[53]=$,t[54]=W,t[55]=q,t[56]=Y,t[57]=fe,t[58]=de):de=t[58],t[59]!==P?(ue=P(),t[59]=P,t[60]=ue):ue=t[60],t[61]!==L?(ce=L(),t[61]=L,t[62]=ce):ce=t[62],t[63]!==ue||t[64]!==ce?(ke=c.jsxs("div",{className:"flex-1 divide-y relative overflow-hidden flex flex-col",children:[ue,ce]}),t[63]=ue,t[64]=ce,t[65]=ke):ke=t[65],t[66]!==de||t[67]!==ke?(Se=c.jsxs("div",{className:"flex flex-col h-full overflow-hidden divide-y",id:B,children:[U,de,ke]}),t[66]=de,t[67]=ke,t[68]=Se):Se=t[68],Se},dz=()=>{const t=K.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=c.jsx(cz,{}),t[0]=e):e=t[0],e},uz=()=>{const t=K.c(23),{openModal:e,closeModal:n}=$n();let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const{data:r,isPending:s,error:i,refetch:a}=Wn(fz,o);if(s){let b;return t[1]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(An,{size:"medium",centered:!0}),t[1]=b):b=t[1],b}if(i){let b;return t[2]!==i?(b=c.jsx(Vr,{error:i}),t[2]=i,t[3]=b):b=t[3],b}let l;t[4]!==r?(l=r.filter(mz).map(pz),t[4]=r,t[5]=l):l=t[5];const d=l;if(r.length===0){let b;return t[6]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(yn,{title:"No environment variables",description:"No environment variables are available in this notebook.",icon:c.jsx(dd,{})}),t[6]=b):b=t[6],b}let u,h,f,m,_,g,p;return t[7]!==n||t[8]!==e||t[9]!==d||t[10]!==a?(u=()=>e(c.jsx(Fg,{providerNames:d,onSuccess:()=>{a(),n()},onClose:n})),t[7]=n,t[8]=e,t[9]=d,t[10]=a,t[11]=u):u=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(br,{className:"h-4 w-4"}),t[12]=h):h=t[12],t[13]!==u?(f=c.jsx("div",{className:"flex justify-end h-8 border-b",children:c.jsx("button",{type:"button",className:"float-right border-l px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:u,children:h})}),t[13]=u,t[14]=f):f=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx(cp,{children:c.jsxs(Gs,{children:[c.jsx($r,{children:"Environment Variable"}),c.jsx($r,{children:"Source"}),c.jsx($r,{})]})}),t[15]=m):m=t[15],t[16]!==r?(_=r.map(gz),t[16]=r,t[17]=_):_=t[17],t[18]!==_?(g=c.jsxs(dp,{className:"overflow-auto flex-1 mb-16",children:[m,c.jsx(up,{children:_})]}),t[18]=_,t[19]=g):g=t[19],t[20]!==f||t[21]!==g?(p=c.jsxs("div",{className:"flex flex-col h-full",children:[f,g]}),t[20]=f,t[21]=g,t[22]=p):p=t[22],p},hz=t=>{const e=K.c(9),{className:n,ariaLabel:o,onCopy:r}=t,[s,i]=X.useState(!1);let a;e[0]!==r?(a=()=>{r(),i(!0),setTimeout(()=>i(!1),1e3)},e[0]=r,e[1]=a):a=e[1];const l=a;let d,u;return e[2]!==s?(d=s?c.jsx(Cc,{className:"w-3 h-3 text-green-700 rounded"}):c.jsx(Xi,{className:"w-3 h-3 hover:bg-muted rounded"}),e[2]=s,e[3]=d):d=e[3],e[4]!==o||e[5]!==n||e[6]!==l||e[7]!==d?(u=c.jsx("button",{type:"button",className:n,onClick:l,"aria-label":o,children:d}),e[4]=o,e[5]=n,e[6]=l,e[7]=d,e[8]=u):u=e[8],u};async function fz(){return Lg((await oC.request({})).secrets)}function mz(t){return t.provider!=="env"}function pz(t){return t.name}function gz(t){return t.keys.map(e=>c.jsxs(Gs,{className:"group",children:[c.jsx(Hr,{children:e}),c.jsx(Hr,{children:t.provider!=="env"&&c.jsx(NS,{variant:"outline",className:"select-none",children:t.name})}),c.jsx(Hr,{children:c.jsx(hz,{ariaLabel:`Copy ${e}`,onCopy:async()=>{await _n(`os.environ["${e}"]`),nt({title:"Copied to clipboard",description:`os.environ["${e}"] has been copied to your clipboard.`})},className:Ne("float-right px-2 h-full text-xs text-muted-foreground hover:text-foreground","invisible group-hover:visible")})})]},`${t.name}-${e}`))}const _z=t=>{const e=K.c(6),{children:n}=t,{openModal:o,closeModal:r}=$n();let s,i;return e[0]!==r||e[1]!==o?(s=()=>o(c.jsx(xz,{onClose:r})),e[0]=r,e[1]=o,e[2]=s):s=e[2],e[3]!==n||e[4]!==s?(i=c.jsx(bS,{onClick:s,children:n}),e[3]=n,e[4]=s,e[5]=i):i=e[5],i},bz=[et.lineWrapping],xz=t=>{const e=K.c(23),{onClose:n}=t,[o,r]=O.useState(""),{theme:s}=xr();let i,a,l,d,u,h;e[0]!==n?(i=async y=>{y.preventDefault();const v=new FormData(y.target),C=v.get("title"),S=v.get("description"),E=v.get("code");fetch("https://marimo.io/api/suggest-snippet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:C,description:S,code:E})}),n(),nt({title:"Snippet Submitted",description:"Thank you for contributing! We will review your snippet shortly."})},e[0]=n,e[1]=i):i=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(sr,{children:"Contribute a Snippet"}),e[2]=a):a=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsxs(Ts,{children:[a,c.jsxs(Ms,{children:["Have a useful snippet you want to share with the community? Submit it here or make a pull request"," ",c.jsx("a",{href:Zn.githubPage,target:"_blank",className:"underline",children:"on GitHub"}),"."]})]}),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(ir,{id:"title",name:"title",autoFocus:!0,placeholder:"Title",required:!0,autoComplete:"off"}),u=c.jsx(LH,{id:"description",name:"description",autoFocus:!0,placeholder:"Description",rows:5,required:!0,autoComplete:"off"}),e[4]=d,e[5]=u):(d=e[4],u=e[5]),e[6]!==o?(h=c.jsx("input",{type:"hidden",name:"code",value:o}),e[6]=o,e[7]=h):h=e[7];const f=s==="dark"?"dark":"light";let m,_,g,p,b,x;return e[8]!==o||e[9]!==f?(m=c.jsx(xa,{theme:f,language:"python",className:"cm border rounded overflow-hidden",extensions:bz,value:o,onChange:r}),e[8]=o,e[9]=f,e[10]=m):m=e[10],e[11]!==h||e[12]!==m?(_=c.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[d,u,h,m]}),e[11]=h,e[12]=m,e[13]=_):_=e[13],e[14]!==n?(g=c.jsx(Ae,{"data-testid":"snippet-cancel-button",variant:"secondary",onClick:n,children:"Cancel"}),e[14]=n,e[15]=g):g=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(Ae,{"data-testid":"snippet-send-button","aria-label":"Save",variant:"default",type:"submit",children:"Send"}),e[16]=p):p=e[16],e[17]!==g?(b=c.jsxs(Ki,{children:[g,p]}),e[17]=g,e[18]=b):b=e[18],e[19]!==i||e[20]!==b||e[21]!==_?(x=c.jsx(ar,{className:"w-fit",children:c.jsxs("form",{onSubmit:i,children:[l,_,b]})}),e[19]=i,e[20]=b,e[21]=_,e[22]=x):x=e[22],x},yz=[et.lineWrapping],wz=()=>{const t=K.c(20),[e,n]=X.useState();let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const{data:r,error:s,isPending:i}=Wn(Sz,o);if(s){let b;return t[1]!==s?(b=c.jsx(Vr,{error:s}),t[1]=s,t[2]=b):b=t[2],b}if(i||!r){let b;return t[3]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(An,{size:"medium",centered:!0}),t[3]=b):b=t[3],b}const a=e?"h-1/3":"h-full";let l,d,u,h,f,m,_,g,p;return t[4]!==a?(l=Ne("border-b rounded-none",a),t[4]=a,t[5]=l):l=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(na,{placeholder:"Search snippets...",className:"h-6 m-1",rootClassName:"flex-1 border-r"}),t[6]=d):d=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsxs("div",{className:"flex items-center w-full",children:[d,c.jsx(_z,{children:c.jsx("button",{className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:c.jsx(br,{className:"h-4 w-4"})})})]}),h=c.jsx(gc,{children:"No results"}),t[7]=u,t[8]=h):(u=t[7],h=t[8]),t[9]===Symbol.for("react.memo_cache_sentinel")?(f=b=>n(b),t[9]=f):f=t[9],t[10]!==r.snippets?(m=c.jsx(kz,{onSelect:f,snippets:r.snippets}),t[10]=r.snippets,t[11]=m):m=t[11],t[12]!==l||t[13]!==m?(_=c.jsxs(Ec,{className:l,children:[u,h,m]}),t[12]=l,t[13]=m,t[14]=_):_=t[14],t[15]!==e?(g=c.jsx(O.Suspense,{children:c.jsx("div",{className:"h-2/3 snippet-viewer flex flex-col",children:e?c.jsx(vz,{snippet:e},e.title):c.jsx(yn,{title:"",description:"Click on a snippet to view its content."})})}),t[15]=e,t[16]=g):g=t[16],t[17]!==_||t[18]!==g?(p=c.jsxs("div",{className:"flex-1 overflow-hidden",children:[_,g]}),t[17]=_,t[18]=g,t[19]=p):p=t[19],p},vz=t=>{const e=K.c(27),{snippet:n}=t,{theme:o}=xr(),{createNewCell:r}=bt(),s=Rs();let i;e[0]!==r||e[1]!==s||e[2]!==n.sections?(i=()=>{for(const p of[...n.sections].reverse())p.code&&r({code:p.code,before:!1,cellId:s??"__end__",skipIfCodeExists:!0})},e[0]=r,e[1]=s,e[2]=n.sections,e[3]=i):i=e[3];const a=i;let l;e[4]!==r||e[5]!==s?(l=p=>{r({code:p,before:!1,cellId:s??"__end__"})},e[4]=r,e[5]=s,e[6]=l):l=e[6];const d=l;let u,h,f,m,_,g;if(e[7]!==n.title?(u=c.jsx("div",{className:"text-sm font-semibold bg-muted border-y px-2 py-1",children:n.title}),e[7]=n.title,e[8]=u):u=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(qr,{className:"ml-2 h-4 w-4"}),e[9]=h):h=e[9],e[10]!==a?(f=c.jsx("div",{className:"flex justify-end",children:c.jsx(ei,{children:c.jsxs(Ae,{className:"float-right",size:"xs",variant:"outline",onClick:a,children:["Insert snippet",h]})})}),e[10]=a,e[11]=f):f=e[11],e[12]!==d||e[13]!==n.sections||e[14]!==n.title||e[15]!==o){let p;e[17]!==d||e[18]!==n.title||e[19]!==o?(p=b=>{const{code:x,html:y,id:v}=b;return y?c.jsx("div",{children:sp({html:y})},`${n.title}-${v}`):x?c.jsxs("div",{className:"relative hover-actions-parent pr-2",children:[c.jsx(ei,{children:c.jsx(Te,{content:"Insert snippet",children:c.jsx(Ae,{className:"absolute -top-2 -right-1 z-10 hover-action px-2 bg-background",size:"sm",variant:"outline",onClick:()=>{d(x)},children:c.jsx(qr,{className:"h-5 w-5"})})})}),c.jsx(O.Suspense,{children:c.jsx(xa,{theme:o==="dark"?"dark":"light",language:"python",className:"cm border rounded overflow-hidden",extensions:yz,value:x,readOnly:!0},`${n.title}-${v}`)})]},`${n.title}-${v}`):null},e[17]=d,e[18]=n.title,e[19]=o,e[20]=p):p=e[20],m=n.sections.map(p),e[12]=d,e[13]=n.sections,e[14]=n.title,e[15]=o,e[16]=m}else m=e[16];return e[21]!==f||e[22]!==m?(_=c.jsxs("div",{className:"px-2 py-2 space-y-4 overflow-auto flex-1",children:[f,m]}),e[21]=f,e[22]=m,e[23]=_):_=e[23],e[24]!==u||e[25]!==_?(g=c.jsxs(c.Fragment,{children:[u,_]}),e[24]=u,e[25]=_,e[26]=g):g=e[26],g},kz=t=>{const e=K.c(7),{snippets:n,onSelect:o}=t;let r,s;if(e[0]!==o||e[1]!==n){let i;e[3]!==o?(i=a=>c.jsx(mo,{className:"rounded-none",onSelect:()=>o(a),children:c.jsx("div",{className:"flex flex-row gap-2 items-center",children:c.jsx("span",{className:"mt-1 text-accent-foreground",children:a.title})})},a.title),e[3]=o,e[4]=i):i=e[4],r=n.map(i),e[0]=o,e[1]=n,e[2]=r}else r=e[2];return e[5]!==r?(s=c.jsx(Jm,{className:"flex flex-col overflow-auto",children:r}),e[5]=r,e[6]=s):s=e[6],s};function Sz(){return FH()}const Cz=X.lazy(()=>Km(()=>import("./tracing-Z4QREdu3.js").then(async t=>(await t.__tla,t)),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124]),import.meta.url).then(t=>({default:t.Tracing}))),Nz=()=>{const t=K.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=c.jsx(X.Suspense,{fallback:c.jsx(jz,{}),children:c.jsx(Cz,{})}),t[0]=e):e=t[0],e},jz=()=>{const t=K.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=c.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:c.jsx(An,{})}),t[0]=e):e=t[0],e},L3="name",F3="type-value",fm="defs-refs",Ez=[{id:L3,accessorFn:t=>[t.name,t.declaredBy],enableSorting:!0,sortingFn:"alphanumeric",header:({column:t})=>c.jsx(hp,{header:"Name",column:t}),cell:({getValue:t})=>{const[e,n]=t();return c.jsx(Cf,{name:e,declaredBy:n})}},{id:F3,accessorFn:t=>[t.dataType,t.value],enableSorting:!0,sortingFn:"alphanumeric",header:({column:t})=>c.jsx(hp,{header:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{children:"Type"}),c.jsx("span",{children:"Value"})]}),column:t}),cell:({getValue:t})=>{const[e,n]=t();return c.jsxs("div",{className:"max-w-[150px]",children:[c.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap text-muted-foreground font-mono text-xs",children:e}),c.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap",title:n??"",children:n})]})}},{id:fm,accessorFn:t=>[t.declaredBy,t.usedBy,t.name,t.declaredByNames,t.usedByNames],enableSorting:!0,sortingFn:"basic",header:({column:t})=>c.jsx(hp,{header:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{children:"Declared By"}),c.jsx("span",{children:"Used By"})]}),column:t}),cell:({getValue:t})=>{const[e,n,o]=t(),r=s=>{const i=Qi(s);i&&ip(i,o)};return c.jsxs("div",{className:"flex flex-col gap-1 py-1",children:[c.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-center",children:[c.jsx("span",{title:"Declared by",children:c.jsx(og,{className:"w-3.5 h-3.5 text-muted-foreground"})}),e.length===1?c.jsx(yr,{variant:"focus",cellId:e[0],skipScroll:!0,onClick:()=>r(e[0])}):c.jsx("div",{className:"text-destructive flex flex-row gap-2",children:e.slice(0,3).map((s,i)=>c.jsxs("span",{className:"flex",children:[c.jsx(yr,{variant:"focus",cellId:s,skipScroll:!0,className:"whitespace-nowrap text-destructive",onClick:()=>r(s)},s),i<e.length-1&&", "]},s))})]}),c.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-baseline",children:[c.jsx("span",{title:"Used by",children:c.jsx(Aa,{className:"w-3.5 h-3.5 text-muted-foreground"})}),c.jsx(ak,{maxCount:3,cellIds:n,skipScroll:!0,onClick:r})]})]})}}],z3=O.memo(({className:t,cellIds:e,variables:n})=>{const[o,r]=X.useState([]),[s,i]=X.useState(""),a=zH(),l=O.useMemo(()=>{const h=f=>{const m=a[f];return HH(m)?`cell-${e.indexOf(f)}`:m??`cell-${e.indexOf(f)}`};return Object.values(n).map(f=>({...f,declaredByNames:f.declaredBy.map(h),usedByNames:f.usedBy.map(h)}))},[n,a,e]),d=O.useMemo(()=>{const h=new Map;return e.forEach((f,m)=>h.set(f,m)),function({variables:f,sort:m,cellIdToIndex:_}){m||(m={id:fm,desc:!1});let g=[];switch(m.id){case L3:g=ka(f,p=>p.name);break;case F3:g=ka(f,p=>p.dataType);break;case fm:g=ka(f,p=>_.get(p.declaredBy[0]))}return m.desc?g.reverse():g}({variables:l,sort:o[0],cellIdToIndex:h})},[l,o,e]),u=BH({data:d,columns:Ez,getCoreRowModel:$H(),onGlobalFilterChange:i,getFilteredRowModel:VH(),enableFilters:!0,enableGlobalFilter:!0,enableColumnPinning:!1,getColumnCanGlobalFilter:h=>h.columnDef.enableGlobalFilter??!0,globalFilterFn:"auto",manualSorting:!0,onSortingChange:r,getSortedRowModel:UH(),state:{sorting:o,globalFilter:s}});return c.jsxs(c.Fragment,{children:[c.jsx(US,{className:"w-full",placeholder:"Search",value:s,onChange:h=>i(h.target.value)}),c.jsxs(dp,{className:Ne("w-full text-sm flex-1 border-separate border-spacing-0",t),children:[c.jsx(cp,{children:c.jsx(Gs,{className:"whitespace-nowrap text-xs",children:u.getFlatHeaders().map(h=>c.jsx($r,{className:"sticky top-0 bg-background border-b",children:WS(h.column.columnDef.header,h.getContext())},h.id))})}),c.jsx(up,{children:u.getRowModel().rows.map(h=>c.jsx(Gs,{className:"hover:bg-accent",children:h.getVisibleCells().map(f=>c.jsx(Hr,{className:"border-b",children:WS(f.column.columnDef.cell,f.getContext())},f.id))},h.id))})]})]})});z3.displayName="VariableTable";const Iz=()=>{const t=K.c(4),e=ES(),n=Zc();if(Object.keys(e).length===0){let r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx(yn,{title:"No variables",description:"Global variables will appear here.",icon:c.jsx(sc,{})}),t[0]=r):r=t[0],r}let o;return t[1]!==n.inOrderIds||t[2]!==e?(o=c.jsx(z3,{className:"flex-1",cellIds:n.inOrderIds,variables:e}),t[1]=n.inOrderIds,t[2]=e,t[3]=o):o=t[3],o},Az=X.lazy(()=>Km(()=>import("./terminal-BkOhnp-S.js"),__vite__mapDeps([125,1,2,126]),import.meta.url)),Tz=t=>{const e=K.c(121),{children:n}=t,{isSidebarOpen:o,isTerminalOpen:r,selectedPanel:s}=Sc(),{setIsSidebarOpen:i,setIsTerminalOpen:a}=sa(),l=X.useRef(null),d=X.useRef(null);let u,h,f,m,_;e[0]!==o?(u=()=>{if(!l.current)return;const xe=l.current.isCollapsed();o&&xe&&l.current.expand(),o||xe||l.current.collapse(),requestAnimationFrame(Oz)},h=[o],e[0]=o,e[1]=u,e[2]=h):(u=e[1],h=e[2]),O.useEffect(u,h),e[3]!==r?(f=()=>{if(!d.current)return;const xe=d.current.isCollapsed();r&&xe&&d.current.expand(),r||xe||d.current.collapse(),requestAnimationFrame(Rz)},m=[r],e[3]=r,e[4]=f,e[5]=m):(f=e[4],m=e[5]),O.useEffect(f,m),e[6]!==n?(_=c.jsx(ed,{id:"app",className:"relative h-full",children:c.jsx(O.Suspense,{children:n})},"app"),e[6]=n,e[7]=_):_=e[7];const g=_,p=o?"resize-handle":"resize-handle-collapsed";let b,x;e[8]!==p?(b=Ne("border-border no-print z-10",p,"vertical"),e[8]=p,e[9]=b):b=e[9],e[10]!==b?(x=c.jsx(qS,{onDragging:GS,className:b}),e[10]=b,e[11]=x):x=e[11];const y=x,v=r?"resize-handle":"resize-handle-collapsed";let C,S;e[12]!==v?(C=Ne("border-border no-print z-20",v,"horizontal"),e[12]=v,e[13]=C):C=e[13],e[14]!==C?(S=c.jsx(qS,{onDragging:GS,className:C}),e[14]=C,e[15]=S):S=e[15];const E=S;let N,j,T,A,M,P,R,L,B,U,D,k,$,I,W,G,q,Y,ee,oe,ie;e[16]!==s?(N=c.jsx("div",{className:"text-sm text-[var(--slate-11)] uppercase tracking-wide font-semibold flex-1",children:s}),e[16]=s,e[17]=N):N=e[17],e[18]!==i?(j=()=>i(!1),e[18]=i,e[19]=j):j=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(T=c.jsx(eo,{className:"w-4 h-4"}),e[20]=T):T=e[20],e[21]!==j?(A=c.jsx(Ae,{"data-testid":"close-helper-pane",className:"m-0",size:"xs",variant:"text",onClick:j,children:T}),e[21]=j,e[22]=A):A=e[22],e[23]!==N||e[24]!==A?(M=c.jsxs("div",{className:"p-3 border-b flex justify-between items-center",children:[N,A]}),e[23]=N,e[24]=A,e[25]=M):M=e[25],e[26]!==s?(P=s==="files"&&c.jsx(I3,{}),e[26]=s,e[27]=P):P=e[27],e[28]!==s?(R=s==="errors"&&c.jsx(jF,{}),e[28]=s,e[29]=R):R=e[29],e[30]!==s?(L=s==="variables"&&c.jsx(Iz,{}),e[30]=s,e[31]=L):L=e[31],e[32]!==s?(B=s==="dependencies"&&c.jsx(hF,{}),e[32]=s,e[33]=B):B=e[33],e[34]!==s?(U=s==="packages"&&c.jsx(QF,{}),e[34]=s,e[35]=U):U=e[35],e[36]!==s?(D=s==="outline"&&c.jsx(ZF,{}),e[36]=s,e[37]=D):D=e[37],e[38]!==s?(k=s==="datasources"&&c.jsx(CF,{}),e[38]=s,e[39]=k):k=e[39],e[40]!==s?($=s==="documentation"&&c.jsx(NF,{}),e[40]=s,e[41]=$):$=e[41],e[42]!==s?(I=s==="snippets"&&c.jsx(wz,{}),e[42]=s,e[43]=I):I=e[43],e[44]!==s?(W=s==="scratchpad"&&c.jsx(dz,{}),e[44]=s,e[45]=W):W=e[45],e[46]!==s?(G=s==="chat"&&c.jsx(RR,{}),e[46]=s,e[47]=G):G=e[47],e[48]!==s?(q=s==="logs"&&c.jsx(A3,{}),e[48]=s,e[49]=q):q=e[49],e[50]!==s?(Y=s==="tracing"&&c.jsx(Nz,{}),e[50]=s,e[51]=Y):Y=e[51],e[52]!==s?(ee=s==="secrets"&&c.jsx(uz,{}),e[52]=s,e[53]=ee):ee=e[53],e[54]!==P||e[55]!==R||e[56]!==L||e[57]!==B||e[58]!==U||e[59]!==D||e[60]!==k||e[61]!==$||e[62]!==I||e[63]!==W||e[64]!==G||e[65]!==q||e[66]!==Y||e[67]!==ee?(oe=c.jsx(O.Suspense,{children:c.jsxs(Kc,{children:[P,R,L,B,U,D,k,$,I,W,G,q,Y,ee]})}),e[54]=P,e[55]=R,e[56]=L,e[57]=B,e[58]=U,e[59]=D,e[60]=k,e[61]=$,e[62]=I,e[63]=W,e[64]=G,e[65]=q,e[66]=Y,e[67]=ee,e[68]=oe):oe=e[68],e[69]!==M||e[70]!==oe?(ie=c.jsx(Ic,{children:c.jsxs("div",{className:"flex flex-col h-full flex-1 overflow-hidden mr-[-4px]",children:[M,oe]})}),e[69]=M,e[70]=oe,e[71]=ie):ie=e[71];const Z=ie,Q=o&&"border-r border-l border-[var(--slate-7)]";let me,fe,de,ue,ce,ke;e[72]!==Q?(me=Ne("dark:bg-[var(--slate-1)] no-print print:hidden hide-on-fullscreen",Q),e[72]=Q,e[73]=me):me=e[73],e[74]===Symbol.for("react.memo_cache_sentinel")?(fe=(xe,Ve)=>{var Be;Ve===0&&xe===10&&((Be=l.current)==null||Be.resize(30))},e[74]=fe):fe=e[74],e[75]!==i?(de=()=>i(!1),ue=()=>i(!0),e[75]=i,e[76]=de,e[77]=ue):(de=e[76],ue=e[77]),e[78]!==Z||e[79]!==y?(ce=c.jsxs("span",{className:"flex flex-row h-full",children:[Z," ",y]}),e[78]=Z,e[79]=y,e[80]=ce):ce=e[80],e[81]!==me||e[82]!==de||e[83]!==ue||e[84]!==ce?(ke=c.jsx(ed,{ref:l,id:"helper",collapsedSize:0,collapsible:!0,className:me,minSize:10,defaultSize:0,maxSize:75,onResize:fe,onCollapse:de,onExpand:ue,children:ce},"helper"),e[81]=me,e[82]=de,e[83]=ue,e[84]=ce,e[85]=ke):ke=e[85];const Se=ke,ae=r&&"border-[var(--slate-7)]";let Ce,_e,Ee,ze,Oe,He,Fe,it,Qe;e[86]!==ae?(Ce=Ne("dark:bg-[var(--slate-1)] no-print print:hidden hide-on-fullscreen",ae),e[86]=ae,e[87]=Ce):Ce=e[87],e[88]===Symbol.for("react.memo_cache_sentinel")?(_e=(xe,Ve)=>{var Be;Ve===0&&xe===10&&((Be=d.current)==null||Be.resize(30))},e[88]=_e):_e=e[88],e[89]!==a?(Ee=()=>a(!1),ze=()=>a(!0),e[89]=a,e[90]=Ee,e[91]=ze):(Ee=e[90],ze=e[91]),e[92]===Symbol.for("react.memo_cache_sentinel")?(Oe=c.jsx("div",{}),e[92]=Oe):Oe=e[92],e[93]!==a?(He=()=>a(!1),e[93]=a,e[94]=He):He=e[94],e[95]!==r||e[96]!==He?(Fe=c.jsx(O.Suspense,{fallback:Oe,children:c.jsx(Az,{visible:r,onClose:He})}),e[95]=r,e[96]=He,e[97]=Fe):Fe=e[97],e[98]!==r||e[99]!==Fe?(it=c.jsx(fF,{isOpen:r,children:Fe}),e[98]=r,e[99]=Fe,e[100]=it):it=e[100],e[101]!==Ce||e[102]!==Ee||e[103]!==ze||e[104]!==it||e[105]!==E?(Qe=c.jsxs(ed,{ref:d,id:"terminal",collapsedSize:0,collapsible:!0,className:Ce,minSize:10,defaultSize:0,maxSize:75,onResize:_e,onCollapse:Ee,onExpand:ze,children:[E,it]},"terminal"),e[101]=Ce,e[102]=Ee,e[103]=ze,e[104]=it,e[105]=E,e[106]=Qe):Qe=e[106];const tt=Qe;let ne,ve,je,Re,J,se,ge,pe;return e[107]===Symbol.for("react.memo_cache_sentinel")?(ne=PW(),e[107]=ne):ne=e[107],e[108]===Symbol.for("react.memo_cache_sentinel")?(ve=c.jsx(Kc,{children:c.jsx(g9,{})}),e[108]=ve):ve=e[108],e[109]!==tt?(je=c.jsx(ew,{capability:"terminal",children:tt}),e[109]=tt,e[110]=je):je=e[110],e[111]!==g||e[112]!==je?(Re=c.jsx(ed,{children:c.jsxs(YS,{autoSaveId:"marimo:chrome:v1:l1",direction:"vertical",children:[g,je]})}),e[111]=g,e[112]=je,e[113]=Re):Re=e[113],e[114]===Symbol.for("react.memo_cache_sentinel")?(J=c.jsx(WH,{}),e[114]=J):J=e[114],e[115]!==Se||e[116]!==Re?(se=c.jsxs(YS,{autoSaveId:"marimo:chrome:v1:l2",direction:"horizontal",storage:ne,children:[ve,Se,Re,J]}),e[115]=Se,e[116]=Re,e[117]=se):se=e[117],e[118]===Symbol.for("react.memo_cache_sentinel")?(ge=c.jsx(Ic,{children:c.jsx(Kc,{children:c.jsx(u9,{})})}),e[118]=ge):ge=e[118],e[119]!==se?(pe=c.jsxs(LW,{children:[se,ge]}),e[119]=se,e[120]=pe):pe=e[120],pe};function Mz(){window.dispatchEvent(new Event("resize"))}function Oz(){requestAnimationFrame(Mz)}function Dz(){window.dispatchEvent(new Event("resize"))}function Rz(){requestAnimationFrame(Dz)}let B3;B3=new URL(window.location.href).searchParams.get(qH.showChrome)==="false",hC=Object.freeze(Object.defineProperty({__proto__:null,default:t=>{const e=K.c(10);if(B3){let s,i,a;return e[0]!==t?(s=c.jsx(Qy,{hideControls:!0,...t}),e[0]=t,e[1]=s):s=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(_g,{}),e[2]=i):i=e[2],e[3]!==s?(a=c.jsxs(c.Fragment,{children:[s,i]}),e[3]=s,e[4]=a):a=e[4],a}let n,o,r;return e[5]!==t?(n=c.jsx(Qy,{...t}),e[5]=t,e[6]=n):n=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(o=c.jsx(_g,{}),e[7]=o):o=e[7],e[8]!==n?(r=c.jsxs(Tz,{children:[n,o]}),e[8]=n,e[9]=r):r=e[9],r}},Symbol.toStringTag,{value:"Module"}))});export{yp as C,od as E,yn as P,UW as __tla,rd as a,hC as e,Sa as f};
